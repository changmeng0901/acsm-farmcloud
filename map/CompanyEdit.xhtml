<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	template="/layout/template_new.xhtml">
	<ui:define name="body">
	<script type="text/javascript" src="#{request.contextPath}/asset/js/bootstrap-select.min.js"></script>
	<link rel="stylesheet" type="text/css" href="#{request.contextPath}/asset/css/bootstrap-select.min.css"/>
<style>
.form-control {
	float: left;
}

.all_da table,.all_te table {
	table-layout: inherit;
}

.all_te {
	width: 128px;
}

.file-img {
	position: relative;
	width: 128px;
	height: 128px;
}

.file-img .img-pic {
	width: 100%;
	height: 100%;
}

.file-img .delt {
	display: none;
	position: absolute;
	right: 0;
	top: 0;
	width: 27px;
	height: 23px;
	z-index: 1;
}

.file-img.file-img-dlt:hover .delt {
	display: block;
}

.photo_box2 {
	width: 650px;
}

.photo_box2 li {
	float: left;
	width: 135px;
	height: 128px;
	margin-right: 5px;
	margin-top: 10px
}

.photo_box2 li img {
	width: 128px;
	height: 128px;
	border: 1px solid #d1d1d1;
}

.photo001 {
	position: absolute;
	z-index: 2;
}

.dkzzedit007 {
	width: 130px;
	height: 21px;
	z-index: 3;
	display: none;
	top: -128px;
	position: relative;
}

.photo001 .dkzzedit007 img {
	z-index: 4;
	float: right;;
	position: relative;
	border: none;
	width: 27px;
	height: 23px;
}

.div1 {
	float: left;
	height: 144px;
	width: 128px;
	position: relative;
}

.div2 {
	text-align: center;
	font-size: 15px;
	font-weight: 800
}

.logoUrl {
	width: 144px;
	height: 144px;
	cursor: pointer;
	font-size: 30px;
	outline: medium none;
	position: absolute;
	filter: alpha(opacity = 0);
	-moz-opacity: 0;
	opacity: 0;
	left: 0px;
	top: 0px;
}

.plant_bd {
	width: 128px;
	height: 128px;
	display: block;
}

.photo_box2 li {
	margin-top: 0;
}

.photo_box2 .rich-panel-body {
	padding: 0;
}

.all_da .star_red {
	display: inline-block;
	height: 128px;
	line-height: 128px;
	color: red;
	vertical-align: top;
}
</style>
		<td valign="top">			
                <h:form id="user" enctype="multipart/form-data">
				<!-- Modal -->
				<div aria-hidden="false" aria-labelledby="myModalLabel"
					role="dialog" tabindex="-1" id="myModal"
					class="modal fade in w600na" style="display: none;">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal">
									<span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
								</button>
								<h4 class="modal-title" id="myModalLabel">提示框</h4>
							</div>
							<div class="modal-body">
								<span id="productMsg">*号部分为必填项！</span>
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-default"
									data-dismiss="modal">取消</button>
								<button type="button" class="btn btn-primary"
									data-dismiss="modal">确认</button>
							</div>
						</div>
					</div>
				</div>

				<!--右边开始-->
				<div class="right_c">
					<div class="r_title">
						<div class="r_t_l"><a href="#{request.contextPath}/map/CompanyList.seam"><font size="3">公司信息</font></a>
							<rich:messages styleClass="messages"></rich:messages>
						</div>
					</div>
					<!-- #{enterpriseHome.getEnterpriseInfomationId()} -->
					<div class="ybp_02">
						<!--企业荣誉开始-->
						<div class="rytitle">
							<div class="titlefont">基础信息</div>
							<div class="titlefont2">The Farm Information</div>
						</div>

						<!--入库订单列表开始-->

						<div class="all_ry">
							<div class="all_da all_w01">
								<table>
									<tr>
										<td class="all_te">企业名称：</td>
										<td><h:inputText styleClass="form-control nw221"
												value="#{enterpriseHome.instance.name}" id="name" /> <span
											class="finput" style="color: #FF0000">*</span></td>
									</tr>
								</table>
							</div>
							<div class="all_da all_w01">
								<table>
									<tr>
										<td class="all_te">用户类型：</td>
										<td align="left">
											<h:outputText rendered="#{enterpriseHome.instance.uType eq 0 or enterpriseHome.instance.uType eq null}" value="未分级" /> 												
											<h:outputText rendered="#{enterpriseHome.instance.uType eq 1}" value="普通用户" />
											<h:outputText rendered="#{enterpriseHome.instance.uType eq 2}" value="项目用户" /> 
											<h:outputText rendered="#{enterpriseHome.instance.uType eq 3}" value="公司测试用户" /> 
											<h:outputText rendered="#{enterpriseHome.instance.uType eq 7}" value="试用用户" /> </td>
									</tr>
								</table>
							</div>
							<div class="all_da all_w01">
								<table>
									<tr>
										<td class="all_te">生产组织方式：</td>
										<td>
											<h:inputHidden id="selectsHidden" value="#{enterpriseHome.instance.productOrganization}"  />
											<select id="selects" style="" data-live-search="true" title="请选择" class="selectpicker" multiple="multiple" >
	                                           <option value="1">企业</option>
	                                           <option value="2">政府</option>
	                                           <option value="3">科研单位</option>
	                                           <option value="4">中药材专业协会</option>
	                                           <option value="5">基地</option>
	                                           <option value="6">合作社</option>
	                                           <option value="7">农户</option>
	                                           <option value="8">其他</option>
	                                        </select>
										</td>
									</tr>
								</table>
							</div>
							<div class="all_da all_w01">
								<table>
									<tr>
										<td class="all_te">联系人：</td>
										<td><h:inputText id="contact"
												value="#{enterpriseHome.instance.contact}"
												styleClass="form-control nw221" /></td>
									</tr>
								</table>
							</div>
							<div class="all_da all_w01">
								<table>
									<tr>
										<td class="all_te">联系电话：</td>
										<td><h:inputText id="contactPhone"
												value="#{enterpriseHome.instance.contactPhone}"
												styleClass="form-control nw221" /></td>
									</tr>
								</table>

							</div>
							<div class="all_da all_w01">
								<table>
									<tr>
										<td class="all_te">地址：</td>
										<td><h:inputText id="address"
												value="#{enterpriseHome.instance.address}"
												styleClass="form-control nw221" /></td>
									</tr>
								</table>
							</div>

							<div class="all_da all_w01">
								<table>
									<tr>
										<td class="all_te">网址：</td>
										<td align="left"><h:inputText id="website"
												value="#{enterpriseHome.instance.website}"
												styleClass="form-control nw221" /></td>
									</tr>
								</table>
							</div>
							<div class="all_da all_w01">
								<table>
									<tr>
										<td class="all_te">邮箱：</td>
										<td align="left"><h:inputText id="email"
												value="#{enterpriseHome.instance.email}"
												styleClass="form-control nw221" /></td>
									</tr>
								</table>
							</div>
							<div class="all_da all_w01">
								<table>
									<tr>
										<td class="all_te">新浪微博帐号：</td>
										<td align="left"><h:inputText id="microBlogName"
												value="#{enterpriseHome.instance.microBlogName}"
												styleClass="form-control nw221" /></td>
									</tr>
								</table>
							</div>
							<div class="all_da all_w01">
								<table>
									<tr>
										<td class="all_te">新浪微博链接地址：</td>
										<td align="left"><h:inputText id="microBlog"
												value="#{enterpriseHome.instance.microBlog}"
												styleClass="form-control nw221" /></td>
									</tr>
								</table>
							</div>
							<div class="all_da all_w01">
								<table>
									<tr>
										<td class="all_te">腾讯微博帐号：</td>
										<td align="left"><h:inputText id="microMessageName"
												value="#{enterpriseHome.instance.microMessageName}"
												styleClass="form-control nw221" /></td>
									</tr>
								</table>
							</div>
							<div class="all_da all_w01">
								<table>
									<tr>
										<td class="all_te">腾讯微博链接地址：</td>
										<td align="left"><h:inputText id="microMessage"
												value="#{enterpriseHome.instance.microMessage}"
												styleClass="form-control nw221" /></td>
									</tr>
								</table>
							</div>
							<div class="all_da all_w01" style="width: 85%;">
								<table>
									<tr>
										<td class="all_te"
											style="vertical-align: top; line-height: 24px;">LOGO：</td>
										<td><s:fileUpload id="entPicture" size="40"
												accept="image/png,image/jpeg,image/gif"
												contentType="image/png,image/jpeg,image/gif"
												fileName="#{enterpriseHome.instance.entPictureUrlName}"
												data="#{enterpriseHome.instance.entPictureUrlByte}"
												onchange="previewImage(1,'entPicture_p',this);">
											</s:fileUpload></td>
									</tr>
								</table>
							</div>
							<div class="block_img" id="entPicture_p2"
								style="margin-left: 188px; width: 85%; overflow: hidden; margin-bottom: 5px;">
								<img id="entPicture_p"
									src="#{enterpriseHome.instance.entPictureUrl}" width="278"
									height="146" />
								<div class="clear"></div>
							</div>
							<p class="pic_stress" style="margin-left: 188px; width: 85%;">图片标准：158X146（像素）支持格式：jpg,gif,png,jpeg,bmp,3gp</p>
							<div class="all_da all_w01" style="width: 85%;">
								<table>
									<tr>
										<td class="all_te"
											style="vertical-align: top; line-height: 24px;">公司图片：</td>
										<td><s:fileUpload id="plantImgRound" size="30"
												accept="image/png,image/jpeg,image/gif"
												contentType="image/png,image/jpeg,image/gif"
												fileName="#{enterpriseHome.instance.entImageUrlName}"
												data="#{enterpriseHome.instance.entImageUrlByte}"
												onchange="previewImage(2,'entImageUrlByte_p',this);">
											</s:fileUpload></td>
									</tr>
								</table>
							</div>
							<div class="block_img" id="entImageUrlByte_p2"
								style="margin-left: 188px; width: 85%; overflow: hidden; margin-bottom: 5px;">
								<img src="#{enterpriseHome.instance.entImageUrlName}"
									id="entImageUrlByte_p" width="320" height="145" />
								<div class="clear"></div>
							</div>
							<p class="pic_stress" style="margin-left: 188px; width: 85%;">图片标准：320X145（像素）支持格式：jpg,gif,png,jpeg,bmp,3gp</p>

						<div class="all_da all_w01"
								style="width: 85%; display: block; margin-bottom: 0;">
							<table width="100%" cellpadding="0" cellspacing="0"
								id="myframehonor">
								<tr>
									<td class="all_te" >企业荣誉：</td>
									<td align="left" id="checkone"><h:inputHidden
											value="#{enterpriseHome.pictureUrl}" id="pictureUrl" />
										
											<table width="100%" cellpadding="0" cellspacing="0">
												<tr>

													<td>

														<ul class="photo_box2" style="width: auto" id="ulHonor">
															<rich:panel id="honorPicId"
																style="border:0px;">
																<a:repeat value="#{enterpriseHome.imgUrlList}" var="_ai"
																	id="shis" rowKeyVar="_index">
																	<li>
																		<div class="photo001">
																			<div class="imgBox"
																				style="width: 128px; height: 128px;">
																				<a href="#pic_#{_index}" class="plant_bd"> <img
																					id="plant#{_index}" class="plant_imgbd"
																					src="#{_ai}" width="128" height="128" />
																				</a>
																			</div>
																			<div class="dkzzedit007">
																				<a href="#1" onclick="del1(#{_index})"
																					aa="#{_index}"><img
																					src="#{request.contextPath}/asset/images/del03.jpg"
																					width="27" height="23" /></a>
																			</div>
																		</div>
																	</li>
																</a:repeat>
															</rich:panel>
															<li>
																<div id="container1">
																	<div id="selectfiles1" class="">
																		<img
																			src="#{request.contextPath}/asset/images/dpadd.jpg"
																			width="128" height="128" />
																	</div>
																	<a style="display: none" id="postfiles1"
																		href="javascript:void(0);" class='btn'
																		onclick="apply(1,6);"></a> 
																	<a style="display: none"
																		id="callback1" href="javascript:void(0);" class='btn'
																		onclick="callback();">
																	</a>
																</div>
															</li>
														</ul> <span class="star_red">*</span>
													</td>

												</tr>
											</table>
										</td>
								</tr>
							</table>
							<div id="ossfile1"></div>
							</div>

							<div class="all_da all_w01"
								style="width: 85%; display: block; margin-bottom: 0;">
								<table width="100%" cellpadding="0" cellspacing="0"
									id="myframequalifi">
									<tr>
										<td class="all_te">企业资质：</td>
										<td align="left" id="checkone"><h:inputHidden
												value="#{enterpriseHome.pictureUrl3}" id="pictureUrl3" /> <!-- <iframe src="#{request.contextPath}/map/CompanyQualifi.seam" id="myframequalifi" name="myframequalifi" frameBorder="0" scrolling="no" width="" height="155" onLoad="" style="width:100%; height:155px"></iframe> -->
											<table width="100%" cellpadding="0" cellspacing="0">
												<tr>
													<td>
														<ul class="photo_box2" style="width: auto">
															<rich:panel id="qualityPic" style="border:0px">
																<a:repeat value="#{enterpriseHome.ziZhiImgUrlList}"
																	var="_ai" rowKeyVar="_index">
																	<li>
																		<div class="photo001">
																			<div class="imgBox"
																				style="width: 128px; height: 128px;">
																				<a href="#pic_#{_index}" class="plant_bd"> <img
																					id="plant#{_index}" class="plant_imgbd"
																					src="#{_ai}" width="128" height="128" />
																				</a>
																			</div>
																			<div class="dkzzedit007">
																				<a href="#1" onclick="del2(#{_index})"
																					aa="#{_index}"><img
																					src="#{request.contextPath}/asset/images/del03.jpg"
																					width="27" height="23" /></a>
																			</div>
																		</div>
																	</li>
																</a:repeat>
															</rich:panel>
															<li>
																<div id="container2">
																	<div id="selectfiles2" class="">
																		<img
																			src="#{request.contextPath}/asset/images/dpadd.jpg"
																			width="128" height="128" />
																	</div>
																	<a style="display: none" id="postfiles2"
																		href="javascript:void(0);" class='btn'
																		onclick="apply(2,6);"></a> <a style="display: none"
																		id="callback2" href="javascript:void(0);" class='btn'
																		onclick="callback2();"></a>
																</div>
															</li>
														</ul> <span class="star_red">*</span>
													</td>
												</tr>
											</table></td>
									</tr>
								</table>
								<div id="ossfile2"></div>
							</div>
							<!-- <p class="finput" style="margin-left: 188px; color: #FF0000">（营业执照、组织机构代码证、税务登记证、土地使用证明、有机、绿色认证等。）</p> -->
							<p class="finput" style="margin-left: 188px; color: #FF0000;height: 50px;font-size: larger;">(企业用户请上传:彩色营业执照或扫描件。)<br/>
																						 (个人用户请上传:一张手持身份证上半身照片以及身份证正反面照片。)
							</p>
							<div class="all_da all_w01" style="width: 85%; display: block;">
								<table width="100%" cellpadding="0" cellspacing="0">
									<tr>
										<td class="all_te">企业介绍：</td>
										<td align="left"><h:inputTextarea id="description"
												styleClass="form-control nw420" rows="3"
												value="#{enterpriseHome.instance.description}" /></td>
									</tr>
								</table>

							</div>
							<div class="all_da all_w01" style="width: 85%;">
								<table>
									<tr>
										<td class="all_te"
											style="vertical-align: top; line-height: 24px;">企业介绍视频：</td>
										<td><h:inputHidden
												value="#{enterpriseHome.instance.videoUrl}" id="videoUrl" />
											<div
												class="file-img #{enterpriseHome.instance.videoUrl!=null and enterpriseHome.instance.videoUrl!=''?'file-img-dlt':''}"
												id="videoid">
												<iframe
													src="#{request.contextPath}/map/CompanyVideo.seam?enterId=#{enterpriseHome.enterId}"
													id="myframe2" name="myframe2" frameBorder="0"
													scrolling="no" width="340px" height="155" onLoad=""
													style=" height:155px;display:#{enterpriseHome.instance.videoUrl!=null and enterpriseHome.instance.videoUrl!=''?'none':'block'}"></iframe>
												<img
													src="#{request.contextPath}/asset/images/map/shipinmoren-pic.png"
													class="img-pic" id="pic"
													style="display:#{enterpriseHome.instance.videoUrl==null || enterpriseHome.instance.videoUrl==''?'none':'block'}" />
												<a class="delt" onclick="deleteVideo()" href="javascript:;" id="delPic"><img
													src="#{request.contextPath}/asset/images/del03.jpg"
													width="27" height="23" /></a>
											</div></td>
									</tr>
								</table>
							</div>

							<div class="clear"></div>
						</div>
						<table style="margin: 10px auto 0px;" width="180">
							<tr>
								<td><input type="button" value="提交" class="btn btn-primary"
									id="update2" onclick="return checkSubmit()"></input> <h:commandButton
										id="update" value="提交" styleClass="btn btn-primary"
										action="#{enterpriseHome.updatee}" style="display:none;" /> <s:button
										view="/map/CompanyList.xhtml" styleClass="btn btn-default"
										value="返回" id="bn_left6" style="margin-left:10px" /></td>
							</tr>
						</table>
						<!--入库订单列表结束-->
					</div>
					<!--企业荣誉结束-->
				</div>
			</h:form>
			</td>
		<a:form>
			<a:jsFunction name="deleteObj" action="#{enterpriseHome.setDelPic()}">
				<a:actionparam name="aiIndex2"
					assignTo="#{enterpriseHome.delpicindex}" />
			</a:jsFunction>
			<a:jsFunction name="listenerHonor"
				action="#{enterpriseHome.listenerHonor()}" reRender="honorPicId"
				oncomplete="ailist()">
				<a:actionparam name="honorUrl" assignTo="#{enterpriseHome.honorUrl}" />
				<a:actionparam name="honorFile"
					assignTo="#{enterpriseHome.honorFile}" />
				<a:actionparam name="honorPic" assignTo="#{enterpriseHome.honorPic}" />
			</a:jsFunction>
			<a:jsFunction name="deleteObj1"
				action="#{enterpriseHome.delCompanyHonorPic()}"
				reRender="honorPicId" oncomplete="ailist()">
				<a:actionparam name="delpicindex"
					assignTo="#{enterpriseHome.delpicindex}" />
				<a:actionparam name="honorPic" assignTo="#{enterpriseHome.honorPic}" />
			</a:jsFunction>
			<a:jsFunction name="listenerQualifi"
				action="#{enterpriseHome.listenerQualifi()}" reRender="qualityPic"
				oncomplete="ailist()">
				<a:actionparam name="qualityUrl"
					assignTo="#{enterpriseHome.qualityUrl}" />
				<a:actionparam name="qualityFile"
					assignTo="#{enterpriseHome.qualityFile}" />
				<a:actionparam name="qualiPic" assignTo="#{enterpriseHome.qualiPic}" />
			</a:jsFunction>
			<a:jsFunction name="deleteObj2"
				action="#{enterpriseHome.delPicQualifi()}" reRender="qualityPic"
				oncomplete="ailist();">
				<a:actionparam name="delCompQualifiPicVal"
					assignTo="#{enterpriseHome.delCompQualifiPicVal}" />
				<a:actionparam name="qualiPic" assignTo="#{enterpriseHome.qualiPic}" />
			</a:jsFunction>
		</a:form>
		<!--右边结束-->
		<script type="text/javascript">
	   //<![CDATA[	
	   var oss_url = "#{dataDicConstant.getOssUrl()}";
	var promptMessage = "#{enterpriseHome.promptMessage}";
	if(promptMessage != ""){
		document.getElementById("productMsg").innerHTML = promptMessage;
		jquery("#myModal").modal('show');
	}
jquery(".rich-calendar-input").addClass("r_c_text_date");
jquery(".rich-calendar-input").removeClass("rich-calendar-input");

jquery('.selectpicker').selectpicker(); 

jquery(function(){
	var pro = '#{enterpriseHome.instance.productOrganization}'.split(",");
	jquery("#selects").selectpicker('val', pro);//
});

function checkInteger(obj){
	  if(obj.value!=""){
		var v = obj.value;
		var reg = /^[1-9]+[0-9]*]*$/; 
			if (!reg.test(v)){
				obj.focus();
				return false;
			}
	  }
				return true;
	}
	function checkSubmit(){	
		jquery('#update2').attr('onclick','');
		
			//农场信息 校验
			var name = document.getElementById("user:name").value; //企业名称	
			var contact = document.getElementById("user:contact").value; //联系人	
			var address = document.getElementById("user:address").value; //地址
			var website = document.getElementById("user:website").value; //网址
			
		   var email = document.getElementById("user:email").value; //邮箱
		   var contactPhone = document.getElementById("user:contactPhone").value;//联系电话
		 	//农场主信息 校验
		   var emailReg = /^([a-z0-9A-Z]+[_-|\.]?)+[a-z0-9A-Z]@([a-z0-9A-Z]+(-[a-z0-9A-Z]+)?\.)+[a-zA-Z]{2,}$/;
		   var qyjs = document.getElementById("user:description").value;

		   var honorPicUrl = "";
		   jquery("#myframehonor").find(".plant_imgbd").each(function(){
				 honorPicUrl +=jquery(this).attr('src')+",";
			})
			if(honorPicUrl!=""){
				honorPicUrl=honorPicUrl.substring(0, honorPicUrl.length);
				jquery("#user\\:pictureUrl").val(honorPicUrl);
			}

		   var qualifiPicUrl = "";
		   jquery("#myframequalifi").find(".plant_imgbd").each(function(){
			   qualifiPicUrl +=jquery(this).attr('src')+",";
			})
			if(qualifiPicUrl!=""){
				qualifiPicUrl=qualifiPicUrl.substring(0, qualifiPicUrl.length);
				jquery("#user\\:pictureUrl3").val(qualifiPicUrl);
			}
		   
		   if(name == ""){
				document.getElementById("productMsg").innerHTML = "企业名称不能为空";
				jquery("#myModal").modal('show');
				jquery('#update2').attr('onclick','return checkSubmit()');
				return false;
			}
		   if(name.length>45){
				document.getElementById("productMsg").innerHTML = "企业名称输入过长";
				jquery("#myModal").modal('show');
				jquery('#update2').attr('onclick','return checkSubmit()');
				return false;
			}
		   if(website.length>45){
				document.getElementById("productMsg").innerHTML = "网址输入过长";
				jquery("#myModal").modal('show');
				jquery('#update2').attr('onclick','return checkSubmit()');
				return false;
			}
		   if(address.length>200){
				document.getElementById("productMsg").innerHTML = "地址输入过长";
				jquery("#myModal").modal('show');
				jquery('#update2').attr('onclick','return checkSubmit()');
				return false;
			}
		   if(contact.length>45){
				document.getElementById("productMsg").innerHTML = "联系人输入过长";
				jquery("#myModal").modal('show');
				jquery('#update2').attr('onclick','return checkSubmit()');
				return false;
			}
			if(qyjs.length>1000){
				document.getElementById("productMsg").innerHTML = "企业介绍输入过长";
				jquery("#myModal").modal('show');
				jquery('#update2').attr('onclick','return checkSubmit()');
				return false;
			}
			   if(contactPhone.length > 12){
				document.getElementById("productMsg").innerHTML = "请输入正确的电话号码";
				jquery("#myModal").modal('show');
				jquery('#update2').attr('onclick','return checkSubmit()');
				return false;
			}
		   if(email != "" && !emailReg.test(email)){
				document.getElementById("productMsg").innerHTML = "请输入正确的电子邮件地址";
				jquery("#myModal").modal('show');
				jquery('#update2').attr('onclick','return checkSubmit()');
				return false;
			}
		   if(email.length>45){
				document.getElementById("productMsg").innerHTML = "邮箱输入过长";
				jquery("#myModal").modal('show');
				jquery('#update2').attr('onclick','return checkSubmit()');
				return false;
			}

		   jquery('#user\\:selectsHidden').val(jquery("#selects").val());
		   
           jquery("#user\\:update").click();
	}
	
	function closeMethod(){
		
		//农场信息 校验
		   var name = document.getElementById("user:name").value; //企业名称
		   var email = document.getElementById("user:email").value; //邮箱
		   var contactPhone = document.getElementById("user:contactPhone").value;//联系电话
		 	//农场主信息 校验
		   var emailReg = /^([a-z0-9A-Z]+[_-|\.]?)+[a-z0-9A-Z]@([a-z0-9A-Z]+(-[a-z0-9A-Z]+)?\.)+[a-zA-Z]{2,}$/;
		   if(name == ""){
			   document.getElementById("user:name").focus();
			   return false;
			}
		   if(contactPhone.length > 12){
				document.getElementById("user:contactPhone").focus();
				return false;
			}
		   if(email != "" && !emailReg.test(email)){
				document.getElementById("user:email").focus();
				return false;
			}
		}

	function changeImg(indexParam){
		 for ( var i = 1; i < 6; i++) {
			if(parseInt(i)<=parseInt(indexParam)){
				jquery("#imgId" + i).attr("src","#{request.contextPath}/asset/images/star1_01.png");
			}else{
				jquery("#imgId" + i).attr("src","#{request.contextPath}/asset/images/star1_03.png");
			}
		}
	}


	function previewImage(typeParam,id,file)
    {
	      var MAXWIDTH  = 0; 
	      var MAXHEIGHT = 0;
	    if(typeParam == 1){
	    	 MAXWIDTH  = document.getElementById(id).offsetWidth; 
	         MAXHEIGHT = document.getElementById(id).offsetHeight;
	    }else{
	    	 MAXWIDTH  = document.getElementById(id).offsetWidth; 
	         MAXHEIGHT = document.getElementById(id).offsetHeight;
	    }
      var div = document.getElementById(id+"2");
      if (file.files && file.files[0])
      {
          var img;
          if(typeParam == 1){
        	  div.innerHTML = '<img class=imghead id='+id+'>';
	           img = document.getElementById(id);
 	    }else{
 	    	div.innerHTML = '<img class=imghead id='+id+'>';
 	           img = document.getElementById(id);
 	    }
          img.onload = function(){
            var rect = clacImgZoomParam(MAXWIDTH, MAXHEIGHT, img.offsetWidth, img.offsetHeight);
            img.width  =  rect.width;
            img.height =  rect.height;
//             img.style.marginLeft = rect.left+'px';
            img.style.marginTop = rect.top+'px';
          }
          var reader = new FileReader();
          reader.onload = function(evt){img.src = evt.target.result;}
          reader.readAsDataURL(file.files[0]);
      }
      else //兼容IE
      {
        var sFilter='filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale,src="';
        file.select();
        var src = document.selection.createRange().text;
        var img;
        if(typeParam == 1){
        	div.innerHTML = '<img class=imghead id='+id+'>';
	           img = document.getElementById(id);
	           img.filters.item('DXImageTransform.Microsoft.AlphaImageLoader').src = src;
	           var rect = clacImgZoomParam(MAXWIDTH, MAXHEIGHT, img.offsetWidth, img.offsetHeight);
	           status =('rect:'+rect.top+','+rect.left+','+rect.width+','+rect.height);
	           div.innerHTML = "<div class=divhead id='"+id+"' style='position:absolute; width:"+rect.width+"px;height:"+rect.height+"px;margin-top:"+rect.top+"px;"+sFilter+src+"\"'></div>";
	    }else{
	    	div.innerHTML = '<img class=imghead id='+id+'>';
	           img = document.getElementById(id);
	           img.filters.item('DXImageTransform.Microsoft.AlphaImageLoader').src = src;
	           var rect = clacImgZoomParam(MAXWIDTH, MAXHEIGHT, img.offsetWidth, img.offsetHeight);
	           status =('rect:'+rect.top+','+rect.left+','+rect.width+','+rect.height);
	           div.innerHTML = "<div class=divhead id='"+id+"' style='position:absolute; width:"+rect.width+"px;height:"+rect.height+"px;margin-top:"+rect.top+"px;"+sFilter+src+"\"'></div>";
	    }
        
      }
    }
	function clacImgZoomParam( maxWidth, maxHeight, width, height ){
        var param = {top:0, left:0, width:maxWidth, height:maxHeight};
        return param;
    }

	
	
	function deleteVideo(){
		jquery('#pic').attr("style","display:none;");
		jquery('#myframe2').attr("style","width:560px; height:155px;display:block;");
		jquery('.file-img').attr('class','file-img')
		jquery('#user\\:videoUrl').val('');
	}	
	function dosome(text){
		var videoUrl=decodeURI(text);
		jquery("#myframe2").attr('style','width:560px; height:155px;display:none;');				
		jquery("#pic").css("display", "");
		jquery("#videoid").attr('class','file-img file-img-dlt');
		jquery('#user\\:videoUrl').val(videoUrl);
    }
	function imageyz(){
		jquery("#myModal").modal('show');
	}

	//企业荣誉上传图片
	jquery(function(){
		ailist();
		
	})
	ailist = function(){
		jquery('.photo001').hover(function(){
			jquery(this).find('.dkzzedit007').show();
		},function(){
			jquery(this).find('.dkzzedit007').hide();
		})
   	}
	del1 = function(aiIndex){
		var honorPicUrl = "";
		   jquery("#myframehonor").find(".plant_imgbd").each(function(){
				 honorPicUrl +=jquery(this).attr('src')+",";
			})
			if(honorPicUrl!=""){
				honorPicUrl=honorPicUrl.substring(0, honorPicUrl.length);
			}
		deleteObj1(aiIndex,honorPicUrl);
   	}
	del2 = function(aiIndex){
		var qualifiPicUrl = "";
		   jquery("#myframequalifi").find(".plant_imgbd").each(function(){
			   qualifiPicUrl +=jquery(this).attr('src')+",";
			})
			if(qualifiPicUrl!=""){
				qualifiPicUrl=qualifiPicUrl.substring(0, qualifiPicUrl.length);
			}
		deleteObj2(aiIndex,qualifiPicUrl);
   	}
	function apply(num,obj){
			var entId='#{sessionTake.getEnterpriseInfoId()}';
			if(num==1){
				set_upload_param(uploader1, '', false,obj,entId);
			}else if(num==2){
				set_upload_param(uploader2, '', false,obj,entId);
			}else if(num==3){
				set_upload_param(uploader3, '', false,obj,entId);
			}
			
		}

		function callback(){
			var url=jquery("b1").text();
			var honorFile=jquery("#honorFile").text();
			jquery("b1").parent().remove();
			var honorPicUrl = "";
			   jquery("#myframehonor").find(".plant_imgbd").each(function(){
					 honorPicUrl +=jquery(this).attr('src')+",";
				})
				if(honorPicUrl!=""){
					honorPicUrl=honorPicUrl.substring(0, honorPicUrl.length);
				}
			listenerHonor(url,honorFile,honorPicUrl);
			//jquery("#agriculturalImages\\:imgUrls").val(url);
			 //jquery("#agriculturalImages\\:insertImages").click(); 
			 
		}
		function callback2(){
			var url=jquery("b2").text();
			var qualityFile=jquery("#qualityFile").text();
			jquery("b2").parent().remove();
			var qualifiPicUrl = "";
			   jquery("#myframequalifi").find(".plant_imgbd").each(function(){
				   qualifiPicUrl +=jquery(this).attr('src')+",";
				})
				if(qualifiPicUrl!=""){
					qualifiPicUrl=qualifiPicUrl.substring(0, qualifiPicUrl.length);
				}
			listenerQualifi(url,qualityFile,qualifiPicUrl);
			//jquery("#agriculturalImages\\:imgUrls").val(url);
			 //jquery("#agriculturalImages\\:insertImages").click(); 
			 
		}
		function refresh(){
			 ailist();
			 jquery.getScript('#{request.contextPath}/asset/lib/upload.js',function(){

		     });
		}
	//]]>
</script>
		<script type="text/javascript"
			src="#{request.contextPath}/asset/lib/plupload-2.1.2/js/plupload.full.min.js"></script>
		<script type="text/javascript"
			src="#{request.contextPath}/asset/js/map/companyPicUpload.js"></script>
	</ui:define>
</ui:composition>

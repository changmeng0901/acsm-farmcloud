<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a="http://richfaces.org/a4j"
    template="/layout/template_Q.xhtml">
	
<ui:define name="body">
    <script type="text/javascript" src="#{request.contextPath}/asset/new_clone/icheck.js"></script>
    <link rel="stylesheet" type="text/css" href="#{request.contextPath}/asset/css/editor.css"/>
    <script type="text/javascript" src="#{request.contextPath}/asset/js/kindeditor/kindeditor.js"></script>
	<script type="text/javascript" src="#{request.contextPath}/asset/js/kindeditor/lang/zh_CN.js"></script>
	<script type="text/javascript" src="#{request.contextPath}/asset/js/bootstrap-select.min.js"></script>
	<link rel="stylesheet" type="text/css" href="#{request.contextPath}/asset/css/bootstrap-select.min.css"/>
    
    <style type="text/css">
    .focus_input{color:#323232 !important;}
    .photo_box2{ width:650px;float:left; }
    
    .photo_box2 .rich-panel-body {padding:0;}
    .photo_box2 li{ float:left;margin:5px 10px 5px 0;}
    .photo_box2 .rich-panel{ float:left;}
    .delect_phone{ position:relative;width:128px;height:128px;}
    .delect_phone .delect_btn{ position:absolute;right:0;top:0;}
	.serve_table .star_red{ display:inline-block;height:128px;line-height:128px;color:red;vertical-align:top;}
    .photo_box2 .btn{padding:0;}
    .dkzzedit007 {
	display: none;
}
	</style>
	<!-- #{pickInfoHome.addplant()} -->
		<td valign="top">
               
<div aria-hidden="false" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="myModal" class="modal fade in w600na" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">提示框</h4>
      </div>
      <div class="modal-body">
       <span id="productMsg">*号部分为必填项！</span>
        
        
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal" >取消</button>
        <button type="button" class="btn btn-primary" data-dismiss="modal" >确认</button>
      </div>
    </div>
  </div>
</div>

    	<!--右边开始-->
            	<h:form id="pick">
            		<h:inputHidden id="pickInfoId" value="#{pickInfoHome.pickInfo.pickInfoId}" /><!-- 采摘信息id -->
	            	<h:inputHidden id="plantIds" value="#{pickInfoHome.pickInfo.plantIds}" /><!-- 特色种植 -->
	                <h:inputHidden id="datadicsId" value="#{pickInfoHome.entertainment}" /><!-- 娱乐项目 -->
	                <h:inputHidden id="relaxationId" value="#{pickInfoHome.relaxation}" /><!-- 休闲服务 -->
	                <h:inputHidden id="packageTypeId" value="#{pickInfoHome.pickInfo.packageType}" /><!-- 包装类型 -->
	                <h:inputHidden id="pickImgs" value="#{pickInfoHome.pickInfo.imageUrls}" /><!-- 采摘实景图 -->
	                <h:inputHidden id="tcxxm" value="#{pickInfoHome.meal}" /><!-- 套餐信息json -->
                

                <div class="right_c" style="min-height:30px;">
                	<div class="r_title">
                    	<div class="r_t_l" style="font-size:14px;">数字农场&nbsp;&gt;&nbsp;&nbsp;基地档案&nbsp;&gt;&nbsp;&nbsp;<font style="font-size:16px;">基地信息</font></div>
                    </div>
                    <div class="clear"></div>
                </div>   
              
               <!-- 内容开始 -->
                <div class="service">
                    <div class="service_content">
                        <h4 style="font-size:16px;">服务信息</h4>
                    </div>
                    <table width="100%" cellpadding="0" cellspacing="0" class="serve_table">
                        <tr class="row1">
                            <td width="100" class="sub_title">标题</td>
                            <td width="20"></td>
                            <td>
                                <div class="sever_r">
                                	<h:inputHidden id="title_h" value="#{pickInfoHome.pickInfo.title}" />
                                    <h:inputText id="title" class="form-control" style="width:350px; height:34px; color:#d2d2d2;" value="请输入您的农场采摘信息" />
                                    <span class="rear no1">50字以内</span>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td width="100" class="sub_title">人均价格</td>
                            <td width="20"></td>
                            <td>
                                <div class="sever_r">
                                	<h:inputHidden id="avgprice_h" value="#{pickInfoHome.pickInfo.avgPrice}" />
                                    <h:inputText id="avgprice" class="form-control" onblur="num();" style="width:188px; height:34px; color:#d2d2d2;" value="请输入人均价格"  />
                                    <span class="rear no2">元</span>
                                    <span class="rear no3">* </span>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td width="100" class="sub_title">可同时接待</td>
                            <td width="20"></td>
                            <td>
                                <div class="sever_r">
                                	<h:inputHidden id="receptionNum_h" value="#{pickInfoHome.pickInfo.receptionNum}" />
                                    <h:inputText class="form-control" id="receptionNum" style="width:188px; height:34px; color:#d2d2d2;" value="请输入可同时接待人数"  />
                                    <span class="rear no2">人</span>
                                </div>
                            </td>
                        </tr>
                        <!-- <tr>
                            <td width="100" class="sub_title">信息有效期</td>
                            <td width="20"></td>
                            <td>
                                <div class="sever_r">
                                    <div class="input-append date form_datetime bootData100" >
                                    	<h:inputHidden id="expiryDates" value="#{pickInfoHome.pickInfo.expiryDate}" />
                                        <input id="expiryDate" readonly="readonly" size="26" type="text" value="请输入信息有效期"  style="width:188px; color:#d2d2d2;" class="changeOn"/>
                                        <span class="add-on"><i class="icon-th"></i></span>
                                    </div>
                                    <span class="rear no2" style="color:red;">*</span>
                                </div>
                                
                            </td>
                        </tr> -->
                        <tr>
                            <td width="100" class="sub_title">采摘预约功能</td>
                            <td width="20"></td>
                            <td>
                            	<div>
                                <ul id="ylxm" class="check_box">
                                	<li>
                                		<h:inputHidden value="#{pickInfoHome.czyy}" id="czyyMess" />
                                        <input type="checkbox" class="icheck" id="czyy" name="czyy" value="czyy" aa="czyy" /><label style="padding:0 15px 0 5px;">启用</label>
                                    </li>
                                </ul>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td width="100" class="sub_title" style="vertical-align:top;">娱乐项目</td>
                            <td width="20"></td>
                            <td>
                                <div>
                                    <ul id="ylxm" class="check_box">
                                        <a:repeat value="#{pickInfoHome.datadics}" var="dic">
                                    	<li>
                                            <input type="checkbox"  class="icheck" name="ddd" value="#{dic[0]}" aa="#{dic[0]}" /><label style="padding:0 15px 0 5px;">#{dic[1]}</label>
                                        </li>
                                    	</a:repeat>
                                        <li style="margin-top:-5px; display: none;" class="other_input">
                                        	<h:inputHidden id="other_h" value="#{pickInfoHome.otherDic}" />
                                            <h:inputText id="other" type="text" class="form-control" style="width:280px; color:#d2d2d2;" value="请输入娱乐项目内容，不超过20字"/>
                                        </li>

                                    </ul>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td width="100" class="sub_title" style="vertical-align:top;">休闲服务</td>
                            <td width="20"></td>
                            <td>
                                <div>
                                    <ul id="xxfws" class="check_box">
                                        <a:repeat value="#{pickInfoHome.relax}" var="dic">
                                    	<li>
                                            <input type="checkbox"  class="icheck" name="xxfw" value="#{dic[0]}" aa="#{dic[0]}" /><label style="padding:0 15px 0 5px;">#{dic[1]}</label>
                                        </li>
                                    	</a:repeat>
                                    </ul>
                                </div>
                            </td>
                        </tr>
                    </table>
                    <div class="service_content">
                        <h4 style="font-size:16px;">采摘信息</h4>
                    </div>
                    <table width="100%" cellpadding="0" cellspacing="0" class="serve_table">
                        <tr class="row1">
                            <td width="100" class="sub_title">特色种植</td>
                            <td width="20"></td>
                            <td>
                                <div class="sever_r">
                                    <div class="select_more">
                                        <select id="selectsplant" style="display: none;" data-live-search="true" onmouseover="over()"  class="selectpicker" multiple="multiple" >
                                           <a:repeat value="#{pickInfoHome.plants}" var="var">
												<option value="#{var.plantId}">#{var.name}</option>
											</a:repeat>
                                        </select>
                                        <div id="plantmessage"></div>
                                    </div>
                                    <span class="rear no2" style="color:red;">*</span>
                                    <span class="rear no2" style="left:210px; top:5px;">最多可选择20个</span>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td width="100" class="sub_title"></td>
                            <td width="20"></td>
                            <td>
                                <div id="plantList" class="sever_r">
                                    
                                </div>
                            </td>
                        </tr>
                        <!-- <tr>
                            <td width="100" class="sub_title">农产品供应时间</td>
                            <td width="20"></td>
                            <td>
                                 <div class="sever_r">
                                    <div class="input-append date form_datetime fl" id="start_time" style="width:200px;">
                                        <h:inputHidden id="begintime" value="#{pickInfoHome.pickInfo.beginTime}" />
                                        <input id="beginT" readonly="readonly" size="26" type="text" value="请选择开始供应时间"  style="width:188px; color:#d2d2d2;" class="changeOn"/>
                                        <span class="add-on"><i class="icon-th"></i></span>
                                    </div>
                                    <div class="ledgement fl">—</div>
                                    <div class="input-append date form_datetime fl" id="end_time" style="width:200px;">
                                    	<h:inputHidden id="endtime" value="#{pickInfoHome.pickInfo.endTime}" />
                                        <input id="endT" readonly="readonly" size="26" type="text" value="请选择结束供应时间"  style="width:188px; color:#d2d2d2;" class="changeOn"/>
                                        <span class="add-on"><i class="icon-th"></i></span>
                                    </div>
                                    <span class="rear" style="color:red; left:430px;">*</span>
                                    <h:inputHidden id="gylx" value="#{pickInfoHome.pickInfo.supplyType}" />
                                    <div class="fl through_year" style="margin-top:9px; margin-left:20px;">
                                         <input type="checkbox" class="icheck" name="sss" /><label style="padding:0 15px 0 5px;">常年</label>
                                    </div>
                                 </div>
                            </td>
                        </tr> -->
                        <tr>
                            <td width="100" class="sub_title">农品包装</td>
                            <td width="20"></td>
                            <td>
                                <div id="bzlx" class="sever_r">
                                    <a:repeat value="#{pickInfoHome.datadics2}" var="dic2">
                                    <div class="fl" style="margin-top:6px;">
                                         <input type="radio" class="iRadio" name="ccc" value="#{dic2[0]}" aa="#{dic2[0]}"/><label style="padding:0 15px 0 5px;">#{dic2[1]}</label>
                                    </div>
                                </a:repeat>
                                </div>
                            </td>
                        </tr>
                    </table>
                    <div class="setMeal">
                        <div class="service_content clear">
                            <h4 style="float:left;line-height:30px;font-size:14px;">套餐内容</h4>
                            <!-- <button type="button" class="btn btn-success append" style="float:right; margin-top:-25px;">添加</button> -->
                            <!-- <select class="selectpicker" style="float:right; margin-top:-25px;" id="paktype" onclick="adddiv()">
                           		 <option ></option>
                           		 <option value="1">自定义套餐</option>
                           		 <option value="2">一卡通套餐</option>
                            </select> -->
                            <div style="position:relative;float:right;">
	                            <button type="button" class="btn dropdown-toggle selectpicker btn-success" data-toggle="dropdown"><span id="">添加</span><span class="caret"></span></button>
								<ul class="dropdown-menu" role="menu">
									<li>
							      		 <a href="javascript:void(0);" onclick="addmypak();" ><strong style="cursor: pointer;">自定义套餐</strong></a>
			                       	</li>
			                        <li>
			                        	<a href="javascript:void(0);" onclick="addpak();" ><strong style="cursor: pointer;">一卡通套餐</strong></a>
			                        </li> 
							  	</ul>
						  	</div>
                        </div>
                       <a:repeat value="#{pickInfoHome.pickMealInfo}" var="pic" >
                     		<h:outputText rendered="#{pic.generalCardId eq 0}">
                        	<h:inputHidden value="#{pic.pickMealInfoId}" />
                        	<div class="setAdd">
                            <table  width="100%" cellpadding="0" cellspacing="0" class="serve_table">
                                <tr class="row1">
                                    <td width="100" class="sub_title">标题</td>
                                    <td width="20"></td>
                                    <td>
                                        <div>
                                        	<h:inputHidden  name="tcid" class="form-control" value="#{pic.pickMealInfoId}" />
                                        	<h:inputText class="form-control fl" style="width:188px; height:34px;" value="#{pic.name}" />
                                            <div class="fl" style="line-height:34px; padding:0 10px 0 15px;">套餐价格</div>
                                            <h:inputText  class="form-control fl" style="width:100px; height:34px;" value="#{pic.price}" aa="mprices" />
                                            <span style="line-height:34px; padding-left:10px">元</span>
                                            <button style="float:right;" type="button" class="btn btn-default append_del">删除</button>
                                        </div>
                                    </td>
                                </tr>
                                
                                <tr>
		                            <td width="100" class="sub_title">活动时间</td>
		                            <td width="20"></td>
		                            <td>
		                                 <div class="sever_r">
		                                    <div class="input-append date form_datetime fl" id="asasas" style="width:200px;">
		                                        <input id="sawe" name="sawe" readonly="readonly" size="26" type="text" value="#{pic.beginTime}"  style="width:188px; color:#d2d2d2;" class="changeOn"/>
		                                        <span class="add-on"><i class="icon-th"></i></span>
		                                    </div>
		                                    <div class="ledgement fl">—</div>
		                                    <div class="input-append date form_datetime fl" id="qwqw" style="width:200px;">
		                                        <input id="endsvsdvdT" name="endsvsdvdT" readonly="readonly" size="26" type="text" value="#{pic.endTime}"  style="width:188px; color:#d2d2d2;" class="changeOn"/>
		                                        <span class="add-on"><i class="icon-th"></i></span>
		                                    </div>
		                                 </div>
		                            </td>
		                        </tr>
                                
                                <tr>
                                    <td width="100" class="sub_title" style="vertical-align:top;">套餐内容</td>
                                    <td width="20"></td>
                                    <td>
                                        <div>
                                        	<h:inputTextarea class="form-control" rows="4" style="width:450px;" value="#{pic.comments}" />
                                            <!-- <textarea class="form-control" rows="4" style="width:450px;" >#{pic.comments}</textarea> -->
                                            <input class="form-control" style="display:none" value="" />
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        	</div>
                        	</h:outputText>
                        	<h:outputText rendered="#{pic.generalCardId ne 0}">
                        	<div class="setAdd">
                            <table  width="100%" cellpadding="0" cellspacing="0" class="serve_table">
                                <tr class="row1">
                                    <td width="100" class="sub_title">标题</td>
                                    <td width="20"></td>
                                    <td>
                                        <div>
                                        	<h:inputHidden  name="tcid" class="form-control" value="#{pic.pickMealInfoId}" />
                                        	<!-- <h:inputText class="form-control fl" style="width:188px; height:34px;" value="#{pic.name}" />  -->
                                            <select name="dinner" id="dinner" class="form-control fl" style="width:188px; height:34px;">
                                            <a:repeat value="#{pickInfoHome.dinnerType}" var="op" >
                                           	 	<h:outputText rendered="#{op.generalCardId eq pic.generalCardId}">
                                           	 		<option value="#{pic.name}" selected='selected'>#{pic.name}</option>
                                           	 	</h:outputText>
                                           	 	<h:outputText rendered="#{op.generalCardId ne pic.generalCardId}">
                                           	 		<option value="#{op.name}">#{op.name}</option>
                                           	 	</h:outputText>
                                           	 </a:repeat>
                                           	  </select>
                                            <div class="fl" style="line-height:34px; padding:0 10px 0 15px;">结算价格</div>
                                            <input type="text"  class="form-control fl" name="mprices" style="width:100px; height:34px;" value="#{pic.price}" aa="mprices" disabled="disabled"/> 
                                            <span style="line-height:34px; padding-left:10px">元</span>
                                            <button style="float:right;" type="button" class="btn btn-default append_del">删除</button>
                                        </div>
                                    </td>
                                </tr>
                                
                                <tr>
		                            <td width="100" class="sub_title">活动时间</td>
		                            <td width="20"></td>
		                            <td>
		                                 <div class="sever_r">
		                                    <div class="input-append date form_datetime fl" id="asasas" style="width:200px;">
		                                        <input id="sawe" name="sawe" readonly="readonly" size="26" type="text" value="#{pic.beginTime}"  style="width:188px; color:#d2d2d2;" class="changeOn"/>
		                                        <span class="add-on"><i class="icon-th"></i></span>
		                                    </div>
		                                    <div class="ledgement fl">—</div>
		                                    <div class="input-append date form_datetime fl" id="qwqw" style="width:200px;">
		                                        <input id="endsvsdvdT" name="endsvsdvdT" readonly="readonly" size="26" type="text" value="#{pic.endTime}"  style="width:188px; color:#d2d2d2;" class="changeOn"/>
		                                        <span class="add-on"><i class="icon-th"></i></span>
		                                    </div>
		                                 </div>
		                            </td>
		                        </tr>
                                
                                <tr>
                                    <td width="100" class="sub_title" style="vertical-align:top;">套餐内容</td>
                                    <td width="20"></td>
                                    <td class="td1">
                                        <div class="div1">
                                        	<h:inputTextarea class="form-control" rows="4" style="width:450px;" value="#{pic.comments}" />
                                        	<input class="form-control" style="display:none" value="#{pic.generalCardId}" name="diId"/>
                                            <!-- <textarea class="form-control" rows="4" style="width:450px;" >#{pic.comments}</textarea> -->
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        	</div>
                        	</h:outputText>
                        	</a:repeat>
                    </div>
                    <table width="100%" cellpadding="0" cellspacing="0" class="serve_table">
                        <tr>
                            <td width="100" class="sub_title" style="vertical-align:top;">采摘详情</td>
                            <td width="20"></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td colspan="3" style="padding-left: 44px; padding-top: 0;">
                                <div style="margin-left: 78px; display: block;">
                                    <h:inputTextarea value="#{pickInfoHome.pickInfo.comments}"  style="width:690px;height:400px"  id="description" name="description"/>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td width="100" class="sub_title" style="vertical-align:top;">采摘实景图</td>
                            <td width="20"></td>
                            <td>
								<h:inputHidden value="#{pickInfoHome.pickUrl}" id="pickUrl"/>
								<!-- <iframe src="#{request.contextPath}/map/GatheringRealPic.seam?baseId2=#{pickInfoHome.baseId}" id="myframgathering" name="myframgathering" frameBorder="0" scrolling="no" width="" height="155" onLoad="" style="width:100%; height:155px"></iframe> -->
                            	<table width="100%" cellpadding="0" cellspacing="0" id="pinkRealPic">
									<tr>
			    						<td >
			        	 					<ul class="photo_box2"  style="width:auto;float:none;">
			        	 					<rich:panel  id="picRealPic" style="border:0px;float:none;">
			        						<a:repeat value="#{pickInfoHome.pickUrlList}" var="_ai" id="shis"  rowKeyVar="_index">
			         							<li>
			          								<div class="photo001 delect_phone">
			            								<div class="imgBox" style="width: 128px;height: 128px;">   
			              									<a href="#pic_#{_index}" class="plant_bd" >
			            										<img id="plant#{_index}" class="plant_imgbd" src="#{_ai}"  width="128" height="128" />
			            									</a>
			            								</div>
			            								<div class="dkzzedit007 delect_btn">
			                      							<a href="#1" onclick="del(#{_index})" aa="#{_index}"><img src="#{request.contextPath}/asset/images/del03.jpg" width="27" height="23" /></a>
			                    						</div>
			         								</div>
			         							</li>
			         						</a:repeat>
			         						</rich:panel>
                        						<li>
                        							<div id="container1">
															<div  id="selectfiles1" class='btn'><img src="#{request.contextPath}/asset/images/dpadd.jpg" width="128" height="128"/></div>
																<a style="display:none" id="postfiles1" href="javascript:void(0);" class='btn' onclick="apply(1,32);" ></a>
																<a style="display:none" id="callback1" href="javascript:void(0);" class='btn' onclick="callback();" ></a>
													</div>
			        							</li>
			       							</ul>
			       							<span class="star_red">*</span>                                                                          
										</td>
									</tr>
								</table>
                            </td>
                       </tr>
                       <tr>
                            <td width="100" class="sub_title" style="vertical-align:top;"></td>
                            <td width="20"></td>
                       </tr>
                    </table>
                     <div id="ossfile1" ></div>
                </div>
                <!-- 内容结束 -->
                <div class="editorBtn">
                    <h:commandButton id="save" value="保存" styleClass="btn btn-primary" action="#{pickInfoHome.saves}" onclick="return submit2();"/>
                    <s:button styleClass="btn btn-default" value="取消" id="bn_left6" onclick="return submit3();" style="margin-left:10px" />
                </div>
                </h:form>
        
        <rich:modalPanel id="pickImg" autosized="true" height="320" width="650" headerClass="modalHeader">
	       <f:facet name="header">
	           <h:outputText value="图片批量上传" />
	       </f:facet>
	       <f:facet name="controls">
	       		<h:panelGroup>
	            	<h:graphicImage value="../image/close.png" id="hidelink"  title="关闭" style="cursor :pointer;margin-top:4px;margin-right:4px;" />
	            	<rich:componentControl for="pickImg" attachTo="hidelink" operation="hide" event="onclick" />
	        	</h:panelGroup>
	       </f:facet>
	       <h:form enctype="multipart/form-data">
	       		<h:panelGrid columns="2" style="width:100%;">
            	<rich:fileUpload fileUploadListener="#{pickInfoHome.listener}" 
            	   maxRequestSize = "1024000"
            		   maxFilesQuantity="99" 
                  id="upload"
                  immediateUpload="false"
                  acceptedTypes="jpg,gif,png,jpeg,bmp,3gp"
			      autoclear="false" 
			      addControlLabel="添加" 
			      uploadControlLabel="上传" 
			      clearAllControlLabel="清除全部" 
			      clearControlLabel="清除"                        
			      cancelEntryControlLabel="取消"  
			      stopControlLabel="停止" 
			      stopEntryControlLabel="停止" 
			      noDuplicate="true" 
			      listWidth="350px"
			      listHeight="300px" 
			      sizeErrorLabel="文件大小超过1M,上传失败!"
			      doneLabel="上传成功"
			      transferErrorLabel="上传失败!">
		    		<a:support event="onuploadcomplete" reRender="info7,sceneImgList"/>
            	</rich:fileUpload>
             	<h:panelGroup id="info7">
                	<rich:panel headerClass="modalHeader" bodyClass="info" id="panel7" style="width:400px;height:344px;overflow-y:auto;overflow-x:hidden" autosized="true" minWidth="400" height="320">
	                    <f:facet name="header">
	                        <h:outputText value="图片信息" />
	                    </f:facet>
	                    <rich:dataGrid columns="1" value="#{pickInfoHome.sceneFiles}" style="height:320px;" var="file" rowKeyVar="row">
                        <rich:panel bodyClass="">
                            <h:panelGrid columns="2">
                                <s:graphicImage value="#{file.data}" >
									<s:transformImageSize width="113" height="94" maintainRatio="false" />
							    </s:graphicImage>
                                <h:panelGrid columns="2">
                                    <h:outputText value="名称:" />
                                    <h:outputText value="#{file.name}" />
                                    <h:outputText value="大小:" />
                                    <h:outputText value="#{file.length/1000} K" />
                                    <a:commandButton  value="删除" reRender="info7,sceneImgList" image="../image/btn_del_pic.jpg" title="删除图片"> 
										<a:actionparam name="param" value="#{row}" assignTo="#{pickInfoHome.sceneDelPic}"  />  
									</a:commandButton>
                                </h:panelGrid>
                            </h:panelGrid>
                        </rich:panel>
                    </rich:dataGrid>
                </rich:panel>
                <rich:spacer height="3"/>
                <br />
            </h:panelGroup>
            </h:panelGrid>
            <div style="padding-left:350px;width:100%"  >
	          	<img src="../image/btn_close.jpg" onclick="#{rich:component('pickImg')}.hide()" style="cursor :pointer;"></img>
	         </div>
	     	</h:form>
	     </rich:modalPanel> 
                
      </td> 
            
    <!--右边结束-->
    <a:form>
    	<a:jsFunction name="changePrice" action="#{pickInfoHome.changePrice}" data="#{pickInfoHome.price}" oncomplete="givePrice()">
				<a:actionparam name="dinnerName" assignTo="#{pickInfoHome.dinnerName}"/>
		</a:jsFunction>
		<a:jsFunction name="listenerReal" action="#{pickInfoHome.listenerReal()}"  reRender="picRealPic" oncomplete="ailist()">
			<a:actionparam name="picRealPicUrl" assignTo="#{pickInfoHome.picRealPicUrl}"/>
			<a:actionparam name="picUrl" assignTo="#{pickInfoHome.picUrl}"/>
		</a:jsFunction>
        <a:jsFunction name="deleteObj" action="#{pickInfoHome.gatheringRealDel()}" reRender="picRealPic" oncomplete="ailist();">
        	<a:actionparam name="delGatheringRealPicVal" assignTo="#{pickInfoHome.delGatheringRealPicVal}"/>
        	<a:actionparam name="picUrl" assignTo="#{pickInfoHome.picUrl}"/>
        </a:jsFunction>
    </a:form>
<script type="text/javascript">
//<![CDATA[ 
     var bucket_type = "#{dataDicConstant.getBucketType()}";
     var oss_url="";   
     if(bucket_type=="3"){
         oss_url = "http://img5.farmeasy.cn/";
      }else{
    	 oss_url = "http://img4.farmeasy.cn/";
      }   
   function submit3(){
	   var flag=window.confirm("是否保存当前编辑内容？");
		if(flag){
			_Q('#pick\\:save').click();
		}else{
			window.location.href='#{request.contextPath}/map/FarmList.seam';
		}
	}
   _Q(function(){
	   _Q('select[name=dinner]').change(function(){
      	 var dinnerMap = "#{pickInfoHome.dinnerMap}";
           var dinner1 = dinnerMap.substring(0, dinnerMap.length-1);
           var dinnerArray = dinner1.split(","); 
 			var ppp =  _Q(this).parent().children('input[name=mprices]').val();
 			var v = _Q(this).val();
 				 for(var k=0;k<dinnerArray.length;k++){
     				var vv = dinnerArray[k];
     				var vvArray = vv.split("-");
     				var reg = /^\s*|\s*$/g;
     				var vva = vvArray[2];
     				if(vva==v){
     					_Q(this).parent().children('input[name=mprices]').val(vvArray[1]);
     					var oo = _Q(this).parent().parent().parent().next().children('.td1').children('.div1').children('input[name=diId]').val();
     					//var oo = _Q(this).parent(".serve_table").children('input[name=diId]').val();
     					
     					_Q(this).parent().parent().parent().parent().parent().find('input[name=diId]').val(vvArray[0]);
     					//_Q(this).parent().parent().parent().next().children('.td1').children('.div1').children('input[name=diId]').val(vvArray[0]);
         			}
					/* if(v == key){
						_Q(this).parent().next().children('input[name=mprices]').val(dinnerMap[key])
					} */
         		} 
		 }); 
		timeChick();
	});
	function timeChick(){
		_Q("input[name=endsvsdvdT]").each(function(){
			_Q(this).change(function(){
		        var end = _Q(this).val();
		        var begin = _Q(this).parents(".sever_r").find('input[name=sawe]').val();
				if(end!=''){
					end = end.replace(/\-/g, "\/");
				}
				if(begin!=''){
					begin = begin.replace(/\-/g, "\/");
				}
				if(end!='' && begin!='' && begin>end){
					document.getElementById("productMsg").innerHTML = "套餐开始时间不能大于结束时间";
					_Q("#myModal").modal('show');
					_Q(this).val("");
					return false;
				}
		    });
		});
		_Q("input[name=sawe]").each(function(){
			_Q(this).change(function(){
		        var begin = _Q(this).val();
		        var end= _Q(this).parents(".sever_r").find('input[name=endsvsdvdT]').val();
				if(end!=''){
					end = end.replace(/\-/g, "\/");
				}
				if(begin!=''){
					begin = begin.replace(/\-/g, "\/");
				}
				if(end!='' && begin!='' && begin>end){
					document.getElementById("productMsg").innerHTML = "套餐开始时间不能大于结束时间";
					_Q("#myModal").modal('show');
					_Q(this).val("");
					return false;
				}
		    });
		});
	}
   function submit2(){
	   var title = _Q('#pick\\:title').val();
		var avgPrive = _Q('#pick\\:avgprice').val();
		var currency = /^(([1-9]\d*)(\.\d{1,2})?)$|(0\.0?([1-9]\d?))$/;
		var receptionNum = _Q('#pick\\:receptionNum').val();
		//var expiryDate = _Q('#expiryDate').val();
		//_Q('#pick\\:expiryDates').val(expiryDate)
		var plants = _Q('#selectsplant').val()
		var other = _Q('#pick\\:other').val();
		 var gatheringurl = "";
		 _Q("#pinkRealPic").find(".plant_imgbd").each(function(){
			   gatheringurl +=_Q(this).attr('src')+",";
		})
		if(gatheringurl!=""){
			gatheringurl=gatheringurl.substring(0, gatheringurl.length);
			_Q("#pick\\:pickUrl").val(gatheringurl);
		}
		if(title=='请输入您的农场采摘信息'){
			_Q('#pick\\:title_h').val('');
		}else{
			_Q('#pick\\:title_h').val(_Q('#pick\\:title').val());
		}
		
		_Q('#pick\\:avgprice_h').val(avgPrive.replace(/,/g,''));
		_Q('#pick\\:receptionNum_h').val(_Q('#pick\\:receptionNum').val());
		if(other=='请输入娱乐项目内容，不超过20字'){
			_Q('#pick\\:other_h').val('');
		}else{
			_Q('#pick\\:other_h').val(_Q('#pick\\:other').val());
		}
		if(_Q('#czyy').is(':checked')){
			_Q('#pick\\:czyyMess').val(1);
		}else{
			_Q('#pick\\:czyyMess').val(0);
		}
		//alert(plants.length);
		var pd=false;
		 _Q(".setAdd").each(function(i){
	      		var num = 1;
		      _Q(this).find('.form-control').each(function(){
		        var mess= _Q(this).val();
		        if(num == 1){
		        	if(mess==''|| mess=='套餐名称'){
						document.getElementById("productMsg").innerHTML = "请输入第"+(i+1)+"类套餐中套餐名";
						_Q("#myModal").modal('show');
						pd=true;
						return false;
					}
					if(mess.length>45){
						document.getElementById("productMsg").innerHTML = "第"+(i+1)+"类套餐中套餐名输入过长";
						_Q("#myModal").modal('show');
						pd=true;
						return false;
					}
			    }else if(num == 2){
			    	if(!currency.test(mess)){
						document.getElementById("productMsg").innerHTML = "第"+(i+1)+"类套餐中请输入正确价格";
						_Q("#myModal").modal('show');
						pd=true;
						return;
					}
				}else if(num == 3){
					if(mess.length>500){
						document.getElementById("productMsg").innerHTML = "第"+(i+1)+"类套餐中套餐内容输入过长";
						_Q("#myModal").modal('show');
						pd=true;
						return false;
					}
					if(mess==''){
						document.getElementById("productMsg").innerHTML = "请输入第"+(i+1)+"类套餐中套餐内容";
						_Q("#myModal").modal('show');
						pd=true;
						return false;
					}
				}
				num++;
		      })
			})
			if(pd){
				return false;
			}
		
		/* if(!_Q("input[name='sss']").is(':checked')){
			var endT = _Q('#endT').val();
			_Q('#pick\\:endtime').val(endT);
			var beginT = _Q('#beginT').val();
			_Q('#pick\\:begintime').val(beginT);
			if(endT=="" || endT=="请选择结束供应时间" || beginT=="" || beginT=="请选择开始供应时间"){
				document.getElementById("productMsg").innerHTML = "请选择农产品供应时间";
				_Q("#myModal").modal('show');
				return false;
			}
			var sDate = new Date(beginT);
			var eDate = new Date(endT);
			if(sDate > eDate){
				document.getElementById("productMsg").innerHTML = "农产品供应结束时间不能小于开始时间";
				_Q("#myModal").modal('show');
				return false;
			}
			
		} */
		
		if(plants=="" || plants==null ||plants.length==0){
			document.getElementById("productMsg").innerHTML = "请选择特色种植";
			_Q("#myModal").modal('show');
			return false;
		}
		if(plants.length>20){
			document.getElementById("productMsg").innerHTML = "选择特色种植作物过多";
			_Q("#myModal").modal('show');
			return false;
		}
		/* if(expiryDate==""||expiryDate=='请输入信息有效期'){
			document.getElementById("productMsg").innerHTML = "请输入信息有效期";
			_Q("#myModal").modal('show');
			return false;
		} */
		//定义一个全是人数的正则
       var digital=/^[0-9]+$/;
       if(!digital.test(receptionNum)){
       	document.getElementById("productMsg").innerHTML = "请输入正确接待人数";
			_Q("#myModal").modal('show');
			return false;
           }
       if(avgPrive=="" || avgPrive=='0.00'){
			document.getElementById("productMsg").innerHTML = "请输入人均价格";
			_Q("#myModal").modal('show');
			return false;
		}
		if(!currency.test(avgPrive.replace(/,/g,''))){
			document.getElementById("productMsg").innerHTML = "请输入正确价格";
			_Q("#myModal").modal('show');
			return false;
           }
		if(avgPrive.length>10){
			document.getElementById("productMsg").innerHTML = "输入人均价格长度过长";
			_Q("#myModal").modal('show');
			return false;
		}
		
		if(title.length>50){
			document.getElementById("productMsg").innerHTML = "采摘标题长度过长";
			_Q("#myModal").modal('show');
			return false;
		}
		if(_Q("input:radio[name='ccc']:checked").val() == undefined){
			document.getElementById("productMsg").innerHTML = "请选择包装类型";
			_Q("#myModal").modal('show');
			return false;
		}
		if(other.length>20){
			document.getElementById("productMsg").innerHTML = "其他娱乐项目输入过长";
			_Q("#myModal").modal('show');
			return false;
		}
		
		_Q('#pick\\:plantIds').val(_Q('#selectsplant').val());//选中种植物种
		_Q("#pick\\:packageTypeId").val(_Q("input:radio[name='ccc']:checked").val());//包装类型
		/* if(_Q("input[name='sss']").is(':checked')){
			_Q("#pick\\:gylx").val('1');//供应类型:选中（常年）
		}else{
			_Q("#pick\\:gylx").val('0');//供应类型
		} */
		
		var checkString = '';
	    _Q("input[name='ddd']").each(function(){
			if(_Q(this).is(':checked')){
				checkString += _Q(this).val() + ",";
			}
		})
		_Q("#pick\\:datadicsId").val(checkString);//选中的娱乐项目


		var checkString2 = '';
	    _Q("input[name='xxfw']").each(function(){
			if(_Q(this).is(':checked')){
				checkString2 += _Q(this).val() + ",";
			}
		})
		_Q("#pick\\:relaxationId").val(checkString2);//选中的休闲服务
		

		var combo = "["
			_Q(".setAdd").each(function(){
				var id= _Q(this).find('input[type="hidden"]').val();
			  var m ='{'
				m += '"mess1":"'+id+'",';
	      		var num = 2;
		      _Q(this).find('.form-control').each(function(){
		        m += '"mess'+num+'":"'+_Q(this).val()+'",';
				num++;
		      })
		      
		      _Q(this).find('.form_datetime').each(function(){
		        m += '"mess'+num+'":"'+_Q(this).find('input').val()+'",';
				num++;
		      })
				m += '},'
				combo += m;
			})
		combo += "]";
		
		_Q("#pick\\:tcxxm").val(combo);//套餐信息字符串
		
		if(combo.length<=2){
			document.getElementById("productMsg").innerHTML = "请添加至少一个套餐内容";
			_Q("#myModal").modal('show');
			return false;
		}
		
	} 
    var editor;
    KindEditor.ready(
		function(K) {
			editor = K.create('textarea[name="pick\\:description"]', {
			resizeType : 0,
			allowPreviewEmoticons : true,
			uploadJson : '#{request.contextPath}/asset/js/kindeditor/upload_json.jsp?directoryType=32&businessType=4&enterpriseId=' + #{sessionTake.getEnterpriseInfoId()},
			allowImageUpload : true,
			items:[
				'source', '|', 'undo', 'redo', '|', 'preview', 'print', 'template', 'code', 'cut', 'copy', 'paste',
				'plainpaste', 'wordpaste', '|', 'justifyleft', 'justifycenter', 'justifyright',
				'justifyfull', 'insertorderedlist', 'insertunorderedlist', 'indent', 'outdent', 'subscript',
				'superscript', 'clearhtml', 'quickformat', 'selectall', '|', 'fullscreen', '/',
				'formatblock', 'fontname', 'fontsize', '|', 'forecolor', 'hilitecolor', 'bold',
				'italic', 'underline', 'strikethrough', 'lineheight', 'removeformat', '|', 'image', 'multiimage',
				'table', 'hr', 'emoticons', 'baidumap', 'pagebreak',
				'anchor', 'link', 'unlink'
			],
		});
			_Q(".ke-edit-iframe ").contents().find(".ke-content").css("height","328")
	});
    
    _Q(function(){
    	var czyy = '#{pickInfoHome.czyy}';
		if(czyy=='1'){
			_Q('#czyy').iCheck('check');
		}
    	
    	//_Q('#paktype').selectpicker();
    	_Q('#paktype').selectpicker({noneSelectedText:'添加'});
		var fhMess = '#{pickInfoHome.mess}';
		if(fhMess!=''){
			document.getElementById("productMsg").innerHTML = fhMess;
			_Q("#myModal").modal('show');
		}
       	
		var title = '#{pickInfoHome.pickInfo.title}';
		if(!title ==''){
			_Q('#pick\\:title').val(title);
			_Q('#pick\\:title').addClass('focus_input');
		}
    	_Q('#pick\\:title').focus(function(){
   		 _Q(this).addClass('focus_input');
   	        var txt_value = _Q(this).val();
   	        if(txt_value=='请输入您的农场采摘信息'){
   	        	_Q(this).val(""); 
   	        };  
   	    });
   		_Q('#pick\\:title').blur(function(){
   	        var txt_value = _Q(this).val();
   	        if(txt_value==""){
   	        	_Q(this).val('请输入您的农场采摘信息'); 
   	        	_Q(this).removeClass('focus_input');
   	        };  
   	    }); 
   	    
   		var avgprice = '#{pickInfoHome.pickInfo.avgPrice}';
		if(!avgprice ==''){
			_Q('#pick\\:avgprice').val(avgprice);
			_Q('#pick\\:avgprice').addClass('focus_input');
		}
    	_Q('#pick\\:avgprice').focus(function(){
   		 _Q(this).addClass('focus_input');
   	        var txt_value = _Q(this).val();
   	        if(txt_value=='请输入人均价格'){
   	        	_Q(this).val(""); 
   	        };  
   	    });
   		_Q('#pick\\:avgprice').blur(function(){
   	        var txt_value = _Q(this).val();
   	        if(txt_value=="" ||txt_value=='0.00'){
   	        	_Q(this).val('请输入人均价格'); 
   	        	_Q(this).removeClass('focus_input');
   	        };  
   	    }); 
   		var receptionNum = '#{pickInfoHome.pickInfo.receptionNum}';
		if(!receptionNum ==''){
			_Q('#pick\\:receptionNum').val(receptionNum);
			_Q('#pick\\:receptionNum').addClass('focus_input');
		}
    	_Q('#pick\\:receptionNum').focus(function(){
   		 _Q(this).addClass('focus_input');
   	        var txt_value = _Q(this).val();
   	        if(txt_value=='请输入可同时接待人数'){
   	        	_Q(this).val(""); 
   	        };  
   	    });
   		_Q('#pick\\:receptionNum').blur(function(){
   	        var txt_value = _Q(this).val();
   	        if(txt_value=="" ||txt_value=='0.00'){
   	        	_Q(this).val('请输入可同时接待人数'); 
   	        	_Q(this).removeClass('focus_input');
   	        };  
   	    }); 
   		/* var expiryDate = '#{pickInfoHome.pickInfo.expiryDate}';
		if(!expiryDate ==''){
			_Q('#expiryDate').val(expiryDate);
			_Q('#expiryDate').addClass('focus_input');
		}
    	_Q('#expiryDate').focus(function(){
   		 _Q(this).addClass('focus_input');
   	        var txt_value = _Q(this).val();
   	        if(txt_value=='请输入信息有效期'){
   	        	_Q(this).val(""); 
   	        };  
   	    });
   		_Q('#expiryDate').blur(function(){
   	        var txt_value = _Q(this).val();
   	        if(txt_value==""){
   	        	_Q(this).val('请输入信息有效期'); 
   	        	_Q(this).removeClass('focus_input');
   	        };  
   	    });  */
   		var other = '#{pickInfoHome.otherDic}';
		if(!other ==''){
			_Q('#other').val(other);
			_Q('#other').addClass('focus_input');
		}
    	_Q('#other').focus(function(){
   		 _Q(this).addClass('focus_input');
   	        var txt_value = _Q(this).val();
   	        if(txt_value=='请输入娱乐项目内容，不超过20字'){
   	        	_Q(this).val(""); 
   	        };  
   	    });
   		_Q('#other').blur(function(){
   	        var txt_value = _Q(this).val();
   	        if(txt_value==""){
   	        	_Q(this).val('请输入娱乐项目内容，不超过20字'); 
   	        	_Q(this).removeClass('focus_input');
   	        };  
   	    }); 

   		/* var beginT = '#{pickInfoHome.pickInfo.beginTime}';
		if(!beginT ==''){
			_Q('#beginT').val(beginT);
			_Q('#beginT').addClass('focus_input');
		}
    	_Q('#beginT').focus(function(){
   		 _Q(this).addClass('focus_input');
   	        var txt_value = _Q(this).val();
   	        if(txt_value=='请选择开始供应时间'){
   	        	_Q(this).val(""); 
   	        };  
   	    });
   		_Q('#beginT').blur(function(){
   	        var txt_value = _Q(this).val();
   	        if(txt_value==""||txt_value=='请选择开始供应时间'){
   	        	_Q(this).val('请选择开始供应时间'); 
   	        	_Q(this).removeClass('focus_input');
   	        };  
   	    });
   		var endT = '#{pickInfoHome.pickInfo.endTime}';
		if(!endT ==''){
			_Q('#endT').val(endT);
			_Q('#endT').addClass('focus_input');
		}
    	_Q('#endT').focus(function(){
   		 _Q(this).addClass('focus_input');
   	        var txt_value = _Q(this).val();
   	        if(txt_value=='请选择结束供应时间'){
   	        	_Q(this).val(""); 
   	        };  
   	    });
   		_Q('#endT').blur(function(){
   	        var txt_value = _Q(this).val();
   	        if(txt_value==""||txt_value=='请选择结束供应时间'){
   	        	_Q(this).val('请选择结束供应时间'); 
   	        	_Q(this).removeClass('focus_input');
   	        };  
   	    }); */

		
	    
    	FileUploadEntry.LABELS.entry_cancel="取消";
		 FileUploadEntry.LABELS.entry_clear="清除";
		 FileUploadEntry.LABELS.entry_stop='停止';
		 _Q('.rich-fileupload-ico-add ').each(function(){
		      _Q(this).text('添加');
		})
		 _Q('.rich-fileupload-ico-clear-dis').each(function(){
		      _Q(this).text('清除全部');
		})
    	
    	
    	_Q(".setAdd").each(function(i){
	      		var num = 1;
		      _Q(this).find('.form-control').each(function(){
		        var mess= _Q(this).val();
		        if(num == 2){
		        	_Q(this).on("blur",function(){
		                var num = _Q(this).val().replace(/\$|\,/g,'');  
		        		if(isNaN(num))  
		        	        num = "0";  
		        	    sign = (num == (num = Math.abs(num)));  
		        	    num = Math.floor(num*100+0.50000000001);  
		        	    cents = num%100;  
		        	    num = Math.floor(num/100).toString();  
		        	    if(cents<10)  
		        	    cents = "0" + cents;  
		        	    for (var i = 0; i < Math.floor((num.length-(1+i))/3); i++)  
		        	    num = num.substring(0,num.length-(4*i+3))+','+  
		        	    num.substring(num.length-(4*i+3));  
		        	    _Q(this).val(num + '.' + cents)
		            });
				}
				num++;
		      })
			})
    	

    _Q(".del").on("click",function(){
        _Q(this).parents(".kind_select").remove();
		var a=this.val();
    });

    _Q(".changeOn").change(function() {
        if(_Q(this).val()!=this.defaultValue){
             _Q(this).addClass('focus_input');
     }
    });
    
	_Q(function(){
		var ylxm = '#{pickInfoHome.entertainment}'.split(",");
		for(var i=0;i<ylxm.length;i++){
			_Q('input[aa='+ylxm[i]+']').iCheck('check');
		}
		var xxfws = '#{pickInfoHome.relaxation}'.split(",");
		for(var i=0;i<xxfws.length;i++){
			_Q('input[aa='+xxfws[i]+']').iCheck('check');
		}
		
		var bzlx = '#{pickInfoHome.pickInfo.packageType}';
			_Q('input[aa='+bzlx+']').iCheck('check');
			
		var plants = "#{pickInfoHome.pickInfo.plantIds}".split(",");
		_Q(".selectpicker").val(plants)
		_Q('.selectpicker').selectpicker(); 

    	if(_Q("input[name='ddd']:last").is(':checked')){
        	_Q(this).attr("checked", true);
            _Q('.other_input').show(); 
            _Q('#pick\\:other').val('#{pickInfoHome.otherDic}');
        }else{
        	_Q('.other_input').hide(); 
        	_Q('#pick\\:other').val('请输入娱乐项目内容，不超过20字');
     	}
     	//初始化供应时间
    	var year = "#{pickInfoHome.pickInfo.supplyType}"
        if(year == 1){
    		_Q('.through_year input').iCheck('check');
    		_Q("#start_time input").val("").attr("disabled","disabled");  
		    _Q("#end_time input").val("").attr("disabled","disabled"); 
		    _Q("#start_time .add-on").hide();
		    _Q("#end_time .add-on").hide();
        }else{
        	_Q("#start_time input").removeAttr("disabled");
	        _Q("#end_time input").removeAttr("disabled");
	        _Q("#start_time .add-on").show();
	        _Q("#end_time .add-on").show();
        }	
    	
    	
    	_Q(".append_del").on("click",function(){
            _Q(this).parents(".setAdd").remove();
        });
			var vals=_Q('#selectsplant').val();
			var valt=_Q('#selectsplant').text;
			var cont = _Q("#plantList");
			cont.empty();
			for(i in vals){
				var vat='';
				_Q('#selectsplant').children("option").each(function(){
					if(this.value==vals[i]){
						vat=this.text;
						cont.append('<div class="kind_select"><input type="hidden" value="'+vals[i]+'"/><span class="product_name">'+vat+'</span><span class="del" ></span></div>');
						_Q(".del").on("click",function(){
							_Q(this).parent(".kind_select").remove();
							_Q(this).prev("span").text;
					        //alert(_Q(this).prev("span").html());
					        //获取所有的id值
					        var list = _Q("#plantList").children("div");
					        //定义一个接受的字符串
					        
					        var plantValue="";
					        _Q(list).each(function(){
						        
					        	plantValue+=_Q(this).children("input[type='hidden']").val()+",";
					        	
						    });
							
						    plantValue=plantValue.substr(0, plantValue.length - 1);
						    
							if(plantValue!=null&&plantValue!=''){
				                var plantArr=plantValue.split(",");
				                _Q("#selectsplant").val(plantArr).selectpicker('render');
				                
							}else{
					            _Q("#selectsplant").val('').selectpicker('render');
					            
							}
					    });
					}
				})
				
				}
	})
	
    // 时间控件
    _Q(".form_datetime").datetimepicker({
        format: "yyyy-mm-dd",  /* 控制显示格式，默认为空，显示小时分钟 */
        autoclose: true,
        weekStart: 1,
        language:  'zh-CN',
        minView: 2,
        pickerPosition: "bottom-left",
        forceParse:false
    });

    var ch=function(){
		//点击其他
        if(_Q("input[name='ddd']:last").is(':checked')){
        	_Q(this).attr("checked", true);
            _Q('.other_input').show(); 
            _Q('#pick\\:other').val('#{pickInfoHome.otherDic}');
        }else{
        	_Q('.other_input').hide(); 
        	_Q('#pick\\:other').val('请输入娱乐项目内容，不超过20字');
     	}
	}
	_Q(function(){
		_Q("#selectsplant").change(function(){
			var plantValue="";
			var vals=_Q('#selectsplant').val();
			var valt=_Q('#selectsplant').text;
			var cont = _Q("#plantList");
			cont.empty();
			for(i in vals){
				var vat='';
				_Q('#selectsplant').children("option").each(function(){
					if(this.value==vals[i]){
						vat=this.text;
						cont.append('<div class="kind_select"><input type="hidden" value="'+vals[i]+'"/><span class="product_name" id="realPlant_' + vals[i] + '">'+vat+'</span><span class="del" ></span></div>');
						_Q(".del").on("click",function(){
							_Q(this).parent(".kind_select").remove();
							_Q(this).prev("span").text;
					        //alert(_Q(this).prev("span").html());
					        //获取所有的id值
					        var list = _Q("#plantList").find("div");
					        //alert(list.length);
					        //定义一个接受的字符串
					        var plantValue="";
					        _Q(list).each(function(index){
					        	plantValue+=_Q(this).children("input[type='hidden']").val()+",";
						    });
						    plantValue=plantValue.substr(0, plantValue.length - 1);
							if(plantValue!=null&&plantValue!=''){
				                var plantArr=plantValue.split(",");
				                _Q("#selectsplant").val(plantArr).selectpicker('render');
							}else{
					            _Q("#selectsplant").val('').selectpicker('render');
							}
					    });
					}
				})
				
				}
			
		});
	});
	
    _Q(function(){
        //为复选框动态添加事件
    	_Q("input[name='ddd']:last").click(ch); 
    	//_Q(".through_year input").click(cn);
    	
    });
 /*    var beginTime;
    var endTime;
	var cn=function(){
		//点击常年
		if(_Q(".through_year input").is(':checked')){
			_Q("#start_time input").val("").attr("disabled","disabled");  
		    _Q("#end_time input").val("").attr("disabled","disabled"); 
		    _Q("#start_time .add-on").hide();
		    _Q("#end_time .add-on").hide();
		}else{
			_Q("#start_time input").removeAttr("disabled");
	        _Q("#end_time input").removeAttr("disabled");
	        _Q("#start_time .add-on").show();
	        _Q("#end_time .add-on").show();
		}
	} */
    // 点击添加
   /*  var innerDom = ''
    innerDom += '<div class="setAdd">'
                            innerDom +='<table width="100%" cellpadding="0" cellspacing="0" class="serve_table">'
                                innerDom +='<tr class="row1">'
                                    innerDom +='<td width="100" class="sub_title">标题</td>'
                                    innerDom +='<td width="20"></td>'
                                    innerDom +='<td>'
                                        innerDom +='<div>'
                                        	innerDom +='<input type="hidden" id="tcid"  value=""/>'
                                            innerDom +='<input name="mealName"  type="text" class="form-control fl" style="width:188px; height:34px;" value="套餐名称">'
                                           innerDom += '<div class="fl" style="line-height:34px; padding:0 10px 0 15px;">套餐价格</div>'
                                            innerDom +='<input name="mprices" type="text" class="form-control fl" style="width:100px; height:34px;" value="0.00">'
                                            innerDom +='<span style="line-height:34px; padding-left:10px">元</span>'
                                            innerDom +='<button style="float:right;" type="button" class="btn btn-default append_del">删除</button>'
                                        innerDom +='</div>'
                                    innerDom +='</td>'
                                innerDom +='</tr>'
                                innerDom +='<tr>'
                                    innerDom +='<td width="100" class="sub_title" style="vertical-align:top;">套餐内容</td>'
                                    innerDom +='<td width="20"></td>'
                                    innerDom +='<td>'
                                        innerDom +='<div>'
                                            innerDom +='<textarea class="form-control" rows="4" style="width:450px;" ></textarea>'
                                        innerDom +='</div>'
                                    innerDom +='</td>'
                                innerDom +='</tr>'
                            innerDom +='</table>'
                        innerDom +='</div>' */

                        	
    /* _Q(".append").click(function(event) {
       _Q(".setMeal").append(innerDom);
        _Q(".append_del").on("click",function(){
        _Q(this).parents(".setAdd").remove();
        });
    

        _Q('input[name=mprices]').focus(function(){
      		 _Q(this).addClass('focus_input');
      	        var txt_value = _Q(this).val();
      	        if(txt_value=='0.00'){
      	        	_Q(this).val(""); 
      	        };  
      	    });
      		_Q('input[name=mprices]').blur(function(){
      	        var txt_value = _Q(this).val();
      	        if(txt_value=="" || txt_value=='0.00'){
      	        	_Q(this).val('0.00'); 
      	        	_Q(this).removeClass('focus_input');
      	        };  
      	    });
        _Q('input[name=mealName]').focus(function(){
   		 _Q(this).addClass('focus_input');
   	        var txt_value = _Q(this).val();
   	        if(txt_value=='套餐名称'){
   	        	_Q(this).val(""); 
   	        };  
   	    });
   		_Q('input[name=mealName]').blur(function(){
   	        var txt_value = _Q(this).val();
   	        if(txt_value==""){
   	        	_Q(this).val('套餐名称'); 
   	        	_Q(this).removeClass('focus_input');
   	        };  
   	    });
        
        _Q("input[name='mprices']").on("blur",function(){
            var num = _Q(this).val().replace(/\$|\,/g,'');  
    		if(isNaN(num))  
    	        num = "0";  
    	    sign = (num == (num = Math.abs(num)));  
    	    num = Math.floor(num*100+0.50000000001);  
    	    cents = num%100;  
    	    num = Math.floor(num/100).toString();  
    	    if(cents<10)  
    	    cents = "0" + cents;  
    	    for (var i = 0; i < Math.floor((num.length-(1+i))/3); i++)  
    	    num = num.substring(0,num.length-(4*i+3))+','+  
    	    num.substring(num.length-(4*i+3));  
    	    _Q(this).val(num + '.' + cents)
        });
       
    }); */
                    
});

    function num(){
    	var num = _Q('#pick\\:avgprice').val().replace(/\$|\,/g,'');  
    		if(isNaN(num))  
    	        num = "0";  
    	    sign = (num == (num = Math.abs(num)));  
    	    num = Math.floor(num*100+0.50000000001);  
    	    cents = num%100;  
    	    num = Math.floor(num/100).toString();  
    	    if(cents<10)  
    	    cents = "0" + cents;  
    	    for (var i = 0; i < Math.floor((num.length-(1+i))/3); i++)  
    	    num = num.substring(0,num.length-(4*i+3))+','+  
    	    num.substring(num.length-(4*i+3));  
    	    
    	_Q('#pick\\:avgprice').val(num + '.' + cents)
    }

    function over(){
    	_Q('#plantmessage').text(_Q('#selectsplant').val());
    }
    function addmypak(){
	var innerDom = ''
	innerDom += '<div class="setAdd">'
		innerDom +='<table width="100%" cellpadding="0" cellspacing="0" class="serve_table">'
			innerDom +='<tr class="row1">'
				innerDom +='<td width="100" class="sub_title">标题</td>'
				innerDom +='<td width="20"></td>'
				innerDom +='<td>'
					innerDom +='<div>'
						innerDom +='<input type="hidden" id="tcid"  value=""/>'
						innerDom +='<input name="mealName"  type="text" class="form-control fl" style="width:188px; height:34px;" value="套餐名称">'
						innerDom += '<div class="fl" style="line-height:34px; padding:0 10px 0 15px;">套餐价格</div>'
						innerDom +='<input name="mprices" type="text" class="form-control fl" style="width:100px; height:34px;" value="0.00">'
						
						innerDom +='<span style="line-height:34px; padding-left:10px">元</span>'
						innerDom +='<button style="float:right;" type="button" class="btn btn-default append_del">删除</button>'
					innerDom +='</div>'
				innerDom +='</td>'
			innerDom +='</tr>'
			innerDom +='<tr>'
				innerDom +='<td width="100" class="sub_title">活动时间</td>'
					innerDom +='<td width="20"></td>'
					innerDom +='<td>'
						innerDom +='<div class="sever_r">'
						innerDom +='<div class="input-append date form_datetime fl" id="asasas" style="width:200px;">'
							innerDom +='<input id="sawe" name="sawe" readonly="readonly" size="26" type="text" value=""  style="width:188px; color:#d2d2d2;" class="changeOn"/>'
							innerDom +='<span class="add-on"><i class="icon-th"></i></span>'
						innerDom +='</div>'
						innerDom +='<div class="ledgement fl">—</div>'
						innerDom +='<div class="input-append date form_datetime fl" id="qwqw" style="width:200px;">'
							innerDom +='<input id="endsvsdvdT" name="endsvsdvdT" readonly="readonly" size="26" type="text" value=""  style="width:188px; color:#d2d2d2;" class="changeOn"/>'
							innerDom +='<span class="add-on"><i class="icon-th"></i></span>'
						innerDom +='</div>'
					innerDom +='</div>'
				innerDom +='</td>'
			innerDom +='</tr>'
			innerDom +='<tr>'
				innerDom +='<td width="100" class="sub_title" style="vertical-align:top;">套餐内容</td>'
				innerDom +='<td width="20"></td>'
				innerDom +='<td>'
					innerDom +='<div>'
					innerDom +='<textarea class="form-control" rows="4" style="width:450px;" ></textarea>'
						innerDom +='<input class="form-control" name="diId" value="0" style="display:none;"/>';
					innerDom +='</div>'
				innerDom +='</td>'
			innerDom +='</tr>'
		innerDom +='</table>'
	innerDom +='</div>'
		_Q(".setMeal").append(innerDom);
		_Q(".append_del").on("click",function(){
			_Q(this).parents(".setAdd").remove();
		});


		_Q('input[name=mprices]').focus(function(){
			 _Q(this).addClass('focus_input');
	       	 var txt_value = _Q(this).val();
	          if(txt_value=='0.00'){
	        	 _Q(this).val(""); 
	        	};  
	    });
		_Q('input[name=mprices]').blur(function(){
	        var txt_value = _Q(this).val();
	        if(txt_value=="" || txt_value=='0.00'){
	        	_Q(this).val('0.00'); 
	        	_Q(this).removeClass('focus_input');
	        };  
	    });
		_Q('input[name=mealName]').focus(function(){
	 			_Q(this).addClass('focus_input');
       			var txt_value = _Q(this).val();
       			if(txt_value=='套餐名称'){
       				_Q(this).val(""); 
       			};  
   		});
	_Q('input[name=mealName]').blur(function(){
       var txt_value = _Q(this).val();
       if(txt_value==""){
       	_Q(this).val('套餐名称'); 
       	_Q(this).removeClass('focus_input');
       };  
   });

_Q("input[name='mprices']").on("blur",function(){
    var num = _Q(this).val().replace(/\$|\,/g,'');  
	if(isNaN(num))  
        num = "0";  
    sign = (num == (num = Math.abs(num)));  
    num = Math.floor(num*100+0.50000000001);  
    cents = num%100;  
    num = Math.floor(num/100).toString();  
    if(cents<10)  
    cents = "0" + cents;  
    for (var i = 0; i < Math.floor((num.length-(1+i))/3); i++)  
    num = num.substring(0,num.length-(4*i+3))+','+  
    num.substring(num.length-(4*i+3));  
    _Q(this).val(num + '.' + cents)
});

//时间控件
_Q(".form_datetime").datetimepicker({
    format: "yyyy-mm-dd",  /* 控制显示格式，默认为空，显示小时分钟 */
    autoclose: true,
    weekStart: 1,
    language:  'zh-CN',
    minView: 2,
    pickerPosition: "bottom-left",
    forceParse:false
});
timeChick();
}

    function addpak(){
    	 var dinnerMap2 = "#{pickInfoHome.dinnerMap}";
         var dinner2 = dinnerMap2.substring(0, dinnerMap2.length-1);
         var dinnerId = dinner2.split(",")[0].split("-")[0];
    	var pakone = ''
    		pakone += '<div class="setAdd">'
    			pakone +='<table width="100%" cellpadding="0" cellspacing="0" class="serve_table">'
    				pakone +='<tr class="row1">'
    					pakone +='<td width="100" class="sub_title">标题</td>'
    					pakone +='<td width="20"></td>'
    					pakone +='<td>'
    						pakone +='<div>'
    							pakone +='<div>'
    							pakone +='<input type="hidden" id="tcid"  value="" style="display: none;"/>'
        						//pakone +='<input name="mealName"  type="text" class="form-control fl" style="width:188px; height:34px;" value="一卡通套餐" disabled="disabled">'
    							pakone +='<input type="hidden" name="dinnerId"  value="" />'
    							pakone +='<select name="dinner" id="dinner" class="form-control fl" style="width:188px; height:34px;">';
    							/* for(var key in map){
    								pakone +='<option value="'+key+'" >'+key+'</option>';
            					} */
    							pakone +='</select>';
    							pakone +='</div>'
    							pakone +='<div>'
    							pakone += '<div class="fl" style="line-height:34px; padding:0 10px 0 15px;">结算价格</div>'
    							pakone +='<input name="mprices" type="text"  class="form-control fl" style="width:100px; height:34px;" value="" disabled="disabled">'
    							
        						pakone +='<span style="line-height:34px; padding-left:10px">元</span>'
    							pakone +='<button style="float:right;" type="button" class="btn btn-default append_del">删除</button>'
    							pakone +='</div>'
    	    					pakone +='</div>'
    					pakone +='</td>'
    				pakone +='</tr>'
    				pakone +='<tr>'
    					pakone +='<td width="100" class="sub_title">活动时间</td>'
    					pakone +='<td width="20"></td>'
    					pakone +='<td>'
    						pakone +='<div class="sever_r">'
    							pakone +='<div class="input-append date form_datetime fl" id="asasas" style="width:200px;">'
    								pakone +='<input id="sawe" name="sawe" readonly="readonly" size="26" type="text" value=""  style="width:188px; color:#d2d2d2;" class="changeOn"/>'
    								pakone +='<span class="add-on"><i class="icon-th"></i></span>'
    							pakone +='</div>'
    							pakone +='<div class="ledgement fl">—</div>'
    							pakone +='<div class="input-append date form_datetime fl" id="qwqw" style="width:200px;">'
    								pakone +='<input id="endsvsdvdT" name="endsvsdvdT" readonly="readonly" size="26" type="text" value=""  style="width:188px; color:#d2d2d2;" class="changeOn"/>'
    								pakone +='<span class="add-on"><i class="icon-th"></i></span>'
    							pakone +='</div>'
    						pakone +='</div>'
    					pakone +='</td>'
    				pakone +='</tr>'
    				pakone +='<tr>'
    					pakone +='<td width="100" class="sub_title" style="vertical-align:top;">套餐内容</td>'
    					pakone +='<td width="20"></td>'
    					pakone +='<td name="td1">'
    						pakone +='<div name="div1">'
    							pakone +='<textarea class="form-control" rows="4" style="width:450px;" ></textarea>'
    								pakone += '<input class="form-control" name="diId" value="'+dinnerId+'" style="display:none;"/>';
    						pakone +='</div>'
    					pakone +='</td>'
    				pakone +='</tr>'
    		pakone +='</table>'
    	pakone +='</div>'
    		_Q(".setMeal").append(pakone);
		 var dinner = "#{pickInfoHome.dinner}";
		 _Q("select[name=dinner]").each(function(){
			 var c = _Q(this).children().length;
			 	if(_Q(this).children().length>0){
					
				 }else{
					 _Q(this).append(dinner);
					 var mony = "#{pickInfoHome.price}";
					 _Q(this).parent().next().children('input[name=mprices]').val(mony);
					 _Q(this).parent().parent().parent().parent().next().children('td[name=td1]').children('div[name=div1]').children('input[name=diId]').val("#{pickInfoHome.dinnerId}");
				}
			 });
			
			//var mony = "#{pickInfoHome.price}";
            //_Q("#money"+n).val(mony); 
            
             _Q('select[name=dinner]').change(function(){
            	 var dinnerMap = "#{pickInfoHome.dinnerMap}";
                 var dinner1 = dinnerMap.substring(0, dinnerMap.length-1);
                 var dinnerArray = dinner1.split(","); 
       			var ppp =  _Q(this).parent().next().children('input[name=mprices]').val();
       			var v = _Q(this).val();
       				 for(var k=0;k<dinnerArray.length;k++){
           				var vv = dinnerArray[k];
           				var vvArray = vv.split("-");
           				var reg = /^\s*|\s*$/g;
           				var vva = vvArray[2];
           				if(vva==v){
           					_Q(this).parent().next().children('input[name=mprices]').val(vvArray[1]);
           					var oo = _Q(this).parent().parent().parent().parent().next().children('td[name=td1]').children('div[name=div1]').children('input[name=diId]').val();
           					_Q(this).parent().parent().parent().parent().parent().find('input[name=diId]').val(vvArray[0]);
           					//_Q(this).parent().parent().parent().parent().next().children('td[name=td1]').children('div[name=div1]').children('input[name=diId]').val(vvArray[0]);
               			}
						/* if(v == key){
							_Q(this).parent().next().children('input[name=mprices]').val(dinnerMap[key])
						} */
               		} 
  			 });  
    			_Q(".append_del").on("click",function(){
    				_Q(this).parents(".setAdd").remove();
    			});
    			//时间控件
    			_Q(".form_datetime").datetimepicker({
    			    format: "yyyy-mm-dd",  /* 控制显示格式，默认为空，显示小时分钟 */
    			    autoclose: true,
    			    weekStart: 1,
    			    language:  'zh-CN',
    			    minView: 2,
    			    pickerPosition: "bottom-left",
    			    forceParse:false
    			});
    			timeChick();
    	    }

    function imageyz(){
		jquery("#myModal").modal('show');
	}

	/* function changeMoney(){
		this.get
		changePrice();
	}
 */
	function givePrice(){
		var mony = "#{pickInfoHome.price}";
        _Q("#money").val(mony); 
	}
//农场实景图
 _Q(function(){
		ailist();
	})
	ailist = function(){
	 _Q('.photo001').hover(function(){
		 _Q(this).find('.dkzzedit007').show();
		},function(){
			_Q(this).find('.dkzzedit007').hide();
		})
	}
 function apply(num,obj){
		var entId='#{sessionTake.getEnterpriseInfoId()}';
		if(num==1){
			set_upload_param(uploader1, '', false,obj,entId);
		}else if(num==2){
			set_upload_param(uploader2, '', false,obj,entId);
		}else if(num==3){
			set_upload_param(uploader3, '', false,obj,entId);
		}
		
	}

	function callback(){
		var url=_Q("b1").text();
		_Q("b1").parent().remove();
		var gatheringurl = "";
		_Q("#pinkRealPic").find(".plant_imgbd").each(function(){
		  gatheringurl +=_Q(this).attr('src')+",";
		})
		listenerReal(url,gatheringurl);
	}

	del = function(aiIndex){
		var gatheringurl = "";
		_Q("#pinkRealPic").find(".plant_imgbd").each(function(){
			  gatheringurl +=_Q(this).attr('src')+",";
			})
		deleteObj(aiIndex,gatheringurl);
   	}
//]]>  
</script>  
<script type="text/javascript"
			src="#{request.contextPath}/asset/lib/plupload-2.1.2/js/plupload.full.min.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/map/gatherPicUpload.js"></script>
  </ui:define>  
</ui:composition>

<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	template="/layout/template_new.xhtml">

	<ui:define name="body">
    
	<style>
	.form-control{
			float:left;
		}
		
	 
	</style>
	<script type="text/javascript">
		jquery = jQuery.noConflict();
		  window.onload = function () {
		    jquery('.selectpicker').selectpicker();
		  };
		</script>
		<div class="box_back" id="login" style="display: none; z-index: 1000">
			<div id="login2"
				style="width: 60px; height: 60px; margin: 220px auto 0 auto;">
				<img src="../asset/images/loginda.gif" />
			</div>
		</div>
         <td valign="top">
               
		<h:form id="user" enctype="multipart/form-data">
				<!-- Modal -->
<div aria-hidden="false" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="myModal" class="modal fade in w600na" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">提示框</h4>
      </div>
      <div class="modal-body">
       <span id="productMsg">*号部分为必填项！</span>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
        <button type="button" class="btn btn-primary" data-dismiss="modal">确认</button>
      </div>
    </div>
  </div>
</div>
                <div class="right_c">
                	<div class="r_title">
                    	<div class="r_t_l" style="width:80%;">
							数字农场&#160;&gt;&#160;&#160;<font size="3"><s:link propagation="none"  view="/map/InstrumentInfoList.xhtml" style="text-decoration:none;color:rgb(66, 139, 202);"  value="设备档案 "/></font>
						<span style="display: #{instrumentInfoHome.dataDic.name eq null or instrumentInfoHome.dataDic.name eq ''?'none':''}">&#160;&gt;&#160;&#160;<font size="3"><b>#{instrumentInfoHome.dataDic.name}</b></font></span><rich:messages styleClass="messages"></rich:messages></div>
                    </div>
                 <!-- #{instrumentInfoHome.basicListEdit()} -->   
				<!--入库订单列表开始-->
				<div class="all_d3">
				  <s:div styleClass="all_da all_w01"  rendered="#{instrumentInfoHome eq null or instrumentInfoHome.baseId eq 0}">
                        	<table>
                                <tr>
                                    <td class="all_te">基地名称：</td>
                                    <td>
                                       <h:selectOneMenu immediate="true" id="basicId"  styleClass="selectpicker nw200" value="#{instrumentInfoHome.baseId}">
												<s:selectItems value="#{instrumentInfoHome.basicList}" var="var" label="#{var.name}" itemValue="#{var.id}"/>
										</h:selectOneMenu>
                                    </td>
                                </tr>
                            </table>
                        </s:div>
                        <div class="all_da all_w01" style="display:#{instrumentInfoHome.baseId eq null or instrumentInfoHome.baseId eq 0?'none':''}">
                        	<table>
                                <tr>
                                    <td class="all_te">基地名称：</td>
                                    <td>
                                       <h:outputText value="#{instrumentInfoHome.bObj.name}" id="bName"/>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">农机类型：</td>
                                    <td>                                  	
                                    	<span style="float:left">
										<h:selectOneMenu immediate="true" styleClass="selectpicker" style="width:146px;float:left;"  id="addType"  value="#{instrumentInfoHome.addType}">
											<s:selectItems value="#{instrumentInfoHome.ddList}" var="var" label="#{var.name}" itemValue="#{var.dataDicId}" escape="false"/>
										</h:selectOneMenu>
										</span>
                                      <span class="finput" style="color:#ff0000;float:right;margin-left:-2px;">*</span>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    	<div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">农机名称：</td>
                                    <td>
                                       <h:inputText styleClass="form-control nw221" value="#{instrumentInfoHome.instance.name}" id="name"/>
                                      <span class="finput" style="color:#ff0000;">*</span>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        
                    	<div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">农机型号：</td>
                                    <td>
                                        <h:inputText id="model"  value="#{instrumentInfoHome.instance.model}"
						styleClass="form-control nw221" />
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">购买人：</td>
                                    <td>
                                        <h:inputText id="buyPerson"  value="#{instrumentInfoHome.instance.buyPerson}"
						styleClass="form-control nw221" />
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">购买时间：</td>
                                    <td>
								    <div class="input-append date form_datetime " >
								    	<h:inputText  id="buyTime" styleClass="new_time" value="#{instrumentInfoHome.instance.buyTime}" >
								    		<f:convertDateTime  pattern="yyyy-MM-dd" timeZone="GMT+8" />
								    	</h:inputText>
								    	<span class="add-on"><i class="icon-th"></i></span>
								    </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">图片：</td>
                                    <td>
                                      <s:fileUpload id="picture" size="30"
											accept="image/png,image/jpeg,image/gif"
											contentType="image/png,image/jpeg,image/gif"
											fileName="#{instrumentInfoHome.instance.pictureName}"
											data="#{instrumentInfoHome.instance.pictureByte}">
										</s:fileUpload>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <p class="pic_stress" style=" margin-left: 145px;width:85%;padding-top:0;">图片标准：158X146（像素）支持格式：jpg,gif,png,jpeg,bmp,3gp</p>
                        <div class="clear"></div>
                        </div>
                        
                         <table width="280" style="margin:35px auto 0 auto;">
						<tr>
							<td>
						<h:commandButton id="persist"  styleClass="btn btn-primary" value="提交" action="#{instrumentInfoHome.persist}" rendered="#{!instrumentInfoHome.managed}"  onclick="return checkSubmit()"/>
		            	<h:commandButton id="update"  styleClass="btn btn-primary" value="提交" action="#{instrumentInfoHome.update}" rendered="#{instrumentInfoHome.managed}"   onclick="return checkSubmit()"/>
		    			&#160;<s:button view="/map/InstrumentInfoList.xhtml" styleClass="btn btn-default" value="返回" id="bn_left6" style="margin-left:10px;" />
                            </td>
						</tr>
                   </table> 
				<!--入库订单列表结束-->
                    <div class="clear"></div>
                </div><!--right_c结束-->
                <div class="clear"></div>
                
                 <style>
    .rich-calendar-button{
     margin-left:-8px
    }
    </style>
                
              </h:form>
<script type="text/javascript">
	   //<![CDATA[	
	   var promptMessage = "#{instrumentInfoHome.promptMessage}";
		if(promptMessage != ""){
			document.getElementById("productMsg").innerHTML = promptMessage;
			jquery("#myModal").modal('show');
		}
jquery(".rich-calendar-input").addClass("r_c_text_date");
jquery(".rich-calendar-input").removeClass("rich-calendar-input");
	function checkSubmit(){
		   var name = document.getElementById("user:name").value; 
		   
		   if(name == ""){
				document.getElementById("productMsg").innerHTML = "请输入农机名称！";
				jquery("#myModal").modal('show');
				return false;
			}

		   if(jquery('#user\\:addType').val()==null){
			   document.getElementById("productMsg").innerHTML = "请添加农机类型！";
				jquery("#myModal").modal('show');
				return false;
			}
		   
		   var buydate=new Date((jquery("#user\\:buyTime").val()).replace(/-/g,"/"));             
           var date = new Date(); 
           if(buydate > date){
               
        	   document.getElementById("productMsg").innerHTML = "购买时间不能超过今天！";
				jquery("#myModal").modal('show');
				return false;
           }
           jquery("#login").show();
	}

	
	
	function closeMethod(){
		 var name = document.getElementById("user:name").value; 
		   if(name == ""){
			   document.getElementById("user:name").focus();
			   return false;
			}
		}
	//]]>
</script>

<script type="text/javascript">
				jquery(".form_datetime").datetimepicker({
					 format: "yyyy-mm-dd",
					    autoclose: true,
						 weekStart: 1,
						  //startDate: "2014-08-14 10:00",
						 language:  'zh-CN',
						 minView:2,
					    pickerPosition: "bottom-left"
				});
				jquery(".form_datetime input").focus(  function(){jquery(this).attr('readonly','ture');	});
				  jquery(".form_datetime input").blur( function(){jquery(this).removeAttr('readonly');	});
			</script>
            </td> 
	</ui:define>

</ui:composition>

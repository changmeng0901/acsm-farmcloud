<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	template="/layout/template.xhtml">
	<ui:define name="body">
	<style>
	.all_da{
	margin-left:165px;
	}
	</style>
		<td valign="top">
			<style>
			   .all_da table,.all_te table{table-layout: inherit;}
				.ts_div2{width:240px; height: 125px; border: 1px solid #81C5E9; margin: 0px auto; padding: 0 15px 15px;  background: url(#{request.contextPath}/asset/images/tck_bg_14.jpg) #ffffff repeat-x scroll center top;}
				.dr-mpnl-shadow{background:none;}
				.dr-mpnl-pnl{background:none; border:none;}
				.dr-mpnl-pnl-b{padding:0;}
				.dr-mpnl-shadow{top:0; left:0;}
			</style>
		 <div class="right_c" >
		<h:form id="user" enctype="multipart/form-data">
               <rich:modalPanel id="products" autosized="true" height="125"
				width="240" headerClass="modalHeader">
				<div class="ts_div2" id="div2">
				<div class="tck_ti"><a href="#"> <h:outputLink value="#"
					onclick="#{rich:component('products')}.hide(); return false;">
					<img src="#{request.contextPath}/asset/images/close_17.jpg"
						width="20" height="20" onclick="return closeMethod()" />
				</h:outputLink> </a></div>

				<table
					style="width: 100%; margin-top: 25px; table-layout: fixed; margin-left: 15px;">
					<tr>
						<td width="46" align="left"><img
							src="#{request.contextPath}/asset/images/tstc.jpg" width="46"
							height="46" /></td>
						<td align="left"
							style="font-family: '宋体'; color: #000000; font-size: 12px; padding-left: 15px;">
						<span id="productMsg">*号部分为必填项！</span></td>
					</tr>
				</table>
				</div>
			</rich:modalPanel>
                	<div class="r_title">
					<div class="r_t_l"> 
					<s:link propagation="none"  view="/record/RecordManagement.xhtml" style="text-decoration:none;" value="基础信息 "/>
					&#160;&gt;&#160;&#160;<font size="3">企业信息</font></div>
					<div class="r_t_r">
						<ul>
							<li >
							<a href="#{request.contextPath}/record/PrintRecordList.seam" style="text-decoration:none;color:black;" >
		                 		<img src="#{request.contextPath}/asset/images/0001_03.jpg" width="11" height="9" />
		              			打印记录
		              		</a>
		        			</li>
							<li style="border-right:1px solid #ccc;">
								<a href="#{request.contextPath}/record/ProductBaseInfoList.seam" style="text-decoration:none;color:black;" >
								<img src="#{request.contextPath}/asset/images/newlvli_03.jpg" width="11" height="9" />
		                      	  履历管理
		                      	  </a>
		                    </li>
		     			</ul>
					</div>
				</div>
				<!--入库订单列表开始-->
				<!-- #{enterpriseInfoHome.getEnterpriseInfomationId()} -->
				<div class="all_d3" >
                    	<div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">企业名称：</td>
                                    <td>
                                       <h:inputText styleClass="r_c_text" value="#{enterpriseInfoHome.instance.name}" id="name"/>
                                       <font color="#FF0000">*</font>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    	<div class="all_da all_w01">
                        	<table width="100%">
                            	<tr>
                                	<td class="all_te">审核状态：</td>
                                    <td>
                                    	 <h:selectOneMenu  id="enterpriseInfoStatus" 
						value="#{enterpriseInfoHome.instance.enterpriseInfoStatus}" >
						<f:selectItem id="type1" itemLabel="未通过审核" itemValue="0" ></f:selectItem>
						<f:selectItem id="type2" itemLabel="通过审核" itemValue="1" ></f:selectItem>
						</h:selectOneMenu>
                                    </td>
                            	</tr>
                            </table>
                        </div>
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">联系人：</td>
                                    <td>
                                        <h:inputText id="contact" value="#{enterpriseInfoHome.instance.contact}"
						styleClass="r_c_text" /> 
                                    </td>
                                </tr>
                            </table>
                        </div>
                    	<div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">联系电话：</td>
                                    <td>
                                      <h:inputText id="contactPhone"  value="#{enterpriseInfoHome.instance.contactPhone}"
						styleClass="r_c_text" />
                                    </td>
                                </tr>
                            </table>
                        </div>
                    	<div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">网址：</td>
                                    <td align="left"><h:inputText id="website"  value="#{enterpriseInfoHome.instance.website}"
						styleClass="r_c_text" /></td>
                                </tr>
                            </table>
                        </div>
                    	<div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">邮箱：</td>
                                    <td align="left">
                                       <h:inputText id="email"  value="#{enterpriseInfoHome.instance.email}"
						styleClass="r_c_text" />
                                    </td>
                                </tr>
                            </table>
                        </div>
                        
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">坐标X：</td>
                                    <td align="left">
                                       <h:inputText id="coordinateX"  value="#{enterpriseInfoHome.instance.coordinateX}"
						styleClass="r_c_text" />
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">坐标Y：</td>
                                    <td align="left">
                                       <h:inputText id="coordinateY"  value="#{enterpriseInfoHome.instance.coordinateY}"
						styleClass="r_c_text" />
                                    </td>
                                </tr>
                            </table>
                        </div>
                        
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">地址：</td>
                                    <td>
                                       <h:inputText id="address"  value="#{enterpriseInfoHome.instance.address}"
						styleClass="r_c_text" />
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">企业图片：</td>
                                    <td align="left" id="checkone">
                                      <h:outputLink value="#" id="link">
							<img src="../image/pl_03.jpg" title="图片批量上传" />
							<rich:componentControl for="operatePanel" attachTo="link" operation="show" event="onclick" />
						</h:outputLink>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        
                         <div class="all_da all_w01" style="width:724px;">
                        	<table>
                                <tr>
                                    <td class="all_te">企业介绍：</td>
                                    <td align="left" >
                                       <h:inputTextarea id="description" styleClass="big" style="*width:416px; *height:66px; " value="#{enterpriseInfoHome.instance.description}" />
                                    </td>
                                </tr>
                            </table>
                        </div>
                       	<div class="r_title">
                    	<div style="text-align:center;" width="100%"><font size="4"><strong>该企业认证信息</strong></font></div>
                    	</div>
                        <br/>
                        <br/>
                        	<div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">认证种类：</td>
                                    <td>
                                       <h:inputText styleClass="r_c_text" maxlength="45" value="#{enterpriseInfoHome.chInfo.name}" id="name2"/>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">认证机构：</td>
                                    <td>
                                     <h:inputText id="userPhone" maxlength="45" value="#{enterpriseInfoHome.chInfo.from}" styleClass="r_c_text" />
                                    </td>
                                </tr>
                            </table>
                        </div>
                    	<div class="all_da all_w01">
                        	<table>
                            	<tr>
                                	<td class="all_te">认证时间：</td>
                                    <td><rich:calendar id="getTime"  datePattern="yyyy-MM-dd"  value="#{enterpriseInfoHome.chInfo.getTime}"/></td>
                            	</tr>
                            </table>
                        </div>
                    	<div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">证件有效期：</td>
                                    <td>
                                       <rich:calendar id="validPeriod"  datePattern="yyyy-MM-dd"  value="#{enterpriseInfoHome.chInfo.validPeriod}"/> 
                                    </td>
                                </tr>
                            </table>
                        </div>
                    	<div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">图片：</td>
                                    <td align="left">
                                    <s:fileUpload id="imgIphoneUrl" size="40" accept="image/png,image/jpeg,image/gif" contentType="image/png,image/jpeg,image/gif" fileName="#{enterpriseInfoHome.chInfo.pictureName}"
											data="#{enterpriseInfoHome.chInfo.picture}">
											</s:fileUpload>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="all_da all_w01" style="width:724px;">
                        	<table>
                                <tr>
							<td class="all_te">其他说明：</td>
							<td>
								<h:inputTextarea id="comment" maxlength="255" styleClass="big" style="*width:416px; *height:66px; " value="#{enterpriseInfoHome.chInfo.comment}" />
                            </td>
							</tr>
							<tr>
								<td colspan="2" height="35"></td>
							</tr>
	                            </table>
	                        </div>
                   
                   
                    <div class="r_title">
                    	<div style="text-align:center;" width="100%"><font size="4"><strong>农场主信息</strong></font></div>
                    	</div>
                        <br/>
                        <br/>
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">名称：</td>
                                    <td>
                                       <h:inputText styleClass="r_c_text" maxlength="45" value="#{enterpriseInfoHome.fInfo.name}" id="name3"/>
                                       <font color="#FF0000">*</font>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    	<div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">年龄：</td>
                                    <td>
                                        <h:inputText id="age" value="#{enterpriseInfoHome.fInfo.age}"
						styleClass="r_c_text_date" />岁
                                    </td>
                                </tr>
                            </table>
                        </div>
                    	<div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">从业年限：</td>
                                    <td>
                                     <h:inputText id="workAge"  value="#{enterpriseInfoHome.fInfo.workAge}"
						styleClass="r_c_text_date" />年
                                    </td>
                                </tr>
                            </table>
                        </div>
                    	<div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">电话：</td>
                                    <td ><h:inputText id="phone"  maxlength="20" value="#{enterpriseInfoHome.fInfo.phone}"
						styleClass="r_c_text" /></td>
                                </tr>
                            </table>
                        </div>
                    	<div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">荣誉：</td>
                                    <td>
                                       <h:inputText id="honour" maxlength="255" value="#{enterpriseInfoHome.fInfo.honour}" styleClass="r_c_text" />
                                    </td>
                                </tr>
                            </table>
                        </div>
                        
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">图片：</td>
                                    <td>
                                      <s:fileUpload id="picture" size="30"
											accept="image/png,image/jpeg,image/gif"
											contentType="image/png,image/jpeg,image/gif"
											fileName="#{enterpriseInfoHome.fInfo.pictureName}"
											data="#{enterpriseInfoHome.fInfo.picture}">
										</s:fileUpload>
                                    </td>
                                </tr>
                            </table>
                        </div>
                         <div class="all_da all_w01" style="width:80%;">
                        	<table>
                                <tr>
                                    <td class="all_te">农务感言：</td>
                                    <td >
                                       <h:inputTextarea id="wards" maxlength="500" styleClass="big" style="*width:416px; *height:66px;" value="#{enterpriseInfoHome.fInfo.wards}" />
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="all_da all_w01" style="width:80%;">
                        	<table>
                                <tr>
									<td class="all_te">描述：</td>
									<td>
										<h:inputTextarea id="fdescription" maxlength="500" styleClass="big" style="*width:416px; *height:66px; "  value="#{enterpriseInfoHome.fInfo.description}" />
		                            </td>
								</tr>
								<tr>
									<td colspan="2" height="35"></td>
								</tr>
                            </table>
                        </div>
                        <div class="clear"></div>
                   </div>
                    
                    
                    
                         <table width="180" style="margin:35px auto 0 auto;">
						<tr>
							<td>
			            	<h:commandButton id="update"  styleClass="edit_save" action="#{enterpriseInfoHome.updatet}" onclick="return checkSubmit()"/>
			            	<s:button view="/record/RecordManagement.xhtml"  styleClass="edit_back" id="bn_left6" style="margin-left:10px" />
                            </td>
                            
						</tr>
                   </table> 
				<!--入库订单列表结束-->
                    <div class="clear"></div>
                <!--right_c结束-->
                <div class="clear"></div>
              </h:form>
              </div>
              <rich:modalPanel id="operatePanel" autosized="true" height="320" width="650" headerClass="modalHeader">
	       <f:facet name="header">
	           <h:outputText value="图片批量上传" />
	       </f:facet>
	       <f:facet name="controls">
	       		<h:panelGroup>
	            	<h:graphicImage value="../image/close.png" id="hidelink2"  title="关闭" style="cursor :pointer;margin-top:4px;margin-right:4px;" />
	            	<rich:componentControl for="operatePanel" attachTo="hidelink2" operation="hide" event="onclick" />
	        	</h:panelGroup>
	       </f:facet>
	       <h:form enctype="multipart/form-data">
	       		<h:panelGrid columns="2" style="width:100%;">
            	<rich:fileUpload fileUploadListener="#{enterpriseInfoHome.listener}" 
            	maxRequestSize = "1024000"
            		   maxFilesQuantity="99" 
                  id="upload"
                  immediateUpload="false"
                  acceptedTypes="jpg, gif, png"
			      autoclear="false" 
			      addControlLabel="添加" 
			      uploadControlLabel="上传" 
			      clearAllControlLabel="清除全部" 
			      clearControlLabel="清除"                        
			      cancelEntryControlLabel="取消"  
			      stopControlLabel="停止" 
			      stopEntryControlLabel="停止" 
			      noDuplicate="true" 
			      listWidth="350px"
			      listHeight="300px" 
			      doneLabel="上传成功" 
			      sizeErrorLabel="文件超过大小,上传失败!"
			      transferErrorLabel="上传失败!" >
		    		<a:support event="onuploadcomplete" reRender="info" />
            	</rich:fileUpload>
             	<h:panelGroup id="info">
                	<rich:panel headerClass="modalHeader" bodyClass="info" id="panel" style="width:400px;height:344px;overflow-y:auto;overflow-x:hidden" 

autosized="true" minWidth="400" height="320">
	                    <f:facet name="header">
	                        <h:outputText value="图片信息" />
	                    </f:facet>
	                    <rich:dataGrid columns="1" value="#{enterpriseInfoHome.files}" style="height:320px;" var="file" rowKeyVar="row">
                        <rich:panel bodyClass="">
                            <h:panelGrid columns="2">
                                <s:graphicImage value="#{file.data}">
									<s:transformImageSize width="113" height="94" maintainRatio="false" />
							    </s:graphicImage>
                                <h:panelGrid columns="2">
                                    <h:outputText value="名称:" />
                                    <h:outputText value="#{file.name}" />
                                    <h:outputText value="大小:" />
                                    <h:outputText value="#{file.length/1000} K" />
                                    <a:commandButton  value="删除" reRender="info" image="../image/btn_del_pic.jpg" title="删除图片"> 
										<a:actionparam name="param" value="#{row}" assignTo="#{enterpriseInfoHome.delPic}"  />  

     
									</a:commandButton>
                                </h:panelGrid>
                            </h:panelGrid>
                        </rich:panel>
                    </rich:dataGrid>
                </rich:panel>
                <rich:spacer height="3"/>
                <br />
            </h:panelGroup>
            </h:panelGrid>
            <div style="padding-left:350px;width:100%"  >
	          	<img src="../image/btn_close.jpg" onclick="#{rich:component('operatePanel')}.hide()" style="cursor :pointer;"></img>
	         </div>
	     	</h:form>
	     </rich:modalPanel>
	    <script type="text/javascript">
	   //<![CDATA[	
jquery(".rich-calendar-input").addClass("r_c_text_date");
jquery(".rich-calendar-input").removeClass("rich-calendar-input");
function checkInteger(obj){
	  if(obj.value!=""){
		var v = obj.value;
		var reg = /^[1-9]+[0-9]*]*$/; 
			if (!reg.test(v)){
				obj.focus();
				return false;
			}
	  }
				return true;
	}
	function checkSubmit(){
			//公司信息 校验
			var name = document.getElementById("user:name").value; //企业名称	
		   var email = document.getElementById("user:email").value; //邮箱
		   var contactPhone = document.getElementById("user:contactPhone").value;//联系电话
		 	//农场主信息 校验
			var name3 = document.getElementById("user:name3").value;//农场主名称  
			var phone = document.getElementById("user:phone").value;// 电话
		   var emailReg = /^([a-z0-9A-Z]+[_-|\.]?)+[a-z0-9A-Z]@([a-z0-9A-Z]+(-[a-z0-9A-Z]+)?\.)+[a-zA-Z]{2,}$/;
		   var a2 =  checkInteger(document.getElementById("user:age"));
		   var a3 =  checkInteger(document.getElementById("user:workAge"));
		   if(name == ""){
				document.getElementById("productMsg").innerHTML = "企业名称不能为空";
				#{rich:component('products')}.show();
				return false;
			}
			   if(contactPhone.length > 12){
				document.getElementById("productMsg").innerHTML = "请输入正确的电话号码";
				#{rich:component('products')}.show();
				return false;
			}
		   if(email != "" && !emailReg.test(email)){
				document.getElementById("productMsg").innerHTML = "请输入正确的电子邮件地址";
				#{rich:component('products')}.show();
				return false;
			}

		   if(name3 == ""){
				document.getElementById("productMsg").innerHTML = "请输入姓名";
				#{rich:component('products')}.show();
				return false;
			}
		   if(phone.length > 12){
				document.getElementById("productMsg").innerHTML = "请输入正确的电话号码";
				#{rich:component('products')}.show();
				return false;
			}
		   if(!a2){
			   document.getElementById("productMsg").innerHTML = "请填写正确的年龄";
			   #{rich:component('products')}.show();return false;
		   }
		   if(!a3){
			   document.getElementById("productMsg").innerHTML = "请填写正确的从业年限";
			   #{rich:component('products')}.show();return false;
		   }
			
	}
	
	function closeMethod(){
		//公司信息 校验
		   var name = document.getElementById("user:name").value; //企业名称
		   var email = document.getElementById("user:email").value; //邮箱
		   var contactPhone = document.getElementById("user:contactPhone").value;//联系电话
		 	//农场主信息 校验
			var name3 = document.getElementById("user:name3").value;//农场主名称  
			var phone = document.getElementById("user:phone").value;// 电话
		   var emailReg = /^([a-z0-9A-Z]+[_-|\.]?)+[a-z0-9A-Z]@([a-z0-9A-Z]+(-[a-z0-9A-Z]+)?\.)+[a-zA-Z]{2,}$/;
		   var a2 =  checkInteger(document.getElementById("user:age"));
		   var a3 =  checkInteger(document.getElementById("user:workAge"));
		   if(name == ""){
			   document.getElementById("user:name").focus();
			   return false;
			}
		   if(contactPhone.length > 12){
				document.getElementById("user:contactPhone").focus();
				return false;
			}
	  
		   if(email != "" && !emailReg.test(email)){
				document.getElementById("user:email").focus();
				return false;
			}

		   if(name3 == ""){
			   document.getElementById("user:name3").focus();
			   return false;
			}
	
		   if(phone.length > 12){
				document.getElementById("user:phone").focus();
				return false;
			}
		   if(!a2){
			   document.getElementById("user:age").focus();
		   }
		   if(!a3){
			   document.getElementById("user:workAge").focus();
		   }
		}
	//]]>
</script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/superfish.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/supersubs.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/hoverIntent.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.flot.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery-ui.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery-ui-select.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/customInput.jquery.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.dataTables.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.fancybox-1.3.4.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.filestyle.mini.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery-ui-timepicker-addon.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.treeview.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.tipsy.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.wysiwyg.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/inline.js"></script>
            </td> 
            
	</ui:define>

</ui:composition>

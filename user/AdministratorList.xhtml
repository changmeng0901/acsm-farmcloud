<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	template="/layout/template_new.xhtml">

	<ui:define name="body">
	<style>
	.nzhqh{ width:100%}
	.nw500{width:500px;}
	.nqh_search{margin:40px auto 30px;width:500px; }
	.nqh_box{ margin:0 auto;}
	.nqh_box li{float:left; }
	.nqh_boxli{width:236px; height:290px; border:1px solid #cccccc; margin-top:10px; margin-left:10px;}
	
	.nqh_font{ font-size:23px;color:#333;}
	.nqh_title{ height:36px; line-height:36px; font-size:14px; background-color:#ebedef; text-align:center;}
	.nqh_table{margin-left:20px;margin-right:20px; }
	.nqh_table tr td{height:37px; line-height:37px; color:#6f6f6f;padding-left:5px;}
	.bootstrap-select:not([class*="span"]):not([class*="col-"]):not([class*="form-control"]):not(.input-group-btn) {width:100px;}
	</style>
	
	<td valign="top" width="210" style="border-right:1px solid #e1e4eb;">
    	<div class="left_c2">
        	<ul class="lt_c_ul">
              	<li>
                  	<a href="#{request.contextPath}/user/EnterpriseInfoList.seam"><img class="tbimg" src="#{request.contextPath}/asset/images/enterpriseInfo_10.png"/>&#160;企业管理</a>
                </li>
              	<li><a href="#{request.contextPath}/user/UserList.seam"  ><img class="tbimg" src="#{request.contextPath}/asset/images/user_17.png"/>&#160;用户管理</a></li>
              	<li><a href="#{request.contextPath}/user/EnterpriseGroupList.seam"><img class="tbimg" src="#{request.contextPath}/asset/images/en.png"/>&#160;企业组管理</a></li>
              	<li><a href="#{request.contextPath}/user/CommunityList.seam"><img class="tbimg" src="#{request.contextPath}/asset/images/community_23.png"/>&#160;角色管理</a></li>
              	<li>
                	<a href="#{request.contextPath}/user/RoleList.seam"><img class="tbimg" src="#{request.contextPath}/asset/images/role.png"/>&#160;权限管理</a>
                </li>
                <li>
                	<a href="#{request.contextPath}/user/AdministratorList.seam" class="fon_07" ><strong><img class="tbimg" src="#{request.contextPath}/asset/images/userqie.png"/>&#160;用户切换管理</strong></a>
                </li>
                <li>
                	<a href="#{request.contextPath}/user/DataDicList.seam"><img class="tbimg" src="#{request.contextPath}/asset/images/dataDic.png"/>&#160;字典管理</a>
                </li>
                 <li>
                	<a href="#{request.contextPath}/user/DeviceTypeList.seam"><img class="tbimg" src="#{request.contextPath}/asset/images/shebei.png"/>&#160;设备类型</a>
                </li>
                <li>
                	<a href="#{request.contextPath}/user/SkinInfoList.seam" ><img class="tbimg" src="#{request.contextPath}/asset/images/pifu.png"/>&#160;皮肤管理</a>
                </li>
                <li>
                	<a href="#{request.contextPath}/user/LoginMessageList.seam"><img class="tbimg" src="#{request.contextPath}/asset/images/denglu.png"/>&#160;登录统计</a>
                </li>
                <li>
                	<a href="#{request.contextPath}/user/BugInfoList.seam"><img class="tbimg" src="#{request.contextPath}/asset/images/shouji.png"/>&#160;手机日志管理</a>
                </li>
                <li>
                        	<a href="#{request.contextPath}/system/RecycleInfoList_1.seam"><img class="tbimg" src="#{request.contextPath}/asset/images/huishouzhantupian.png"/>&#160;回收站</a>
                        </li>
            </ul>
            <div class="clear"></div>
          </div>
      </td>
		<!--右边开始-->
      <td valign="top">
      	<div class="right_c">
        	<div class="r_title">
            	<div class="r_t_l"><font size="3">用户切换管理</font></div>
            </div>
            <div class="ybp_02">
              <!--切换账户开始-->
              <div class="nzhqh">
              <h:form id="storageTypeSearch">
              		<div class="nqh_search">    
              			<h:inputText id="eiName" class="form-control nw500" value="#{administratorList.eiName}"/>
	              		<div style="float: right;position: relative; right: 6px;top: -26px;z-index: 3;" >
	              		<h:commandButton id="search" action="/user/AdministratorList.xhtml"  style="background:url(../asset/images/selectbbg.png) no-repeat;width:20px;height:20px;">
	              		</h:commandButton>
	              		</div>
	              		
	              	</div>
	          </h:form>
                    
                    <div class="nqh_box">
                      <ul>
                      	<ui:repeat value="#{administratorList.resultList}" var="_administrator" rendered="#{not empty administratorList.resultList}" rowKeyVar="_index">
                         <li class="nqh_boxli">
                            <div class="nqh_s">
                            
                                <div class="nqh_title" title="#{_administrator.name}">#{stringUtil.shortString(_administrator.name,14)}</div>
                                
                                 <table width="100%" border="0" cellspacing="0" cellpadding="0" class="nqh_table">
                                  <tr>
                                    <td width="70" align="right">ID: </td>
                                    <td>#{_administrator.id}</td>
                                  </tr>
                                  <tr>
                                    <td align="right">总面积:</td>
                                    <td><span class="nqh_font">#{administratorList.eiMuMap.get(_administrator.id) eq null ?'0亩':administratorList.eiMuMap.get(_administrator.id)}</span></td>
                                  </tr>
                                  <tr>
                                    <td align="right">基地数量:</td>
                                    <td>#{administratorList.eiBMap.get(_administrator.id) eq null ?0:administratorList.eiBMap.get(_administrator.id)}个基地</td>
                                  </tr>
                                  <tr>
                                    <td align="right">区域数量:</td>
                                    <td>#{administratorList.eiPMap.get(_administrator.id) eq null ?0:administratorList.eiPMap.get(_administrator.id)}个区</td>
                                  </tr>
                                  <tr>
                                    <td align="right">用户:</td>
                                    <td>
                                    	<select id="select#{_administrator.id}" class="selectpicker nw100">
                                    		<ui:repeat value="#{administratorList.eiUMap.get(_administrator.id)}" var="_user" >
		                                        <option value="#{_user.userId}">#{_user.name}</option>
	                                        </ui:repeat>
                                        </select>
                                     </td>
                                  </tr>
                                  <tr>
                                    <td align="right"><h:outputText value="#{_administrator.enterpriseInfoStatus eq 1 ?'启用':'未启用'}"/></td>
                                    <td><button type="button" class="btn btn-primary" onclick="switchUser(#{_administrator.id});">进入账户</button></td>
                                  </tr>
                                </table>
                                                                
                            </div>
                         
                         </li>
                         </ui:repeat>
                      </ul>
                    </div>
                    
                    
              </div>    
              <!--切换账户结束-->
              
            </div>
				
                
                    <div class="clear"></div>
                </div><!--right_c结束-->
                <!--翻页开始-->
                    <table style="height:30px; margin:40px auto 0 auto;" cellpadding="0" cellspacing="0">
                    	<tr>
                    	<s:div rendered="#{not empty administratorList.resultList}">
			                <s:decorate rendered="#{!administratorList.previousExists }">
			                <td><img src="#{request.contextPath}/asset/images/page_68.jpg" width="4" height="30" /></td>
			                </s:decorate>
			                 <s:decorate rendered="#{administratorList.previousExists }">
			                <td><img src="#{request.contextPath}/asset/images/page_67.jpg" width="4" height="30" /></td>
			                </s:decorate>
			                <s:decorate rendered="#{administratorList.previousExists }">
                             <td class="td_t_b">
                            <s:link propagation="none"  view="/user/AdministratorList.xhtml"  >首页
                            <f:param name="pageNum" value="0" />
                            </s:link>
                            </td>
                            <td class="td_t_b td_t_t" style="padding:0; width:30px;">
                            <s:link propagation="none"  view="/user/AdministratorList.xhtml"  styleClass="no_n">
                            <f:param name="pageNum" value="#{administratorList.previousFirstResult}"/>
                            &lt;
                            </s:link>
                            </td>
                            </s:decorate>
                            
					         <a:repeat var="_page" value="#{administratorList.pageList}" rowKeyVar="_index">
									<td class="td_t_b #{administratorList.previousExists or _index >0 ?'td_t_t':''} #{_page eq administratorList.pageNum?'onp':''}"> 
									<s:link propagation="none"  view="/user/AdministratorList.xhtml" value="#{_page}" id="previousPage">
										<f:param name="pageNum" value="#{_page}" />
									</s:link></td>
							</a:repeat>
							
							<s:decorate rendered="#{administratorList.nextExists}">
                            <td class="td_t_b td_t_t">
                            <s:link propagation="none"  view="/user/AdministratorList.xhtml"   styleClass="no_d">
                            <f:param name="pageNum" value="#{administratorList.nextFirstResult}" />
                            &gt;
                            </s:link>
                            </td>
                            
                            <td class="td_t_b td_t_t">
							 <s:link propagation="none"  view="/user/AdministratorList.xhtml"  >尾页
							 <f:param name="pageNum" value="#{administratorList.PAGE_COUNT}" />
							 </s:link></td>
							
							
                           </s:decorate>
                             <td class="td_t_b td_t_t" style=" color:#9a9a9c;">共#{administratorList.PAGE_COUNT}页</td>
							<td><img src="#{request.contextPath}/asset/images/page_70.jpg" width="4" height="30" /></td>
							</s:div>
                    	</tr>
                    </table>
                    <!--翻页结束-->
                <div class="clear"></div>
            </td> 
            <button id="divmyModal" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal" style="display: none;">
			</button>
	          <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
				  <div class="modal-dialog">
				    <div class="modal-content">
				      <div class="modal-header">
				        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				        <h4 class="modal-title" id="myModalLabel">提示信息</h4>
				      </div>
				      <div class="modal-body">该公司暂无管理员，请先添加管理员。</div>
				      <div class="modal-footer">
				        <button type="button" class="btn btn-primary" data-dismiss="modal">关闭</button>
				      </div>
				    </div>
				  </div>
				</div> 
    <!--右边结束-->
<script type="text/javascript">
//<![CDATA[ 
jquery(document).ready(function(){
	jquery('.selectpicker').selectpicker();
	jquery(".img1login").css("top","0px");
	jquery(".img2login").css("top","0px");
	jquery('.nqh_boxli').hover(function(){
	     jquery(this).css({'border-color':'#4d9cd1','border-width':'2px','width':'234px','height':'288px','margin-right':'1px'});
		jquery(this).find('.nqh_title').css({'background-color':'#4d9cd1','color':'#ffffff','height':'35px'});
  		jquery(this).find('.nqh_table').css({'margin-left':'19px','margin-right':'19px'});
 	},function(){
			jquery(this).css({'border-color':'#cccccc','border-width':'1px','width':'236px','height':'290px','margin-right':'0px'});
				jquery(this).find('.nqh_title').css({'background-color':'#ebedef',"color":"#000000",'height':'36px'});
				jquery(this).find('.nqh_table').css({'margin-left':'20px','margin-right':'20px'});

		
 	});
});
function switchUser(eId){
	var userId = jQuery("#select"+eId+" option:selected").val();
	if(userId == null || userId==""){
		   jQuery("#divmyModal").click();
		   return false;
	}
	login(userId,1);
}
function urlLog(url){
	window.location.href="#{request.contextPath}"+url.replace(".xhtml",".seam");
}
//]]>
</script>
<a:form>
	<a:queue requestDelay="10" ignoreDupResponses="true" />
	<a:jsFunction name="login" action="#{authenticator.login}" data="#{sessionTake.urlTemp}" oncomplete="urlLog(data);">
		<a:actionparam name="userId" assignTo="#{authenticator.userId}" />
		<a:actionparam name="usertype" assignTo="#{authenticator.usertype}" />
	</a:jsFunction>
</a:form>
</ui:define>

</ui:composition>

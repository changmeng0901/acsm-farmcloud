<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	template="/layout/template_new.xhtml">

	<ui:define name="body">
	<style>
	.bootstrap-select:not([class*=span]):not([class*=col-]):not([class*=form-control]):not(.input-group-btn){width:115px;margin-right: 5px;}
	/*下拉搜索样式09-04*/
	.input-group .form-control:first-child, .input-group-addon:first-child, .input-group-btn:first-child > .btn, .input-group-btn:first-child > .btn-group > .btn, .input-group-btn:first-child > .dropdown-toggle, .input-group-btn:last-child > .btn:not(:last-child):not(.dropdown-toggle), .input-group-btn:last-child > .btn-group:not(:last-child) > .btn {
	    border-bottom-right-radius: 0;
	    border-top-right-radius: 0;
	}.input-group .form-control:last-child, .input-group-addon:last-child, .input-group-btn:last-child > .btn, .input-group-btn:last-child > .btn-group > .btn, .input-group-btn:last-child > .dropdown-toggle, .input-group-btn:first-child > .btn:not(:first-child), .input-group-btn:first-child > .btn-group:not(:first-child) > .btn {
	    border-bottom-left-radius: 0;
	    border-top-left-radius: 0;
	}
	.form-control{  
	border-bottom-left-radius: 0;
	    border-top-left-radius: 0;
	    height:31px;
	    }
    .select_input07 .form-control{width:300px;}
	</style>
	<script type="text/javascript">
  window.onload = function () {
    jquery('.selectpicker').selectpicker();
  };
</script>

	<td valign="top" width="210" style=" border-right:1px solid #e1e4eb;">
                <div class="left_c2">
                	<ul class="lt_c_ul">
                    	<li>
                        	<a href="#{request.contextPath}/user/EnterpriseInfoList.seam" ><img class="tbimg" src="#{request.contextPath}/asset/images/enterpriseInfo_10.png"/>&#160;企业管理</a>
                        </li>
                    	<li><a href="#{request.contextPath}/user/UserList.seam"  class="fon_07" ><strong><img class="tbimg" src="#{request.contextPath}/asset/images/user_17.png"/>&#160;用户管理</strong></a></li>
                    	<li><a href="#{request.contextPath}/user/EnterpriseGroupList.seam"><img class="tbimg" src="#{request.contextPath}/asset/images/en.png"/>&#160;企业组管理</a></li>
                    	<li><a href="#{request.contextPath}/user/CommunityList.seam"><img class="tbimg" src="#{request.contextPath}/asset/images/community_23.png"/>&#160;角色管理</a></li>
                    	<li>
                        	<a href="#{request.contextPath}/user/RoleList.seam"><img class="tbimg" src="#{request.contextPath}/asset/images/role.png"/>&#160;权限管理</a>
                        </li>
                        <li>
                        	<a href="#{request.contextPath}/user/AdministratorList.seam" ><img class="tbimg" src="#{request.contextPath}/asset/images/userqie.png"/>&#160;用户切换管理</a>
                        </li>
                        <li>
                        	<a href="#{request.contextPath}/user/DataDicList.seam"><img class="tbimg" src="#{request.contextPath}/asset/images/dataDic.png"/>&#160;字典管理</a>
                        </li>
                         <li>
                        	<a href="#{request.contextPath}/user/DeviceTypeList.seam"><img class="tbimg" src="#{request.contextPath}/asset/images/shebei.png"/>&#160;设备类型</a>
                        </li>
                        <li>
                        	<a href="#{request.contextPath}/user/SkinInfoList.seam" ><img class="tbimg" src="#{request.contextPath}/asset/images/pifu.png"/>&#160;皮肤管理</a>
                        </li>
                        <li>
                        	<a href="#{request.contextPath}/user/LoginMessageList.seam"><img class="tbimg" src="#{request.contextPath}/asset/images/denglu.png"/>&#160;登录统计</a>
                        </li>
                        <li>
                        	<a href="#{request.contextPath}/user/BugInfoList.seam"><img class="tbimg" src="#{request.contextPath}/asset/images/shouji.png"/>&#160;手机日志管理</a>
                        </li>
                        <li>
                        	<a href="#{request.contextPath}/system/RecycleInfoList_1.seam"><img class="tbimg" src="#{request.contextPath}/asset/images/huishouzhantupian.png"/>&#160;回收站</a>
                        </li>
                    </ul>
                	<div class="clear"></div>
                </div>
            </td>
       <td valign="top" >
		<div class="right_c">
                	<div class="r_title">
                    	<div class="r_t_l"><font size="4">用户管理</font></div>
                    </div>
                    
					<br/>
                    <div class="z_r_ser">
                    <h:form id="storageTypeSearch">
                       <table cellpadding="0" cellspacing="0">
                            <tr>
                                <td>
		                      <!--   带下拉搜索框     -->
							  <div class="select_input07" >
							    <div class="input-group">
							      <div class="input-group-btn">
							        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><span id="rpType">角色</span><span class="caret"></span></button >
							        <ul class="dropdown-menu" role="menu">
							         <li><a href="javascript:void(0);" id="liObj0" onclick="changeVal(0)">全部角色</a></li>
							        <a4j:repeat value="#{userList.getComList()}" var="var" rowKeyVar="_index">
							          <li><a href="javascript:void(0);" id="liObj#{var.communityId}" onclick="changeVal(#{var.communityId})">#{var.name}</a></li>
							          </a4j:repeat>
							        </ul>
							      </div>
							      <div class="public-search">
							        <span class="octicon-search02"></span>
							        <h:inputText id="name" styleClass="form-control srarchfont" value="#{userList.searchName}"/>
                                	<input type="hidden" value="#{userList.communityId}" id="communityId" name="communityId"/>
							      </div>
							      <h:commandButton id="search" styleClass="btn btn-primary" value="搜索" action="/user/UserList.xhtml">                                	
	                                </h:commandButton>
							    </div>
							</div>
                                </td>
                           </tr>
                       </table> 
                    </h:form>                         
                    </div>
                     <!--添加按钮开始-->
                    <div class="tjan_01">
                    	<s:link styleClass="btn btn-success" value="添加" view="/user/UserAdd.xhtml" propagation="none">
                    	<f:param name="userUserId" />
                    	 <f:param name="pageNum" value="#{userList.pageNum}" />
                    	</s:link>
                    </div>
                    <!--添加按钮结束-->
                    <table width="100%" class="ze_table" cellpadding="0" cellspacing="0">
                    	<tr>
                    	
                    	
                    		<td width="5" height="4"><img src="#{request.contextPath}/asset/images/table_d_40.jpg" width="5" height="4" /></td>
                    		<td colspan="7" style="border-top:1px solid #e1e1e1; background:#f0f5fb;"></td>
                            <td width="5" height="4"><img src="#{request.contextPath}/asset/images/table_d_43.jpg" width="5" height="4" /></td>
                    	</tr>
                    	<tr>
                    		<th class="ze_bg ze_bt_le" width="5" height="4"></th>
                            <th class="ze_bg" width="9%">ID</th>
                    		<th class="ze_bg" width="11%">用户名</th>
                    		<th class="ze_bg" width="18%">昵称</th>
                    		<th class="ze_bg" width="18%">角色</th>
                    		<th class="ze_bg" width="18%">公司</th>
                    		<th class="ze_bg" width="10%">账户是否启用</th>
                    		<th class="ze_bg" width="16%">操作</th>
                            
                            <th class="ze_bg ze_bt_ri" width="5" height="4"></th>
                    	</tr>
						<ui:repeat value="#{userList.resultList}" var="_user" rendered="#{not empty userList.resultList}" rowKeyVar="_index">
                    	<tr>
                    		<td class="ze_bg2 ze_bt_le" width="5" height="4"></td>
                            <td class="ze_bg2"><h:outputText value="#{_user.userId}" /></td>
                    		<td class="ze_bg2"><h:outputText value="#{stringUtil.shortString(_user.name,10)}" /></td>
                    		<td class="ze_bg2"><h:outputText value="#{stringUtil.shortString(_user.nickname,12)}"/></td>
                    		<td class="ze_bg2"><h:outputText value="#{stringUtil.shortString(_user.fkCommunityId.name,12)}" /></td>
                    		<td class="ze_bg2"><h:outputText value="#{stringUtil.shortString(_user.enterpriseInfoId.name,12)}" /></td>
                    		<td class="ze_bg2"><h:outputText value="#{_user.enable ? '是':'否'}"/></td>
	                    		<td class="ze_bg2">
                            	<s:link propagation="none"  view="/#{empty from ? 'user/User' : from}.xhtml" styleClass="list_view" title="查看"  id="userViewId">
								<f:param name="userUserId" value="#{_user.userId}" />
								<f:param name="pageNum" value="#{userList.pageNum}" />
								</s:link>&#160;
                                <s:link propagation="none"  view="/user/UserEdit.xhtml"    styleClass="list_edit" id="userEdit" title="编辑" rendered="#{_user.levelId.levelId lt 4}">
                                <f:param name="userUserId" value="#{_user.userId}" />
                                <f:param name="pageNum" value="#{userList.pageNum}" />
								</s:link>&#160;
								 <s:link propagation="none"  view="/user/PassWordEdit.xhtml"    styleClass="list_edit_passwoard" id="changePassword" title="修改密码" rendered="#{empty from}">
                                <f:param name="userUserId" value="#{_user.userId}" />
                                <f:param name="pageNum" value="#{userList.pageNum}" />
								</s:link>&#160;
								<s:link propagation="none"  view="/user/UserEdit.xhtml"    styleClass="list_delete" action="#{userHome.remove}" title="删除" onclick="return confirm('确定删除吗？');" id="userDelete" rendered="#{_user.levelId.levelId lt 4}">
                                <f:param name="userUserId" value="#{_user.userId}" />
                                <f:param name="pageNum" value="#{userList.pageNum}" />
                                </s:link>
                            </td>
                            
                            <td class="ze_bg2 ze_bt_ri" width="5" height="4"></td>
                    	</tr>
                    	</ui:repeat>
                    </table>
                    <!--翻页开始-->
                    <table style="height:30px; margin:40px auto 0 auto;" cellpadding="0" cellspacing="0">
                    	<tr>
                    	<s:div rendered="#{not empty userList.resultList}">
			                <s:decorate rendered="#{!userList.previousExists }">
			                <td><img src="#{request.contextPath}/asset/images/page_68.jpg" width="4" height="30" /></td>
			                </s:decorate>
			                 <s:decorate rendered="#{userList.previousExists }">
			                <td><img src="#{request.contextPath}/asset/images/page_67.jpg" width="4" height="30" /></td>
			                </s:decorate>
			                <s:decorate rendered="#{userList.previousExists }">
	                            <td class="td_t_b">
		                            <s:link propagation="none"  view="/user/UserList.xhtml" >首页
		                            	<f:param name="pageNum" value="0" />
		                            </s:link>
	                            </td>
	                            <td class="td_t_b td_t_t" style="padding:0; width:30px;">
		                            <s:link propagation="none"  view="/user/UserList.xhtml"  styleClass="no_n" >
		                            	<f:param name="pageNum" value="#{userList.previousFirstResult}"/>&lt;
		                            </s:link>
	                            </td>
	                        </s:decorate>
					       <a4j:repeat var="_page" value="#{userList.pageList}" rowKeyVar="_index">
								<td class="td_t_b #{userList.previousExists or _index >0 ?'td_t_t':''} #{_page eq userList.pageNum?'onp':''}">
									<s:link propagation="none"  view="/user/UserList.xhtml" value="#{_page}" id="previousPage">
										<f:param name="pageNum" value="#{_page}" />
									</s:link>
								</td>
							</a4j:repeat>
							<s:decorate rendered="#{userList.nextExists}">
                            <td class="td_t_b td_t_t">
	                            <s:link propagation="none"  view="/user/UserList.xhtml"   styleClass="no_d" >
	                            	<f:param name="pageNum" value="#{userList.nextFirstResult}" />&gt;
	                            </s:link>
                            </td>
                            <td class="td_t_b td_t_t">
								 <s:link propagation="none"  view="/user/UserList.xhtml" >尾页
								 	<f:param name="pageNum" value="#{userList.PAGE_COUNT}" />
								 </s:link>
							</td>
							</s:decorate>
							<td class="td_t_b td_t_t" style=" color:#9a9a9c;">共#{userList.PAGE_COUNT}页</td>
                            <td ><img src="#{request.contextPath}/asset/images/page_70.jpg" width="4" height="30" /></td>
                            </s:div>
                    	</tr>
                    </table>
                    <!--翻页结束-->
                    <div class="clear"></div>
                </div><!--right_c结束-->
</td>
<script type="text/javascript">
jquery(document).ready(function(){
	  var rpObj = "#{userList.communityId}";
	  if(rpObj == ""){
		  document.getElementById("rpType").innerHTML  = "全部角色";
	  }else{
		  var valObj = document.getElementById("liObj"+rpObj).text;
		  document.getElementById("rpType").innerHTML  = valObj;
	  }
		});
  function changeVal(obj){
		  document.getElementById("communityId").value = obj;
		  var valObj = document.getElementById("liObj"+obj).text;
		  document.getElementById("rpType").innerHTML  = valObj;
		  }
  </script>
	</ui:define>

</ui:composition>

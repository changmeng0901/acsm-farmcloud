<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:c="http://java.sun.com/jstl/core"
	template="/layout/template_new.xhtml">

	<ui:define name="body">
	<link type="text/css" rel="stylesheet" href="#{request.contextPath}/asset/css/settings/EnterpriseSettings.css" />
    <script type="text/javascript" src="#{request.contextPath}/asset/js/EnterpriseLeftMenu.js"></script>
    <script type="text/javascript" src="#{request.contextPath}/asset/js/checkBox/icheck.js"></script>
<style>
.form-control{float:left;}
.fr{float:right;}
.r_ulli1{float:right;}
.dropdown-menu.inner{height: 145px}
.selectpicker_cardtype .bootstrap-select.btn-group .dropdown-menu{height:80px;}
</style>
	<!-- #{amRfidInfoHome.beginMethods()}-->
	<td valign="top">
                <div class="inbentory_file_main">
                <!--左侧二级导航 -->
                <div class="inbentory_level_wap">
                    <div class="inbentory_level">
                        <strong class="inben_first inben_first2">
                            <a href="javascript:;"><i class="icon_L icon_rkgl"></i>基础设置</a><b class="b_arrow"></b>
                        </strong>
                        <ol class="inben_second">
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/user/UpdateEnterpriseSettings.seam?enterpriseId=#{sessionTake.enterpriseInfoId}','_self')" >
                            	<i class="icon_sed"></i>企业设置                   	
                            </li>
                            <!-- 管理版和以前的版本（标准、白金...)显示 -->
                            <h:panelGroup rendered="#{sessionTake.nowVersionService.basicService.basicServiceId==10 or sessionTake.nowVersionService.basicService.serviceType eq 1}">
                            	<li class="sed_item" onclick="window.open('#{request.contextPath}/user/ModuleSettings.seam','_self')" ><i class="icon_sed"></i>模块配置</li>
                            </h:panelGroup>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/dictionary/DataDicinfoList.seam','_self')" ><i class="icon_sed"></i>字段管理</li>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/user/EnterpriseCommunityList.seam','_self')" ><i class="icon_sed"></i>角色管理</li>
                            <s:fragment rendered="#{enterpriseInfoHome.enterpriseInfo.govState}">
	                        	<li class="sed_item" onclick="window.open('#{request.contextPath}/user/AuditInformationList.seam','_self')" ><i class="icon_sed"></i>审核信息</li>
	                        </s:fragment>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/system/RecycleInfoList_1.seam','_self')" ><i class="icon_sed"></i>回收站</li>
                        </ol>
                        <strong class="inben_first inben_first2">
                            <a href="javascript:;"><i class="icon_L icon_ckgl"></i>生产管理设置</a><b class="b_arrow"></b>
                        </strong>
                        <ol class="inben_second">
                            <h:panelGroup rendered="#{s:hasRole('certification')}">
                            	<li class="sed_item" onclick="window.open('#{request.contextPath}/map/CertificationList.seam','_self')" ><i class="icon_sed"></i>认证信息</li>
                            </h:panelGroup>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/message/TunnelGroupList.seam','_self')" ><i class="icon_sed"></i>分组管理</li>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/product/InputsInfoList.seam?goodsTypeInfoId=5','_self')" ><i class="icon_sed"></i>投入品信息</li>
                        </ol>
                        <strong class="inben_first inben_first2">
                            <a href="javascript:;"><i class="icon_L icon_zkgl"></i>销售管理设置</a><b class="b_arrow"></b>
                        </strong>
                        <ol class="inben_second">
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/product/GoodsInfoList.seam','_self')"><i class="icon_sed"></i>物料信息</li>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/product/ProductInfoList.seam','_self')" ><i class="icon_sed"></i>商品信息</li>
                        </ol>
                        <strong class="inben_first inben_first2">
                            <a href="javascript:;"><i class="icon_L icon_pdgl"></i>硬件管理设置</a><b class="b_arrow"></b>
                        </strong>
                        <ol class="inben_second">
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/device/DeviceList.seam','_self')"><i class="icon_sed"></i>设备管理</li>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/device/VideoList.seam','_self')" ><i class="icon_sed"></i>视频管理</li>
                            <li class="sed_item sed_cur" onclick="window.open('#{request.contextPath}/farming/AmRfidInfoList.seam','_self')" ><i class="icon_sed"></i>RFID卡管理</li>
                        </ol>
                    </div>
                    <i class="collapse_btn"></i>
                </div>
                <!--左侧二级导航 -->
				<!--右侧 -->
                <div class="inbentory_content">
		<h:form id="user">
		<!-- Modal -->
<div aria-hidden="false" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="myModal" class="modal fade in w600na" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">提示框</h4>
      </div>
      <div class="modal-body">
       <span id="productMsg">*号部分为必填项！</span>
        
        
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
        <button type="button" class="btn btn-primary" data-dismiss="modal">确认</button>
      </div>
    </div>
  </div>
</div>
                <div class="right_c">
                	<div class="r_title">
                    	<div class="r_t_l"><font size="3"><a href="#{request.contextPath}/farming/AmRfidInfoList.seam">RFID卡管理</a></font></div>
                    	
                    </div>
				<!--入库订单列表开始-->
				<div class="all_d3">
                        <s:div styleClass="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">基地名称：</td>
                                    <td>
                                      <h:outputText value="#{amRfidInfoHome.baseName}" />
                                    </td>
                                </tr>
                            </table>
                        </s:div>
						<div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">卡编号：</td>
                                    <td>
										<h:inputText id="rfidSn" styleClass="form-control nw221"  value="#{amRfidInfoHome.instance.rfidSn}"/>
										  <span class="finput" style="color:#FF0000">*</span>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">卡名称：</td>
                                    <td>
										<h:inputText id="name" styleClass="form-control nw221"  value="#{amRfidInfoHome.instance.name}"/>
										  <span class="finput" style="color:#FF0000">*</span>
                                    </td>
                                </tr>
                            </table>
                        </div>
               			<div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">卡类型：</td>
                                    <td>
                                    <div class="selectpicker_cardtype">
									<h:selectOneMenu styleClass="selectpicker"  id="rfidType" style="width:146px;"  value="#{amRfidInfoHome.rfidCardType}" onchange="myType(this.value)">
										<f:selectItem itemValue="0" itemLabel="农事卡"/>
										<f:selectItem itemValue="1" itemLabel="人员卡"/>
										<f:selectItem itemValue="2" itemLabel="作物卡"/>
										<f:selectItem itemValue="3" itemLabel="地块卡"/>
								</h:selectOneMenu>
								</div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">卡类别：</td>
                                    <td>
                                    	<h:panelGroup id="vOfsId">
											<h:selectOneMenu  styleClass="selectpicker" data-live-search="true" id="categoryId" style="width:146px;"  value="#{amRfidInfoHome.categoryId}" >
												<s:selectItems value="#{amRfidInfoHome.ariList}" var="var" label="#{var[1]}" itemValue="#{var[0]}" escape="false" />
											</h:selectOneMenu>
										</h:panelGroup>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        
				</div>
					<table width="100%" class="r_c_tableNew" cellpadding="0" cellspacing="0" style="text-align:center">
                       <tr>
							<td>
						<a:commandButton id="persist"  data-toggle="modal" data-target="#myModal"  value="提交" styleClass="btn btn-primary" action="#{amRfidInfoHome.checkInfo}" rendered="#{!amRfidInfoHome.managed}" onclick="if(!checkSubmit()) return false;" data="#{amRfidInfoHome.checkParam}" oncomplete="showMessage(data,1)"  />
		            	<a:commandButton id="update" data-toggle="modal" data-target="#myModal"  value="提交" styleClass="btn btn-primary" action="#{amRfidInfoHome.checkInfo}" rendered="#{amRfidInfoHome.managed}" onclick="if(!checkSubmit()) return false;" data="#{amRfidInfoHome.checkParam}" oncomplete="showMessage(data,2)" />
		    			<h:commandButton id="updateHidden1"  styleClass="aaa" style="display:none;" action="#{amRfidInfoHome.persist}"/>
		    			<h:commandButton id="updateHidden2"  styleClass="bbb" style="display:none;" action="#{amRfidInfoHome.update}"/>
		    			&#160;<s:button view="/farming/AmRfidInfoList.xhtml" styleClass="btn btn-default" value="返回"  id="bn_left6" style="margin-left:10px" >
		    					  <f:param name="pageNum" value="#{amRfidInfoHome.pageNum}" />
		    				  </s:button>
                            </td>
						</tr>
					</table>
				<!--入库订单列表结束-->
                    <div class="clear"></div>
                </div><!--right_c结束-->
                <div class="clear"></div>
              </h:form>
              </div>
              </div>
              
              <a:form>
         			<a:jsFunction name="rfidCardTypeAjax" reRender="vOfsId" action="#{amRfidInfoHome.getNewCard()}" oncomplete="huidiao()">
      					<a:actionparam name="rfidCardType" assignTo="#{amRfidInfoHome.rfidCardType}"/>
       				</a:jsFunction>
 			  </a:form>
              <script  type="text/javascript">
				//<![CDATA[
				
				jquery(function(){
					 var typeId = '#{amRfidInfoHome.amRfidInfoId}';
					 if(typeId != null && typeId != ""){
							var rfidType = '#{amRfidInfoHome.instance.rfidType}';
							jquery('.selectpicker').selectpicker();
							jquery('#user\\:rfidType').selectpicker('val',rfidType);
							if(rfidType == 0 || rfidType == 1){
								var categoryId = '#{amRfidInfoHome.instance.rfidInfoTypeId.id}';
								jquery('.selectpicker').selectpicker();
								setTimeout(function(){jquery('#user\\:categoryId').selectpicker('val',categoryId);},500);
							}else if(rfidType == 2){
								var plantType = '#{amRfidInfoHome.instance.plantId.plantId}';
								jquery('.selectpicker').selectpicker();
								setTimeout(function(){jquery('#user\\:categoryId').selectpicker('val',plantType);},500);
							}
					}else{
						jquery('#user\\:rfidType').selectpicker('val',0);
					}
				});
				function myType(typeid){
					rfidCardTypeAjax(typeid);
				}
				function huidiao(){
					jquery('.selectpicker').attr("data-live-search",true);
					jquery('.selectpicker').selectpicker();
				}
				function checkSubmit(){
					var rfidSn = document.getElementById("user:rfidSn").value;
					var name = document.getElementById("user:name").value;
					if(rfidSn == ""){
						document.getElementById("productMsg").innerHTML = "卡编号不能为空！";
						jquery("#myModal").modal('show');
				      return false;
					}
					if(name == ""){
						document.getElementById("productMsg").innerHTML = "卡名称不能为空！";
						jquery("#myModal").modal('show');
				      return false;
					}
					return true;
				}
				jquery(".rich-calendar-input").addClass("r_c_text_date");
				jquery(".rich-calendar-input").removeClass("rich-calendar-input");

				function showMessage(data,index){

					if(data != ""){
						document.getElementById("productMsg").innerHTML = data;
						jquery("#myModal").modal('show');
				      return false;
					}else{
						if(index == 1){
							jquery('.aaa').click();
						}else{
							jquery('.bbb').trigger("click");
						}
					}
				}
				
				//]]>
				</script>
            </td> 
             
  
 
	
	</ui:define>

</ui:composition>

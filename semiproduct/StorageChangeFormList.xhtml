<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:a="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:c="http://java.sun.com/jstl/core"
    template="/layout/template.xhtml">

<ui:define name="body">
<td valign="top" width="100%">
<style>
 .dr-mpnl-pnl{padding:0;}
 .dr-mpnl-pnl-b{color:none;padding:0; font-family:"微软雅黑";}
 .dr-insldr td{padding:0;}
 .font_td{font-size:14px;}
 .dr-insldr{width:255px!important;}
</style>


                <div class="right_c">
                	<div class="r_title">
                    	<div class="r_t_l">
						<s:link propagation="none"  view="#{sessionTake.urlTemp}" style="text-decoration:none;color:black;" value="工作 ">
                        </s:link>
						&#160;&gt;&#160;&#160;<font size="3">流水管理</font></div>
                    </div>

					<div class="yuleng">
						<a href="#{request.contextPath}/semiproduct/Materials.seam"><img src="#{request.contextPath}/asset/images/jx_03.jpg" width="106" height="74" /></a>
 						<a href="#{request.contextPath}/semiproduct/GoodsBatchList.seam"><img src="#{request.contextPath}/asset/images/jx_05.jpg" width="106" height="74" /></a>
 						<a href="#{request.contextPath}/semiproduct/storageChangeFormListThree.seam"><img src="#{request.contextPath}/asset/images/jx_07.jpg" width="106" height="74" /></a>
 						<a href="#{request.contextPath}/semiproduct/Warehousing.seam"><img src="#{request.contextPath}/asset/images/jx_09.jpg" width="106" height="74" /></a>
 						<a href="#"><img src="#{request.contextPath}/asset/images/jx_11.jpg" width="106" height="74" /></a>
						<a href="#{request.contextPath}/semiproduct/Delivery.seam"><img src="#{request.contextPath}/asset/images/jx_13.jpg" width="106" height="74" /></a>
					</div>
                    
                    
                    
                    <h:form id="goodsInfoSearch">
                    <div class="z_r_ser">
                    	<table cellpadding="0" cellspacing="0" class="cxtja">
                        	<tr>
                        		<td width="80" style="font-size:14px;">查询条件：</td>
                                <td width="340">
                                <h:inputText id="storageName" value="#{storageChangeFormListThree.storageName}" styleClass="z_r_ser_i"/>
                                </td>
                                <td width="40" align="left">
                                <h:commandButton id="search" action="/semiproduct/StorageChangeFormList.xhtml"  styleClass="list_search"/>
                                </td>
                                <td width="55" height="30" align="right" valign="bottom">
                                <a class="gjss_a" href="#" onclick="op(this)" aa="1"></a></td>
                           </tr>
                       </table>                          
                    </div>
                    
                     
                    </h:form>
                    
<rich:modalPanel id="product" autosized="true" height="166" width="450" headerClass="modalHeader" >
		<div class="tck_div">
       <div class="tck_ti">
       <h:outputLink value="#"
                onclick="#{rich:component('product')}.hide(); return false;">
                    <img src="../images/close_17.jpg" width="20" height="20"/>
                </h:outputLink>
                </div>
       <h:form id="productform" enctype="multipart/form-data">
       <!-- #{aliasesHome.works()} -->
               	
               
       </h:form>
       </div>
   </rich:modalPanel>
					<!--商品分类开始-->
                    <div class="tree_dis">
                     
                        <div class="box2">
                        	<!--全部开始-->
                        	  <table width="100%" cellpadding="0" cellspacing="0" class="tr_ls" style="border-top:1px solid #ddd;">
                                    <tr>
                                        <td class="trls_th" width="11%">物料编码</td>
                                        <td class="trls_th" width="11%">品名</td>
                                        <td class="trls_th" width="10%">规格</td>
                                        <td class="trls_th" width="13%">生产日期</td>
                                        <td class="trls_th" width="13%">保质期(天)</td>
                                        <td class="trls_th" width="13%">单价</td>
                                        <td class="trls_th" width="11%">出入库数量</td>
                                        <td class="trls_th" width="10%">金额(元)</td>
                                        <td class="trls_th" width="8%">操作</td>
                                    </tr>
                                </table>
                        	<!--第一个table开始-->
                        		<a4j:repeat value="#{storageChangeFormListThree.resultList}" var="_obj" rowKeyVar="_index">
                                	<table width="100%" cellpadding="0" cellspacing="0" class="tr_lsm">
	                                    <tr class="nottt">
	                                        <td height="48" colspan="8" style="border-bottom:1px solid #ddd; border-right:1px solid #ddd;">
	                                            <span class="tr_span" style="width: 20%;"><font color="#71aae1">凭证号：</font><font color="#717171">#{_obj.name}</font></span>
	                                            <span class="tr_span" style="width: 10%;"><font color="#71aae1">类型：</font><font color="#717171">#{_obj.storageType eq 1?'入库':'出库'}</font></span>
	                                            <span class="tr_span" style="width: 17%;"><font color="#71aae1">时间：</font><font color="#717171"><h:outputText value="#{_obj.createTime}"><s:convertDateTime type="both" dateStyle="short" pattern="yyyy-MM-dd " /></h:outputText></font></span>
	                                            <span class="tr_span" style="width: 10%;"><font color="#71aae1">经手人：</font><font color="#717171">#{_obj.operater}</font></span>
	                                            <span class="tr_span" style="width: 15%;"><font color="#71aae1">库房：</font><font color="#717171">#{collectionsUtil.toList2(_obj.goodsPalletChangeRecords)}</font></span>
	                                            <span class="tr_span" style="width: 10%;"><font color="#71aae1">金额：</font><font color="#717171">#{collectionsUtil.toList(_obj.goodsPalletChangeRecords)}</font></span>
	                                        </td>
	                                        <td width="8%" align="center">
	                                            <s:link propagation="none"  view="/semiproduct/StorageChangeForm.xhtml" styleClass="list_view" title="查看"  id="View">
												<f:param name="storageChangeFormStorageChangeFormId" value="#{_obj.storageChangeFormId}" />
												</s:link>&#160;
				                                <s:link propagation="none"  view="/semiproduct/StorageChangeFormEdit.xhtml" styleClass="list_edit" id="Edit" title="编辑" >
				                                <f:param name="storageChangeFormStorageChangeFormId" value="#{_obj.storageChangeFormId}" />
												</s:link>&#160;
												<s:link propagation="none"  view="/semiproduct/StorageChangeFormEdit.xhtml" styleClass="list_delete" action="#{storageChangeFormHome.remove}" title="删除" onclick="return confirm('确定删除吗？');" id="Delete" >
				                                <f:param name="storageChangeFormStorageChangeFormId" value="#{_obj.storageChangeFormId}" />
				                                </s:link>
	                                        </td>
	                                    </tr>
	                                    <a4j:repeat value="#{collectionsUtil.toList3(_obj.goodsPalletChangeRecords)}" var="_var"  rowKeyVar="_index">
		                                    <tr>
		                                        <td class="trls_td" width="11%">#{_var.palletId.sn}</td>
		                                        <td class="trls_td" width="11%">#{_var.goodsBatchId.goodsInfoId.name}</td>
		                                        <td class="trls_td" width="6%">#{_var.goodsBatchId.goodsInfoId.goodsSpec}</td>
		                                        <td class="trls_td" width="9%"><h:outputText value="#{_var.goodsBatchId.produceDate}"><s:convertDateTime type="both" dateStyle="short" pattern="yyyy-MM-dd " /></h:outputText></td>
		                                        <td class="trls_td" width="9%">#{_var.goodsBatchId.expirationDate}</td>
		                                        <td class="trls_td" width="9%">#{_var.goodsBatchId.goodsInfoId.productInfo.productPrice}</td>
		                                        <td class="trls_td" width="7%">#{_var.goodsNum}   </td>
		                                        <td class="trls_td" width="6%">#{_var.goodsPrice}</td>
		                                        <td class="trls_td" width="8%">
	                                             	<s:link propagation="none"  view="/semiproduct/StorageChangeFormInfo.xhtml" styleClass="list_view" title="查看"  id="View">
													<f:param name="goodsPalletChangeRecordGoodsPalletChangeRecord" value="#{_var.goodsPalletChangeRecord}" />
													</s:link>&#160;
		                                        </td>
		                                    </tr>
	                                    </a4j:repeat>
	                             	</table>
	                            </a4j:repeat>
                                <!--第一个table结束-->
                        	 <!--翻页开始-->
		                    <table style="height:30px; margin:40px auto 0 auto;" cellpadding="0" cellspacing="0">
		                    	<tr>
					                <s:decorate rendered="#{!storageChangeFormListThree.previousExists }">
					                <td><img src="#{request.contextPath}/asset/images/page_68.jpg" width="4" height="30" /></td>
					                </s:decorate>
					                 <s:decorate rendered="#{storageChangeFormListThree.previousExists }">
					                <td><img src="#{request.contextPath}/asset/images/page_67.jpg" width="4" height="30" /></td>
					                </s:decorate>
					                <s:decorate rendered="#{storageChangeFormListThree.previousExists }">
			                            <td class="td_t_b">
				                            <s:link propagation="none"  view="/semiproduct/StorageChangeFormList.xhtml" >首页
				                            	<f:param name="pageNum" value="0" />
				                            </s:link>
			                            </td>
			                            <td class="td_t_b td_t_t" style="padding:0; width:30px;">
				                            <s:link propagation="none"  view="/semiproduct/StorageChangeFormList.xhtml"  styleClass="no_n" >
				                            	<f:param name="pageNum" value="#{storageChangeFormListThree.previousFirstResult}"/>&lt;
				                            </s:link>
			                            </td>
			                        </s:decorate>
							       <a4j:repeat var="_page" value="#{storageChangeFormListThree.pageList}" rowKeyVar="_index">
										<td class="td_t_b #{storageChangeFormListThree.previousExists or _index >0 ?'td_t_t':''} #{_page eq storageChangeFormListThree.pageNum?'onp':''}">
											<s:link propagation="none"  view="/semiproduct/StorageChangeFormList.xhtml" value="#{_page}" id="previousPage">
												<f:param name="pageNum" value="#{_page}" />
											</s:link>
										</td>
									</a4j:repeat>
									<s:decorate rendered="#{storageChangeFormListThree.nextExists}">
		                            <td class="td_t_b td_t_t">
			                            <s:link propagation="none"  view="/semiproduct/StorageChangeFormList.xhtml"   styleClass="no_d" >
			                            	<f:param name="pageNum" value="#{storageChangeFormListThree.nextFirstResult}" />&gt;
			                            </s:link>
		                            </td>
		                            <td class="td_t_b td_t_t">
										 <s:link propagation="none"  view="/semiproduct/StorageChangeFormList.xhtml" >尾页
										 	<f:param name="pageNum" value="#{storageChangeFormListThree.PAGE_COUNT}" />
										 </s:link>
									</td>
									</s:decorate>
									<td class="td_t_b td_t_t" style=" color:#9a9a9c;">共#{storageChangeFormListThree.PAGE_COUNT}页</td>
		                            <td ><img src="#{request.contextPath}/asset/images/page_70.jpg" width="4" height="30" /></td>
		                    	</tr>
		                    </table>
		                    <!--翻页结束-->
                                <!--叶类结束-->    
                        <div class="clear"></div>
                        </div>
                    	<div class="clear"></div>
                    </div>

					<!--商品分类结束-->
                    <div class="clear"></div>
                </div><!--right_c结束-->
                <script type="text/javascript">
op = function(ind){
	if(ind.getAttribute("aa")=="1"){
		jquery(".gjs").show("fast");
		jquery(".gjss_a").attr("aa",2);
	}else{
		jquery(".gjs").hide("fast");
		jquery(".gjss_a").attr("aa",1);
	}
}
                
se = function(obj){
	jquery(".sel").each(function(){
		jquery(this).removeClass("current");
	});
	jquery("#sel"+obj).addClass("current");

	jquery(".box2 > div").each(function(index,domEle){
		if(index==obj){
			jquery(domEle).css("display","block");
		}else{
			jquery(domEle).css("display","none");
		}
	});
}

jquery(document).ready(function(){  //这个就是传说的ready
    jquery(".tr_lsm tr").not(".nottt").mouseover(function(){  
            //如果鼠标移到class为stripe的表格的tr上时，执行函数
    jquery(this).addClass("over");})
        jquery(".tr_lsm tr").not(".nottt").mouseout(function(){                       //给这行添加class值为over，并且当鼠标一出该行时执行函数
    jquery(this).removeClass("over");})  //移除该行的class
});








</script>
            </td>
</ui:define>
	</ui:composition>


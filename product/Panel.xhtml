<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	template="../layout/template.xhtml">

	<ui:define name="body">
		<td valign="top" width="100%">
		<style>
.x1Axis .tickLabel { *
	display: block; *
	min-width: 35px;
}
</style>
		<div class="right_c">
		<div class="r_title">
		<div class="r_t_l"><font size="3">仪表盘</font></div>
		</div>
		<div style="display: none"><canvas id="html5"></canvas></div>
		<!-- #{orderInfoHome.panel()} --> <!---订单管理下图开始-->
		<div class="ybp_02" id="ybp_02" style="text-align: center;"><a
			class="ybp_a">
		<div class="angular" ng-controller="chartCtrl"><span
			class="chart"
			easypiechart="animate:false;barColor:#14b8d3;scaleColor:false;lineWidth:20;lineCap:circle"
			ng-percent="Percent"> <span class="percent" ng-bind="percent"></span>
		</span> <span class="ybp_sp">原料</span> <!--<input type="range" min="0" max="100" step="1" ng-model="percent" />-->
		</div>
		</a> <a class="ybp_a">
		<div class="angular" ng-controller="chartCtrl"><span
			class="chart"
			easypiechart="animate:false;barColor:#e94949;scaleColor:false;lineWidth:20;lineCap:circle"
			ng-percent="Percent2"> <span class="percent" ng-bind="percent"></span>
		</span> <span class="ybp_sp">包装</span> <!--<input type="range" min="0" max="100" step="1" ng-model="anotherPercent" />-->
		</div>
		</a> <a class="ybp_a">
		<div class="angular" ng-controller="chartCtrl"><span
			class="chart"
			easypiechart="animate:false;barColor:#ffa93c;scaleColor:false;lineWidth:20;lineCap:circle"
			ng-percent="Percent3"> <span class="percent" ng-bind="percent"></span>
		</span> <span class="ybp_sp">装货</span> <!--<input type="range" min="0" max="100" step="1" ng-model="anotherPercent" />-->
		</div>
		</a> <a class="ybp_a">
		<div class="angular" ng-controller="chartCtrl"><span
			class="chart"
			easypiechart="animate:false;barColor:#97addc;scaleColor:false;lineWidth:20;lineCap:circle"
			ng-percent="Percent4"> <span class="percent" ng-bind="percent"></span>
		</span> <span class="ybp_sp">运输</span> <!--<input type="range" min="0" max="100" step="1" ng-model="anotherPercent" />-->
		</div>
		</a>

		<div class="clear"></div>
		</div>
		<script src="#{request.contextPath}/asset/js/angular.min.js"></script>
		<script
			src="#{request.contextPath}/asset/js/angular.easypiechart.min.js"></script>
		<script>
		var app = angular.module('app', ['easypiechart']);
		app.controller('chartCtrl', ['$scope', function ($scope) {			
			$scope.Percent = 70;
			$scope.Percent2 = #{orderInfoHome.boxCount};
			$scope.Percent3 = #{orderInfoHome.packCount}; 
			$scope.Percent4 = #{orderInfoHome.transportCount};
		}]);
	</script> <!--近30天完成包装量开始-->
		<div class="ybp_02">
		<div class="bzl_30">近30天完成包装量</div>
		<!-- lines -->
		<div class="row-fluid">
		<div class="span12">
		<div class="box corner-all">
		<div class="box-body">
		<div id="placeholder2" class="chart22"></div>
		</div>
		</div>
		</div>
		</div>
		<!-- /lines -->
		<div class="clear"></div>
		</div>
		<!--近30天完成包装量结束--> <!--按班组排名开始-->
		<div class="ybp_02"><!--左边开始-->
		<div class="bz_gta">
		<table class="bz_l_table">
			<tr>
				<td width="34" height="34" align="center"
					style="border-right: 1px solid #dfdfdf;"><img
					src="#{request.contextPath}/asset/images/ybp03_03.jpg" width="14"
					height="10" /></td>
				<td class="bz_font">&#160;按班组排名</td>
			</tr>
			<tr>
				<td colspan="2" style="border-top: 1px solid #dfdfdf;" height="204">
				<table class="f_tad">
					<tr>
						<td colspan="2" class="font_s">一班组</td>
					</tr>
					<tr>
						<td width="90%" class="f_pa_d">
						<div class="progress progress-striped active">
						<div class="progress-bar progress-bar-warning" role="progressbar"
							aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"
							style="width: 60%"><span class="sr-only">60%
						Complete (warning)</span></div>
						</div>
						</td>
						<td width="10%" class="font_z f_pa_d">623</td>
					</tr>
				</table>
				<table class="f_tad">
					<tr>
						<td colspan="2" class="font_s">二班组</td>
					</tr>
					<tr>
						<td width="90%" class="f_pa_d">
						<div class="progress progress-striped active">
						<div class="progress-bar progress-bar-success" role="progressbar"
							aria-valuenow="40" aria-valuemin="0" aria-valuemax="100"
							style="width: 40%"><span class="sr-only">40%
						Complete (success)</span></div>
						</div>
						</td>
						<td width="10%" class="font_z f_pa_d">431</td>
					</tr>
				</table>
				<table class="f_tad">
					<tr>
						<td colspan="2" class="font_s">三班组</td>
					</tr>
					<tr>
						<td width="90%" class="f_pa_d">
						<div class="progress progress-striped active">
						<div class="progress-bar progress-bar-info" role="progressbar"
							aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"
							style="width: 20%"><span class="sr-only">20%
						Complete</span></div>
						</div>
						</td>
						<td width="10%" class="font_z f_pa_d">214</td>
					</tr>
				</table>
				</td>
			</tr>
		</table>
		<div class="bord_d">
		<table class="bz_l_table"
			style="border-bottom: 1px solid #dfdfdf; border-left: none; border-right: none; border-top: none;">
			<tr>
				<td width="34" height="34" align="center"
					style="border-right: 1px solid #dfdfdf;"><img
					src="#{request.contextPath}/asset/images/pass_03.jpg" width="14"
					height="15" /></td>
				<td width="70" class="bz_font">&#160;过期产品</td>
				<td>
				<ul class="tab_ul" style="width: auto; float: right;">

					<script type="text/javascript">
					                   		d1 = function(){
					                   			document.getElementById('divv1').style.display='block';document.getElementById('divv2').style.display='none';
					                   			jquery('#liii1').addClass('current');jquery('#liii2').removeClass('current');
					                   		}
					                   		d2 = function(){
					                   			document.getElementById('divv2').style.display='block';document.getElementById('divv1').style.display='none';
					                   			jquery('#liii2').addClass('current');jquery('#liii1').removeClass('current');
					                   		}
					                   </script>
					<li class="current" onclick="d1()" id="liii1"
						style="border-right: 1px solid #dddddd;"><a
						href="javascript:" title="">原料</a></li>
					<li onclick="d2()" id="liii2"><a href="javascript:" title="">成品</a></li>
				</ul>

				</td>
			</tr>
		</table>
		<div class="bord" style="border-top: none;"><!--全部开始-->
		<div id="divv1">
		<table width="96%" cellpadding="0" cellspacing="0" class="bord_tab">
			<a:repeat rendered="#{not empty orderInfoHome.pass}"
				value="#{orderInfoHome.pass}" var="obj" rowKeyVar="_index">
				<tr>
					<td class="bor_tdb" width="12%">
					<div class="bor_pic2"><s:graphicImage
						value="#{orderInfoHome.getGoodsInfo(obj[3]).picture}" width="34"
						height="34"
						rendered="#{orderInfoHome.getGoodsInfo(obj[3]).picture!=null}">
						<s:transformImageSize width="150" maintainRatio="true" />
					</s:graphicImage></div>
					<div class="bor_png"><img width="34" height="34"
						src="#{request.contextPath}/asset/images/pic_b.png" /></div>
					</td>
					<td class="bor_tdb" width="13%"><b>#{obj[0]}</b></td>
					<td width="67%" class="bo_td_f bor_tdb"><img class="tdb_img"
						src="#{request.contextPath}/asset/images/time_14.jpg" width="20"
						height="17" />过期时间：#{obj[1]}</td>
					<td class="bor_tdb" width="13%"><a class="bo_bg1" href="#"><strong>#{obj[2]}</strong></a></td>
				</tr>
			</a:repeat>
		</table>
		</div>
		<div id="divv2" style="display: none">
		<table width="96%" cellpadding="0" cellspacing="0" class="bord_tab">
			<a:repeat rendered="#{not empty orderInfoHome.pass2}"
				value="#{orderInfoHome.pass2}" var="obj" rowKeyVar="_index">
				<tr>
					<td class="bor_tdb" width="12%">
					<div class="bor_pic2">
					#{orderInfoHome.getGoodsInfo(obj[3]).goodsInfoId} <s:graphicImage
						value="#{orderInfoHome.getGoodsInfo(obj[3]).picture}" width="34"
						height="34">
						<s:transformImageSize width="150" maintainRatio="true" />
					</s:graphicImage></div>
					<div class="bor_png"><img width="34" height="34"
						src="#{request.contextPath}/asset/images/pic_b.png" /></div>
					</td>
					<td class="bor_tdb" width="13%"><b>#{obj[0]}</b></td>
					<td width="67%" class="bo_td_f bor_tdb"><img class="tdb_img"
						src="#{request.contextPath}/asset/images/time_14.jpg" width="20"
						height="17" />过期时间：#{obj[1]}</td>
					<td class="bor_tdb" width="13%"><a class="bo_bg1" href="#"><strong>#{obj[2]}</strong></a></td>
				</tr>
			</a:repeat>

		</table>
		</div>
		</div>

		<div class="clear"></div>
		</div>
		<!--bord_d结束--> <!--订单数量开始-->
		<table class="dd_n_table">
			<tr>
				<td width="34" height="34" align="center"
					style="border-right: 1px solid #dfdfdf;"><img
					src="#{request.contextPath}/asset/images/ybp03_07.jpg" width="14"
					height="10" /></td>
				<td class="bz_font">&#160;订单数量</td>
			</tr>
			<tr>
				<td colspan="2" style="border-top: 1px solid #dfdfdf;" height="264">
				<!-- stacking -->
				<div class="demo-container"><img
					src="#{request.contextPath}/asset/images/zhutu.jpg" width="100%"
					height="259" alt="订单总量" /></div>
				<!-- /stacking --></td>
			</tr>
		</table>
		<!--订单数量结束-->


		<div class="clear"></div>
		</div>
		<!--左边结束--> <!--右边开始-->
		<div class="bz_gtrr"><!--任务完成情况开始-->
		<table class="bz_r_table">
			<tr>
				<td width="34" height="34" align="center"
					style="border-right: 1px solid #dfdfdf;"><img
					src="#{request.contextPath}/asset/images/ybp0_03.jpg" width="12"
					height="8" /></td>
				<td class="bz_font">&#160;任务完成情况</td>
			</tr>
			<tr>
				<td colspan="2" style="border-top: 1px solid #dfdfdf;" height="284"
					valign="top">
				<table width="96%"
					style="margin: 15px auto; border-collapse: collapse;">
					<a:repeat rendered="#{not empty orderInfoHome.pdrList}"
						value="#{orderInfoHome.pdrList}" var="obj" rowKeyVar="_index">
						<tr>
							<td width="80%" class="bz_tdd">
								<span style="float: left; display: inline-block; margin-right: 10px;">#{obj.orderCode}</span>
								<span class="#{orderTypeUtil.formatObjectStr(obj.orderStatus).className}" ><strong style="padding-left: 4px; padding-right:4px; margin-right:-2px;" ><h:outputText value="#{orderTypeUtil.formatObjectStr(obj.orderStatus).name}"/></strong></span>
							</td>
							<td width="20%" align="center" class="bz_tdd"><h:outputText
								value="#{obj.deliverTime}">
								<s:convertDateTime type="both" dateStyle="short"
									pattern="yyyy-MM-dd" />
							</h:outputText></td>
						</tr>
					</a:repeat>

				</table>
				</td>
			</tr>
		</table>
		<!--任务完成情况结束--> <!--总包装数量开始-->
		<table class="dd_n_table">
			<tr>
				<td width="34" height="34" align="center"
					style="border-right: 1px solid #dfdfdf;"><img
					src="#{request.contextPath}/asset/images/ybp03_11.jpg" width="14"
					height="10" /></td>
				<td class="bz_font">&#160;总包装数量</td>
			</tr>
			<tr>
				<td colspan="2" style="border-top: 1px solid #dfdfdf;" height="260"
					id="total" width="100%"><canvas id="introChart" width="489"
					height="246"></canvas></td>
			</tr>
		</table>
		<!--总包装数量结束--> <!--总包装数量开始-->
		<table class="dd_n_table">
			<tr>
				<td width="34" height="34" align="center"
					style="border-right: 1px solid #dfdfdf;"><img
					src="#{request.contextPath}/asset/images/ybp_02_03.jpg" width="11"
					height="8" /></td>
				<td class="bz_font">&#160;系统消息</td>
			</tr>
			<tr>
				<td colspan="2" class="dd_t_ab" valign="top" align="left">
				<table width="100%" cellpadding="0" cellspacing="0">
					<tr>
						<td width="34" rowspan="2" align="center"><a
							style="width: 4px; min-height: 45px; display: block; background: #4db157;"></a></td>
						<td height="20" class="dd_naa"><a href="#">系统消息网站改版新体验</a></td>
						<td width="34" valign="bottom" class="dd_a_r">20</td>
					</tr>
					<tr>
						<td height="20" class="dd_da"><a href="#">后台系统改版成功后台系统改版成功后台系统改版成功</a></td>
						<td class="dd_a_z" valign="top">jan</td>
					</tr>
				</table>

				</td>
			</tr>
			<tr>
				<td colspan="2" class="dd_t_ab" valign="top" align="left">
				<table width="100%" cellpadding="0" cellspacing="0">
					<tr>
						<td width="34" rowspan="2" align="center"><a
							style="width: 4px; min-height: 45px; display: block; background: #eb4849;"></a></td>
						<td height="20" class="dd_naa"><a href="#">系统消息网站改版新体验</a></td>
						<td width="34" valign="bottom" class="dd_a_r">20</td>
					</tr>
					<tr>
						<td height="20" class="dd_da"><a href="#">后台系统改版成功后台系统改版成功后台系统改版成功</a></td>
						<td class="dd_a_z" valign="top">jan</td>
					</tr>
				</table>

				</td>
			</tr>
			<tr>
				<td colspan="2" class="dd_t_ab" valign="top" align="left">
				<table width="100%" cellpadding="0" cellspacing="0">
					<tr>
						<td width="34" rowspan="2" align="center"><a
							style="width: 4px; min-height: 45px; display: block; background: #ffa93c;"></a></td>
						<td height="20" class="dd_naa"><a href="#">系统消息网站改版新体验</a></td>
						<td width="34" valign="bottom" class="dd_a_r">20</td>
					</tr>
					<tr>
						<td height="20" class="dd_da"><a href="#">后台系统改版成功后台系统改版成功后台系统改版成功</a></td>
						<td class="dd_a_z" valign="top">jan</td>
					</tr>
				</table>

				</td>
			</tr>

		</table>
		<!--总包装数量结束-->
		<div class="clear"></div>
		</div>
		<div class="clear"></div>
		</div>
		<!--按班组排名结束--> <!---订单管理下图结束-->
		<div class="clear"></div>
		</div>
		<!--right_c结束--> <script src="#{request.contextPath}/asset/js/jquery.js"></script>
		 <script src="#{request.contextPath}/asset/js/jquery.flot.js"></script>
			 <script language="javascript" type="text/javascript" src="#{request.contextPath}/asset/js/jquery.flot.time.js"></script> <script
			type="text/javascript">
      //<![CDATA[
			$(function() {
		var bb = #{orderInfoHome.b};
		if(bb){
		#{orderInfoHome.array1}

		var plot = $.plot("#placeholder2", [
			#{orderInfoHome.array2}
		], {
			xaxis: { mode: "time",timeformat: "%m-%d"},
			yaxis: {  min: 0 },
			series: {
				lines: {
					show: true
				},
				points: {
					show: true
				}
			},
			grid: {
				hoverable: true,
				clickable: true
			}
		});

		function showTooltip(x, y, contents) {
			$("<div id='tooltip'>" + contents + "</div>").css({
				position: "absolute",
				display: "none",
				top: y + 5,
				left: x + 5,
				border: "1px solid #fdd",
				padding: "2px",
				"background-color": "#fee",
				opacity: 0.80
			}).appendTo("body").fadeIn(200);
		}

		var previousPoint = null;
		$("#placeholder2").bind("plothover", function (event, pos, item) {

			if (true) {
				var str = "(" + pos.x.toFixed(2) + ", " + pos.y.toFixed(2) + ")";
				$("#hoverdata").text(str);
			}
			if (true) {
				if (item) {
					if (previousPoint != item.dataIndex) {
						previousPoint = item.dataIndex;
						$("#tooltip").remove();
						var x = item.datapoint[0].toFixed(2),
						y = item.datapoint[1].toFixed(2);
						var str1 = (x+"").split(".")[0];
						var dat = new Date(parseInt(str1));
						var str = dat.getFullYear()+"-"+(dat.getMonth()+1)+"-"+dat.getDate();
						y = (y+"").split(".")[0];
						showTooltip(item.pageX, item.pageY,
								str + " " + y+"包");
					}
				} else {
					$("#tooltip").remove();
					previousPoint = null;            
				}
			}
		});
		}else{
			document.getElementById("placeholder2").style.display="none";
		}
	});
//]]>
		</script> <!--近30天完成包装量结束--> <!--总包装数量开始--> <script type="text/javascript"
			src="#{request.contextPath}/asset/js/Chart.js"></script> <script
			src="#{request.contextPath}/asset/js/modernizr.min.js"></script> <script
			src="#{request.contextPath}/asset/js/jquery.gritter.min.js"></script>
		<!--总包装数量结束--> <!--[if lte IE 8]><script language="javascript" type="text/javascript" src="#{request.contextPath}/asset/js/excanvas.js"></script><![endif]-->
		<!--订单数量下开始--> <script language="javascript" type="text/javascript"
			src="#{request.contextPath}/asset/js/jquery.flot.stack.js"></script>
		<script type="text/javascript"><!--
	//<![CDATA[
	$ = jQuery.noConflict();
	$(function() {
		$.gritter.add({
			title:	'收到新的消息',
			text:	'#{orderInfoHome.message}',
			image: 	'#{request.contextPath}/asset/images/envelope.png',
			sticky: false,
			time: 4000
		});
		var d1 = [];
		var dxx = [1383234757124,1383321157124,1383407557124,1383493957124,1383580357124,1383666757124,1383753157124,1383839557124,1383925957124,1384012357124];
		
		for (var i = 0; i <= 10; i += 1) {
			d1.push([dxx[i], parseInt(Math.random() * 30)]);
		}

		var d2 = [];
		for (var i = 0; i <= 10; i += 1) {
			d2.push([dxx[i], parseInt(Math.random() * 30)]);
		}

		var d3 = [];
		for (var i = 0; i <= 10; i += 1) {
			d3.push([dxx[i], parseInt(Math.random() * 30)]);
		}

		var stack = 0,
			bars = true,
			lines = false,
			steps = false;

		//function plotWithOptions() {
		//	$.plot("#placeholder", [ {data:d1,color:'#0a8109'}, {data:d2,color:'#5c32ae'}, {data:d3,color:"#2f72db" }], {
		//		xaxis: { mode: "time",timeformat: "%m-%d"},
		//		series: {
		//			lines: {
		//				show: true
		//			},
		//			points: {
		//				show: true
		//			}
		//		},
		//		grid: {
		//			hoverable: true,
		//			clickable: true
		//		}
		//	});
		//}

		//plotWithOptions();

		$(".stackControls button").click(function (e) {
			e.preventDefault();
			stack = $(this).text() == "With stacking" ? true : null;
			plotWithOptions();
		});

		$(".graphControls button").click(function (e) {
			e.preventDefault();
			bars = $(this).text().indexOf("Bars") != -1;
			lines = $(this).text().indexOf("Lines") != -1;
			steps = $(this).text().indexOf("steps") != -1;
			plotWithOptions();
		});

		
	});

var lineChartData = {
			labels : ["4月","5月","6月","7月","8月","9月","10月"],
			datasets : [
				{
					fillColor : "rgba(220,220,220,0.5)",
					strokeColor : "rgba(220,220,220,1)",
					pointColor : "rgba(220,220,220,1)",
					pointStrokeColor : "#fff",
					data : [65,59,90,81,56,55,40]
				},
				{
					fillColor : "rgba(151,187,205,0.5)",
					strokeColor : "rgba(151,187,205,1)",
					pointColor : "rgba(151,187,205,1)",
					pointStrokeColor : "#fff",
					data : [28,48,40,19,96,27,100]
				}
			]
			
		}

		$(function(){
if(!document.getElementById("html5").getContext){
var canvas=document.createElement("canvas");
canvas.setAttribute("id","canvas");
canvas.setAttribute("width",document.getElementById("total").offsetWidth);
canvas.setAttribute("height",document.getElementById("total").offsetHeight);
document.getElementById("total").appendChild(canvas);
//var canvas = document.getElementByid("canvas");
if($.browser.msie){
canvas=window.G_vmlCanvasManager.initElement(canvas);
}

var myLine = new Chart(document.getElementById("canvas").getContext("2d")).Line(lineChartData);
$("#introChart").remove();
}else{
	$("#canvas").remove();
document.getElementById("introChart").setAttribute("width",document.getElementById("total").offsetWidth);
document.getElementById("introChart").setAttribute("height",document.getElementById("total").offsetHeight);
var myLine = new Chart(document.getElementById("introChart").getContext("2d")).Line(lineChartData);
}
});
//]]>
	--></script> <script type="text/javascript">
	
        var ua = navigator.userAgent.toLowerCase();
        var aClient = ["ucweb","rv:1.2.3.4","windows ce","windows mobile","midp","wml"];
		
		if(ua.indexOf("msie 6.0") > 0 || ua.indexOf("msie 7.0") > 0 || ua.indexOf("msie 8.0") > 0 ){
			
		}
		if (typeof(Worker) !== "undefined") {         }     else {  document.getElementById("ybp_02").style.display="none";        } 
	</script></td>
	</ui:define>
</ui:composition>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	template="/layout/template_new.xhtml">
    <!-- 选择投入品弹出框 开始 -->
		<ui:define name="foot">
			<ui:include src="/product/SelectInputsInfo.xhtml"></ui:include>
		</ui:define>
	<!-- 投入品排序弹出框 --> 
	    <!-- 选择投入品弹出框 开始 -->
		<ui:define name="sortInputsInfo">
			<ui:include src="/product/SortInputsInfo.xhtml"></ui:include>
		</ui:define>
	<!-- 投入品排序弹出框 --> 
	<ui:define name="body">
	 <style>
	 /*
	div#menu .helpSeleHd{width:50px;}
	div#menu .siteSeleHd{width: 85px;}
	*/
 .dr-mpnl-pnl{padding:0;}
 .dr-mpnl-pnl-b{color:none;padding:0; font-family:"微软雅黑";}
  .dr-insldr td{padding:0;}
 .font_td{font-size:14px;}
 .dr-insldr{width:255px!important;}
  #healthShadowDiv{margin-top:-100px;}
 #dangerShadowDiv{margin-top:-100px;}
 #standardShadowDiv{margin-top:-100px;}
 .dr-insldr-tip{padding:8px 2px 5px 2px; *padding:5px 2px 5px 2px;}
 .ke-edit{height:70px!important;}
 iframe.ke-edit-iframe,  iframe.ke-edit-textarea{height:70px!important;}
 textarea.ke-edit-textarea{height:70px!important;}
#operateform table.tck_table span .ge_file{height:15px;}
  .ts_div2{width:340px; height: 125px; border: 1px solid #81C5E9; margin: 0px auto; padding: 0 15px 15px;  background: url(#{request.contextPath}/asset/images/tck_bg_14.jpg) #ffffff repeat-x scroll center top;}
  .ts_div3{width:340px; height: 175px; border: 1px solid #81C5E9; margin: 0px auto; padding: 0 15px 15px;  background: url(#{request.contextPath}/asset/images/tck_bg_14.jpg) #ffffff repeat-x scroll center top;}
  .dr-mpnl-shadow{background:none;}
  .dr-mpnl-shadow{top:0; left:0;}
  .rich-picklist-source-items{margin:0;}
  .ui-selectmenu{*float:left;}
  .public-search {position: relative; width:350px;}
  /* 多选搜索下拉框 对号样式 */
.glyphicon-ok:before{ content:normal;}
.bootstrap-select.btn-group .dropdown-menu li a i.check-mark{  background:url(#{request.contextPath}/asset/images/selectMenu-ico1.png) no-repeat;}
 /* 排序样式 */ 
.rich-picklist-source-cell, .rich-picklist-target-cell, .rich-picklist-source-cell *, .rich-picklist-target-cell *,.rich-picklist-source-cell-selected, .rich-picklist-target-cell-selected, .rich-picklist-source-cell-selected *, .rich-picklist-target-cell-selected *{font-size:12px;}	
.fa-arrows {
background-image: url("#{request.contextPath}/asset/images/yd.png") ;
margin-top:11px;
width:13px;
height:13px
}	
.select-list .btn-group-vertical .btn {
	width: 50px;
	height: 30px;
}
.select-list .content{min-width: 535px;} 
/*导入样式*/
.modal .modal-header .close, .modal .modal-header .close:link {background: rgba(0, 0, 0, 0) url("../asset/images/farmingIco16.jpg") no-repeat scroll 0 0; border: medium none;float: right;height: 11px;margin-top: 5px;opacity: 1;width: 11pxfilter:alpha(opacity=100);;}
.modal .modal-header .close:hover, .modal-header .close:focus {background: rgba(0, 0, 0, 0) url("../asset/images/farmingIco17.jpg") no-repeat scroll 0 0;opacity: 1;filter:alpha(opacity=100);}

.baseFile_onload{ display:block; float:left; width:130px; height:130px; margin:25px 50px 25px 0;border:none;background: url("../asset/images/upload_file.png") no-repeat scroll 0 0; cursor:pointer;}
.baseFile_onload:hover{ background: url("../asset/images/upload_file.png") no-repeat scroll 0 0; border:none;}
.baseFile_onload input{ position:absolute; right:0; top:0; width:130px; height:130px; opacity:0; filter:alpha(opacity=0); cursor:pointer;}
.baseFile_pic194 img{ width:194px; height:94px;}
.modal-header h4{font-family: 微软雅黑;}
.excelName,.msgSource{ margin:0 50px; line-height:20px;}
 </style>
 <link rel="stylesheet" href="#{request.contextPath}/asset/css/product/wuliaoXx.css" type="text/css" />
  <link rel="stylesheet" type="text/css" href="#{request.contextPath}/asset/css/sort.css"/>
  <link type="text/css" rel="stylesheet" href="#{request.contextPath}/asset/css/settings/EnterpriseSettings.css" />
  <script type="text/javascript" src="#{request.contextPath}/asset/js/EnterpriseLeftMenu.js"></script>
  <script type="text/javascript" src="#{request.contextPath}/asset/js/richwidgets-demo.min.js"></script>
  <script type="text/javascript" src="#{request.contextPath}/asset/js/checkBox/icheck.js"></script>
		<!-- #{goodsInfoHome.inputsList()} -->
    	<td valign="top">
                <div class="inbentory_file_main">
                <!--左侧二级导航 -->
                <div class="inbentory_level_wap">
                    <div class="inbentory_level">
                        <strong class="inben_first inben_first2">
                            <a href="javascript:;"><i class="icon_L icon_rkgl"></i>基础设置</a><b class="b_arrow"></b>
                        </strong>
                        <ol class="inben_second">
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/user/UpdateEnterpriseSettings.seam?enterpriseId=#{sessionTake.enterpriseInfoId}','_self')" >
                            	<i class="icon_sed"></i>企业设置                   	
                            </li>
                            <!-- 管理版和以前的版本（标准、白金...)显示 -->
                            <h:panelGroup rendered="#{sessionTake.nowVersionService.basicService.basicServiceId==10 or sessionTake.nowVersionService.basicService.serviceType eq 1}">
                            	<li class="sed_item" onclick="window.open('#{request.contextPath}/user/ModuleSettings.seam','_self')" ><i class="icon_sed"></i>模块配置</li>
                            </h:panelGroup>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/dictionary/DataDicinfoList.seam','_self')" ><i class="icon_sed"></i>字段管理</li>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/user/EnterpriseCommunityList.seam','_self')" ><i class="icon_sed"></i>角色管理</li>
                            <s:fragment rendered="#{enterpriseInfoHome.enterpriseInfo.govState}">
	                        	<li class="sed_item" onclick="window.open('#{request.contextPath}/user/AuditInformationList.seam','_self')" ><i class="icon_sed"></i>审核信息</li>
	                        </s:fragment>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/system/RecycleInfoList_1.seam','_self')" ><i class="icon_sed"></i>回收站</li>
                        </ol>
                        <strong class="inben_first inben_first2">
                            <a href="javascript:;"><i class="icon_L icon_ckgl"></i>生产管理设置</a><b class="b_arrow"></b>
                        </strong>
                        <ol class="inben_second">
                            <h:panelGroup rendered="#{s:hasRole('certification')}">
                            	<li class="sed_item" onclick="window.open('#{request.contextPath}/map/CertificationList.seam','_self')" ><i class="icon_sed"></i>认证信息</li>
                            </h:panelGroup>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/message/TunnelGroupList.seam','_self')" ><i class="icon_sed"></i>分组管理</li>
                            <li class="sed_item sed_cur" onclick="window.open('#{request.contextPath}/product/InputsInfoList.seam?goodsTypeInfoId=5','_self')" ><i class="icon_sed"></i>投入品信息</li>
                        </ol>
                        <strong class="inben_first inben_first2">
                            <a href="javascript:;"><i class="icon_L icon_zkgl"></i>销售管理设置</a><b class="b_arrow"></b>
                        </strong>
                        <ol class="inben_second">
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/product/GoodsInfoList.seam','_self')"><i class="icon_sed"></i>物料信息</li>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/product/ProductInfoList.seam','_self')" ><i class="icon_sed"></i>商品信息</li>
                        </ol>
                        <strong class="inben_first inben_first2">
                            <a href="javascript:;"><i class="icon_L icon_pdgl"></i>硬件管理设置</a><b class="b_arrow"></b>
                        </strong>
                        <ol class="inben_second">
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/device/DeviceList.seam','_self')"><i class="icon_sed"></i>设备管理</li>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/device/VideoList.seam','_self')" ><i class="icon_sed"></i>视频管理</li>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/farming/AmRfidInfoList.seam','_self')" ><i class="icon_sed"></i>RFID卡管理</li>
                        </ol>
                    </div>
                    <i class="collapse_btn"></i>
                </div>
                <!--左侧二级导航 -->
				<!--右侧 -->
                <div class="inbentory_content">
		<div class="right_c">
                	<div class="r_title">
                    	<div class="r_t_l"><font size="4">投入品信息</font></div>
                    </div>
					<br/>
                    <div class="z_r_ser">
                    <h:form id="productTypeSearch">
                    	<table cellpadding="0" cellspacing="0" style="float:left;">
                           <tr>
                                <td width="350px'">
                                <!-- <div class="public-search">   
                                	<span class="octicon-search02"></span>
                                	<h:inputText id="name" styleClass="form-control nw300 srarchfont" value="#{goodsInfoList.serachParam}"/>
                                </div> -->
                                <h:inputHidden id="inputsType" value="#{goodsInfoHome.inputsType}" />
                                <h:inputHidden id="inputsTypePageNum" value="#{goodsInfoHome.pageNum}" />
							   <div class="col-lg-6" style="padding-left:0;">
							        <div class="input-group">
							          <div class="input-group-btn">
							            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" style="border-radius:4px 0 0 4px;"><span id="selectBut">全部</span> <span class="caret"></span></button>
							            <ul class="dropdown-menu" role="menu" style="width: 80px;">
							              <li><a href="javascript:void(0)" onclick="setInputsType('0')">全部</a></li>
							              <li><a href="javascript:void(0)" onclick="setInputsType('2')">农药</a></li>
							              <li><a href="javascript:void(0)" onclick="setInputsType('3')">肥料</a></li>
							              <li><a href="javascript:void(0)" onclick="setInputsType('5')">种子</a></li>
							              <li><a href="javascript:void(0)" onclick="setInputsType('4')">其他</a></li>
							            </ul>
							          </div>
							          <h:inputText class="form-control" value="#{goodsInfoHome.serachParam}" style="width:250px;" />
							        </div>
							    </div>
                                </td>
                           </tr>
                       </table> 
                       <h:commandButton id="search" styleClass="btn btn-primary" value="搜索" style="float:left;" action="/product/InputsInfoList.xhtml" onclick="changePage();">
                       </h:commandButton>
                    </h:form>                         
                    </div>
                     <!--添加按钮开始-->
					<div class="tjan_02" style="margin-top:-61px; margin-bottom:20px;">
                   	<!-- <s:link styleClass="btn btn-success" style="margin-left:5px; float:right;" view="/product/InputsInfoEdit.xhtml" propagation="none" rendered="#{sessionTake.getLevelId() ne 1}"><f:param name="goodsInfoGoodsInfoId" />
                    <f:param name="goodsInfoId" value=""/>
                    	添加</s:link>  -->
                    	
                    	<div class="btn-group bootstrap_select fr" style="margin-left:5px;width: 84px;">
                            <button type="button" class="btn dropdown-toggle selectpicker btn-default btn-success" data-toggle="dropdown" style="width: 86px;"><span id="">添加</span><span class="caret"></span></button>
							<ul class="dropdown-menu" role="menu">
								<li>
						      		<s:link  style="margin-left:5px; float:right;" view="/product/InputsInfoEdit.xhtml" propagation="none" rendered="#{sessionTake.getLevelId() ne 1}">
						      		<f:param name="goodsInfoGoodsInfoId" />
				                    <f:param name="goodsInfoId" value=""/>
				                    <f:param name="inputsTypeId" value="2"/><strong style="cursor: pointer;">添加农药</strong></s:link>
		                       	</li>
		                        <li>
		                        	<s:link  style="margin-left:5px; float:right;" view="/product/InputsInfoEdit.xhtml" propagation="none" rendered="#{sessionTake.getLevelId() ne 1}">
						      		<f:param name="goodsInfoGoodsInfoId" />
				                    <f:param name="goodsInfoId" value=""/>
				                    <f:param name="inputsTypeId" value="3"/><strong style="cursor: pointer;">添加肥料</strong></s:link>
		                        </li>
		                        <li>
		                        	<s:link  style="margin-left:5px; float:right;" view="/product/SeedsInputsInfoEdit.xhtml" propagation="none" rendered="#{sessionTake.getLevelId() ne 1}">
						      		<f:param name="goodsInfoGoodsInfoId" />
				                    <f:param name="goodsInfoId" value=""/>
				                    <f:param name="inputsTypeId" value="5"/><strong style="cursor: pointer;">添加种子</strong></s:link>
		                        </li>
		                        <li>
		                        	<s:link  style="margin-left:5px; float:right;" view="/product/InputsInfoEdit.xhtml" propagation="none" rendered="#{sessionTake.getLevelId() ne 1}">
						      		<f:param name="goodsInfoGoodsInfoId" />
				                    <f:param name="goodsInfoId" value=""/>
				                    <f:param name="inputsTypeId" value="4"/><strong style="cursor: pointer;">添加其他</strong></s:link>
		                        </li>
						  	</ul>
                        </div>
                    	
                    	                 
                        <div class="btn-group bootstrap_select fr" style="margin-left:5px;">
                            <button type="button" class="btn dropdown-toggle selectpicker btn-default" data-toggle="dropdown"><span id="">导入导出</span><span class="caret"></span></button>
							<ul class="dropdown-menu" role="menu">
								<li>
						      		 <s:link propagation="none" view="/product/InputsInfoList.xhtml" action="#{goodsInfoforAppraisalExportList.inputsExportExcel}" >
						      		 <f:param name="inputsType" value="#{goodsInfoList.inputsType}"/>
						      		 <strong style="cursor: pointer;">导出投入品</strong>
						      		 </s:link>
		                       	</li>
		                        <li>
		                        	<a  href="javascript:void(0);" onclick="importInit();" ><strong style="cursor: pointer;">导入投入品</strong></a>
		                        </li>
		                        <!-- <li>
		                        	<a  href="javascript:void(0);" onclick="printBarcode();" ><strong style="cursor: pointer;">打印条形码</strong></a>
		                        </li> -->	
						  	</ul>
                        </div>
                    </div>
                    <!-- 旧版导入 -->
                    <rich:modalPanel id="product" autosized="true" height="173" width="450" headerClass="modalHeader" >
						<div class="tck_div" style="padding-bottom:22px;">
							<div class="tck_ti" >
								<h:outputLink value="#"  onclick="#{rich:component('product')}.hide(); return false;">
									<img src="../images/close_17.jpg" width="20" height="20"/>
								</h:outputLink>
					       	</div>
							<h:form id="upform" styleClass="upload" enctype="multipart/form-data">
								<table class="tck_table" style="width:460px;">
				                    <tr>
				                    	<td align="right" class="font_td">选择导入文件：</td>
				                        <td>
											<s:fileUpload id="uploadFile" accept="application/vnd.ms-excel,application/ms-excel" contentType="application/vnd.ms-excel,application/ms-excel"
												fileName="#{goodsInfoforAppraisalExportList.fileName}" data="#{goodsInfoforAppraisalExportList.excelFile}">
											</s:fileUpload>
				                        </td>
				                    </tr>
				                    <tr>
				                    	<td colspan="2" align="center" valign="bottom">
				                    		<h:commandButton id="upl" styleClass="edit_ext" onclick="#{rich:component('product')}.hide();" action="#{goodsInfoforAppraisalExportList.importInputsExcel}"/>
				                        </td>
				                    </tr>
				                </table>
							</h:form>
						</div>
					</rich:modalPanel>
					<!-- 旧版导入 -->
                    <!--添加按钮结束-->
                    <table width="100%" class="ze_table" cellpadding="0" cellspacing="0">
                    	<tr>
                    		<td width="5" height="4"><img src="#{request.contextPath}/asset/images/table_d_40.jpg" width="5" height="4" /></td>
                    		<td colspan="6" style="border-top:1px solid #e1e1e1; background:#f0f5fb;"></td>
                            <td width="5" height="4"><img src="#{request.contextPath}/asset/images/table_d_43.jpg" width="5" height="4" /></td>
                    	</tr>
                    	<tr>
                    		<th class="ze_bg ze_bt_le" width="5" height="4"></th>
                            <th class="ze_bg" width="17%">投入品编号</th>
                    		<th class="ze_bg" width="17%">投入品名称</th>
                    		<th class="ze_bg" width="16%">投入品类型</th>
                    		
                    		<th class="ze_bg" width="15%">投入品规格</th>
                    		<th class="ze_bg" width="18%">保质期</th>                    		
                    		<th class="ze_bg" width="17%">操作</th>
                            <th class="ze_bg ze_bt_ri" width="5" height="4"></th>
                    	</tr>
						<ui:repeat value="#{goodsInfoHome.inputList}" var="_goodsInfo" rendered="#{not empty goodsInfoHome.inputList}" rowKeyVar="_index">
                    	<tr>
                    		<td class="ze_bg2 ze_bt_le" width="5" height="4"></td>
                            <td class="ze_bg2"><h:outputText  value="#{_goodsInfo.goodsCode}" /></td>
                            <td class="ze_bg2"><h:outputText  value="#{_goodsInfo.name}" /></td>
                            <td class="ze_bg2">
                            	<h:outputText value="农药" rendered="#{_goodsInfo.inputsType eq 2}"/>
                            	<h:outputText value="肥料" rendered="#{_goodsInfo.inputsType eq 3}"/>
                            	<h:outputText value="其他" rendered="#{_goodsInfo.inputsType eq 4}"/>
                            	<h:outputText value="种子" rendered="#{_goodsInfo.inputsType eq 5}"/>
                            </td>
                            <td class="ze_bg2">
                            	<h:outputText rendered="#{_goodsInfo.packSpec ne null and _goodsInfo.packSpec ne ''}">
	                            	#{_goodsInfo.netContent}#{_goodsInfo.unitName}/#{_goodsInfo.packSpec}
                            	</h:outputText>
                            	<h:outputText rendered="#{_goodsInfo.packSpec eq null or _goodsInfo.packSpec eq ''}">
                            		#{_goodsInfo.netContent}#{repertoryChange.findNameByUnitInfo(_goodsInfo.goodsUnit)}
                            	</h:outputText>
                            </td>                                                     
                            <td class="ze_bg2"><h:outputText  value="#{_goodsInfo.expireDate}月" rendered="#{_goodsInfo.expireDate ne 0}" /></td>
                    		<td class="ze_bg2">
                            	<h:outputText value="" rendered="#{_goodsInfo.inputsType ne 5}">
                            	<s:link propagation="none"  view="/#{empty from ? 'product/InputsInfo' : from}.xhtml" styleClass="list_view"  id="productTypeViewId1" title="查看">
								<f:param name="goodsInfoId" value="#{_goodsInfo.goodsInfoId}" />
								<f:param name="pageNum" value="#{goodsInfoHome.pageNum}" />
								<f:param name="baseidString" value="#{goodsInfoHome.baseidString}" />
								<f:param name="inputsType" value="#{goodsInfoHome.inputsType}" />
								</s:link>
								</h:outputText>
								<h:outputText value="" rendered="#{_goodsInfo.inputsType eq 5}">
                            	<s:link propagation="none"  view="/#{empty from ? 'product/SeedInputsInfo' : from}.xhtml" styleClass="list_view"  id="productTypeViewId2" title="查看">
								<f:param name="goodsInfoId" value="#{_goodsInfo.goodsInfoId}" />
								<f:param name="pageNum" value="#{goodsInfoHome.pageNum}" />
								<f:param name="baseidString" value="#{goodsInfoHome.baseidString}" />
								<f:param name="inputsType" value="#{goodsInfoHome.inputsType}" />
								</s:link>
								</h:outputText>
								&#160;
								<h:outputText value="" rendered="#{_goodsInfo.inputsType ne 5}">
                                <s:link propagation="none"  view="/product/InputsInfoEdit.xhtml" styleClass="list_edit" id="productTypeEdit1"  title="编辑">
                                <f:param name="goodsInfoId" value="#{_goodsInfo.goodsInfoId}" />
                                <f:param name="plantId" value="#{_goodsInfo.plant.plantId}"></f:param>
                                <f:param name="pageNum" value="#{goodsInfoHome.pageNum}" />
                                <f:param name="baseidString" value="#{goodsInfoHome.baseidString}" />
                                <f:param name="inputsTypeId" value="#{_goodsInfo.inputsType}" />
                                <f:param name="inputsType" value="#{goodsInfoHome.inputsType}" />
								</s:link>
								</h:outputText>
								<h:outputText value="" rendered="#{_goodsInfo.inputsType eq 5}">
                                <s:link propagation="none"  view="/product/SeedsInputsInfoEdit.xhtml" styleClass="list_edit" id="productTypeEdit2"  title="编辑">
                                <f:param name="goodsInfoId" value="#{_goodsInfo.goodsInfoId}" />
                                <f:param name="plantId" value="#{_goodsInfo.plant.plantId}"></f:param>
                                <f:param name="pageNum" value="#{goodsInfoHome.pageNum}" />
                                <f:param name="baseidString" value="#{goodsInfoHome.baseidString}" />
                                <f:param name="inputsTypeId" value="#{_goodsInfo.inputsType}" />
                                <f:param name="inputsType" value="#{goodsInfoHome.inputsType}" />
								</s:link>
								</h:outputText>
								&#160;
								<h:outputText rendered="#{_goodsInfo.inputsNum eq 0}" >
								<s:link propagation="none"  view="/product/InputsInfoEdit.xhtml"   title="删除"  styleClass="list_delete" action="#{goodsInfoHome.remove}" onclick="return confirm('确定删除吗？');" id="goodsStorageTypeDelete1">
                                <f:param name="goodsInfoGoodsInfoId" value="#{_goodsInfo.goodsInfoId}" />
                                <f:param name="pageNum" value="#{goodsInfoHome.pageNum}" />
                                <f:param name="baseidString" value="#{goodsInfoHome.baseidString}" />
                                <f:param name="inputsType" value="#{goodsInfoHome.inputsType}" />
                                </s:link>
                                </h:outputText>
                                <h:outputText rendered="#{_goodsInfo.inputsNum ne 0}" >
								<s:link propagation="none"  view="/product/InputsInfoEdit.xhtml"   title="删除"  styleClass="list_delete" action="#{goodsInfoHome.remove}" onclick="return confirm('该投入品信息有库存记录或农事记录，确认删除？');" id="goodsStorageTypeDelete2">
                                <f:param name="goodsInfoGoodsInfoId" value="#{_goodsInfo.goodsInfoId}" />
                                <f:param name="pageNum" value="#{goodsInfoHome.pageNum}" />
                                <f:param name="baseidString" value="#{goodsInfoHome.baseidString}" />
                                <f:param name="inputsType" value="#{goodsInfoHome.inputsType}" />
                                </s:link>
                                </h:outputText>
                            </td>
                            <td class="ze_bg2 ze_bt_ri" width="5" height="4"></td>
                    	</tr>
                    	</ui:repeat>
                    </table>
                    <!--翻页开始-->
                    <table style="height:30px; margin:40px auto 0 auto;" cellpadding="0" cellspacing="0">
                    	<tr>
                    	<s:div rendered="#{not empty goodsInfoHome.inputList}"> 
			                <s:decorate rendered="#{!goodsInfoHome.previousExists }">
			                <td><img src="#{request.contextPath}/asset/images/page_68.jpg" width="4" height="30" /></td>
			                </s:decorate>
			                 <s:decorate rendered="#{goodsInfoHome.previousExists }">
			                <td><img src="#{request.contextPath}/asset/images/page_67.jpg" width="4" height="30" /></td>
			                </s:decorate>
			                <s:decorate rendered="#{goodsInfoHome.previousExists }">
	                            <td class="td_t_b">
		                            <s:link propagation="none"  view="/product/InputsInfoList.xhtml" >首页
		                            	<f:param name="pageNum" value="0" />
		                            	<f:param name="baseidString" id="basid1" value="#{goodsInfoHome.baseidString}" />
		                            </s:link>
	                            </td>
	                            <td class="td_t_b td_t_t" style="padding:0; width:30px;">
		                            <s:link propagation="none"  view="/product/InputsInfoList.xhtml"  styleClass="no_n" >
		                            	<f:param name="pageNum" value="#{goodsInfoHome.previousFirstResult}"/>&lt;
		                            	<f:param name="baseidString" id="basid2" value="#{goodsInfoHome.baseidString}" />
		                            </s:link>
	                            </td>
	                        </s:decorate>
					        <a4j:repeat var="_page" value="#{goodsInfoHome.pageList}" rowKeyVar="_index">
								<td class="td_t_b #{goodsInfoHome.previousExists or _index >0 ?'td_t_t':''} #{_page eq goodsInfoHome.pageNum?'onp':''}">
									<s:link propagation="none"  view="/product/InputsInfoList.xhtml" value="#{_page}" id="previousPage">
										<f:param name="pageNum" value="#{_page}" />
										<f:param name="baseidString" id="basid3" value="#{goodsInfoHome.baseidString}" />
									</s:link>
								</td>
							</a4j:repeat>
							<s:decorate rendered="#{goodsInfoHome.nextExists}">
                            <td class="td_t_b td_t_t">
	                            <s:link propagation="none"  view="/product/InputsInfoList.xhtml"   styleClass="no_d" >
	                            	<f:param name="pageNum" value="#{goodsInfoHome.nextFirstResult}" />&gt;
	                            	<f:param name="baseidString" id="basid4" value="#{goodsInfoHome.baseidString}" />
	                            </s:link>
                            </td>
                            <td class="td_t_b td_t_t">
								 <s:link propagation="none"  view="/product/InputsInfoList.xhtml" >尾页
								 	<f:param name="pageNum" value="#{goodsInfoHome.PAGE_COUNT}" />
								 	<f:param name="baseidString" id="basid5" value="#{goodsInfoHome.baseidString}" />
								 </s:link>
							</td>
							</s:decorate>
							<td class="td_t_b td_t_t" style=" color:#9a9a9c;">共#{goodsInfoHome.PAGE_COUNT}页</td>
                            <td ><img src="#{request.contextPath}/asset/images/page_70.jpg" width="4" height="30" /></td>
                    	</s:div>
                    	</tr>
                    </table>
                    <!--翻页结束-->
                    <div class="clear"></div>
                </div><!--right_c结束-->
                </div>
                </div>
                 <rich:modalPanel id="products" autosized="true" height="125" width="340" headerClass="modalHeader" >
                    	<div class="ts_div2" id="div2">
        		<div class="tck_ti"><a href="#">
        			<h:outputLink value="#"  onclick="#{rich:component('products')}.hide(); return false;">
                    <img src="#{request.contextPath}/asset/images/close_17.jpg" width="20" height="20" onclick="return closeMethod()"/>
                </h:outputLink>
        		</a></div>
        	 
				<table style="width:100%; margin-top:25px; table-layout:fixed; margin-left:15px;">
                    <tr>
                    	<td width="46" align="left"><img src="#{request.contextPath}/asset/images/tstc.jpg" width="46" height="46" /></td>
                        <td align="left" style="font-family:'宋体'; color:#000000; font-size:12px; padding-left:15px;">
                        	<span id="spanValue"></span>
                        </td>
                    </tr>
                </table>
                </div>
                <h:inputHidden value="#{goodsInfoHome.baseidString}" id="baseidString" name="baseidString"/>
          </rich:modalPanel>
          <!-- 旧版导出重复记录 -->
          <rich:modalPanel id="products2" autosized="true" height="175" width="340" headerClass="modalHeader" >
                    	<div class="ts_div3" id="div2">
        		<div class="tck_ti"><a href="#">
        			<h:outputLink value="#"  onclick="#{rich:component('products2')}.hide(); return false;">
                    <img src="#{request.contextPath}/asset/images/close_17.jpg" width="20" height="20" onclick="return closeMethod()"/>
                </h:outputLink>
        		</a></div>
        	 	<h:form id="exportExcelRepeat" styleClass="upload" enctype="multipart/form-data">
					<table style="width:100%; margin-top:25px; table-layout:fixed; margin-left:15px;">
	                    <tr>
	                    	<td width="46" align="left"><img src="#{request.contextPath}/asset/images/tstc.jpg" width="46" height="46" /></td>
	                        <td align="left" style="font-family:'宋体'; color:#000000; font-size:12px; padding-left:15px;">
	                        	<span id="spanValues"></span>
	                        </td>
	                    </tr>
	                    <tr>
	                    	<td colspan="2" align="center" valign="bottom">
	                    		<s:link propagation="none"  id="upl" styleClass="edit_exte" onclick="#{rich:component('products2')}.hide();" action="#{goodsInfoforAppraisalExportList.exportExcelRepeat}"/>
	                        </td>
	                    </tr>
	                </table>
                </h:form>
                </div>
          </rich:modalPanel>
          <!-- 旧版导出重复记录 -->
		<!-- 导入物料信息 开始 -->   
		<div class="modal fade" id="excelModelDiv" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			<div class="modal-dialog kuandu" style="width:446px; margin:0; left:50%; margin-left:-223px; top:50%; margin-top:-180px; position: absolute;">
				<div class="modal-content ">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
						<h4 class="modal-title" id="myModalLabel">导入投入品信息</h4>
					</div>
					<div class="modal-body" style="padding-bottom: 30px;">							
						<div style="overflow: hidden;">
							<p style="margin-bottom: 0;overflow:hidden;">
								<span style="float:left; width:130px;margin:0 50px;text-align:center;">第一步</span>
								<span style="float:left; width:130px;text-align:center;">第二步</span>
							</p>
							<s:link style="float:left; width:130px; height:130px; margin:25px 50px 25px 50px;" propagation="none" view="/product/inputsInfoList.xhtml" action="#{goodsInfoforAppraisalExportList.inputsExportExcelAll}" >
					      		<f:param name="inputsType" value="#{goodsInfoList.inputsType}"/>
					      		<img src="#{request.contextPath}/asset/images/download_template.png" />
					      	</s:link>
							<span class="baseFile_onload" style="margin-top: 25px;">
								<h:form id="excelForm" enctype="multipart/form-data">
									<s:fileUpload id="uploadFile" accept="application/vnd.ms-excel,application/ms-excel" contentType="application/vnd.ms-excel,application/ms-excel" style="font-size:42px;"
										fileName="#{goodsInfoforAppraisalExportList.fileName}" data="#{goodsInfoforAppraisalExportList.excelFile}" onchange="changeExcelName(this.value);">
									</s:fileUpload>
									<h:commandButton id="excelTemplateImport" style="display:none;"  value="导入" action="#{goodsInfoforAppraisalExportList.importInputsExcel}" />
								</h:form>
							</span>
							<p class="excelName" style="clear: both;">文件名称：<span id="showFileName"></span></p>
							<s:span id="msgSource" style="margin-left:50px; line-height:20px; color:#f00;"></s:span>
							<s:span  style="margin-left:50px; line-height:20px;display:none;" id="exportRepeatBtn">
								<s:link propagation="none"  styleClass="edit_exte" onclick="#{rich:component('products2')}.hide();" action="#{goodsInfoforAppraisalExportList.exportExcelRepeat}"/>
							</s:span>
						</div>
					</div>
					<div class="modal-footer">
				       <a href="javascript:void(0);" class="btn btn-success" onclick="submitFile();" >确定</a>
				        <a href="javascript:void(0);" class="btn btn-default" onclick="excelModelControl(2);">返回</a>
				    </div>
				</div>
			</div>
		</div>
		<!-- 导入物料信息 结束 --> 
<!-- 	<h:panelGroup id="printId">
		<a id="clickPrintId" href="#{request.contextPath}/product/InputsInfoBarCode.seam?printGoodsIds=#{goodsInfoHome.printGoodsIds}"  target="_blank"></a>
	</h:panelGroup> -->
		<a4j:status id="ajaxStatus" forceId="true" onstart="jquery('#login').show()" onstop="jquery('#login').hide()" />
   <a4j:form>
   		<a4j:jsFunction name="queryBarcode" action="#{goodsInfoHome.barcodeInputsList()}"  reRender="barcodeId" oncomplete="showInputsModel();">
   			<a4j:actionparam name="baseidString" assignTo="#{goodsInfoHome.baseidString}"/>
   		</a4j:jsFunction>
<!--    	<a4j:jsFunction name="toPrint" action="#{goodsInfoHome.toPrintBarcode()}"  reRender="printId" oncomplete="beginPrint();">
   			<a4j:actionparam name="printGoodsIds" assignTo="#{goodsInfoHome.printGoodsIds}"/>
   		</a4j:jsFunction>--> 
	</a4j:form>    

<script type="text/javascript">

var m3="#{goodsInfoforAppraisalExportList.alertString}";
if(m3!=""){
	if(m3 == "1"){
		document.getElementById("spanValues").innerHTML = "有投入品编号重复的数据 ，是否导出重复数据？";
		#{rich:component('products2')}.show();
	}else{
		document.getElementById("spanValue").innerHTML = m3;
		#{rich:component('products')}.show();
	}
}


//richwidgets-demo.min.js 冲突改为此代码
function showGoods(obj){
	var viewCrop = jQuery(obj).parents('.gradeItems').find('.viewCrop_con');
	if(viewCrop.is(':hidden')){
		jQuery(obj).parents('.gradeItems').siblings().find('.viewCrop_con').slideUp();
		viewCrop.slideDown();	
	}else{
		viewCrop.slideUp();		
	}
}

function addLevelInfo(){
	jQuery('.AddingLevel_wap').append('<div class="appendDiv"></div>');	
	jQuery(jQuery('.AddingLevel_wap').find('.AddingLevel').first().children().find('.form-control').clone(true)).appendTo(jQuery('.AddingLevel_wap').find('.appendDiv').last());
	jQuery('.AddingLevel_wap').find('.AddingLevel').first().remove();
	jQuery('.AddingLevel_wap').append('<div class="AddingLevel"><span class="bootSelt21"><input type="text" placeholder="请输入等级名称" class="form-control"/> </span><p class="btnWap"><span class="addBtn" onclick="addLevelInfo();"></span><span class="deleteBtn" onclick="delLevelInfo();"></span></p></div>');	

	jQuery('.AddingLevel').mouseover(function(){  //批量添加等级中添加等级滑过状态
		jQuery(this).find('.btnWap').show();	
	});
	jQuery('.AddingLevel').mouseout(function(){
		jQuery(this).find('.btnWap').hide();	
	});
}
function delLevelInfo(){
	if(jQuery('.appendDiv').attr('class')!=null){
		jQuery('.AddingLevel_wap').find('.AddingLevel').last().remove();
		jQuery('.AddingLevel_wap').append('<div class="AddingLevel"><span class="bootSelt21"> </span><p class="btnWap"><span class="addBtn" onclick="addLevelInfo();"></span><span class="deleteBtn" onclick="delLevelInfo();"></span></p></div>');
		jQuery(jQuery('.AddingLevel_wap').find('.appendDiv').last().find('.form-control').clone(true)).appendTo(jQuery('.AddingLevel').find('.bootSelt21'));	
		jQuery('.AddingLevel_wap').find('.appendDiv').last().remove();

		jQuery('.AddingLevel').mouseover(function(){  //批量添加等级中添加等级滑过状态
			jQuery(this).find('.btnWap').show();	
		});
		jQuery('.AddingLevel').mouseout(function(){
			jQuery(this).find('.btnWap').hide();	
		});
	}
}
//end
</script>


</td>

<script type="text/javascript">
//对（按钮）下拉框有影响（点击会消失）
//jQuery = jQuery.noConflict();
//jQuery('.selectpicker').selectpicker(); 

</script>
<script type="text/javascript">
//<![CDATA[
           
  function setInputsType(type){
	
	if(type==2){
		jQuery("#selectBut").text('农药');
	}else if(type==3){
		jQuery("#selectBut").text('肥料');
	}else if(type==4){
		jQuery("#selectBut").text('其他');
	}else if(type==0){
		jQuery("#selectBut").text('全部');
	}else if(type==5){
		jQuery("#selectBut").text('种子');
	}
	jQuery("#productTypeSearch\\:inputsType").val(type);
	
  }
  function setInputsStockType(type){
		if(type==0){
			jQuery("#selectStockBut").text('全部');
		}else if(type==1){
			jQuery("#selectStockBut").text('库存量不足');
		}else if(type==2){
			jQuery("#selectStockBut").text('库存量充足');
		}
		jQuery("#productTypeSearch\\:inputsStockType").val(type);
		
	  }
  function changePage(){
	  jQuery("#productTypeSearch\\:inputsTypePageNum").val(1);
  }       
  //等级排序提交
  function submitLevelIndex(){
	  var leveNames = "";
	  jQuery(".ui-selectee").each(function(index){
			var dk = jquery(this).attr("data-key");
			var obj = jquery("#goodsLevel_"+dk).val();
			leveNames += obj+",";
		});
	  saveLevelIndex(leveNames);//调用AJAX保存等级排序
	  jquery('.levmodal').modal('hide');
  }
  function reqLevelBack(){	 
	  //jquery('.myModal_level').modal('hide');
  }
jQuery(function(){
	var type='#{goodsInfoHome.inputsType}';
	if(type==2){
		jQuery("#selectBut").text('农药');
	}else if(type==3){
		jQuery("#selectBut").text('肥料');
	}else if(type==4){
		jQuery("#selectBut").text('其他');
	}else if(type==5){
		jQuery("#selectBut").text('种子');
	}
	
	jquery('#plantCheck').selectpicker({size:10,dropupAuto:false});
	
	jQuery('input[class=iCheck]').iCheck({ // 单选按钮，复选框控件
		checkboxClass: 'icheckbox_minimal-blue',
	});
	var basid='#{sessionTake.getBaseModel().getBaseId()}'
	jQuery('#baseidString').val(basid);
	jQuery('#basid1').val(basid);
	jQuery('#basid2').val(basid);
	jQuery('#basid3').val(basid);
	jQuery('#basid4').val(basid);
	jQuery('#basid5').val(basid);
	
	
	jQuery('.show-tick').attr('class','btn-group bootstrap-select show-tick zzz ')
	jquery('#plantCheck').selectpicker({noneSelectedText:"全部"});
    jquery('#plantCheck').selectpicker('deselectAll');
    
//	jQuery('.selectpicker').selectpicker();  // 下拉框控件
//	jQuery(".selectpicker").selectpicker('val','0');


	jQuery('.AddingLevel').mouseover(function(){  //批量添加等级中添加等级滑过状态
		jQuery(this).find('.btnWap').show();	
	});
	jQuery('.AddingLevel').mouseout(function(){
		jQuery(this).find('.btnWap').hide();	
	});

	jQuery('#myModal_plscdj').on('hidden.bs.modal', function (e) {  //当模态框被隐藏时，关闭所有相关等级作物
		jQuery('.gradeItems').find('.viewCrop_con').hide();
	})

	
	
});

jQuery("#myModal_pltjdj").bind("click",function(){
	jQuery('.zzz').attr('class','btn-group bootstrap-select show-tick zzz ');
});

function savelevel(){
	if(jquery('#plantCheck').val()==null){
		pl=0;
	}else{
		pl=jquery('#plantCheck').val();
	}
	var le="";
	var fl=0;
	jquery('.AddingLevel_wap').find('.form-control').each(function(){
		if(jquery.trim(jquery(this).val())!=""){
			le+=jquery(this).val()+',';
			if(jquery(this).val().length>6){
				alert("抱歉，名称不能超过六个字。");
				fl=1;
			}
		}
	});
	if(fl==1){
		return false;
	}
	if(le==""){
		alert("抱歉，您还没有添加等级。");
		return false;
	}
	saveLevel(pl.toString(),le);
	jquery('.zzcontrol').attr('onclick','');
	return true;
}

function saveleveltwo(data){	
	if(data!=""){
		var msgs=data.split("@#$");
		//添加重复等级
		if(msgs[0]!=""){//恢复已添加过的等级
			if(jquery('#plantCheck').val()==null){
				pl=0;
			}else{
				pl=jquery('#plantCheck').val();
			}
			if(confirm(msgs[0])){
				saveLevelTwo(pl.toString());
			}
		}else if(msgs[1]!=""){
			alert(msgs[1]);
			jquery('.zzcontrol').attr('onclick','if(!savelevel())return false;');
		}else{
			jQuery('input[class=iCheck]').iCheck({ // 单选按钮，复选框控件
				checkboxClass: 'icheckbox_minimal-blue',
			});
			jquery('.zzcontrol').attr('onclick','if(!savelevel())return false;');
			jquery('.zzmodal').modal('hide');
			jQuery('#myModal_plscdj').on('hidden.bs.modal', function (e) {  //当模态框被隐藏时，关闭所有相关等级作物
				jQuery('.gradeItems').find('.viewCrop_con').hide();
			})
		}		
	}else if(data=="" || data=="@#$"){
		jQuery('input[class=iCheck]').iCheck({ // 单选按钮，复选框控件
			checkboxClass: 'icheckbox_minimal-blue',
		});
		jquery('.zzcontrol').attr('onclick','if(!savelevel())return false;');
		jquery('.zzmodal').modal('hide');
		
		jQuery('#myModal_plscdj').on('hidden.bs.modal', function (e) {  //当模态框被隐藏时，关闭所有相关等级作物
			jQuery('.gradeItems').find('.viewCrop_con').hide();
		})
	}
}
function huidiao(){
	jQuery('input[class=iCheck]').iCheck({ // 单选按钮，复选框控件
		checkboxClass: 'icheckbox_minimal-blue',
	});
	jquery('.zzcontrol').attr('onclick','if(!savelevel())return false;');
	jquery('.zzmodal').modal('hide');
	
	jQuery('#myModal_plscdj').on('hidden.bs.modal', function (e) {  //当模态框被隐藏时，关闭所有相关等级作物
		jQuery('.gradeItems').find('.viewCrop_con').hide();
	})
}
function addLev(){
	jQuery('.AddingLevel_wap').children().remove();
	jQuery('.AddingLevel_wap').append('<div class="AddingLevel"><span class="bootSelt21"><input type="text" placeholder="请输入等级名称" class="form-control"/> </span><p class="btnWap"><span class="addBtn" onclick="addLevelInfo();"></span><span class="deleteBtn" onclick="delLevelInfo();"></span></p></div>');	
	jQuery('.AddingLevel').mouseover(function(){  //批量添加等级中添加等级滑过状态
		jQuery(this).find('.btnWap').show();	
	});
	jQuery('.AddingLevel').mouseout(function(){
		jQuery(this).find('.btnWap').hide();	
	});
	jQuery('.show-tick').attr('class','btn-group bootstrap-select show-tick zzz ');
	jquery('#plantCheck').selectpicker({noneSelectedText:"全部"});
    jquery('#plantCheck').selectpicker('deselectAll');
}

function huidiao2(){
	jQuery('input[class=iCheck]').iCheck({ // 单选按钮，复选框控件
		checkboxClass: 'icheckbox_minimal-blue',
	});
	jQuery('.AddingLevel').mouseover(function(){  //批量添加等级中添加等级滑过状态
		jQuery(this).find('.btnWap').show();	
	});
	jQuery('.AddingLevel').mouseout(function(){
		jQuery(this).find('.btnWap').hide();	
	});
	jQuery('#myModal_plscdj').on('hidden.bs.modal', function (e) {  //当模态框被隐藏时，关闭所有相关等级作物
		jQuery('.gradeItems').find('.viewCrop_con').hide();
	})
}
function alldeleted(){
	jquery('.gradeList_wap .icheckbox_minimal-blue').attr('class','icheckbox_minimal-blue');
}

if (m3 != null && m3 != '') {
	excelModelControl(1);
	jQuery("#showFileName").html("");
	if(m3=="1"){
		//有物料编号重复的数据 ，是否导出重复数据？
		jQuery("#msgSource").html("导入文件中有投入品编号重复的数据");
		//jQuery("#exportRepeatBtn").css("display","");
	}else{
		jQuery("#msgSource").html(m3);
		//jQuery("#exportRepeatBtn").css("display","none");
	}		
}

//excelImport 控制
function importInit(){
	jQuery("#showFileName").html("");
	jQuery("#msgSource").html("");
	excelModelControl(1);
}
//excel模版div控制
function excelModelControl(type){
	if (type == 1) {
		jquery("#excelModelDiv").modal('show');
	} else {
		jquery("#excelModelDiv").modal('hide');
	}
}

//获取文件名称
function changeExcelName(excelName){
	jQuery("#showFileName").html(excelName);
}

//确定提交excel
function submitFile(){
	var fileName = jQuery("#excelForm\\:uploadFile").val();
	if (fileName == null || fileName == '') {
		alert("请选择上传文件！");
	} else {
		 var msg = fileName.substring(fileName.lastIndexOf("."), fileName.length);
		 if (msg == ".xls") {	
			 jquery("#login").show();   		 
			jQuery("#excelForm\\:excelTemplateImport").trigger('click');	
		} else {
			alert("上传文件格式不正确！");
		}
	}
}
//打印条形码 控制
function printBarcode(){
	var baseidString = jQuery('#baseidString').val();
	queryBarcode(baseidString);
}
function showInputsModel(){
	jquery("#AddMaterial").modal('show');
}
//等级排序提交
function submitids(){
	var printGoodsIds = "";
	jquery(".ui-selectee").each(function(index){
		var dk = jquery(this).attr("data-key");
		var obj = jquery("#goodsId_"+dk).val();
		printGoodsIds += obj+",";
	});
	if(printGoodsIds!=""){
		printGoodsIds = printGoodsIds.substring(0, printGoodsIds.length - 1);
		jquery('#modal_level').modal('hide');
		window.location.href="#{request.contextPath}/product/InputsInfoBarCode.seam?printGoodsIds="+printGoodsIds+"&target='_blank'";
		/* toPrint(printGoodsIds); */
	}else{
		alert("没有选择投入品！");
	}
}
/* function beginPrint(){
	var myhref = jquery('#clickPrintId');
	myhref.click();
} */
//]]>
</script>
	</ui:define>

</ui:composition>

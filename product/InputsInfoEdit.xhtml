<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:a="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich"
    template="/layout/template_new.xhtml">
	<ui:define name="body">
	#{goodsInfoHome.inputsDataInit()}
	<link href="#{request.contextPath}/asset/css/devotion.css" rel="stylesheet" type="text/css"></link>
	<link type="text/css" rel="stylesheet" href="#{request.contextPath}/asset/css/settings/EnterpriseSettings.css" />
    <script type="text/javascript" src="#{request.contextPath}/asset/js/EnterpriseLeftMenu.js"></script>
	<!-- <link href="/asset/css/inputs/bootstrap-select.min.css" rel="stylesheet" type="text/css"></link>
	<link href="/asset/css/inputs/bootstrap3.min.css" rel="stylesheet" type="text/css"></link> -->
	
	   <!---弹出框2开始-->
		<style>
		.form-control{
			float:left;
		}
		.goodSelect20 .bootstrap-select:not([class*="span"]):not([class*="col-"]):not([class*="form-control"]):not(.input-group-btn){ width:100px; margin-right:0;}
		
		/*导入样式*/	
		.modal .modal-header .close, .modal .modal-header .close:link {background:  url("../asset/images/farmingIco16.jpg") no-repeat scroll 0 0; border: medium none;float: right;height: 11px;margin-top: 5px;opacity: 1;width: 11px;filter:alpha(opacity=100);}
		.modal .modal-header .close:hover, .modal-header .close:focus {background:  url("../asset/images/farmingIco17.jpg") no-repeat scroll 0 0;opacity: 1;filter:alpha(opacity=100);width:11px;}
		
		.baseFile_onload{ display:block; float:left; width:130px; height:130px; margin:25px 50px 25px 0;border:none;background: url("../asset/images/farmingIco15.jpg") no-repeat scroll 0 0; cursor:pointer;}
		.baseFile_onload:hover{ background: url("../asset/images/farmingIco15.jpg") no-repeat scroll 0 0; border:none;}
		.baseFile_onload input{ position:absolute; right:0; top:0; width:130px; height:130px; opacity:0; filter:alpha(opacity=0); cursor:pointer;}
		
		.dr-pnl {
		    padding: 0px;
		    border: none;
		}
		.dr-pnl-b {
		    padding: 0px;
		    border: none;
		}
		.kuanDu {width: 510px; left: 50%; margin-left: -255px; top: 50%; margin-top: -234px; margin-bottom: 0; position: absolute;}
		.nw221 {width: 221px;}
		.modal-body table td {padding: 10px 0;}
		.modal-body table td.rys {text-align: right; padding-right: 15px;}
		.yuan{position: absolute; top: 81px;right: 135px;}
		/* 弹窗 */
.farmingInputs_mini{ position:absolute; top:54px; left:0; z-index:10; width:346px; border:1px solid #e5e5e5; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5); background-clip: padding-box; background-color: #fff; border: 1px solid rgba(0, 0, 0, 0.2); border-radius:6px; outline: 0 none;}
.farmingInputs_mini{ display:none;}
.farmingInputs_miniHd{ overflow:hidden; border-bottom:1px solid #e5e5e5; min-height:16.43px; padding:15px;}
.farmingInputs_miniHd .butt{ float:right; width:11px; height:11px; margin-top:3px; background:url(../images/farmingIco16.jpg) no-repeat; border:none; zoom:1;}
.farmingInputs_miniHd .butt:hover, .farmingInputs_miniHd .butt:focus{ background-image:url(../images/farmingIco17.jpg); zoom:1;}
.farmingInputs_miniHd h3{ float:left; font-size:14px; margin:0;}
.farmingInputs_miniHd button{ float:right; width:11px; height:11px; margin-top:3px; background:url(../images/farmingIco16.jpg) no-repeat; border:none; zoom:1;}
.farmingInputs_miniHd button:hover, .farmingInputs_miniHd button:focus{ background-image:url(../images/farmingIco17.jpg); zoom:1;}
.farmingInputs_miniBd{ position:relative; padding:20px 15px 0;}
.farmingInputs_miniBd td{ padding-bottom:20px; height:34px; line-height:34px;}
.farmingInputs_miniBd .bootstrap-select.btn-group:not(.input-group-btn), .bootstrap-select.btn-group[class*="span"]{ float:left; display:inline; margin-right:5px;}
.farmingInputs_miniBd .bootstrap-select > .btn{ width:190px; padding:7px 12px;}
.farmingInputs_add2{ float:left; width:34px; height:34px; background:url(../images/farmingIco14.jpg) no-repeat; border:none;}
.farmingbgIco18{ width:64px; height:30px; line-height:30px; border:none; padding:0 10px 0 12px; font-size:12px; zoom:1; background:none; float:left;}
.farmingInputs_add3{ float:left; width:130px; height:130px;background:url(../images/farmingIco15.jpg) no-repeat; border:none;}
.farmingInputs_miniFt{ padding:15px; border-top: 1px solid #e5e5e5; text-align:right; overflow:hidden;}
.farmingInputs_miniFt button{ margin-left:5px; float:right;}
.bt100 .bootstrap-select.btn-group .dropdown-menu.inner{height: 300px;}
/* 结束 */
		</style>
<!---弹出框2结束-->
	   <div class="box_back" id="login" style="display: none; z-index: 1000">
				<div id="login2"
					style="width: 60px; height: 60px; margin: 220px auto 0 auto;">
					<img src="../asset/images/loginda.gif" />
				</div>
			</div>
                <td valign="top">
                <div class="inbentory_file_main">
                <!--左侧二级导航 -->
                <div class="inbentory_level_wap">
                    <div class="inbentory_level">
                        <strong class="inben_first inben_first2">
                            <a href="javascript:;"><i class="icon_L icon_rkgl"></i>基础设置</a><b class="b_arrow"></b>
                        </strong>
                        <ol class="inben_second">
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/user/UpdateEnterpriseSettings.seam?enterpriseId=#{sessionTake.enterpriseInfoId}','_self')" >
                            	<i class="icon_sed"></i>企业设置                   	
                            </li>
                            <!-- 管理版和以前的版本（标准、白金...)显示 -->
                            <h:panelGroup rendered="#{sessionTake.nowVersionService.basicService.basicServiceId==10 or sessionTake.nowVersionService.basicService.serviceType eq 1}">
                            	<li class="sed_item" onclick="window.open('#{request.contextPath}/user/ModuleSettings.seam','_self')" ><i class="icon_sed"></i>模块配置</li>
                            </h:panelGroup>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/dictionary/DataDicinfoList.seam','_self')" ><i class="icon_sed"></i>字段管理</li>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/user/EnterpriseCommunityList.seam','_self')" ><i class="icon_sed"></i>角色管理</li>
                            <s:fragment rendered="#{enterpriseInfoHome.enterpriseInfo.govState}">
	                        	<li class="sed_item" onclick="window.open('#{request.contextPath}/user/AuditInformationList.seam','_self')" ><i class="icon_sed"></i>审核信息</li>
	                        </s:fragment>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/system/RecycleInfoList_1.seam','_self')" ><i class="icon_sed"></i>回收站</li>
                        </ol>
                        <strong class="inben_first inben_first2">
                            <a href="javascript:;"><i class="icon_L icon_ckgl"></i>生产管理设置</a><b class="b_arrow"></b>
                        </strong>
                        <ol class="inben_second">
                            <h:panelGroup rendered="#{s:hasRole('certification')}">
                            	<li class="sed_item" onclick="window.open('#{request.contextPath}/map/CertificationList.seam','_self')" ><i class="icon_sed"></i>认证信息</li>
                            </h:panelGroup>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/message/TunnelGroupList.seam','_self')" ><i class="icon_sed"></i>分组管理</li>
                            <li class="sed_item sed_cur" onclick="window.open('#{request.contextPath}/product/InputsInfoList.seam?goodsTypeInfoId=5','_self')" ><i class="icon_sed"></i>投入品信息</li>
                        </ol>
                        <strong class="inben_first inben_first2">
                            <a href="javascript:;"><i class="icon_L icon_zkgl"></i>销售管理设置</a><b class="b_arrow"></b>
                        </strong>
                        <ol class="inben_second">
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/product/GoodsInfoList.seam','_self')"><i class="icon_sed"></i>物料信息</li>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/product/ProductInfoList.seam','_self')" ><i class="icon_sed"></i>商品信息</li>
                        </ol>
                        <strong class="inben_first inben_first2">
                            <a href="javascript:;"><i class="icon_L icon_pdgl"></i>硬件管理设置</a><b class="b_arrow"></b>
                        </strong>
                        <ol class="inben_second">
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/device/DeviceList.seam','_self')"><i class="icon_sed"></i>设备管理</li>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/device/VideoList.seam','_self')" ><i class="icon_sed"></i>视频管理</li>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/farming/AmRfidInfoList.seam','_self')" ><i class="icon_sed"></i>RFID卡管理</li>
                        </ol>
                    </div>
                    <i class="collapse_btn"></i>
                </div>
                <!--左侧二级导航 -->
				<!--右侧 -->
                <div class="inbentory_content">
				<!-- Modal -->
				<div aria-hidden="false" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="myModal" class="modal fade in w600na" style="display: none;">
				  <div class="modal-dialog">
				    <div class="modal-content">
				      <div class="modal-header">
				        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				        <h4 class="modal-title" id="myModalLabel">提示框</h4>
				      </div>
				      <div class="modal-body">
				       <span id="spanValue">*号部分为必填项！</span>
				        
				        
				      </div>
				      <div class="modal-footer">
				        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
				        <button type="button" class="btn btn-primary" data-dismiss="modal">确认</button>
				      </div>
				    </div>
				  </div>
				</div>
	<h:form id="productInfo" enctype="multipart/form-data">
	<h:inputHidden id="goodsTypeInfo" value="#{goodsInfoHome.inputsInfo.goodsTypeInfo}" />
	<h:inputHidden value="#{goodsInfoHome.baseidString}" id="baseidString" name="baseidString"/>
	
                <div class="right_c" style="min-height:30px;">
                	<div class="r_title">
                    	<div class="r_t_l"><font size="3">投入品信息</font></div>
                    </div>
                    <div class="clear">
                        <div class="item">
                            <table>
                                <tr>
                                    <td class="former">投入品编号</td>
                                    <td width="215">
                                    <h:inputText id="goodsCode"  readonly="#{facesContext.renderResponse}"
						                        maxlength="50"  styleClass="form-control nw221" style="margin-right:0px;"
						                          value="#{goodsInfoHome.inputsInfo.goodsCode}">
						                </h:inputText>
                                    </td>
                                    <td style="color:red;">*</td>
                                </tr>
                            </table>
                        </div>
                        <div class="item">
                            <table>
                                <tr>
                                    <td class="former">投入品名称</td>
                                    <td width="215"><h:inputText id="barcode"  maxlength="50"
						                        styleClass="form-control nw221" style="margin-right:0px;"
						                          value="#{goodsInfoHome.inputsInfo.name}">
						                </h:inputText></td>
                                    <td style="color:red;">*</td>
                                </tr>
                            </table>
                        </div>
                        <div class="item">
                            <table>
                                <tr>
                                    <td class="former">投入品类型</td>
                                    <td width="215">
                                        <div >
                                            <!-- <h:selectOneMenu styleClass="selectpicker" id="record_type" style="width: 180px;"  onchange="">
                                    		<f:selectItem itemLabel="农药" itemValue="2"/>
			                   				<f:selectItem itemLabel="肥料" itemValue="3"/>
			                   				<f:selectItem itemLabel="其他" itemValue="4"/>
			                   				</h:selectOneMenu> -->
			                   				<select class="selectpicker" id="record_type" onchange="trplx();">
                    							<option value="-1">请选择</option>
					                    		<a:repeat value="#{goodsInfoHome.typeList}" var="_inputsType" rowKeyVar="_index">
					                    			<s:fragment rendered="#{_inputsType[2]}">
							                    	<option value="#{_inputsType[0]}" disabled="disabled">#{_inputsType[1]}</option>
					                    			</s:fragment>
					                    			<s:fragment rendered="#{!_inputsType[2]}">
					                    			<option value="#{_inputsType[0]}">#{_inputsType[1]}</option>
					                    			</s:fragment>
					                    		</a:repeat>
                    						</select>
			                   				<h:inputHidden value="#{goodsInfoHome.inputsInfo.inputsTypeId}" id="inputstypeHidden"/>
			                   				<h:inputHidden value="#{goodsInfoHome.inputsInfo.inputsType}" id="inputsTypeTotalHidden"/>
                                        </div>    
                                    </td>
                                    <td style="color:red;">*</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <div class="clear">
                        <div class="item" style="width:640px;">
                            <table>
                                <tr>
                                    <td class="former">投入品规格</td>
                                    <td width="110">
                                    <h:inputText id="netContent"  maxlength="50"
						                        styleClass="form-control nw90 fl" style="margin-right:10px;"
						                          value="#{goodsInfoHome.inputsInfo.netContent}">						                         
						                </h:inputText>
                                        <!-- <input type="text" class="form-control" value="" style="width:100px;"/> -->
                                    </td>
                                    <td width="105">
                                        <div class="bt100">
                                            <h:selectOneMenu styleClass="selectpicker" id="goodsUnitSelect"  value="#{goodsInfoHome.inputsInfo.goodsUnit}">
				                   				<s:selectItems value="#{goodsInfoHome.getAllInputsUnit()}" var="unit" label="#{unit.name}" itemValue="#{unit.id}"/>
				                   			</h:selectOneMenu>
				                   			<h:inputHidden value="#{goodsInfoHome.goodsUnit}" id="goodsUnitHidden"/>
                                        </div>    
                                    </td>
                                    <td width="11">/</td>
                                    <td width="135">
                                    	
										<h:inputText id="packSpec"  maxlength="50"
						                        styleClass="form-control nw90" style="margin-right:0px;"
						                          value="#{goodsInfoHome.inputsInfo.packSpec}">
						                </h:inputText>
                                    
                                        <!-- <input type="text" class="form-control" value="" style="width:130px;"/> -->
                                    </td>
                                    <td  width="11" style="color:red;">*</td>
                                    <td>(净含量 单位规格/包装规格)</td>
                                </tr>
                                <tr><td></td><td colspan="3" style="color:red;">投入品规格在提交投入品信息后不可修改！</td></tr>
                            </table>
                        </div>
                        <div class="item">
                            <table>
                                <tr>
                                    <td class="former">保质期</td>
                                    <td width="215">
                                    <h:inputText id="expirationDate"  styleClass="form-control nw221" maxlength="11"
						                          value="#{goodsInfoHome.inputsInfo.expireDate}" style="margin-right:0px;"/>
						             </td>
                                    <td width="17">月</td>
                                    <td style="color:red;">*</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <div class="clear">
                        <div class="item">
                            <table>
                                <tr>
                                    <td class="former">存储类型</td>
                                    <td width="215">
                                        <div class="bt210">
                                            <h:selectOneMenu styleClass="selectpicker" id="productType" style="" value="#{goodsInfoHome.goodsStorageTypeId}">
			                   				<s:selectItems value="#{goodsInfoHome.goodsStorgeTypeList()}" var="plant" label="#{plant.name}" itemValue="#{plant.goodsStorageTypeId}"/>
			                   			</h:selectOneMenu>
                                        </div>    
                                    </td>
                                    <td style="color:red;">*</td>
                                </tr>
                            </table>
                        </div>
                        <div class="item">
                            <table>
                                <tr>
                                    <td class="former">适用标准</td>
                                    <td width="215">
                                        <div class="bt210">
	                                        <select class="selectpicker" id="trpbiaozhun3" multiple="multiple">
	                                        	<a:repeat value="#{goodsInfoHome.standardList}" var="_stand" rowKeyVar="_index">
	                                        		<option value="#{_stand[0]}">#{_stand[1]}</option>
	                                        	</a:repeat>
					                    	</select>
					                    	<h:inputHidden value="#{goodsInfoHome.inputsInfo.dataDicId}" id="inputsDataDicHidden"/>
                                        </div>    
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="item qita" style="display:none" >
                            <table>
                                <tr>
                                    <td class="former" >安全库存</td>
                                    <td width="215">
                                    	<h:inputText id="securityCount"  styleClass="form-control nw221" maxlength="11"
						                          value="#{goodsInfoHome.securityCountQiTa}" style="margin-right:0px;"/>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <div class="clear" style="padding-top:20px;">
                       <table>
                                <tr>
                                    <td class="all_te">图片&nbsp;&nbsp; </td>
                                    <td align="left">
										<h:inputHidden value="#{goodsInfoHome.url}" id="url" name="url"/>
                    					<iframe src="#{request.contextPath}/product/AddInputsImage.seam?url=#{goodsInfoHome.url}" id="myframe" class="fl" name="myframe" frameBorder="0" scrolling="no" width="130" onLoad="" ></iframe>
						            </td>
						             <td align="left" style="padding-left:10px;">	
						             	<span id="uploadMsg">未选择任何文件</span><br />
										<span><font color="#FF0000">支持格式：jpg,gif,png,jpeg,bmp,3gp。图片大小不可以超过1M！</font></span>
						            </td>
                                </tr>
                            </table>
                    </div>
                    <div class="clear">
                        <div class="item">
                            <table>
                                <tr >
                                    <td class="former">生产厂家</td>
                                    <td width="215">
                                    <h:inputText id="manufacturers" value="#{goodsInfoHome.inputsInfo.manufacturers}" class="form-control nw210"/>
                                    </td>
                                    <td style="color:red;">*</td>
                                </tr>
                            </table>
                        </div>
                        <div class="item">
                            <table>
                            
                                <tr class="nongyao" style="display:none" ><!-- 农药 -->
                                    <td class="former">有效成份</td>
                                    <td width="215"><h:inputText id="activeIngredients" value="#{goodsInfoHome.pesticidesRecord.activeIngredients}" class="form-control nw210"/></td>
                                </tr>
                                
                                <tr class="feiliao" style="display:none">
                                    <td class="former">登记证号</td><!-- 肥料 -->
                                    <td width="215"><h:inputText id="registrationNo" value="#{goodsInfoHome.fertilizersRecord.registrationNo}" class="form-control nw210"/></td>
                                </tr>
                                
                            </table>
                            
                        </div>
                        <div class="item">
                             <table>
                                <tr class="nongyao" style="display:none">
                                    <td class="former">安全间隔期</td><!-- 农药 -->
                                    <td width="215"><h:inputText id="safetyInterval" value="#{goodsInfoHome.pesticidesRecord.safetyInterval}" class="form-control nw210"/></td>
                                </tr>
                                
                                 <tr class="feiliao" style="display:none">
                                    <td class="former">养份含量</td><!-- 肥料 -->
                                    <td width="215"><h:inputText id="nutrientContent" value="#{goodsInfoHome.fertilizersRecord.nutrientContent}" class="form-control nw210"/></td>
                                </tr>
                                
                            </table>
                        </div>
                    </div>
                     <div class="clear">
                        <div class="item">
                            <table>
                                <tr class="nongyao" style="display:none">
                                    <td class="former">防治对象</td><!-- 农药 -->
                                    <td width="215"><h:inputText id="controlObjects" value="#{goodsInfoHome.pesticidesRecord.controlObjects}" class="form-control nw210"/></td>
                                </tr>
                                
                                <tr class="feiliao" style="display:none">
                                    <td class="former">适用作物</td><!-- 肥料 -->
                                    <td width="215"><h:inputText id="crops" value="#{goodsInfoHome.fertilizersRecord.crops}" class="form-control nw210"/></td>
                                </tr>
                            </table>
                        </div>
                        <div class="item">
                            
                            <table>
                                <tr class="nongyao" style="display:none">
                                    <td class="former">使用方法</td><!-- 农药 -->
                                    <td width="215"><h:inputText id="nyMethod" value="#{goodsInfoHome.pesticidesRecord.applicationMethod}" class="form-control nw210"/></td>
                                </tr>
                                
                                <tr class="feiliao" style="display:none">
                                    <td class="former">施用方法</td><!-- 肥料 -->
                                    <td width="215"><h:inputText id="flMethod" value="#{goodsInfoHome.fertilizersRecord.applicationMethod}" class="form-control nw210"/></td>
                                </tr>
                            </table>
                        </div>
                        <div class="item">
                             <table>
                                <tr class="nongyao" style="display:none">
                                    <td class="former">安全库存</td><!-- 农药 -->
                                    <td width="215"><h:inputText id="nongyaoSecurity" value="#{goodsInfoHome.securityCountNongYao}" class="form-control nw210"/></td>
                                </tr>
                                
                                 <tr class="feiliao" style="display:none">
                                    <td class="former">安全库存</td><!-- 肥料 -->
                                    <td width="215"><h:inputText id="feiliaoSecurity" value="#{goodsInfoHome.securityCountFeiLiao}" class="form-control nw210"/></td>
                                </tr>
                                
                            </table>
                        </div>
                    </div>
                    <div class="clear" style="padding-top:20px;">
                        <table>
                            <tr>
                                <td class="former">备注</td>
                                <td><h:inputTextarea id="description" styleClass="form-control nw420" rows="3"  value="#{goodsInfoHome.inputsInfo.description}" /></td>
                            </tr>
                        </table>
                    </div>
                    <div class="anniu">
                        <h:commandButton id="persist" value="提交" styleClass="btn btn-primary" action="#{goodsInfoHome.inputsAdd}" rendered="#{goodsInfoHome.inputsInfo.goodsInfoId eq null}"  onclick="return checkSubmit()"/>
		            	<h:commandButton id="update" value="提交" styleClass="btn btn-primary" action="#{goodsInfoHome.inputsupdate}" rendered="#{goodsInfoHome.inputsInfo.goodsInfoId ne null}"   onclick="return checkSubmit()"/>
		            	<s:button view="/product/InputsInfoList.seam" styleClass="btn btn-default" value="返回" id="bn_left6" style="margin-left:10px" onclick="showImg();">
		            	<f:param name="pageNum" value="#{goodsInfoHome.pageNum}" />
		            	<f:param name="goodsTypeInfoId" value="5"/>
		            	<f:param name="baseidString" value="#{goodsInfoHome.baseidString}" />
		            	<f:param name="inputsType" value="#{goodsInfoHome.inputsType}"/>
		            	</s:button>
                    </div>
                </div>   
                </h:form>
                </div>
                </div>
            </td>  
              <a:form>
                	<a:queue  ignoreDupResponses="true"/>
				 	<a:jsFunction name="getGoodsCode"  action="#{goodsInfoHome.getInputsInfoCode()}" data="#{goodsInfoHome.goodsCode}" oncomplete="changeGoodsCode(data)" >
		           		<a:actionparam name="gt" assignTo="#{goodsInfoHome.goodsType}"/>
		           		<a:actionparam name="gtc" assignTo="#{goodsInfoHome.goodsTypeCode}"/>
			   		</a:jsFunction>
			   		<a:jsFunction name="changePage" action="#{goodsInfoHome.changePage}" data="#{goodsInfoHome.totalInputsType}" oncomplete="">
						<a:actionparam name="type" assignTo="#{goodsInfoHome.type}"/>
					</a:jsFunction>
				</a:form>
    <!--右边结束-->   
   
 <!--添加按钮结束-->
<script type="text/javascript">
//<![CDATA[
           function showImg(){
        	   jquery("#login").show();
           }
           var promptMessage = "#{goodsInfoHome.promptMessage}";
			if(promptMessage != ""){
				document.getElementById("spanValue").innerHTML = promptMessage;
				jquery("#myModal").modal('show');
			}
           var m3="#{goodsInfoHome.chongfu}";
		   if(m3!=""){
			document.getElementById("spanValue").innerHTML = m3;
			jquery("#myModal").modal('show');
		   }

			jquery(function(){
				var id='#{goodsInfoHome.inputsInfo.goodsInfoId}';
				var inp='#{goodsInfoHome.inputsInfo.inputsType}';
				var inputsTypeId='#{goodsInfoHome.inputsInfo.inputsTypeId}';
				var dataDicIds='#{goodsInfoHome.inputsInfo.dataDicId}';
				jquery("#trpbiaozhun3").selectpicker({noneSelectedText:"请选择"});
				if(id!=''){
					jquery('#record_type').val(inputsTypeId);
					if(dataDicIds != null && dataDicIds != ''){
						var v = new Array();
						v = dataDicIds.split(",");
						jquery("#trpbiaozhun3").selectpicker("val",v);
					}
					var netContent = '#{goodsInfoHome.inputsInfo.netContent}';
					var goodsUnitSelect = '#{goodsInfoHome.inputsInfo.goodsUnit}';
					var packSpec = '#{goodsInfoHome.inputsInfo.packSpec}';

					if((netContent != '' && netContent != '0.0' && netContent != '0') || (goodsUnitSelect !='' && goodsUnitSelect !='0') || packSpec!=''){
						jquery('#productInfo\\:netContent').attr({"readonly":"readonly"});
						jquery('#productInfo\\:goodsUnitSelect').attr({"disabled":"false"});
						jquery('#productInfo\\:packSpec').attr({"readonly":"readonly"});
					}
					
					if(inp == 4){
						
						jquery('#productInfo\\:record_type').attr({"disabled":"false"});
					}
				}
				var data='#{goodsInfoHome.inputsTypeId}';
				hdchange(data);
				
			});
           
           function checkInteger(obj){
			  if(obj.value!=""){
				var v = obj.value;
				var reg = /^[1-9]+[0-9]*]*$/; 
					if (!reg.test(v)){
						return false;
					}
			  }
						return true;
			}
			function trplx(){
				var type=jquery('#record_type').val();
				jquery("#productInfo\\:inputstypeHidden").val(type);
				changePage(type);
			}
			
			function trpsy(){
				var shiyong=jquery('#dataDic').val();
				jquery("#productInfo\\:inputsDataDicHidden").val(shiyong);
			}
			
			function hdchange(data){
				if(data==2){
					jquery('.nongyao').each(function(){
						jquery(this).css("display","block");
					});
					jquery('.feiliao').each(function(){
						jquery(this).css("display","none");
					});
					jquery("#productInfo\\:inputsTypeTotalHidden").val(data);
				}else if(data==3){
					jquery('.nongyao').each(function(){
						jquery(this).css("display","none");
					});
					jquery('.feiliao').each(function(){
						jquery(this).css("display","block");
					});
					jquery("#productInfo\\:inputsTypeTotalHidden").val(data);
				}else if(data==4){
					jquery('.nongyao').each(function(){
						jquery(this).css("display","none");
					});
					jquery('.feiliao').each(function(){
						jquery(this).css("display","none");
					});
					jquery('.qita').each(function(){
						jquery(this).css("display","block");
					});
					jquery("#productInfo\\:inputsTypeTotalHidden").val(data);
				}
				else{
					jquery('.nongyao').each(function(){
						jquery(this).css("display","none");
					});
					jquery('.feiliao').each(function(){
						jquery(this).css("display","none");
					});
					jquery("#productInfo\\:inputsTypeTotalHidden").val(data);
				}
			}
			
           function checkSubmit(){
        	   jquery('#productInfo\\:inputsDataDicHidden').val(jquery("#trpbiaozhun3").val());
        	   jquery('#record_type').val(jquery("#productInfo\\:inputstypeHidden").val());
        	   
        	   jquery('#productInfo\\:goodsUnitHidden').val(jquery('#productInfo\\:goodsUnitSelect').val());
        	   
        	   jquery('#productInfo\\:url').val(jquery("#myframe").contents().find(".plant_imgbd").attr('src'));
        	   
        	   jquery("#productInfo\\:goodsTypeInfoId").val('5');
        	   var a1 =  document.getElementById("productInfo:goodsCode").value;
               var b1 =  document.getElementById("productInfo:barcode").value;

	           if(jquery("#record_type").val() == null || jquery("#record_type").val() == '' || jquery("#record_type").val() == -1){
	        	   document.getElementById("spanValue").innerHTML = "投入品类型必须选择！";
        		   jquery("#myModal").modal('show');return false;
		       }
               if(jquery('#productInfo\\:productType').val()==null){
            	   document.getElementById("spanValue").innerHTML = "请添加存储类型";
        		   jquery("#myModal").modal('show');return false;
               }
        	   if(a1==""){
        		   document.getElementById("spanValue").innerHTML = "投入品编号不能为空";
        		   jquery("#myModal").modal('show');return false;
        	   }
        	   if(a1.length>22){
        		   document.getElementById("spanValue").innerHTML = "投入品编号输入过长";
        		   jquery("#myModal").modal('show');return false;
        	   }
        	   var arr = new Array();
        	   arr = a1.split("");
        	   var bhnum = 1;
        	   for(var i=0; i<arr.length ;i++){
            	   if(!isNaN(arr[i])){
            		   bhnum++;
                	}
        	   }
        	   if(bhnum>20){
        		   document.getElementById("spanValue").innerHTML = "投入品编号输入数字不能超过20位";
        		   jquery("#myModal").modal('show');return false;
            	}
        	   if(trim(b1)==""){
        		   document.getElementById("spanValue").innerHTML = "投入品名称不能为空";
        		   jquery("#myModal").modal('show');return false;
        	   }
        	   if(b1.length>20){
        		   document.getElementById("spanValue").innerHTML = "投入品名称输入过长";
        		   jquery("#myModal").modal('show');return false;
        	   }
        	   var expDate=document.getElementById("productInfo:expirationDate").value;
        	   var c1 = checkInteger(document.getElementById("productInfo:expirationDate"));
				if(expDate==""){
					document.getElementById("spanValue").innerHTML = "保质期不能为空";
	        		   jquery("#myModal").modal('show');return false;
				}else if(!c1){
        		   document.getElementById("spanValue").innerHTML = "请填写正确的保质期数字";
        		   jquery("#myModal").modal('show');return false;
        	   }
				var inputsType = jquery("#productInfo\\:inputsTypeTotalHidden").val();
				var packSpec=document.getElementById("productInfo:packSpec").value;
	           if(inputsType!=4){
		           var netContent=document.getElementById("productInfo:netContent").value;
		           if(netContent == ''){
		        	   document.getElementById("spanValue").innerHTML = "净含量不能为空";
	        		   jquery("#myModal").modal('show');return false;
			       }else if( isNaN(netContent) && ""!=netContent){
		        	   document.getElementById("spanValue").innerHTML = "请填写正确的净含量";
	        		   jquery("#myModal").modal('show');return false;
			       }else if(netContent > 99999){
			   			jquery("#spanValue").html("净含量输入过大!");
			   			jquery("#myModal").modal('show');
			   			return false;
		   			}
					if(packSpec == ''){
						document.getElementById("spanValue").innerHTML = "包装规格不能为空";
		        		jquery("#myModal").modal('show');return false;
					}
					
	           }
	           //alert(packSpec.length+'-----');
	           if(packSpec!='' && packSpec.length>20){
					document.getElementById("spanValue").innerHTML = "包装规格输入过长";
	        		jquery("#myModal").modal('show');return false;
				}
				 
				var sccj = jquery("#productInfo\\:manufacturers").val();
				if(sccj == null || sccj == ''){
					document.getElementById("spanValue").innerHTML = "生产厂家不可为空！";
	        		jquery("#myModal").modal('show');return false;
				}
				if(sccj!='' && sccj.length>50){
					document.getElementById("spanValue").innerHTML = "生产厂家输入过长";
	        		jquery("#myModal").modal('show');return false;
				}
				var description = jquery("#productInfo\\:description").val();
				if(description!='' && description.length>200){
					document.getElementById("spanValue").innerHTML = "备注输入过长";
	        		jquery("#myModal").modal('show');return false;
				}
				if(inputsType == 2){
					var yxcf = jquery("#productInfo\\:activeIngredients").val();//有效成分
// 					var nylx = jquery("#productInfo\\:pesticidesType").val();//农药类型
					var aqglq = jquery("#productInfo\\:safetyInterval").val();//安全间隔期
					var fzdx = jquery("#productInfo\\:controlObjects").val();//防治对象
					var syff = jquery("#productInfo\\:nyMethod").val();//使用方法
					if(yxcf!='' && yxcf.length>20){
						document.getElementById("spanValue").innerHTML = "有效成份输入过长";
		        		jquery("#myModal").modal('show');return false;
					}
// 					if(nylx!='' && nylx.length>20){
// 						document.getElementById("spanValue").innerHTML = "农药类型输入过长";
// 		        		jquery("#myModal").modal('show');return false;
// 					}
// 					var aqglq_pd = checkInteger(aqglq);
					if(aqglq!='' && isNaN(aqglq)){
						document.getElementById("spanValue").innerHTML = "安全间隔期必须为数字";
		        		jquery("#myModal").modal('show');return false;
					}
					if(fzdx!='' && fzdx.length>100){
						document.getElementById("spanValue").innerHTML = "防治对象输入过长";
		        		jquery("#myModal").modal('show');return false;
					}
					if(syff!='' && syff.length>200){
						document.getElementById("spanValue").innerHTML = "使用方法输入过长";
		        		jquery("#myModal").modal('show');return false;
					}
				}else if(inputsType == 3){
					var yxcf = jquery("#productInfo\\:registrationNo").val();//登记证号
					var nylx = jquery("#productInfo\\:nutrientContent").val();//养分含量
// 					var aqglq = jquery("#productInfo\\:fertilizerType").val();//肥料类型
					var fzdx = jquery("#productInfo\\:crops").val();//适用作物
					var syff = jquery("#productInfo\\:flMethod").val();//使用方法
					if(yxcf!='' && yxcf.length>50){
						document.getElementById("spanValue").innerHTML = "登记证号输入过长";
		        		jquery("#myModal").modal('show');return false;
					}
					if(nylx!='' && nylx.length>20){
						document.getElementById("spanValue").innerHTML = "养分含量输入过长";
		        		jquery("#myModal").modal('show');return false;
					}
// 					if(aqglq!='' && aqglq.length>20){
// 						document.getElementById("spanValue").innerHTML = "肥料类型输入过长";
// 		        		jquery("#myModal").modal('show');return false;
// 					}
					if(fzdx!='' && fzdx.length>100){
						document.getElementById("spanValue").innerHTML = "适用作物输入过长";
		        		jquery("#myModal").modal('show');return false;
					}
					if(syff!='' && syff.length>200){
						document.getElementById("spanValue").innerHTML = "施用方法输入过长";
		        		jquery("#myModal").modal('show');return false;
					}
				}
				jquery("#login").show();
		       
        	   return true;
           }
           function closeMethod(){
        	   var a2 =  document.getElementById("productInfo:goodsCode").value;
               var b2 =  document.getElementById("productInfo:barcode").value;
               var c1 = checkInteger(document.getElementById("productInfo:expirationDate"));
        	   if(a2==""){
        	   		document.getElementById("productInfo:goodsCode").focus();
        	   }else if(b2==""){
        		   document.getElementById("productInfo:barcode").focus();
        	   }else if(!c1){
        		   document.getElementById("productInfo:expirationDate").focus();
        	   }
           }

           jquery(document).ready(function(){
        	   hiddenDiv(); 
        	   var c = '#{goodsInfoHome.inputsInfo.goodsTypeInfo}';
               if(c!='1' && c!='' && c!='0'){
            	   jquery("#showPlant").hide();
               }
               jquery('.aaa').attr("data-live-search","true");
               jquery('.selectpicker').selectpicker();
               trplx();

               
           });
           function hiddenDiv(){ 	
               var code = '#{goodsInfoHome.inputsInfo.goodsCode}';
               //alert(code);
               if(code==''){       	      	    
	          	   var a =  document.getElementById("productInfo:goodsTypeInfo").value;
	          	   getGoodsCode('投入品',a);
               }
           }
           //回调将生成的编号赋值给goodsCode
           function changeGoodsCode(goodsCode){
        	   document.getElementById("productInfo:goodsCode").value=goodsCode;
           }    
         	//移除等级
           function removeLevel(obj,index){
	       	   var tdObj=jquery(obj).parent().siblings("td");			
	       	   var levelName=jquery(tdObj[1]).html();
	       	   var price=jquery(tdObj[2]).html();
	       	   var insertTime=jquery(tdObj[3]).html();
	       	   editGoodsLevels(levelName,price,insertTime,1,'del',index,'N');
           }
           function levelBack(promptMessage){
        	   if(promptMessage != ""){
            	   if(promptMessage.indexOf("我们会为您恢复等级信息,是否确定")>0){
            		   if(confirm(promptMessage)){
            			   addLevel('Y')
           			   }
                   }else{
                	   document.getElementById("spanValue").innerHTML = promptMessage;
   	   					jquery("#myModal").modal('show');
                   }	   				
   			   }
        	 jquery("#addGoodsName").attr("onclick","removeMe()");
			 jquery('#addGoodsName').val("请输入物料等级");
           }
           //添加等级
           function addLevel(flag){
				var levelName=jquery("#addGoodsName").val();
				if("请输入物料等级"==levelName || ""==trim(levelName)){
					document.getElementById("spanValue").innerHTML ="物料等级不能为空";
					jquery("#myModal").modal('show');
				}else{
					var idate=new Date();					
					editGoodsLevels(levelName,0,idate.format("yyyy-MM-dd hh:mm:ss"),0,'add',100,flag);
				}		
										
           }
           var operObj;
           var indexNum;
           //编辑等级
          function editLevel(obj,index){
        	   operObj=obj;
        	   indexNum=index;
			   var tdObj=jquery(obj).parent().siblings("td");			
        	   var levelName=jquery(tdObj[1]).html();
        	   var price=jquery(tdObj[2]).html();
        	   jquery("#editLevelName").val(levelName);
        	   if(trim(price)=="" || "0.0"==price){
        		   jquery("#editPrice").val(0);
               }else{
            	   jquery("#editPrice").val(price);
               }       	  
        	   jquery("#nameMsg").html("");
        	   jquery("#priceMsg").html("");
			   jquery('#levelModal').modal('show');
           }
          
         function trim(str){
       	   	return str.replace(/(^\s+)|\s+$/g,"");
       	 }
       	 //关闭提示框
       	 function closeMesDialog(){
       		jquery('#messageDialog').hide();
         }
       
          //编辑等级提交
        function submitEditLevel(){    
        	var levelName=jquery("#editLevelName").val();
            var price=jquery("#editPrice").val(); 
			if(""==price){
				price=0;
			}                	                  
      	   	if(""==trim(levelName)){
				//jquery("#messageContent").html("等级名称不能为空");
				//jquery('#messageDialog').show();
				jquery("#nameMsg").html("等级名称不能为空!");
          	}else if(isNaN(price)){
				//jquery("#messageContent").html("请填写正确的物料单价");
				//jquery('#messageDialog').show();
				jquery("#priceMsg").html("请填写正确的物料单价!");
        	}else{        		        		
               	var tdObj=jquery(operObj).parent().siblings("td");			
          	  	//jquery(tdObj[1]).html(levelName);
          	   //jquery(tdObj[2]).html(price);
          	  	editGoodsLevels(levelName,price,jquery(tdObj[3]).html(),0,'edit',indexNum,'N');
          	    jquery("#levelModal").modal('hide');
            }    	  	
        }
        function checkLevel(){
        	var levelName=jquery("#editLevelName").val();
            var price=jquery("#editPrice").val();                	                  
      	   	if(""==trim(levelName)){
				jquery("#nameMsg").html("等级名称不能为空!");
				jquery('#nameMsg').show();
          	}else{
          		jquery("#nameMsg").html("");
            }
          	if(isNaN(price)){
				jquery("#priceMsg").html("请填写正确的物料单价!");
				jquery('#priceMsg').show();
        	}else{
          		jquery("#priceMsg").html("");
            }
        }
   		function removeMe(){
			jquery("#addGoodsName").removeAttr("onclick");
			jquery("#addGoodsName").val("");
		}
   		Date.prototype.format = function(format)
   		{
   			var o = {
   			"M+" : this.getMonth()+1, //month
   			"d+" : this.getDate(),    //day
   			"h+" : this.getHours(),   //hour
   		 	"m+" : this.getMinutes(), //minute
   			"s+" : this.getSeconds(), //second
   		 	"q+" : Math.floor((this.getMonth()+3)/3),  //quarter
   		 	"S" : this.getMilliseconds() //millisecond
   			}

   			if(/(y+)/.test(format)) 
   			{
   				format=format.replace(RegExp.$1,(this.getFullYear()+"").substr(4 - RegExp.$1.length));
   			}
   			
   		 	for(var k in o)
   			{
   				if(new RegExp("("+ k +")").test(format))
   				{
   		 			format = format.replace(RegExp.$1,RegExp.$1.length==1 ? o[k] : ("00"+ o[k]).substr((""+ o[k]).length));
   				}
   			}
   			return format;
   		}
   	//获取文件名称
   		function changeFileName(name){
   			jQuery("#uploadMsg").html(name);
   		}	
        function previewImage(file){
          var MAXWIDTH  = 150; 
          var MAXHEIGHT = 140;
          var div = document.getElementById('preview');
          if (file.files && file.files[0]){
              div.innerHTML ='<img id=imghead>';
              var img = document.getElementById('imghead');
              img.onload = function(){
                var rect = clacImgZoomParam(MAXWIDTH, MAXHEIGHT, img.offsetWidth, img.offsetHeight);
                img.width  =  rect.width;
                img.height =  rect.height;
//                 img.style.marginLeft = rect.left+'px';
                img.style.marginTop = rect.top+'px';
              }
              var reader = new FileReader();
              reader.onload = function(evt){img.src = evt.target.result;}
              reader.readAsDataURL(file.files[0]);
          }else{//兼容IE
            var sFilter='filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale,src="';
            file.select();
            file.blur();
            var src = document.selection.createRange().text;
            div.innerHTML = '<img id=imghead>';
            var img = document.getElementById('imghead');
            //img.filters.item('DXImageTransform.Microsoft.AlphaImageLoader').src = src;
            img.src = src;
            var rect = clacImgZoomParam(MAXWIDTH, MAXHEIGHT, img.offsetWidth, img.offsetHeight);
            status =('rect:'+rect.top+','+rect.left+','+rect.width+','+rect.height);
            div.innerHTML = "<div id=divhead style='width:"+MAXWIDTH+"px;height:"+MAXHEIGHT+"px;"+sFilter+src+"\"'></div>";
            //alert(jquery("#preview").html());
          }
          jQuery("#uploadMsg").html(name);
        }
        function clacImgZoomParam( maxWidth, maxHeight, width, height ){
            var param = {top:0, left:0, width:width, height:height};
            if( width>maxWidth || height>maxHeight )
            {
                rateWidth = width / maxWidth;
                rateHeight = height / maxHeight;
                 
                if( rateWidth > rateHeight )
                {
                    param.width =  maxWidth;
                    param.height = Math.round(height / rateWidth);
                }else
                {
                    param.width = Math.round(width / rateHeight);
                    param.height = maxHeight;
                }
            }
             
            param.left = Math.round((maxWidth - param.width) / 2);
            param.top = Math.round((maxHeight - param.height) / 2);
            return param;
        }
  //]]>
	</script>
	<style >
	.rich-picklist-source-items, .rich-picklist-target-items {
    background-color: #FFFFFF;
    border-color: #afc4d7;
    border-style: solid;
    border-width: 1px;
}

.rich-list-picklist-button {
    background-color: #E3DED5;
    background-image: url(#{request.contextPath}/asset/images/001.jpg);
	background-repeat:repeat-x;
    color: #000000;
    font-family: Arial,Verdana,sans-serif;
    font-size: 12px;
}
.rich-picklist-control-top, .rich-picklist-control-bottom, .rich-picklist-control-up, .rich-picklist-control-down, .rich-picklist-control-copyall, .rich-picklist-control-copy, .rich-picklist-control-remove, .rich-picklist-control-removeall {
    border-color: #66a1d2;
}
.rich-picklist-control-disabled{ border-color: #eaeaea;}

.rich-list-picklist-button-disabled {
    background-color: #E3DED5;
    background-image: url(#{request.contextPath}/asset/images/002.jpg);
    color: #B1ADA7;
    font-family: Arial,Verdana,sans-serif;
    font-size: 12px;
}
	
	</style>
<style>
	.VMsgDiv{
		line-height: 85%;
		width: 100%;
		text-align: center;
		padding-top: 3px;
		color: red;
	}
	</style>

	<script type="text/javascript">
	//<![CDATA[
	function huidiao(){
	    jquery('.selectpicker').selectpicker();

	}
	function changeUnit(obj){
		if(obj != null){
			jquery("#productInfo\\:goodsUnitHidden").val(obj);
		}
	}


	//]]>
	</script>
</ui:define>
</ui:composition>

<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:a="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich"
    template="/layout/template_new.xhtml">
    
	<ui:define name="body">
	<link type="text/css" rel="stylesheet" href="#{request.contextPath}/asset/css/settings/EnterpriseSettings.css" />
    <script type="text/javascript" src="#{request.contextPath}/asset/js/EnterpriseLeftMenu.js"></script>
    
	<style>
	.form-control{
	float:left;
}
	.la_div{width: 100%;}
	.goodSelect20 .bootstrap-select:not([class*="span"]):not([class*="col-"]):not([class*="form-control"]):not(.input-group-btn){ width:100px; margin-right:0;}
	
	.tableModel{border-left: 1px solid #e1e1e1; border-right: 1px solid #e1e1e1; border-radius: 10px 10px 0 0; border-collapse: separate;font-family: '微软雅黑'; color: #6c6a6b;}
		.thead {border-radius: 5px 5px 0 0;}
		.thead th:first-child{border-radius: 5px 0 0 0;}
		.thead th:last-child{border-radius: 0 5px 0 0;}
		.tableModel thead th {height: 42px; background: #f0f5fb; font-size: 14px; font-weight: normal; text-align: center; border-bottom: 1px solid #e1e1e1;border-top: 1px solid #e1e1e1;min-width: 140px;}
.tableModel tbody td {height: 38px; text-align: center; border-bottom: 1px solid #e1e1e1; min-width: 140px; background-color: #fcfcfc;}
	.bootstrap-select.btn-group .dropdown-menu.inner{height:200px;}
	</style>
	<!-- #{productInfoHome.work()} -->

			<div class="box_back" id="login" style="display: none; z-index: 1000">
				<div id="login2"
					style="width: 60px; height: 60px; margin: 220px auto 0 auto;">
					<img src="../asset/images/loginda.gif" />
				</div>
			</div>
                <td valign="top">
                <div class="inbentory_file_main">
                <!--左侧二级导航 -->
                <div class="inbentory_level_wap">
                    <div class="inbentory_level">
                        <strong class="inben_first inben_first2">
                            <a href="javascript:;"><i class="icon_L icon_rkgl"></i>基础设置</a><b class="b_arrow"></b>
                        </strong>
                        <ol class="inben_second">
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/user/UpdateEnterpriseSettings.seam?enterpriseId=#{sessionTake.enterpriseInfoId}','_self')" >
                            	<i class="icon_sed"></i>企业设置                   	
                            </li>
                            <!-- 管理版和以前的版本（标准、白金...)显示 -->
                            <h:panelGroup rendered="#{sessionTake.nowVersionService.basicService.basicServiceId==10 or sessionTake.nowVersionService.basicService.serviceType eq 1}">
                            	<li class="sed_item" onclick="window.open('#{request.contextPath}/user/ModuleSettings.seam','_self')" ><i class="icon_sed"></i>模块配置</li>
                            </h:panelGroup>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/dictionary/DataDicinfoList.seam','_self')" ><i class="icon_sed"></i>字段管理</li>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/user/EnterpriseCommunityList.seam','_self')" ><i class="icon_sed"></i>角色管理</li>
                            <s:fragment rendered="#{enterpriseInfoHome.enterpriseInfo.govState}">
	                        	<li class="sed_item" onclick="window.open('#{request.contextPath}/user/AuditInformationList.seam','_self')" ><i class="icon_sed"></i>审核信息</li>
	                        </s:fragment>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/system/RecycleInfoList_1.seam','_self')" ><i class="icon_sed"></i>回收站</li>
                        </ol>
                        <strong class="inben_first inben_first2">
                            <a href="javascript:;"><i class="icon_L icon_ckgl"></i>生产管理设置</a><b class="b_arrow"></b>
                        </strong>
                        <ol class="inben_second">
                            <h:panelGroup rendered="#{s:hasRole('certification')}">
                            	<li class="sed_item" onclick="window.open('#{request.contextPath}/map/CertificationList.seam','_self')" ><i class="icon_sed"></i>认证信息</li>
                            </h:panelGroup>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/message/TunnelGroupList.seam','_self')" ><i class="icon_sed"></i>分组管理</li>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/product/InputsInfoList.seam?goodsTypeInfoId=5','_self')" ><i class="icon_sed"></i>投入品信息</li>
                        </ol>
                        <strong class="inben_first inben_first2">
                            <a href="javascript:;"><i class="icon_L icon_zkgl"></i>销售管理设置</a><b class="b_arrow"></b>
                        </strong>
                        <ol class="inben_second">
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/product/GoodsInfoList.seam','_self')"><i class="icon_sed"></i>物料信息</li>
                            <li class="sed_item sed_cur" onclick="window.open('#{request.contextPath}/product/ProductInfoList.seam','_self')" ><i class="icon_sed"></i>商品信息</li>
                        </ol>
                        <strong class="inben_first inben_first2">
                            <a href="javascript:;"><i class="icon_L icon_pdgl"></i>硬件管理设置</a><b class="b_arrow"></b>
                        </strong>
                        <ol class="inben_second">
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/device/DeviceList.seam','_self')"><i class="icon_sed"></i>设备管理</li>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/device/VideoList.seam','_self')" ><i class="icon_sed"></i>视频管理</li>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/farming/AmRfidInfoList.seam','_self')" ><i class="icon_sed"></i>RFID卡管理</li>
                        </ol>
                    </div>
                    <i class="collapse_btn"></i>
                </div>
                <!--左侧二级导航 -->
				<!--右侧 -->
                <div class="inbentory_content">
                <div class="right_c">
                	<div class="r_title">
                    	<div class="r_t_l"> 
                    	<font size="4">商品信息 </font>
                    	</div>
                    </div>
                    			
                    <h:form id="productInfo" enctype="multipart/form-data">
			<!-- Modal -->
<div aria-hidden="false" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="myModal" class="modal fade in w600na" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">提示框</h4>
      </div>
      <div class="modal-body">
       <span id="productMsg">*号部分为必填项！</span>
        
        
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
        <button type="button" class="btn btn-primary" data-dismiss="modal">确认</button>
      </div>
    </div>
  </div>
</div>
			<div class="all_d3">
                		<div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">商品编码：</td>
                                    <td>
                                    	<!--<span style="float: left; height:20px; line-height:20px; font-size: 12px;" >69596382</span>
										
										<h:panelGroup rendered="#{!productInfoHome.managed}">-->
										<h:inputText id="productCode" maxlength="18"  readonly="#{facesContext.renderResponse}"
						                        styleClass="form-control nw221" style="margin-right:0px;"
						                          value="#{productInfoHome.instance.productCode}">
						                </h:inputText>
						                <span class="finput" style="color:#FF0000">*</span>
						                <!-- </h:panelGroup>
						                
						                <h:panelGroup rendered="#{productInfoHome.managed}">
						                <h:outputText maxlength="20" style="margin-right:0px;"
						                          value="#{productInfoHome.instance.productCode}">
						                </h:outputText>
						                </h:panelGroup>
						                 -->
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                
                                    <td class="all_te">商品名称：</td>
                                    <td>
                                    	 <h:inputText id="name"  maxlength="50"
						                         styleClass="form-control nw221"  style="margin-right:0px;"
						                          value="#{productInfoHome.instance.name}">
						                    <!--<a:support event="onblur" reRender="nameField" ajaxSingle="true" bypassUpdates="true"/>
						                --></h:inputText>
						                <span class="finput" style="color:#FF0000;margin-left: 10px;">*</span>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">商品类型：</td>
                                    <td style="width: 266px;">
                                    	<h:selectOneMenu id="productType" styleClass="selectpicker" style="width: 146px;" value="#{productInfoHome.productTypeId}">
			                   				<f:selectItems value="#{productInfoHome.queryProductTypeByIdList()}"/>
			                   			</h:selectOneMenu>
                                    </td>
                                </tr>
                            </table>
                        </div>
                         <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">原价：</td>
                                    <td>
                                    	<h:inputText id="productPrice" maxlength="11"
						                       styleClass="form-control nw221"
						                          value="#{productInfoHome.instance.productPrice}">
						                </h:inputText><span class="finput">元</span>
						                <span class="finput" style="color:#FF0000;margin-left: 10px;">*</span>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">存储类型：</td>
                                    <td >
                                    	<h:selectOneMenu styleClass="selectpicker" id="goodsStorageTypeId" style="display:none;" value="#{productInfoHome.goodsStorageTypeId}">
			                   				<s:selectItems value="#{productInfoHome.goodsStorgeTypeList()}" var="plant" label="#{plant.name}" itemValue="#{plant.goodsStorageTypeId}"/>
			                   			</h:selectOneMenu>
			                   			<span class="finput" style="color:#FF0000;float:right;">*</span>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <!--  <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">单位类型：</td>
                                    <td style="width: 266px;">
                                    	<h:selectOneMenu styleClass="selectpicker" id="goodsUnitType" style="width: 286px;display:none;" value="#{productInfoHome.goodsObj.goodsUnitType}" onchange="selectCheck(this.value);">
			                   				<f:selectItems value="#{goodsInfoConstant.getGoodsMeasureList()}"/> 
			                   			</h:selectOneMenu>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="all_da all_w01" id="showPlant">
                        	<table>
                                <tr>
                                    <td class="all_te">作物种类：</td>
                                    <td style="width: 266px;">
                                    	<h:selectOneMenu styleClass="selectpicker"  id="plantInfo" style="width:146px;" value="#{productInfoHome.goodsObj.plant}">
                                    		<s:selectItems value="#{plantSelects.getPlist()}" var="_plant" label="#{_plant.name}"/>
                                    		<s:convertEntity />
										</h:selectOneMenu>
                                    </td>
                                </tr>
                            </table>
                        </div>-->
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">保质期：</td>
                                    <td>
										<h:inputText id="expirationDate"  styleClass="form-control nw221" maxlength="11"
						                          value="#{productInfoHome.goodsObj.expireDate}" style="margin-right:0px;">
						                </h:inputText>
						                 <span class="finput">天</span>
                                    </td>
                                </tr>
                            </table>
                        </div>
                     
                       
                        <div class="all_da all_w01" style="width:90%;">
                        	<table>
                                <tr>
                                    <td class="all_te">商品规格：</td>
                                    <td>
                                    	<h:inputText id="netContent"  maxlength="50"
						                        styleClass="form-control nw90 fl" style="margin-right:10px;"
						                          value="#{productInfoHome.goodsObj.netContent}">
						                </h:inputText>
						                 <h:panelGroup id="isMe">
						                <div class="goodSelect20 fl">
						                	<h:selectOneMenu styleClass="selectpicker" id="goodsUnitSelect" style="width: 286px;" value="#{productInfoHome.goodsObj.goodsUnit}">
				                   				<s:selectItems value="#{productInfoHome.unitSpecifications()}" var="_unit" label="#{_unit.name}" itemValue="#{_unit.id}"/>
				                   			</h:selectOneMenu>
			                   			</div>
			                   			</h:panelGroup>
			                   			<span style="float:left; line-height:30px; padding:0 5px;">/</span>
			                   			
										<h:inputText id="packSpec"  maxlength="50"
						                        styleClass="form-control nw90" style="margin-right:0px;"
						                          value="#{productInfoHome.goodsObj.packSpec}">
						                </h:inputText>
						                <span style="line-height: 30px;margin-left:10px;">(净含量    单位规格/包装规格)</span>
                                    </td>
                                    
                                </tr>
                                
                            </table>
                        </div>
                        <div class="all_da all_w01" style="width:90%; margin-left: 25px;">
                        	<table>
                                <tr>
                                    <td class="all_te" style="width: 119px;">配送单显示规格：</td>
                                    <td>
										<h:inputText id="distributionUnit"  styleClass="form-control nw221" maxlength="11"
						                          value="#{productInfoHome.goodsObj.distributionUnit}" style="margin-right:0px;">
						                </h:inputText>
						                 <span class="finput">添加显示在配送的中的规格，例如：450~500g/包</span>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        
                        <div class="all_da all_w01" style="width:auto; ">
                        	<table>
                                <tr>
	                                 <td class="all_te" style="text-align: left; padding-left:16px; width:70px; padding-bottom:15px; ">商品图片：</td>
			                         <td style="padding-bottom:15px;">
			                            <span class="baseFile_onload">上传图片
			                             <s:fileUpload id="productImage" size="30"
											accept="image/png,image/jpeg,image/gif"
											contentType="image/png,image/jpeg,image/gif"
											fileName="#{productInfoHome.instance.imgUrlName}"
											data="#{productInfoHome.instance.imgData}" onchange="previewImage('loginLogoUrlByte_p',this);">
										</s:fileUpload>
										</span>
			                          </td>
                                </tr>
                                 <tr>
                        	<td class="pr15"></td>
                        	<td>
                            <!--<em class="fl" style="line-height:27px; width:84px;">&#160;</em>-->
                            <div class="baseFile_pic194 fl">
                            	<img src="#{productInfoHome.instance.imgUrlName eq null or productInfoHome.instance.imgUrlName eq ''?'../asset/images/no_picture.png':productInfoHome.instance.imgUrlName}" id="loginLogoUrlByte_p" width="194" height="94" />
                            	<p class="pic_stress">图片标准：160x60（像素）支持格式：jpg,gif,png,jpeg,bmp,3gp</p>
                            </div>
                            </td>
                        </tr>
                            </table>
                        </div>
                       
                         <div class="all_da all_w01" style="width:725px; display:block;">
                        	<table>
                                <tr>
                                   <td class="all_te">是否上架：<input type="hidden" name="check" value="" id="check"/></td>
                                    <td align="left" id="checkone2">
                                       <div class="la_div">
                              				 <label for="cc" class="la_aa">
                                       		 <a href="#boo" id="oob" class="#{productInfoHome.instance.publish?'a':'b'}" onclick="che2('#{productInfoHome.instance.publish=='a'?'false':'true'}')"></a>
                                       		 <a href="#oob" id="boo" class="#{productInfoHome.instance.publish?'b':'a'}" onclick="che2('#{productInfoHome.instance.publish=='b'?'true':'false'}')"></a>
                                       		 <input type="checkbox" checked="#{productInfoHome.instance.publish}" name="b" aaa2="#{productInfoHome.instance.publish}" id="cc" style="display:none;" />
                               				 </label>
                                		</div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        
                        <div class="all_da all_w01" style="width:725px;">
                        	<table>
                                <tr>
								<td class="all_te">描述：</td>
								<td>
									<h:inputTextarea id="description" styleClass="form-control nw420" rows="3"   value="#{productInfoHome.instance.description}" />
	                            </td>
								</tr>
								<tr>
									<td colspan="2" height="35"></td>
								</tr>
                            </table>
                        </div>
                        <div class="clear"></div>
                   </div>
                    <div class="ckd_button" style="text-align: center;display:none;">
                    	<h:inputHidden  value="#{productInfoHome.levelId}" id="levelId"/>
                   	 	<h:commandButton id="persist" value="提交" styleClass="btn btn-primary" action="#{productInfoHome.persist}" rendered="#{!productInfoHome.managed}"  onclick="return checkSubmit()"/>
		            	<h:commandButton id="update" value="提交" styleClass="btn btn-primary" action="#{productInfoHome.update}" rendered="#{productInfoHome.managed}"   onclick="return checkSubmit()"/>
		            	<s:button view="/product/ProductInfoList.seam" styleClass="btn btn-default" value="返回" id="bn_left6" style="margin-left:10px" />
                    </div>
                    <!--按钮结束-->
                    <div class="clear"></div>
                    </h:form>
                    
                    
                    
                    
                    <div class="r_title">
                    	<div class="r_t_l"> 
                    	<font size="4">商品构成 </font>
                    	</div>
                    </div>
                     <!--入库订单列表开始-->
                	<div class="all_d3" style=" margin-top:35px;">
                    	<div class="new_da">
                    	<a:form id="search">
                        	<table>
                                <tr>
                                	<td style="font-size: 14px; width:80px; text-align:center; padding-left:65px;">构成添加</td>
                                    <td width="230">
                                <h:selectOneMenu  value="#{productInfoHome.nowGoodsInfo}" id="searchName" styleClass="selectpicker">
									<s:selectItems  value="#{productInfoHome.goodsInfoLists}" var="obj"  label="#{obj.goodsTypeInfo==1 or obj.goodsTypeInfo == 7 ?'原料' : ''}#{obj.goodsTypeInfo==3 ?'商品' : ''}#{obj.goodsTypeInfo==4 ?'辅料' : ''}#{obj.goodsTypeInfo==5 ?'投入品' : ''}#{obj.goodsTypeInfo!=5 &amp;&amp; obj.goodsTypeInfo!=4 &amp;&amp; obj.goodsTypeInfo!=3 &amp;&amp; obj.goodsTypeInfo!=1  ?'其他物料' : ''}-#{obj.name}-#{obj.netContent &gt; 0? obj.netContent :''}#{productInfoHome.unitName(obj.goodsUnit)}#{obj.packSpec.trim()!=null &amp;&amp; obj.packSpec.trim()!=''?'/':''}#{obj.packSpec}"  >
									</s:selectItems> 
									<s:convertEntity />
									
								</h:selectOneMenu>
                                    </td>
                                    <td width="78" align="left">
                                    <a:commandButton eventsQueue="default" styleClass="btn btn-success" value="添加"  action="#{productInfoHome.addGoodsInfo}" reRender="list" data="#{productInfoHome.message}" oncomplete="tishi(data);"></a:commandButton>
                                    </td>
                                    <td>
                                    	(添加构成后，订单理货您可以匹配到履历，可以使用预采库，库存管理可以计算损耗率等，让您体验更方便快捷！)
                                    </td>
                                </tr>
                            </table>
                        </a:form>
                        </div>
                        <div class="clear"></div>
                   </div>
				<!--入库订单列表结束-->
				
				<h:form>
				 <h:panelGroup id="list">
				<table class="tableModel thead" width="80%" cellpadding="0" cellspacing="0" style="margin-left:75px;">
		      		<thead>
		      			<tr>
		      				<th width="20%">名称</th>
		      				<th width="20%">等级</th>
		      				<th width="20%">规格</th>
		      				<th width="20%">数量</th>
		      				<th >操作</th>
		      			</tr>
		      		</thead>
		      		<tbody>
		      		 <a:repeat value="#{productInfoHome.goodsList}" var="obj" >
                                <tr>
                                    <td class="">#{obj.name}</td>
                                    <td class="">
	                                    <ui:fragment rendered="#{not empty obj.goodsLevels}">
			                            	<h:selectOneMenu  styleClass="selectpicker levelIds" value="#{productInfoHome.levelId}">
												<s:selectItems value="#{obj.goodsLevels}" var="var" label="#{var.name}"  itemValue="#{var.goodsLevelId}"/>
											</h:selectOneMenu>
										</ui:fragment>
										<ui:fragment rendered="#{empty obj.goodsLevels}">
											<h:outputText value="无" />
										</ui:fragment>
									</td>
                                    <td class="">#{obj.netContent &gt; 0? obj.netContent :''}#{productInfoHome.unitName(obj.goodsUnit)}#{obj.packSpec.trim()!=null &amp;&amp; obj.packSpec.trim()!=''?'/':''}#{obj.packSpec}</td>
                                    <td class="">
                                    <h:panelGroup id="listnum">
                                    <h:inputText value="#{obj.num}" styleClass="input_02bg numClass_#{obj.goodsInfoId}" onclick="jquery('.btn-primary').attr('disabled', true);" onblur="updateNum(#{obj.num},this.value,#{obj.goodsInfoId});">
                                    </h:inputText>
                                    </h:panelGroup>
                                    </td>
                                    <td class="" ><a href="#" onclick="deleted(#{obj.goodsInfoId})" class="list_delete" style="color:black;"></a></td>
                                </tr>
                        </a:repeat>
		      			
		      		</tbody>
		      	</table>
		      	</h:panelGroup>
                   
                   </h:form>
             <div style=" padding-top:35px; text-align:center;">
                       <h:commandButton styleClass="btn btn-primary" rendered="#{!productInfoHome.managed}" value="提交" onclick="jquery('#productInfo\\:persist').click();"></h:commandButton>
                       <h:commandButton styleClass="btn btn-primary" rendered="#{productInfoHome.managed}" value="提交" onclick="jquery('#productInfo\\:update').click();"></h:commandButton>
                       <s:link propagation="none" styleClass="btn btn-default" value="返回" view="/product/ProductInfoList.seam">
                       		<f:param name="pageNum" value="#{productInfoHome.pageNum}"></f:param>
                       		<f:param name="productCode" value="#{productInfoHome.searchProductCode}"></f:param>
							<f:param name="name" value="#{productInfoHome.searchProductName}"></f:param>
							<f:param name="productType" value="#{productInfoHome.searchTypeCode}"></f:param>
							<f:param name="searchName" value="#{productInfoHome.searchName}"></f:param>
							<f:param name="flag" value="#{productInfoHome.searchFlag}"></f:param>
                       </s:link>
                       &#160;&#160;
                       
                       
             </div>
                    
                    
                    
                    
                    
                    
                     <a:form>
						 <a:jsFunction name="searchme" action="#{productInfoHome.unitSpecifications}" reRender="isMe" oncomplete="jquery('.selectpicker').selectpicker();">
							 <a:actionparam name="myType" assignTo="#{productInfoHome.myType}"/>
						 </a:jsFunction>
						  <a:jsFunction name="deleted"  action="#{productInfoHome.deleteGoodsInfo()}" reRender="list" oncomplete="huidiao()">
		                 	<a:actionparam name="deletedId" assignTo="#{productInfoHome.deleteId}"/>
					      </a:jsFunction>
					       <a:jsFunction name="updateGoodsNum"  action="#{productInfoHome.updateGoodsNum()}" reRender="listnum" oncomplete="jquery('.btn-primary').attr('disabled', false);">
			                 <a:actionparam name="goodsNum" assignTo="#{productInfoHome.goodsNum}"/>
			                 <a:actionparam name="updateId" assignTo="#{productInfoHome.updateId}"/>
						     </a:jsFunction>
					</a:form>
                </div><!--right_c结束-->
               </div>
               </div>
				<!--入库订单列表结束-->
            </td>    
    <!--右边结束-->
 <!--添加按钮结束-->
<script type="text/javascript" language="javascript">
function selectCheck(type){
	searchme(type);
}

//<![CDATA[
        var promptMessage = "#{productInfoHome.promptMessage}";
		if(promptMessage != ""){
			document.getElementById("productMsg").innerHTML = promptMessage;
			jquery("#myModal").modal('show');
		}
        var msg="#{productInfoHome.msg}";
		if(msg!=""){
			document.getElementById("productMsg").innerHTML = msg;
			jquery("#myModal").modal('show');
		}
		var productCode="#{productInfoHome.productCode}";
		jquery("#productInfo\\:productCode").val(productCode);
        function eventKey(){
			if (event.keyCode >= 48 && event.keyCode <= 57){
				return true;
			}else{
				return false;
			}
		}
        function trim(str){
       	   	return str.replace(/(^\s+)|\s+$/g,"");
       	 }
		function checkSubmit(){
			
			if(jquery('.levelIds').val()==null){
				jquery('#productInfo\\:levelId').val("");
			}else{
				jquery('#productInfo\\:levelId').val(jquery('.levelIds').val());
			}
			   var productCode = jquery("#productInfo\\:productCode").val();
			   var name = document.getElementById("productInfo:name").value;
			   var productPrice = document.getElementById("productInfo:productPrice").value;//原价
			   var productType = document.getElementById("productInfo:productType").value;
			   var netContent=document.getElementById("productInfo:netContent").value;  
			   var description = document.getElementById("productInfo:description").value;//商品描述  
			   var reg = /^\+?[1-9][0-9]*$/;
			   var reg12 = /^\d{20}$/;
			    if(productCode == "undefined" || productCode == ""){
				   document.getElementById("productMsg").innerHTML = "请输入商品编号!";
				   jquery("#myModal").modal('show');
				   return false;
				}else{
					var reg=/^[\/a-zA-Z0-9,.-]*$/;
					if(!reg.test(productCode)){
						document.getElementById("productMsg").innerHTML = "商品编号只能包含数组字母及,.-/字符";
		        		jquery("#myModal").modal('show');return false;
					}
				} 
				if(trim(name) == ""){
				   document.getElementById("productMsg").innerHTML = "请输入商品名称!";
				   jquery("#myModal").modal('show');
				   return false;
				}
				if(description.length>200){
					document.getElementById("productMsg").innerHTML = "商品描述输入过长";
					jquery("#myModal").modal('show');
					return false;
				}
				if(productPrice==""){
					   document.getElementById("productMsg").innerHTML = "原价不能为空!";
					   jquery("#myModal").modal('show');
					   return false;
				}else if(isNaN(productPrice)){
					   document.getElementById("productMsg").innerHTML = "原价只能是数字!";
					   jquery("#myModal").modal('show');
					   return false;
					}
				var goodsStorageType = jquery("#productInfo\\:goodsStorageTypeId").val();
				if(goodsStorageType == null && goodsStorageType != ""){
					document.getElementById("productMsg").innerHTML = "存储类型不能为空！";
					jquery("#myModal").modal('show');
					return false;
				}
				var productType = jquery("#productInfo\\:productType").val();
				if(productType == null){
					document.getElementById("productMsg").innerHTML = "商品类型不能为空！";
					jquery("#myModal").modal('show');
					return false;
				}
// 				if(jQuery('.tableModel tbody tr').length<1){
// 					document.getElementById("productMsg").innerHTML = "商品构成不能为空！";
// 					jquery("#myModal").modal('show');
// 					return false;
// 				}
				if( isNaN(netContent) && ""!=netContent){
		        	   document.getElementById("productMsg").innerHTML = "净含量只能是数字";
	        		   jquery("#myModal").modal('show');return false;
			       }
				if(jQuery('#productInfo\\:expirationDate').val()==""){
					document.getElementById("productMsg").innerHTML = "保质期不能为空！";
					jquery("#myModal").modal('show');
					return false;
				}
				var fla=0;
				jquery('.thead input').each(function(){
					if(jquery(this).val()==0){
						fla=1;
					}
				})
				if(fla==1){
					document.getElementById("productMsg").innerHTML = "数量不能为0！";
					jquery("#myModal").modal('show');
					return false;
					}
				jquery("#login").show();
				return true;
			
		}
		

		che2 = function(value){
		    if(value == "true"){
		 	   document.getElementById("check").value="2";
		    }else{
		 	   document.getElementById("check").value="1";
		    }
		}
		jquery("#productInfo\\:plantInfo").attr("data-live-search","true");
		
		

		 tishi = function(str){
			 jquery('.selectpicker').selectpicker();
				if(str!='')
					alert(str);
      	}
		function huidiao(){
			jquery('.selectpicker').selectpicker();
			}


    	function updateNum(oldNum,num,id){
        	if(num == null||num == ""||num<0){
				num = 0;
			}
			
			if(Number(num) > 100000){
				jquery(".numClass_"+id).val(oldNum);
				jquery('.btn-primary').attr('disabled', false);
				alert("数量不能大于100000！");
			}else{
				updateGoodsNum(Number(num),id);
			}
        }
    	jquery(document).ready(function(){
    		jquery("#search\\:searchName").attr("data-live-search","true");
    		 jquery('.selectpicker').selectpicker();
        });


    	function previewImage(id,file){
    	      var MAXWIDTH  = 0; 
    	      var MAXHEIGHT = 0;
    	    	 MAXWIDTH  = document.getElementById(id).offsetWidth; 
    	         MAXHEIGHT = document.getElementById(id).offsetHeight;
          var div = document.getElementById(id);
          if (file.files && file.files[0])
          {
              var img;
     	    	div.innerHTML = '<img class=imghead id='+id+'>';
     	           img = document.getElementById(id);
              img.onload = function(){
                var rect = clacImgZoomParam(MAXWIDTH, MAXHEIGHT, img.offsetWidth, img.offsetHeight);
                img.width  =  rect.width;
                img.height =  rect.height;
//                 img.style.marginLeft = rect.left+'px';
                img.style.marginTop = rect.top+'px';
              }
              var reader = new FileReader();
              reader.onload = function(evt){img.src = evt.target.result;}
              reader.readAsDataURL(file.files[0]);
          }
          else //兼容IE
          {
            var sFilter='filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale,src="';
            file.select();
            var src = document.selection.createRange().text;
            var img;
    	    	div.innerHTML = '<img class=imghead id='+id+'>';
    	           img = document.getElementById(id);
    	           img.filters.item('DXImageTransform.Microsoft.AlphaImageLoader').src = src;
    	           var rect = clacImgZoomParam(MAXWIDTH, MAXHEIGHT, img.offsetWidth, img.offsetHeight);
    	           status =('rect:'+rect.top+','+rect.left+','+rect.width+','+rect.height);
    	           div.innerHTML = "<div class=divhead id='"+id+"' style='position:absolute; width:"+rect.width+"px;height:"+rect.height+"px;margin-top:"+rect.top+"px;"+sFilter+src+"\"'></div>";
          }
        }
    	function clacImgZoomParam( maxWidth, maxHeight, width, height ){
            var param = {top:0, left:0, width:maxWidth, height:maxHeight};
            return param;
        }
		//]]>
			</script>
</ui:define>
</ui:composition>

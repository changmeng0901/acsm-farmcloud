<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:p="http://jboss.com/products/seam/pdf"
	template="/layout/template_pack.xhtml">

<ui:define name="body">
#{goodsInfoHome.getPrintGoodsInit()}
<title>条形码</title>
<div style="width:800px; margin:0 auto;" id="printPannel">
<!-- 页面显示内容（不隐藏） -->
<div id="showPannel">
<table width="100%" cellpadding="0" cellspacing="0" style="font-family:'宋体'; text-align:center;border-collapse:collapse;">
	<thead>
        <tr>
            <th height="100" colspan="5" style="font-size:160%;">投入品条形码
            	<p style="margin:0; padding:0; font-size:60%; font-weight:normal;">InputsInfo Bar Codes</p>
                <div style="height:8px; margin:10px 0 0px; border-top:1px solid #000; border-bottom:2px solid #000;"></div>
            </th>
        </tr>	
    </thead>
	<tbody>
    	<tr>
    		<th height="90" width="70" style="border-bottom:1px solid #000; border-top:1px solid #000; border-left:1px solid #000;">序号<p style="margin:0; padding:0; font-size:80%; font-weight:normal;">(No.)</p></th>
    		<th height="90" width="180" style="border-bottom:1px solid #000;border-top:1px solid #000;">投入品编号<p style="margin:0; padding:0; font-size:80%; font-weight:normal;">(Product Number)</p></th>
		    <th height="90" width="200" style="border-bottom:1px solid #000;border-top:1px solid #000;">投入品名称<p style="margin:0; padding:0; font-size:80%; font-weight:normal;">(Product Name)</p></th>
		    <th height="90" width="100" style="border-bottom:1px solid #000;border-top:1px solid #000;">规格<p style="margin:0; padding:0; font-size:80%; font-weight:normal;">(Specification)</p></th>
		    <th height="90" style="border-bottom:1px solid #000;border-top:1px solid #000; border-right:1px solid #000;">条形码<p style="margin:0; padding:0; font-size:80%; font-weight:normal;">(Barcode)</p></th>
    	</tr>
    	<a4j:repeat value="#{goodsInfoHome.barcodeInputList}" var="_goodsInfo" rendered="#{not empty goodsInfoHome.barcodeInputList}" rowKeyVar="_index">
    		<h:outputText rendered="#{_index le 9}">
			<tr>
				<td height="90" style="border-bottom:1px solid #000; border-left:1px solid #000;">
					<h:outputText  value="#{_index+1}" />
				</td>
				<td height="90" style="border-bottom:1px solid #000;">#{_goodsInfo.goodsCode}</td>
			    <td height="90" style="border-bottom:1px solid #000;">#{_goodsInfo.name}</td>
			    <td height="90" style="border-bottom:1px solid #000;">
    				<h:outputText  value="#{_goodsInfo.goodsSpec}" rendered="#{!empty _goodsInfo.goodsSpec}"/>
    			</td>
    			<td height="90" style="border-bottom:1px solid #000; border-right:1px solid #000;">
    				<h:outputText rendered="#{_goodsInfo.goodsCode ne null}">
	    				<p:barCode type="code128" barHeight="36" code="#{_goodsInfo.goodsCode}" altText="#{_goodsInfo.goodsCode}" />
    				</h:outputText>
    				<h:outputText rendered="#{_goodsInfo.goodsCode eq null}">
    					<h:outputText value="无" />
    				</h:outputText>
    			</td>
			</tr>
			</h:outputText>
		</a4j:repeat>
    </tbody>
</table>
</div>
<!-- 打印的内容 （隐藏） -->
<div style="padding-top:30px;display: none;"  id="hiddenPanel">
<table width="100%" cellpadding="0" cellspacing="0" style="font-family:'宋体'; text-align:center;border-collapse:collapse;">
	<thead>
        <tr>
            <th height="100" colspan="5" style="font-size:160%;">投入品条形码
            	<p style="margin:0; padding:0; font-size:60%; font-weight:normal;">InputsInfo Bar Codes</p>
                <div style="height:8px; margin:10px 0 0px; border-top:1px solid #000; border-bottom:2px solid #000;"></div>
            </th>
        </tr>	
    </thead>
	<tbody>
    	<tr>
    		<th height="90" width="70" style="border-bottom:1px solid #000; border-top:1px solid #000; border-left:1px solid #000;">序号<p style="margin:0; padding:0; font-size:80%; font-weight:normal;">(No.)</p></th>
    		<th height="90" width="180" style="border-bottom:1px solid #000;border-top:1px solid #000;">投入品编号<p style="margin:0; padding:0; font-size:80%; font-weight:normal;">(Product Number)</p></th>
		    <th height="90" width="200" style="border-bottom:1px solid #000;border-top:1px solid #000;">投入品名称<p style="margin:0; padding:0; font-size:80%; font-weight:normal;">(Product Name)</p></th>
		    <th height="90" width="100" style="border-bottom:1px solid #000;border-top:1px solid #000;">规格<p style="margin:0; padding:0; font-size:80%; font-weight:normal;">(Specification)</p></th>
		    <th height="90" style="border-bottom:1px solid #000;border-top:1px solid #000; border-right:1px solid #000;">条形码<p style="margin:0; padding:0; font-size:80%; font-weight:normal;">(Barcode)</p></th>
    	</tr>
    	<a4j:repeat value="#{goodsInfoHome.barcodeInputList}" var="_goodsInfo" rendered="#{not empty goodsInfoHome.barcodeInputList}" rowKeyVar="_index">
    		<tr class="trNum">
				<td height="90" style="border-bottom:1px solid #000; border-left:1px solid #000;text-align:center;">
					<h:outputText  value="#{_index+1}" />
				</td>
				<td height="90" style="border-bottom:1px solid #000;text-align:center;">#{_goodsInfo.goodsCode}</td>
			    <td height="90" style="border-bottom:1px solid #000;text-align:center;">#{_goodsInfo.name}</td>
			    <td height="90" style="border-bottom:1px solid #000;text-align:center;">
    				<h:outputText  value="#{_goodsInfo.goodsSpec}" rendered="#{!empty _goodsInfo.goodsSpec}"/>
    			</td>
    			<td height="90" style="border-bottom:1px solid #000; border-right:1px solid #000;text-align:center;">
	    			<h:outputText rendered="#{_goodsInfo.goodsCode ne null}">
	    				<p:barCode type="code128" barHeight="36" code="#{_goodsInfo.goodsCode}" altText="#{_goodsInfo.goodsCode}" />
    				</h:outputText>
    				<h:outputText rendered="#{_goodsInfo.goodsCode eq null}">
    					<h:outputText value="无" />
    				</h:outputText>
    			</td>
			</tr>
		</a4j:repeat>
    </tbody>
</table>
</div>
<div id="printButton" style="text-align:center;margin:20px 0;">
	<input style="background-image: url('#{request.contextPath}/asset/images/print03.jpg'); background-repeat:no-repeat; width: 77px; height: 32px; padding:0; margin:0; cursor: pointer; border:0 none;" onclick="printaaa();" id="btnPrint" />
	<input style="background-image: url('#{request.contextPath}/asset/images/re_43.jpg'); background-repeat:no-repeat; width: 77px; height: 32px; padding:0; margin:0; cursor: pointer; border:0 none;" onclick="window.close();" id="btnPrint" />
</div>
</div>
<script type="text/javascript">
//<![CDATA[
	var obj;
	function printaaa(){
		var old = jQuery('#printPannel').html();
		jQuery('#printButton').attr('style','display:none;');
		obj = jQuery("#printButton").clone();
		jQuery("#printButton").empty();
		
		var num=0;
		jQuery(".trNum").each(function(){
			num+=1;
		});
		if(Number(num)>10){
			
			var str = "";
			var title = "";
			var strx = "";
			jQuery("tr").each(function(index){
				if(index==1){
					strx = jQuery(this).html();
				}
			});
			
			var x = "";
			x += "<div><table width='100%' cellpadding='0' cellspacing='0' style='font-family:'宋体'; text-align:center;border-collapse:collapse;'>";
			x += "<thead>";
			x += "<tr><th height='100' colspan='5' style='font-size:160%;''>投入品条形码<p style='margin:0; padding:0; font-size:60%; font-weight:normal;'>InputsInfo Bar Codes</p>";
			x += "<div style='height:8px; margin:10px 0 0px; border-top:1px solid #000; border-bottom:2px solid #000;'></div>";
			x += "</th></tr></thead><tbody>";
			x += "<tr>";
			x += strx;
			x += "</tr>";
			jQuery(".trNum").each(function(index){
				if(Number(index+1)%10 != 0){
					x += "<tr>";
					x += jQuery(this).html();
					x += "</tr>";
					/* jQuery(this).after(title); */
				}else{
					x += "<tr>";
					x += jQuery(this).html();
					x += "</tr>";
					x += "</tbody></table></div><div style='page-break-after:always'></div>";
					x += "<div><table width='100%' cellpadding='0' cellspacing='0' style='font-family:'宋体'; text-align:center;border-collapse:collapse;'>";
					x += "<thead>";
					x += "<tr><th height='100' colspan='5' style='font-size:160%;''>投入品条形码<p style='margin:0; padding:0; font-size:60%; font-weight:normal;'>Product Bar Codes</p>";
					x += "<div style='height:8px; margin:10px 0 0px; border-top:1px solid #000; border-bottom:2px solid #000;'></div>";
					x += "</th></tr></thead><tbody>";
					x += "<tr>";
					x += strx;
					x += "</tr>";
				}
			});
			x += "</tbody></table></div>";
			jQuery("#printPannel").empty();
			jQuery("#printPannel").append(x);
			/* jQuery('#hiddenPanel').attr("style","display:''"); */
			var ht = jQuery('#hiddenPanel').html();
		/* 	jQuery('#printPannel').empty();
			jQuery('#printPannel').html(ht); */
			window.print();
			jQuery('#hiddenPanel').attr("style","display:none;");
		 	jQuery("#printPannel").html(old);
		}else{
			window.print();
		}
	}
	
	function printButtonClick(){
		
		var old = jQuery('#printPannel').html();
		jQuery('#printButton').attr('style','display:none;');
		obj = jQuery("#printButton").clone();
		jQuery("#printButton").empty();
		
		var num=0;
		jQuery(".trNum").each(function(){
			num+=1;
		});
		if(Number(num)>10){
			
			var str="";
			var title="";
			jQuery("tr").each(function(index){
				if(index==1){
					title=jQuery(this).html();
				}
			});
			str+="<tr style='page-break-after:always'/>";
			str+="<tr width='1000px;'>"
			str+=title;
			str+="</tr>";
			jQuery(".trNum").each(function(index){
				if(Number(index+1)%10==0){
					jQuery(this).after(str);
				}
			});
			jQuery('#hiddenPanel').attr("style","display:''");
			var ht = jQuery('#hiddenPanel').html();
			jQuery('#printPannel').empty();
			jQuery('#printPannel').html(ht);
			window.print();
			jQuery('#hiddenPanel').attr("style","display:none;");
			jQuery("#printPannel").html(old);
		}else{
			window.print();
		}
	}        
      
//]]>
</script>
</ui:define>
</ui:composition>

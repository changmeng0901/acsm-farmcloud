<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	template="/layout/template_new.xhtml">
	<ui:define name="body">
		<link type="text/css" rel="stylesheet" href="#{request.contextPath}/asset/css/settings/EnterpriseSettings.css" />
    	<script type="text/javascript" src="#{request.contextPath}/asset/js/EnterpriseLeftMenu.js"></script>
	<style>
	.ui-selectmenu{*position:static;}
	.gjss_w1{width: 30%;}
	
	.bootstrap-select:not([class*="span"]):not([class*="col-"]):not([class*="form-control"]):not(.input-group-btn){width:220px;}
	.modal .modal-header .close, .modal .modal-header .close:link {background:url("../asset/images/farmingIco16.jpg") no-repeat scroll 0 0;filter:alpha(opacity=100);
    border: medium none;float: right;height: 11px;margin-top: 5px;opacity: 1;width: 11px;}
	.modal .modal-header .close:hover, .modal-header .close:focus {background:url("../asset/images/farmingIco17.jpg") no-repeat scroll 0 0;opacity: 1;filter:alpha(opacity=100);}

	      .baseFile_onload{ display:block; float:left; width:130px; height:130px; margin:25px 50px 25px 0;border:none;background:url("../asset/images/upload_file.png") no-repeat scroll 0 0; cursor:pointer;}
			.baseFile_onload:hover{ background:url("../asset/images/upload_file.png") no-repeat scroll 0 0; border:none;}
.baseFile_onload input{ position:absolute; right:0; top:0; width:130px; height:130px; opacity:0; filter:alpha(opacity=0); cursor:pointer;}
.baseFile_pic194 img{ width:194px; height:94px;}
.bootstrap-select{width:100%;}

.farmingMageTab_fjxx td{ padding-bottom:15px;}
	</style>
    	<td valign="top">
                <div class="inbentory_file_main">
                <!--左侧二级导航 -->
                <div class="inbentory_level_wap">
                    <div class="inbentory_level">
                        <strong class="inben_first inben_first2">
                            <a href="javascript:;"><i class="icon_L icon_rkgl"></i>基础设置</a><b class="b_arrow"></b>
                        </strong>
                        <ol class="inben_second">
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/user/UpdateEnterpriseSettings.seam?enterpriseId=#{sessionTake.enterpriseInfoId}','_self')" >
                            	<i class="icon_sed"></i>企业设置                   	
                            </li>
                            <!-- 管理版和以前的版本（标准、白金...)显示 -->
                            <h:panelGroup rendered="#{sessionTake.nowVersionService.basicService.basicServiceId==10 or sessionTake.nowVersionService.basicService.serviceType eq 1}">
                            	<li class="sed_item" onclick="window.open('#{request.contextPath}/user/ModuleSettings.seam','_self')" ><i class="icon_sed"></i>模块配置</li>
                            </h:panelGroup>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/dictionary/DataDicinfoList.seam','_self')" ><i class="icon_sed"></i>字段管理</li>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/user/EnterpriseCommunityList.seam','_self')" ><i class="icon_sed"></i>角色管理</li>
                            <s:fragment rendered="#{enterpriseInfoHome.enterpriseInfo.govState}">
	                        	<li class="sed_item" onclick="window.open('#{request.contextPath}/user/AuditInformationList.seam','_self')" ><i class="icon_sed"></i>审核信息</li>
	                        </s:fragment>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/system/RecycleInfoList_1.seam','_self')" ><i class="icon_sed"></i>回收站</li>
                        </ol>
                        <strong class="inben_first inben_first2">
                            <a href="javascript:;"><i class="icon_L icon_ckgl"></i>生产管理设置</a><b class="b_arrow"></b>
                        </strong>
                        <ol class="inben_second">
                            <h:panelGroup rendered="#{s:hasRole('certification')}">
                            	<li class="sed_item" onclick="window.open('#{request.contextPath}/map/CertificationList.seam','_self')" ><i class="icon_sed"></i>认证信息</li>
                            </h:panelGroup>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/message/TunnelGroupList.seam','_self')" ><i class="icon_sed"></i>分组管理</li>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/product/InputsInfoList.seam?goodsTypeInfoId=5','_self')" ><i class="icon_sed"></i>投入品信息</li>
                        </ol>
                        <strong class="inben_first inben_first2">
                            <a href="javascript:;"><i class="icon_L icon_zkgl"></i>销售管理设置</a><b class="b_arrow"></b>
                        </strong>
                        <ol class="inben_second">
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/product/GoodsInfoList.seam','_self')"><i class="icon_sed"></i>物料信息</li>
                            <li class="sed_item sed_cur" onclick="window.open('#{request.contextPath}/product/ProductInfoList.seam','_self')" ><i class="icon_sed"></i>商品信息</li>
                        </ol>
                        <strong class="inben_first inben_first2">
                            <a href="javascript:;"><i class="icon_L icon_pdgl"></i>硬件管理设置</a><b class="b_arrow"></b>
                        </strong>
                        <ol class="inben_second">
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/device/DeviceList.seam','_self')"><i class="icon_sed"></i>设备管理</li>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/device/VideoList.seam','_self')" ><i class="icon_sed"></i>视频管理</li>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/farming/AmRfidInfoList.seam','_self')" ><i class="icon_sed"></i>RFID卡管理</li>
                        </ol>
                    </div>
                    <i class="collapse_btn"></i>
                </div>
                <!--左侧二级导航 -->
				<!--右侧 -->
                <div class="inbentory_content">
       <!-- #{productInfoList.works()} -->
		<div class="right_c">
			<!-- Modal 添加产品弹窗开始 -->
			<div class="modal fade" id="myModalAdd" tabindex="-1" role="dialog"
						aria-labelledby="myModalLabel" aria-hidden="true">
				<div class="modal-dialog" style="width:400px;">
					<div class="modal-content">
						<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal">
								</button>
								<h4 class="modal-title font14" id="myModalLabel">生成商品</h4>
								</div>
								<div class="modal-body" style="padding-bottom: 0;">
									<h5 class="modal-title font14" id="mesg" style="color:red;margin-bottom:10px;">*请选择您的种植信息/模型库中的作物自动生成相应商品！</h5>
									<table class="farmingMageTab_fjxx" style="width:100%;">
										<tr id="easy">
											<td width="80" align="right">种植信息:</td>
											<td width="242" style="padding-left: 15px;">
												<select id="mateId" class="selectpicker" data-live-search="true" multiple="multiple" style="width:242" title="请选择">
													<option value="-1" disabled="disabled">请选择</option>
													<a4j:repeat value="#{productInfoList.cropInfoList}" var="_floristics">
														<s:fragment rendered="#{!_floristics[2]}">
															<option value="#{_floristics[0]}" disabled="disabled">#{_floristics[1]}</option>
														</s:fragment>
														<s:fragment rendered="#{_floristics[2]}">
															<option value="#{_floristics[0]}">#{_floristics[1]}</option>
														</s:fragment>
														</a4j:repeat>
			                                	</select>
                        						</td>
											</tr>
											<tr id="diff1" >
												<td width="80" align="right">模型库:</td>
												<td width="242" style="padding-left: 15px;">
												<select id="modelId" class="selectpicker" data-live-search="true" multiple="multiple" style="width:200px;" title="请选择">
													<option value="-1" disabled="disabled">请选择</option>
													<a4j:repeat value="#{productInfoList.modelList}" var="_floristics">
														<s:fragment rendered="#{!_floristics[2]}">
															<option value="#{_floristics[0]}" disabled="disabled">#{_floristics[1]}</option>
														</s:fragment>
														<s:fragment rendered="#{_floristics[2]}">
															<option value="#{_floristics[0]}">#{_floristics[1]}</option>
														</s:fragment>
													</a4j:repeat>
			                                	</select>
												</td>
											</tr>
										</table>
									</div>
									<input  type="hidden"  value="" id="maid"/>
									<input  type="hidden"  value="" id="moid"/>
									<div class="modal-footer" style="text-align:center;">
										<input type="button" class="btn btn-primary jilubutton" value="生成" onclick="checkProductName()"></input>
										<button type="button" onclick="goBack()" class="btn btn-default">返回</button>
									</div>
								</div>
							</div>
						</div>
			<!-- Modal 添加产品弹窗 结束 -->
                	<div class="r_title">
                    	<div class="r_t_l"><font size="4">商品信息</font></div>
                    </div>
					<br/>
					
                    <h:form id="productInfoImport" enctype="multipart/form-data">
                    <!-- Modal -->
					<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
					<div class="modal-dialog" style="width:446px; margin:0; left:50%; margin-left:-223px; top:50%; margin-top:-146px;position: absolute;">
					<div class="modal-content">
					     <div class="modal-header">
					        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
					        <h4 class="modal-title" id="myModalLabel">导入商品信息</h4>
					      </div>
					      <div class="modal-body">
					      	<div style="overflow: hidden;">
						      	<s:link style="float:left; width:130px; height:130px; margin:25px 50px 25px 50px;" propagation="none" view="/product/ProductInfoList.xhtml" action="#{productInfoHome.exportExcelTemplate}" >
						      		<img src="#{request.contextPath}/asset/images/download_template.png" />
						      	</s:link>
						        <span class="baseFile_onload">
                    			 <s:fileUpload id="uploadFile" accept="application/vnd.ms-excel,application/ms-excel" contentType="application/vnd.ms-excel,application/ms-excel"
									fileName="#{productInfoHome.fileName}" data="#{productInfoHome.excelFile}" style="background-img:../image/pl_03.jpg;font-size:42px;" onchange="submitFile()">
								</s:fileUpload>
								<h:commandButton id="upl" style="display:none;"  value="导入" action="#{productInfoHome.importExcel}"/>
							</span>
					      	</div>
					      	<p style="text-align:center; color:#f00;font-size:14px;font-weight:bold;" class="pclass">导入失败，商品编码重复、商品类型错误！</p>
					      </div>
					</div>
					</div>
					</div>
					
					<div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
					<div class="modal-dialog" style="width:446px; margin:0; left:50%; margin-left:-223px; top:50%; margin-top:-146px;position: absolute;">
					<div class="modal-content">
					     <div class="modal-header">
					        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
					        <h4 class="modal-title" id="myModalLabel">导入渠道价格</h4>
					      </div>
					      <div class="modal-body">
					      	<div style="overflow: hidden;">
						      	<s:link style="float:left; width:130px; height:130px; margin:25px 50px 25px 50px;" propagation="none" view="/product/ProductInfoList.xhtml" action="#{productInfoHome.exportPriceTemplate}" >
						      		<img src="#{request.contextPath}/asset/images/download_template.png" />
						      	</s:link>
						        <span class="baseFile_onload">
                    			 <s:fileUpload id="uploadFile2" accept="application/vnd.ms-excel,application/ms-excel" contentType="application/vnd.ms-excel,application/ms-excel"
									fileName="#{productInfoHome.fileName2}" data="#{productInfoHome.excelFile2}" style="background-img:../image/pl_03.jpg;font-size:42px;" onchange=" jquery('#login').show();jquery('#productInfoImport\\:upl2').trigger('click');">
								</s:fileUpload>
								<h:commandButton id="upl2" style="display:none;"  value="导入" action="#{productInfoHome.importPriceList}"/>
							</span>
					      	</div>
					      	<p style="text-align:center; color:#f00;font-size:14px;font-weight:bold;" class="pclass2"></p>
					      </div>
					</div>
					</div>
					</div>
					</h:form>
					<h:form id="productInfoSearch">
                    	<div class="z_r_ser">
	                    	<table cellpadding="0" cellspacing="0" class="cxtja" style="margin:0;">
	                           <tr>
                                <td width="70%">
                                <div class="public-search">  
                               		 <h:inputHidden value="#{productInfoList.tag}" /> 
                                	<span class="octicon-search02"></span>
                                	<h:inputText id="searchName" styleClass="form-control nw300 srarchfont" value="#{productInfoList.searchName}" style="color:#000"/>
                                	<h:inputHidden id="searchType" value="#{productInfoList.searchType}"/>
                                </div>
                                	<h:commandButton id="search" styleClass="btn btn-primary" onclick="return checkSearch();" value="搜索" action="/product/ProductInfoList.xhtml">                                	
	                                </h:commandButton>
                                </td>
                                 <td height="30" align="left" valign="bottom">
	                                <h:inputHidden id="flag" value="#{productInfoList.flag}"/>
	                                <a class="gjss_a gjtop" style="text-decoration: none;"  href="javascript:" onclick="op(this)" aa="#{productInfoList.flag=='2'?'2':'1'}">高级搜索</a></td>
                           </tr>
	                       </table>   
	                              <!--添加按钮开始-->
		                    <div class="tjan_02" style="margin-top: -33px;">
		                    	<a class="btn btn-primary" href="javascript:void(0);" style="margin-right:15px" onclick="jquery('#myModal2').modal('show');jquery('.pclass2').html('');" ><strong style="cursor: pointer;">批量定价</strong></a>
		                    	<div class="btn-group">
									<button type="button" class="btn btn-success dropdown-toggle" data-toggle="dropdown">添加
										<span class="caret"></span>
									</button>
									<ul class="dropdown-menu">
							  			<li>
		                    				<a href="#{request.contextPath}/product/ProductInfoEdit.seam?productInfoProductInfoId=null &amp; name=#{productInfoList.pageNum}">添加</a>
		                    	
							  			</li>
							  			<li>
		                    				<a href="#{request.contextPath}/product/FastProductInfoEdit.seam?productInfoProductInfoId=null &amp; name=#{productInfoList.pageNum}">快速添加</a>
		                    	
							  			</li>
							  			<li>
							  				<a href="javascript:void(0);" onclick="addProduct();">自动生成</a>
							  			</li>
									</ul>
								</div>
		                    	 <div class="btn-group bootstrap_select fr" style="margin-left:5px;">
			                    	<button type="button" class="btn dropdown-toggle selectpicker btn-default" data-toggle="dropdown">
			                    		<span id="">导入导出</span>
			                    		<span class="caret"></span>
			                    	</button>
			                    	<ul class="dropdown-menu" role="menu">
					                	<li>
					                		<a href="javascript:void(0);" onclick="showUpload()" ><strong style="cursor: pointer;">导入</strong></a>
					                	</li>
					                	<li>
					                		<a href="#{request.contextPath}/inOut/ProductBarCode.seam?searchName=#{productInfoList.searchName}&amp;flag=#{productInfoList.flag}&amp;productCode=#{productInfoList.productInfo.productCode}&amp;productName=#{productInfoList.productInfo.name}&amp;typeCode=#{productInfoList.productInfo.productType.typeCode}"  target="_blank"><strong style="cursor: pointer;">打印条形码</strong></a>
					                	</li>
									</ul>
								</div>
		                    </div>
                    <!--添加按钮结束-->                       
	                    </div>
                    	<div class="gjs" style="#{productInfoList.flag=='1'?'display:none':''}">
                         	<div class="gjss_con">
                         		<div class="gjss_w gjss_w1" style="width:220px;">
                                    <table>
                                        <tr>
                                            <td class="all_te">商品编码：</td>
                                            <td>
                                            	<h:inputText id="productCode" styleClass="form-control nw84"  value="#{productInfoList.productInfo.productCode}" />
												
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                         		<div class="gjss_w gjss_w1" style="width:220px;" >
                                    <table>
                                        <tr>
                                            <td class="all_te" >商品名称：</td>
                                            <td>
                                            <h:inputText id="name" styleClass="form-control nw84"  value="#{productInfoList.productInfo.name}" />
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                                <div class="gjss_w gjss_w1" style="width:320px;">
                                    <table style="width: 100%">
                                        <tr>
                                            <td class="all_te">商品类型：</td>
                                            <td >
                                         		<h:selectOneMenu id="productType" class="selectpicker"  value="#{productInfoList.productInfo.productType.typeCode}">
							                   		<f:selectItem itemLabel="请选择" />
							                   		<f:selectItems value="#{productInfoList.queryProductTypeByCodeList()}"/>
							                    </h:selectOneMenu>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                               <div class="clear"></div> 
                         </div>
                    	<div class="clear"></div>
                    </div>
                    </h:form>                         
                  
              
                    <table width="100%" class="ze_table" cellpadding="0" cellspacing="0">
                    	<tr>
                    		<td width="5" height="4"><img src="#{request.contextPath}/asset/images/table_d_40.jpg" width="5" height="4" /></td>
                    		<td colspan="8" style="border-top:1px solid #e1e1e1; background:#f0f5fb;"></td>
                            <td width="5" height="4"><img src="#{request.contextPath}/asset/images/table_d_43.jpg" width="5" height="4" /></td>
                    	</tr>
                    	<tr>
                    		<th class="ze_bg ze_bt_le" width="5" height="4"></th>
                    		<th class="ze_bg" width="2%"></th>
                            <th class="ze_bg" width="16%">商品编码</th>
                    		<th class="ze_bg" width="16%">商品名称</th>
                    		<th class="ze_bg" width="16%">商品类型</th>
                    		<th class="ze_bg" width="16%">商品规格</th>
                    		<th class="ze_bg" width="10%">原价</th>
                    		<th class="ze_bg" width="11%">是否上架</th>
                    		<th class="ze_bg" width="13%">操作</th>
                            <th class="ze_bg ze_bt_ri" width="5" height="4"></th>
                    	</tr>
						<s:decorate rendered="#{empty productInfoList.productList}">
	                    	<tr>
	                    		<td class="ze_bg2" colspan="8"><h:outputText value="没有找到符合条件的记录" /></td>
	                    	</tr>
						</s:decorate>
						<ui:repeat value="#{productInfoList.productList}" var="_productInfo" rendered="#{not empty productInfoList.productList}" rowKeyVar="_index">
                    	<tr>
                    		<td class="ze_bg2 ze_bt_le" width="5" height="4"></td>
                    		<td  class="ze_bg2">
                    		 <ui:fragment rendered="#{_productInfo[11]==null}">
                            	  <img src="#{request.contextPath}/asset/images/farmingIco01.png" width="14" height="14" title="还未完成商品构成"/>
                            	  </ui:fragment>
                    		</td>
                            <td class="ze_bg2">
                            	<h:outputText  value="#{_productInfo[1]}" />
                            </td>
                            <td class="ze_bg2"><h:outputText  value="#{_productInfo[2]}" /></td>
                            <td class="ze_bg2"><h:outputText  value="#{_productInfo[4]}" /></td>
                    		<td class="ze_bg2">
                    			<h:outputText  value="#{_productInfo[7] &gt; 0? _productInfo[7] :''}#{productInfoHome.unitName(_productInfo[9])}#{_productInfo[10].trim()!=null &amp;&amp; _productInfo[10].trim()!=''?'/':''}#{_productInfo[10]}" />
                    		</td>
                    		<td class="ze_bg2"><h:outputText  value="#{_productInfo[12]}" /></td>
                    		<td class="ze_bg2"><h:outputText  value="#{_productInfo[8]?'是':'否'}" /></td>
                    		<td class="ze_bg2">
                            	<s:link propagation="none"  view="/#{empty from ? 'product/ProductInfo' : from}.xhtml" styleClass="list_view"  id="productInfoViewId" title="查看">
									<f:param name="productInfoProductInfoId" value="#{_productInfo[0]}" />
									<f:param name="pageNum" value="#{productInfoList.pageNum}"/>
									<f:param name="searchName" value="#{productInfoList.searchName}"/>
									<f:param name="searchProductCode" value="#{productInfoList.productInfo.productCode}"/>
									<f:param name="searchProductName" value="#{productInfoList.productInfo.name}"/>
									<f:param name="searchTypeCode" value="#{productInfoList.productInfo.productType.typeCode}"/>
									<f:param name="searchFlag" value="#{productInfoList.flag}"/>
								</s:link>&#160;
								<h:outputText rendered="#{_productInfo[14] eq null}">
                                <s:link propagation="none"  view="/product/ProductInfoEdit.xhtml"     styleClass="list_edit" id="productInfoEdit" rendered="#{empty from}" title="编辑">
	                                <f:param name="productInfoProductInfoId" value="#{_productInfo[0]}" />
	                                <f:param name="pageNum" value="#{productInfoList.pageNum}"/>
	                                <f:param name="searchName" value="#{productInfoList.searchName}"/>
									<f:param name="searchProductCode" value="#{productInfoList.productInfo.productCode}"/>
									<f:param name="searchProductName" value="#{productInfoList.productInfo.name}"/>
									<f:param name="searchTypeCode" value="#{productInfoList.productInfo.productType.typeCode}"/>
									<f:param name="searchFlag" value="#{productInfoList.flag}"/>
								</s:link>&#160;
								<s:link propagation="none"  view="/product/ProductInfoEdit.xhtml"   title="删除"  styleClass="list_delete" action="#{productInfoHome.remove}" onclick="return deleteSp('#{_productInfo[13]}')" id="productInfoDelete" rendered="#{empty from}">
	                                <f:param name="productInfoProductInfoId" value="#{_productInfo[0]}" />
	                                <f:param name="pageNum" value="#{productInfoList.pageNum}"/>
	                                <f:param name="searchName" value="#{productInfoList.searchName}"/>
									<f:param name="searchProductCode" value="#{productInfoList.productInfo.productCode}"/>
									<f:param name="searchProductName" value="#{productInfoList.productInfo.name}"/>
									<f:param name="searchTypeCode" value="#{productInfoList.productInfo.productType.typeCode}"/>
									<f:param name="searchFlag" value="#{productInfoList.flag}"/>
                                </s:link>
                                </h:outputText>
                            </td>
                            <td class="ze_bg2 ze_bt_ri" width="5" height="4"></td>
                    	</tr>
                    	</ui:repeat>
                    </table>
                    <!--翻页开始-->
                    <table style="height:30px; margin:40px auto 0 auto;" cellpadding="0" cellspacing="0">
                    	<tr>
                    	<s:div rendered="#{not empty productInfoList.productList}"> 
			                <s:decorate rendered="#{!productInfoList.previousExists}">
			                	<td><img src="#{request.contextPath}/asset/images/page_68.jpg" width="4" height="30" /></td>
			                </s:decorate>
			                 <s:decorate rendered="#{productInfoList.previousExists}">
			                <td><img src="#{request.contextPath}/asset/images/page_67.jpg" width="4" height="30" /></td>
			                </s:decorate>
			                <s:decorate rendered="#{productInfoList.previousExists}">
	                            <td class="td_t_b">
		                            <s:link propagation="none"  view="/product/ProductInfoList.xhtml" >首页
		                            	<f:param name="pageNum" value="0" />
		                            	<f:param name="searchType" value="0" />
		                            </s:link>
	                            </td>
	                            <td class="td_t_b td_t_t" style="padding:0; width:30px;">
		                            <s:link propagation="none"  view="/product/ProductInfoList.xhtml"  styleClass="no_n" >
		                            	<f:param name="pageNum" value="#{productInfoList.previousFirstResult}"/>&lt;
		                            	<f:param name="searchType" value="0" />
		                            </s:link>
	                            </td>
	                        </s:decorate>
					        <a4j:repeat var="_page" value="#{productInfoList.pageList}" rowKeyVar="_index">
								<td class="td_t_b #{productInfoList.previousExists or _index >0 ?'td_t_t':''} #{_page eq productInfoList.pageNum?'onp':''}">
									<s:link propagation="none"  view="/product/ProductInfoList.xhtml" value="#{_page}" id="previousPage">
										<f:param name="pageNum" value="#{_page}" />
										<f:param name="searchType" value="0" />
									</s:link>
								</td>
							</a4j:repeat>
							<s:decorate rendered="#{productInfoList.nextExists}">
                            <td class="td_t_b td_t_t">
	                            <s:link propagation="none"  view="/product/ProductInfoList.xhtml"   styleClass="no_d" >
	                            	<f:param name="pageNum" value="#{productInfoList.nextFirstResult}" />&gt;
	                            	<f:param name="searchType" value="0" />
	                            </s:link>
                            </td>
                            <td class="td_t_b td_t_t">
								 <s:link propagation="none"  view="/product/ProductInfoList.xhtml" >尾页
								 	<f:param name="pageNum" value="#{productInfoList.PAGE_COUNT}" />
								 	<f:param name="searchType" value="0" />
								 </s:link>
							</td>
							</s:decorate>
							<td class="td_t_b td_t_t" style=" color:#9a9a9c;">共#{productInfoList.PAGE_COUNT}页</td>
                            <td ><img src="#{request.contextPath}/asset/images/page_70.jpg" width="4" height="30" /></td>

                    	</s:div>
                    	</tr>
                    </table>
<a4j:form> 
     <a4j:jsFunction name="addCommoInfo" action="#{productInfoList.addCommoInfo}" >
			<a4j:actionparam name="mateIds" assignTo="#{productInfoList.mateIds}"/>
			<a4j:actionparam name="modelIds" assignTo="#{productInfoList.modelIds}"/>
	</a4j:jsFunction>
	<a4j:jsFunction name="checkName" action="#{productInfoList.checkName}" data="#{productInfoList.returnString}" oncomplete="insert(data)">
			<a4j:actionparam name="mateIds" assignTo="#{productInfoList.mateIds}"/>
			<a4j:actionparam name="modelIds" assignTo="#{productInfoList.modelIds}"/>
	</a4j:jsFunction>
</a4j:form> 
                    <!--翻页结束-->
                    <div class="clear"></div>
                </div><!--right_c结束-->
</div>
</div>
<script type="text/javascript">
//<![CDATA[
            jquery(function(){
			document.onkeydown = function(e){
			    var ev = document.all ? window.event : e;
			    if(ev.keyCode==13) {
			    	jquery("#productInfoSearch\\:search").trigger('click');//点击回车时，走搜索方法
			     }
			}
			jquery('.selectpicker').selectpicker();
			jquery('#mateId').selectpicker({noneSelectedText:"请选择"});
			jquery('#modelId').selectpicker({noneSelectedText:"请选择"});
           });
    jquery("#login").hide();
	var str = "#{productInfoHome.alertString}";
	if(str != null && str != ""){
		jquery("#myModal").modal('show');
		jquery(".pclass").html(str);
	}
    jquery(".rich-calendar-input").addClass("form-control nw84");
    jquery(".rich-calendar-input").removeClass("rich-calendar-input");
    
    
    var str = "#{productInfoHome.alertString2}";
	if(str != null && str != ""){
		jquery("#myModal2").modal('show');
		jquery(".pclass2").html(str);
	}
	
	
    function showUpload(){
    	jquery("#myModal").modal('show');
    	jquery(".pclass").html("");
    }

    function submitFile(){
    	 jquery("#login").show();
    	jquery("#productInfoImport\\:upl").trigger('click');
    }


op = function(ind){
		if(ind.getAttribute("aa")=="1"){
			jquery(".gjs").slideDown(500);
			jquery(".gjss_a").attr("aa",2).removeClass("gjtop").addClass("gjbottom");
			document.getElementById("productInfoSearch:flag").value="2";
		}else{
			jquery(".gjs").slideUp(500);
			jquery(".gjss_a").attr("aa",1).removeClass("gjbottom").addClass("gjtop");
			document.getElementById("productInfoSearch:productCode").value="";
			document.getElementById("productInfoSearch:productType").value="";
			document.getElementById("productInfoSearch:name").value="";
			document.getElementById("productInfoSearch:flag").value="1";
		}
	}

	function checkInteger(obj,str){
		if(obj.value!=""){
			var v = obj.value;
			var reg = /^[1-9]+[0-9]*]*$/; 
			if (!reg.test(v)){
				alert(str);
				obj.focus();
				return false;
			}
		}
		return true;
	}
    checkSearch = function(){       
       jquery("#productInfoSearch\\:searchType").val("1");
    }      
se = function(obj){
	jquery(".sel").each(function(){
		jquery(this).removeClass("current");
	});
	jquery("#sel"+obj).addClass("current");

	jquery(".box2 > div").each(function(index,domEle){
		if(index==obj){
			jquery(domEle).css("display","block");
		}else{
			jquery(domEle).css("display","none");
		}
	});
}

function deleteSp(va){
	if(confirm('确定删除吗？')){
		if(va!=null && va!=''){
			alert("有此商品构成的商品，该商品不能删除！");
			return false;
		}else{
			return true;
		}
	}else{
		return false;
	}
}

//弹出自动添加商品的modal窗口
function addProduct(){
	jquery("#myModalAdd").modal("show");
}
//弹窗返回方法
function goBack(){
	  jquery("#myModalAdd").modal("hide");
 }
//检测商品是否存在
function checkProductName(){
	 jquery("#maid").val(jquery("#mateId").val());
	 jquery("#moid").val(jquery("#modelId").val());
	var mateIds = jquery("#maid").val();
	var modelIds = jquery("#moid").val();
	if(mateIds == "" && modelIds == ""){
		alert("种植和模型至少选择一种");
		return false;
	}
	if(confirm("自动生成商品规格默认为kg，并且规格生成后不能修改，确认生成？")){
		checkName(mateIds,modelIds);
	}else{
		 jquery("#myModalAdd").modal("hide");
		 jQuery("#mateId").selectpicker("val",null);
		 jQuery("#modelId").selectpicker("val",null);
	}
}

	//插入商品方法
	function insert(data){
		jquery("#maid").val(jquery("#mateId").val());
		 jquery("#moid").val(jquery("#modelId").val());
		var mateIds = jquery("#maid").val();
		var modelIds = jquery("#moid").val();
		if(data == "no"){
			addCommoInfo(mateIds,modelIds);
		}else{
			alert("已存在"+data+",不允许添加!");
			return false;
		}
	}
//]]>
</script>
<script type="text/javascript">
			    jquery('.selectpicker').selectpicker();
			</script>
</td>
	</ui:define>

</ui:composition>

<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:a="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich"
    template="/layout/template_new.xhtml">
	<ui:define name="body">
	#{goodsInfoHome.inputsDataInit()}
	<link href="#{request.contextPath}/asset/css/commons/commons.css" rel="stylesheet" type="text/css"></link>
	<link href="#{request.contextPath}/asset/css/archive/SeedInput.css" rel="stylesheet" type="text/css"></link>
	<script type="text/javascript" src="#{request.contextPath}/asset/js/inputs/SeedInput.js"></script>
	<link type="text/css" rel="stylesheet" href="#{request.contextPath}/asset/css/settings/EnterpriseSettings.css" />
    <script type="text/javascript" src="#{request.contextPath}/asset/js/EnterpriseLeftMenu.js"></script>
    <link rel="stylesheet" href="#{request.contextPath}/asset/css/webgis/select2.css" />
    
	<style>
	[class^="icon-"], [class*=" icon-"] {background-image: url("../asset/images/glyphicons-halflings.png");}
	</style>
	   <div class="box_back" id="login" style="display: none; z-index: 1000">
			<div id="login2"
				style="width: 60px; height: 60px; margin: 220px auto 0 auto;">
				<img src="../asset/images/loginda.gif" />
			</div>
		</div>
                <td valign="top">
                <div class="inbentory_file_main">
                <!--左侧二级导航 -->
                <div class="inbentory_level_wap">
                    <div class="inbentory_level">
                        <strong class="inben_first inben_first2">
                            <a href="javascript:;"><i class="icon_L icon_rkgl"></i>基础设置</a><b class="b_arrow"></b>
                        </strong>
                        <ol class="inben_second">
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/user/UpdateEnterpriseSettings.seam?enterpriseId=#{sessionTake.enterpriseInfoId}','_self')" >
                            	<i class="icon_sed"></i>企业设置                   	
                            </li>
                            <!-- 管理版和以前的版本（标准、白金...)显示 -->
                            <h:panelGroup rendered="#{sessionTake.nowVersionService.basicService.basicServiceId==10 or sessionTake.nowVersionService.basicService.serviceType eq 1}">
                            	<li class="sed_item" onclick="window.open('#{request.contextPath}/user/ModuleSettings.seam','_self')" ><i class="icon_sed"></i>模块配置</li>
                            </h:panelGroup>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/dictionary/DataDicinfoList.seam','_self')" ><i class="icon_sed"></i>字段管理</li>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/user/EnterpriseCommunityList.seam','_self')" ><i class="icon_sed"></i>角色管理</li>
                            <s:fragment rendered="#{enterpriseInfoHome.enterpriseInfo.govState}">
	                        	<li class="sed_item" onclick="window.open('#{request.contextPath}/user/AuditInformationList.seam','_self')" ><i class="icon_sed"></i>审核信息</li>
	                        </s:fragment>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/system/RecycleInfoList_1.seam','_self')" ><i class="icon_sed"></i>回收站</li>
                        </ol>
                        <strong class="inben_first inben_first2">
                            <a href="javascript:;"><i class="icon_L icon_ckgl"></i>生产管理设置</a><b class="b_arrow"></b>
                        </strong>
                        <ol class="inben_second">
                            <h:panelGroup rendered="#{s:hasRole('certification')}">
                            	<li class="sed_item" onclick="window.open('#{request.contextPath}/map/CertificationList.seam','_self')" ><i class="icon_sed"></i>认证信息</li>
                            </h:panelGroup>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/message/TunnelGroupList.seam','_self')" ><i class="icon_sed"></i>分组管理</li>
                            <li class="sed_item sed_cur" onclick="window.open('#{request.contextPath}/product/InputsInfoList.seam?goodsTypeInfoId=5','_self')" ><i class="icon_sed"></i>投入品信息</li>
                        </ol>
                        <strong class="inben_first inben_first2">
                            <a href="javascript:;"><i class="icon_L icon_zkgl"></i>销售管理设置</a><b class="b_arrow"></b>
                        </strong>
                        <ol class="inben_second">
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/product/GoodsInfoList.seam','_self')"><i class="icon_sed"></i>物料信息</li>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/product/ProductInfoList.seam','_self')" ><i class="icon_sed"></i>商品信息</li>
                        </ol>
                        <strong class="inben_first inben_first2">
                            <a href="javascript:;"><i class="icon_L icon_pdgl"></i>硬件管理设置</a><b class="b_arrow"></b>
                        </strong>
                        <ol class="inben_second">
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/device/DeviceList.seam','_self')"><i class="icon_sed"></i>设备管理</li>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/device/VideoList.seam','_self')" ><i class="icon_sed"></i>视频管理</li>
                            <li class="sed_item" onclick="window.open('#{request.contextPath}/farming/AmRfidInfoList.seam','_self')" ><i class="icon_sed"></i>RFID卡管理</li>
                        </ol>
                    </div>
                    <i class="collapse_btn"></i>
                </div>
                <!--左侧二级导航 -->
				<!--右侧 -->
                <div class="inbentory_content">
				<!-- Modal -->
				<div aria-hidden="false" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="myModal" class="modal fade in w600na" style="display: none;">
				  <div class="modal-dialog">
				    <div class="modal-content">
				      <div class="modal-header">
				        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				        <h4 class="modal-title" id="myModalLabel">提示框</h4>
				      </div>
				      <div class="modal-body">
				       <span id="spanValue">*号部分为必填项！</span>
				        
				        
				      </div>
				      <div class="modal-footer">
				        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
				        <button type="button" class="btn btn-primary" data-dismiss="modal">确认</button>
				      </div>
				    </div>
				  </div>
				</div>
	<h:form id="productInfo" enctype="multipart/form-data">
	<h:inputHidden id="goodsTypeInfo" value="#{goodsInfoHome.inputsInfo.goodsTypeInfo}" />
	<h:inputHidden value="#{goodsInfoHome.baseidString}" id="baseidString" name="baseidString"/>
	
                <div class="right_c" style="min-height:30px; padding-bottom:15px; padding-top:15px;">
            	<!-- 面包屑导航 开始 -->
                <div class="breadNav_wap mb15 clear">
                    <div class="breadNav_lt"><strong>投入品信息</strong></div>
                </div>
                <!-- 农场信息主体 开始 -->
                <div class="edit_title_wap mt20 mb20 clear">
                	<h2 class="text_title">基础信息</h2>
                </div>
                <table class="edit_infor_table" cellpadding="0" >
                	<tr>
                    	<td class="td_lt" style="width:125px;">投入品编号</td>
                        <td class="td_rt" style="width:300px;">
                        	<h:inputText id="goodsCode"  readonly="#{facesContext.renderResponse}"
			                        maxlength="50"  styleClass="form-control w220 fl" 
			                          value="#{goodsInfoHome.inputsInfo.goodsCode}">
			                </h:inputText>
                            <span class="star_red">*</span>
                        </td>
                        <td class="td_lt">投入品名称</td>
                        <td class="td_rt">
                        	<h:inputText id="barcode" maxlength="50" styleClass="form-control w220 fl" value="#{goodsInfoHome.inputsInfo.name}"></h:inputText>
                            <span class="star_red">*</span>
                        </td>
                    </tr>
                    <tr>
                    	<td class="td_lt">投入品类型</td>
                        <td class="td_rt">
                        	<div class="inline_block bootSelt220 fl">
                                <select class="" style="width:220px" data-live-search="true" id="record_type" onchange="trplx();">
                                	<option value="-1" >请选择</option>
                 				</select>
                   				<h:inputHidden value="#{goodsInfoHome.inputsInfo.inputsTypeId}" id="inputstypeHidden"/>
                   				<h:inputHidden value="#{goodsInfoHome.inputsInfo.inputsType}" id="inputsTypeTotalHidden"/>
                            </div>
                            <span class="star_red">*</span>
                        </td>
                        <td class="td_lt">投入品规格</td>
                        <td class="td_rt">
                        	<div style="position:relative;">
                        		<h:inputText id="netContent" maxlength="50" styleClass="form-control nw90 fl" style="margin-right:10px;" 
						                value="#{goodsInfoHome.inputsInfo.netContent}"></h:inputText>
                                <div class="inline_block bootSelt80 fl">
                                    <h:selectOneMenu styleClass="selectpicker" id="goodsUnitSelect"  value="#{goodsInfoHome.inputsInfo.goodsUnit}" onchange="zhzUnit();">
				                   		<s:selectItems value="#{goodsInfoHome.getAllInputsUnit()}" var="unit" label="#{unit.name}" itemValue="#{unit.id}"/>
				                   	</h:selectOneMenu>
				                   	<h:inputHidden value="#{goodsInfoHome.goodsUnit}" id="goodsUnitHidden"/>
                                </div>
                                <span style="float:left;line-height:34px;padding:0 5px;">&frasl;</span>
                                <h:inputText id="packSpec" maxlength="50" styleClass="form-control nw90" style="margin-right:0px;float:left;"
						              value="#{goodsInfoHome.inputsInfo.packSpec}"></h:inputText>
                                <span class="star_red fl">*</span>
                                <p style="position:absolute; left:290px; top:0;height:34px;line-height:16px; font-size:12px;">净含量<br />单位规格 &frasl; 包装规格</p>
                                <p style="position:absolute; left:0px; top:34px; line-height:16px; font-size:12px; color:#f00;">投入品规格在提交投入品信息后不可修改！</p>
                            </div>
                        </td>
                    </tr>
                    <tr>
                    	<td class="td_lt">存储类型</td>
                        <td class="td_rt">
                        	<div class="inline_block bootSelt220 fl">
                               <h:selectOneMenu styleClass="selectpicker" id="productType" style="" value="#{goodsInfoHome.goodsStorageTypeId}">
			                   		<s:selectItems value="#{goodsInfoHome.goodsStorgeTypeList()}" var="plant" label="#{plant.name}" itemValue="#{plant.goodsStorageTypeId}"/>
			                   </h:selectOneMenu>
                            </div>
                            <span class="star_red">*</span>
                        </td>
                        <td class="td_lt">保质期</td>
                        <td class="td_rt">
                            <h:inputText id="expirationDate"  styleClass="form-control w220 mr5 fl" maxlength="11"
						        value="#{goodsInfoHome.inputsInfo.expireDate}" style="margin-right:0px;"/>
                            <span style="float:left;line-height:34px;padding-left:5px;">月</span>
                            <span class="star_red">*</span>
                        </td>
                    </tr>
                    <tr>
                    	<td class="td_lt">适用标准</td>
                        <td class="td_rt">
                        	<div class="inline_block bootSelt220">
                                <select class="selectpicker" id="trpbiaozhun3" multiple="multiple" title="请选择" onchange="zhzsybz()">
                                  	<a:repeat value="#{goodsInfoHome.standardList}" var="_stand" rowKeyVar="_index">
                                  		<option value="#{_stand[0]}">#{_stand[1]}</option>
                                  	</a:repeat>
		                    	</select>
		                    	<h:inputHidden value="#{goodsInfoHome.inputsInfo.dataDicId}" id="inputsDataDicHidden"/>
                            </div>
                        </td>
                        <td class="td_lt">亩用种量</td>
                        <td class="td_rt">
                            <h:inputText id="seedsId"  styleClass="form-control w220 mr5 fl" maxlength="11"
						         value="#{goodsInfoHome.seedRecord.dosage}" style="margin-right:0px;" onkeyup="clearNoNum(2, this, event);" onblur="changeVal(this.value,2);"/>
                            <span style="float:left;line-height:34px;padding-left:5px;" id="unit">个</span>
                        </td>
                    </tr>
                    <tr>
                        <td class="td_lt">亩产</td>
                        <td class="td_rt">
                             <h:inputText id="yieldId"  styleClass="form-control w220 mr5 fl" maxlength="11" value="#{goodsInfoHome.seedRecord.yield}" style="margin-right:0px;" onkeyup="clearNoNum(2, this, event);"/>
                            <span style="float:left;line-height:34px;padding-left:5px;">kg</span>
                        </td>
                        <td class="td_lt">种子处理</td>
                        <td class="td_rt">
                            <h:inputText id="seedsOperationId"  styleClass="form-control nw221" maxlength="11" value="#{goodsInfoHome.seedRecord.seedDispose}" style="margin-right:0px;"/>
                        </td>
                    </tr>
                    <tr>
                    	<td class="td_lt">种子类别</td>
                        <td class="td_rt">
                        	<div class="inline_block bootSelt220">
                                <select class="selectpicker" id="seedsType" multiple="multiple" title="请选择" onchange="zhzfl()">
	                               	<option value="常规种">常规种</option>
	                               	<option value="杂交种">杂交种</option>
	                               	<option value="转基因">转基因</option>
	                               	<option value="非转基因">非转基因</option>
		                    	</select>
		                    	<h:inputHidden value="#{goodsInfoHome.seedRecord.seedCategory}" id="seedsTypeHidden"/>
                            </div>
                        </td>
                        <td class="td_lt">安全库存</td>
                        <td class="td_rt">
                            <h:inputText id="securityCount"  styleClass="form-control nw221" maxlength="11" value="#{goodsInfoHome.securityCountZhongZi}" style="margin-right:0px;"/>
                        </td>
                    </tr>
                    <tr>
                    	<td class="td_lt">图片</td>
                        <td class="td_rt" colspan="3">
                        	<!-- <div class="file_pic_wap" style="display:inline;">
                                <span class="file_pic">
                                    <i class="icon_btns"><img class="delete_btn" onClick="deleteFilePic(this,'.file_pic')" src="../images/information/fileImg_delet5.jpg" /></i>
                                    <img src="../images/information/FarmInfor_pic2.jpg"/>
                                </span>
                                <span class="file_pic">
                                    <i class="icon_btns"><img class="delete_btn" onClick="deleteFilePic(this,'.file_pic')" src="../images/information/fileImg_delet5.jpg" /></i>
                                    <img src="../images/information/FarmInfor_pic3.jpg"/>
                                </span>
                            </div>
                            <div class="file_btn">
                                <img style="width:320px; height:145px; display:none;" src="../images/information/FarmInfor_pic2.jpg" />
                                <img style="width:130px; height:130px;" src="../images/information/fileImg_btn130.jpg" />
                                <input type="file" style="height:200px;" />
                            </div> -->
                            <h:inputHidden value="#{goodsInfoHome.url}" id="url" name="url"/>
                    		<iframe src="#{request.contextPath}/product/AddInputsImage.seam?url=#{goodsInfoHome.url}" id="myframe" name="myframe" frameBorder="0" scrolling="no" width="130" onLoad="" style="position:relative;float:left;height:150px;display:block;"></iframe>
                            <div style="display:inline-block; padding-top:40px;box-sizing:border-box;">
                            	<p> <br /></p>
                            	<p style="color:#f00;">支持格式：jpg,gif,png,jpeg,bmp,3gp</p>
                            </div>
                        	
                        </td>
                    </tr>
                </table>
                <div class="edit_title_wap mt20 mb20 clear">
                	<h2 class="text_title">品种特性</h2>
                </div>
                <table class="edit_infor_table" cellpadding="0" >
                	<tr>
                    	<td class="td_lt" style="width:125px;">种植环境</td>
                        <td class="td_rt" style="width:300px;">
                        	<div class="inline_block bootSelt220 fl">
                                <select class="selectpicker" id="planting" multiple="multiple" title="请选择" onchange="zzhj()">
	                               	<option value="加热温室">加热温室</option>
	                               	<option value="日光温室">日光温室</option>
	                               	<option value="联栋温室">联栋温室</option>
	                               	<option value="春秋棚">春秋棚</option>
	                               	<option value="大田">大田</option>
	                               	<option value="果树">果树</option>
	                               	<option value="水面">水面</option>
	                               	<option value="养殖">养殖</option>
		                    	</select>
		                    	<h:inputHidden value="#{goodsInfoHome.seedRecord.plantEnvironment}" id="plantingHidden"/>
                            </div>
                        </td>
                        <td class="td_lt" style="width:125px;">适合区域</td>
                        <td class="td_rt">
                        	<div class="inline_block bootSelt220 fl">
                                <select class="selectpicker" id="area" multiple="multiple" title="请选择" onchange="shqy()">
	                               	<option value="全国">全国</option>
	                               	<a:repeat value="#{goodsInfoHome.areaList}" var="_area" rowKeyVar="_index">
	                               	<option value="#{_area[0]}">#{_area[0]}</option>
	                               	</a:repeat>
		                    	</select>
		                    	<h:inputHidden value="#{goodsInfoHome.seedRecord.suitArea}" id="areaHidden"/>
                            </div>
                        </td>
                    </tr>
                	<tr>
                    	<td class="td_lt">熟性</td>
                        <td class="td_rt">
                        	<div class="inline_block bootSelt220 fl">
                                <select class="selectpicker" id="mature" multiple="multiple" title="请选择" onchange="shuxing()">
                                   	<option value="早熟">早熟</option>
                                   	<option value="中早熟">中早熟</option>
                                   	<option value="中熟">中熟</option>
                                   	<option value="中晚熟">中晚熟</option>
                                   	<option value="晚熟">晚熟</option>
		                    	</select>
		                    	<h:inputHidden value="#{goodsInfoHome.seedRecord.maturity}" id="matureHidden"/>
                            </div>
                        </td>
                        <td class="td_lt">茬口</td>
                        <td class="td_rt">
                        	<h:inputText id="crop"  styleClass="form-control w220 fl" maxlength="11" value="#{goodsInfoHome.seedRecord.crops}" style="margin-right:0px;"/>
                            <span class="star_red">*</span>
                        </td>
                    </tr>
                	<tr>
                    	<td class="td_lt">抗性</td>
                        <td class="td_rt" colspan="3">
                        	<div class="textarea400">
                            	<h:inputTextarea id="resistance" styleClass="form-control" value="#{goodsInfoHome.seedRecord.resistant}" />
                                <!-- <span class="s_text">0 &frasl; 500</span> -->
                            </div>
                        </td>
                    </tr>
                	<tr>
                    	<td class="td_lt">外观特征</td>
                        <td class="td_rt" colspan="3">
                        	<div class="textarea400">
                            	<h:inputTextarea id="characteristics" styleClass="form-control" value="#{goodsInfoHome.seedRecord.shapeFeature}" />
                                <!-- <span class="s_text"></span> -->
                            </div>
                        </td>
                    </tr>
                	<tr>
                    	<td class="td_lt">营养口感</td>
                        <td class="td_rt" colspan="3">
                        	<div class="textarea400">
                            	<h:inputTextarea id="nutrition" styleClass="form-control" value="#{goodsInfoHome.seedRecord.nutrition}" />
                                <!-- <span class="s_text"></span> -->
                            </div>
                        </td>
                    </tr>
                	<tr>
                    	<td class="td_lt">注意事项</td>
                        <td class="td_rt" colspan="3">
                        	<div class="textarea400">
                            	<h:inputTextarea id="remark" styleClass="form-control" value="#{goodsInfoHome.seedRecord.remark}" />
                                <!-- <span class="s_text"></span> -->
                            </div> 
                        </td>
                    </tr>
                </table>
                <div class="edit_title_wap mt20 mb20 clear">
                	<h2 class="text_title">厂家信息</h2>
                </div>
                <table class="edit_infor_table" cellpadding="0">
                	<tr>
                    	<td class="td_lt" style="width:125px;">生产厂家</td>
                        <td class="td_rt" style="width:300px;">
                        	<h:inputText id="manufacturers" value="#{goodsInfoHome.inputsInfo.manufacturers}" class="form-control w220 fl"/>
                            <span class="star_red">*</span>
                        </td>
                        <td class="td_lt" style="width:125px;">网址</td>
                        <td class="td_rt">
                        	<h:inputText id="registrationNo" value="#{goodsInfoHome.seedRecord.url}" class="form-control w220"/>
                        </td>
                    </tr>
                	<tr>
                    	<td class="td_lt">联系人</td>
                        <td class="td_rt">
                        	<h:inputText id="nutrientContent" value="#{goodsInfoHome.seedRecord.contracts}" class="form-control w220"/>
                        </td>
                        <td class="td_lt">联系方式</td>
                        <td class="td_rt">
                        	<h:inputText id="phone" value="#{goodsInfoHome.seedRecord.phone}" class="form-control w220"/>
                        </td>
                    </tr>
                	<tr>
                    	<td class="td_lt">地址</td>
                        <td class="td_rt" colspan="3">
                        	<h:inputText id="address" value="#{goodsInfoHome.seedRecord.address}" class="form-control w400 fl"/>
                        </td>
                    </tr>
                </table>
                <div style="padding:50px 0;text-align:center;">
                	<h:commandButton id="persist" value="提交" styleClass="btn btn-primary" action="#{goodsInfoHome.inputsAdd}" rendered="#{goodsInfoHome.inputsInfo.goodsInfoId eq null}"  onclick="return checkSubmit()"/>
	            	<h:commandButton id="update" value="提交" styleClass="btn btn-primary" action="#{goodsInfoHome.inputsupdate}" rendered="#{goodsInfoHome.inputsInfo.goodsInfoId ne null}"   onclick="return checkSubmit()"/>
	            	<s:button view="/product/InputsInfoList.seam" styleClass="btn btn-default" value="返回" id="bn_left6" style="margin-left:10px" onclick="showImg();">
	            	<f:param name="pageNum" value="#{goodsInfoHome.pageNum}" />
	            	<f:param name="goodsTypeInfoId" value="5"/>
	            	<f:param name="baseidString" value="#{goodsInfoHome.baseidString}" />
	            	<f:param name="inputsType" value="#{goodsInfoHome.inputsType}"/>
	            	</s:button>
                </div>
                <!-- 农场信息主体 结束 -->
            </div> 
                </h:form>
                </div>
                </div>
            </td>  
              
    <!--右边结束-->   
<a:form>
    <a:queue  ignoreDupResponses="true"/>
 	<a:jsFunction name="getGoodsCode"  action="#{goodsInfoHome.getInputsInfoCode()}" data="#{goodsInfoHome.goodsCode}" oncomplete="changeGoodsCode(data)" >
         <a:actionparam name="gt" assignTo="#{goodsInfoHome.goodsType}"/>
         <a:actionparam name="gtc" assignTo="#{goodsInfoHome.goodsTypeCode}"/>
  	</a:jsFunction>
  	<a:jsFunction name="changePage" action="#{goodsInfoHome.changePage}" data="#{goodsInfoHome.totalInputsType}" oncomplete="">
		<a:actionparam name="type" assignTo="#{goodsInfoHome.type}"/>
	</a:jsFunction>
</a:form>
<script type="text/javascript" src="#{request.contextPath}/asset/js/webgis/select2.full.js" ></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/webgis/i18n/zh-CN.js" ></script>
 <!--添加按钮结束-->
<script type="text/javascript">
//<![CDATA[
     jQuery('.selectpicker').selectpicker();	  
     //回调将生成的编号赋值给goodsCode
     function changeGoodsCode(goodsCode){
  	   document.getElementById("productInfo:goodsCode").value=goodsCode;
     }  
     function showImg(){
  	   jquery("#login").show();
     }
     jquery(document).ready(function(){
    	 hiddenDiv(); 
	  	   var c = '#{goodsInfoHome.inputsInfo.goodsTypeInfo}';
	         if(c!='1' && c!='' && c!='0'){
	      	   jquery("#showPlant").hide();
	         }
	         jquery('.aaa').attr("data-live-search","true");
	         jquery('.selectpicker').selectpicker();
	         trplx();
     });
     function hiddenDiv(){ 	
         var code = '#{goodsInfoHome.inputsInfo.goodsCode}';
         //alert(code);
         if(code==''){       	      	    
        	   var a =  document.getElementById("productInfo:goodsTypeInfo").value;
        	   getGoodsCode('投入品',a);
         }
     }  

     function checkSubmit(){
    	jquery('#productInfo\\:inputsDataDicHidden').val(jquery("#trpbiaozhun3").val());
  	   	jquery('#record_type').val(jquery("#productInfo\\:inputstypeHidden").val());
  	  	jquery('#productInfo\\:goodsUnitHidden').val(jquery('#productInfo\\:goodsUnitSelect').val());
  	   	jquery('#productInfo\\:url').val(jquery("#myframe").contents().find(".plant_imgbd").attr('src'));
  	   	jquery("#productInfo\\:goodsTypeInfoId").val('5');
		var barcode=jquery("#productInfo\\:barcode").val();//投入品名称
		var recordType=jquery("#record_type").val();//投入品类型
		var netContent=jquery("#productInfo\\:netContent").val();//净含量
		var goodsUnitSelect=jquery("#productInfo\\:goodsUnitSelect").val();//单位规格
		var packSpec=jquery("#productInfo\\:packSpec").val();//包装规格
		var expirationDate=jquery("#productInfo\\:expirationDate").val();//保质期
		var trpbiaozhun3=jquery("#trpbiaozhun3").val();//适用标准
		var seedsId=jquery("#productInfo\\:seedsId").val();//亩用种量
		var yieldId=jquery("#productInfo\\:yieldId").val();//亩产
		var seedsOperationId=jquery("#productInfo\\:seedsOperationId").val();//种子处理
		var crop=jquery("#productInfo\\:crop").val();//茬口
		var resistance=jquery("#productInfo\\:resistance").val();//抗性
		var characteristics=jquery("#productInfo\\:characteristics").val();//外观特征
		var nutrition=jquery("#productInfo\\:nutrition").val();//营养口感
		var remark=jquery("#productInfo\\:remark").val();//注意事项
		
		var manufacturers=jquery("#productInfo\\:manufacturers").val();//生产厂家
		var registrationNo=jquery("#productInfo\\:registrationNo").val();//网址
		var nutrientContent=jquery("#productInfo\\:nutrientContent").val();//联系人
		var phone=jquery("#productInfo\\:phone").val();//联系电话
		var address=jquery("#productInfo\\:address").val();//地址

		if(barcode==''){
			jquery("#spanValue").html("投入品名称不能为空!");
			jquery("#myModal").modal('show');
			return false;
		}else if(barcode.length>50){
			jquery("#spanValue").html("投入品名称输入过长!");
			jquery("#myModal").modal('show');
			return false;
		}
		if(recordType == -1){
			jquery("#spanValue").html("请选择投入品类型!");
			jquery("#myModal").modal('show');
			return false;
		}
		if(netContent == ''){
			jquery("#spanValue").html("净含量不能为空!");
			jquery("#myModal").modal('show');
			return false;
	    }
		if(isNaN(netContent) && netContent!=''){
			jquery("#spanValue").html("请正确输入净含量!");
			jquery("#myModal").modal('show');
			return false;
		}
		if(netContent > 99999){
			jquery("#spanValue").html("净含量输入过大!");
			jquery("#myModal").modal('show');
			return false;
		}
		if(packSpec==''){
			jquery("#spanValue").html("包装规格不能为空!");
			jquery("#myModal").modal('show');
			return false;
		}else if(packSpec.length>20){
			jquery("#spanValue").html("包装规格输入过长!");
			jquery("#myModal").modal('show');
			return false;
		}
		if(expirationDate==""){
			jquery("#spanValue").html("保质期不能为空！");
			jquery("#myModal").modal('show');
			return false;
		}else if(!checkInteger(expirationDate)){
			jquery("#spanValue").html("请填写正确的保质期数字！");
			jquery("#myModal").modal('show');
			return false;
		}
		if(seedsId > 999999.99){
			jquery("#spanValue").html("亩用种量输入数字过大！");
			jquery("#myModal").modal('show');
			return false;
		}
		if(yieldId > 999999.99){
			jquery("#spanValue").html("亩产输入数字过大！");
			jquery("#myModal").modal('show');
			return false;
		}
		if(seedsOperationId!='' && seedsOperationId.length>20){
			jquery("#spanValue").html("种子处理输入过长!");
			jquery("#myModal").modal('show');
			return false;
		}
		if(crop==''){
			jquery("#spanValue").html("茬口不能为空！");
			jquery("#myModal").modal('show');
			return false;
		}else if(crop.length>20){
			jquery("#spanValue").html("茬口输入过长!");
			jquery("#myModal").modal('show');
			return false;
		}
		if(resistance!=''&&resistance.length>500){
			jquery("#spanValue").html("抗性输入过长!");
			jquery("#myModal").modal('show');
			return false;
		}
		if(characteristics!=''&&characteristics.length>500){
			jquery("#spanValue").html("外观特征输入过长!");
			jquery("#myModal").modal('show');
			return false;
		}
		if(nutrition!=''&&nutrition.length>500){
			jquery("#spanValue").html("营养口感输入过长!");
			jquery("#myModal").modal('show');
			return false;
		}
		if(remark!=''&&remark.length>500){
			jquery("#spanValue").html("注意事项输入过长!");
			jquery("#myModal").modal('show');
			return false;
		}
		if(manufacturers==''){
			jquery("#spanValue").html("生产厂家不能为空！");
			jquery("#myModal").modal('show');
			return false;
		}else if(manufacturers.length>200){
			jquery("#spanValue").html("生产厂家输入过长!");
			jquery("#myModal").modal('show');
			return false;
		}
		if(registrationNo=='' && registrationNo.length>50){
			jquery("#spanValue").html("网址输入过长！");
			jquery("#myModal").modal('show');
			return false;
		}
		if(nutrientContent=='' && nutrientContent.length>30){
			jquery("#spanValue").html("联系人输入过长！");
			jquery("#myModal").modal('show');
			return false;
		}
		if(address=='' && address.length>50){
			jquery("#myModal").html("地址输入过长！");
			jquery("#myModal").modal('show');
			return false;
		}
		var reg = /^[\d-+,，]{0,500}$/;
		if (reg.test(phone) == false && phone.length<=500) {
			jQuery("#spanValue").html("联系方式只支持数字,逗号,加号,中划线！");
			jQuery("#myModal").modal('show');
			return false;
       }else if(reg.test(phone) == false && phone.length>500){
			jQuery("#spanValue").html("联系方式最长输入50位！");
			jQuery("#myModal").modal('show');
			return false;
       }
		jquery("#login").show();
  	    return true;
     }  

     jquery(function(){
    	 initComplex();
    		var id='#{goodsInfoHome.inputsInfo.goodsInfoId}';
			var inp='#{goodsInfoHome.inputsInfo.inputsType}';
			var inputsTypeId='#{goodsInfoHome.inputsInfo.inputsTypeId}';
			var inputsTypeName = '#{goodsInfoHome.breedName}';
			var dataDicIds='#{goodsInfoHome.inputsInfo.dataDicId}';
			var seedCategory='#{goodsInfoHome.seedRecord.seedCategory}';//种子类别
    		var plantEnvironment='#{goodsInfoHome.seedRecord.plantEnvironment}';//种植环境
    		var suitArea='#{goodsInfoHome.seedRecord.suitArea}';//适合区域
    		var maturity='#{goodsInfoHome.seedRecord.maturity}';//熟性
			jquery("#trpbiaozhun3").selectpicker({noneSelectedText:"请选择"});
			if(id!=''){
				plant_select.select2("trigger", "select", {
				    data:{"id": inputsTypeId,"text":inputsTypeName}
				});
				if(dataDicIds != null && dataDicIds != ''){
					var v = new Array();
					v = dataDicIds.split(",");
					jquery("#trpbiaozhun3").selectpicker("val",v);
				}
				if(seedCategory != null && seedCategory != ''){
					var v = new Array();
					v = seedCategory.split(",");
					jquery("#seedsType").selectpicker("val",v);
				}
				if(plantEnvironment != null && plantEnvironment != ''){
					var v = new Array();
					v = plantEnvironment.split(",");
					jquery("#planting").selectpicker("val",v);
				}
				if(suitArea != null && suitArea != ''){
					var v = new Array();
					v = suitArea.split(",");
					jquery("#area").selectpicker("val",v);
				}
				if(maturity != null && maturity != ''){
					var v = new Array();
					v = maturity.split(",");
					jquery("#mature").selectpicker("val",v);
				}
				jquery('#productInfo\\:netContent').attr({"readonly":"readonly"});
				jquery('#productInfo\\:goodsUnitSelect').attr({"disabled":"false"});
				jquery('#productInfo\\:packSpec').attr({"readonly":"readonly"});
				jquery("#productInfo\\:inputstypeHidden").val(inputsTypeId);
			}else{
				plant_select.select2("trigger", "select", {
				    data:{"id": -1,"text":"请选择"}
				});
			}

			
			
			
    		var data='#{goodsInfoHome.inputsTypeId}';
    		jquery("#productInfo\\:inputsTypeTotalHidden").val(data);
    		zhzUnit();
    		jquery("#myframe").attr("src","#{request.contextPath}/product/AddInputsImage.seam?url=#{goodsInfoHome.url}");
			jquery("#myframe").height(150);
			
     });

     var plant_select ;
		function initComplex(){
			plant_select = jQuery('#record_type').select2({
				placeholder: {
				    id: '',
				    text: '搜索投入品类型的名称！'
				  },
				language : "zh-CN",
				ajax : {
					url : "/rest/1.0/breedList",
					delay : 450,
					dataType : 'json',
					data : function(params) {
						var param = "";
						var page = "";
						if(typeof(params.term) != "undefined"){
							param = params.term;
							param = param.replace("'","\'");
						}
						if(typeof(params.page) != "undefined"){
							page = params.page;
						}
						return {
							'method' : 'inputs_type_list',
							'field' : "{'enterprise_info_id':#{sessionTake.enterpriseInfoId},'search':'"+param+"','page':'"+page+"'}",
						};
					},
					processResults : function(data, params) {
						if(typeof(params.page) == "undefined"){
							params.page = 1
						}
						return {
							results : data.result_data,
							pagination : {
								more : (params.page * 50) < data.total_count
							}
						};
					}
				},
				escapeMarkup : function(markup) {
					return markup;
				}, 
				//minimumInputLength : 2,
				templateResult : formatData,
				templateSelection : formatDataSelection
			})
		}
		function formatData(result) {
			if (result.loading) return result.text;
				var html = '<div>'+result.text+'</div>';
		    return html;
		}

		function formatDataSelection(data) {
			if(data.id == "-1")
				return '搜索投入品类型名称！';
			return data.text;
		}
	//]]>
	</script>
</ui:define>
</ui:composition>

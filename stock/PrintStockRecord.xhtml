<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"	
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a="http://richfaces.org/a4j" 
    template="/layout/template_pack.xhtml">
<ui:define name="body">
<link rel="stylesheet" type="text/css" href="#{request.contextPath}/asset/css/stock/PrintStockRecord.css"/>
<!-- #{outStorageList.auditInit()} -->
	<td valign="top" width="100%">
	<div id="rightPanel" class="right_c" style="width: 700px;margin:auto;">
		<div class="ckd_d" style="font-size:22px;">
			<s:fragment rendered="#{outStorageList.storageChangeForm.storageType eq 1}">入库单</s:fragment>
			<s:fragment rendered="#{outStorageList.storageChangeForm.storageType eq 2}">出库单</s:fragment>
		</div>
		<table width="700" cellpadding="0" cellspacing="0" style="margin:0 auto ;">
		    <tr>
		    	<td width="250" height="30px;">
		    		<table width="100%" cellpadding="0" cellspacing="0" >
		        		<tr>
		                	<td width="80" height="28" align="center" style="font-size:14px;">
		                	<s:fragment rendered="#{outStorageList.storageChangeForm.storageType eq 1}">入库编号：</s:fragment>
								<s:fragment rendered="#{outStorageList.storageChangeForm.storageType eq 2}">出库编号：</s:fragment>
		                	</td>
		                    <td style=" font-size:14px;" >
		                    <h:outputText value="#{outStorageList.storageChangeForm.name}"></h:outputText>
		                    </td>
		                </tr>
		            </table>
		    	</td>
		        <td width="270">
		        	<!-- 年月日 开始 -->
		            <table width="100%" cellpadding="0" cellspacing="0" style="margin:0 auto;" align="center">
		            	<tr>
		                	<td width="80" height="28" align="center" style="font-size:14px;" >
		                	<s:fragment rendered="#{outStorageList.storageChangeForm.storageType eq 1}">入库日期：</s:fragment>
								<s:fragment rendered="#{outStorageList.storageChangeForm.storageType eq 2}">出库日期：</s:fragment>
							</td>
							<td style=" font-size:14px;" >
		                    <h:outputText value="#{outStorageList.storageChangeForm.insertTime}"><s:convertDateTime type="both" dateStyle="short" pattern="yyyy-MM-dd  HH:mm" /></h:outputText>
		                    </td>
		                </tr>
		            </table>
		        	<!-- 年月日 结束 -->
		        </td>
		        <td width="220">
		        	<!-- 操作人开始 -->
		        	<table width="100%" cellpadding="0" cellspacing="0" >
		        		<tr>
		                	<td width="64" height="28" align="center" style="font-size:14px;">
		                	经办人：
		                	</td>
		                    <td style=" font-size:14px;" >
								<h:outputText rendered="#{outStorageList.storageChangeForm.operater eq null}">
									系统自动操作
								</h:outputText>
								<h:outputText rendered="#{outStorageList.storageChangeForm.operater ne null}">
									#{outStorageList.storageChangeForm.operater.name}
								</h:outputText>
							</td>
		                </tr>
		            </table>
		            <!-- 操作人 结束 -->
		        </td>
		    </tr>
		</table>
		<hr/>
		<table width="700" cellpadding="0" cellspacing="0" style="margin:0 auto ;">
		    <tr>
		    	<td width="250" height="30px;">
		    		<table width="100%" cellpadding="0" cellspacing="0" >
		        		<tr>
		                	<td width="80" height="28" align="center" style="font-size:14px;">
		                	<s:fragment rendered="#{outStorageList.storageChangeForm.storageType eq 1}">入库库房：</s:fragment>
							<s:fragment rendered="#{outStorageList.storageChangeForm.storageType eq 2}">出库库房：</s:fragment>		
		                	</td>
		                    <td style=" font-size:14px;" >
		                    #{outStorageList.storageChangeForm.storageRoom.name}
		                    </td>
		                </tr>
		            </table>
		    	</td>
		        <td width="270">
		        	<!-- 年月日 开始 -->
		            <table width="100%" cellpadding="0" cellspacing="0" style="margin:0 auto;" align="center">
		            	<tr>
		                	<td width="80" height="28" align="center" style="font-size:14px;" >
		                	<s:fragment rendered="#{outStorageList.storageChangeForm.storageType eq 1}">入库类型：</s:fragment>
							<s:fragment rendered="#{outStorageList.storageChangeForm.storageType eq 2}">出库类型：</s:fragment>		
							</td>
							<td style=" font-size:14px;" >
		                   <h:outputText value="#{publicStorageHome.getStorageChangeTypeName(outStorageList.storageChangeForm.storageChangeTypeId.storageChangeTypeId,outStorageList.storageChangeForm.storageType)}"></h:outputText>
		                    </td>
		                </tr>
		            </table>
		        	<!-- 年月日 结束 -->
		        </td>
		        <td width="220">
		        	<!-- 操作人开始 -->
		        	<table width="100%" cellpadding="0" cellspacing="0" >
		        		<tr>
		                	<td width="64" height="28" align="center" style="font-size:14px;">
		                	操作人：
		                	</td>
		                    <td style=" font-size:14px;" >
								<h:outputText value="#{outStorageList.userName}"></h:outputText>
							</td>
		                </tr>
		            </table>
		            <!-- 操作人 结束 -->
		        </td>
		    </tr>
		</table>
		
		<table  width="700" cellpadding="0" cellspacing="0" style="margin: 0 auto 8px;">
			<tr>
				<td height="28"  style="font-size:14px;">备注：
					<s:fragment rendered="#{outStorageList.storageChangeForm.comment eq ''}">无</s:fragment>
					<s:fragment rendered="#{outStorageList.storageChangeForm.comment ne ''}">#{outStorageList.storageChangeForm.comment}</s:fragment>
				</td>
			</tr>
		</table>		
			
		
		<table class="table_product" width="700"  cellpadding="0" cellspacing="0"  style="margin:0 auto ;border:1px solid #000;border-collapse:collapse;">
			<tr>
				<th  class="ze_bg">序号</th>
				<th  class="ze_bg">批次编号</th>
				<s:fragment rendered="#{outStorageList.storageChangeForm.productType eq 1}">
					<th class="ze_bg">来源</th>
					<th class="ze_bg">等级</th>
				</s:fragment>
				<th  class="ze_bg">物料名称</th>
				<th  class="ze_bg">保质期</th>
				<th  class="ze_bg">数量</th>
				<th  class="ze_bg">规格</th>
				<th  class="ze_bg">单价</th>
				<th  class="ze_bg">小计</th>
			</tr>
			<a:repeat value="#{outStorageList.storageDetaiList}" var="_gpcr" rowKeyVar="_index">
				<tr>
					<td class="ze_bg2">#{_index+1}</td>
					<td class="ze_bg2"><h:outputText value="#{_gpcr[1]}" /></td>
					<s:fragment rendered="#{outStorageList.storageChangeForm.productType eq 1}">
						<td class="ze_bg2">
							<h:outputText value="--" rendered="#{null eq _gpcr[13]}"/>
							<h:outputText value="#{ _gpcr[13]}" rendered="#{null ne  _gpcr[13]}"/> 
						</td>
						<td class="ze_bg2">
							<h:outputText value="--" rendered="#{null eq  _gpcr[12]}"/>
							<h:outputText value="#{ _gpcr[12]}" rendered="#{null ne  _gpcr[12]}"/> 
						</td>
					</s:fragment>
					<td class="ze_bg2"><h:outputText value="#{_gpcr[2]}" /></td>
					<td class="ze_bg2"><h:outputText value="#{_gpcr[3]}天" /></td>
					<td class="ze_bg2">
						<!-- <s:fragment rendered="#{_gpcr[8] eq 1}">
							<h:outputText rendered="#{_gpcr[7] ge 7 and _gpcr[7] le 11}" >
	                        	<h:outputText value="#{stringUtil.changeFloatMe(_gpcr[5],3)}" rendered="#{sessionTake.harvestUnit eq 1}">
	                            	<f:convertNumber pattern="#####.###"/>
	                            </h:outputText>
	                            <h:outputText value="#{_gpcr[5]}" rendered="#{sessionTake.harvestUnit ne 1}">
	                            	<f:convertNumber pattern="#####.###"/>
	                            </h:outputText>
			                </h:outputText>
				            <h:outputText value="#{unitStranfer.outStranfer(_gpcr[7],_gpcr[5])}" rendered="#{_gpcr[7] lt 7 or _gpcr[7] gt 11}" >
				                   	<f:convertNumber pattern="#####.###"/>
				            </h:outputText>
				        </s:fragment>
				        <s:fragment rendered="#{_gpcr[8] ne 1}">
			                <h:outputText value=" #{_gpcr[5]}">
			                   	<f:convertNumber pattern="#####.###"/>
				            </h:outputText>
				        </s:fragment> -->	
				        <s:fragment rendered="#{_gpcr[8] eq 1}">
							<h:outputText rendered="#{_gpcr[7] ge 7 and _gpcr[7] le 11}" >
	                        	<h:outputText value="#{stringUtil.changeFloatMe(_gpcr[5],3)}" rendered="#{sessionTake.harvestUnit eq 1}">
	                            	<f:convertNumber pattern="#####.###"/>
	                            </h:outputText>
	                            <h:outputText value="#{_gpcr[5]}" rendered="#{sessionTake.harvestUnit ne 1}">
	                            	<f:convertNumber pattern="#####.###"/>
	                            </h:outputText>
			                </h:outputText>
				            <h:outputText value="#{unitStranfer.outStranfer(_gpcr[7],_gpcr[5])}" rendered="#{_gpcr[7] lt 7 or _gpcr[7] gt 11}" >
				                   	<f:convertNumber pattern="#####.###"/>
				            </h:outputText>
				        </s:fragment>
				        <s:fragment rendered="#{_gpcr[8] ne 1}">
				        	<h:outputText value="#{_gpcr[5]}">
				        			<f:convertNumber pattern="#####.###"/>
				        	</h:outputText>
				        </s:fragment>	
					</td>
					<td class="ze_bg2">
						<s:fragment rendered="#{_gpcr[8] eq 1}">
							<s:fragment rendered="#{_gpcr[7] ge 7 and _gpcr[7] le 11}">
								#{sessionTake.harvestUnit eq 1? '斤':'公斤（kg）'}
							</s:fragment>
							<s:fragment rendered="#{_gpcr[7] lt 7 or _gpcr[7] gt 11}">
								#{_gpcr[6]}
							</s:fragment>
						</s:fragment>
						<s:fragment rendered="#{_gpcr[8] ne 1}">
								#{_gpcr[10]}#{_gpcr[6]}
							<s:fragment rendered="#{_gpcr[11] ne null and _gpcr[11] ne ''}">
								/#{_gpcr[11]}
							</s:fragment>
						</s:fragment>
					</td>
					<td class="ze_bg2">￥
						<s:fragment rendered="#{_gpcr[8] eq 1}">
							<h:outputText rendered="#{_gpcr[7] ge 7 and _gpcr[7] le 11}" >
	                        	<h:outputText value="#{unitStranfer.outStranferPrice(9,_gpcr[9])}" rendered="#{sessionTake.harvestUnit eq 1}">
	                            	<f:convertNumber pattern="#####.##"/>
	                            </h:outputText>
	                            <h:outputText value="#{_gpcr[9]}" rendered="#{sessionTake.harvestUnit ne 1}">
	                            	<f:convertNumber pattern="#####.##"/>
	                            </h:outputText>
			                </h:outputText>
				            <h:outputText value="#{_gpcr[9]}" rendered="#{_gpcr[7] lt 7 or _gpcr[7] gt 11}" >
				                   	<f:convertNumber pattern="#####.##"/>
				            </h:outputText>
				        </s:fragment>
				        <s:fragment rendered="#{_gpcr[8] ne 1}">
				               #{_gpcr[9]}
				        </s:fragment>	
					</td>
					<td class="ze_bg2 total_price" >
						￥
						<s:fragment rendered="#{_gpcr[8] eq 1}">
							<h:outputText rendered="#{_gpcr[7] ge 7 and _gpcr[7] le 11}" >
	                        	<h:outputText value="#{unitStranfer.outStranferPrice(9,_gpcr[20])}" rendered="#{sessionTake.harvestUnit eq 1}">
	                            	<f:convertNumber pattern="#####.##"/>
	                            </h:outputText>
	                            <h:outputText value="#{_gpcr[20]}" rendered="#{sessionTake.harvestUnit ne 1}">
	                            	<f:convertNumber pattern="#####.##"/>
	                            </h:outputText>
			                </h:outputText>
				            <h:outputText value="#{_gpcr[20]}" rendered="#{_gpcr[7] lt 7 or _gpcr[7] gt 11}" >
				                   	<f:convertNumber pattern="#####.##"/>
				            </h:outputText>
				        </s:fragment>
				        <s:fragment rendered="#{_gpcr[8] ne 1}">
				               #{_gpcr[20]}
				        </s:fragment>	
					</td>
				</tr>
			</a:repeat>
		</table>
		<div  style="border:0px;margin-top:15px;margin:auto;font-weight: bold;width: 700px;" align="center">
				<table width="700">
					<tr>
						<td class="print_001" style="float:left;">金额合计：<h:outputText id="totalNumer" value="#{outStorageList.totalPrice}"><f:convertNumber pattern="#0.00"/></h:outputText> </td>
						<td class="print_001" style="float:right;margin-right:25%;">签字确认：</td>
					</tr>
				</table>		
			<div class="clear"></div>
		</div>
		<div id="printButton" class="car_button" style="text-align: center;margin-top:30px;">
			<s:button styleClass="edit_back" id="bn_left6" style="margin-left:10px" onclick="window.close();return false;"/>&#160;
			<input type="button" id="btnPrint" onclick="printButtonClick();" style="background-image: url('#{request.contextPath}/asset/images/print03.jpg');width: 77px;height: 32px;cursor: pointer;" />
		</div>
	</div>
	</td>
<script type="text/javascript" src="#{request.contextPath}/asset/js/stock/PrintStockRecord.js"></script>
</ui:define>
</ui:composition>

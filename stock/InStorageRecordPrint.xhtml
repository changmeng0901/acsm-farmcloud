<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"	
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a="http://richfaces.org/a4j" 
    template="/layout/template_pack.xhtml">

<ui:define name="body" style="font-size:12px;font-family:'微软雅黑';">
<script type="text/javascript">
	var totalNum=0.0;
</script>
<style>
.table_product th,
.table_product td{border-bottom:1px solid #000;color:#000;}
.table_product .ze_bg2{border-bottom:1px solid #000;color:#000;}
.table_product .ze_bg{ color:#000;}
</style>
	#{inStorageHome.init()}
	<td valign="top" width="100%">
	<div id="rightPanel" class="right_c" style="width: 700px;margin:auto;">
		<div class="ckd_d" style="font-size:22px;">
			入库信息单
		</div>
		<table width="700" cellpadding="0" cellspacing="0" style="margin:0 auto ;">
		    <tr>
		    	<td width="250" height="30px;">
		    		<table width="100%" cellpadding="0" cellspacing="0" >
		        		<tr>
		                	<td width="80" height="28" align="center" style="font-size:14px;">
		                	入库编号：
		                	</td>
		                    <td style=" font-size:14px;" >
		                    <h:outputText value="#{inStorageHome.storageChangeFormName}"></h:outputText>
		                    </td>
		                </tr>
		            </table>
		    	</td>
		        <td width="250">
		        	<!-- 年月日 开始 -->
		        	<!-- 入库日期开始 -->
		        	<table width="100%" cellpadding="0" cellspacing="0" >
		        		<tr>
		                	<td width="94" height="28" align="center" style="font-size:14px;">
		                	入库日期：
		                	</td>
		                    <td style=" font-size:14px;width: 150px;" >
							#{inStorageHome.produceTime}
							</td>
		                </tr>
		            </table>
		            <!-- 入库日期 结束 -->
		            
		        </td>
		        <td width="200">
		        	<!-- 经办人人开始 -->
		        	<table width="100%" cellpadding="0" cellspacing="0" >
		        		<tr>
		                	<td width="64" height="28" align="center" style="font-size:14px;">
		                	经办人：
		                	</td>
		                    <td style=" font-size:14px;" >
							
								<h:outputText rendered="#{inStorageHome.operator eq null}">
									系统自动操作
								</h:outputText>
								<h:outputText rendered="#{inStorageHome.operator ne null}">
									#{inStorageHome.operator}
								</h:outputText>
							</td>
		                </tr>
		            </table>
		            <!-- 入库日期结束 -->
		        </td>
		    </tr>
		</table>
		<hr/>
			<table width="700" cellpadding="0" cellspacing="0" style="margin:0 auto ;">
		    <tr>
		    	<td width="250" height="30px;">
		    		<table width="100%" cellpadding="0" cellspacing="0" >
		        		<tr>
		                	<td width="80" height="28" align="center" style="font-size:14px;">
		                	入库库房：
		                	</td>
		                    <td style=" font-size:14px;" >
		                    <h:outputText value="#{inStorageHome.storageRoom}"></h:outputText>
		                    </td>
		                </tr>
		            </table>
		    	</td>
		        <td width="230">
		            <table width="100%" cellpadding="0" cellspacing="0" style="margin:0 auto;" align="center">
		            	<tr>
		                	<td width="80" height="28" align="center" style="font-size:14px;" >
								入库类型：
							</td>
							<td style=" font-size:14px;" >
		                    <h:outputText value="#{inStorageHome.storageType}"><s:convertDateTime type="both" dateStyle="short" pattern="yyyy-MM-dd  HH:mm" /></h:outputText>
		                    </td>
		                </tr>
		            </table>
		        	<!-- 入库类型 结束 -->
		        </td>
		        <td width="220">
		        	<!-- 经办人人开始 -->
		        	<table width="100%" cellpadding="0" cellspacing="0" >
		        		<tr>
		                	<td width="64" height="28" align="center" style="font-size:14px;">
		                	操作人：
		                	</td>
		                    <td style=" font-size:14px;" >
							
								<h:outputText rendered="#{inStorageHome.operator eq null}">
									系统自动操作
								</h:outputText>
								<h:outputText rendered="#{inStorageHome.operator ne null}">
									#{inStorageHome.operatorName}
								</h:outputText>
							</td>
		                </tr>
		            </table>
		            <!-- 入库日期结束 -->
		        </td>
		        <td width="220">
		        	
		        </td>
		    </tr>
		</table>
		<table width="700" cellpadding="0" cellspacing="0" style="margin:0 auto ;">
		    <tr>
		    	<td width="250" height="30px;">
		    		<table width="100%" cellpadding="0" cellspacing="0" >
		        		<tr>
		                	<td width="80" height="28" align="center" style="font-size:14px;">
		                	备注：
		                	</td>
		                    <td style=" font-size:14px;" >
		                  		 <h:outputText rendered="#{inStorageHome.comment eq null}">
									无
								</h:outputText>
								<h:outputText rendered="#{inStorageHome.comment ne null}">
									#{inStorageHome.comment}
								</h:outputText>
		                    </td>
		                </tr>
		            </table>
		    	</td>
		    </tr>
		</table>
		<table class="table_product" width="700"  cellpadding="0" cellspacing="0"  style="margin:0 auto ;border:1px solid #000;border-collapse:collapse;">
			<tr>
				<th  class="ze_bg">批次编号</th>
				<th  class="ze_bg">物料名称</th>
				<th class="ze_bg">来源</th>
				<th class="ze_bg">等级</th>
				<th  class="ze_bg">规格</th>
				<th  class="ze_bg">保质期</th>
				<th  class="ze_bg">入库数量</th>
				<th  class="ze_bg">入库总重量(kg)</th>
				<th  class="ze_bg">单价</th>
				<th  class="ze_bg">小计(元)</th>
			</tr>
			<a:repeat value="#{inStorageHome.batchDetaiList}" var="_batch" rowKeyVar="_index">
				<tr>
					<td class="ze_bg2">#{_batch[1]}</td>
					<td class="ze_bg2">#{_batch[13]}</td>
					<td class="ze_bg2">
							<h:outputText rendered="#{_batch[12] eq 11}">
										<h:outputText value="--" rendered="#{null eq _batch[14]}"/>
										<h:outputText value="#{ _batch[14]}" rendered="#{null ne  _batch[14]}"/> 
							</h:outputText>
							<h:outputText rendered="#{_batch[12] ne 11}">
										<h:outputText value="--" rendered="#{null eq _batch[2]}"/>
										<h:outputText value="#{ _batch[2]}" rendered="#{null ne  _batch[2]}"/> 
							</h:outputText>
					</td>
					<td class="ze_bg2">
							<h:outputText value="--" rendered="#{1 ne _batch[11]}"/>
							<h:outputText  rendered="#{1 eq  _batch[11]}">
								<h:outputText value="#{ _batch[3]}" rendered="#{null ne _batch[3]}"/>
								<h:outputText value="--" rendered="#{null eq _batch[3]}"/>
							</h:outputText> 
					</td>
					<td class="ze_bg2">
						<!-- <s:fragment rendered="#{_batch[11] eq 1}">
								#{ _batch[5]}
						</s:fragment>
						<s:fragment rendered="#{_batch[11] ne 1}">
								#{_batch[4]}#{_batch[5]}
							<s:fragment rendered="#{_batch[6] ne null and _batch[6] ne ''}">
									/#{_batch[6]}
							</s:fragment>
						</s:fragment> -->
						<s:fragment rendered="#{_batch[11] eq 1}">
										<s:fragment rendered="#{_batch[15] ge 7 and _batch[15] le 11}">
											#{sessionTake.harvestUnit eq 1? '斤':'公斤（kg）'}
										</s:fragment>
										<s:fragment rendered="#{_batch[15] lt 7 or _batch[15] gt 11}">
											#{ _batch[5]}
										</s:fragment>
									</s:fragment>
									<s:fragment rendered="#{_batch[11] ne 1}">
											#{_batch[4]}#{_batch[5]}
										<s:fragment rendered="#{_batch[6] ne null and _batch[6] ne ''}">
											/#{_batch[6]}
										</s:fragment>
									</s:fragment>
					</td>
					<td class="ze_bg2">#{_batch[7]}天</td>
					<td class="ze_bg2">
						<s:fragment rendered="#{_batch[11] eq 1}">
										<h:outputText rendered="#{_batch[15] ge 7 and _batch[15] le 11}" >
				                        	<h:outputText value="#{stringUtil.changeFloatMe(_batch[8],3)}" rendered="#{sessionTake.harvestUnit eq 1}">
				                            	<f:convertNumber pattern="#####.###"/>
				                            </h:outputText>
				                            <h:outputText value="#{_batch[8]}" rendered="#{sessionTake.harvestUnit ne 1}">
				                            	<f:convertNumber pattern="#####.###"/>
				                            </h:outputText>
						                </h:outputText>
							            <h:outputText value="#{unitStranfer.outStranfer(_batch[15],_batch[8])}" rendered="#{_batch[15] lt 7 or _batch[15] gt 11}" >
							                   	<f:convertNumber pattern="#####.###"/>
							            </h:outputText>
							        </s:fragment>
							        <s:fragment rendered="#{_batch[11] ne 1}">
							               #{_batch[8]}
							        </s:fragment>	
					</td>
					<td class="ze_bg2">#{_batch[9]}kg</td>
					<td class="ze_bg2">
						<s:fragment rendered="#{_batch[11] eq 1}">
							<h:outputText rendered="#{_batch[15] ge 7 and _batch[15] le 11}" >
	                        	 <h:outputText value="#{unitStranfer.inStranfer(9,_batch[10])}" rendered="#{sessionTake.harvestUnit eq 1}">
	                            	<f:convertNumber pattern="#####.##"/>
	                            </h:outputText>
	                          
	                            <h:outputText value="#{_batch[10]}" rendered="#{sessionTake.harvestUnit ne 1}">
	                            	<f:convertNumber pattern="#####.##"/>
	                            </h:outputText> 
	                             <!-- <h:outputText value="#{unitStranfer.outStranferUnitPrice(sessionTake.harvestUnit,_batch[15],_batch[10])}" >
	                            	<f:convertNumber pattern="#####.##"/>
	                            </h:outputText> -->
			                </h:outputText>
				            <h:outputText value="#{_batch[10]}" rendered="#{_batch[15] lt 7 or _batch[15] gt 11}" >
				                   	<f:convertNumber pattern="#####.##"/>
				            </h:outputText>
				        </s:fragment>
				        <s:fragment rendered="#{_batch[11] ne 1}">
				               #{_batch[10]}
				        </s:fragment>
					</td>
					<td class="ze_bg2">
						<h:outputText value="#{_batch[17]}">
							       	<f:convertNumber pattern="#####.##"/> 
						</h:outputText>
					</td>
				</tr>
			</a:repeat>
		</table>
		<div  style="border:0px;margin-top:15px;margin:auto;font-weight: bold;width: 700px;" align="center">
				<table width="700">
					<tr>
						<td class="print_001" style="float:left;">金额合计：<h:outputText id="totalNumer" value="#{inStorageHome.totalPrice}"><f:convertNumber pattern="#0.00"/></h:outputText> </td>
						<td class="print_001" style="float:right;margin-right:25%;">签字确认：</td>
					</tr>
				</table>		
			<div class="clear"></div>
		</div>
		<div id="printButton" class="car_button" style="text-align: center;margin-top:30px;">
			<s:button view="/inOut/InOutRecord.xhtml" styleClass="edit_back" id="bn_left6" style="margin-left:10px" onclick="window.close();return false;"/>&#160;
			<input type="button" id="btnPrint" onclick="printButtonClick();" style="background-image: url('#{request.contextPath}/asset/images/print03.jpg');width: 77px;height: 32px;cursor: pointer;" />
		</div>
	</div>
	</td>
	<script type="text/javascript">
		//总计赋值
		var obj;
		function printButtonClick(){
			obj = jQuery("#printButton").clone();
			/* jQuery("#printButton").empty(); */
			jQuery("#rightPanel").printArea();
		}
		
		function closeAll(){
			if(confirm("是否关闭打印页面!")){
				window.close();
			}else{
				jQuery("#printButton").html(obj);
			}
		}
	</script>
</ui:define>
</ui:composition>

<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a="http://richfaces.org/a4j"
    template="/layout/template_left.xhtml">

<ui:define name="body">
<!-- #{productionHome.login()} -->
<script src="../asset/js/javascripts/superTables_compressed.js" type="text/javascript"></script>
<link href="../asset/css/stylesheets/superTables_compressed.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="#{request.contextPath}/asset/css/checkBox/skinBlue.css"/>
<script type="text/javascript" src="#{request.contextPath}/asset/js/checkBox/icheck.js"></script>
<style>
.fakeContainer{
	margin: 20px;
    padding: 0px;
    border: none;
	height:500px;
}
.fx_tckli .icheckbox_minimal-blue{ margin:5px 5px 0 0;} 
.lookAll .icheckbox_minimal-blue{ float:right; margin-top:12px;}
.lapc_div label{ float:left; padding-top:10px; font-size:11px; font-family:'微软雅黑';}
.iradio_minimal-blue, .iradio_minimal-blue.checked {margin-top: 7px;}
</style>
<link href="#{request.contextPath}/asset/css/examples.css" rel="stylesheet" type="text/css" />
<style>
.lapc_div .s_pan {
    float: left;
    font-size: 11px;
    line-height: 40px;
    margin-left: 5px;
    margin-top: -2px;
}
.fxy_div{
	margin: 15px 0 0;
    position: relative;
    width: 100%;
    }
    .div200 .bootstrap-select:not([class*="span"]):not([class*="col-"]):not([class*="form-control"]):not(.input-group-btn) {
width: 200px;
}
.input-append.date .add-on i, .input-prepend.date .add-on i {
    cursor: pointer;
    height: 14px;
    margin-left: -21px;
    margin-top:1px;
    width: 14px;
}
</style>

<script>
//<![CDATA[
jquery(document).ready(function(){
    jquery(".yieldInfo").each(function(k,yieldval){
    	var tempVal = parseFloat(jquery(".yieldAll").text())+parseFloat(yieldval.innerHTML);
    	tempVal = tempVal.toFixed(2);
    	jquery(".yieldAll").text(tempVal);//采购金额
    });
});
function linkageeinfoid (data){
	jquery("#binfoid").empty().append(data);
	jquery('#binfoid').selectpicker('refresh');
	jquery('#binfoid')[0].selectedIndex = 0;
}
function linkagebinfoid (data){
	var strs = data.split(",");
	jquery("#pinfoid").empty().append(strs[0]);
	jquery('#pinfoid').selectpicker('refresh');
	jquery('#pinfoid')[0].selectedIndex = 0;
	
	jquery("#farmerid").empty().append(strs[1]);
	jquery('#farmerid').selectpicker('refresh');
	jquery('#farmerid')[0].selectedIndex = 0;
}
function usr(){
	if(jquery("#reido1").attr("aa")=='a'){
		jquery("div[name='fakeContainer1']").hide();
		jquery("div[name='fakeContainer']").show();
		jquery("#reido1").attr("aa","b");
		reido1.style.backgroundImage='url(../asset/images/radio1.gif)';
	}else{
		var a = jquery("#scroll1").width();
		jquery('.aaa2').css("width",a/12 + "px");
		jquery("div[name='fakeContainer']").hide();
		jquery("div[name='fakeContainer1']").show();
		jquery("#reido1").attr("aa","a");
		reido1.style.backgroundImage='url(../asset/images/radio2.gif)';
 	}
}
function usrnew(){
	if(ftitle.style.display=='none'){
		jquery("#searchStu").val(2);
		ftitle.style.display='block'; 
		gjbott2.style.backgroundImage='url(../asset/images/gjtop.jpg)';
	}else{
		jquery("#searchStu").val(1);
		ftitle.style.display='none';
		gjbott2.style.backgroundImage='url(../asset/images/gjbottom.jpg)';
 	}
}
var onLoadWidth
jquery(document).ready(function(){  
	onLoadWidth = document.body.clientWidth;
	jquery('#scroll1').css("width",(onLoadWidth-800)+ "px"); 
	jquery('#scroll2').css("width",(onLoadWidth-800)+ "px"); 
});
jquery(window).resize(function(){
   	var onLoadWidth = document.body.clientWidth;
	jquery('#scroll1').css("width",(onLoadWidth-800)+ "px"); 
	jquery('#scroll2').css("width",(onLoadWidth-800)+ "px"); 
});
jquery(function(){
	jquery('.pc_name').hover(function(){
		jquery(this).find('.pc_p2').show();
 	},function(){
  		jquery(this).find('.pc_p2').hide();
 	});
});
che = function(obj,o){
	if(o.getAttribute("aaa")=="false"){
		o.setAttribute("aaa","true");
		document.getElementById(obj).setAttribute("aaa",o.getAttribute("aaa"));
		jquery("#"+o.id).removeClass("b");
		jquery("#"+o.id).addClass("a");
	}else{
		o.setAttribute("aaa","false");
		document.getElementById(obj).setAttribute("aaa",o.getAttribute("aaa"));
		jquery("#"+o.id).removeClass("a");
		jquery("#"+o.id).addClass("b");
	}
	checkChecked();
}
checkChecked =function(){
	var obj = document.getElementById("production:allC")
	if(obj.value=="false"){
		var check = document.getElementById("checkone").getElementsByTagName("input");
		for(var i = 0;i<check.length;i++){
			if(check[i].id=='production:allC')
				continue;
			if(check[i].getAttribute("aaa")=="false"){
				break;
			}else if(i==check.length-1){
				jquery("#b").attr("aaa","true");
				document.getElementById("production:allC").value="true";
				jquery("#b").removeClass("b");
				jquery("#b").addClass("a");
			}
		}
	}else{
		var check = document.getElementById("checkone").getElementsByTagName("input");
		for(var i = 0;i<check.length;i++){
			if(check[i].id=='production:allC')
				continue;
			if(check[i].getAttribute("aaa")=="false"){
			//}else if(i==check.length-1){
				document.getElementById("production:allC").value="false";
				jquery("#b").attr("aaa","false");
				jquery("#b").removeClass("a");
				jquery("#b").addClass("b");
				break;
			}
		}
	}
	
}

checksub = function(){
	if(jquery('#beginTime').val()>jquery('#endTime').val()){
		alert("开始时间不能大于结束时间");
		return false;
	}
	if(jquery('#yearBegin select').val()>jquery('#yearEnd select').val()){
		alert("开始时间不能大于结束时间");
		return false;
	}
	if(jquery('#yearBegin select').val()==jquery('#yearEnd select').val()){
		if(jquery('#monthBegin select').val()>jquery('#monthEnd select').val()){
			alert("开始时间不能大于结束时间");
			return false;
		}
	}
	if(jquery('#production\\:leveId').val()==null){
		jquery('#production\\:myLeveId').val("-");
	}else{
		jquery('#production\\:myLeveId').val(jquery('#production\\:leveId').val());
	}

	jquery('#production\\:tunnelInfoId2').val(jquery('#tunnelInfoId').val());
	
	if(document.getElementById("checkone")){
		var str = "";
		var check = document.getElementById("checkone").getElementsByTagName("input");
		for(var i = 0;i<check.length;i++){
			if(check[i].id=='search:allC' || check[i].id=='envAll')
				continue;
			if(check[i].getAttribute("aaa")=="true"){
				str+=check[i].value+"_";
			}
		}
		if(str.length>1){
			str = str.substring(0,str.length-1);
		}else{
			str="0";
			}
		var item = jquery("#binfoid  option:selected").val(); 
		var item2 = jquery("#pinfoid  option:selected").val();
		var item3 = jquery("#farmerid option:selected").val();
		var pids = "";
		if(jquery("#plantCheck").val()!=null){
			pids = jquery("#plantCheck").val().toString();
		}
		jquery("#pIdString").val(pids);
		document.getElementById("production:check").value=str;
	    document.getElementById("production:pInfoIdInfo").value=item2;
	    document.getElementById("production:farmerids").value=item3;
	    
	}
	 if(jquery("#outputId").val() == null){
			jquery("#production\\:outputsIdsHide").val("-");
		}else{
			jquery("#production\\:outputsIdsHide").val(jquery("#outputId").val());
		}
	return true;
}
linksub = function(val){
	document.getElementById("production:ddId").value=val;
}
jquery(document).ready(function(){
	jquery('#plantCheck').attr("multiple","multiple");
	jquery('select:not(#plantCheck)').selectpicker();
	jquery('select:not(#outputId)').selectpicker();
    jquery('#plantCheck').selectpicker({noneSelectedText:"全部"});
    jquery('#outputId').selectpicker({noneSelectedText:"全部"});
    jquery('#plantCheck').selectpicker('deselectAll');
    jquery('#outputId').selectpicker('deselectAll');
	jquery('input').iCheck({
	    checkboxClass: 'icheckbox_minimal-blue',
	    radioClass: 'iradio_minimal-blue',
	    increaseArea: '20%' // optional
	  });

	jquery("input[name='lookAll']").on("ifClicked", function(event){
		if(jquery("#lookAll").attr("aa")=='a'){
			jquery("div[name='fakeContainer1']").hide();
			jquery("div[name='fakeContainer']").show();
			jquery("#lookAll").attr("aa","b");
		}else{
			var a = jquery("#scroll1").width();
			jquery('.aaa2').css("width",a/12 + "px");
			jquery("div[name='fakeContainer']").hide();
			jquery("div[name='fakeContainer1']").show();
			jquery("#lookAll").attr("aa","a");
	 	}
	});	
	jquery("#production\\:checkAll").on("ifClicked", function(event){
		if (this.checked) {
			jquery("input[name='checkBName']").iCheck("uncheck"); 
		} else {
			jquery("input[name='checkBName']").iCheck("check"); 
		}
	});
	
	jquery("#envAll").on("ifClicked", function(event){
		if (this.checked) {
			jquery("input[name='cb']").iCheck("uncheck"); 
			jquery("input[name='cb']").attr("aaa",false);
		} else {
			jquery("input[name='cb']").iCheck("check"); 
			jquery("input[name='cb']").attr("aaa",true);
		}
	});
	jquery("input[name='sex']:radio").on("ifChecked", function(event){
		var type = this.value;
		document.getElementById("production:ddId").value=type;
	});
	
	jquery("input[name='stype']").on("ifChecked",function(){
		checkStype(this.value);
	});
	
	checkStype(#{productionHome.stype});
	jquery("input[name='stype']:eq("+(#{productionHome.stype}-1)+")").iCheck("check")
	
	jquery("input[name='cb']").on("ifChanged", function(event){
		if(!this.checked) {
			jquery("#envAll").iCheck("uncheck"); 
			jquery(this).attr("aaa",false);
		}else{
			jquery(this).attr("aaa",true);
			}
	});
	
	var plantStr = '#{productionHome.pIdString}';
	var checkStr = plantStr.split(",");
	if(jquery("#plantCheck option").length!=checkStr.length)
		jquery("#plantCheck").selectpicker("val",checkStr);


	var tunnelInfo = '#{productionHome.tunnelInfoId}';
	var tunnelStr = tunnelInfo.split(",");
	jquery("#tunnelInfoId").selectpicker("val",tunnelStr);
	
	});

	

	function checkStype(val){
		
		if(val==1){
			jquery(".isri").show();
			jquery(".isyue").hide();
		}else{
			jquery(".isri").hide();
			jquery(".isyue").show();
		}
	}

	function change(){
		if(jquery('#tunnelInfoId').val() == 0){
			jquery("#tunnelInfoId").selectpicker("val","");
		}
	}
	
window.onload = function() 
{
	var ddId = document.getElementById("production:ddId").value;
	if(ddId != null){
		jquery("#sex" + ddId).iCheck("check"); 
	}
	var idStr = "";
	var obj = false;
	jquery("input[name='cb']").each(function(){
		var cbBoolean = jquery(this).attr("aaa");
		if(cbBoolean == "true"){
			jquery(this).iCheck("check");
			jquery(this).attr("aaa",true); 
		}else{
			obj = true;
			jquery(this).iCheck("uncheck");
			jquery(this).attr("aaa",false); 
		}
		if(obj){
			jquery("#envAll").iCheck("uncheck"); 
		}
	});
}
//]]>
</script>
<style>
.rich-calendar-exterior{line-height: 20px;}
	.legendLabel {font-size: 13px;float: left;}
	#xxx table{margin: 0 auto;}
#reido1{width:20px; height:18px;  background:url(../asset/images/radio2.gif) no-repeat; display:block; float:right; margin-top:13px;}
.bootstrap-select:not([class*="span"]):not([class*="col-"]):not([class*="form-control"]):not(.input-group-btn){width: 100px;}
</style>
 <!--二级列表开始-->
    <!--二级列表结束-->
    
	<!--右边开始-->
            <td valign="top">
                 <div class="right_c" style="min-height:30px;">
                	<div class="r_title">
                    	<div class="r_t_l"><font size="3">采收量查询</font></div>
                    </div>
                    <div class="clear"></div>
                 </div>   
				<!--分析页开始-->
				<ui:fragment rendered="#{s:hasRole('plant_analyse_search')}">
				
				<h:form id="production">
					<div class="fxy_title">
					<h:inputHidden value="#{productionHome.flushType}" id="flushType"/>
					<div>
						<ul class="fxy_ul" id="male" style="height:3px;">
							<li class="fxy_li" style="line-height:30px;">日期选择：</li>
                            <li class="fxy_lidate" style="line-height:30px;" >
								<h:inputHidden value="#{productionHome.btype}" id="btype"/>
								<input type="radio" value="3" name="dateType" id="type3"  style="display: none;"/><label style="font-weight: 100; margin-left: 5px;">按日</label>
							</li>
                            <li class="fxy_lidate" style="line-height:30px;">
                           		<input type="radio" value="2" name="dateType" id="type2"  style="display: none;"/><label style="font-weight: 100; margin-left: 5px;">按月</label>
                           	</li>
                           	<li class="fxy_lidate" style="line-height:30px;">
                           		<input type="radio" value="1" name="dateType" id="type1"  style="display: none;"/><label style="font-weight: 100; margin-left: 5px;">按年</label>
                           	</li>
                           <li class="fxy_lidate02 type_male1" style="#{productionHome.btype eq 1 or productionHome.btype eq 2?'':'display:none'};">
                           <font style="position:relative;[;top:0;]">日期：</font>
                            <h:selectOneMenu value="#{productionHome.year}" styleClass="selectpicker">
	                           		<f:selectItems value="#{productionHome.years}"></f:selectItems>
	                           </h:selectOneMenu>
                           <font style="position:relative;[;top:0;]"> &#160;年&#160;</font>
                           </li>
                           <li class="fxy_lidate02 type_female1" style="#{productionHome.btype eq 2?'':'display:none'}">
							 <h:selectOneMenu value="#{productionHome.month}" styleClass="selectpicker">
	                           		<f:selectItems value="#{productionHome.months}"></f:selectItems>
	                           </h:selectOneMenu>
							<font style="position:relative; [;top:0;]">&#160;月</font>
                           </li>
                            <li class="fxy_lidate02 type_nomale1" style="#{productionHome.btype==3 ?'':'display:none'}"><span style="float: left;">开始时间：</span>
                           <div class="input-append date form_datetime " style="float: left; ">
						    <h:inputText  id="startTime"  styleClass="new_time nw100" value="#{productionHome.beginTime}" readonly="#{facesContext.renderResponse}"/>								   			    
						    <h:inputHidden value="#{productionHome.beginTime}" id="strartTimeHidden"/>
						    <span class="add-on"><i class="icon-th" style="margin-top:6px;"></i></span>
						    </div>
                            </li>
                            <li class="fxy_lidate02 type_nomale1" style="#{productionHome.btype==3 ?'':'display:none'}"><span style="float: left;">结束时间：</span>
                            <div class="input-append date form_datetime " style="float: left;">
						    <h:inputText  id="endTime"  styleClass="new_time nw100" value="#{productionHome.endTime}" readonly="#{facesContext.renderResponse}"/>
						    <h:inputHidden value="#{productionHome.endTime}" id="endTimeHidden"/>
						    <span class="add-on"><i class="icon-th" style="margin-top:6px;"></i></span>
						    </div>
                            </li>
                             <ui:fragment rendered="#{s:hasRole('plant_analyse_exp')}">
                                
                             <div style="float:right;"> 
                               		<a href="#"  onclick="return exportBefort();" > 
                               			<img src="../asset/images/fxdc.jpg" width="82" height="16" />
                               		</a>
                               		
                               </div>
                               </ui:fragment>
                       </ul>
                       </div>
                       <br></br>
                    	<ul class="fxy_ul" >
                            <li class="reili" >
                                <table cellpadding="0" cellspacing="0" style="float:left;" >
                                   <tr>
                                   	<td align="right" class="tpcc_font">选择作物：</td>
										<td align="left" style="padding-left: 4px;" id="male"
											class="six3">
											<div class="div200">
												<select id="plantCheck" name="plantCheck"
													data-live-search="true" onchange="plantChVal()">
													<a:repeat value="#{productionHome.plantList}" var="var">
														<optgroup label="#{var}">
															<a:repeat value="#{productionHome.allPlant[var]}"
																var="_var">
																<option value="#{_var.plantId}">#{_var.name}</option>
															</a:repeat>
														</optgroup>
													</a:repeat>
												</select>
											</div>
										</td>
										<td align="right" style="padding-left: 19px;" class="tpcc_font" >选择产出品：</td>
										<td align="left" style="padding-left: 4px;" id="male"
											class="six3" >
											<div class="div200">
											<h:inputHidden value="#{productionHome.outputsIds}" id="outputsIdsHide"/>
											<h:panelGroup id="outputIdPanel">
												<select id="outputId" name="outputId" data-live-search="true" multiple="multiple" onchange="outputChange()">
													<a:repeat value="#{productionHome.outputsList}" var="var">
														<option value="#{var[0]}">#{var[1]}</option>
													</a:repeat>
												</select>
											</h:panelGroup>
											</div>
										</td>
										
									</tr>
									</table>
								</li>
							<li class="reili">
		                        <table cellspacing="0" cellpadding="0" style="float:left;">
		                        <h:inputHidden id="selectTypeId" value="#{productionHome.selectType}" />
		                            <tr>
		                            <td align="right"  class="tpcc_font">选择地块：</td>
										<td align="left" style="padding-left: 4px;" id="male"
											class="six3">
											<div class="div200">
											<h:inputHidden id="tunnelInfoId2" value="#{productionHome.tunnelInfoId}" />
											<select id="tunnelInfoId" title="全部" class="selectpicker" data-live-search="true" style="display: none;" multiple="multiple" >
												<option value="0">全部</option>
												<a:repeat value="#{productionHome.tunnelInfoList}" var="var">
													<option value="#{var.tunnelInfoId}">#{var.tunnelName}</option>
												</a:repeat>
					                        </select>
		                                    </div>
										</td>
		                                <td align="right" style="padding-left: 31px;" class="tpcc_font">选择等级：</td>
		                                <td align="left" id="male" style="padding-left: 4px;">
		                                    <div class="div200">
												<h:panelGroup id="levelIds">
													<h:selectOneMenu styleClass="selectpicker" data-live-search="true"  id="leveId"
														value="#{productionHome.myLeveId}">
														<f:selectItem itemLabel="全部" itemValue="全部"/>
														<s:selectItems value="#{productionHome.levleList}"
															var="var" label="#{var}" itemValue="#{var}" />
													</h:selectOneMenu>
												</h:panelGroup>
											</div>
		                                </td>
		                                
		                                <td align="right" class="tpcc_font" style="padding-left: 60px;">
		                                    <a class="gjss_a gjtop" style="display:inline-block;" href="javascript:" onclick="op(this)" aa="1">高级搜索</a>
		                                </td>
		                                <td width="80" align="right"><h:commandButton
											action="#{productionHome.selectall()}"
											styleClass="btn btn-primary" value="搜索"
											onclick="return checkSearch()" /> <h:commandButton
											action="#{productionHome.exportExcel()}"
											styleClass="btn btn-primary exportexcel"
											style="display:none" value="导出"
											onclick="return checksub()" /></td>
									    <td width="80" align="right"><h:commandButton
											action="#{productionHome.reset}" id="reset"
											styleClass="btn btn-default" value="重置"
											onclick="allReset()" /> <h:inputHidden
											value="#{productionHome.myLeveId}" id="myLeveId" /></td>
		                            </tr>
		                        </table>
		                     </li>	  
						</ul>	
                    </div>
                     <div class="gjs" style="border-top:1px dashed #eee; border-bottom:0; padding:0 30px; display:none; box-sizing:border-box;">
                    <ul class="fxy_ul">	
                        <li class="reili" >
                                <table cellpadding="0" cellspacing="0" style="float:left;" >
                                   <tr>
                                   	<td align="right"  class="tpcc_font">种植标准：</td>
										<td align="left" style="padding-left: 4px;" id="male">
											<div class="div200">
												<h:panelGroup id="ddd">
													<h:selectOneMenu styleClass="selectpicker" id="ddId"
														value="#{productionHome.ddId}">
														<f:selectItem itemLabel="全部" itemValue="0"/>
														<s:selectItems value="#{commonHome.ddList}"
															var="var" label="#{var.name}" itemValue="#{var.dataDicId}" />
													</h:selectOneMenu>
												</h:panelGroup>
											</div>
										</td>
										<td align="right" style="padding-left: 19px;" class="tpcc_font">采收人：</td>
										<td align="left" style="padding-left: 4px;" id="male"
											class="six3">
											<div class="div200">
												<h:panelGroup id="personid">
													<h:selectOneMenu styleClass="selectpicker" data-live-search="true" id="farmerid"
														value="#{productionHome.farmerid}">
														<f:selectItem itemLabel="全部" itemValue="-1"/>
														<s:selectItems value="#{productionHome.personLists}"
															var="var" label="#{var[1]}" itemValue="#{var[0]}" />
													</h:selectOneMenu>
												</h:panelGroup>
											</div>
										</td>
									</tr>
								</table>
						</li>
                       <li class="reili">
                        	<table cellpadding="0" cellspacing="0" style="float:left;">
                                    <tr>
										<td align="right"  class="tpcc_font">录入人：</td>
										<td align="left" style="padding-left: 4px;" id="male"
											class="six3">
											<div class="div200">
												<h:panelGroup id="usersid">
													<h:selectOneMenu styleClass="selectpicker" data-live-search="true" id="userid"
														value="#{productionHome.insertId}">
														<f:selectItem itemLabel="全部" itemValue="0"/>
														<s:selectItems value="#{productionHome.userList}"
															var="var" label="#{productionHome.enterName}--#{var[2]}" itemValue="#{var[0]}" /> 
													</h:selectOneMenu>
												</h:panelGroup>
											</div>
										</td>
										<td align="right" style="padding-left: 19px;" class="tpcc_font">分组：</td>
										<td align="left" style="padding-left: 4px;" id="male">
											<div class="div200">
												<h:panelGroup id="groupId">
													<h:selectOneMenu styleClass="selectpicker" data-live-search="true" id="tunnelId"
														value="#{productionHome.tunnelId}">
														<f:selectItem itemLabel="全部" itemValue="0"/>
														<s:selectItems value="#{productionHome.tunnelList}"
															var="var" label="#{var[1]}" itemValue="#{var[0]}" />
													</h:selectOneMenu>
												</h:panelGroup>
											</div>
										</td>
									</tr>
                          	</table>
                        </li>	    
                    </ul>
                </div>
                </h:form>
				</ui:fragment>
				<ui:fragment rendered="#{!s:hasRole('plant_analyse_search')  and s:hasRole('plant_analyse_exp')}">
					 <div style="float:right;padding-top: 10px;margin-right:20px;"> 
                               		<s:link   view="/analysis/Production.xhtml" action="#{productionHome.exportExcel}" >
                            		<img src="#{request.contextPath}/asset/images/fxdc.jpg" width="82" height="16" /> 
								</s:link>
                               </div>
				</ui:fragment>
				<!--分析页结束-->
				
                			<div class="right_c" style="padding-top:15px">
				<!--订单总量开始-->
				<!--订单总量结束-->
				<div class="tjfxTabTp">
                     <ul class="nav nav-tabs" role="tablist" id="myTab">
                      <li class="active"><a href="#lineChart" role="tab" data-toggle="tab">折线图</a></li>
                      <li class=""><a href="#chart" role="tab" data-toggle="tab">图表</a></li>
                     </ul>
                </div>
				<div class="tab-content">
					<!--折线图开始-->
					<div class="ybp_02 tab-pane active " id="lineChart">
						<div class="fxy_xse">产量统计分析</div>
						<div class="fxy_zxt">
							<div id="placeholder2" class="chart22"
								style="width:100%;height:350px;"></div>
							<div id="xxx" style="text-align: center;"></div>
						</div>
						<div class="clear"></div>
					</div>
					<!--折线图结束-->



					<!--表格开始-->
					<div class="ybp_02 tab-pane" id="chart" style="overflow:hidden;">
						<h:panelGroup rendered="#{productionHome.allList eq '[]'}">
							<div style="width: 100%; margin-top: 20px;">
								<table cellpadding="0" cellspacing="0" class="zptable_01" 
									width="98%">
									<tr>
										<td class="zpth_td zplan" width="17%">作物</td>
										<td class="zpth_td zplan"  width="17%">等级</td>
										<td class="zpth_td zplan"  width="17%">平均单价</td>
										<td class="zpth_td zplan"  width="17%">采收量</td>
										<td class="zpth_td zplan"  width="16%">小计</td>
										<td class="zpth_td zplan"  width="16%">操作</td>
									</tr>
									<tr>
										<td class="zp_tdleft kh_td_font kh_leftbg" colspan="6">没有找到符合条件的记录</td>
									</tr>
								</table>
							</div>
						</h:panelGroup>
						<h:panelGroup rendered="#{productionHome.allList ne '[]'}">
							<div id="show_div" style="width: 98%;height:500px;"  class="fakeContainer" name="fakeContainer1">
								<div align="center" >
									<table>
										<tr>
											<td style="font-family: '宋体';color:#666;padding-right: 5px;">
											<img class="pli_img" src="../asset/images/3.png" width="20" height="20" />
												作物数量:
											</td>
											<td class="pli_font02" height="16" style="padding-right: 25px;">#{productionHome.listNum.size}</td>
											<td style="font-family: '宋体';color:#666;padding-right: 5px;" rowspan="2"><img class="pli_img" src="../asset/images/fxydk0_09.jpg" width="20" height="20" />
												实际产量:
											</td>
											<td class="pli_font02 yieldAll" style="" height="16">0</td>
										</tr>
									</table>
								</div>
					 			<div style="width: 100%;height:480px;overflow-x:hidden;overflow-y:auto;margin-top: 10px;" >
								<table width="100%" id="demoTable" class="sDefault sDefault-Main">
									<tr>
										<td class="zpth_td zplan" width="17%">作物</td>
										<td class="zpth_td zplan"  width="17%">等级</td>
										<td class="zpth_td zplan"  width="17%">平均单价</td>
										<td class="zpth_td zplan"  width="17%">采收量</td>
										<td class="zpth_td zplan"  width="16%">小计</td>
										<td class="zpth_td zplan"  width="16%">操作</td>
									</tr>
									<a:repeat value="#{productionHome.allList}" var="_real"
										rowKeyVar="_index">
										<tr>
											<ui:fragment
												rendered="#{_index==0 || _real[17] ne productionHome.allList[_index-1][17]}">
												<td  class="zpca_td kh_td_font dingd"><h:outputText value="#{_real[2]}" /></td>
											</ui:fragment>
											<ui:fragment
												rendered="#{_index!=0 &amp;&amp; _real[17] eq productionHome.allList[_index-1][17]}">
												<td  class="zpca_td kh_td_font dingd"></td>
											</ui:fragment>
											<td  class="zpca_td kh_td_font dingd"><h:outputText value="#{_real[3]}" /></td>
											<td  class="zpca_td kh_td_font dingd "><h:outputText value="#{_real[14]}" ><f:convertNumber pattern="#0.00"/></h:outputText></td>
											<td  class="zpca_td kh_td_font dingd yieldInfo"><h:outputText value="#{_real[8]}" ><f:convertNumber pattern="#0.00"/></h:outputText></td>
											<td  class="zpca_td kh_td_font dingd "><h:outputText value="#{_real[8]*_real[14]}" ><f:convertNumber pattern="#0.00"/></h:outputText></td>
											<td  class="zpca_td kh_td_font dingd ">
												<a href="javascript:void(0);" style="cursor: pointer;" onclick="viewDetail('#{_real[0]}','#{_real[3]}')">查看详情</a>
											</td>
										</tr>
									</a:repeat>
								</table>
								</div>
							</div>
							</h:panelGroup>
							<h:panelGroup id="view">
							<div id="show_div1" style="width: 100%;height:500px" class="fakeContainer " name="fakeContainer">
								<div >
									<ul style="float: right;margin-right: 21px;"><a href="javascript:;" class="btn btn-default" type="button" data-dismiss="modal" onclick="toBack()">返回</a></ul>
									<ul style="text-align: center;">
										<li style="display: inline-block;margin-right: 35px;"><span style="color:#65666a; font-size:14px;"><img class="pli_img" src="../asset/images/2.png" width="20" height="20" />作物:#{productionHome.detailList[0][2]}</span></li>
										<li style="display: inline-block;margin-right: 15px;"><span style="color:#65666a; font-size:14px;"><img class="pli_img" src="../asset/images/1.png" width="20" height="20" />等级:#{productionHome.detailList[0][3]}</span></li>
									</ul>
								</div>
								<div style="width: 98%;height:450px;overflow-x:hidden;overflow-y:auto;margin-top: 10px;">
									<table width="100%" id="demoTable1" class="sDefault sDefault-Main" >
										<tr>
											<td class="zpth_td zplan"  width="17%;">区域</td>
											<td class="zpth_td zplan"  width="17%;">品种</td>
											<td class="zpth_td zplan"  width="17%;">定植时间</td>
											<td class="zpth_td zplan"  width="17%;">采收时间</td>
											<td class="zpth_td zplan"  width="16%;">单价</td>
											<td class="zpth_td zplan"  width="16%;">采收量</td>
										</tr>
										<a:repeat value="#{productionHome.detailList}" var="_real"
											rowKeyVar="_index">
											<tr>
												<td class="zpca_td kh_td_font dingd"><h:outputText value="#{_real[1]}" /></td>
												<td class="zpca_td kh_td_font dingd"><h:outputText value="#{_real[4]}" /></td>
												<td class="zpca_td kh_td_font dingd"><h:outputText value="#{_real[5]}" /></td>
												<td class="zpca_td kh_td_font dingd"><h:outputText value="#{_real[8]}" /></td>
												<td class="zpca_td kh_td_font dingd"><h:outputText value="#{_real[7]}" ><f:convertNumber pattern="#0.00"/></h:outputText></td>
												<td class="zpca_td kh_td_font dingd"><h:outputText value="#{_real[6]}" /></td>
											</tr>
										</a:repeat>
									</table>
								</div>
							</div>
	
						</h:panelGroup>
						<div class="clear"></div>
					</div>
					<!--表格结束-->
				</div>
				<div style="height: 80px; width: 100%;"></div>


				<div class="clear"></div>
			</div>
			<!--right_c结束-->
            </td>    
    <!--右边结束-->
     <a:form>
  		<a:queue requestDelay="10" ignoreDupResponses="true"/>
		<a:jsFunction name="getPinfoListByBId" action="#{productionHome.getPinfoListByBId}"  data="#{productionHome.pInfoStr}" oncomplete="linkagebinfoid(data);">
  			<a:actionparam name="bInfoId" assignTo="#{productionHome.bInfoId}"/>
		</a:jsFunction>
		 <a:jsFunction name="bIdStringMethod" reRender="breedDiv2" action="#{productionHome.bIdStringMethod()}" oncomplete="jquery('#login').hide();">
           	<a:actionparam name="bIdString" assignTo="#{productionHome.pIdString}"/>
	   	</a:jsFunction>
		 <a:jsFunction name="leList"  action="#{productionHome.leList()}" reRender="levelIds,outputIdPanel" oncomplete="huidiao()">
           	<a:actionparam name="plantIds" assignTo="#{productionHome.plantIds}"/>
	   	</a:jsFunction>
	   	<a:jsFunction name="findDetail" action="#{productionHome.showDetail()}" reRender="view" oncomplete="showView()">
	   		<a:actionparam name="plantId" value="#{productionHome.plantId}" />
	   		<a:actionparam name="leveName" value="#{productionHome.leveName}" />
	   		<a:actionparam name="btype" value="#{productionHome.btype}" />
	   	</a:jsFunction>
	   	<a:jsFunction name="levelListByOutput"  action="#{productionHome.levelListByOutput()}" reRender="levelIds" oncomplete="huidiao()">
           	<a:actionparam name="outputsIds" assignTo="#{productionHome.outputsIds}"/>
           	<a:actionparam name="plantIds" assignTo="#{productionHome.plantIds}"/>
	   	</a:jsFunction>
	</a:form>
	<script>
	//<![CDATA[
		(function() {
			 jquery("#placeholder2").css("width",(document.body.clientWidth- 362) +"px ");
			 jquery("#chart").css("width",(document.body.clientWidth- 362) +"px ");
			 jquery(window).resize(function(){
				 var onLoadWidth = document.body.clientWidth;
				 jquery("#placeholder2").css("width",(document.body.clientWidth- 362)+"px ");
				 jquery("#chart").css("width",(document.body.clientWidth- 362) +"px ");
				
			})
		})();
	//]]>
	</script>
	<script type="text/javascript">
				  //jquery("#farmerid").selectpicker("val",document.getElementById("production:farmerids").value);
	</script>
	
	<script src="#{request.contextPath}/asset/js/jquery.js"></script>
<script src="#{request.contextPath}/asset/js/jquery.flot.js"></script>
<script  type="text/javascript" src="#{request.contextPath}/asset/js/jquery.flot.time.js"></script>
<script src="#{request.contextPath}/asset/js/jquery.flot.pie.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/highcharts/highcharts.js"></script>
	<script type="text/javascript" src="#{request.contextPath}/asset/js/highcharts/highcharts-more.js"></script>
	<script type="text/javascript" src="#{request.contextPath}/asset/js/highcharts/themes/highcharts-them.js"></script>
	<script type="text/javascript" src="#{request.contextPath}/asset/js/highcharts/modules/no-data-to-display.js"></script>
<script defer="defer">
//<![CDATA[

 window.onload = function () {
	 jquery("div[name='fakeContainer']").hide();
	 jquery("div[name='fakeContainer1']").show();
}
function toBack(){
	 jquery("div[name='fakeContainer']").hide();
	 jquery("div[name='fakeContainer1']").show();
}
function viewDetail(rId,leveName){
		jquery("div[name='fakeContainer1']").hide();
		findDetail(rId,leveName);
	
}
function showView(){
// 	new superTable("demoTable1", {
// 	    cssSkin: "sDefault",
// 	    fixedCols:4,
// 		headerRows:1,
// 		colWidths:[(document.body.clientWidth- 370)/6,(document.body.clientWidth- 370)/6,(document.body.clientWidth- 370)/6,(document.body.clientWidth- 370)/6,(document.body.clientWidth- 370)/6,(document.body.clientWidth- 370)/6]
// 	});
	jquery("div[name='fakeContainer']").show();
	
}
choseClass = function(){
	this.className="city_nav city_hover";
	if(document.getElementById('city_link').className=="fxy_tck city_hovers"){
		document.getElementById('city_link').className=="fxy_tck";
		checkBreed();
	}else{
		document.getElementById('city_link').className="fxy_tck city_hovers";
	}
	return false;
}
cheAll = function(obj){
	jquery("input[name='checkBName']").prop("checked", obj.checked);
}    

function checkBreed(){
	jquery("#login").show();
	var s = "";
	jquery("input[name='checkBName']:checked").each(function(){
		s+=this.id+"_";		
	});
	bIdStringMethod(s);
	document.getElementById('city_link').className='fxy_tck';
	document.getElementById("fxy_ul02").style.display = "block";
}
jquery(document).ready(function(){ 
	var str = "#{productionHome.pIdString}";
	if(str!=""){
		var strs = str.split("_");
		jquery("input[name='checkBName']").each(function(){
			for(var i = 0;i<strs.length;i++){
				if(jquery(this).attr("id")==strs[i]){
					jquery(this).iCheck("check");
				}
			}	
		});
	}
	var outputsId = "#{productionHome.outputsIds}";
	if(outputsId != "" && outputsId != "-"){
		var outputs = outputsId.split(",");
		jquery("#outputId").selectpicker('val',outputs);
	}
	jquery(".form_datetime").datetimepicker({
		format: "yyyy-mm-dd",
	    autoclose: true,
		weekStart: 1,
		//startDate: "2014-08-14 10:00",
		language:  'zh-CN',
		minView:2,
	    pickerPosition: "bottom-left"
	});
// 	    jquery("#farmerid").selectpicker("val",document.getElementById("production:farmerids").value);
});
jq = jQuery.noConflict();
jq(function() {
	var data = '#{productionHome.str}';
	data = eval("(" + data + ")");
	jq('#placeholder2').highcharts({
		chart: {
            type: 'spline',
            	backgroundColor: {
    			linearGradient: { x1: 0, y1: 0, x2: 1, y2: 1 },
    			stops: [
    				[0, 'rgb(255, 255, 255)'],
    				[1, 'rgb(255, 255, 255)']
    			]
    		},
    		//borderWidth: 2,
    		//plotBackgroundColor: 'rgba(255, 255, 255, .9)',
    		plotShadow: true,
    		//plotBorderWidth: 1
        },
        legend: {   
        	itemStyle: {
			font: '9pt Trebuchet MS, Verdana, sans-serif',
			color: 'black'

			},
			itemHoverStyle: {
				color: '#039'
			},
			itemHiddenStyle: {
				color: 'gray'
			}
        },  
        lang: {
            noData: "暂无数据!"
        },
        noData: {
            style: {    
                fontWeight: 'bold',     
                fontSize: '15px',
                color: '#303030'        
            }
        },
        title: { text: '' },
        subtitle: {text: ''},
        credits:{enabled:false},
        xAxis: {
//         	tickInterval:data.tickInterval,
        	 categories: data.categories,
        	 gridLineWidth: 0, //设置网格宽度为1 
        },
        yAxis: {
        	min: 0, 
	        title: { text: '种植产量 (kg)' }, 
	        allowDecimals:false,
	        max: data.maxYData
         },
        tooltip: {
            formatter: function() {
                    return '<b>'+ this.series.name +'</b><br/>'+
                    this.x +' '+ this.y + 'kg';
            }
        },
        series: data.resultSource
    });
});
jquery(function() {  
	var selectType='#{productionHome.selectType}';
	if(selectType==1){
		jquery(".gjs").slideDown(800);
		jquery(".gjss_a").attr("aa",2).removeClass("gjtop").addClass("gjbottom");
		jquery("#production\\:selectTypeId").val(1);
	}else{
		jquery(".gjs").slideUp(800);
		jquery(".gjss_a").attr("aa",1).removeClass("gjbottom").addClass("gjtop");
		jquery("#production\\:selectTypeId").val(0);
	}
	jquery('input').iCheck({
	    checkboxClass: 'icheckbox_minimal-blue',
	    radioClass: 'iradio_minimal-blue',
	    increaseArea: '20%' // optional
	  });
	
    var btype = '#{productionHome.btype}';
	jquery("#production\\:btype").val(btype);
	jquery("input[name='dateType']").removeAttr("checked");
	jquery("#type" + btype).prop('checked',true);
	if(btype=="1"){
		jquery(".type_male1").show();
		jquery(".type_female1").hide();
		jquery(".type_nomale1").hide();
	}else if(btype=="2"){
		jquery(".type_male1").show();
		jquery(".type_female1").show();
		jquery(".type_nomale1").hide();
	}else if(btype=="3"){
		jquery(".type_male1").hide();
		jquery(".type_female1").hide();
		jquery(".type_nomale1").show();
	}
	jquery('input').iCheck({
	    checkboxClass: 'icheckbox_minimal-blue',
	    radioClass: 'iradio_minimal-blue',
	    increaseArea: '20%' // optional
	  });
	jquery("input[name='dateType']:radio").on("ifChecked", function(event){
		var type = this.value;
		jquery("#production\\:btype").val(type);
		jquery("input[name='dateType']").removeAttr("checked");
		jquery("#type" + type).prop('checked',true);
		if(type=="1"){
			jquery(".type_male1").show();
			jquery(".type_female1").hide();
			jquery(".type_nomale1").hide();
			jquery("").attr("disabled",true);
		}else if(type=="2"){
			jquery(".type_male1").show();
			jquery(".type_female1").show();
			jquery(".type_nomale1").hide();
		}else if(type=="3"){
			jquery(".type_male1").hide();
			jquery(".type_female1").hide();
			jquery(".type_nomale1").show();
		}
		
	});	
});  
op = function(ind){
	if(ind.getAttribute("aa")=="1"){
		jquery(".gjs").slideDown(800);
		jquery(".gjss_a").attr("aa",2).removeClass("gjtop").addClass("gjbottom");
		jquery("#production\\:selectTypeId").val(1);
	}else{
		jquery(".gjs").slideUp(800);
		jquery(".gjss_a").attr("aa",1).removeClass("gjbottom").addClass("gjtop");
		jquery("#production\\:selectTypeId").val(0);
	}
}
var searchStuObj = #{productionHome.searchStu};

function plantChVal(){
	var plantids=jquery("#plantCheck").val();
	//alert(plantids);
	if(jquery("#plantCheck").val()!=null){
		leList(plantids.toString());
	}else{leList("-");}
}
function huidiao(){
	jquery('.selectpicker').selectpicker();
	 jquery('#outputId').selectpicker({noneSelectedText:"全部"});
	jquery('#outputId').selectpicker();
}
function allReset(){
	jquery("#production\\:leveId").selectpicker('val','全部');
	jquery("#outputId").selectpicker('val','全部');
}
function exportBefort(){
	var type = jquery("#production\\:btype").val();
	if(type == 1){
		alert("最多可以导出一个月的数据，如想导出多个月的数据，请分步导出!");
		return false;
	}else{
		if(type == 3){
			var start = jquery("#production\\:startTime").val();
			var end = jquery("#production\\:endTime").val();
			var beginDate = new Date(start);
			var endDate = new Date(end);
			var year = parseInt(start.substring(0,4));
			var month = start.substring(start.indexOf("-")+1,start.indexOf("-")+3);
			month = parseInt(month.replace("0",""));
			var days = Math.floor((endDate.getTime() - beginDate.getTime())/(60*60*24*1000));
			if(month == 1 || month == 3 || month == 5 || month == 7 || month == 8 || month == 10 || month == 12){
				if(days > 31){
					alert("最多可以导出一个月的数据，如想导出多个月的数据，请分步导出!");
					return false;
				}
			}else if(month == 2){
				if(year%4 ==0){
					if(days > 29){
						alert("最多可以导出一个月的数据，如想导出多个月的数据，请分步导出!");
						return false;
					}
				}else{
					if(days > 28){
						alert("最多可以导出一个月的数据，如想导出多个月的数据，请分步导出!");
						return false;
					}
				}
			}else{
				if(days > 30){
					alert("最多可以导出一个月的数据，如想导出多个月的数据，请分步导出!");
					return false;
				}
			}
		}
		jquery('.exportexcel').trigger('click');
	}
}
function checkSearch(){
/* 	if(jquery('#beginTime').val()>jquery('#endTime').val()){
		alert("开始时间不能大于结束时间");
		return false;
	} */
	if(jquery('#production\\:startTime').val()>jquery('#production\\:endTime').val()){
		alert("开始时间不能大于结束时间");
		return false;
	}
/* 	if(jquery('#yearBegin select').val()>jquery('#yearEnd select').val()){
		alert("开始时间不能大于结束时间");
		return false;
	}
	if(jquery('#yearBegin select').val()==jquery('#yearEnd select').val()){
		if(jquery('#monthBegin select').val()>jquery('#monthEnd select').val()){
			alert("开始时间不能大于结束时间");
			return false;
		}
	} */
	if(jquery('#production\\:leveId').val()==null){
		jquery('#production\\:myLeveId').val("-");
	}else{
		jquery('#production\\:myLeveId').val(jquery('#production\\:leveId').val());
	}

	jquery('#production\\:tunnelInfoId2').val(jquery('#tunnelInfoId').val());
	
	if(document.getElementById("checkone")){
		var str = "";
		var check = document.getElementById("checkone").getElementsByTagName("input");
		for(var i = 0;i<check.length;i++){
			if(check[i].id=='search:allC' || check[i].id=='envAll')
				continue;
			if(check[i].getAttribute("aaa")=="true"){
				str+=check[i].value+"_";
			}
		}
		if(str.length>1){
			str = str.substring(0,str.length-1);
		}else{
			str="0";
			}
		var item = jquery("#binfoid  option:selected").val(); 
		var item2 = jquery("#pinfoid  option:selected").val();
		var item3 = jquery("#farmerid option:selected").val();
		var pids = "";
		if(jquery("#plantCheck").val()!=null){
			pids = jquery("#plantCheck").val().toString();
		}
		jquery("#pIdString").val(pids);
		document.getElementById("production:check").value=str;
	    document.getElementById("production:pInfoIdInfo").value=item2;
	    document.getElementById("production:farmerids").value=item3;

	   
	}
	 if(jquery("#outputId").val() == null){
			jquery("#production\\:outputsIdsHide").val("-");
		}else{
			jquery("#production\\:outputsIdsHide").val(jquery("#outputId").val());
		}
	jquery('#production\\:flushType').val(1);
	return true;
}

	//产出品和等级联动
	function outputChange(){
		var outputid ;
		if(jquery("#outputId").val() !=null){
			outputid = jquery("#outputId").val();
		}else{
			outputid = "-";
		}
		var outputids = "";
		if(outputid != "-"){
			for(var i=0;i<outputid.length;i++){
				outputids += outputid[i];
				outputids += ",";
			}
			outputids = outputids.substring(0,outputids.length-1);
		}else{
			outputids = "-";
		}
		var plantid;
		if(jquery("#plantCheck").val() != null ){
			plantid = jquery("#plantCheck").val();
		}else{
			plantid = "-";
		}
		levelListByOutput(outputids,plantid);
	}
//]]>
</script>
</ui:define>

</ui:composition>

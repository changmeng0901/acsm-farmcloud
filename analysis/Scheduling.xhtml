<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a="http://richfaces.org/a4j"
    template="/layout/template_new.xhtml">

<ui:define name="body">
<script>
//<![CDATA[
jquery(document).ready(function(){
	labels = document.getElementById('male').getElementsByTagName('label');
  	radios = document.getElementById('male').getElementsByTagName('input');
  	for(i=0,j=labels.length ; i<j ; i++){
   		labels[i].onclick=function(){
			if(this.className == '') {
	 			for(k=0,l=labels.length ; k<l ; k++){
					labels[k].className='';
					radios[k].checked = false;
				}
	 			this.className='checked';
	 			try{
					document.getElementById(this.name).checked = true;
	 			} catch (e) {}
			}
   		}
  	}
  	//_$("select").selectmenu({style:'dropdown'});
	//_$(".rich-calendar-input").addClass("r_c_text_date");
   // _$(".rich-calendar-input").removeClass("rich-calendar-input");
   // _$(".ui-selectmenu-dropdown").addClass("small2");
   // _$(".ui-selectmenu-dropdown").removeClass("ui-selectmenu-dropdown");
   // _$(".ui-selectmenu-menu").addClass("ui-selectmenu-menusmall2");
   // _$(".ui-selectmenu-menu").removeClass("ui-selectmenu-menu");

	//_$("#plantIdselect select").selectmenu("destroy").selectmenu({style:'dropdown'});
   // _$(".ui-selectmenu-dropdown").addClass("small322");
   // _$(".ui-selectmenu-dropdown").removeClass("small2");
   // _$(".ui-selectmenu-menu").addClass("ui-selectmenu-menusmall32");
   // _$(".ui-selectmenu-menu").removeClass("ui-selectmenu-menusmall2");
    
   // _$(".ui-selectmenu-menusmall2").each(function(){_$(this).css("left","0px");});
    
});
function linkageeinfoid (data){
	jquery("#binfoid").empty().append(data);
	jquery('#binfoid').selectpicker('refresh');
	jquery('#binfoid')[0].selectedIndex = 0;
	//jquery("#binfoid").selectmenu("destroy").selectmenu({style:'dropdown'});
   // jquery(".rich-calendar-input").addClass("r_c_text_date");
    //jquery(".rich-calendar-input").removeClass("rich-calendar-input");
   // jquery(".ui-selectmenu-dropdown").addClass("small2");
    //jquery(".ui-selectmenu-dropdown").removeClass("ui-selectmenu-dropdown");
   // jquery(".ui-selectmenu-menu").addClass("ui-selectmenu-menusmall2");
    //jquery(".ui-selectmenu-menu").removeClass("ui-selectmenu-menu");
}
function linkagebinfoid (data){
	jquery("#pinfoid").empty().append(data);
	jquery('#pinfoid').selectpicker('refresh');
	jquery('#pinfoid')[0].selectedIndex = 0;
	//_$("#pinfoid").selectmenu("destroy").selectmenu({style:'dropdown'});
   // _$(".rich-calendar-input").addClass("r_c_text_date");
   // _$(".rich-calendar-input").removeClass("rich-calendar-input");
   // _$(".ui-selectmenu-dropdown").addClass("small2");
  //  _$(".ui-selectmenu-dropdown").removeClass("ui-selectmenu-dropdown");
  //  _$(".ui-selectmenu-menu").addClass("ui-selectmenu-menusmall2");
   // _$(".ui-selectmenu-menu").removeClass("ui-selectmenu-menu");
}
function usr(){
	if(scroll2.style.display=='none'){
		scroll2.style.display='block'; 
		scroll1.style.display='none'; 
		reido1.style.backgroundImage='url(../asset/images/radio2.gif)';
	}else{
		var a = jquery("#scroll1").width();
		jquery('.aaa2').css("width",a/12 + "px");
		scroll2.style.display='none';
		scroll1.style.display='block'; 
		reido1.style.backgroundImage='url(../asset/images/radio1.gif)';
 	}
}

function usrnew(){
	if(ftitle.style.display=='none'){
		jquery("#searchStu").val(2);
		ftitle.style.display='block'; 
		gjbott2.style.backgroundImage='url(../asset/images/gjtop.jpg)';
	}else{
		jquery("#searchStu").val(1);
		ftitle.style.display='none';
		gjbott2.style.backgroundImage='url(../asset/images/gjbottom.jpg)';
 	}
}
var onLoadWidth
jquery(document).ready(function(){  
	onLoadWidth = document.body.clientWidth;
	jquery('#scroll1').css("width",(onLoadWidth-800)+ "px"); 
	jquery('#scroll2').css("width",(onLoadWidth-800)+ "px"); 
});
jquery(window).resize(function(){
   	var onLoadWidth = document.body.clientWidth;
	jquery('#scroll1').css("width",(onLoadWidth-800)+ "px"); 
	jquery('#scroll2').css("width",(onLoadWidth-800)+ "px"); 
});
jquery(function(){
	jquery('.pc_name').hover(function(){
		jquery(this).find('.pc_p').show();
 	},function(){
  		jquery(this).find('.pc_p').hide();
 	});
});
checkAll = function(obj){
	if(obj.getAttribute("aaa")=="true"){
		jquery(".chccc").each(function(){
			jquery(this).attr("aaa","false");
			jquery("#"+jquery(this).attr("xx")).attr("aaa","false");
			jquery(this).removeClass("a");
			jquery(this).addClass("b");	   
		});
		document.getElementById("scheduling:allC").value="false";
		obj.setAttribute("aaa","false");
		jquery(obj).removeClass("a");
		jquery(obj).addClass("b");
	}else{
		jquery(".chccc").each(function(){
			jquery(this).attr("aaa","true");
			jquery("#"+jquery(this).attr("xx")).attr("aaa","true");
			jquery(this).removeClass("b");
			jquery(this).addClass("a");	  
				
		});
		obj.setAttribute("aaa","true");
		document.getElementById("scheduling:allC").value="true";
		
		jquery(obj).removeClass("b");
		jquery(obj).addClass("a");
	}
}
che = function(obj,o){
	if(o.getAttribute("aaa")=="false"){
		o.setAttribute("aaa","true");
		document.getElementById(obj).setAttribute("aaa",o.getAttribute("aaa"));
		jquery("#"+o.id).removeClass("b");
		jquery("#"+o.id).addClass("a");
	}else{
		o.setAttribute("aaa","false");
		document.getElementById(obj).setAttribute("aaa",o.getAttribute("aaa"));
		jquery("#"+o.id).removeClass("a");
		jquery("#"+o.id).addClass("b");
	}
	checkChecked();
}
checkChecked =function(){
	var obj = document.getElementById("scheduling:allC")
	if(obj.value=="false"){
		var check = document.getElementById("checkone").getElementsByTagName("input");
		for(var i = 0;i<check.length;i++){
			if(check[i].id=='scheduling:allC')
				continue;
			if(check[i].getAttribute("aaa")=="false"){
				break;
			}else if(i==check.length-1){
				jquery("#b").attr("aaa","true");
				document.getElementById("scheduling:allC").value="true";
				jquery("#b").removeClass("b");
				jquery("#b").addClass("a");
			}
		}
	}else{
		var check = document.getElementById("checkone").getElementsByTagName("input");
		for(var i = 0;i<check.length;i++){
			if(check[i].id=='scheduling:allC')
				continue;
			if(check[i].getAttribute("aaa")=="false"){
			//}else if(i==check.length-1){
				document.getElementById("scheduling:allC").value="false";
				jquery("#b").attr("aaa","false");
				jquery("#b").removeClass("a");
				jquery("#b").addClass("b");
				break;
			}
		}
	}
	
}

checksub = function(){
	if(document.getElementById("checkone")){
		var str = "";
		var check = document.getElementById("checkone").getElementsByTagName("input");
		for(var i = 0;i<check.length;i++){
			if(check[i].id=='search:allC')
				continue;
			if(check[i].getAttribute("aaa")=="true"){
				str+=check[i].value+"_";
			}
		}
		if(str.length>1){
			str = str.substring(0,str.length-1);
		}

		var item = jquery("#binfoid  option:selected").val(); 
		var item2 = jquery("#pinfoid  option:selected").val(); 

		document.getElementById("scheduling:check").value=str;
	    document.getElementById("scheduling:bInfoIdInfo").value=item;
	    document.getElementById("scheduling:pInfoIdInfo").value=item2;
	}
	return true;
}
linksub = function(val){
	document.getElementById("scheduling:ddId").value=val;
}
//]]>
</script>
<style>
.rich-calendar-exterior{line-height: 20px;}
	.legendLabel {font-size: 13px;float: left;}
	#xxx table{margin: 0 auto;}
	
#reido1{width:20px; height:18px;  background:url(../asset/images/radio2.gif) no-repeat; display:block; float:right; margin-top:13px;}
.bootstrap-select:not([class*="span"]):not([class*="col-"]):not([class*="form-control"]):not(.input-group-btn){width: 100px;}
</style>
 <!--二级列表开始-->
 			<!-- #{schedulingHome.login()} -->
        	<td valign="top" width="210" style=" border-right:1px solid #e1e4eb;">
                <div class="left_c2">
                	<ul class="lt_c_ul">
                    	<li style="display: #{s:hasRole('resume')?'block':'none'}">
                        	<a href="#{request.contextPath}/analysis/PrintStatistics.seam"><img src="#{request.contextPath}/asset/images/fenxi1.png" width="12" height="12" />&#160;履历生成量统计</a>
                        </li>
                        <li style="display: #{s:hasRole('resume')?'block':'none'}"><a href="#{request.contextPath}/analysis/VarietySelection.seam"><img src="#{request.contextPath}/asset/images/fenxi2.png" width="12" height="12" />&#160;履历生成量按品种统计</a></li>
                    	<li style="display: #{s:hasRole('order')?'block':'none'}"><a href="#{request.contextPath}/analysis/OrdersStatistics.seam"><img src="#{request.contextPath}/asset/images/fenxi3.png" width="12" height="12" />&#160;订单金额统计</a></li>
                    	<li style="display: #{s:hasRole('order')?'block':'none'}"><a href="#{request.contextPath}/analysis/OrderInfoStatistics.seam"><img src="#{request.contextPath}/asset/images/fenxi4.png" width="12" height="12" />&#160;商品销售统计</a></li>
                   		<li style="display: #{s:hasRole('order')?'block':'none'}"><a href="#{request.contextPath}/analysis/ClientStatistics.seam"><img src="#{request.contextPath}/asset/images/pm.png" width="12" height="12" />&#160;客户购买量排名</a></li>
                   		<li style="display: #{s:hasRole('contract')?'block':'none'}"><a href="#{request.contextPath}/analysis/ContractReport.seam"><img src="../asset/images/biao_07.png" width="10" height="10" />&#160;采购合同汇总</a></li>
                        <li style="display: #{s:hasRole('farmer_work')?'block':'none'}">
                        	<a href="#{request.contextPath}/analysis/Forecast.seam"><img src="#{request.contextPath}/asset/images/yuchan.png" width="12" height="12" />&#160;种植产量查询</a>
                        </li>
                        <li style="display: #{s:hasRole('farmer_work')?'block':'none'}"><a href="#{request.contextPath}/analysis/Production.seam"><img src="../asset/images/biao_19.png" width="12" height="12" />&#160;采收量查询</a></li>
                    	<li>
                        	<a href="#{request.contextPath}/analysis/Rank.seam"><img src="#{request.contextPath}/asset/images/paiming.png" width="12" height="12" />&#160;区域管理排名</a>
                        </li>
                        
                        <li>
                        	<a href="#{request.contextPath}/analysis/OutputGapAnalysis.seam"><img src="#{request.contextPath}/asset/images/qk_analysis.png" width="12" height="12" />&#160;缺口产量查询</a>
                        </li>
                        <li>
                        	<a href="#{request.contextPath}/analysis/DemandOutputAnalysis.seam"><img src="#{request.contextPath}/asset/images/xq_analysis.png" width="12" height="12" />&#160;需求产量查询</a>
                        </li>
                        <li>
                        	<a href="#{request.contextPath}/analysis/VisitAnalysis.seam"><img src="#{request.contextPath}/asset/images/pz_analysis.png" width="12" height="12" />&#160;履历访问量按品种查询</a>
                        </li>
                        <li>
                        	<a href="#{request.contextPath}/analysis/EnterpriseVisitAnalysis.seam"><img src="#{request.contextPath}/asset/images/ll_analysis.png" width="12" height="12" />&#160;履历访问量查询</a>
                        </li>
                    </ul>
                	<div class="clear"></div>
                </div>
            </td>
    <!--二级列表结束-->
    
	<!--右边开始-->
            <td valign="top">
                 <div class="right_c" style="min-height:30px;">
                	<div class="r_title">
                    	<div class="r_t_l"><font size="3">排产产量查询</font></div>
                    </div>
                    <div class="clear"></div>
                 </div>   
				<!--分析页开始-->
				<h:form id="scheduling">
					<div class="fxy_title">
                    	
                    	<ul class="fxy_ul six3">
                            <li class="reili">
                                <table cellpadding="0" cellspacing="0" style="float:left;">
                                    <tr>
                                        <td align="right" class="tpcc_font">定植时间：</td>
                                        <td align="left" class="tc_strong" width="140">
                                            <div style="margin-right: 10px;">
                                            	<h:selectOneMenu value="#{schedulingHome.valueYear}"  styleClass="selectpicker">
                                            		<f:selectItem itemLabel="全部" itemValue="0" />
					                            	<f:selectItems value="#{commonHome.years}"></f:selectItems>
					                            </h:selectOneMenu>
                                             </div>
                                        </td>
                                        <td align="left" class="tc_strong" width="123">
                                            <div style="margin-right: 10px;">
                                            	<h:selectOneMenu value="#{schedulingHome.valueTime}"  styleClass="selectpicker">
                                            		<f:selectItem itemLabel="全部" itemValue="0" />
					                            	<f:selectItems value="#{commonHome.times}"></f:selectItems>
					                            </h:selectOneMenu>
                                             </div>
                                        </td>
                                        <td>&#160;--&#160;</td>
                                        <td align="left" class="tc_strong" width="140">
                                            <div style="margin-right: 10px;">
                                            	<h:selectOneMenu value="#{schedulingHome.valueEndYear}"  styleClass="selectpicker">
                                            		<f:selectItem itemLabel="全部" itemValue="0" />
					                            	<f:selectItems value="#{commonHome.years}"></f:selectItems>
					                            </h:selectOneMenu>
                                             </div>
                                        </td>
                                        <td align="left" class="tc_strong" width="140">
                                            <div style="margin-right: 10px;">
                                            	<h:selectOneMenu value="#{schedulingHome.valueEndTime}"  styleClass="selectpicker">
                                            		<f:selectItem itemLabel="全部" itemValue="0" />
					                            	<f:selectItems value="#{commonHome.times}"></f:selectItems>
					                            </h:selectOneMenu>
                                             </div>
                                        </td>
                                        <td width="80" align="right"><a id="gjbott2" onclick="usrnew()" href="Javascript: void(0)">高级搜索</a></td>
				                        <input name="searchStu" id="searchStu" type="hidden"/>
                                    </tr>
                                </table>
                              <div style="float:right;"> 
                               		<s:link    view="/analysis/Scheduling.xhtml" action="#{schedulingHome.exportExcel}" > 
                               			<img src="../asset/images/fxdc.jpg" width="82" height="16" />
                               		</s:link>
                               </div>
                            </li>
                             <li class="reili" style="height: 100%;">
                                <table cellpadding="0" cellspacing="0" style="float:left;" >
                                    <tr>
                                        <td class="tpcc_font"> 
                                        	<div class="fxy_div" style="width: 400px;height:40px;">
					                        	<img src="#{request.contextPath}/asset/images/fxpz.jpg" value="显示" id="city_nav" onclick="return choseClass();" style="margin-top: 4px;"/>
					                             <h:panelGroup id="breedDiv">
						                             <div class="fxy_tck" id="city_link">
						                            	<ul>
						                            	<li class="fx_tckli" id="plantId_0">
						                            	<h:selectBooleanCheckbox  rendered="#{not empty schedulingHome.pList}" id="checkAll" onclick="cheAll(this)" value="#{schedulingHome.allCB}"></h:selectBooleanCheckbox><span style="#{not empty schedulingHome.pList?'':'display:none'}">全选</span></li>
						                            		<a:repeat  value="#{schedulingHome.pList}"  var="obj2"   rowKeyVar="_index">
						                                		<li class="fx_tckli" id="plantId_#{_index}"><input type="checkbox" name="checkBName" id="#{obj2.plantId}"/>#{obj2.name}</li>
						                            		</a:repeat>
						                                    <li class="ie7clear"></li>
						                            	</ul>
						                                <div class="fx_tckbu">
						                                	<a href="javascript:;" onclick="checkBreed()" class="btn btn-primary">确定</a>&#160;&#160;
						                                    <a href="javascript:;" title="关闭窗口" onclick="document.getElementById('city_link').className='fxy_tck';return !1;" class="btn btn-default">取消</a>
						                                </div>		
						                            </div>
					                            </h:panelGroup>
					                            <table cellpadding="0" cellspacing="0" style="float:right;">
					                             	<tr>
					                                	<td width="80" align="right">
					                                		<h:commandButton action="#{schedulingHome.selectall}" styleClass="btn btn-primary" value="搜索" onclick="return checksub()" />
					                                	</td>
					                                	<td width="90" align="right">
					                                		<h:commandButton action="#{schedulingHome.reset}" id="reset" styleClass="btn btn-default" value="重置"/>
					                                	</td>
					                                </tr>
					                             </table>
					                        </div>
					                        
					                        <div id="fxy_ul02">
					                        <h:panelGroup id="breedDiv2">
					                    	<ul class="fxy_ul02" style="#{empty schedulingHome.checkpList?'display:none':''}">
					                        	<li class="fxy_li">已选品种：</li>
					                        	<li class="fxy_liyx" style="#{schedulingHome.allCB?'':'display:none'}">已选择所有品种</li>
						                        	<a:repeat  value="#{schedulingHome.checkpList}"  var="obj" rendered="#{!schedulingHome.allCB}"  rowKeyVar="_index">
						                               <li class="fxy_liyx" id="checkBId_#{_index}">#{obj.name}</li>
						                            </a:repeat>
					                            <li class="ie7clear"></li>
					                        </ul>
					                        </h:panelGroup>
					                        </div>
                                        </td>
                                        
                                    </tr>
                                </table>
                              
                            </li>
                        </ul>
                    	<div class="clear"></div>
                    </div>
                    <div id="ftitle" style="display: none;">
                    	<ul>
                            <li class="reili">
                                <table cellpadding="0" cellspacing="0" style="float:left;">
                                    <tr>
                                        <td align="right" class="tpcc_font">采收时间：</td>
                                         <td align="left" class="tc_strong" width="140">
                                            <div style="margin-right: 10px;">
                                            	<h:selectOneMenu value="#{schedulingHome.plantYear}"  styleClass="selectpicker">
                                            		<f:selectItem itemLabel="全部" itemValue="0" />
					                            	<f:selectItems value="#{commonHome.years}"></f:selectItems>
					                            </h:selectOneMenu>
                                             </div>
                                        </td>
                                        <td align="left" class="tc_strong" width="123">
                                            <div style="margin-right: 10px;">
                                            	<h:selectOneMenu value="#{schedulingHome.plantEndTime}"  styleClass="selectpicker">
                                            		<f:selectItem itemLabel="全部" itemValue="0" />
					                            	<f:selectItems value="#{commonHome.times}"></f:selectItems>
					                            </h:selectOneMenu>
                                             </div>
                                        </td>
                                         <td>&#160;--&#160;</td>
                                        <td align="left" class="tc_strong" width="140">
                                            <div style="margin-right: 10px;">
                                            	<h:selectOneMenu value="#{schedulingHome.plantEndYear}"  styleClass="selectpicker">
                                            		<f:selectItem itemLabel="全部" itemValue="0" />
					                            	<f:selectItems value="#{commonHome.years}"></f:selectItems>
					                            </h:selectOneMenu>
                                             </div>
                                        </td>
                                        <td align="left" class="tc_strong" width="140">
                                            <div style="margin-right: 10px;">
                                            	<h:selectOneMenu value="#{schedulingHome.plantEndEndTime}"  styleClass="selectpicker">
                                            		<f:selectItem itemLabel="全部" itemValue="0" />
					                            	<f:selectItems value="#{commonHome.times}"></f:selectItems>
					                            </h:selectOneMenu>
                                             </div>
                                        </td>
                                    </tr>
                                </table>
                            </li>
                            <li class="reili">
                                <table cellpadding="0" cellspacing="0" style="float:left;">
                                    <tr>
                                        <td align="right" class="tpcc_font">区域范围：</td>
                                        <h:panelGroup rendered="#{sessionTake.getLevelId() eq 1}">
	                                         <td align="left" class="tc_strong" width="140">
	                                            <div style="margin-right: 10px;">
													<h:selectOneMenu immediate="true" id="einfoid" styleClass="selectpicker" value="#{schedulingHome.eInfoId}" valueChangeListener="#{schedulingHome.getBInfoListByEntId}">
														<f:selectItem itemLabel="全部" itemValue="0" />
														<s:selectItems value="#{commonHome.eInfoList}" var="einfo" label="#{einfo.name}" itemValue="#{einfo.id}"/>
														<a:support event="onchange" eventsQueue="default" ajaxSingle="true" bypassUpdates="true" data="#{schedulingHome.bInfoStr}" oncomplete="linkageeinfoid(data);getPinfoListByBId(#{schedulingHome.bInfoId});"/>
													</h:selectOneMenu>
	                                             </div>
	                                        </td>
                                        </h:panelGroup>
                                        <td align="left" class="tc_strong" width="140">
                                            <div style="margin-right: 10px;"><h:inputHidden name="bInfoIdInfo" value="#{schedulingHome.bInfoId}" id="bInfoIdInfo"/>
											 	<select name="binfoid" id="binfoid" onchange="getPinfoListByBId(this.value);" class="selectpicker">
											 		<option value="0">全部</option>
													<a:repeat value="#{schedulingHome.bInfoList}" var="binfo">
                                                   		<h:panelGroup rendered="#{schedulingHome.bInfoId eq binfo.id}">
															<option value="#{binfo.id}" selected="selected">#{binfo.name}</option>
														</h:panelGroup>
														<h:panelGroup rendered="#{schedulingHome.bInfoId ne binfo.id}">
															<option value="#{binfo.id}" >#{binfo.name}</option>
														</h:panelGroup>
                                                   	</a:repeat>
												</select>
                                             </div>
                                        </td>
                                        <td align="left" class="tc_strong" width="145">
                                            <div style="margin-right: 10px;"><h:inputHidden name="pInfoIdInfo" value="#{schedulingHome.pInfoId}" id="pInfoIdInfo"/>
												<select name="pinfoid" id="pinfoid" class="selectpicker">
													<option value="0">全部</option>
													<a:repeat value="#{schedulingHome.pInfoList}" var="pinfo">
                                                   		<h:panelGroup rendered="#{schedulingHome.pInfoId eq pinfo.id}">
															<option value="#{pinfo.id}" selected="selected">#{pinfo.name}</option>
														</h:panelGroup>
														<h:panelGroup rendered="#{schedulingHome.pInfoId ne pinfo.id}">
															<option value="#{pinfo.id}" >#{pinfo.name}</option>
														</h:panelGroup>
                                                   	</a:repeat>
												</select>
                                             </div>
                                        </td>
                                    </tr>
                                </table>
                             
                            </li>
                            <li class="reili" style="padding-bottom:5px;">
                                <table cellpadding="0" cellspacing="0" style="float:left;" id="checkone" width="100%">
                                    <tr>
                                        <td align="right" class="tpcc_font" width="60">种植环境：<h:inputHidden name="check" value="#{schedulingHome.check}" id="check"/></td>
                                        <td align="left" style="padding-left:4px;">
                                            <div class="lapc_div">
                                                <label class="la_aa">
			                                        <a  class="#{schedulingHome.allC=='true'?'a':'b'}" id="b" href="javascript:void(0);" aaa="#{schedulingHome.allC}" onclick="checkAll(this)"></a>
			                                        <h:inputHidden id="allC" value="#{schedulingHome.allC}"/>
				                                </label>
				                                <span class="s_pan">全选</span>
                                            </div>
                                            
                                            <a:repeat  value="#{commonHome.petList}"  var="pet"   rowKeyVar="_index">
				                            	<div class="lapc_div">
					                                <label for="one#{_index}" class="la_aa">
					                                        <a href="javascript:void(0);" id="one#{_index}1" xx="one#{_index}" class="#{schedulingHome.map[pet.id]} chccc" aaa="#{schedulingHome.map[pet.id]=='a'?'true':'false'}" onclick="che('one#{_index}',this)"></a>
					                                        <input type="checkbox" id="one#{_index}" name="cb" value="#{pet.id}" aaa="#{schedulingHome.map2[pet.id]}" style="display:none;" />
					                                </label>
					                                <span class="s_pan">#{pet.name}</span>
				                                </div>
				                            </a:repeat>
                                        </td>
                                    </tr>
                                </table>
                             
                            </li>
                             <li class="reili" style="padding-top:0;">
                                <table cellpadding="0" cellspacing="0" style="float:left;">
                                    <tr>
                                        <td align="right" class="tpcc_font">种植标准：<h:inputHidden value="#{schedulingHome.ddId}" id="ddId"/></td>
                                        <td align="left" style="padding-left:4px;" id="male" class="six3" >
                                        	 <div  onclick="linksub(0)" style="float:left;"><input type="radio" value="0" name="sex" id="sex_nomale" class="sex_nomale" /><label for="sex_nomale"  name="sex_nomale" class="#{schedulingHome.ddId eq 0?'checked':''}" style="font-weight: 100;">全部</label></div>
                                             <a:repeat value="#{commonHome.ddList}" var="dd" rowKeyVar="_index">
                                             <div  onclick="linksub(#{dd.dataDicId})" style="float:left;"><input type="radio" value="#{dd.dataDicId}" name="sex" id="sex_nomale#{_index}" class="sex_nomale" /><label for="sex_nomale#{_index}"  name="sex_nomale" class="#{schedulingHome.ddId eq dd.dataDicId?'checked':''}" style="font-weight: 100;">#{dd.name}</label></div>
                                             </a:repeat>
                                        </td>
                                   </tr>
                                </table>
                            </li>            
                        </ul>
                    </div>
                </h:form>
				<!--分析页结束-->
                <div class="right_c">
                <!--订单总量开始-->
                    <div class="fxy_print3">
                    	<ul>
                        	<li class="fxy_pli03">
                            	<table class="pli_table">
                                	<tr>
                                    	<td rowspan="2"><img class="pli_img" src="../asset/images/fxydk0_10.jpg" width="46" height="46" /></td>
                                        <td class="pli_font01" height="23">地块数量</td>
                                    </tr>
                                    <tr>
                                    	<td class="pli_font02" height="16">#{empty schedulingHome.esrList ?0:schedulingHome.esrList.size}</td>
                                    </tr>
                                </table>
                            </li>
                            <li class="fxy_pli03">
                            	<table class="pli_table">
                                	<tr>
                                    	<td rowspan="2"><img class="pli_img" src="../asset/images/fxydk0_08.jpg" width="46" height="46" /></td>
                                        <td class="pli_font01" height="23">种植面积</td>
                                    </tr>
                                    <tr>
                                    	<td class="pli_font02 " height="16"><h:outputText value="#{schedulingHome.areaAll}"><f:convertNumber pattern="#0.00"/></h:outputText>亩</td>
                                    </tr>
                                </table>
                            </li>
                            <li class="fxy_pli03">
                            	<table class="pli_table">
                                	<tr>
                                    	<td rowspan="2"><img class="pli_img" src="../asset/images/fxydk0_09.jpg" width="46" height="46" /></td>
                                        <td class="pli_font01" height="23">预计产量</td>
                                    </tr>
                                    <tr>
                                    	<td class="pli_font02 " height="16"><h:outputText value="#{schedulingHome.yieldAll}"><f:convertNumber pattern="#0.00"/></h:outputText></td>
                                    </tr>
                                </table>
                            </li>
                            
                    	</ul>
                    </div>
                    <!--订单总量结束-->


                    <!--折线图开始-->
                    <div class="ybp_02">
                        <div class="fxy_xse">产量统计分析</div>
                        <div class="fxy_zxt">
                        	<div id="placeholder2" class="chart22"  style="height:311px;"></div>
                       		<div id="xxx" style="text-align: center;"></div>
                        </div>
                        <div class="clear"></div>
                    </div>
                    <!--折线图结束-->
                    
                    
                    
                    <!--表格开始-->
                    <div class="ybp_02">
                        <div class="fxy_pzxs">
                        	<ul>
                            	<li style="float:left;"><b>全部</b><font style="font-size:12px;"></font></li>
                                <li style="float:right;#{schedulingHome.esrList eq '[]'?'display:none;':''}"><span style="float:right; text-indent:10px;">按月显示产量详情</span><a href="Javascript: void(0)" id="reido1"  onclick="usr()"></a></li>
                            </ul>    
                        </div>
                         <h:panelGroup rendered="#{schedulingHome.esrList eq '[]'}">
                         	<div style="width:100%; margin-top:20px;">
	                        	<table cellpadding="0" cellspacing="0" class="zptable_01" width="100%">
		                                <tr>
		                                    <td class="zpth_td zplan" style="border-left:1px solid #CADDEC; ">区域</td>
		                                	<td class="zpth_td zplan" >作物</td>
		                                    <td class="zpth_td zplan" >种植标准</td>
		                                    <td class="zpth_td zplan" >种植面积</td>
		                                    <td class="zpth_td zplan" >定植时间 </td>
		                                    <td class="zpth_td zplan" >采收开始</td>
		                                    <td class="zpth_td zplan" >采收结束</td>
		                                    <td class="zpth_td zplan" >预计产量</td>
		                                </tr>
		                                 <tr>
		                                    <td class="zp_tdleft kh_td_font kh_leftbg" colspan="8">没有找到符合条件的记录</td>
		                                </tr>
		                         </table>  
	                         </div>    
                        </h:panelGroup>
                        <h:panelGroup rendered="#{schedulingHome.esrList ne '[]'}">
                        	<div style="width:100%; margin-top:20px;">
                            <div style="width:370px; float:left; border-left:1px solid #CADDEC; border-right:1px solid #CADDEC;" id="divleft">
	                        <table cellpadding="0" cellspacing="0" class="zptable_01" width="370">
	                                <tr>
	                                    <td class="zpth_td zplan">区域</td>
	                                	<td class="zpth_td zplan" >作物</td>
	                                    <td class="zpth_td zplan" >种植标准</td>
	                                    <td class="zpth_td zplan" >种植面积</td>
	                                    <!-- <td class="zpth_td zplan">定植时间</td>
	                                      <td class="zpth_td zplan">采收期</td>
	                                       <td class="zpth_td zplan">预计产量</td>-->
	                                </tr>
	                         </table>      
                         
                         	
                            <table cellpadding="0" cellspacing="0" class="zptable_01" width="370" id="tttj">
                            	<a:repeat value="#{schedulingHome.esrList}" var="_esr" rowKeyVar="_index"> 
                                <tr>
                                    <td class="zp_tdleft kh_td_font kh_leftbg" >
                                            <div class="pc_name">
                                                <div class="pc_p" style="margin-top:-87px;">
                                                   <table width="190" height="140" style=" table-layout:fixed;" cellpadding="0" cellspacing="0">
                                                   		<tr>
                                                        	<td width="7" valign="middle"><img src="../asset/images/san.png" width="7" height="13" /></td>
                                                            <td valign="top" style="background:url(../asset/images/tab_bg.png) repeat;">
                                                            	<table width="90%" style="margin:10px auto;" cellpadding="0" cellspacing="0">
                                                            		<tr>
                                                                    	<td width="50%" class="ap_none">种植环境</td>
                                                                        <td width="50%" class="ap_none2">#{_esr.plantEnvTypeId.name}</td>
                                                                    </tr>
                                                            		<tr>
                                                                    	<td width="50%" class="ap_none">大棚</td>
                                                                        <td width="50%" class="ap_none2">#{_esr.tunnelInfoId.tunnelName}</td>
                                                                    </tr>
                                                            		<tr>
                                                                    	<td width="50%" class="ap_none">品种</td>
                                                                        <td width="50%" class="ap_none2">#{_esr.breedId.name}</td>
                                                                    </tr>
                                                            		<tr>
                                                                    	<td width="50%" class="ap_none">定植时间</td>
                                                                        <td width="50%" class="ap_none2"> 
                                                                        	#{_esr.schedulingModelInfoId.valueTime}月份
                                                                        	<h:outputText  rendered="#{_esr.schedulingModelInfoId.valueTenDays eq 1}" value="上旬"/>
													       					<h:outputText  rendered="#{_esr.schedulingModelInfoId.valueTenDays eq 2}" value="中旬"/>
													       					<h:outputText  rendered="#{_esr.schedulingModelInfoId.valueTenDays eq 3}" value="下旬"/>
                                                                        </td>
                                                                    </tr>
                                                            		<tr>
                                                                    	<td width="50%" class="ap_none">采收开始</td>
                                                                        <td width="50%" class="ap_none2"> 
                                                                        	#{_esr.schedulingModelInfoId.plantBeginTime}月份
                                                                        	<h:outputText  rendered="#{_esr.schedulingModelInfoId.plantBeginTenDays eq 1}" value="上旬"/>
													       					<h:outputText  rendered="#{_esr.schedulingModelInfoId.plantBeginTenDays eq 2}" value="中旬"/>
													       					<h:outputText  rendered="#{_esr.schedulingModelInfoId.plantBeginTenDays eq 3}" value="下旬"/>
                                                                        </td>
                                                                    </tr>
                                                            		<tr>
                                                                    	<td width="50%" class="ap_none">采收结束</td>
                                                                        <td width="50%" class="ap_none2"> 
                                                                        	#{_esr.schedulingModelInfoId.plantEndTime}月份
                                                                        	<h:outputText  rendered="#{_esr.schedulingModelInfoId.plantEndTenDays eq 1}" value="上旬"/>
													       					<h:outputText  rendered="#{_esr.schedulingModelInfoId.plantEndTenDays eq 2}" value="中旬"/>
													       					<h:outputText  rendered="#{_esr.schedulingModelInfoId.plantEndTenDays eq 3}" value="下旬"/>
                                                                        </td>
                                                                    </tr>
                                                            		<tr>
                                                                    	<td width="50%" class="ap_none">占地面积</td>
                                                                        <td width="50%" class="ap_none2"><h:outputText value="#{_esr.tunnelInfoId.area}"><f:convertNumber pattern="#0.00"/></h:outputText>亩</td>
                                                                    </tr>
                                                            	</table>
                                                            </td>
                                                        </tr>
                                                   </table>
                                                   
                                                </div>
                                                 
                                               #{_esr.tunnelInfoId.tunnelName}
                                                
                                            </div>
                                    </td>
                                    <td class="zp_tdleft kh_td_font kh_leftbg">#{_esr.breedId.plant.name}</td>
                                    <td class="zp_tdleft kh_td_font kh_leftbg">#{_esr.schedulingModelInfoId.plantingPattern.name}</td>
                                    <td class="zp_tdleft kh_td_font kh_leftbg "><h:outputText value="#{_esr.cropArea}"><f:convertNumber pattern="#0.00"/></h:outputText>亩</td>
                                </tr>
                                </a:repeat>
                             </table>
                        </div>
                       <div id="scroll1" style="border-bottom:0;display: none;">  
                              <table cellpadding="0" cellspacing="0" class="zp_lsm">
                                    <tr>
                                      
                                      <a:repeat value="#{schedulingHome.dateTime}" var="_date" rowKeyVar="_index"> 
										<td class="zp_bigtd">
                                            <table cellpadding="0" cellspacing="0" class="zptable">
                                                <tr>
                                                    <td class="zpth_td2 zplan zplan" height="40" style="border-left:0 solid #CADBEB;" ><h:outputText value="#{_date.substring(2, _date.length())}"></h:outputText>月</td>
                                                </tr>
                                                <a:repeat value="#{schedulingHome.esrList}" var="_esr" rowKeyVar="_index"> 
	                                                <tr>
	                                                    <td class="zp_platd kh_td_font dingd aaa2" style="border-left:0 solid #CADBEB;" >
	                                                    	<h:outputText value="#{schedulingHome.esrMapList.get(schedulingHome.stInfo(_date.substring(0, 4),schedulingHome.srdByDateTime.get(_date),_esr.id)) eq null ?0:schedulingHome.esrMapList.get(schedulingHome.stInfo(_date.substring(0, 4),schedulingHome.srdByDateTime.get(_date),_esr.id))}"><f:convertNumber pattern="#0.00"/></h:outputText>
	                                                    </td>
	                                                </tr>
                                                </a:repeat>
                                            </table>
                                          </td>
                                        </a:repeat>
                                    </tr>
                                 </table>   
						</div> 
						<div id="scroll2" style="border-bottom:0;">  
							 <table cellpadding="0" cellspacing="0" class="zp_lsm" width="100%">
                             	<tr>
                                	<td class="zpth_td2 zplan zplan" width="25%">定植时间 </td>
                                	<td class="zpth_td2 zplan zplan" width="25%">采收开始</td>
                                	<td class="zpth_td2 zplan zplan" width="25%">采收结束</td>
                                </tr>
                                <a:repeat value="#{schedulingHome.esrList}" var="_esr" rowKeyVar="_index"> 
									<tr>
	                                	<td class="zp_platd kh_td_font dingd" width="33%">
	                                		#{_esr.schedulingModelInfoId.valueTime}月份
                                           	<h:outputText  rendered="#{_esr.schedulingModelInfoId.valueTenDays eq 1}" value="上旬"/>
			       							<h:outputText  rendered="#{_esr.schedulingModelInfoId.valueTenDays eq 2}" value="中旬"/>
			       							<h:outputText  rendered="#{_esr.schedulingModelInfoId.valueTenDays eq 3}" value="下旬"/>
                                      	</td>
	                                	<td class="zp_platd kh_td_font dingd" width="33%"> 
	                                		#{_esr.schedulingModelInfoId.plantBeginTime}月份
                                            <h:outputText  rendered="#{_esr.schedulingModelInfoId.plantBeginTenDays eq 1}" value="上旬"/>
					       					<h:outputText  rendered="#{_esr.schedulingModelInfoId.plantBeginTenDays eq 2}" value="中旬"/>
					       					<h:outputText  rendered="#{_esr.schedulingModelInfoId.plantBeginTenDays eq 3}" value="下旬"/>
	                                	</td>
	                                	<td class="zp_platd kh_td_font dingd" width="33%"> 
	                                		#{_esr.schedulingModelInfoId.plantEndTime}月份
		                                    <h:outputText  rendered="#{_esr.schedulingModelInfoId.plantEndTenDays eq 1}" value="上旬"/>
					       					<h:outputText  rendered="#{_esr.schedulingModelInfoId.plantEndTenDays eq 2}" value="中旬"/>
					       					<h:outputText  rendered="#{_esr.schedulingModelInfoId.plantEndTenDays eq 3}" value="下旬"/>
	                                	</td>
                                    </tr>
                                </a:repeat>
                            </table>   
						</div> 

                        <div style="width:78px; float:left;border-right:1px solid #CADDEC;">
                        	<table width="78" cellpadding="0" cellspacing="0" class="zpta3">
                            	<tr>
                            		<td class="zpth_td2 zplan zplan">预计产量</td>
                            	</tr>
                            	<a:repeat value="#{schedulingHome.esrList}" var="_esr" rowKeyVar="_index"> 
                            	<tr>
                            		<td class="zpca_td kh_td_font dingd "><h:outputText value="#{_esr.allYield}"><f:convertNumber pattern="#0.00"/></h:outputText></td>
                            	</tr>
                            	</a:repeat>
                            </table>
                        
                        	<div class="clear"></div>
                        </div>
                        </div> 
					</h:panelGroup>
                                   
                       <div class="clear"></div>
                    </div>
                    
                    <!--表格结束-->
                    <div style="height:80px; width:100%;"></div>


                    <div class="clear"></div>
                </div><!--right_c结束-->
                
            </td>    
    <!--右边结束-->
     <a:form>
  		<a:queue requestDelay="10" ignoreDupResponses="true"/>
		<a:jsFunction name="getPinfoListByBId" action="#{schedulingHome.getPinfoListByBId}"  data="#{schedulingHome.pInfoStr}" oncomplete="linkagebinfoid(data);">
  			<a:actionparam name="bInfoId" assignTo="#{schedulingHome.bInfoId}"/>
		</a:jsFunction>
        <a:jsFunction name="bIdStringMethod" reRender="breedDiv2" action="#{schedulingHome.bIdStringMethod()}" oncomplete="jquery('#login').hide();">
           	<a:actionparam name="bIdString" assignTo="#{schedulingHome.pIdString}"/>
	   	</a:jsFunction>
	</a:form>
	<script type="text/javascript">
				  jquery('.selectpicker').selectpicker();
	</script>
	
	<script src="#{request.contextPath}/asset/js/jquery.js"></script>
<script src="#{request.contextPath}/asset/js/jquery.flot.js"></script>
<script  type="text/javascript" src="#{request.contextPath}/asset/js/jquery.flot.time.js"></script>
<script src="#{request.contextPath}/asset/js/jquery.flot.pie.js"></script>
<script defer="defer">
//<![CDATA[
choseClass = function(){
	this.className="city_nav city_hover";
	if(document.getElementById('city_link').className=="fxy_tck city_hovers"){
		document.getElementById('city_link').className=="fxy_tck";
		checkBreed();
	}else{
		document.getElementById('city_link').className="fxy_tck city_hovers";
	}
	return false;
}

cheAll = function(obj){
	jquery("input[name='checkBName']").prop("checked", obj.checked);
}
function checkBreed(){
	jquery("#login").show();
	var s = "";
	jquery("input[name='checkBName']:checked").each(function(){
		s+=this.id+"_";		
	});
	bIdStringMethod(s);
	document.getElementById('city_link').className='fxy_tck';
	document.getElementById("fxy_ul02").style.display = "block";
}
jquery(document).ready(function(){ 
	var str = "#{schedulingHome.pIdString}";
	if(str!=""){
		var strs = str.split("_");
		jquery("input[name='checkBName']").each(function(){
			for(var i = 0;i<strs.length;i++){
				if(jquery(this).attr("id")==strs[i]){
					jquery(this).attr("checked", true);
				}
			}	
		});
	}
});

jq = jQuery.noConflict();
jquery(function() {   
    var pie = []
    jq.plot('#placeholder', pie, {
	    series: {
	        pie: {
	            show: true
	        }
	    }
	});   
});  
jq(function() {
		var bb = "#{schedulingHome.flag}";
		if(bb=="true"){
			#{schedulingHome.str}
		var plot = jq.plot("#placeholder2", [
			#{schedulingHome.str2}
		], {
			xaxis: { mode: "time",
			tickformat:'%y%m',
			minTickSize: [1, "month"]},
			yaxis: {  min: 0 },
			series: {
				lines: {
					show: true
				},
				points: {
					show: true
				}
			},
			legend: {
	    		show:true,
	            noColumns: 0,
	            labelBoxBorderColor: "#ffffff",
	    		position:"nw",
	    		container:jq("#xxx")
	        },
			grid: {
				hoverable: true,
				clickable: true
			}
		});

		function showTooltip(x, y, contents) {
			jq("<div id='tooltip'>" + contents + "</div>").css({
				position: "absolute",
				display: "none",
				top: y + 5,
				left: x + 5,
				border: "1px solid #fdd",
				padding: "2px",
				"background-color": "#fee",
				opacity: 0.80
			}).appendTo("body").fadeIn(200);
		}

		var previousPoint = null;
		jq("#placeholder2").bind("plothover", function (event, pos, item) {

			if (true) {
				var str = "(" + pos.x.toFixed(2) + ", " + pos.y.toFixed(2) + ")";
				jq("#hoverdata").text(str);
			}
			if (true) {
				if (item) {
					if (previousPoint != item.dataIndex) {
						previousPoint = item.dataIndex;
						jq("#tooltip").remove();
						var x = item.datapoint[0].toFixed(2),
						y = item.datapoint[1].toFixed(2);
						var str1 = (x+"").split(".")[0];
						var dat = new Date(parseInt(str1));
						var str = dat.getFullYear()+"年"+(dat.getMonth()+1)+'月';
						y = (y+"").split(".")[0];
						
						showTooltip(item.pageX, item.pageY,
								str + " "+ item.series.label +"  " + y+"Kg");
					}
				} else {
					jq("#tooltip").remove();
					previousPoint = null;            
				}
			}
		});
		}else{
			document.getElementById("placeholder2").style.display="none";
		}
	}); 
var searchStuObj = #{schedulingHome.searchStu};
if(searchStuObj == 2){
	ftitle.style.display='block'; 
	gjbott2.style.backgroundImage='url(../asset/images/gjtop.jpg)';
}else{
	ftitle.style.display='none';
	gjbott2.style.backgroundImage='url(../asset/images/gjbottom.jpg)';
}
//]]>
</script>
</ui:define>

</ui:composition>

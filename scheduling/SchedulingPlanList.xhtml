<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"	
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a4j="http://richfaces.org/a4j" 
    template="/layout/order_template.xhtml">

<ui:define name="body">
	<style>
	  .ts_div2{width:310px; height: 125px; border: 1px solid #81C5E9; margin: 0px auto; padding: 0 15px 15px;  background: url(#{request.contextPath}/asset/images/tck_bg_14.jpg) #ffffff repeat-x scroll center top;}
	  .dr-mpnl-shadow{background:none;}
	  .dr-mpnl-pnl{background:none; border:none;}
	  .dr-mpnl-pnl-b{padding:0;}
	  .dr-mpnl-shadow{top:0; left:0;}
	  .rich-picklist-source-items{margin:0;}
	  .ui-selectmenu{*float:left;}
	</style>
<td valign="top" width="210" style=" border-right:1px solid #e1e4eb;">
                <div class="left_c2">
                	<ul class="lt_c_ul">
                	    <li><a href="#{request.contextPath}/map/EnterpriseList.seam" ><img class="tbimg" src="#{request.contextPath}/asset/images/enterpriseInfoMation_03.png"/>&#160;基地信息</a></li>
                		<li>
                        	<a href="#{request.contextPath}/map/PartitionList.seam"><img class="tbimg" src="#{request.contextPath}/asset/images/dikuai.png"/>&#160;地块信息</a>
                        </li>
                		<li><a href="#{request.contextPath}/map/FarmerInfoManageList.seam" ><img class="tbimg"  src="#{request.contextPath}/asset/images/renyuan.png"/>&#160;人员管理</a></li>
                		<li><a href="#{request.contextPath}/map/InstrumentInfoList.seam"><img class="tbimg"  src="#{request.contextPath}/asset/images/jixie.png"/>&#160;农机管理</a></li>
                    </ul>
                	<ul class="lt_c_ul" style="margin-top:0px; padding-top:15px; border-top:1px solid #e8e8e8;">
                    	<li><s:link propagation="none"  view="/scheduling/SchedulingPlanList.xhtml" styleClass="fon_07" ><strong><img src="#{request.contextPath}/asset/images/paichan.png" width="10" height="10" />&#160;排产计划</strong></s:link></li>
                    	<li><s:link propagation="none"  view="/contract/ContractList.xhtml"><img src="#{request.contextPath}/asset/images/hetong.png" width="12" height="12" />&#160;合同管理</s:link></li>
                    	<li><s:link propagation="none"  view="/contract/MemberInfoListOne.xhtml"><img src="#{request.contextPath}/asset/images/biao_03.png" width="12" height="12" />&#160;客户管理</s:link></li>
                    </ul>
                	<div class="clear"></div>
                	
                </div>
    </td>
<td valign="top">
<rich:modalPanel id="products" autosized="true" height="140" width="340" headerClass="modalHeader" >
                    	<div class="ts_div2" id="div2">
        		<div class="tck_ti"><a href="#">
        		<h:outputLink value="#"  onclick="#{rich:component('products')}.hide(); return false;">
                    <img src="#{request.contextPath}/asset/images/close_17.jpg" width="20" height="20"/>
                </h:outputLink>
        		</a></div>
        	 
				<table style="width:100%; margin-top:25px; table-layout:fixed; margin-left:15px;">
                    <tr>
                    	<td width="46" align="left"><img src="#{request.contextPath}/asset/images/tstc.jpg" width="46" height="46" /></td>
                        <td align="left" style="font-family:'宋体'; color:#000000; font-size:12px; padding-left:15px;">
                        	<span id="spanValue"></span>
                        </td>
                    </tr>
                    <tr>
                    	<td colspan="2" align="center" valign="bottom">
		                <s:button style="width:65px;height:28px" image="#{request.contextPath}/asset/images/safe.jpg" onclick="return checkSubmitTwo() "/>
		                	&#160;&#160;&#160;<h:outputLink value="#"
                onclick="#{rich:component('products')}.hide(); return false;"><img class="er_buttton" src="#{request.contextPath}/asset/images/button_17.jpg" width="65" height="28" />
                </h:outputLink>
                        </td>
                    </tr>
                </table>
                </div>
        </rich:modalPanel>
        <h:form id="search">
	<div class="right_c">
		<div class="r_title">
			<div class="r_t_l"><font size="3">农事排产</font>
            &#160;&gt;&#160;&#160;<font size="2">排产计划</font></div>
			
		</div>
		<div style="padding-top:30px; overflow:hidden;">
			<div class="z_r_ser" style="margin-bottom:0px;" >
                 <table cellspacing="0" cellpadding="0" width="471" style="margin:0 auto;">
                 
                    	<tr>
                    		<td style="font-size:14px;">查询条件：</td>
                            <td>
                            <h:inputText id="name" class="z_r_ser_i"	value="#{schedulingPlanList.schedulingPlan.title}" name="name"/>
                            </td>
                            <td>
                             <h:commandButton id="search" action="/scheduling/SchedulingPlanList.xhtml"  styleClass="search_btn_search"/>
                            </td>
                       </tr>
                  </table>
           </div>
           <!--添加按钮开始-->
                    <div class="tjan_12">
                    	<a class="pr_aimg1" style="float:right; margin-left:5px;" href="#{request.contextPath}/map/APS.seam" ><strong style="cursor: pointer;">开始排产</strong></a>
                     	<s:link view="/scheduling/SchedulingPlanEdit.xhtml" propagation="none" style="float:right;">
                    	<f:param name="schedulingPlanId" />
                    	<img src="#{request.contextPath}/asset/images/tj_03.jpg" width="44" height="31" /></s:link>
                    </div>
           <!--添加按钮结束-->
           <h:panelGroup id="reFreshId">
           <table cellpadding="0" cellspacing="0" class="khtable_01" width="100%" style="*background:#ddd;">
               <tr width="100%">
               	<td class="pcjh_t">标题</td>
                   <td class="pcjh_t">排产范围</td>
                   <td class="pcjh_t">创建人</td>
                   <td class="pcjh_t">创建时间</td>
                   <td class="pcjh_t">状态</td>
                   <td class="pcjh_t">操作</td>
             </tr>
             <a4j:repeat id="spListParam" value="#{schedulingPlanList.resultList}" rendered="#{not empty schedulingPlanList.resultList}" var="_schedulingPlan" rowKeyVar="_index">
             	<tr width="100%">
                   <td class="pcjh_td">
						<h:outputText value="#{_schedulingPlan.title}"/>
                   </td>
                   <td class="pcjh_td">
                   		<h:outputText value="#{_schedulingPlan.beginTime}">
						     <s:convertDateTime type="both" dateStyle="short" pattern="yyyy-MM-dd" />
				        </h:outputText>--
                 		<h:outputText value="#{_schedulingPlan.endTime}">
						     <s:convertDateTime type="both" dateStyle="short" pattern="yyyy-MM-dd" />
				        </h:outputText>
                   </td>
                   <td class="pcjh_td">#{sessionTake.nickname}</td>
                   <td class="pcjh_td">
                   		<h:outputText value="#{_schedulingPlan.insertTime}">
								<s:convertDateTime type="both" dateStyle="short" pattern="yyyy-MM-dd" />
						</h:outputText>
                   </td>
                   <td class="pcjh_td"><h:outputText value="#{_schedulingPlan.selectedStateTinyint? '已选中':'未选中'}"/></td>
                   <td class="pcjh_td">
	                    <s:link propagation="none"  view="/#{empty from ? 'scheduling/SchedulingPlan' : from}.xhtml" styleClass="list_view" title="查看"  id="userViewId">
						   <f:param name="schedulingPlanId" value="#{_schedulingPlan.id}" />
						</s:link>&#160;&#160;
	                    <s:link propagation="none"  view="/scheduling/SchedulingPlanEdit.xhtml"    styleClass="list_edit" id="userEdit" title="编辑" rendered="#{empty from}">
	                        <f:param name="schedulingPlanId" value="#{_schedulingPlan.id}" />
						</s:link>&#160;&#160;
						<s:link propagation="none"  view="/scheduling/SchedulingPlanEdit.xhtml"    styleClass="list_delete" action="#{schedulingPlanHome.remove}" title="删除" onclick="return confirm('确定删除吗？');" id="userDelete" rendered="#{empty from}">
	                       <f:param name="schedulingPlanId" value="#{_schedulingPlan.id}" />
	                    </s:link>&#160;&#160;
	                    <s:link propagation="none"  view="/scheduling/ChooseContract.xhtml"    styleClass="list_ack" id="chooseC" title="选择合同" rendered="#{empty from}">
	                       <f:param name="schedulingPlanId" value="#{_schedulingPlan.id}" />
						</s:link>&#160;&#160;
						<s:link propagation="none"  view="/scheduling/SchedulingPlanEdit.xhtml"    styleClass="list_het" id="qiYong" title="启用" onclick="return checkSubmit(#{_schedulingPlan.id},#{_schedulingPlan.selectedStateTinyint})">
						</s:link>&#160;&#160;
						<s:link propagation="none"  view="/scheduling/SchedulingRecordEdit.xhtml" styleClass="list_yug" id="yuGu" title="预估" rendered="#{empty from}">
	                       <f:param name="spId" value="#{_schedulingPlan.id}" />
						</s:link>
						
                    </td>
               </tr>
             </a4j:repeat>
        </table>   
        </h:panelGroup>
		</div>               
		<div class="clear"></div>
	</div>
	</h:form>
	<a4j:form>
	        <a4j:jsFunction name="enables" reRender="reFreshId" action="#{schedulingPlanHome.enable()}" eventsQueue="default">
	        <a4j:actionparam name="changeId" assignTo="#{schedulingPlanHome.changeId}"/>
	        </a4j:jsFunction>
   </a4j:form>
	<script type="text/javascript">
	var changeId = 0;
function checkSubmit(index,booleanParam){
	   changeId = index;
	   if(booleanParam){
		   document.getElementById("spanValue").innerHTML = "此计划已经选定为当前排产计划。";
		   #{rich:component('products')}.show();
		   return false;
	   }else{
		   document.getElementById("spanValue").innerHTML = "确定将此排产计划作为当前排产计划吗？";
		   #{rich:component('products')}.show();
		   return false;
	   }
	   return true;
}
 checkSubmitTwo = function(){
	 #{rich:component('products')}.hide();
	enables(changeId);
	return true;
}
	jquery(".rich-calendar-input").addClass("r_c_text");
</script>
</td>
	
</ui:define>
</ui:composition>

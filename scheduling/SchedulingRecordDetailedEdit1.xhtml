<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a="http://richfaces.org/a4j"
    template="/layout/template.xhtml">

<ui:define name="body">
<script type="text/javascript">
function BtHide(id){var Div = document.getElementById(id);if(Div){Div.style.display="none"}}
function BtShow(id){var Div = document.getElementById(id);if(Div){Div.style.display="block"}}

function BtPopload(showId){//蒙版生成div+iframe
	var h = Math.max(document.documentElement.scrollHeight,document.documentElement.clientHeight) + 'px';
	var w = document.documentElement.scrollWidth + 'px';
	var popCss = "background:#000;opacity:0.3;filter:alpha(opacity=30);position:absolute;left:0;top:0;overflow:hidden;"
	var exsit = document.getElementById("popBox");
	if (!exsit) {
		pop_Box = document.createElement("div");pop_Box.id = "popBox";
		document.getElementsByTagName("body")[0].appendChild(pop_Box);
		pop_Box.style.cssText = popCss;pop_Box.style.zIndex = "10";
		pop_Box.style.height = h;pop_Box.style.width = w;
		
		pop_Iframe = document.createElement("iframe");pop_Iframe.id = "popIframe";
		document.getElementsByTagName("body")[0].appendChild(pop_Iframe);	
		pop_Iframe.style.cssText = popCss;pop_Iframe.style.zIndex = "9";
		pop_Iframe.style.height = h;pop_Iframe.style.width = (parseInt(w)-5)+"px";
	}
	BtShow("popIframe");BtShow("popBox");BtShow(showId);
	pop_Win = document.getElementById(showId);
	pop_Win.style.position = "absolute";
	pop_Win.style.zIndex = "11";
	pop_Win.style.top = document.documentElement.scrollTop+document.documentElement.clientHeight/2-pop_Win.offsetHeight/2+ 'px';
	pop_Win.style.left = (document.documentElement.clientWidth/2-pop_Win.offsetWidth/2) + 'px';
	var onLoadWidth = document.body.clientWidth;
	jquery('#scroll1').css("width",(onLoadWidth-577)+ "px"); 
	jquery('.scroll1').css("width",(onLoadWidth-417)+ "px"); 
	jquery('.scr02').css("width",(onLoadWidth-400)+ "px"); 
	jquery('._tccen').css("width",(onLoadWidth-195)+ "px"); 	
}
function BtPopShow(Bid,Did) { 
	var UploadBtn = document.getElementById(Bid);
	if (UploadBtn){UploadBtn.onclick = function() {BtPopload(Did);return false;}}
}
function BtPopHide(Bid,Did) { 
	var UploadBtn = document.getElementById(Bid);
	if (UploadBtn){UploadBtn.onclick = function() {BtHide(Did);BtHide("popBox");BtHide("popIframe");return false;}}	
}
</script>

<!--弹出框结束-->

<style>
.zp_lsm .even{ background:#fbfcfe;}
</style>
<!--右边开始-->
            <td valign="top" width="100%">
                <div class="right_c">
                	<div class="r_title">
                    	<div class="r_t_l"><font size="3">农事排产&#160;&gt;</font>&#160;&#160;<font size="3">订单</font></div>
                    </div>

                <div style="padding-top:15px; overflow:hidden;">
                		<!--标题开始-->
                                <table width="100%" cellpadding="0" cellspacing="0" style="margin-bottom:5px; table-layout:fixed;">
                                	<tr>
                                    	<td align="left" width="16" height="30" valign="middle"><img src="../asset/images/dahg_03.jpg" width="16" height="15" /></td>
                                    	<td align="left" class="zname" height="30">
                                        	<div class="erbot2">
											    <div class="kss" id="_dgg">大黄瓜</div>
                                            	<div class="kss">排产详细</div>

                                            </div>
                                         </td>
                                        <td width="166" align="right" height="30">
                                            <div class="est">
                                                <ul style="float:right;">
                                                    <li style=" padding:0 5px; "><a class="zjjh08" href="javascript:void(0);" onclick="loginInfo();"><strong>种植计划</strong></a></li>
                                                     <li style=" padding:0 5px; background:url(../asset/images/lne_09.jpg) right center no-repeat;"><a class="zjjh08" href="javascript:void(0);" onclick="loginInfo();"><strong>排产详情</strong></a></li>
                                                </ul>
                                            </div>    
                                        </td>
                                        <td width="52" align="right" height="30"><a href="#" id="open" ><img src="../asset/images/tj_03.jpg" width="44" height="30" /></a></td>
                                    </tr>
                                </table>
                      <!--标题框结束-->
                      
                      
                  <div class="erbot">    
                     <div class="_ss"> 
                      <!--弹出框开始-->
						<div>
						 <h:form id="plant">
                        	<table class="pop" id="pop" width="468" height="200" cellpadding="0" cellspacing="0">
                            	<tr>
                                	<td><img src="../asset/images/left_top.png" width="9" height="8" /></td>
                                    <td width="100%" height="8" style="background:url(../asset/images/top_cen.png) repeat-x;"></td>
                                    <td><img src="../asset/images/right_top.png" width="9" height="8" /></td>
                                </tr>
                            	<tr>
                                	<td width="9" height="100%" style="background:url(../asset/images/left_cen.png) repeat-y;"></td>
                                    <td class="pop_td" valign="top">
                                    	<table width="100%" cellpadding="0" cellspacing="0">
                                        	<tr>
                                            	<td align="left" width="19" height="17" class="tcdbor"><img src="../asset/images/tck_12.jpg" width="19" height="17" /></td>
                                                <td align="left" class="tcdbor tcdtext">添加排产计划</td>
                                                <td align="right" class="tcdbor"><a href="#" id="close"><img src="../asset/images/close_12.jpg" width="17" height="17" /></a></td>
                                        	</tr>
                                          </table>  
                                          <table cellpadding="0" cellspacing="0" style=" margin:15px auto 0 auto;"> 
                                            <tr>
                                                <td class="tck_text">品种：</td>
                                                <td align="left" class="tckinput" style="width :250px;">
                                                    <h:selectOneMenu id="breedId"  styleClass="breedId" value="#{schedulingRecordDetailedHome.breedId}">
														<s:selectItems value="#{schedulingRecordDetailedHome.breedList}" var="breed" label="#{breed.name}" itemValue="#{breed.breedId}"/>
													</h:selectOneMenu>
                                                 </td>
                                            </tr>
                                            <tr>
                                                <td class="tck_text">类型：</td>
                                                <td align="left" class="tckinput" style="width :250px;">
                                                    <h:selectOneMenu immediate="true" id="petId"  styleClass="petId" value="#{schedulingRecordDetailedHome.plantEnvTypeId}"  valueChangeListener="#{schedulingRecordDetailedHome.getSchedulingModelListInfo}">
														<s:selectItems value="#{schedulingRecordDetailedHome.petList}" var="pet" label="#{pet.name}" itemValue="#{pet.id}"/>
														<a:support event="onchange" reRender="smiInfoId" eventsQueue="default" oncomplete="www();"/>
													</h:selectOneMenu>
                                                 </td>
                                            </tr>
                                            
                                            <tr>
                                                <td class="tck_text">模型：</td>
                                                <td align="left" class="tckinput" style="width :250px;">
                                                    <h:selectOneMenu id="smiInfoId"  styleClass="smiId" value="#{schedulingRecordDetailedHome.schedulingModelInfoId}">
														<s:selectItems value="#{schedulingRecordDetailedHome.smiList}" var="smi" label="#{smi.name}" itemValue="#{smi.id}" noSelectionLabel="请选择"/>
												    </h:selectOneMenu>
                                                 </td>
                                            </tr>
                                            <tr>
                                            	<td class="tck_text"></td>
                                            	<td class="tckint"><a href="javascript:void(0);" id="insert" onclick="insertSrd();"><img src="../asset/images/tckbut_22.jpg" width="60" height="28" /></a>&#160;&#160;<a href="javascript:void(0);" id="closetow"><img src="../asset/images/tckbut_24.jpg" width="60" height="28" /></a></td>
                                            </tr>
                                            
                                            
                                        </table>
                                        
                                    </td>
                                    <td width="9" height="100%" style="background:url(../asset/images/right_cen.png) repeat-y;"></td>
                                </tr>
                            	<tr>
                                	<td width="9" height="8"><img src="../asset/images/left_bot.png" width="9" height="8" /></td>
                                    <td width="100%" height="8" style="background:url(../asset/images/bot_cen.png) repeat-x;"></td>
                                    <td width="9" height="8"><img src="../asset/images/right_bot.png" width="9" height="8" /></td>
                                </tr>
                            </table>
                        </h:form>
						<script type="text/javascript">BtPopShow("open","pop");BtPopHide("close","pop");BtPopHide("closetow","pop")</script>
						
                      <!--弹出框结束-->
                        <div style="width:370px; float:left; border-left:1px solid #CADDEC; border-right:1px solid #CADDEC;" id="divleft">
                        <table cellpadding="0" cellspacing="0" class="zptable_01" width="370">
                                <tr>
                                    <td class="zpth_td zplan" width="90">品种</td>
                                	<td class="zpth_td zplan" width="70">类型</td>
                                    <td class="zpth_td zplan" width="70">定值日期</td>
                                    <td class="zpth_td zplan" width="80">总产量</td>
                                    <td class="zpth_td zplan" width="60">亩数</td>
                                </tr>
                         </table>       
                           <h:panelGrid id="dataInfoone" cellpadding="0" cellspacing="0" class="zptable_01" width="370" >
								<a:repeat value="#{schedulingRecordDetailedHome.srdList}" var="_srdInfo" rowKeyVar="_index">
                                <tr>
                                    <td class="zp_tdleft kh_td_font kh_leftbg" width="90">
                                            <div class="pc_name">
                                                <div class="pc_p">
                                                   <table width="190" height="140" style=" table-layout:fixed;" cellpadding="0" cellspacing="0">
                                                   		<tr>
                                                        	<td width="7" valign="middle"><img src="../asset/images/san.png" width="7" height="13" /></td>
                                                            <td valign="top" style="background:url(../asset/images/tab_bg.png) repeat;">
                                                            	<table width="90%" style="margin:10px auto;" cellpadding="0" cellspacing="0">
                                                            		<tr>
                                                                    	<td width="50%" class="ap_none">品种</td>
                                                                        <td width="50%" class="ap_none2">#{_srdInfo.breedId.name}</td>
                                                                    </tr>
                                                            		<tr>
                                                                    	<td width="50%" class="ap_none">类型</td>
                                                                        <td width="50%" class="ap_none2">#{_srdInfo.plantEnvTypeId.name}</td>
                                                                    </tr>
                                                            		<tr>
                                                                    	<td width="50%" class="ap_none">育苗期</td>
                                                                        <td width="50%" class="ap_none2">
                                                                        	#{_srdInfo.schedulingModelInfoId.nurseryTime}月份
                                                                        	<h:outputText  rendered="#{_srdInfo.schedulingModelInfoId.nurseryTenDays eq 1}" value="上旬"/>
													       					<h:outputText  rendered="#{_srdInfo.schedulingModelInfoId.nurseryTenDays eq 2}" value="中旬"/>
													       					<h:outputText  rendered="#{_srdInfo.schedulingModelInfoId.nurseryTenDays eq 3}" value="下旬"/>
                                                                        </td>
                                                                    </tr>
                                                            		<tr>
                                                                    	<td width="50%" class="ap_none">定植日期</td>
                                                                        <td width="50%" class="ap_none2"> 
                                                                        	#{_srdInfo.schedulingModelInfoId.valueTime}月份
											                    			<h:outputText  rendered="#{_srdInfo.schedulingModelInfoId.valueTenDays eq 1}" value="上旬"/>
													       					<h:outputText  rendered="#{_srdInfo.schedulingModelInfoId.valueTenDays eq 2}" value="中旬"/>
													       					<h:outputText  rendered="#{_srdInfo.schedulingModelInfoId.valueTenDays eq 3}" value="下旬"/>
                                                                        </td>
                                                                    </tr>
                                                            		<tr>
                                                                    	<td width="50%" class="ap_none">亩产</td>
                                                                        <td width="50%" class="ap_none2">#{_srdInfo.area}</td>
                                                                    </tr>
                                                            	</table>
                                                            </td>
                                                        </tr>
                                                   </table>
                                                </div>
												#{_srdInfo.breedId.name}
                                            </div>
											
                                    </td>
                                    <td class="zp_tdleft kh_td_font kh_leftbg" width="70">#{_srdInfo.plantEnvTypeId.name}</td>
                                    <td class="zp_tdleft kh_td_font kh_leftbg" width="70"> 
                                    	#{_srdInfo.schedulingModelInfoId.valueTime}月份
		                    			<h:outputText  rendered="#{_srdInfo.schedulingModelInfoId.valueTenDays eq 1}" value="上旬"/>
				       					<h:outputText  rendered="#{_srdInfo.schedulingModelInfoId.valueTenDays eq 2}" value="中旬"/>
				       					<h:outputText  rendered="#{_srdInfo.schedulingModelInfoId.valueTenDays eq 3}" value="下旬"/>
                                    </td>
                                    <td class="zp_tdleft kh_td_font kh_leftbg #{_index}production" width="80" >0</td>
                                    <td class="zp_tdleft kh_td_font kh_leftbg" width="60"><input class="zp_input_out" name="areasum" type="text" value="#{_srdInfo.area}" onfocus="this.className='input_on';this.onmouseout='';this.value='';" onblur="this.className='zp_input_off';this.onmouseout=function(){this.className='zp_input_out'};updatesrd(#{_index},this.value);" onmousemove="this.className='input_move'" onmouseout="this.className='zp_input_out'" onkeyup="clearNoNum(this)"/>
                                    </td>
                                </tr>
								</a:repeat> 
                               
                                <tr>   
                                    <td class="xjft ap_font ap_bg">小计</td>
                                    <td class=" ap_font2 ap_bg"></td>
                                    <td class=" ap_font2 ap_bg"></td>
                                    <td class=" ap_font2 ap_bg allProduction">0</td>
                                    <td class=" ap_font2 ap_bg allMu">0</td>
                                </tr>  
                                <tr>   
                                    <td class="xjft ap_font ap_bg1">订单</td>
                                    <td class=" ap_font2 ap_bg1"></td>
                                    <td class=" ap_font2 ap_bg1"></td>
                                    <td class=" ap_font2 ap_bg1"></td>
                                    <td class=" ap_font2 ap_bg1"></td>
                                </tr>  
                                <tr>   
                                    <td class="xjft ap_font ap_bg2">差异</td>
                                    <td class=" ap_font2 ap_bg2"></td>
                                    <td class=" ap_font2 ap_bg2"></td>
                                    <td class=" ap_font2 ap_bg2"></td>
                                    <td class=" ap_font2 ap_bg2"></td>
                                </tr>  
                             </h:panelGrid>
                        </div>
                       <!----><div id="scroll1" style="border-bottom:0;">  
                             <h:panelGrid id="dataInfotow" cellpadding="0" cellspacing="0" class="zp_lsm">
                                    <tr>
                                       <a:repeat value="#{schedulingRecordDetailedHome.dateTime}" var="_dateInfo" rowKeyVar="_index">
										<td class="zp_bigtd">
                                            <table cellpadding="0" cellspacing="0" class="zptable">
                                                <tr>
                                                    <td class="zpth_td2 zplan zplan" height="40"> 
                                                    	<h:outputText value="#{_dateInfo.substring(2, _dateInfo.length())}"></h:outputText>月
                                                    </td>
                                                </tr>
												<a:repeat value="#{schedulingRecordDetailedHome.srdList}" var="_srdInfo" rowKeyVar="_srdindex">
                                                <tr class="#{_srdindex %2 ==0?'even':''}">
                                                    <td class="zp_platd kh_td_font dingd #{_index}dingd #{_index}dingd#{_srdindex} yield#{_srdindex} #{_index}yield#{_srdindex}">
                                                    	#{schedulingRecordDetailedHome.getMonthSum(_srdInfo.id,schedulingRecordDetailedHome.srdByDateTime.get(_dateInfo))}
                                                    </td>
                                                    <input type="hidden" class="#{_index}areaInfo#{_srdindex}" value="#{schedulingRecordDetailedHome.getMonthSum(_srdInfo.id,schedulingRecordDetailedHome.srdByDateTime.get(_dateInfo))}"/>
												</tr>
												</a:repeat>
                                               
                                                <tr>
                                                    <td class="ap_font2 ap_bg #{_index}subtotal">0</td>
                                                </tr> 
                                                <tr>   
                                                    <td class="ap_font2 ap_bg1 #{_index}orders">#{schedulingRecordDetailedHome.srMap.get(_dateInfo)}</td>
                                                </tr>
                                                <tr>   
                                                    <td class="ap_font2 ap_bg2 #{_index}difference">0</td>
                                                </tr>  
                                            </table>
                                          </td>
										  </a:repeat>
                                    </tr>
                                 </h:panelGrid>   
						</div> 
                        
                        <div style="width:60px;float:right;border-right:1px solid #CADDEC;">
                        	 <h:panelGrid id="dataInfothree" width="60" cellpadding="0" cellspacing="0" class="zpta3">
                            	<tr>
                            		<td class="zpth_td2 zplan zplan">操作</td>
                            	</tr>
                            	<a:repeat value="#{schedulingRecordDetailedHome.srdList}" var="_srdInfo" >
                            	<tr>
                            		<td class="zpca_td kh_td_font dingd"><a href="#" onclick="deletesrd(#{_srdInfo.id})"><img src="../asset/images/02_62.png" width="16" height="15" /></a></td>
                            	</tr>
                            	</a:repeat>
                            	<tr>
                            		<td class="ap_font2 ap_bg">&#160;</td>
                            	</tr>
                                
                            	<tr>
                            		<td class="ap_font2 ap_bg1">&#160;</td>
                            	</tr>
                                
                            	<tr>
                            		<td class="ap_font2 ap_bg2">&#160;</td>
                            	</tr>
                                
                                
                            </h:panelGrid>
                        
                        	<div class="clear"></div>
                        </div>
                        <div class="clear"></div>
                        </div>
					<div style=" height:33px; text-align:right; margin:15px 0;"> 
						<h:form id="srdFrom" style="wid" >
					    	<a:commandLink id="srdCount" action="#{schedulingRecordDetailedHome.saveSrd}"  >
								<img src="../asset/images/button_43.jpg" width="90" height="33" />
							</a:commandLink>
				    	</h:form>
					</div>
                	<div class="clear"></div>
                </div> <!--_ss-->    
				 <s:div id="srdTowId" styleClass="_ss">
                	<div >
                        <!--下拉table开始-->
                         <a:repeat value="#{schedulingRecordDetailedHome.petBySrdList}" var="_petInfo" rowKeyVar="_petindex">
                              <div class="pc__1">
                                <div style="width:100%;">
                                    <div class="hjtj">
                                        <table cellpadding="0" cellspacing="0" class="paic_table">
                                            <tr>
                                                <td class="paicth1 paic_border" height="79" width="100" >环境条件</td>
                                                <td class="paicth1 paic_border" height="79" width="73">比对项</td>
                                            </tr>
                                            <tr>
                                                <td rowspan="3" class="paic_th paic_border" >#{_petInfo.name}</td>
                                                <td class="paic_td paic_border">预估面积</td>
                                            </tr>
                                            <tr>
                                                <td class="paic_td paic_border">可用面积</td>
                                            </tr>
                                            <tr>
                                                <td class="paic_td paic_border">差&#160;&#160;&#160;&#160;&#160;&#160;异</td>
                                            </tr>
                                            
                                        </table>
                                    </div>
                                    <div class="scroll1" >  
                                            <table cellpadding="0" cellspacing="0" class="paic_cen pc_bor_t">
                                                <tr>
                                                    
                                                    <td class="paicmoon pc_bor_b" colspan="#{schedulingRecordDetailedHome.dateTime.size}">月份及面积（亩）</td>
                                                    
                                                </tr>
                                                <tr>
                                                <a:repeat value="#{schedulingRecordDetailedHome.dateTime}" var="_dateInfo" rowKeyVar="_index">
                                                    <td class="paicth2 pc_bor_b"><h:outputText value="#{_dateInfo.substring(2, _dateInfo.length())}"></h:outputText></td>
                                                </a:repeat>
                                                </tr>
                                                <tr>
                                                <a:repeat value="#{schedulingRecordDetailedHome.dateTime}" var="_dateInfo" rowKeyVar="_index">
                                                    <td class="paic_03 pc_bor_b">#{schedulingRecordDetailedHome.petArea.get(_petInfo.id).get(_dateInfo)}</td>
                                                </a:repeat>
                                                </tr>
                                                <tr>
                                                 <a:repeat value="#{schedulingRecordDetailedHome.dateTime}" var="_dateInfo" rowKeyVar="_index">
                                                    <td class="paic_03 pc_bor_b">#{_petInfo.tunnelArea}</td>
                                                 </a:repeat>
                                                </tr>
                                                <tr>
                                                <a:repeat value="#{schedulingRecordDetailedHome.dateTime}" var="_dateInfo" rowKeyVar="_index">
                                                    <td class="paic_03 pc_bor_b">0</td>
                                                </a:repeat>
                                                </tr>
                                            </table>
                                   </div> 
                                   
                                    <div class="paic_cz">
                                        <table cellpadding="0" cellspacing="0" class="paic_table">
                                            <tr>
                                                <td class="paicth1 paic_border" height="79" width="100" >操作</td>
                                               
                                            </tr>
                                            <tr>
                                                <td class="paic_th paic_border" height="119" ><span class="mar" onclick="marclick(#{_petindex});">详情<br /><img style="margin-top:5px;" src="../asset/images/pcxq_03.jpg" width="9" height="5" /></span></td>
                                               
                                            </tr>
                                           
                                        </table>
                                    </div>
                                <div class="clear"></div>   
                            </div>	
                          <div class="sslistted" id="sslistted#{_petindex}">
                              <div class="_tccen">      
                                    <div style="width:173px; float:left; border-bottom:1px solid #ddd; border-right:1px solid #ddd;">
                                        <table cellpadding="0" cellspacing="0" class="khtable_01" width="173" height="80" >
                                                <tr>
                                                    <td rowspan="2" class="tc_pc00" width="70" style="border-bottom:none;">序号</td>
                                                    <td rowspan="2" class="tc_pc00" width="100" style="border-bottom:none;">名称</td>
                                                </tr>
                                         </table>       
                                            <table cellpadding="0" cellspacing="0" class="khtable_01" width="173" style="border-top:1px solid #ddd;">
                                            	<a:repeat value="#{schedulingRecordDetailedHome.srdListByPet.get(_petInfo.id)}" var="_srdbInfo" rowKeyVar="_srdbindex">
	                                                <tr>
	                                                    <td class="tc_pc03" width="70">#{_srdbindex+1}</td>
	                                                    <td class="tc_pc03" width="100">#{_srdbInfo.breedId.name}</td>
	                                                </tr>
                                                </a:repeat>
                                             </table>
                                        </div>
                                        <div class="scr02"> 
                                              <table cellpadding="0" cellspacing="0" class="tc_pctable">
                                                    <tr>
                                                        <td class="tc_pcccd">
                                                            <table cellpadding="0" cellspacing="0" class="tc_pctable">
                                                                <tr>
                                                                    <td class="tc_pc01" height="40">合计</td>
                                                                </tr>
                                                                <tr>
                                                                    <td class="tc_pc01">总产量</td>
                                                                </tr>
                                                                <a:repeat value="#{schedulingRecordDetailedHome.srdListByPet.get(_petInfo.id)}" var="_srdbInfo" rowKeyVar="_srdbindex">
                                                                <tr>
                                                                    <td class="tc_pc05 #{_petindex}srdball#{_srdbindex}">0</td>
                                                                </tr>
                                                                </a:repeat>
                                                            </table>
                                                      </td>
                                                       <a:repeat value="#{schedulingRecordDetailedHome.dateTime}" var="_dateInfo" rowKeyVar="_index">
                                                        <td class="tc_pcccd">
                                                            <table cellpadding="0" cellspacing="0" class="tc_pctable">
                                                                <tr>
                                                                    <td class="tc_pc07" height="40"><h:outputText value="#{_dateInfo.substring(2, _dateInfo.length())}"></h:outputText>月</td>
                                                                </tr>
                                                                <tr>
                                                                    <td class="tc_pc07">产量</td>
                                                                </tr>
																<a:repeat value="#{schedulingRecordDetailedHome.srdListByPet.get(_petInfo.id)}" var="_srdbInfo" rowKeyVar="_srdbindex">
                                                                <tr>
                                                                    <td class="tc_pc04 #{_petindex}srdbinfo #{_petindex}srdbinfo#{_srdbindex}">#{schedulingRecordDetailedHome.getMonthSum(_srdbInfo.id,schedulingRecordDetailedHome.srdByDateTime.get(_dateInfo))}</td>
                                                                </tr>
                                                                </a:repeat>
                                                            </table>
                                                      </td>
                                                     </a:repeat>
                                                    </tr>
                                                 </table>   
                    
                                        </div>
                                     <div class="clear"></div>                       
                                </div><!--_tccen结束-->
                               <div class="clear"></div>    
                           </div>        
                                   
                       <div class="clear"></div>   
                  </div>
                 </a:repeat>	             
               <div class="clear"></div>
           </div> 
           
          </s:div><!--_ss-->   
          </div><!--erbot-->

        </div><!--padding-->      
              
              
              
              
              
            <div class="clear"></div>
          </div><!--right_c结束-->
      </td>    
    <!--右边结束-->
   <a:form>
  		<a:queue requestDelay="10" ignoreDupResponses="true"/>
  		<a:jsFunction name="insertSrdList" action="#{schedulingRecordDetailedHome.insertSrdList}" reRender="dataInfoone,dataInfotow,dataInfothree,srdTowId" oncomplete="hidentinsert();">
  			<a:actionparam name="breedId" assignTo="#{schedulingRecordDetailedHome.breedId}"/>
			<a:actionparam name="petId" assignTo="#{schedulingRecordDetailedHome.plantEnvTypeId}"/>
			<a:actionparam name="smiId" assignTo="#{schedulingRecordDetailedHome.schedulingModelInfoId}"/>
		</a:jsFunction>
		<a:jsFunction name="deleteSrdList" action="#{schedulingRecordDetailedHome.deleteSrdList}" reRender="dataInfoone,dataInfotow,dataInfothree,srdTowId" oncomplete="hidentinsert();">
  			<a:actionparam name="srdId" assignTo="#{schedulingRecordDetailedHome.srdId}"/>
		</a:jsFunction>
	</a:form>
<!--选择表格js开始-->
<script type="text/javascript" src="#{request.contextPath}/asset/js/tab.js"></script>
<script  type="text/javascript">
//<![CDATA[
//添加
function insertSrd(){
	var breedId = jquery(".breedId").val();
	var petId = jquery(".petId").val();
	var smiId = jquery(".smiId").val();
	if(breedId == null){
		alert("请选择品种");
		return false;
	}
	if(petId == null){
		alert("请选择温室");
		return false;
	}
	if(smiId == null){
		alert("请选择模型");
		return false;
	}
	insertSrdList(breedId,petId,smiId);
}

//删除
function deletesrd(index){
	if (confirm('确定删除吗？')) {
		deleteSrdList(index);
	}
}
//修改数据加载
function hidentinsert(){
	 document.getElementById("close").click();
	 jquery(".est").jTab({
       menutag: ".est li",
       boxtag: ".erbot > ._ss",
       cur: 0
	 });
	 www();
	 //dateinfo();
}
//下拉框样式
www = function(){
    jquery(".ui-selectmenu").remove();
	jquery('select').selectmenu({style:'dropdown'})
	jquery(".rich-calendar-input").addClass("r_c_text_date");
	jquery(".rich-calendar-input").removeClass("rich-calendar-input");
}
//只能输入数字
function clearNoNum(obj){   
	obj.value = obj.value.replace(/[^\d.]/g,"");  //清除“数字”和“.”以外的字符  
	obj.value = obj.value.replace(/^\./g,"");  //验证第一个字符是数字而不是. 
	obj.value = obj.value.replace(/\.{2,}/g,"."); //只保留第一个. 清除多余的.   
	obj.value = obj.value.replace(".","$#$").replace(/\./g,"").replace("$#$",".");
}	
var onLoadWidth
jquery(document).ready(function(){  
	loginInfo();
	//dateinfo();
	shInfo();
});

//鼠标移出移入事件
function shInfo(){
	 jquery('.pc_name').hover(function(){
	  jquery(this).find('.pc_p').show();
	 },function(){
	  jquery(this).find('.pc_p').hide();
	 })
}
function loginInfo(){
	onLoadWidth = document.body.clientWidth;
	jquery('#scroll1').css("width",(onLoadWidth-577)+ "px"); 
	jquery('.scroll1').css("width",(onLoadWidth-417)+ "px"); 
	jquery('.scr02').css("width",(onLoadWidth-400)+ "px"); 
	jquery('._tccen').css("width",(onLoadWidth-195)+ "px"); 
}

function marclick(index){
  	jquery("#sslistted"+index).toggle();  
  	var min_17;
 	min_17=onLoadWidth-document.body.clientWidth;
  	jquery('.scroll1').css("width",(onLoadWidth-417-min_17)+ "px"); 
	jquery('.scr02').css("width",(onLoadWidth-400-min_17)+ "px"); 
	jquery('._tccen').css("width",(onLoadWidth-195-min_17)+ "px"); 
	dateTowinfo(index);
}

jquery(window).resize(function(){
	
   var onLoadWidth = document.body.clientWidth;

	jquery('#scroll1').css("width",(onLoadWidth-577)+ "px"); 
	jquery('.scroll1').css("width",(onLoadWidth-417)+ "px");
	jquery('.scr02').css("width",(onLoadWidth-400)+ "px"); 
	jquery('._tccen').css("width",(onLoadWidth-195)+ "px");


});


function displayTag (){
	  var resize_w = (onLoadWidth-417-(onLoadWidth-document.body.clientWidth));
	  var apob=onLoadWidth-document.body.clientWidth;
	    jquery('.scroll1').css("width",(onLoadWidth-417-apob)+ "px"); 
		jquery('.scr02').css("width",(onLoadWidth-400-apob)+ "px"); 
		jquery('._tccen').css("width",(onLoadWidth-195-apob)+ "px"); 
		if(jquery("#_dgg").is(":hidden")){
			jquery("#open").hide();
		}else if(jquery("#_dgg").is(":visible")){
			jquery("#open").show();
		}	
}

jquery(".est").jTab({
	menutag: ".est li",
	boxtag: ".erbot > ._ss",
	cur: 0
});
jquery(".est").jTab({
	menutag: ".est li",
	boxtag: ".erbot2 > .kss",
	cur: 0,
	callback:"displayTag()"
});
//修改
function updatesrd(index,area){ 
	var date = new Date(); //日期对象
	
	alert(date);
	if(area == ''){
		area = 1;
	}
	var production = 0 ;//横向总产量
	jquery(".yield"+index).each(function(yieldindex,dingdval){
		jquery("."+yieldindex+"subtotal").text(0);
		jquery("."+yieldindex+"yield"+index).text(parseInt(jquery("."+yieldindex+"areaInfo"+index).val()) * area);//横向月产量
		production = production + parseInt(jquery("."+yieldindex+"yield"+index).text());//横向总产量
		jquery("input[name='areasum']").each(function(areaindex,areasum){
			var subtotal = parseInt(jquery("."+yieldindex+"yield"+areaindex).text())+parseInt(jquery("."+yieldindex+"subtotal").text());//纵向月产
			jquery("."+yieldindex+"subtotal").text(subtotal);//纵向月产量
		});	
		jquery("."+yieldindex+"difference").text(parseInt(jquery("."+yieldindex+"subtotal").text())-parseInt(jquery("."+yieldindex+"orders").text()));//差异	
	});
	jquery("."+index+"production").text(production);//横向总产量

	jquery(".allMu").text(0);//纵向总亩数
	jquery(".allProduction").text(0);//纵向总产量
	jquery("input[name='areasum']").each(function(areaindex,areasum){
		//alert(areaindex+'----'+areasum.value);
		if(areasum.value == ''){
			areasum.value = 1;
		}
		jquery(".allMu").text(parseInt(areasum.value) + parseInt(jquery(".allMu").text()));//纵向总亩数
		jquery(".allProduction").text(parseInt(jquery("."+areaindex+"production").text())+parseInt(jquery(".allProduction").text()));//纵向总产量
		
	});
	var date1 = new Date(); //日期对象
	alert(date1);
	
	//jquery(".allMu").text(0);//纵向总亩数
	//jquery(".allProduction").text(0);//纵向总产量
	//jquery(".yield"+index).each(function(yieldindex,dingdval){
		//jquery("."+yieldindex+"subtotal").text(0);//纵向月产量
		//jquery("."+yieldindex+"difference").text(0);
	//});
	
}
//预估取值
function dateinfo(){
	jquery("input[name='areasum']").each(function(areaindex,areasum){
		var sum = parseInt(areasum.value);//亩数
		if(areasum.value == ''){
			sum = 1;
			areasum.value = 1;
		}
		var production = 0 ;//横向总产量
		jquery(".yield"+areaindex).each(function(yieldindex,dingdval){
			jquery("."+yieldindex+"yield"+areaindex).text(parseInt(jquery("."+yieldindex+"areaInfo"+areaindex).val()) * sum);//横向月产量
		
		});
		//jquery(".yield"+areaindex).each(function(yieldindex,dingdval){//横向循环
		//	jquery("."+yieldindex+"yield"+areaindex).text(parseInt(jquery("."+yieldindex+"areaInfo"+areaindex).val()) * sum);//横向月产量
		//	production = production + parseInt(jquery("."+yieldindex+"yield"+areaindex).text());//横向总产量
		//	var subtotal = parseInt(jquery("."+yieldindex+"yield"+areaindex).text())+parseInt(jquery("."+yieldindex+"subtotal").text());//纵向月产
		//	jquery("."+yieldindex+"subtotal").text(subtotal);//纵向月产量
		//	jquery("."+yieldindex+"difference").text(subtotal-parseInt(jquery("."+yieldindex+"orders").text()));//差异
		//});
		//jquery("."+areaindex+"production").text(production);//横向总产量
		//jquery(".allMu").text(sum + parseInt(jquery(".allMu").text()));//纵向总亩数
		//jquery(".allProduction").text(parseInt(jquery("."+areaindex+"production").text())+parseInt(jquery(".allProduction").text()));//纵向总产量
	});
}

//详细取值
function dateTowinfo(i){
	jquery("."+i+"srdbinfo").each(function(k,srdballval){
		var srdbinfo = 0;
		jquery("."+i+"srdbinfo"+k).each(function(q,srdbinfoval){
			srdbinfo = srdbinfo + parseInt(srdbinfoval.innerHTML);
		});
		jquery("."+i+"srdball"+k).text(srdbinfo);//总产量
	});
}
//]]>
</script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/superfish.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/supersubs.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/hoverIntent.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.flot.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery-ui.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery-ui-select.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/customInput.jquery.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.dataTables.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.fancybox-1.3.4.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.filestyle.mini.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery-ui-timepicker-addon.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.treeview.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.tipsy.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.wysiwyg.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/inline.js"></script>
 </ui:define>
</ui:composition>

<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	template="/layout/template_new.xhtml">

	<ui:define name="body">
	<style>
	  .form-control{
			float:left;
		}
	 
	</style>
		<td valign="top">
		<h:form id="user" enctype="multipart/form-data">
									<!-- Modal -->
<div aria-hidden="false" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="myModal" class="modal fade in w600na" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">提示框</h4>
      </div>
      <div class="modal-body">
       <span id="spanValue">*号部分为必填项！</span>
        
        
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
        <button type="button" class="btn btn-primary" data-dismiss="modal">确认</button>
      </div>
    </div>
  </div>
</div>
				<!-- #{modelInfoTwoHome.work()} -->
                <div class="right_c">
                	<div class="r_title">
                    	<div class="r_t_l"><s:link propagation="none"  view="#{sessionTake.urlTemp}" style="text-decoration:none;color:black;" value="工作 ">
                    	</s:link>&#160;&gt;&#160;&#160;<font size="3">编辑作物</font><rich:messages styleClass="messages"></rich:messages></div>
                    </div>
				<!--入库订单列表开始-->
				
				<div style="margin-top: 40px;">
                	   <img style="margin-right: 5px;width:17px;height:17px;" src="#{request.contextPath}/asset/images/zw_03.png"/><span style="font-size: 14px;color:#7a7a7a;">基础信息</span>
                	</div>
                	<div class="all_44">
                	
                	 <div class="all_da all_w01">
                        	<table>
                            	<tr>
                                	 <td class="all_te">所属类型：</td>
                                    <td>
										<!-- #{plantHome.getFfloristicsListNew()} -->
										<select id="parnetIdItem" class="selectpicker" data-live-search="true">
												<a:repeat value="#{plantHome.floristicsList2}" var="_floristics">
													<s:fragment rendered="#{_floristics[2]}">
													<option value="#{_floristics[0]}" disabled="disabled">#{_floristics[1]}</option>
													</s:fragment>
													<s:fragment rendered="#{!_floristics[2]}">
													<option value="#{_floristics[0]}">#{_floristics[1]}</option>
													</s:fragment>
												</a:repeat>
			                                </select>
			                                <h:inputHidden value="#{modelInfoTwoHome.fId}" id="fId"/>
                                    </td>
                            	</tr>
                            </table>
                        </div>
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">生产年限：</td>
                                    <td>
                                       <h:selectOneMenu immediate="true" styleClass="selectpicker"  style="width:146px;" value="#{modelInfoTwoHome.instance.floristicsType}">
											<f:selectItem itemLabel="一年生" itemValue="1" />
											<f:selectItem itemLabel="多年生" itemValue="2" />
										</h:selectOneMenu>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    	<div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">种名：</td>
                                    <td>
                                       <h:inputText styleClass="form-control nw221" id="name" value="#{modelInfoTwoHome.instance.name}"/>
                                       <span class="finput" style="color:#FF0000">*</span>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    	<div class="all_da all_w01">
                        	<table>
                               <tr>
                                	<td class="all_te">拉丁文名：</td>
                                    <td><h:inputText class="form-control nw221" value="#{modelInfoTwoHome.instance.formalName}" /></td>
                            	</tr>
                            </table>
                        </div>
                    	<div class="all_da all_w01">
                        	<table>
                               <tr>
                                	<td class="all_te">英文名：</td>
                                    <td><h:inputText class="form-control nw221" value="#{modelInfoTwoHome.instance.englishName}" /></td>
                            	</tr>
                            </table>
                        </div>
                       
                         <div class="all_da all_w01">
                        	<table>
                            	<tr>
                                	<td class="all_te">学名：</td>
                                    <td><h:inputText class="form-control nw221" value="#{modelInfoTwoHome.instance.scientificName}" /></td>
                            	</tr>
                            </table>
                        </div>
                        
                         <div class="all_da all_w01">
                        	<table>
                            	 <tr>
                                    <td class="all_te">别名：</td>
                                    <td>
                                        <h:inputText id="suitableCrops"
						 value="#{modelInfoTwoHome.instance.byname}"
						styleClass="form-control nw221" /> 
                                    </td>
                                </tr>
                            </table>
                        </div>
                         <div class="all_da all_w01">
                        	<table>
                            	<tr>
                                    <td class="all_te">科：</td>
                                    <td>
                                     <h:inputText id="faculty"  value="#{modelInfoTwoHome.instance.faculty}"
						styleClass="form-control nw221" />
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">属：</td>
                                    <td>
                                     <h:inputText id="genus"  value="#{modelInfoTwoHome.instance.genus}"
						styleClass="form-control nw221" />
                                    </td>
                                </tr>
                            </table>
                        </div>
                        
                        <div class="all_da all_w01" style="width:auto; display:block;">
                        	<table>
                                <tr>
                                    <td class="all_te">图片：</td>
                                    <td width="250" align="left">
										<s:fileUpload id="picture" size="30"
											accept="image/jpg,image/jpeg,image/gif"
											contentType="image/jpg,image/jpeg,image/gif"
											fileName="#{modelInfoTwoHome.instance.pictureName}"
											data="#{modelInfoTwoHome.instance.pictureByte}"
											onchange="previewImage(this);">
										</s:fileUpload>
									</td>
									<td align="left" style="padding-left:10px;">	
										<font color="#FF0000">图片宽高标准：370x228(像素) 支持格式：jpg,gif,jpeg,bmp</font>
						            </td>
                                </tr>
                            </table>
                        </div>                                               
                        <div class="clear"></div>
                   </div>
                   <div style="margin-top: 40px;">
                	   <img style="margin-right: 5px;width:17px;height:17px;" src="#{request.contextPath}/asset/images/plant_model.png"/><span style="font-size: 14px;color:#7a7a7a;">成熟度模型</span>
                	</div>
                	<div class="all_44">
                    	<div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">起始值：</td>
                                    <td>
                                       <h:inputText styleClass="form-control nw221" id="initialValue" value="#{modelInfoTwoHome.initialValue}"/>
                                       <span class="finput" style="color:#FF0000">*</span>
                                    </td>
                                </tr>
                            </table>
                            
                        </div>
                    	<div class="all_da all_w01">
                        	<table>
                               <tr>
                                	<td class="all_te">成熟值：</td>
                                    <td><h:inputText class="form-control nw221" id="maturityValue" value="#{modelInfoTwoHome.maturityValue}" />
                                    	<span class="finput" style="color:#FF0000">*</span>
                                    </td>
                            	</tr>
                            </table>
                        </div>
                        <div class="clear"></div>
                        <h:inputHidden value="#{modelInfoTwoHome.temperatureDifference}" />
                   </div>
                   <div style="margin-top: 40px;">
                	   <img style="margin-right: 5px;width:17px;height:17px;" src="#{request.contextPath}/asset/images/zw_06.png"/><span style="font-size: 14px;color:#7a7a7a;">环境需求</span>
                	</div>
                	<div class="all_44">
                    	<div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">最低温度：</td>
                                    <td>
                                       <h:inputText styleClass="form-control nw221" id="lowestTemperature" value="#{modelInfoTwoHome.instance.lowestTemperature}"/>
                                    </td>
                                </tr>
                            </table>
                            
                        </div>
                    	<div class="all_da all_w01">
                        	<table>
                               <tr>
                                	<td class="all_te">最高温度：</td>
                                    <td><h:inputText class="form-control nw221" id="maximumTemperature" value="#{modelInfoTwoHome.instance.maximumTemperature}" /></td>
                            	</tr>
                            </table>
                        </div>
                    	<div class="all_da all_w01">
                        	<table>
                               <tr>
                                	<td class="all_te">最低光照：</td>
                                    <td><h:inputText class="form-control nw221" id="lowestLight" value="#{modelInfoTwoHome.instance.lowestLight}" /></td>
                            	</tr>
                            </table>
                        </div>
                       
                         <div class="all_da all_w01">
                        	<table>
                            	<tr>
                                	<td class="all_te">最高光照：</td>
                                    <td><h:inputText class="form-control nw221" id="highestLight" value="#{modelInfoTwoHome.instance.highestLight}" /></td>
                            	</tr>
                            </table>
                        </div>
                        <div class="all_da all_w01">
                        	<table>
                               <tr>
                                	<td class="all_te">最低水分：</td>
                                    <td><h:inputText class="form-control nw221" id="lowestWater" value="#{modelInfoTwoHome.instance.lowestWater}" /></td>
                            	</tr>
                            </table>
                        </div>
                       
                         <div class="all_da all_w01">
                        	<table>
                            	<tr>
                                	<td class="all_te">最高水分：</td>
                                    <td><h:inputText class="form-control nw221" id="highestWater" value="#{modelInfoTwoHome.instance.highestWater}" /></td>
                            	</tr>
                            </table>
                        </div>
                         <div class="all_da all_w01">
                        	<table>
                            	<tr>
                                	<td class="all_te">土壤营养：</td>
                                	
                                    <td><h:inputText id="soilNutrition" onfocus="objFocus(this)" onblur="objBlur(this)"  class="form-control nw221" value="#{modelInfoTwoHome.instance.soilNutrition}" /></td>
                            	</tr>
                            </table>
                        </div>
                        <div class="clear"></div>
                   </div>
                    <div style="margin-top: 40px;">
                	   <img style="margin-right: 5px;width:17px;height:17px;" src="#{request.contextPath}/asset/images/zw_09.png"/><span style="font-size: 14px;color:#7a7a7a;">作物介绍</span>
                	</div>
                	<div class="all_44">
                    	<div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">根：</td>
                                    <td>
                                    
                                       <h:inputTextarea styleClass="form-control nw221" id="roots" value="#{modelInfoTwoHome.instance.root}"/>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    	<div class="all_da all_w01">
                        	<table>
                               <tr>
                                	<td class="all_te">茎：</td>
                                    <td><h:inputTextarea class="form-control nw221" value="#{modelInfoTwoHome.instance.stem}" /></td>
                            	</tr>
                            </table>
                        </div>
                    	<div class="all_da all_w01">
                        	<table>
                               <tr>
                                	<td class="all_te">叶：</td>
                                    <td><h:inputTextarea class="form-control nw221" value="#{modelInfoTwoHome.instance.leaf}" /></td>
                            	</tr>
                            </table>
                        </div>
                         <div class="all_da all_w01">
                        	<table>
                            	<tr>
                                	<td class="all_te">花：</td>
                                    <td><h:inputTextarea class="form-control nw221" value="#{modelInfoTwoHome.instance.flower}" /></td>
                            	</tr>
                            </table>
                        </div>
                        <div class="all_da all_w01">
                        	<table>
                               <tr>
                                	<td class="all_te">果实：</td>
                                    <td><h:inputTextarea class="form-control nw221" value="#{modelInfoTwoHome.instance.fruit}" /></td>
                            	</tr>
                            </table>
                        </div>
                       
                         <div class="all_da all_w01">
                        	<table>
                            	<tr>
                                	<td class="all_te">种子：</td>
                                    <td><h:inputTextarea class="form-control nw221" value="#{modelInfoTwoHome.instance.seed}" /></td>
                            	</tr>
                            </table>
                        </div>
                         <div class="all_da all_w01">
                        	<table>
                            	<tr>
                                	<td class="all_te">生态习性：</td>
                                    <td><h:inputTextarea class="form-control nw221" value="#{modelInfoTwoHome.instance.habit}" /></td>
                            	</tr>
                            </table>
                        </div>
                         <div class="all_da all_w01">
                        	<table>
                            	<tr>
                                	<td class="all_te">形态特征：</td>
                                    <td><h:inputTextarea class="form-control nw221" value="#{modelInfoTwoHome.instance.shape}" /></td>
                            	</tr>
                            </table>
                        </div>
                         <div class="all_da all_w01" style="width:724px;">
                        	<table>
                            	<tr>
                                	<td class="all_te">产地及分布：</td>
                                    <td><h:inputTextarea  styleClass="form-control nw420" rows="3" value="#{modelInfoTwoHome.instance.producingArea}" /></td>
                            	</tr>
                            </table>
                        </div>
                        <div class="clear"></div>
                   </div>
                         <table style="margin:35px auto 0 auto;width:200px;">
						<tr>
							<td>
		            	        <h:commandButton id="update"  styleClass="btn btn-primary" value="提交" action="#{modelInfoTwoHome.update}" rendered="#{modelInfoTwoHome.managed}"   onclick="return checkSubmit()"/>
		    			    &#160;<s:button view="/model/ModelDetail.xhtml" styleClass="btn btn-default" value="返回" id="bn_left61" style="margin-left:10px;" />
                            </td>
                            
						</tr>
                   </table> 

				<!--入库订单列表结束-->
                    <div class="clear"></div>
                </div><!--right_c结束-->
                <div class="clear"></div>
    <!--右边结束-->
    </h:form>
            </td> 
            <style>
    .rich-calendar-button{
     margin-left:-8px
    }
    .all_44{margin-top: 20px;}
    .all_te{width: 100px;}
    </style>
    <script type="text/javascript">
  //<![CDATA[
    jquery(document).ready(function(){  
    	jquery("#parnetIdItem").selectpicker("val",jquery('#user\\:fId').val());
    	var promptMessage = "#{modelInfoTwoHome.promptMessage}";
    	if(promptMessage != ""){
    		document.getElementById("spanValue").innerHTML = promptMessage;
    		jquery("#myModal").modal('show');
    	}
        var obj = document.getElementById("user:soilNutrition");
    	if(obj.value==""){
			obj.value="N P K Ca";
		}
    });  
    function  objFocus(obj){
		if(obj.value=="N P K Ca"){
				obj.value="";
		}
   } 
   function objBlur(obj){
	   if(obj.value==""){
			obj.value="N P K Ca";
		}
   }
   
   var reg = /^[1-9]+[0-9]*]*$/; 
    function checkSubmit(){
        if(jquery('#parnetIdItem').val()==null || jquery('#parnetIdItem').val()==""){
        	 document.getElementById("spanValue").innerHTML = "请选择所属类型！";
  		   jquery("#myModal").modal('show');return false;
        }
    	jquery('#user\\:fId').val(jquery('#parnetIdItem').val());
        var lowestTemperature = document.getElementById("user:lowestTemperature").value;
        var maximumTemperature = document.getElementById("user:maximumTemperature").value;
        var lowestLight = document.getElementById("user:lowestLight").value;
        var highestLight = document.getElementById("user:highestLight").value;
        var lowestWater = document.getElementById("user:lowestWater").value;
        var highestWater = document.getElementById("user:highestWater").value;
    	   var a1 =  document.getElementById("user:name").value;
    	   if(a1 == ""){
    		   document.getElementById("spanValue").innerHTML = "种类名称不能为空";
    		   jquery("#myModal").modal('show');return false;
    	   }
    	   var initialValue =  document.getElementById("user:initialValue").value;
    	   if(initialValue == "0.0" || initialValue == ""){
    		   document.getElementById("spanValue").innerHTML = "成熟度起始值必须大于0";
    		   jquery("#myModal").modal('show');return false;
    	   }
    	   var maturityValue =  document.getElementById("user:maturityValue").value;
    	   if(maturityValue == "0.0" || maturityValue == ""){
    		   document.getElementById("spanValue").innerHTML = "成熟值必须大于0";
    		   jquery("#myModal").modal('show');return false;
    	   }
    	   if(lowestTemperature != "" && !reg.test(lowestTemperature)){
    		   document.getElementById("spanValue").innerHTML = "最低温度只能为数字！";
    		   jquery("#myModal").modal('show');return false;
    	   }
    	   if(maximumTemperature != "" && !reg.test(maximumTemperature)){
    		   document.getElementById("spanValue").innerHTML = "最高温度只能为数字！";
    		   jquery("#myModal").modal('show');return false;
    	   }
    	   if(lowestLight != "" && !reg.test(lowestLight)){
    		   document.getElementById("spanValue").innerHTML = "最低光照只能 为数字！";
    		   jquery("#myModal").modal('show');return false;
    	   }
    	   if(highestLight != "" && !reg.test(highestLight)){
    		   document.getElementById("spanValue").innerHTML = "最高光照只能 为数字！";
    		   jquery("#myModal").modal('show');return false;
    	   }
    	   if(lowestWater != "" && !reg.test(lowestWater)){
    		   document.getElementById("spanValue").innerHTML = "最低水分只能 为数字！";
    		   jquery("#myModal").modal('show');return false;
    	   }
    	   if(highestWater != "" && !reg.test(highestWater)){
    		   document.getElementById("spanValue").innerHTML = "最高水分只能 为数字！";
    		   jquery("#myModal").modal('show');return false;
    	   }
    	}
	jquery('.selectpicker').selectpicker();
	function previewImage(file){
		 if(!/\.(gif|jpg|jpeg|bmp|GIF|JPG)$/.test(file.value)){
	       alert("图片类型必须是.gif,jpeg,jpg中的一种")
	       return false;
	     }
	}
	//]]>
	
			</script>
	</ui:define>

</ui:composition>

<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	template="/layout/template_new.xhtml">

<ui:define name="body">
            <style>
            .farmingInputs_add3 {
    background:  url("#{request.contextPath}/asset/images/farmingIco15.jpg") ;
    border: medium none;
    float: left;
    height: 130px;
    width: 130px;
}

.farmingInputs_mini {
    background-clip: padding-box;
    background-color: #fff;
    border: 1px solid rgba(0, 0, 0, 0.2);
    border-radius: 6px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
    left: 0;
    outline: 0 none;
    position: absolute;
    top: 54px;
    width: 346px;
    z-index: 10;
}

.farmingInputs_miniHd .butt {
    background:url("#{request.contextPath}/asset/images/farmingIco16.jpg");
    border: medium none;
    float: right;
    height: 11px;
    margin-top: 3px;
    width: 11px;
}
.farmingInputs_add2 {
    background: url("#{request.contextPath}/asset/images/farmingIco14.jpg");
    border: medium none;
    float: left;
    height: 34px;
    width: 34px;
}

.farmingInputs{ position: relative; margin:0 10px 10px 0;}
.farmingInputs .closeInputs{ position: absolute; right:0; top:0;}
.mark-modal-bl{ position: fixed; left:0; top:0; z-index:1; display:none; width:100%; height:100%; background:#000;opacity:0.5;filter:alpha(opacity=50);}
.bootstrap-select.btn-group .dropdown-menu.inner{height:114px;}
h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6{color:#525252;}
.baseTtlH3{ border-bottom: 1px dashed #ddd;}
.zz_titleh2{ margin:10px 0;padding:10px 0; line-height:24px;border-bottom:1px solid #ddd; font-size:18px;overflow:hidden;}
.zz_titleh2 img{float:left; width: 24px;height:24px; margin-right:5px;}
          </style>
            <td valign="top">
            
    <h:form id="farmingPush">
            <div class="right_c" style="min-height:30px; padding-bottom:20px;">
            	<!-- 面包屑导航 开始 -->
                <div class="r_title clear" style="margin-top:0; padding-top:20px;">
                    <div class="r_t_l fl">生产<span style="padding:0 5px;">&gt;</span><font size="3">农事推送</font></div>
                </div>
                <!-- 面包屑导航 结束 -->
                 <!-- #{farmingPushHome.begins()} -->
                <!-- #{farmingPushHome.editFarmingPushInfo()} -->
                <table class="messageTable" width="100%" cellpadding="0" cellspacing="0" style="width:964px; margin:40px auto 20px; font-size:12px;">
                	<tr>
                    	<td class="pr10" align="right" width="110">所属作物</td>
                        <td width="262">#{farmingPushHome.plantObj.floristicsId.name}</td>
                        <td class="pr10" align="right" width="110">品种名称</td>
                        <td colspan="2">全部</td>
                    </tr>
                    <tr>
                    	<td class="pr10" align="right" width="110">种植标准</td>
                        <td width="262">
                        	<span class="bootSelt21">
	                            <h:selectOneMenu id="dataDicId"  styleClass="selectpicker nw200" value="#{farmingPushHome.ddId}">
										<s:selectItems value="#{farmingPushHome.ddList}" var="var" label="#{var.name}" itemValue="#{var.dataDicId}"/>
								</h:selectOneMenu>
                            </span>
                        </td>
                        <td class="pr10" align="right" width="110">种植环境</td>
                        <td>
                        	<span class="bootSelt21">
                            	<h:selectOneMenu id="plantEnvId"  styleClass="selectpicker nw200" value="#{farmingPushHome.plantEnvId}">
										<s:selectItems value="#{farmingPushHome.petList}" var="var" label="#{var.name}" itemValue="#{var.id}"/>
								</h:selectOneMenu>
                            </span>
                        </td>
                    </tr>
                </table>
                <h2 class="zz_titleh2"><img src="#{request.contextPath}/asset/images/model/planting_ico201.jpg" />幼苗时期</h2>
                <!-- 栽植前 开始 -->
                <div class="baseTtlH3 mt10 clear" style="margin:20px 30px 0">
					 <h3 style="background:none; font-size:16px;">栽植前</h3>             
                </div>
                <h:panelGroup id="farmingBefore">
                <div id="nullFarming" style="display:none;">
                <div class="messageTable_wap">
	                <table class="messageTable" width="100%" cellpadding="0" cellspacing="0" style="width:964px; margin:40px auto 20px; font-size:12px;">
	                	<tr>
	                    	<td class="pr10" align="right" width="110">选择时间</td>
	                        <td width="262">
	                        	<span class="bootSelt21">
	                                    <select style="display: none;" class="selectpicker dayselect" id="" name="day_before" data-live-search="true">
                                            <a4j:repeat value="#{farmingPushHome.dayBefore}" var="day">
                                            <option value="#{day.value}">#{day.label}</option>
                                            </a4j:repeat>
                                        </select>
	                            </span>
	                        </td>
	                        <td class="pr10" align="right" width="110">农事内容</td>
	                        <td width="262">
	                        	<span class="bootSelt21">
	                                    <select style="display: none;" class="selectpicker artselect" id="" name="art_before" data-live-search="true">
                                            <a4j:repeat value="#{farmingPushHome.artList}" var="art">
                                            <option value="#{art[0]}">#{art[1]}</option>
                                            </a4j:repeat>
                                        </select>
	                            </span>
	                        </td>
	                        <td align="center">
	                        	<a class="btn btn-success mr5 bef" id="0" onclick="addFarming(this.id)">添加</a>
		                        <a class="btn btn-default delete" id="0" href="javascript:;" onclick="delFarming(this.id,1)">删除</a>
	                        </td>
	                    </tr>
	                     <tr>
		                       <td class="pr10" align="right" width="110" style="vertical-align:top; padding-top: 56px;">操作工时</td> 
		                       <td width="262" style="vertical-align:top; padding-top: 51px;">
		                       	<input type="text" class="form-control workTime"  style="width:220px; color:#333; float:left;"/>
		                       		<span style="float: left;margin-left: 3px;margin-top: 7px;">小时</span>
		                       </td>
		                        <td class="pr10" align="right" width="110" style="vertical-align:top; padding-top: 56px;">投入品</td>
		                        <td colspan="2" class="trp" >
		                            <s:div  styleClass="farmingInputs_wp  refInpB0">
                                            <div class="farmingInputs_add" style="position:static;">
                                            	<input type="button" class="farmingInputs_add3" style="margin-bottom:25px;" onclick="addRecord(this,'before')"></input>
                               				</div>
                                      </s:div>
		                        </td>
		                    </tr>
	                    <tr>
	                    	<td class="pr10" align="right" width="110">规范操作</td>
	                        <td colspan="4">
	                        	<span class="bootTextarea">
	                           <textarea class="form-control area_textarea operation_area" id="operationBefore" name="operation_before" style="width:260px;" />
	                            </span>
	                        </td>
	                    </tr>
	                </table>
	                </div>
	             </div>
	             	<h:panelGroup  rendered="#{empty farmingPushHome.beforeList}">
	                <div class="messageTable_wap before_div" id="before_0">
	                <table class="messageTable" width="100%" cellpadding="0" cellspacing="0" style="width:964px; margin:40px auto 20px; font-size:12px;">
	                	<tr>
	                    	<td class="pr10" align="right" width="110">选择时间</td>
	                        <td width="262">
	                        	<span class="bootSelt21">
										<select style="display: none;" class="selectpicker dayselect" id="" name="day_before" data-live-search="true">
                                            <a4j:repeat value="#{farmingPushHome.dayBefore}" var="day">
                                            <option value="#{day.value}">#{day.label}</option>
                                            </a4j:repeat>
                                        </select>
	                            </span>
	                        </td>
	                        <td class="pr10" align="right" width="110">农事内容</td>
	                        <td width="262">
	                        	<span class="bootSelt21">
										<select style="display: none;" class="selectpicker artselect" id="" name="art_before" data-live-search="true">
                                            <a4j:repeat value="#{farmingPushHome.artList}" var="art">
                                            <option value="#{art[0]}">#{art[1]}</option>
                                            </a4j:repeat>
                                        </select>
	                            </span>
	                        </td>
	                        <td align="center">
	                        	<a class="btn btn-success mr5" id="0" onclick="addFarming(this.id)">添加</a>
		                        <a class="btn btn-default delete" id="0" href="javascript:;" onclick="delFarming(this.id,1)">删除</a>
	                        </td>
	                    </tr>
	                     <tr>
		                       <td class="pr10" align="right" width="110" style="vertical-align:top; padding-top: 56px;">操作工时</td> 
		                       <td width="262" style="vertical-align:top; padding-top: 51px;">
		                       	<input type="text" class="form-control workTime"  style="width:220px; color:#333; float:left;"/>
		                       		<span style="float: left;margin-left: 3px;margin-top: 7px;">小时</span>
		                       </td>
		                        <td class="pr10" align="right" width="110" style="vertical-align:top; padding-top: 56px;">投入品</td>
		                        <td colspan="2" class="trp" >
		                            <s:div  styleClass="farmingInputs_wp refInpB0">
                                    	<a4j:repeat value="#{farmingPushHome.beforeRecordList}" var="var"  rowKeyVar="row">
                                    	<div class="farmingInputs fl">
                                            	<a class="farmingInputs_pic" href="javascript:;">
                                            	<s:fragment rendered="#{var.inputsInfoId.packingImagesUrl ne null and var.inputsInfoId.packingImagesUrl ne ''}"><img src="#{var.inputsInfoId.packingImagesUrl}"  style="width:128px;height:128px"/></s:fragment> 
												<s:fragment rendered="#{var.inputsInfoId.packingImagesUrl eq null or var.inputsInfoId.packingImagesUrl eq ''}"><img src="#{request.contextPath}/asset/images/inputs/tourupin.jpg"  style="width:128px;height:128px"/></s:fragment>  
                                            	<p>#{var.inputsInfoId.name} #{var.amount}<s:fragment rendered="#{var.inputsInfoId.packSpec ne null}">#{var.inputsInfoId.packSpec}</s:fragment><s:fragment rendered="#{var.inputsInfoId.packSpec eq null}">#{var.inputsInfoId.unitInfo.name}</s:fragment></p>
                                            	</a>
                                                <em class="closeInputs" onclick="delRecordList(this,#{row})"><img src="#{request.contextPath}/asset/images/clo_04.jpg" /></em>
                                            </div>
                                    	</a4j:repeat>
                                            <div class="farmingInputs_add" style="position:static;">
                                            	<input type="button" class="farmingInputs_add3" style="margin-bottom:25px;" onclick="addRecord(this,'before')"></input>
                               				</div>
                                      </s:div>
		                        </td>
		                    </tr>
	                    <tr>
	                    	<td class="pr10" align="right" width="110">规范操作</td>
	                        <td colspan="4">
	                        	<span class="bootTextarea">
	                            <textarea class="form-control area_textarea operation_area" id="operationBefore" name="operation_before" style="width:260px;" />
	                            </span>
	                        </td>
	                    </tr>
	                </table>
	                </div>
	                </h:panelGroup>
                   <a4j:repeat value="#{farmingPushHome.beforeList}" rendered="#{not empty farmingPushHome.beforeList}" var="_var" rowKeyVar="_index">
		                <div class="messageTable_wap before_div" id="before_#{_index}">
		                <table class="messageTable" width="100%" cellpadding="0" cellspacing="0" style="width:964px; margin:40px auto 20px; font-size:12px;">
		                	<tr>
		                    	<td class="pr10" align="right" width="110">选择时间</td>
		                        <td width="262">
		                        	<span class="bootSelt21">
										<select style="display: none;" class="selectpicker dayselect" id="day_before_#{_index}" name="day_before" data-live-search="true">
                                            <a4j:repeat value="#{farmingPushHome.dayBefore}" var="day">
                                            <h:panelGroup rendered="#{_var[0] eq day.value}">
                                            <option value="#{day.value}" selected="selected">#{day.label}</option>
                                            </h:panelGroup>
                                            <h:panelGroup rendered="#{_var[0] ne day.value}">
                                            <option value="#{day.value}">#{day.label}</option>
                                            </h:panelGroup>
                                            </a4j:repeat>
                                        </select>
		                            </span>
		                        </td>
		                        <td class="pr10" align="right" width="110">农事内容</td>
		                        <td width="262">
		                        	<span class="bootSelt21">
										<select style="display: none;" class="selectpicker artselect" id="art_before_#{_index}" name="art_before" data-live-search="true">
                                            <a4j:repeat value="#{farmingPushHome.artList}" var="art">
                                             <h:panelGroup rendered="#{_var[1] eq art[0]}">
                                              <option value="#{art[0]}" selected="selected">#{art[1]}</option>
                                            </h:panelGroup>
                                            <h:panelGroup rendered="#{_var[1] ne art[0]}">
                                            <option value="#{art[0]}">#{art[1]}</option>
                                            </h:panelGroup>
                                            </a4j:repeat>
                                        </select>
		                            </span>
		                        </td>
		                        <td align="center">
		                        	<a class="btn btn-success mr5" id="#{_index}" onclick="addFarming(#{_index})">添加</a>
		                        	<a class="btn btn-default delete" id="#{_index}" href="javascript:;" onclick="delFarming(#{_index},1)">删除</a>
		                        </td>
		                    </tr>
		                    <tr>
		                       <td class="pr10" align="right" width="110" style="vertical-align:top; padding-top: 56px;">操作工时</td> 
		                       <td width="262" style="vertical-align:top; padding-top: 51px;">
		                       	<input type="text" class="form-control workTime"  style="width:220px; color:#333; float:left;" value="#{_var[4]}"></input>
		                       		<span style="float: left;margin-left: 3px;margin-top: 7px;">小时</span>
		                       </td>
		                        <td class="pr10" align="right" width="110" style="vertical-align:top; padding-top: 56px;">投入品</td>
		                        <td colspan="2" class="trp" >
		                           <s:div  styleClass="farmingInputs_wp refInpB0">
		                           <h:panelGroup rendered="#{_var[3] !=null &amp;&amp; _var[3] !=''}">
                                    	<a4j:repeat value="#{_var[3].split(',')}" var="var"  rowKeyVar="row">
                                    	<div class="farmingInputs fl">
                                            	<a class="farmingInputs_pic" href="javascript:;"><img src="#{var}" width="128" height="128" /></a>
                                                <em class="closeInputs" onclick="delRecordList(this,#{row})"><img src="#{request.contextPath}/asset/images/clo_04.jpg" /></em>
                                            </div>
                                    	</a4j:repeat>
                                    	</h:panelGroup>
                                            <div class="farmingInputs_add" style="position:static;">
                                            	<input type="button" class="farmingInputs_add3" style="margin-bottom:25px;" onclick="addRecord(this,'before')"></input>
                               				</div>
                                      </s:div>
		                        </td>
		                    </tr>
		                    <tr>
		                    	<td class="pr10" align="right" width="110">规范操作</td>
		                        <td colspan="4">
		                        	<span class="bootTextarea">
		                            <textarea class="form-control area_textarea operation_area" id="operationBefore_#{_index}" name="operation_before" style="width:260px;" >#{_var[2]}</textarea>
		                            </span>
		                        </td>
		                    </tr>
		                </table>
		                </div>
	                </a4j:repeat>
	             </h:panelGroup>
                <!-- 栽植前 结束 -->
                <!-- 栽植后 开始 -->
                
                <div class="baseTtlH3 mt10 clear" style="margin:20px 30px 0">
					 <h3 style="background:none; font-size:16px;">栽植后</h3>             
                </div>
                
                <h:panelGroup id="farmingAfter">
                <div id="nullFarmingAfter" style="display: none;">
                	
                <div class="messageTable_wap">
                	<table class="messageTable" width="100%" cellpadding="0" cellspacing="0" style="width:964px; margin:40px auto 20px; font-size:12px;">
	                	<tr>
	                    	<td class="pr10" align="right" width="110">选择时间</td>
	                        <td width="262">
	                        <span class="bootSelt21">
	                        	<h:inputText value="1"  name="day_after" styleClass="dayselect form-control" style="width: 220px;height: 34px"/>
	                        	</span>
	                        </td>
	                        <td class="pr10" align="right" width="110">农事内容</td>
	                        <td width="262">
	                        	<span class="bootSelt21">
	                        		<select style="display: none;" class="selectpicker artselect" id="" name="art_after" data-live-search="true">
                                            <a4j:repeat value="#{farmingPushHome.artList}" var="art">
                                            <option value="#{art[0]}">#{art[1]}</option>
                                            </a4j:repeat>
                                        </select>
	                            </span>
	                        </td>
	                        <td align="center">
	                        	<a class="btn btn-success mr5 las" id="0" onclick="addFarmingAfter(this.id)">添加</a>
			                        	<a class="btn btn-default delete" id="0" href="javascript:;"  onclick="delFarming(this.id,2)">删除</a>
	                        </td>
	                    </tr>
	                     <tr>
		                       <td class="pr10" align="right" width="110" style="vertical-align:top; padding-top: 56px;">操作工时</td> 
		                       <td width="262" style="vertical-align:top; padding-top: 51px;">
		                       	<input type="text" class="form-control workTime"  style="width:220px; color:#333; float:left;"/>
		                       		<span style="float: left;margin-left: 3px;margin-top: 7px;">小时</span>
		                       </td>
		                        <td class="pr10" align="right" width="110" style="vertical-align:top; padding-top: 56px;">投入品</td>
		                        <td colspan="2" class="trp" >
		                            <s:div  styleClass="farmingInputs_wp  refInp0">
                                            <div class="farmingInputs_add" style="position:static;">
                                            	<input type="button" class="farmingInputs_add3" style="margin-bottom:25px;" onclick="addRecord(this,'after')"></input>
                               				</div>
                                      </s:div>
		                        </td>
		                    </tr>
	                    <tr>
	                    	<td class="pr10" align="right" width="110">规范操作</td>
	                        <td colspan="4">
	                        	<span class="bootTextarea">
	                            	<textarea class="form-control area_textarea operation_area" id="operationAfter_#{_index}" name="operation_before" style="width:260px;" />
	                            </span>
                        </td>
                    </tr>
                </table>
                </div>
                	</div>
                	 <h:panelGroup rendered="#{empty farmingPushHome.afterList}">
                	 	<div class="messageTable_wap after_div" id="after_0" >
                <table class="messageTable" width="100%" cellpadding="0" cellspacing="0" style="width:964px; margin:40px auto 20px; font-size:12px;">
                	<tr>
                    	<td class="pr10" align="right" width="110">选择时间</td>
                        <td width="262">
                        	<span class="bootSelt21">
								<h:inputText value="1"  name="day_after" styleClass="dayselect form-control" style="width: 220px;height: 34px"/>
                            </span>
                        </td>
                        <td class="pr10" align="right" width="110">农事内容</td>
                        <td width="262">
                        	<span class="bootSelt21">
								<select style="display: none;" class="selectpicker artselect" id="" name="art_after" data-live-search="true">
                                            <a4j:repeat value="#{farmingPushHome.artList}" var="art">
                                            <option value="#{art[0]}">#{art[1]}</option>
                                            </a4j:repeat>
                                        </select>
                            </span>
                        </td>
                        <td align="center">
                        	<a class="btn btn-success mr5" id="0" onclick="addFarmingAfter(this.id)">添加</a>
		                        	<a class="btn btn-default delete" id="0" href="javascript:;"  onclick="delFarming(this.id,2)">删除</a>
                        </td>
                    </tr>
                     <tr>
		                       <td class="pr10" align="right" width="110" style="vertical-align:top; padding-top: 56px;">操作工时</td> 
		                       <td width="262" style="vertical-align:top; padding-top: 51px;">
		                       	<input type="text" class="form-control workTime"  style="width:220px; color:#333; float:left;"/>
		                       		<span style="float: left;margin-left: 3px;margin-top: 7px;">小时</span>
		                       </td>
		                        <td class="pr10" align="right" width="110" style="vertical-align:top; padding-top: 56px;">投入品</td>
		                        <td colspan="2" class="trp" >
		                           <s:div  styleClass="farmingInputs_wp  refInp0">
                                    	<a4j:repeat value="#{farmingPushHome.afterRecordMap.get('1')}" var="var"  rowKeyVar="row">
                                    	<div class="farmingInputs fl">
                                            	<a class="farmingInputs_pic" href="javascript:;">
	                                            	<s:fragment rendered="#{var.inputsInfoId.packingImagesUrl ne null and var.inputsInfoId.packingImagesUrl ne ''}"><img src="#{var.inputsInfoId.packingImagesUrl}"  style="width:111px;height:89px"/></s:fragment> 
													<s:fragment rendered="#{var.inputsInfoId.packingImagesUrl eq null or var.inputsInfoId.packingImagesUrl eq ''}"><img src="#{request.contextPath}/asset/images/wt003.jpg"  style="width:111px;height:89px"/></s:fragment>  
	                                            	<p>#{var.inputsInfoId.name} #{var.amount}<s:fragment rendered="#{var.inputsInfoId.packSpec ne null}">#{var.inputsInfoId.packSpec}</s:fragment><s:fragment rendered="#{var.inputsInfoId.packSpec eq null}">#{var.inputsInfoId.unitInfo.name}</s:fragment></p>
                                            	</a>
                                                <em class="closeInputs" onclick="delRecordList(this,#{row})"><img src="#{request.contextPath}/asset/images/clo_04.jpg" /></em>
                                            </div>
                                    	</a4j:repeat>
                                            <div class="farmingInputs_add" style="position:static;">
                                            	<input type="button" class="farmingInputs_add3" style="margin-bottom:25px;" onclick="addRecord(this,'after')"></input>
                               				</div>
                                      </s:div>
		                        </td>
		                    </tr>
                    <tr>
                    	<td class="pr10" align="right" width="110">规范操作</td>
                        <td colspan="4">
                        	<span class="bootTextarea">
                            <textarea class="form-control area_textarea operation_area" id="" name="operation_before" style="width:260px;" />
                            </span>
                        </td>
                    </tr>
                </table>
                </div>
                	 </h:panelGroup>
                	 <a4j:repeat value="#{farmingPushHome.afterList}" rendered="#{not empty farmingPushHome.afterList}" var="_var" rowKeyVar="_index">
		                <div class="messageTable_wap after_div" id="after_#{_index}">
		                <table class="messageTable" width="100%" cellpadding="0" cellspacing="0" style="width:964px; margin:40px auto 20px; font-size:12px;">
		                	<tr>
		                    	<td class="pr10" align="right" width="110">选择时间</td>
		                        <td width="262">
		                        	<span class="bootSelt21">
		                        	<h:inputText value="#{_var[0]}" id="day_after_#{_index}" name="day_After" styleClass="dayselect form-control" style="width: 220px;height: 34px"/>
		                            </span>
		                        </td>
		                        <td class="pr10" align="right" width="110">农事内容</td>
		                        <td width="262">
		                        	<span class="bootSelt21">
										<select style="display: none;" class="selectpicker artselect" id="art_after_#{_index}" name="art_after" data-live-search="true">
                                            <a4j:repeat value="#{farmingPushHome.artList}" var="art">
                                             <h:panelGroup rendered="#{_var[1] eq art[0]}">
                                              <option value="#{art[0]}" selected="selected">#{art[1]}</option>
                                            </h:panelGroup>
                                            <h:panelGroup rendered="#{_var[1] ne art[0]}">
                                            <option value="#{art[0]}">#{art[1]}</option>
                                            </h:panelGroup>
                                            </a4j:repeat>
                                        </select>
		                            </span>
		                        </td>
		                        <td align="center">
		                        	<a class="btn btn-success mr5" id="#{_index}" onclick="addFarmingAfter(#{_index})">添加</a>
		                        	<a class="btn btn-default delete" id="#{_index}" href="javascript:;" onclick="delFarming(#{_index},2)">删除</a>
		                        </td>
		                    </tr>
		                     <tr>
		                       <td class="pr10" align="right" width="110" style="vertical-align:top; padding-top: 56px;">操作工时</td> 
		                       <td width="262" style="vertical-align:top; padding-top: 51px;">
		                       	<input type="text" class="form-control workTime"  style="width:220px; color:#333; float:left;" value="#{_var[4]}"></input>
		                       		<span style="float: left;margin-left: 3px;margin-top: 7px;">小时</span>
		                       </td>
		                        <td class="pr10" align="right" width="110" style="vertical-align:top; padding-top: 56px;">投入品</td>
		                        <td colspan="2" class="trp" >
		                           <s:div  styleClass="farmingInputs_wp refInp0">
		                           		<h:panelGroup rendered="#{_var[3] !=null &amp;&amp; _var[3] !=''}">
                                    	<a4j:repeat value="#{_var[3].split(',')}" var="var"  rowKeyVar="row">
                                    	<div class="farmingInputs fl">                                 	
                                            	<a class="farmingInputs_pic" href="javascript:;">
                                            		<s:fragment rendered="#{var ne null and var ne '' and var ne 'null'}"><img src="#{var}"  style="width:128px;height:128px"/></s:fragment> 
													<s:fragment rendered="#{var eq null or var eq '' or var eq 'null'}"><img src="#{request.contextPath}/asset/images/inputs/tourupin.jpg"  style="width:128px;height:128px"/></s:fragment> 
                                            	</a>
                                                <em class="closeInputs" onclick="delRecordList(this,#{row})"><img src="#{request.contextPath}/asset/images/clo_04.jpg" /></em>
                                            </div>
                                    	</a4j:repeat>
                                    	</h:panelGroup>
                                            <div class="farmingInputs_add" style="position:static;">
                                            	<input type="button" class="farmingInputs_add3" style="margin-bottom:25px;" onclick="addRecord(this,'after')"></input>
                               				</div>
                                      </s:div>
		                        </td>
		                    </tr>
		                    <tr>
		                    	<td class="pr10" align="right" width="110">规范操作</td>
		                        <td colspan="4">
		                        	<span class="bootTextarea">
		                             <textarea class="form-control area_textarea operation_area" id="operationAfter_#{_index}" name="operation_After" style="width:260px;" >#{_var[2]}</textarea>
		                            </span>
		                        </td>
		                    </tr>
		                </table>
		                </div>
	                </a4j:repeat>
                </h:panelGroup>
                <!-- 栽植后 结束 -->
                 <!-- 成苗时期 开始 -->
                 <h2 class="zz_titleh2"><img src="#{request.contextPath}/asset/images/model/planting_ico202.jpg" />成苗时期</h2>
                <h:panelGroup id="farmingSeedling">
                <div id="nullFarmingSeedling" style="display:none;">
                <div class="messageTable_wap">
	                <table class="messageTable" width="100%" cellpadding="0" cellspacing="0" style="width:964px; margin:40px auto 20px; font-size:12px;">
	                	<tr>
	                    	<td class="pr10" align="right" width="110">选择时间</td>
	                        <td width="262">
	                        	<span class="bootSelt21">
	                                    <select style="display: none;" class="selectpicker dayselect" id="" name="day_seedling" data-live-search="true">
                                            <a4j:repeat value="#{farmingPushHome.dayAfter}" var="day">
                                            <option value="#{day.value}">#{day.label}</option>
                                            </a4j:repeat>
                                        </select>
	                            </span>
	                        </td>
	                        <td class="pr10" align="right" width="110">农事内容</td>
	                        <td width="262">
	                        	<span class="bootSelt21">
	                                    <select style="display: none;" class="selectpicker artselect" id="" name="art_seedling" data-live-search="true">
                                            <a4j:repeat value="#{farmingPushHome.artList}" var="art">
                                            <option value="#{art[0]}">#{art[1]}</option>
                                            </a4j:repeat>
                                        </select>
	                            </span>
	                        </td>
	                        <td align="center">
	                        	<a class="btn btn-success mr5 seedling" id="0" onclick="addFarmingSeedling(this.id)">添加</a>
		                        <a class="btn btn-default delete" id="0" href="javascript:;" onclick="delFarming(this.id,3)">删除</a>
	                        </td>
	                    </tr>
	                     <tr>
		                       <td class="pr10" align="right" width="110" style="vertical-align:top; padding-top: 56px;">操作工时</td> 
		                       <td width="262" style="vertical-align:top; padding-top: 51px;">
		                       	<input type="text" class="form-control workTime"  style="width:220px; color:#333; float:left;"/>
		                       		<span style="float: left;margin-left: 3px;margin-top: 7px;">小时</span>
		                       </td>
		                        <td class="pr10" align="right" width="110" style="vertical-align:top; padding-top: 56px;">投入品</td>
		                        <td colspan="2" class="trp" >
		                            <s:div  styleClass="farmingInputs_wp  refInpS0">
                                            <div class="farmingInputs_add" style="position:static;">
                                            	<input type="button" class="farmingInputs_add3" style="margin-bottom:25px;" onclick="addRecord(this,'seedling')"></input>
                               				</div>
                                      </s:div>
		                        </td>
		                    </tr>
	                    <tr>
	                    	<td class="pr10" align="right" width="110">规范操作</td>
	                        <td colspan="4">
	                        	<span class="bootTextarea">
	                           <textarea class="form-control area_textarea operation_area" id="operationBefore" name="operation_before" style="width:260px;" />
	                            </span>
	                        </td>
	                    </tr>
	                </table>
	                </div>
	             </div>
	             	<h:panelGroup  rendered="#{empty farmingPushHome.seedlingList}">
	                <div class="messageTable_wap seedling_div" id="seedling_0">
	                <table class="messageTable" width="100%" cellpadding="0" cellspacing="0" style="width:964px; margin:40px auto 20px; font-size:12px;">
	                	<tr>
	                    	<td class="pr10" align="right" width="110">选择时间</td>
	                        <td width="262">
	                        	<span class="bootSelt21">
										<select style="display: none;" class="selectpicker dayselect" id="" name="day_seedling" data-live-search="true">
                                            <a4j:repeat value="#{farmingPushHome.dayAfter}" var="day">
                                            <option value="#{day.value}">#{day.label}</option>
                                            </a4j:repeat>
                                        </select>
	                            </span>
	                        </td>
	                        <td class="pr10" align="right" width="110">农事内容</td>
	                        <td width="262">
	                        	<span class="bootSelt21">
										<select style="display: none;" class="selectpicker artselect" id="" name="art_seedling" data-live-search="true">
                                            <a4j:repeat value="#{farmingPushHome.artList}" var="art">
                                            <option value="#{art[0]}">#{art[1]}</option>
                                            </a4j:repeat>
                                        </select>
	                            </span>
	                        </td>
	                        <td align="center">
	                        	<a class="btn btn-success mr5" id="0" onclick="addFarmingSeedling(this.id)">添加</a>
		                        <a class="btn btn-default delete" id="0" href="javascript:;" onclick="delFarming(this.id,3)">删除</a>
	                        </td>
	                    </tr>
	                     <tr>
		                       <td class="pr10" align="right" width="110" style="vertical-align:top; padding-top: 56px;">操作工时</td> 
		                       <td width="262" style="vertical-align:top; padding-top: 51px;">
		                       	<input type="text" class="form-control workTime"  style="width:220px; color:#333; float:left;"/>
		                       		<span style="float: left;margin-left: 3px;margin-top: 7px;">小时</span>
		                       </td>
		                        <td class="pr10" align="right" width="110" style="vertical-align:top; padding-top: 56px;">投入品</td>
		                        <td colspan="2" class="trp" >
		                            <s:div  styleClass="farmingInputs_wp refInpS0">
                                    	<a4j:repeat value="#{farmingPushHome.seedlingRecordList}" var="var"  rowKeyVar="row">
                                    	<div class="farmingInputs fl">
                                            	<a class="farmingInputs_pic" href="javascript:;">
                                            	<s:fragment rendered="#{var.inputsInfoId.packingImagesUrl ne null and var.inputsInfoId.packingImagesUrl ne ''}"><img src="#{var.inputsInfoId.packingImagesUrl}"  style="width:128px;height:128px"/></s:fragment> 
												<s:fragment rendered="#{var.inputsInfoId.packingImagesUrl eq null or var.inputsInfoId.packingImagesUrl eq ''}"><img src="#{request.contextPath}/asset/images/inputs/tourupin.jpg"  style="width:128px;height:128px"/></s:fragment>  
                                            	<p>#{var.inputsInfoId.name} #{var.amount}<s:fragment rendered="#{var.inputsInfoId.packSpec ne null}">#{var.inputsInfoId.packSpec}</s:fragment><s:fragment rendered="#{var.inputsInfoId.packSpec eq null}">#{var.inputsInfoId.unitInfo.name}</s:fragment></p>
                                            	</a>
                                                <em class="closeInputs" onclick="delRecordList(this,#{row})"><img src="#{request.contextPath}/asset/images/clo_04.jpg" /></em>
                                            </div>
                                    	</a4j:repeat>
                                            <div class="farmingInputs_add" style="position:static;">
                                            	<input type="button" class="farmingInputs_add3" style="margin-bottom:25px;" onclick="addRecord(this,'seedling')"></input>
                               				</div>
                                      </s:div>
		                        </td>
		                    </tr>
	                    <tr>
	                    	<td class="pr10" align="right" width="110">规范操作</td>
	                        <td colspan="4">
	                        	<span class="bootTextarea">
	                            <textarea class="form-control area_textarea operation_area" id="operationSeedling" name="operation_seedling" style="width:260px;" />
	                            </span>
	                        </td>
	                    </tr>
	                </table>
	                </div>
	                </h:panelGroup>
                   <a4j:repeat value="#{farmingPushHome.seedlingList}" rendered="#{not empty farmingPushHome.seedlingList}" var="_var" rowKeyVar="_index">
		                <div class="messageTable_wap seedling_div" id="seedling_#{_index}">
		                <table class="messageTable" width="100%" cellpadding="0" cellspacing="0" style="width:964px; margin:40px auto 20px; font-size:12px;">
		                	<tr>
		                    	<td class="pr10" align="right" width="110">选择时间</td>
		                        <td width="262">
		                        	<span class="bootSelt21">
										<select style="display: none;" class="selectpicker dayselect" id="day_seedling_#{_index}" name="day_seedling" data-live-search="true">
                                            <a4j:repeat value="#{farmingPushHome.dayAfter}" var="day">
                                            <h:panelGroup rendered="#{_var[0] eq day.value}">
                                            <option value="#{day.value}" selected="selected">#{day.label}</option>
                                            </h:panelGroup>
                                            <h:panelGroup rendered="#{_var[0] ne day.value}">
                                            <option value="#{day.value}">#{day.label}</option>
                                            </h:panelGroup>
                                            </a4j:repeat>
                                        </select>
		                            </span>
		                        </td>
		                        <td class="pr10" align="right" width="110">农事内容</td>
		                        <td width="262">
		                        	<span class="bootSelt21">
										<select style="display: none;" class="selectpicker artselect" id="art_seedling_#{_index}" name="art_seedling" data-live-search="true">
                                            <a4j:repeat value="#{farmingPushHome.artList}" var="art">
                                             <h:panelGroup rendered="#{_var[1] eq art[0]}">
                                              <option value="#{art[0]}" selected="selected">#{art[1]}</option>
                                            </h:panelGroup>
                                            <h:panelGroup rendered="#{_var[1] ne art[0]}">
                                            <option value="#{art[0]}">#{art[1]}</option>
                                            </h:panelGroup>
                                            </a4j:repeat>
                                        </select>
		                            </span>
		                        </td>
		                        <td align="center">
		                        	<a class="btn btn-success mr5" id="#{_index}" onclick="addFarmingSeedling(#{_index})">添加</a>
		                        	<a class="btn btn-default delete" id="#{_index}" href="javascript:;" onclick="delFarming(#{_index},3)">删除</a>
		                        </td>
		                    </tr>
		                    <tr>
		                       <td class="pr10" align="right" width="110" style="vertical-align:top; padding-top: 56px;">操作工时</td> 
		                       <td width="262" style="vertical-align:top; padding-top: 51px;">
		                       	<input type="text" class="form-control workTime"  style="width:220px; color:#333; float:left;" value="#{_var[4]}"></input>
		                       		<span style="float: left;margin-left: 3px;margin-top: 7px;">小时</span>
		                       </td>
		                        <td class="pr10" align="right" width="110" style="vertical-align:top; padding-top: 56px;">投入品</td>
		                        <td colspan="2" class="trp" >
		                           <s:div  styleClass="farmingInputs_wp refInpS0">
		                           <h:panelGroup rendered="#{_var[3] !=null &amp;&amp; _var[3] !=''}">
                                    	<a4j:repeat value="#{_var[3].split(',')}" var="var"  rowKeyVar="row">
                                    	<div class="farmingInputs fl">
                                            	<a class="farmingInputs_pic" href="javascript:;">
                                            		<s:fragment rendered="#{var ne null and var ne '' and var ne 'null'}"><img src="#{var}"  style="width:128px;height:128px"/></s:fragment> 
													<s:fragment rendered="#{var eq null or var eq '' or var eq 'null'}"><img src="#{request.contextPath}/asset/images/inputs/tourupin.jpg"  style="width:128px;height:128px"/></s:fragment> 
                                            	</a>
                                                <em class="closeInputs" onclick="delRecordList(this,#{row})"><img src="#{request.contextPath}/asset/images/clo_04.jpg" /></em>
                                            </div>
                                    	</a4j:repeat>
                                    	</h:panelGroup>
                                            <div class="farmingInputs_add" style="position:static;">
                                            	<input type="button" class="farmingInputs_add3" style="margin-bottom:25px;" onclick="addRecord(this,'seedling')"></input>
                               				</div>
                                      </s:div>
		                        </td>
		                    </tr>
		                    <tr>
		                    	<td class="pr10" align="right" width="110">规范操作</td>
		                        <td colspan="4">
		                        	<span class="bootTextarea">
		                            <textarea class="form-control area_textarea operation_area" id="operationSeedling_#{_index}" name="operation_seedling" style="width:260px;" >#{_var[2]}</textarea>
		                            </span>
		                        </td>
		                    </tr>
		                </table>
		                </div>
	                </a4j:repeat>
	             </h:panelGroup>
                <!-- 成苗时期 结束 -->
                
                
                <input type="hidden" name="dayStr" id="dayStr" value=""/>
                <input type="hidden" name="artStr" id="artStr" value=""/>
                <input type="hidden" name="operationStr" id="operationStr" value=""/>
                <input type="hidden" name="dayAfterStr" id="dayAfterStr" value=""/>
                <input type="hidden" name="artAfterStr" id="artAfterStr" value=""/>
                <input type="hidden" name="operationAfterStr" id="operationAfterStr" value=""/>
                <input type="hidden" name="seedlingStr" id="seedlingStr" value=""/>
                <input type="hidden" name="artSeedlingStr" id="artSeedlingStr" value=""/>
                <input type="hidden" name="operationSeedlingStr" id="operationSeedlingStr" value=""/>
                <input type="hidden" name="workTime" id="workTime" value=""/>
                <input type="hidden" name="artworkTime" id="artworkTime" value=""/>
                <input type="hidden" name="seedlingworkTime" id="seedlingworkTime" value=""/>
                <input type="hidden" name="beforeInputindex" id="beforeInputindex" value=""/>
                <input type="hidden" name="afterInputindex" id="afterInputindex" value=""/>
                <input type="hidden" name="seedlingInputindex" id="seedlingInputindex" value=""/>
                <div class="mes_mailBtn" style="margin:50px 0;">
                    <h:commandButton  data-toggle="modal" data-target="#myModal" id="persist"  styleClass="btn btn-primary" value="提交" action="#{farmingPushHome.persist}" rendered="#{farmingPushHome.addOrUpdate eq 1}" onclick="return checkSubmit();">
                    </h:commandButton>
         			<h:commandButton  data-toggle="modal" data-target="#myModal" id="update" styleClass="btn btn-primary" value="提交"  action="#{farmingPushHome.update}" rendered="#{farmingPushHome.addOrUpdate eq 2}" onclick="return checkSubmit();">
                    </h:commandButton>
 					&#160;<s:link view="/model/ModelDetail.xhtml" styleClass="btn btn-default" value="返回" id="bn_left6" style="margin-left:10px" >
 					<f:param name="plantPlantId" value="#{farmingPushHome.plantId}"/>
 					</s:link>
                </div>

            </div>
             
</h:form>
<!-- Modal -->
<div aria-hidden="false" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="myModal" class="modal fade in w600na" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">提示框</h4>
      </div>
      <div class="modal-body">
       <span id="productMsg">*号部分为必填项！</span>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
        <button type="button" class="btn btn-primary" data-dismiss="modal">确认</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal -->
<div aria-hidden="false" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="myModal2" class="modal fade in w600na" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">提示框</h4>
      </div>
      <div class="modal-body">
       <span id="productMsg2">确定删除？</span>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal" onclick="sureDel(0)">取消</button>
        <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="sureDel(1)">确认</button>
      </div>
    </div>
  </div>
</div>

<div class="farmingInputs_mini modal-dialog modal" id="addInputRecord"  style="z-index:101;position:fixed; left:50%; top:50%; margin-left:-173px; margin-top:-150px;width: 346px;height: 294px;">
	<a4j:form ajaxSubmit="true" id="record_" autocomplete="on">
	<div class="farmingInputs_miniHd"><h3 style="font-size: 14px;border-bottom: 1px solid #e2e2e2;padding-bottom: 15px;padding-left: 15px;">添加投入品</h3><input type="button" class="butt" onclick="jquery('#addInputRecord').hide();jquery('.mark-modal-bl').hide();" style="margin-top:-40px; margin-right:15px;"/></div>
    <div class="farmingInputs_miniBd">
    <table>
	    <tr>
	    	<td width="60" align="right" valign="middle" style="padding-bottom:10px; font-size:14px;">类型</td>
	        <td width="230" style="padding-left:15px; padding-bottom: 20px; padding-top: 10px;">
	            <select class="selectpicker" id="record_type" name="record_type" style="display: none;" onchange="changeInputsType(this.value)">
	            <option value="2">农药</option>
	            <option value="3">肥料</option>
	            <option value="4">其他</option>
	            </select>
	        </td>
	    </tr>
	    <tr>
	    	<td width="60" align="right" valign="middle" style="padding-bottom:17px; font-size:14px;">名称</td>
	        <td width="230" style="padding-left:15px; padding-bottom: 20px; padding-top: 10px;">
	            <select class="selectpicker" id="record_input" name="record_input" style="display: none;" onchange="getUnitInfoName(this.value)">
	            <a4j:repeat value="#{farmingPushHome.inputsList}" var="var">
	            	<option value="#{var[0]}" aa="#{var[1]}">#{var[1]}</option>
	            </a4j:repeat>
	            </select>
	        </td>
	    </tr>
	    <tr>
	    	<td width="60" align="right" valign="middle" style="padding-bottom:20px; font-size:14px;">使用量</td>
	        <td width="230" style="padding-left:15px; padding-bottom: 20px;">
	            <input class="form-control" id="record_used" name="record_used" type="text" style="width:128px;  display:inline; margin-right:5px;" onkeyup="clearNoNum(this)"/><span id="unitNameStr"></span>
	        </td>
	    </tr>
    </table>
    </div>
    
    <div class="farmingInputs_miniFt" style="text-align: center;">
    <h:inputHidden value="#{farmingPushHome.indexId}" id="indexId"/>
    <h:inputHidden value="#{farmingPushHome.indexName}" id="indexName"/>
    <h:inputHidden value="#{farmingPushHome.record_input}" id="record_input"/>
    <h:inputHidden value="#{farmingPushHome.record_used}" id="record_used"/>
    <a4j:commandButton id="submitInputs" value="提交" onclick="if(!saveInput()) return false;document.getElementById('record_:submitInputs').disabled = true;" data="#{farmingPushHome.inputImages}"  oncomplete="saveHui(data);jquery('#addInputRecord').hide();jquery('.mark-modal-bl').hide();document.getElementById('record_:submitInputs').disabled = false;" action="#{farmingPushHome.addInputsRecord()}" styleClass="btn btn-success"/>
    <input class="btn btn-default" onclick="jquery('#addInputRecord').hide();jquery('.mark-modal-bl').hide();" type="button" value="返回" style="margin-left:5px"></input>
    </div>
    </a4j:form>
</div>



  </td> 
  
  <a4j:form id="formid" >

<a4j:jsFunction eventsQueue="mainQueue" name="changeInputs" action="#{farmingPushHome.changeInputs()}" data="#{farmingPushHome.re_input_Str}" oncomplete="changeInputs_next(data)">
	<a4j:actionparam name="record_type" assignTo="#{farmingPushHome.record_type}" />
	<a4j:actionparam name="dataStandard" assignTo="#{farmingPushHome.dataStandard}" />
</a4j:jsFunction>

<a4j:jsFunction name="deleteimg" action="#{farmingPushHome.deleteImg()}" data="#{farmingPushHome.inputImages}" oncomplete="deletdHui(data)">
	<a4j:actionparam name="indexId" assignTo="#{farmingPushHome.indexId}" />
	<a4j:actionparam name="inputIndex" assignTo="#{farmingPushHome.inputIndex}" />
	<a4j:actionparam name="indexName" assignTo="#{farmingPushHome.indexName}" />
</a4j:jsFunction>
<a4j:jsFunction eventsQueue="mainQueue" name="getUnitInfoName" action="#{farmingPushHome.getUnitInfoName()}" data="#{farmingPushHome.unitName}" oncomplete="getUnitInfoName_next(data)">
	<a4j:actionparam name="goodsInfoId" assignTo="#{farmingPushHome.goodsInfoId}" />
</a4j:jsFunction>
</a4j:form>
<div class="mark-modal-bl"></div>
<script type="text/javascript">
//<![CDATA[	
var m3="#{farmingPushHome.chongfu}";

if(m3!="" && m3 != "0"){
	document.getElementById("productMsg").innerHTML = m3;
	   jquery("#myModal").modal('show');
}
jquery(function(){

	// 下拉框 开始
	jquery('.selectpicker').selectpicker();
	

});
var beIndex=jquery("#farmingPush\\:farmingBefore").children(".messageTable_wap").length-1;
function addFarming(index){
	beIndex++;
	var h = jquery("#nullFarming").html();
	jquery("#before_"+index).after(h);
	
	jquery(".bef").eq(1).parents('.messageTable_wap').attr("id","before_"+beIndex);
	jquery(".bef").eq(1).parents('.messageTable_wap').attr("class","messageTable_wap before_div");
	jquery(".bef").eq(1).parents('.messageTable_wap').find(".mr5").attr("id",beIndex);
	jquery(".bef").eq(1).parents('.messageTable_wap').find(".refInpB0").attr("class","farmingInputs_wp refInpB"+beIndex);
	jquery(".bef").eq(1).parents('.messageTable_wap').find(".delete").attr("id",beIndex);
	jquery(".bef").eq(1).parents('.messageTable_wap').find(".dayselect").attr("id","day_before_"+beIndex);
	jquery(".bef").eq(1).parents('.messageTable_wap').find(".artselect").attr("id","art_before_"+beIndex);
	var lastVal = jquery("#before_"+beIndex).prev(".messageTable_wap").find(".dayselect").val();
	jquery("#day_before_"+beIndex).val(Number(lastVal)+1);
	jquery("#day_before_"+beIndex).selectpicker('refresh');
	jquery("#art_before_"+beIndex).selectpicker('refresh');
	jquery(".bef").eq(1).parents('.messageTable_wap').find(".btn-group").eq(1).css('display','none'); 
	jquery(".bef").eq(1).parents('.messageTable_wap').find(".btn-group").eq(3).css('display','none'); 
	jquery("#before_"+beIndex).find('.bef').attr('class','btn btn-success mr5');
	
	
}
var laIndex=jquery("#farmingPush\\:farmingAfter").children(".messageTable_wap").length-1;
function addFarmingAfter(index){
	laIndex++;
	var h = jquery("#nullFarmingAfter").html();
	jquery("#after_"+index).after(h);
	
	jquery(".las").eq(1).parents('.messageTable_wap').attr("id","after_"+laIndex);
	jquery(".las").eq(1).parents('.messageTable_wap').attr("class","messageTable_wap after_div");
	jquery(".las").eq(1).parents('.messageTable_wap').find(".mr5").attr("id",laIndex);
	jquery(".las").eq(1).parents('.messageTable_wap').find(".refInp0").attr("class","farmingInputs_wp refInp"+laIndex);
	jquery(".las").eq(1).parents('.messageTable_wap').find(".delete").attr("id",laIndex);
	jquery(".las").eq(1).parents('.messageTable_wap').find(".dayselect").attr("id","day_after_"+laIndex);
	jquery(".las").eq(1).parents('.messageTable_wap').find(".artselect").attr("id","art_after_"+laIndex);
	var lastVal = jquery("#after_"+laIndex).prev(".messageTable_wap").find(".dayselect").val();
	jquery("#day_after_"+laIndex).val(Number(lastVal)+1);
//	jquery("#day_after_"+laIndex).selectpicker('refresh');
	jquery("#art_after_"+laIndex).selectpicker('refresh');
	jquery(".las").eq(1).parents('.messageTable_wap').find(".btn-group").eq(1).css('display','none'); 
	jquery(".las").eq(1).parents('.messageTable_wap').find(".btn-group").eq(3).css('display','none'); 
	jquery("#after_"+laIndex).find('.las').attr('class','btn btn-success mr5');
	
}


var seedlingIndex=jquery("#farmingPush\\:farmingSeedling").children(".messageTable_wap").length-1;
function addFarmingSeedling(index){
	seedlingIndex++;
	var h = jquery("#nullFarmingSeedling").html();
	jquery("#seedling_"+index).after(h);
	jquery(".seedling").eq(1).parents('.messageTable_wap').attr("id","seedling_"+seedlingIndex);
	jquery(".seedling").eq(1).parents('.messageTable_wap').attr("class","messageTable_wap seedling_div");
	jquery(".seedling").eq(1).parents('.messageTable_wap').find(".mr5").attr("id",seedlingIndex);
	jquery(".seedling").eq(1).parents('.messageTable_wap').find(".refInpS0").attr("class","farmingInputs_wp refInpS"+seedlingIndex);
	jquery(".seedling").eq(1).parents('.messageTable_wap').find(".delete").attr("id",seedlingIndex);
	jquery(".seedling").eq(1).parents('.messageTable_wap').find(".dayselect").attr("id","day_seedling_"+seedlingIndex);
	jquery(".seedling").eq(1).parents('.messageTable_wap').find(".artselect").attr("id","art_seedling_"+seedlingIndex);
	var seedlingIndexVal = jquery("#seedling_"+seedlingIndex).prev(".messageTable_wap").find(".dayselect").val();
	jquery("#day_seedling_"+seedlingIndex).val(Number(seedlingIndexVal)+1);
	jquery("#day_seedling_"+seedlingIndex).selectpicker('refresh');
	jquery("#art_seedling_"+seedlingIndex).selectpicker('refresh');
	jquery(".seedling").eq(1).parents('.messageTable_wap').find(".btn-group").eq(1).css('display','none'); 
	jquery(".seedling").eq(1).parents('.messageTable_wap').find(".btn-group").eq(3).css('display','none'); 
	jquery("#seedling_"+seedlingIndex).find('.seedling').attr('class','btn btn-success mr5');

}




function checkSubmit(){
	var arr=new Array(); //天数--定植前
	var arr2=new Array(); //操作内容
	var arr3=new Array(); //操作规范
	var arr7=new Array(); //操作工时
	
	var arr4=new Array(); //天数--定植后
	var arr5=new Array(); //操作内容
	var arr6=new Array(); //操作规范
	var arr8=new Array(); //操作工时

	var arr11=new Array(); //成苗天数--定植后
	var arr12=new Array(); //成苗操作内容
	var arr13=new Array(); //成苗操作规范
	var arr14=new Array(); //成苗操作工时

	var arr9=new Array(); 
	var arr10=new Array(); 
	var arr15=new Array();
	var flag = true;
	var tishi = true;
	var test = /^\d+(\.\d{1,2})?$/;
	jquery(".before_div").each(function(i){
		
			var val = jquery(this).find(".dayselect").val();
			arr[i] = val;
			var val2 = jquery(this).find(".artselect").val();
			if(val2 == null || val2 == ""){
				document.getElementById("productMsg").innerHTML = "农事内容不能为空！";
				jquery("#myModal").modal('show');
				flag = false;
				return false;
			}
			arr2[i] = val2;
			
			var val3 = jquery(this).find(".operation_area").val();
			if(val3 == null || val3 == ""){
				document.getElementById("productMsg").innerHTML = "规范操作不能为空！";
				jquery("#myModal").modal('show');
				flag = false;
				return false;
			}else if(val3.length > 500){
				document.getElementById("productMsg").innerHTML = "规范操作内容不能超过500字！";
				jquery("#myModal").modal('show');
				flag = false;
				return false;
			}
			arr3[i] = val3;

			var val7 = jquery(this).find(".workTime").val();
			if(val7 == null || val7 == ""){
				document.getElementById("productMsg").innerHTML = "操作工时不能为空！";
				jquery("#myModal").modal('show');
				flag = false;
				return false;
			}else if(!test.test(val7)){
				document.getElementById("productMsg").innerHTML = "操作工时最多保留2位小数！";
				jquery("#myModal").modal('show');
				flag = false;
				return false;
			}else if(val7>99.99 || val7<0){
				document.getElementById("productMsg").innerHTML = "操作工时大于0并且最多为99.99！";
				jquery("#myModal").modal('show');
				flag = false;
				return false;
			}
			
			arr7[i] = val7;

			var val9=jquery(this).find('.mr5').attr('id');
			arr9[i] = val9;
			
	});
	jquery(".after_div").each(function(i){
		var val = jquery(this).find(".dayselect").val();
		if(val == null || val == "" || val>9999 || val<0){
			document.getElementById("productMsg").innerHTML = "选择时间不能为空并且大于0小于9999！";
			jquery("#myModal").modal('show');
			flag = false;
			return false;
		}
		arr4[i] = val;
		var val2 = jquery(this).find(".artselect").val();
		if(val2 == null || val2 == ""){
			document.getElementById("productMsg").innerHTML = "农事内容不能为空！";
			jquery("#myModal").modal('show');
			flag = false;
			return false;
		}
		arr5[i] = val2;
		var val3 = jquery(this).find(".operation_area").val();
		if(val3 == null || val3 == ""){
			document.getElementById("productMsg").innerHTML = "规范操作不能为空！";
			jquery("#myModal").modal('show');
			flag = false;
			return false;
		}else if(val3.length > 500){
			document.getElementById("productMsg").innerHTML = "规范操作内容不能超过500字！";
			jquery("#myModal").modal('show');
			flag = false;
			return false;
		}
		arr6[i] = val3;

		var val8 = jquery(this).find(".workTime").val();
		if(val8 == null || val8 == ""){
			document.getElementById("productMsg").innerHTML = "操作工时不能为空！";
			jquery("#myModal").modal('show');
			flag = false;
			return false;
		}else if(!test.test(val8)){
			document.getElementById("productMsg").innerHTML = "操作工时最多保留2位小数！";
			jquery("#myModal").modal('show');
			flag = false;
			return false;
		}else if(val8>99.99 || val8<0){
			document.getElementById("productMsg").innerHTML = "操作工时大于0并且最多为99.99！";
			jquery("#myModal").modal('show');
			flag = false;
			return false;
		}
		arr8[i] =val8;
		var val10=jquery(this).find('.mr5').attr('id');
		arr10[i] = val10;

		
	});


	jquery(".seedling_div").each(function(i){
		var val = jquery(this).find(".dayselect").val();
		arr11[i] = val;
		var val2 = jquery(this).find(".artselect").val();
		if(val2 == null || val2 == ""){
			document.getElementById("productMsg").innerHTML = "农事内容不能为空！";
			jquery("#myModal").modal('show');
			flag = false;
			return false;
		}
		arr12[i] = val2;
		var val3 = jquery(this).find(".operation_area").val();
		if(val3 == null || val3 == ""){
			document.getElementById("productMsg").innerHTML = "规范操作不能为空！";
			jquery("#myModal").modal('show');
			flag = false;
			return false;
		}else if(val3.length > 500){
			document.getElementById("productMsg").innerHTML = "规范操作内容不能超过500字！";
			jquery("#myModal").modal('show');
			flag = false;
			return false;
		}
		arr13[i] = val3;

		var val8 = jquery(this).find(".workTime").val();
		if(val8 == null || val8 == ""){
			document.getElementById("productMsg").innerHTML = "操作工时不能为空！";
			jquery("#myModal").modal('show');
			flag = false;
			return false;
		}else if(!test.test(val8)){
			document.getElementById("productMsg").innerHTML = "操作工时最多保留2位小数！";
			jquery("#myModal").modal('show');
			flag = false;
			return false;
		}else if(val8>99.99 || val8<0){
			document.getElementById("productMsg").innerHTML = "操作工时大于0并且最多为99.99！";
			jquery("#myModal").modal('show');
			flag = false;
			return false;
		}
		arr14[i] =val8;
		var val10=jquery(this).find('.mr5').attr('id');
		arr15[i] = val10;

		
	});

	
	jquery("#dayStr").val(arr);
	jquery("#artStr").val(arr2);
	jquery("#operationStr").val(arr3);
	jquery("#dayAfterStr").val(arr4);
	jquery("#artAfterStr").val(arr5);
	jquery("#operationAfterStr").val(arr6);
	jquery("#seedlingStr").val(arr11);
	jquery("#artSeedlingStr").val(arr12);
	jquery("#operationSeedlingStr").val(arr13);
	jquery("#workTime").val(arr7);
	jquery("#artworkTime").val(arr8);
	jquery("#seedlingworkTime").val(arr14);
	jquery("#beforeInputindex").val(arr9);
	jquery("#afterInputindex").val(arr10);
	jquery("#seedlingInputindex").val(arr15);

	var ddenv='#{farmingPushHome.ddAndEnv}';
	if(flag && ddenv.split('_')[0] !="" && ddenv.split('_')[0]!=2){
		if(tishi){
			tishi=false;
			if(ddenv.split('_')[0]==1){
				if(confirm('确定将专家推送的种植方法覆盖为企业自定义的种植方法？')){
			 		return true;
			 	}
			}
			if(ddenv.split('_')[0]==3){
				if(confirm('确定将系统推送的种植方法覆盖为企业自定义的种植方法？')){
			 		return true;
			 	}
			}
			
			flag = false;
		 	return false;
		}
	}

	
	
	return flag;
}

var delId = "";
function delFarming(index,type){
	if(type==1){
		//定植前
		delId = "#before_"+index;
	}else if(type==2){
		delId = "#after_"+index;
	}else{
		delId = "#seedling_"+index;
	}
	jquery("#myModal2").modal('show');
}

function sureDel(type){
	if(type == 1){
		jquery(delId).remove();
	}
	delId = "";
}

function addRecord(id,name){
	if(jquery("#record_type")[0].selectedIndex==0){
		jquery("#record_input")[0].selectedIndex=0;
		jquery("#record_input").selectpicker("refresh");
	}else{
		jquery("#record_type")[0].selectedIndex=0
		jquery("#record_type").selectpicker("refresh");				
	}
	jquery("#record_type").trigger("onchange");
	
	jquery("#record_used").val("");
	jquery(".mark-modal-bl").show();
	jquery('#record_\\:indexId').val(jquery(id).parents('.messageTable').find('.mr5').attr('id'));
	jquery('#record_\\:indexName').val(name);
	if(name=='before'){
		jquery('#record_\\:submitInputs').attr('reRender','refInpB'+jquery(id).parents('.messageTable').find('.mr5').attr('id'));
	}else if(name=='after'){
		jquery('#record_\\:submitInputs').attr('reRender','refInp'+jquery(id).parents('.messageTable').find('.mr5').attr('id'));
	}else{
		jquery('#record_\\:submitInputs').attr('reRender','refInp'+jquery(id).parents('.messageTable').find('.mr5').attr('id'));
	}
	
	jquery('#addInputRecord').show();
}

function changeInputs_next(obj){
	jquery("#record_input").empty().append(obj);
	jquery("#record_input").selectpicker("refresh");
	jquery("#record_input").trigger("onchange");
}
function getUnitInfoName_next(obj){
	jquery("#unitNameStr").empty().append(obj);
}

function saveInput(){
	if(jquery('#record_input').val()==null || jquery('#record_input').val()==''){
		alert('名称 为必填项！');
		return false;
	}
	jquery('#record_\\:record_input').val(jquery('#record_input').val());
	jquery('#record_\\:record_used').val(jquery('#record_used').val());
	return true;
}

function saveHui(inUrl){
	var str="";
	var inUrls=inUrl.split(",");
	for (var i = 0; i < inUrls.length; i++) {
		var imgUrl=inUrls[i];
		if(imgUrl==""){
			imgUrl="#{request.contextPath}/asset/images/inputs/tourupin.jpg";
		}
		 str+="<div class='farmingInputs fl'><a class='farmingInputs_pic' href='javascript:;'><img src='"+imgUrl+"' width='128' height='128' /></a> <em class='closeInputs' onclick=delRecordList(this,"+i+")><img src='#{request.contextPath}/asset/images/clo_04.jpg' /></em> </div>";
	}
	if(jquery('#record_\\:indexName').val()=="before"){
		if(jquery('#record_\\:indexId').val()==0){
			jquery('.refInpB'+jquery('#record_\\:indexId').val()).eq(1).find('.fl').remove();
			  jquery('.refInpB'+jquery('#record_\\:indexId').val()).eq(1).prepend(str);
		}else{
			jquery('.refInpB'+jquery('#record_\\:indexId').val()).find('.fl').remove();
			jquery('.refInpB'+jquery('#record_\\:indexId').val()).prepend(str);
			
		}
		
	}else if(jquery('#record_\\:indexName').val()=="after"){
		if(jquery('#record_\\:indexId').val()==0){
			jquery('.refInp'+jquery('#record_\\:indexId').val()).eq(1).find('.fl').remove();
			jquery('.refInp'+jquery('#record_\\:indexId').val()).eq(1).prepend(str);
		}else{
			jquery('.refInp'+jquery('#record_\\:indexId').val()).find('.fl').remove();
			jquery('.refInp'+jquery('#record_\\:indexId').val()).prepend(str);
		}

	}else{
		if(jquery('#record_\\:indexId').val()==0){
			jquery('.refInpS'+jquery('#record_\\:indexId').val()).eq(1).find('.fl').remove();
			jquery('.refInpS'+jquery('#record_\\:indexId').val()).eq(1).prepend(str);
		}else{
			jquery('.refInpS'+jquery('#record_\\:indexId').val()).find('.fl').remove();
			jquery('.refInpS'+jquery('#record_\\:indexId').val()).prepend(str);
		}

	}
}

function delRecordList(ev,index){
	var name="before";
	if(jquery(ev).parents('.messageTable_wap').attr('class').indexOf('before_div')==-1){
		if(jquery(ev).parents('.messageTable_wap').attr('class').indexOf('seedling_div')==-1){
			name="after"
		}else{
			name="seedling"
		}
	}
	deleteimg(jquery(ev).parents('.messageTable').find('.mr5').attr('id'),index,name);
	
}
function deletdHui(inUrl){
	var str="";
		var all=inUrl.split("_");
		var name=all[0];
		var index=all[1];
		if(all.length>2){
				var inUrls=all[2].split(",");
				for (var i = 0; i < inUrls.length; i++) {
					var inUrls2=inUrls[i].split("=");
					var imgUrl=inUrls2[1];
					if(imgUrl==""){
						imgUrl="#{request.contextPath}/asset/images/inputs/tourupin.jpg";
					}
					 str+="<div class='farmingInputs fl'><a class='farmingInputs_pic' href='javascript:;'><img src='"+imgUrl+"' width='128' height='128' /></a> <em class='closeInputs' onclick=delRecordList(this,"+inUrls2[0]+")><img src='#{request.contextPath}/asset/images/clo_04.jpg' /></em> </div>";
				}
			}
		if(name=="before"){
			if(index=="0"){
				jquery('.refInpB'+index).eq(1).find('.fl').remove();
				jquery('.refInpB'+index).eq(1).prepend(str);
			}else{
				jquery('.refInpB'+index).find('.fl').remove();
				jquery('.refInpB'+index).prepend(str);
				
			}
			
		}else if(name=="after"){
			if(index==0){
				jquery('.refInp'+index).eq(1).find('.fl').remove();
				jquery('.refInp'+index).eq(1).prepend(str);
			}else{
				jquery('.refInp'+index).find('.fl').remove();
				jquery('.refInp'+index).prepend(str);
			}
	
		}else{
			if(index==0){
				jquery('.refInpS'+index).eq(1).find('.fl').remove();
				jquery('.refInpS'+index).eq(1).prepend(str);
			}else{
				jquery('.refInpS'+index).find('.fl').remove();
				jquery('.refInpS'+index).prepend(str);
			}
		}
}
function clearNoNum(obj){
	obj.value = obj.value.replace(/[^\d.]/g,"");//清除“数字”和“.”以外的字符  
	obj.value = obj.value.replace(/^\./g,"");  //验证第一个字符是数字而不是. 
	obj.value = obj.value.replace(/\.{2,}/g,"."); //只保留第一个. 清除多余的.   
	obj.value = obj.value.replace(".","$#$").replace(/\./g,"").replace("$#$",".");
}
function changeInputsType(type){
	var dataStandard=jquery("#farmingPush\\:dataDicId").val();
	changeInputs(type,dataStandard);
}
//]]>
</script>
</ui:define>

</ui:composition>

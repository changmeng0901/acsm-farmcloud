<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<f:view xmlns="http://www.w3.org/1999/xhtml"
   xmlns:ui="http://java.sun.com/jsf/facelets"
   xmlns:f="http://java.sun.com/jsf/core"
   xmlns:h="http://java.sun.com/jsf/html"
   xmlns:s="http://jboss.com/products/seam/taglib"
   xmlns:rich="http://richfaces.org/rich"
   xmlns:a="http://richfaces.org/a4j"
   contentType="text/html">
<html  xmlns="http://www.w3.org/1999/xhtml" lang="en" ng-app="app">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
            <meta http-equiv="pragma" content="no-cache"/>
      <title>义田帮手简单实用的农场管理工具</title>
      <link rel="shortcut icon" href="#{request.contextPath}/favicon.ico"/>
   </head>
   <body style="background:#fff;">
     <style>
body {    font-size: 12px;
    color: #000;
    font-family:"微软雅黑"; height:100%;
    line-height: 150%;
    margin: 0;
    padding: 0;
}
a:focus {
    outline:none;
    -moz-outline:none;
} 
html{ height:100%;}
h1, h2, h3, h4, h5, h6, ul, li, dl, dt, dd, form, img, p,input {
    border: medium none;
    list-style-type: none;
    margin: 0;
    padding: 0;
}
a{text-decoration:none;}
.top{ width:100%; height:60px; background:url(#{request.contextPath}/asset/images/top_02.jpg) repeat-x; min-width:1000px;}
.logo{ width:329px; height:60px; float:left;}
.clear{ clear:both;}

/*注册提交样式开始*/
.recbody{ width:100%; min-height:410px; background:url(#{request.contextPath}/asset/images/zctjbg1.jpg) top repeat-x; padding-top:155px;}
.pastable{border-collapse: collapse; margin-top:70px; margin-left:40px; }
.recpss{ width:598px; height:324px; margin-left:auto; margin-right:auto;  background:url(#{request.contextPath}/asset/images/passwordbg.jpg) no-repeat; padding-top:40px;}
.pass_font{ color:#666; font-size:18px; height:33px; line-height:33px;  padding-right:10px; padding-top:8px; padding-bottom:8px; text-align:right;}
.mailinput{ width:186px; padding:0 2px; height:33px; line-height:33px; color:#666; background:url(#{request.contextPath}/asset/images/mailinput.jpg) no-repeat;}
.yzinput{ width:66px; padding:0 2px; height:33px; line-height:33px; color:#666; background:url(#{request.contextPath}/asset/images/yzinput.jpg) no-repeat;}
.edit_reg2{background:url(#{request.contextPath}/asset/images/e-mailbut.jpg) no-repeat; cursor :pointer; width:144px; height:36px;}
/*注册提交样式结束*/
.ts_div2{width:240px; height: 125px; border: 1px solid #81C5E9; margin: 0px auto; padding: 0 15px 15px;  background: url(#{request.contextPath}/asset/images/tck_bg_14.jpg) #ffffff repeat-x scroll center top;}
.dr-mpnl-shadow{background:none;}
.dr-mpnl-pnl{background:none; border:none;}
.dr-mpnl-pnl-b{padding:0;}
.dr-mpnl-shadow{top:0; left:0;}
.rich-picklist-source-items{margin:0;}
#operatePanelContentDiv.dr-mpnl-pnl{background:#fff; border:none;}
.rich-mpnl-body table td{vertical-align:top;}
.rich-fileupload-list-overflow {height:302px!important; *height:306px!important;}
.rich-mpnl_panel .rich-mp-container{background:#fff;}
.tck_ti{  height: 25px; margin-top: 2px; position: relative; right: -13px; *right: -12px; text-align: right; width: 100%;}

.box_back{background:url(#{request.contextPath}/asset/images/bg_png.png) repeat; width:100%; height:100%; position:absolute; z-index:80; display:none;}
</style>
 <!--弹出框开始-->
<div class="box_back" id="login">
    <div id="login2" style="width:60px; height:60px; margin:220px auto 0 auto;"><img src="#{request.contextPath}/asset/images/loginda.gif"/>
  	</div>
</div>
<!--弹出框结束-->     
<rich:modalPanel id="products" autosized="true" height="125"
				width="240" headerClass="modalHeader">
				<div class="ts_div2" id="div2">
				<div class="tck_ti"><a href="#"> <h:outputLink value="#"
					onclick="#{rich:component('products')}.hide(); return false;">
					<img src="#{request.contextPath}/asset/images/close_17.jpg"
						width="20" height="20" onclick="return closeMethod()" />
				</h:outputLink> </a></div>

				<table
					style="width: 100%; margin-top: 25px; table-layout: fixed; margin-left: 15px;">
					<tr>
						<td width="46" align="left"><img
							src="#{request.contextPath}/asset/images/tstc.jpg" width="46"
							height="46" /></td>
						<td align="left"
							style="font-family: '宋体'; color: #000000; font-size: 12px; padding-left: 15px;">
						<span id="productMsg">*号部分为必填项！</span></td>
					</tr>
				</table>
				</div>
</rich:modalPanel>

<rich:modalPanel id="products2" autosized="true" height="125" width="240" headerClass="modalHeader" >
                    	<div class="ts_div2" id="div2">
        		<div class="tck_ti"><a href="#">
        			<h:outputLink value="#"  onclick="#{rich:component('products2')}.hide(); return false;">
                    <img src="#{request.contextPath}/asset/images/close_17.jpg" width="20" height="20"/>
                </h:outputLink>
        		</a></div>
        	 
				<table style="width:100%; margin-top:25px; table-layout:fixed; margin-left:15px;">
                    <tr>
                    	<td width="46" align="left"><img src="#{request.contextPath}/asset/images/tstc.jpg" width="46" height="46" /></td>
                        <td align="left" style="font-family:'宋体'; color:#000000; font-size:12px; padding-left:15px;">
                        	<span id="productMsg2"></span>
                        </td>
                    </tr>
                    <tr>
                    	<td colspan="2" align="center" valign="bottom">
		                <s:button style="width:74px;height:26px;" image="#{request.contextPath}/asset/images/safe.jpg" onclick="return changeUrl()"
		                	/>
		                	&#160;&#160;&#160;<h:outputLink value="#"
                onclick="#{rich:component('products2')}.hide(); return false;"><img class="er_buttton" src="#{request.contextPath}/asset/images/button_17.jpg" width="74" height="26" />
                </h:outputLink>
                        </td>
                    </tr>
                </table>
                </div>
        </rich:modalPanel>
<h:form name="registrationName" id="registrationName">
<div class="recbody">
   	<div class="recpss">
    	<table class="pastable" cellSpacing="0" cellPadding="0" > 
        	<tr>
        		<td rowspan="3" vAlign="top" width="140" align="center"><img src="#{request.contextPath}/asset/images/zcico1.jpg" width="91" height="100"/></td>
                <td class="pass_font" width="85" valign="top">
                	邮箱：
                </td>
                <td colspan="3"><h:inputText class="mailinput"  id="email" value="#{userHome.instance.email}"/></td>
                
                <td style="color:#ff0000; font-size:16px; padding-left:8px;">*</td>

        	</tr>
            <tr>
            	<td class="pass_font" >验证码：</td>
                <td width="66">
                <h:inputText value="#{userHome.verifyCode}" styleClass="yzinput" id="imageCodes"/>
                </td>
                <td>
                    <img id="validCode" src="#{request.contextPath}/ImageCode" width="64" height="32"/>
				</td>
                <td>
                   <a href="#" style="font-family:'宋体'; font-size:12px; color:#319fdc;" onclick="document.getElementById('validCode').src = '#{request.contextPath}/ImageCode?p=' + new Date();return false;">
                                                      看不清？
                  </a></td>
                <td style="color:#ff0000; font-size:16px; padding-left:8px;">*</td>
            </tr>
            <tr>
            	<td align="right" colspan="3" style="padding-top:15px;">
            	<a:commandButton id="update" styleClass="edit_reg2" width="144" height="36" action="#{userHome.findPwd}" onclick="if(!checkSubmit()) return false;" data="#{userHome.chongfu}" oncomplete="checkEnd(data)"/>
            	</td>
            	<td align="right" valign="bottom" colspan="2" ><a href="#{request.contextPath}/login.seam"><font style="color:#ff0000; font-family:'宋体';">返回登录</font></a></td>
            </tr>
      </table>
    </div> 
    <div class="clear"></div>
</div><!--content结束-->
</h:form>
</body>
<script type="text/javascript">
 function checkSubmit(){
		var email = document.getElementById("registrationName:email").value;
		var imageCodes = document.getElementById("registrationName:imageCodes").value;
		var emailReg = /^([a-z0-9A-Z]+[_-|\.]?)+[a-z0-9A-Z]@([a-z0-9A-Z]+(-[a-z0-9A-Z]+)?\.)+[a-zA-Z]{2,}$/;
	    if(email == ""){
			document.getElementById("productMsg").innerHTML = "邮箱不能为空!";
			#{rich:component('products')}.show();
			return false;
		}else if(!emailReg.test(email)){
			document.getElementById("productMsg").innerHTML = "请输入正确的电子邮件地址";
			#{rich:component('products')}.show();
			return false;
		}else if(imageCodes == ""){
			document.getElementById("productMsg").innerHTML = "验证码不能为空！";
			#{rich:component('products')}.show();
			return false;
		}
	    document.getElementById("login").style.height = document.body.clientHeight - 60 +"px ";
	    document.getElementById("login").style.display = "block";
		return true;
}

function closeMethod(){
	   var email = document.getElementById("registrationName:email").value;
	   var imageCodes = document.getElementById("registrationName:imageCodes").value;
	   var emailReg = /^([a-z0-9A-Z]+[_-|\.]?)+[a-z0-9A-Z]@([a-z0-9A-Z]+(-[a-z0-9A-Z]+)?\.)+[a-zA-Z]{2,}$/;
	    if(email == ""){
	    	 document.getElementById("registrationName:email").focus();
			   return false;
		}else if(!emailReg.test(email)){
			document.getElementById("registrationName:email").focus();
			   return false;
		}else if(imageCodes == ""){
			document.getElementById("registrationName:imageCodes").focus();
			   return false;
		}

}

function checkEnd(obj){
	document.getElementById("login").style.display = "none";
	var objstr = obj;
	if(objstr == "noEmail"){
		document.getElementById("registrationName:imageCodes").value = "";
		document.getElementById("registrationName:email").value = "";
		document.getElementById('validCode').src = '#{request.contextPath}/ImageCode?p=' + new Date();
		document.getElementById("productMsg").innerHTML = "邮箱未经注册!";
		#{rich:component('products')}.show();
		return false;
	}else if(objstr == "noVerifyCode"){
		document.getElementById("registrationName:imageCodes").value = "";
		document.getElementById('validCode').src = '#{request.contextPath}/ImageCode?p=' + new Date();
		document.getElementById("productMsg").innerHTML = "验证码不正确!";
		#{rich:component('products')}.show();
		return false;
	}else if(objstr == "noFindPass"){
		document.getElementById("productMsg").innerHTML = "操作失败，请确认信息是否输入正确!";
		#{rich:component('products')}.show();
		return false;
	}else if(objstr == "okFindPass"){
		document.getElementById("productMsg2").innerHTML = "操作成功！马上登录？";
		#{rich:component('products2')}.show();
		return false;
	}
}

function changeUrl(){
	window.location.href="#{request.contextPath}/login.seam";
	return true;
}


 </script>
</html>
</f:view>

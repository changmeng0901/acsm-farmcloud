<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	template="/layout/empty_template.xhtml"	>

<ui:define name="body">
<link href="#{request.contextPath}/asset/css/off.css" rel="stylesheet" type="text/css"></link>
<link href="#{request.contextPath}/asset/css/supply/BuyingLeads.css" rel="stylesheet" type="text/css" />
<!-- #{saleProductInfoHome.attentionList()} -->
 <td valign="top">
       <div class="right_c" style="min-height:30px;">
       		<div class="r_title">
         	<div class="r_t_l cm_r_t_l"><span>销售工具</span><em>&nbsp;&gt;&nbsp;</em><span>供货管理</span><em>&nbsp;&gt;&nbsp;</em><font	size="3">我的供应</font></div>
         </div>
 	   		<br/>
 		<!-- 主体内容 开始 -->
            <div class="attention_content">
                <div class="attent_banner">
                    <img class="ban_bg" src="../images/BuyingLeads_bg1.jpg" />
                    <table width="100%" height="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td>
                                <span class="ban_logo">
                                    <img src="#{saleProductInfoHome.logoUrl}" />
                                </span>
                                <p class="ban_txt">#{saleProductInfoHome.enterpriseName}</p>
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="attent_tab_block">
                    <p class="p_phone">如需要帮助，请联系我们：400-8199-586</p>
                    <ul class="nav nav-tabs" role="tablist" id="myTab">
                        <li class="active">
                            <a href="#pageView" role="tab" data-toggle="tab">浏览量<span class="bg_ll">#{saleProductInfoHome.browseNum}</span></a>
                        </li>
                        <li>
                            <a href="#attention" role="tab" data-toggle="tab">关注度<span class="gz">#{saleProductInfoHome.attenNum}</span></a>
                        </li>
                        <li>
                            <a href="#getPhone" role="tab" data-toggle="tab">获得联系方式<span class="bg_lx">#{saleProductInfoHome.contactNum}</span></a>
                        </li>
                    </ul>
                    
                    <div class="tab-content" style="overflow:auto;">
                    
                        <div class="tab-pane active" id="pageView">
                        <!-- 浏览量 tab-pane -->
                         <h:panelGroup id="browse">
                            <ol class="pageView_list">
                            <a4j:repeat value="#{saleProductInfoHome.browseList}" var="_browse" rowKeyVar="_index">
                                <li class="p_items">
                                <dl class="p_dldl">
                                    <dt class="p_dldt">
                                    	<h:outputText value="" rendered="#{_browse[0] eq '' or _browse[0] eq 'null'}">
		                                <img src="../../images/logo.moren.png" />
		                                </h:outputText>
		                                <h:outputText value="" rendered="#{_browse[0] ne '' and _browse[0] ne 'null'}">
		                                <img src="#{_browse[0]}" />
		                                </h:outputText>
                                        <p><span>#{_browse[3]}</span></p>
                                    </dt>
                                    <dd class="p_dldd">
                                        <table width="100%" height="100%" cellpadding="0" cellspacing="0">
                                            <tr>
                                                <td>
                                                    <p class="txt_company">#{_browse[2]}</p>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <p class="txt_record">浏览了您的&nbsp;<font>#{_browse[1]}</font></p>
                                                </td>
                                            </tr>
                                        </table>
                                    </dd>
                                </dl>
                                </li>
                                </a4j:repeat>
                            </ol>
                            </h:panelGroup>
                            
                            <h:inputHidden value="" rendered="#{saleProductInfoHome.browseList.size() eq 0}" >
                        	<div class="list_nodata">
                            	<img class="no_icon" src="../../images/BuyingLeads_icos_nodata5.jpg" />
                                <p class="tip_txt1">还没有人浏览过您和您的产品信息哦！</p>
                                <p class="tip_txt2">小贴士：完整精致的添加供应信息可以提高用户浏览您产品的机会哦！</p>
                            </div>
                            </h:inputHidden>
                        <!-- 浏览量 tab-pane -->
                        </div>
                       
                        
                        <div class="tab-pane" id="attention">
                        <!-- 关注度 tab-pane -->
                        <h:panelGroup id="atten">
                            <ol class="attention_list">
                            	<a4j:repeat value="#{saleProductInfoHome.attenList}" var="_atten" rowKeyVar="_index">
                                <li class="a_items">
                                <dl class="a_dldl">
                                    <dt class="a_dldt">
                                    	<h:outputText value="" rendered="#{_atten[2] eq '' or _atten[2] eq 'null'}">
		                                <img src="../../images/logo.moren.png" />
		                                </h:outputText>
		                                <h:outputText value="" rendered="#{_atten[2] ne '' and _atten[2] ne 'null'}">
		                                <img src="#{_atten[2]}" />
		                                </h:outputText>
                                    </dt>
                                    <dd class="a_dldd">
                                        <table width="100%" height="100%" cellpadding="0" cellspacing="0">
                                            <tr>
                                                <td height="36">
                                                    <p class="txt_company">#{_atten[1]}</p>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <p class="txt_record">关注了您</p>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <p class="txt_time">#{_atten[3]}</p>
                                                </td>
                                            </tr>
                                        </table>
                                    </dd>
                                </dl>
                                </li>
                                </a4j:repeat>
                            </ol>
                            </h:panelGroup>
                            <h:inputHidden value="" rendered="#{saleProductInfoHome.attenList.size() eq 0}" >
                            <div class="list_nodata">
                            	<img class="no_icon" src="../../images/BuyingLeads_icos_nodata6.jpg" />
                                <p class="tip_txt1">暂无关注！</p>
                                <p class="tip_txt2">小贴士：完善您的农场信息可以提高您的关注度哦！</p>
                            </div>
                            </h:inputHidden>
                        <!-- 关注度 tab-pane -->
                        </div>
                        
                        
                        <div class="tab-pane" id="getPhone">
                        <!-- 获得联系方式 tab-pane -->
                        <h:panelGroup id="contact">
                            <ol class="getPhone_list">
                            	<a4j:repeat value="#{saleProductInfoHome.contactList}" var="_contact" rowKeyVar="_index">
                                <li class="g_items">
                                <dl class="g_dldl">
                                    <dt class="g_dldt">
                                    	<h:outputText value="" rendered="#{_contact[0] eq '' or _contact[0] eq 'null'}">
		                                <img src="../../images/logo.moren.png" />
		                                </h:outputText>
		                                <h:outputText value="" rendered="#{_contact[0] ne '' and _contact[0] ne 'null'}">
		                                <img src="#{_contact[0]}" />
		                                </h:outputText>
                                    </dt>
                                    <dd class="g_dldd">
                                        <div class="pt8 clear">
                                            <p class="txt_company">#{_contact[1]}</p>
                                        </div>
                                        <div class="pt10 clear">
                                            <p class="txt_get fl">获取了您的&nbsp;<font>联系方式</font></p>
                                            <p class="txt_time fr" title="#{_contact[2]}">#{_contact[2]}</p>
                                        </div>
                                    </dd>
                                </dl>
                                </li>
                                </a4j:repeat>
                            </ol>
                            </h:panelGroup>
                            <h:inputHidden value="" rendered="#{saleProductInfoHome.contactList.size() eq 0}" >
                            <div class="list_nodata">
                            	<img class="no_icon" src="../../images/BuyingLeads_icos_nodata7.jpg" />
                                <p class="tip_txt1">暂无企业获取您的联系方式！<br />耐心等待吧！息哦！</p>
                                <p class="tip_txt2">小贴士：完善您的农场信息可以提高您被获取联系方式的机会哦！</p>
                            </div>
                            </h:inputHidden>
                        <!-- 获得联系方式 tab-pane -->
                        </div>
                        
                        <!-- 获得联系方式 tab-pane -->
                         <h:panelGroup id="fy_1" class="fenye" style="display:block;">
                        <table style="margin:auto;">
						<tr>
							<td>
							<h:outputText rendered="#{saleProductInfoHome.totalPages1 gt 0}">
								<table class="pageModel">
									<tbody>
										<tr>
											<td>
												<h:outputText rendered="#{saleProductInfoHome.firstEnable1}">
													<span> <a href="javascript:void(0);" onclick="findInfoByPageNum(1,1);" class="page_prev">首页</a></span> 
												</h:outputText>
												<h:outputText rendered="#{saleProductInfoHome.previousEnable1}">
													<span class="pagePrve"> 
														<a href="javascript:void(0);" onclick="findInfoByPageNum(1,#{saleProductInfoHome.pageInt1-1});">&lt;&lt;</a>
													</span> 
												</h:outputText>
												<h:outputText rendered="#{saleProductInfoHome.numPageList1 ne null}">
													<a4j:repeat value="#{saleProductInfoHome.numPageList1}" var="_page" rowKeyVar="_index">
														<h:outputText rendered="#{saleProductInfoHome.page1 eq _page}">
															<span class="page_num page_Cur"> 
																<a href="javascript:void(0);">#{_page}</a>
															</span>
														</h:outputText>
														<h:outputText rendered="#{saleProductInfoHome.page1 ne _page}">
															<span class="page_num "> 
																<a href="javascript:void(0);" onclick="findInfoByPageNum(1,#{_page});">#{_page}</a>
															</span>
														</h:outputText>
													</a4j:repeat>
												</h:outputText>
												<h:outputText rendered="#{saleProductInfoHome.nextEnable1}">
													<span class="page_next"> 
														<a href="javascript:void(0);" onclick="findInfoByPageNum(1,#{saleProductInfoHome.pageInt1+1});">&gt;&gt;</a>
													</span>
												</h:outputText>
												<h:outputText rendered="#{saleProductInfoHome.lastEnable1}">
													<span id="j_id56"> 
														<a href="javascript:void(0);" onclick="findInfoByPageNum(1,#{saleProductInfoHome.totalPages1});">尾页</a>
													</span> 
												</h:outputText>
												<span> 
													<span class="pageCount" style="border-right: 0">
														<a>共#{saleProductInfoHome.totalPages1}页</a>
													</span>
												</span>
											</td>
										</tr>
									</tbody>
								</table>
								</h:outputText>
							</td>
							<td style="padding-right:10px;">
								<s:button view="#{request.contextPath}/supply/SaleProductInfoList.seam" value="返回" styleClass="btn btn-default" id="fh1" style="margin-left:10px" propagation="none">
									<f:param name="pageNum" value="#{saleProductInfoHome.pageNum}"/>
		                            <f:param name="cpzt" value="#{saleProductInfoHome.cpzt}"/>
		                            <f:param name="gylx" value="#{saleProductInfoHome.gylx}"/>
		                            <f:param name="searchParam" value="#{saleProductInfoHome.searchParam}"/>
								</s:button>
							</td>
						</tr>
					</table> 
					</h:panelGroup>
					<h:panelGroup id="fy_2" class="fenye"  style="display:none;">
                        <table style="margin:auto;">
						<tr>
							<td><h:outputText rendered="#{saleProductInfoHome.totalPages2 gt 0}">
								<table class="pageModel">
									<tbody>
										<tr>
											<td>
												<h:outputText rendered="#{saleProductInfoHome.firstEnable2}">
													<span> <a href="javascript:void(0);" onclick="findInfoByPageNum(2,1);" class="page_prev">首页</a></span> 
												</h:outputText>
												<h:outputText rendered="#{saleProductInfoHome.previousEnable2}">
													<span class="pagePrve"> 
														<a href="javascript:void(0);" onclick="findInfoByPageNum(2,#{saleProductInfoHome.pageInt2-1});">&lt;&lt;</a>
													</span> 
												</h:outputText>
												<h:outputText rendered="#{saleProductInfoHome.numPageList2 ne null}">
													<a4j:repeat value="#{saleProductInfoHome.numPageList2}" var="_page" rowKeyVar="_index">
														<h:outputText rendered="#{saleProductInfoHome.page2 eq _page}">
															<span class="page_num page_Cur"> 
																<a href="javascript:void(0);">#{_page}</a>
															</span>
														</h:outputText>
														<h:outputText rendered="#{saleProductInfoHome.page2 ne _page}">
															<span class="page_num "> 
																<a href="javascript:void(0);" onclick="findInfoByPageNum(2,#{_page});">#{_page}</a>
															</span>
														</h:outputText>
													</a4j:repeat>
												</h:outputText>
												<h:outputText rendered="#{saleProductInfoHome.nextEnable2}">
													<span class="page_next"> 
														<a href="javascript:void(0);" onclick="findInfoByPageNum(2,#{saleProductInfoHome.pageInt2+1});">&gt;&gt;</a>
													</span>
												</h:outputText>
												<h:outputText rendered="#{saleProductInfoHome.lastEnable2}">
													<span id="j_id56"> 
														<a href="javascript:void(0);" onclick="findInfoByPageNum(2,#{saleProductInfoHome.totalPages2});">尾页</a>
													</span> 
												</h:outputText>
												<span> 
													<span class="pageCount" style="border-right: 0">
														<a>共#{saleProductInfoHome.totalPages2}页</a>
													</span>
												</span>
											</td>
										</tr>
									</tbody>
								</table>
								</h:outputText>
							</td>
							<td style="padding-right:10px;">
								<s:button view="#{request.contextPath}/supply/SaleProductInfoList.seam" value="返回" styleClass="btn btn-default" id="fh2" style="margin-left:10px" propagation="none">
									<f:param name="pageNum" value="#{saleProductInfoHome.pageNum}"/>
		                            <f:param name="cpzt" value="#{saleProductInfoHome.cpzt}"/>
		                            <f:param name="gylx" value="#{saleProductInfoHome.gylx}"/>
		                            <f:param name="searchParam" value="#{saleProductInfoHome.searchParam}"/>
								</s:button>
							</td>
						</tr>
					</table> 
					</h:panelGroup>
					<h:panelGroup id="fy_3" class="fenye"  style="display:none;">
					<table style="margin:auto;">
						<tr>
							<td><h:outputText rendered="#{saleProductInfoHome.totalPages3 gt 0}">
								<table class="pageModel">
									<tbody>
										<tr>
											<td>
												<h:outputText rendered="#{saleProductInfoHome.firstEnable3}">
													<span> <a href="javascript:void(0);" onclick="findInfoByPageNum(3,1);" class="page_prev">首页</a></span> 
												</h:outputText>
												<h:outputText rendered="#{saleProductInfoHome.previousEnable3}">
													<span class="pagePrve"> 
														<a href="javascript:void(0);" onclick="findInfoByPageNum(3,#{saleProductInfoHome.pageInt3-1});">&lt;&lt;</a>
													</span> 
												</h:outputText>
												<h:outputText rendered="#{saleProductInfoHome.numPageList3 ne null}">
													<a4j:repeat value="#{saleProductInfoHome.numPageList3}" var="_page" rowKeyVar="_index">
														<h:outputText rendered="#{saleProductInfoHome.page3 eq _page}">
															<span class="page_num page_Cur"> 
																<a href="javascript:void(0);">#{_page}</a>
															</span>
														</h:outputText>
														<h:outputText rendered="#{saleProductInfoHome.page3 ne _page}">
															<span class="page_num "> 
																<a href="javascript:void(0);" onclick="findInfoByPageNum(3,#{_page});">#{_page}</a>
															</span>
														</h:outputText>
													</a4j:repeat>
												</h:outputText>
												<h:outputText rendered="#{saleProductInfoHome.nextEnable3}">
													<span class="page_next"> 
														<a href="javascript:void(0);" onclick="findInfoByPageNum(3,#{saleProductInfoHome.pageInt3+1});">&gt;&gt;</a>
													</span>
												</h:outputText>
												<h:outputText rendered="#{saleProductInfoHome.lastEnable3}">
													<span id="j_id56"> 
														<a href="javascript:void(0);" onclick="findInfoByPageNum(3,#{saleProductInfoHome.totalPages3});">尾页</a>
													</span> 
												</h:outputText>
												<span> 
													<span class="pageCount" style="border-right: 0">
														<a>共#{saleProductInfoHome.totalPages3}页</a>
													</span>
												</span>
											</td>
										</tr>
									</tbody>
								</table>
								</h:outputText>
							</td>
							<td style="padding-right:10px;">
								<s:button view="#{request.contextPath}/supply/SaleProductInfoList.seam" value="返回" styleClass="btn btn-default" id="fh3" style="margin-left:10px" propagation="none">
									<f:param name="pageNum" value="#{saleProductInfoHome.pageNum}"/>
		                            <f:param name="cpzt" value="#{saleProductInfoHome.cpzt}"/>
		                            <f:param name="gylx" value="#{saleProductInfoHome.gylx}"/>
		                            <f:param name="searchParam" value="#{saleProductInfoHome.searchParam}"/>
								</s:button>
							</td>
						</tr>
					</table> 
					</h:panelGroup>
                    </div>
                    
                </div>
            </div>
 <!-- 主体内容 结束 -->
 
        </div>
        <!--右侧结束-->
 </td>
 
<a4j:form>
 <a4j:jsFunction name="findPage1" action="#{saleProductInfoHome.findBrowsePage()}" reRender="browse,fy_1" oncomplete="huidiao()">
	<a4j:actionparam name="page1" assignTo="#{saleProductInfoHome.page1}"/>
</a4j:jsFunction>
 <a4j:jsFunction name="findPage2" action="#{saleProductInfoHome.findAttenPage()}" reRender="atten,fy_2" oncomplete="huidiao()">
	<a4j:actionparam name="page2" assignTo="#{saleProductInfoHome.page2}"/>
</a4j:jsFunction>
 <a4j:jsFunction name="findPage3" action="#{saleProductInfoHome.findContactPage()}" reRender="contact,fy_3" oncomplete="huidiao()">
	<a4j:actionparam name="page3" assignTo="#{saleProductInfoHome.page3}"/>
</a4j:jsFunction>
 
 </a4j:form>
<script type="text/javascript" src="#{request.contextPath}/asset/js/jquery.nicescroll.min.js"></script>
<script type="text/javascript">
//<![CDATA[
    jQuery(document).ready(function() {
    // 计算：浏览量，关注度，获得联系方式，列表数随屏幕大小而显示不同
    offerFn();
    function offerFn(){
        var oBodyW = jQuery('body').width();
		var tab_contentH = jQuery(window).height()-45-22-jQuery('.attent_banner').height()-15-jQuery('.attent_tab_block .nav-tabs').height();
		jQuery('.attent_banner').css({
            'width' : oBodyW-77-60,
            'height': parseInt((oBodyW-77-60)*0.2)
        });
		jQuery('.tab-content .tab-pane,.tab-content').css({
            'width' : oBodyW-77-60,
            //'max-height': tab_contentH-40
        });
		if( oBodyW<1280 ){
			jQuery('.attention_content').addClass('small_attent');
        }else{
        	jQuery('.attention_content').removeClass('small_attent');
        }
    }

   
    jQuery('.tab-content .tab-pane').niceScroll({
		cursorcolor: "#52a9f3"
	});
	
    jQuery('#myTab li').each(function(index, elem) {
    	jQuery(elem).click(function () {
			//alert(1)
			jQuery(window).scrollTop(0)
			jQuery('.tab-content .tab-pane').eq(index ).niceScroll({
				cursorcolor: "#52a9f3"
			});
			jQuery('.tab-content .tab-pane').eq(index ).getNiceScroll().show();	
			//alert(2)
			jQuery('.tab-content .tab-pane').eq( index ).siblings().getNiceScroll().hide();	
			//alert(3)
			jQuery('.tab-content .fenye').each(function(){
				jQuery(this).hide();
			});
			jQuery('.tab-content .fenye').eq(index).show();	
			//alert(2)
			//jQuery('.tab-content .fenye').eq(index ).siblings().hide();
			
		})
    });

	// 窗口改变时，要执行的事件
	jQuery(window).resize(function(){
		offerFn()
	});

	
});       
	
    var pageType;
    function findInfoByPageNum(type,page){
    	pageType = type;
		if(type == '1'){
			findPage1(page);
		}else if(type == '2'){
			findPage2(page);
		}else if(type == '3'){
			findPage3(page);
		}
    }

    function huidiao(){
    	jQuery('.tab-content .fenye').each(function(){
			jQuery(this).hide();
		});
		jQuery('.tab-content .fenye').eq(pageType - 1).show();	
    }
//]]>	
</script>
</ui:define>
</ui:composition>

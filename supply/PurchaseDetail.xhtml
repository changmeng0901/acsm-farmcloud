<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	template="/layout/template_new.xhtml">
<ui:define name="body">
	#{purchaseProductInfoHome.initPDetail()}
	<link type="text/css" rel="stylesheet" href="#{request.contextPath}/asset/css/bootstrap3.min.css" />
	<link type="text/css" rel="stylesheet" href="#{request.contextPath}/asset/css/style.css" />
	<link rel="stylesheet" type="text/css" href="#{request.contextPath}/asset/css/off.css" />
<style>
.star-r32{ float:left;margin-left:5px;height:32px;line-height:32px;color:red;font-size:12px;}
.warn{position: absolute; width: 446px; left: 50%; margin-left: -218px; top: 15%;}
.warn_icon{text-align: center; padding:20px 0;}
.tip{text-align: center;}
</style>
<td valign="top">
<!--右边开始-->
<div class="right_c clear">
<!-- 面包屑导航 开始 -->
<!-- right_c 开始 -->
<div class="right_c" style="min-height:30px; padding-top:20px;">
    <div class="r_title clear" style="margin-top:0; height:48px; border-bottom:1px solid #f1f2f2;">
        <div class="r_t_l fl"><span>销售工具</span><em>&nbsp;&gt;&nbsp;</em><span>买手关注</span><em>&nbsp;&gt;&nbsp;</em><font size="3">求购信息</font></div>
    </div>
    
  
    <!-- 采购详情页开始 -->
    <div class="p-detail">
    <h:panelGroup id="matchPic">
       <table width="100%" cellpadding="0" cellspacing="0">
           <tr>
               <td width="230">
                   <div class="pic">
                   	   <h:outputText rendered="#{purchaseProductInfoHome.purchaseProductInfo.plantImage ne null and purchaseProductInfoHome.purchaseProductInfo.plantImage ne 'null' and purchaseProductInfoHome.purchaseProductInfo.plantImage ne ''}">
	                       <img src="#{purchaseProductInfoHome.purchaseProductInfo.plantImage}" alt="" />
                   	   </h:outputText>
                   	   <h:outputText rendered="#{purchaseProductInfoHome.purchaseProductInfo.plantImage eq null or purchaseProductInfoHome.purchaseProductInfo.plantImage eq 'null' or purchaseProductInfoHome.purchaseProductInfo.plantImage eq ''}">
	                       <img src="../asset/images/851.jpg" alt="" />
                   	   </h:outputText>
                   </div>
               </td>
               <td>                   
                   <table width="100%">
                       <tr>
                           <td><h4 class="kind-name">#{purchaseProductInfoHome.purchaseProductInfo.plantName}</h4></td>
                           <td width="100" align="right">
                           		<div class="my-off" data-toggle="modal" onclick="showBaojia();">
                           			我要报价
                           		</div>
                           </td>
                       </tr>
                    </table>
                    <table width="100%">
                       <tr>
                           <td width="40%">
                               <span style="color:#999;"><img src="#{request.contextPath}/asset/images/supply/kind.png" style="margin-right:5px;" />品种</span>
                               <h:outputText rendered="#{purchaseProductInfoHome.purchaseProductInfo.breedName ne null and purchaseProductInfoHome.purchaseProductInfo.breedName ne '' and purchaseProductInfoHome.purchaseProductInfo.breedName ne 'null'}">
	                               <span>#{purchaseProductInfoHome.purchaseProductInfo.breedName}</span>
                               </h:outputText>
                           </td>
                           <td width="60%" align="right">
                               <span style="color:#999;"><img src="#{request.contextPath}/asset/images/supply/off_icon3.png" style="margin-right:5px;" />发布时间</span>
                               <span>#{purchaseProductInfoHome.purchaseProductInfo.publishDateStr}</span>
                           </td>
                       </tr>
                   </table>
                   <table width="100%" class="d_middle">
                       <tr>
                           <td width="25%">
                            <div class="border">
                               <img src="#{request.contextPath}/asset/images/supply/detail1.jpg" alt="" />
                               <p class="former">价格</p>
                               <h:outputText rendered="#{purchaseProductInfoHome.purchaseProductInfo.minPrice == 0 and purchaseProductInfoHome.purchaseProductInfo.maxPrice == 0}">
	                               <p class="latter">
		                            	面议
		                           </p>
                               </h:outputText>
                               <h:outputText rendered="#{purchaseProductInfoHome.purchaseProductInfo.minPrice != 0 or purchaseProductInfoHome.purchaseProductInfo.maxPrice != 0}">
	                               <p class="latter">
		                              #{purchaseProductInfoHome.getPriceDouble(purchaseProductInfoHome.purchaseProductInfo.minPrice)}~
		                              #{purchaseProductInfoHome.getPriceDouble(purchaseProductInfoHome.purchaseProductInfo.maxPrice)}元/#{purchaseProductInfoHome.purchaseProductInfo.unitName}
		                           </p>
                               </h:outputText>
                               
                               <span class="bar"></span>
                            </div>                             
                          </td>
                           <td width="25%">
                            <div class="border">
                               <img src="#{request.contextPath}/asset/images/supply/detail2.jpg" alt="" />
                               <p class="former">品质要求</p>
                               <h:outputText rendered="#{purchaseProductInfoHome.purchaseProductInfo.standard.name ne null and purchaseProductInfoHome.purchaseProductInfo.standard.name ne '' and purchaseProductInfoHome.purchaseProductInfo.standard.name ne 'null'}">
                                   <p class="latter">
                                   		#{purchaseProductInfoHome.purchaseProductInfo.standard.name}
                                   		<h:outputText rendered="#{purchaseProductInfoHome.purchaseProductInfo.localProduct}">
                                   		<span>地标产品</span>
                                   		</h:outputText> 
                                   </p>
                               </h:outputText>
                               <h:outputText rendered="#{purchaseProductInfoHome.purchaseProductInfo.standard.name eq null or purchaseProductInfoHome.purchaseProductInfo.standard.name eq '' or purchaseProductInfoHome.purchaseProductInfo.standard.name eq 'null'}">
                                   	<p class="latter">无</p> 
                               </h:outputText>
                               <span class="bar"></span> 
                            </div>
                               
                           </td>
                           <td width="25%">
                            <div class="border">
                                <img src="#{request.contextPath}/asset/images/supply/detail3.jpg" alt="" />
                               <p class="former">采购量</p>
                               <p class="latter">
                               <h:outputText rendered="#{purchaseProductInfoHome.purchaseProductInfo.purchaseNumStr ne null and purchaseProductInfoHome.purchaseProductInfo.purchaseNumStr ne ''}">
                               	#{purchaseProductInfoHome.purchaseProductInfo.purchaseNumStr}
                               	#{purchaseProductInfoHome.purchaseProductInfo.uipname}
                               	</h:outputText>
                               	<h:outputText rendered="#{purchaseProductInfoHome.purchaseProductInfo.purchaseNumStr eq null or purchaseProductInfoHome.purchaseProductInfo.purchaseNumStr eq ''}">
                               	面议
                               	</h:outputText>
                               </p>
                               <span class="bar"></span>
                            </div>
                           </td>
                           <td width="25%">
                               <img src="#{request.contextPath}/asset/images/supply/detail4.jpg" alt="" />
                               <p class="former">规格</p>
                               <p class="latter">#{purchaseProductInfoHome.purchaseProductInfo.spec}</p>
                           </td>
                       </tr>
                   </table>
               </td>
               <h:outputText rendered="#{purchaseProductInfoHome.saleProInfoList ne null and purchaseProductInfoHome.saleProInfoList.size() > 0}">
               <td width="230">
                   <div class="circle">
                       <table width="100%">
                           <tr>
                               <td>
                                   <h4 class="boot-selet-100" style="font-size:16px;">
                                   <h:outputText rendered="#{purchaseProductInfoHome.purchaseProductInfo.ownPlantName eq null or purchaseProductInfoHome.purchaseProductInfo.ownPlantName eq 'null' or purchaseProductInfoHome.purchaseProductInfo.ownPlantName eq ''}">
	                                   	<h:selectOneMenu styleClass="selectpicker" id="saleProduct" value="#{purchaseProductInfoHome.saleProductInfoId}" onchange="showSaleProduct1(this.value);">
	                                   		<s:selectItems value="#{purchaseProductInfoHome.saleProInfoList}" var="_sale" itemValue="#{_sale.saleProductInfoId}" label="#{_sale.name}"/>
	                                   	</h:selectOneMenu>
                                   </h:outputText>
                                   <h:outputText rendered="#{purchaseProductInfoHome.purchaseProductInfo.ownPlantName ne null and purchaseProductInfoHome.purchaseProductInfo.ownPlantName ne 'null' and purchaseProductInfoHome.purchaseProductInfo.ownPlantName ne ''}">
                                   		<h:selectOneMenu styleClass="selectpicker" id="saleProduct1" value="#{purchaseProductInfoHome.saleProductInfoId}" onchange="showSaleProduct(this.value);" onclick="saveOldValue();">
	                                   		<f:selectItem itemValue="0" itemLabel="请选择"/>
	                                   		<s:selectItems value="#{purchaseProductInfoHome.saleProInfoList}" var="_sale" itemValue="#{_sale.saleProductInfoId}" label="#{_sale.name}"/>
	                                   	</h:selectOneMenu>
                                   </h:outputText>
                                  </h4>
                               </td>
                               <td>
                               	<h:outputText rendered="#{purchaseProductInfoHome.saleProductInfo ne null}">
                                   <span class="message" style="line-height:31px; color:#398ED6;">详细信息>></span>
                               	</h:outputText>
                               	<h:outputText rendered="#{purchaseProductInfoHome.saleProductInfo eq null}">
                               		<span class="message" style="line-height:31px; color:#398ED6; display: none;">详细信息>></span>
                               	</h:outputText>
                               </td>
                           </tr>
                       </table>
                       <div class="piechart" data-percent="#{purchaseProductInfoHome.totalPercent}">
                          <p class="percent_text" style="position:absolute"></p> 
                       </div>
                       <p style="text-align:center;">#{purchaseProductInfoHome.matchingMsg}</p>
                   </div>
               </td>
               </h:outputText>
               <h:outputText rendered="#{purchaseProductInfoHome.saleProInfoList eq null or purchaseProductInfoHome.saleProInfoList.size() == 0}">
                <td width="230">
                   <div class="circle">
                       <div class="piechart" data-percent="0">
                          <p class="percent_text" style="position:absolute"></p> 
                       </div>
                       <p style="text-align:center;">#{purchaseProductInfoHome.matchingMsg}</p>
                   </div>
               </td>
               </h:outputText>
           </tr>
       </table>
       </h:panelGroup> 
    </div>
       <div class="require">
           <h4 class="subtitle">采购需求</h4>
           <table width="100%" cellpadding="0" cellspacing="0">
               <tr>
                   <td width="100" align="right" style="padding-right:5px;">
                       <img src="#{request.contextPath}/asset/images/supply/require1.png" alt="" />
                   </td>
                   <td width="7%" class="lineBg"></td>
                   <td width="80" align="center" style="color:#999;">
                       	企业名称
                   </td>
                   <td width="7%" class="lineBg"></td>
                   <td style="padding-left:5px;" width="20%">
                   #{purchaseProductInfoHome.purchaseProductInfo.enterpriseName}
                   </td>
                   <td width="2%"></td>
                   <td width="100" align="right" style="padding-right:5px;">
                       <img src="#{request.contextPath}/asset/images/supply/require4.png" alt="" />
                   </td>
                   <td width="7%" class="lineBg">
                   </td>
                   <td width="80" align="center" style="color:#999;">采购时间</td>
                   <td width="7%" class="lineBg"></td>
                   <td style="padding-left:5px;">
                       #{purchaseProductInfoHome.purchaseProductInfo.purchaseTimeStr}
                   </td>
                   
                   <!-- <td width="100" align="right" style="padding-right:5px;">
                       <img src="#{request.contextPath}/asset/images/supply/require2.png" alt="" />
                   </td>
                   <td width="7%" class="lineBg">
                   </td>
                   <td width="80" align="center" style="color:#999;">合作方式</td>
                   <td width="7%" class="lineBg"></td>
                   <td style="padding-left:5px;">
                       #{purchaseProductInfoHome.purchaseProductInfo.cooperateTypeName}
                   </td> -->
               </tr>
                <!-- <tr>
                   <td width="100" align="right" style="padding-right:5px;">
                       <img src="#{request.contextPath}/asset/images/supply/require3.png" alt="" />
                   </td>
                   <td width="7%" class="lineBg"></td>
                   <td width="80" align="center" style="color:#999;">
                       采购周期
                   </td>
                   <td width="7%" class="lineBg"></td>
                   <td style="padding-left:5px;">
                   		#{purchaseProductInfoHome.purchaseProductInfo.cycleTypeName}
                   </td>
                   <td width="2%"></td>
                   <td width="100" align="right" style="padding-right:5px;">
                       <img src="#{request.contextPath}/asset/images/supply/require4.png" alt="" />
                   </td>
                   <td width="7%" class="lineBg">
                   </td>
                   <td width="80" align="center" style="color:#999;">采购时间</td>
                   <td width="7%" class="lineBg"></td>
                   <td style="padding-left:5px;">
                       #{purchaseProductInfoHome.purchaseProductInfo.purchaseTimeStr}
                   </td>
               </tr> -->
                <tr>
                   <td width="100" align="right" style="padding-right:5px;">
                       <img src="#{request.contextPath}/asset/images/supply/require5.png" alt="" />
                   </td>
                   <td width="7%" class="lineBg"></td>
                   <td width="80" align="center" style="color:#999;">
                       	产地要求
                   </td>
                   <td width="7%" class="lineBg"></td>
                   <td style="padding-left:5px;">
                   		#{purchaseProductInfoHome.purchaseProductInfo.areaIds}
                   </td>
                   <td width="2%"></td>
                   <td width="100" align="right" style="padding-right:5px;">
                       <img src="#{request.contextPath}/asset/images/supply/require7.png" alt="" />
                   </td>
                   <td width="7%" class="lineBg"></td>
                   <td width="80" align="center" style="color:#999;">
                       	追溯要求
                   </td>
                   <td width="7%" class="lineBg"></td>
                   <td colspan="7" style="padding-left:5px;">
                   		#{purchaseProductInfoHome.purchaseProductInfo.traceType}
                   </td>
                   <!-- <td width="100" align="right" style="padding-right:5px;">
                       <img src="#{request.contextPath}/asset/images/supply/require6.png" alt="" />
                   </td>
                   <td width="7%" class="lineBg">
                   </td>
                   <td width="80" align="center" style="color:#999;">包装要求</td>
                   <td width="7%" class="lineBg"></td>
                   <td style="padding-left:5px;">
                       #{purchaseProductInfoHome.purchaseProductInfo.packingName}
                   </td> -->
               </tr>
                <!-- <tr>
                   <td width="100" align="right" style="padding-right:5px;">
                       <img src="#{request.contextPath}/asset/images/supply/require7.png" alt="" />
                   </td>
                   <td width="7%" class="lineBg"></td>
                   <td width="80" align="center" style="color:#999;">
                      	 追溯要求
                   </td>
                   <td width="7%" class="lineBg"></td>
                   <td colspan="7" style="padding-left:5px;">
                   		#{purchaseProductInfoHome.purchaseProductInfo.traceType}
                   </td>
               </tr> -->
           </table>
           <div class="out-box">
           	   <h:panelGroup id="matchIf">
               <div class="out">
               	<table>
                   <tr>
                       <td width="250">
                           <div class="out-left">
                               <h4 style="color: #53a9f4;">采购信息</h4>
                               <table>
                                 <tr class="pt20">
                                   <td class="former">品<span style="padding:0 12px;"></span>类</td>
                                   <td>
                                   	<h:outputText rendered="#{purchaseProductInfoHome.purchaseProductInfo.plantName.length() le 9}">
	                                   #{purchaseProductInfoHome.purchaseProductInfo.plantName}
                                   	</h:outputText>
                                   	<h:outputText rendered="#{purchaseProductInfoHome.purchaseProductInfo.plantName.length() gt 9}">
                                   		<p title="#{purchaseProductInfoHome.purchaseProductInfo.plantName}">
	                                   		#{purchaseProductInfoHome.purchaseProductInfo.tenPlantName}
                                   		</p>
                                   	</h:outputText>
                                   </td>
                                 </tr>
                                 <tr>
                                   <td class="former">价<span style="padding:0 12px;"></span>格</td>
                                   <h:outputText rendered="#{purchaseProductInfoHome.priceMatch}">
                                   	<td>
                                   		<h:outputText rendered="#{purchaseProductInfoHome.purchaseProductInfo.minPrice == 0 and purchaseProductInfoHome.purchaseProductInfo.maxPrice == 0}">
                                   		面议
                                   		</h:outputText>
                                   		<h:outputText rendered="#{purchaseProductInfoHome.purchaseProductInfo.minPrice != 0 or purchaseProductInfoHome.purchaseProductInfo.maxPrice != 0}">
                                   		#{purchaseProductInfoHome.getPriceDouble(purchaseProductInfoHome.purchaseProductInfo.minPrice)}~
                               			#{purchaseProductInfoHome.getPriceDouble(purchaseProductInfoHome.purchaseProductInfo.maxPrice)}元/#{purchaseProductInfoHome.purchaseProductInfo.unitName}
                                   		</h:outputText>
                                   </td>
                                   </h:outputText>
                                   <h:outputText rendered="#{!purchaseProductInfoHome.priceMatch}">
                                   	<td class="ff4">
                                   		<h:outputText rendered="#{purchaseProductInfoHome.purchaseProductInfo.minPrice == 0 and purchaseProductInfoHome.purchaseProductInfo.maxPrice == 0}">
                                   		面议
                                   		</h:outputText>
                                   		<h:outputText rendered="#{purchaseProductInfoHome.purchaseProductInfo.minPrice != 0 or purchaseProductInfoHome.purchaseProductInfo.maxPrice != 0}">
                                   		#{purchaseProductInfoHome.getPriceDouble(purchaseProductInfoHome.purchaseProductInfo.minPrice)}~
                               			#{purchaseProductInfoHome.getPriceDouble(purchaseProductInfoHome.purchaseProductInfo.maxPrice)}元/
                               			#{purchaseProductInfoHome.purchaseProductInfo.unitName}
                                   		</h:outputText>
                                   	</td>
                                   </h:outputText>
                                 </tr>
                                 <tr>
                                   <td class="former">品<span style="padding:0 12px;"></span>质</td>
                                   <h:outputText rendered="#{purchaseProductInfoHome.standardMatch}">
                                   		<h:outputText rendered="#{purchaseProductInfoHome.purchaseProductInfo.standard.name ne null and purchaseProductInfoHome.purchaseProductInfo.standard.name ne ''}">
                                   			<td>
                                   			#{purchaseProductInfoHome.purchaseProductInfo.standard.name}
                                   			<h:outputText rendered="#{purchaseProductInfoHome.purchaseProductInfo.localProduct}">
	                                   			<span style="padding-left: 10px;">地标产品</span>
                                   			</h:outputText>
                                   			</td>
                                   		</h:outputText>
                                   		<h:outputText rendered="#{purchaseProductInfoHome.purchaseProductInfo.standard.name eq null or purchaseProductInfoHome.purchaseProductInfo.standard.name eq 'null' or purchaseProductInfoHome.purchaseProductInfo.standard.name eq ''}">
                                   			<td>
                                   			<h:outputText rendered="#{purchaseProductInfoHome.purchaseProductInfo.localProduct}">
                                   				地标产品
                                   			</h:outputText>
                                   			<h:outputText rendered="#{!purchaseProductInfoHome.purchaseProductInfo.localProduct}">
	                                   			无
                                   			</h:outputText>
                                   			</td>
                                   		</h:outputText>
                                   </h:outputText>
                                   <h:outputText rendered="#{!purchaseProductInfoHome.standardMatch}">
                                   		<h:outputText rendered="#{purchaseProductInfoHome.purchaseProductInfo.standard.name ne null}">
                                   			<td class="ff4">
                                   			#{purchaseProductInfoHome.purchaseProductInfo.standard.name}
                                   			<h:outputText rendered="#{purchaseProductInfoHome.purchaseProductInfo.localProduct}">
	                                   			<span style="padding-left: 10px;">地标产品</span>
                                   			</h:outputText>
                                   			</td>
                                   		</h:outputText>
                                   		<h:outputText rendered="#{purchaseProductInfoHome.purchaseProductInfo.standard.name eq null or purchaseProductInfoHome.purchaseProductInfo.standard.name eq 'null'}">
                                   			<td class="ff4">
                                   			无
                                   			</td>
                                   		</h:outputText>
                                   </h:outputText>
                                 </tr>
                                 <tr>
                                   <td class="former">采购日期</td>
                                   <h:outputText rendered="#{purchaseProductInfoHome.purDateMatch}">
                                   	<td>#{purchaseProductInfoHome.purchaseProductInfo.purchaseTimeStr}</td>
                                   </h:outputText>
                                   <h:outputText rendered="#{!purchaseProductInfoHome.purDateMatch}">
                                   	<td class="ff4">#{purchaseProductInfoHome.purchaseProductInfo.purchaseTimeStr}</td>
                                   </h:outputText>
                                 </tr>
                                 <tr>
                                   <td class="former">采<span style="padding:0 3px;"></span>购<span style="padding:0 3px;"></span>量</td>
                                   <h:outputText rendered="#{purchaseProductInfoHome.purchaseNumMatch and purchaseProductInfoHome.ifAllMatch}">
                                   		<td>
                                   			<h:outputText rendered="#{purchaseProductInfoHome.purchaseProductInfo.purchaseNumStr ne null and purchaseProductInfoHome.purchaseProductInfo.purchaseNumStr ne ''}">
		                                   	#{purchaseProductInfoHome.purchaseProductInfo.purchaseNumStr}
		                                   	#{purchaseProductInfoHome.purchaseProductInfo.uipname}
                                   			</h:outputText>
		                                   	<h:outputText rendered="#{purchaseProductInfoHome.purchaseProductInfo.purchaseNumStr eq null or purchaseProductInfoHome.purchaseProductInfo.purchaseNumStr eq ''}">
		                                   	面议
		                                   	</h:outputText>
                                   		</td>
                                   </h:outputText>
                                   <h:outputText rendered="#{!purchaseProductInfoHome.purchaseNumMatch or !purchaseProductInfoHome.ifAllMatch}">
                                   		<td class="ff4">
		                                   	<h:outputText rendered="#{purchaseProductInfoHome.purchaseProductInfo.purchaseNumStr ne null and purchaseProductInfoHome.purchaseProductInfo.purchaseNumStr ne ''}">
		                                   	#{purchaseProductInfoHome.purchaseProductInfo.purchaseNumStr}
		                                   	#{purchaseProductInfoHome.purchaseProductInfo.unitName}
                                   			</h:outputText>
		                                   	<h:outputText rendered="#{purchaseProductInfoHome.purchaseProductInfo.purchaseNumStr eq null or purchaseProductInfoHome.purchaseProductInfo.purchaseNumStr eq ''}">
		                                   	面议
		                                   	</h:outputText>
                                   		</td>
                                   </h:outputText>
                                 </tr>
                                 <tr>
                                   <td class="former">产<span style="padding:0 12px;"></span>地</td>
                                   <h:outputText rendered="#{purchaseProductInfoHome.areaMatch}">
                                   		<h:outputText rendered="#{purchaseProductInfoHome.purchaseProductInfo.areaIds.length() le 9}">
		                                   	<td>
		                                   		#{purchaseProductInfoHome.purchaseProductInfo.areaIds}
		                                   </td>
		                                   </h:outputText>
		                                <h:outputText rendered="#{purchaseProductInfoHome.purchaseProductInfo.areaIds.length() gt 9}">
		                                   	<td>
		                                   		<p title="#{purchaseProductInfoHome.purchaseProductInfo.areaIds}">
		                                   		#{purchaseProductInfoHome.purchaseProductInfo.threeAreas}
		                                   		</p>
		                                   	</td>
		                                </h:outputText>
                                   </h:outputText>
                                   <h:outputText rendered="#{!purchaseProductInfoHome.areaMatch}">
                                   		<h:outputText rendered="#{purchaseProductInfoHome.purchaseProductInfo.areaIds.length() le 9}">
		                                   	<td class="ff4">
		                                   		#{purchaseProductInfoHome.purchaseProductInfo.areaIds}
		                                   </td>
		                                   </h:outputText>
		                                <h:outputText rendered="#{purchaseProductInfoHome.purchaseProductInfo.areaIds.length() gt 9}">
		                                   	<td class="ff4">
		                                   		<p title="#{purchaseProductInfoHome.purchaseProductInfo.areaIds}">
		                                   		#{purchaseProductInfoHome.purchaseProductInfo.threeAreas}
		                                   		</p>
		                                   	</td>
		                                </h:outputText>
                                   </h:outputText>
                                 </tr>
                                 <tr>
                                   <td class="former">追溯要求</td>
                                   <h:outputText rendered="#{purchaseProductInfoHome.tracyMatch}">
                                   		<td>
                                   		#{purchaseProductInfoHome.purchaseProductInfo.traceType}
                                   		</td>
                                   </h:outputText>
                                   <h:outputText rendered="#{!purchaseProductInfoHome.tracyMatch}">
                                   		<td class="ff4">
                                   		#{purchaseProductInfoHome.purchaseProductInfo.traceType}
                                   		</td>
                                   </h:outputText>
                                 </tr>
                               </table>
                           </div>
                       </td>
                       <td width="20"></td>
                       <td width="250">
                           <div class="out-right">
                              <h4 style="color: #5db65c;">供应信息</h4>
                               <table>
                                 <tr class="pt20">
                                   <td class="former">作物分类</td>
                                   <td>
                                   #{purchaseProductInfoHome.saleProductInfo.plantId.name}
                                   </td>
                                 </tr>
                                 <tr>
                                   <td class="former">价<span style="padding:0 12px;"></span>格</td>
                                   <h:outputText rendered="#{purchaseProductInfoHome.priceMatch}">
                                   		<td>
		                                   #{purchaseProductInfoHome.saleProductInfo.minPrice}-
		                                   #{purchaseProductInfoHome.saleProductInfo.maxPrice}
		                                   	元/#{purchaseProductInfoHome.saleProductInfo.unitType.name}
                                   		</td>
                                   </h:outputText>
                                   <h:outputText rendered="#{!purchaseProductInfoHome.priceMatch}">
                                   		<td class="ff4">
		                                   #{purchaseProductInfoHome.saleProductInfo.minPrice}-
		                                   #{purchaseProductInfoHome.saleProductInfo.maxPrice}
		                                   	元/#{purchaseProductInfoHome.saleProductInfo.unitType.name}
                                   		</td>
                                   </h:outputText>
                                   
                                 </tr>
                                 <tr>
                                   <td class="former">品<span style="padding:0 12px;"></span>质</td>
                                   <h:outputText rendered="#{purchaseProductInfoHome.standardMatch}">
                                   	<td>
                                   		#{purchaseProductInfoHome.saleProductInfo.standard.name}
                                   		<h:outputText rendered="#{purchaseProductInfoHome.saleProductInfo.localProduct}">
	                                   		<span style="padding-left: 10px;">地标产品</span>
                                   		</h:outputText>
                                   	</td>
                                   </h:outputText>
                                   <h:outputText rendered="#{!purchaseProductInfoHome.standardMatch}">
                                   	<td class="ff4">
                                   		#{purchaseProductInfoHome.saleProductInfo.standard.name}
                                   		<h:outputText rendered="#{purchaseProductInfoHome.saleProductInfo.localProduct}">
	                                   		<span style="padding-left: 10px;">地标产品</span>
                                   		</h:outputText>
                                   	</td>
                                   </h:outputText>
                                 </tr>
                                 <tr>
                                   <td class="former">供货日期</td>
                                   <h:outputText rendered="#{purchaseProductInfoHome.purDateMatch}">
                                   	<td>
                                   		#{purchaseProductInfoHome.saleProductInfo.supplyDate}
                                   	</td>
                                   </h:outputText>
                                   <h:outputText rendered="#{!purchaseProductInfoHome.purDateMatch}">
                                   	<td class="ff4">
                                   	#{purchaseProductInfoHome.saleProductInfo.supplyDate}
                                   	</td>
                                   </h:outputText>
                                 </tr>
                                 <tr>
                                   <td class="former">供<span style="padding:0 3px;"></span>应<span style="padding:0 3px;"></span>量</td>
                                   <h:outputText rendered="#{purchaseProductInfoHome.purchaseNumMatch and purchaseProductInfoHome.ifAllMatch}">
                                   	<td>
                                   		#{purchaseProductInfoHome.saleProductInfo.surplusNum}
                                   		<s:fragment rendered="#{purchaseProductInfoHome.saleProductInfo.unitType ne null}">#{purchaseProductInfoHome.saleProductInfo.unitType.name}</s:fragment>
                                   		<s:fragment rendered="#{purchaseProductInfoHome.saleProductInfo.unitType eq null}">公斤</s:fragment>
                                   	</td>
                                   </h:outputText>
                                   <h:outputText rendered="#{!purchaseProductInfoHome.purchaseNumMatch or !purchaseProductInfoHome.ifAllMatch}">
                                   	<td class="ff4">
                                   		#{purchaseProductInfoHome.saleProductInfo.surplusNum}
                                   		<s:fragment rendered="#{purchaseProductInfoHome.saleProductInfo.unitType ne null}">#{purchaseProductInfoHome.saleProductInfo.unitType.name}</s:fragment>
                                   		<s:fragment rendered="#{purchaseProductInfoHome.saleProductInfo.unitType eq null}">公斤</s:fragment>
                                   	</td>
                                   </h:outputText>
                                 </tr>
                                 <tr>
                                   <td class="former">产<span style="padding:0 12px;"></span>地</td>
                                   <h:outputText rendered="#{purchaseProductInfoHome.areaMatch}">
                                   	<td>#{purchaseProductInfoHome.findAreaByBaseId(purchaseProductInfoHome.saleProductInfo.baseId)}</td>
                                   </h:outputText>
                                   <h:outputText rendered="#{!purchaseProductInfoHome.areaMatch}">
                                   	<td class="ff4">#{purchaseProductInfoHome.findAreaByBaseId(purchaseProductInfoHome.saleProductInfo.baseId)}</td>
                                   </h:outputText>
                                 </tr>
                                 <tr>
                                   <td class="former">追溯要求</td>
                                   <h:outputText rendered="#{purchaseProductInfoHome.tracyMatch}">
	                                   	<h:outputText rendered="#{purchaseProductInfoHome.saleProductInfo.productRecordId ne null}">
	                                   	<td>
	                                   		有履历
	                                   		<h:outputText rendered="#{purchaseProductInfoHome.hasAgricultural}">
	                                   			;有完整农事记录
	                                   		</h:outputText>
	                                   		<h:outputText rendered="#{purchaseProductInfoHome.hasView}">
	                                   			;有监控
	                                   		</h:outputText>
	                                   	</td>
	                                   </h:outputText>
	                                   <h:outputText rendered="#{purchaseProductInfoHome.saleProductInfo.productRecordId eq null}">
	                                   	<td></td>
	                                   </h:outputText>
                                   </h:outputText>
                                   <h:outputText rendered="#{!purchaseProductInfoHome.tracyMatch}">
                                   		<h:outputText rendered="#{purchaseProductInfoHome.saleProductInfo.productRecordId ne null}">
	                                   	<td class="ff4">
	                                   		有履历
	                                   		<h:outputText rendered="#{purchaseProductInfoHome.hasAgricultural}">
	                                   			;有完整农事记录
	                                   		</h:outputText>
	                                   		<h:outputText rendered="#{purchaseProductInfoHome.hasView}">
	                                   			;有监控
	                                   		</h:outputText>
	                                   	</td>
	                                   </h:outputText>
	                                   <h:outputText rendered="#{purchaseProductInfoHome.saleProductInfo.productRecordId eq null}">
	                                   	<td class="ff4"></td>
	                                   </h:outputText>
                                   </h:outputText>
                                 </tr>
                               </table>
                           </div>

                       </td>
                   </tr>
               </table>
               <h:outputText rendered="#{!purchaseProductInfoHome.ifAllMatch and purchaseProductInfoHome.priceMatch}">
               <div class="tip">
                   <img src="#{request.contextPath}/asset/images/supply/order.png" style="padding-bottom: 3px;" />采购与供应信息单位不同，采购量未列入匹配计算！
               </div>
               </h:outputText>
               <h:outputText rendered="#{!purchaseProductInfoHome.ifAllMatch and !purchaseProductInfoHome.priceMatch}">
               <div class="tip">
                   <img src="#{request.contextPath}/asset/images/supply/order.png" style="padding-bottom: 3px;" />采购与供应信息的价格和采购量单位不同，未列入匹配计算！
               </div>
               </h:outputText>
               <span class="out-btn"><img src="#{request.contextPath}/asset/images/supply/btn.png" alt="" /></span>
           </div>
           </h:panelGroup>
           </div>
       </div>
       <div class="goods">
           <h4 class="subtitle">
               交货信息
           </h4>
           <table width="100%" cellpadding="0" cellspacing="0">
               <!-- <tr>
                   <td width="100" align="right" style="padding-right:20px;">配送方式</td>
                   <td>
                   		#{purchaseProductInfoHome.purchaseProductInfo.deliverName}
                   </td>
               </tr> -->
               <tr>
                   <td width="100" align="right" style="padding-right:20px;">交货地址</td>
                   <td>
                   		#{purchaseProductInfoHome.purchaseProductInfo.deliverAddress eq "null" ?"":purchaseProductInfoHome.purchaseProductInfo.deliverAddress}
                   </td>
               </tr>
               <tr>
                   <td align="right" style="padding-right:20px;">备&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;注</td>
                   <td>
                   		#{purchaseProductInfoHome.purchaseProductInfo.remark eq "null" ?"":purchaseProductInfoHome.purchaseProductInfo.remark }
                   </td>
               </tr>
           </table>
       </div>
       <div class="more_buy" style="padding-left: 10px;">
           <h4 class="subtitle">他还要买</h4>
           <div class="btns">
             <a href="javascript:void(0);" class="leftBtn"></a>
             <a href="javascript:void(0);" class="rightBtn"></a>
           </div> 
       </div>
        <div class="photos" >
            <ul class="imagesList">
            	<a4j:repeat value="#{purchaseProductInfoHome.wantPurList}" var="_want" rowKeyVar="_index" >
            		<li>
                    <h:outputText rendered="#{_want.plantImage ne 'null' and _want.plantImage ne null and _want.plantImage ne ''}">
                    <div class="tup">
            		<a href="#{request.contextPath}/supply/PurchaseDetail.seam?purchaseProductInfoId=#{_want.purchaseProductInfoId}">
                    	<img src="#{request.contextPath}/asset/images/supply/pic-circle.png" class="circleBg" />
		                <img src="#{_want.plantImage}" alt="" />
            		</a>
		            </div>
                    </h:outputText>
            		<h:outputText rendered="#{_want.plantImage eq 'null' or _want.plantImage eq null or _want.plantImage eq ''}">
            		<div class="tup">
            		<a href="#{request.contextPath}/supply/PurchaseDetail.seam?purchaseProductInfoId=#{_want.purchaseProductInfoId}">
            			<img src="#{request.contextPath}/asset/images/supply/pic-circle.png" class="circleBg" />
	                    <img src="../asset/images/851.jpg" />
	                </a>
	                </div>
                    </h:outputText>
                    <p title="#{_want.plantName}">#{_want.plantName}</p>
                </li>
            	</a4j:repeat>
            </ul>
        </div>
       <div style="text-align:center; padding:40px 0;">
	       	<s:button view="/supply/Purchase.seam" value="返回" styleClass="btn btn-default" id="bn_left6" style="margin-left:10px" propagation="none">
				<f:param name="caigou" value="#{purchaseProductInfoHome.caigou}"/>
				<f:param name="pinzhi" value="#{purchaseProductInfoHome.pinzhi}"/>
				<f:param name="baozhuang" value="#{purchaseProductInfoHome.baozhuang}"/>
				<f:param name="chandi" value="#{purchaseProductInfoHome.chandi}"/>
				<f:param name="peisong" value="#{purchaseProductInfoHome.peisong}"/>
				<f:param name="jiageOrder" value="#{purchaseProductInfoHome.jiageOrder}"/>
				<f:param name="caigouTime" value="#{purchaseProductInfoHome.caigouTime}"/>
				<f:param name="ifDB" value="#{purchaseProductInfoHome.ifDB}"/>
				<f:param name="search" value="#{purchaseProductInfoHome.search}"/>
			</s:button>
       </div>
       

    <!-- 采购详情页 结束 -->
</div>
<!-- 模态框 内容开始 -->
    <div class="modal fade" id="myModalAlert" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog warn">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            <h4 class="modal-title" id="myModalLabel">提示</h4>
          </div>
          <div class="modal-body">
            <div class="warn_icon">
                <img src="../asset/images/warn.png" alt="" />
                <input type="hidden" value="" id="aaaa"/>
                <input type="hidden" value="" id="bbbb"/>
            </div> 
            <div class="tip">您选择的的供应信息作物种类与该采购信息品类不匹配,</div> 
            <div class="tip" style="padding-bottom:20px;">得到的匹配结果可能会不准确，确定选择？</div> 
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" onclick="getmatch();">确定</button>
            <button type="button" class="btn btn-default" data-dismiss="modal" onclick="hiddenWarn();">取消</button>
          </div>
        </div>
      </div>
    </div>
    <!-- 模态框 内容结束 -->
<!-- right_c 结束 -->
  <!-- 我要报价 内容开始 -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog" style="position:absolute; width:580px; height:385px; left:50%; margin-left:-290px; top:10%;">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            <h4 class="modal-title" id="myModalLabel">报价信息</h4>
          </div>
          <div class="modal-body">
           <table width="100%" class="pop-td">
             <tr>
               <td class="off-pop">报价企业</td>
               <td>
               	#{purchaseProductInfoHome.findEnterpriseNameById(sessionTake.enterpriseInfoId)}
               </td>
             </tr>
             <tr>
               <td class="off-pop">联&nbsp;&nbsp;系&nbsp;&nbsp;人</td>
               <td>
               	<input id="contactPerson" type="text" class="form-control nw200 fl" value="#{purchaseProductInfoHome.findFarmerNameByUserId(sessionTake.enterpriseInfoId)}"/>
               	<span class="star-r32">*</span>
               </td>
             </tr>
             <tr>
               <td class="off-pop">联系电话</td>
               <td>
               <input id="contactPhone" type="text" class="form-control nw200 fl" value="#{purchaseProductInfoHome.findPhoneByUserId(sessionTake.enterpriseInfoId)}"/>
               <span class="star-r32">*</span>
               </td>
             </tr>
             <tr>
               <td class="off-pop">价&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;格</td>
               <td>
               	<input id="purPrice" type="text" class="form-control nw200 fl" value="" style="color:#bfbfbf;"/>
               	<span class="star-r32">*</span>
               </td>
             </tr>
             <tr>
               <td class="off-pop">备&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;注</td>
               <td><textarea id="purRemark" class="form-control nw300" rows="3"></textarea></td>
             </tr>
           </table>
          </div>
          <div class="modal-footer">
             <button onclick="submitSave();" type="button" class="btn btn-success">提交</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
          </div>
        </div>
      </div>
    </div>
    <!-- 我要报价 内容结束 -->
</div>
<!--右侧结束-->
</td> 
<a4j:form>
<a4j:jsFunction name="submitPriceInfo" action="#{purchaseProductInfoHome.submitPriceInfo()}" data="#{purchaseProductInfoHome.callStr}" oncomplete="if(data == 'succ'){alert('报价成功！');jquery('#myModal').modal('hide')}else{alert('报价失败！')}">
	<a4j:actionparam name="contactPerson" assignTo="#{purchaseProductInfoHome.contactPerson}"/>
	<a4j:actionparam name="contactPhone" assignTo="#{purchaseProductInfoHome.contactPhone}"/>
	<a4j:actionparam name="purPrice" assignTo="#{purchaseProductInfoHome.purPrice}"/>
	<a4j:actionparam name="purRemark" assignTo="#{purchaseProductInfoHome.purRemark}"/>
</a4j:jsFunction>
<a4j:jsFunction name="matchingSalePro" action="#{purchaseProductInfoHome.matchingSalePro()}" reRender="matchPic,matchIf" oncomplete="huidiao()">
	<a4j:actionparam name="saleProId" assignTo="#{purchaseProductInfoHome.saleProductInfoId}"/>
</a4j:jsFunction>
<a4j:jsFunction name="ifVIPaccount" action="#{purchaseProductInfoHome.ifVIPaccount}" data="#{purchaseProductInfoHome.isVIP}" oncomplete="hdaccount(data)">
</a4j:jsFunction>
</a4j:form>
<script type="text/javascript" src="#{request.contextPath}/asset/js/easypiechart.min.js"></script>
<script type="text/javascript">
//<![CDATA[
// IE function.bind polyfill
    if (!Function.prototype.bind) {
        Function.prototype.bind = function (oThis) {
            if (typeof this !== "function") {
                // closest thing possible to the ECMAScript 5 internal IsCallable function
                throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");
            }
 
            var aArgs = Array.prototype.slice.call(arguments, 1),
                fToBind = this,
                fNOP = function () {},
                fBound = function () {
                    return fToBind.apply(this instanceof fNOP && oThis ? this : oThis,
                aArgs.concat(Array.prototype.slice.call(arguments)));
            };
 
            fNOP.prototype = this.prototype;
            fBound.prototype = new fNOP();
 
            return fBound;
        };
    }
           
//页面初始化函数
jquery(document).ready(function(){
	jquery(".selectpicker").selectpicker();
	jquery('#saleProduct1').selectpicker('val',0);
})

function huidiao(){
	jquery(".selectpicker").selectpicker();
	jquery('.piechart').easyPieChart({
       	barColor: '#52a9f3',
        trackColor: '#e1e1e1',
        scaleColor: false,
        lineWidth: 10,
        trackWidth: 6,
        lineCap: 'round',
        onStep: function(from, to, percent) {
            jquery(this.el).find('.percent_text').text(Math.round(percent)+"%");
        }
    });
	jquery(".message").click(function() {
	    jquery(".out-box").stop().animate({width:587},600)
	});
	jquery(".out-btn").click(function() {
	    jquery(".out-box").stop().animate({width:0},600)
	});
}
// 轮播图
var nowing=0;
var imglength=jquery('.imagesList').children().length;
var nw = imglength*122;
if(imglength<=6){
    jquery('.imagesList').css({
        'left':'50%',
        'margin-left':'-'+nw/2+'px'
    })
}else{
	jquery(".imagesList").css("width",nw);  
}
jquery(".leftBtn").click(function(){
    if(imglength<=6){
        return;
    }
    nowing--;
    if(nowing<=0){
        nowing=0;
    }
    jquery('.imagesList').animate({"left":-122*nowing+'px'});
});
jquery(".rightBtn").click(function(){           
    if(imglength<=6){
        return;
    }
    nowing++;
    if(nowing>=imglength-6){
        nowing=imglength-6;
    }
    jquery('.imagesList').animate({"left":-122*nowing+'px'});
});
// 详细信息
jquery(".message").click(function() {
    jquery(".out-box").stop().animate({width:587},600)
});
jquery(".out-btn").click(function() {
    jquery(".out-box").stop().animate({width:0},600)
});

jquery('.piechart').easyPieChart({
           	barColor: '#52a9f3',
            trackColor: '#e1e1e1',
            scaleColor: false,
            lineWidth: 10,
            trackWidth: 6,
            lineCap: 'round',
            onStep: function(from, to, percent) {
                jquery(this.el).find('.percent_text').text(Math.round(percent)+"%");
            }
        });

//提交报价信息
function submitSave(){
	//联系人 contactPerson
	var contactPerson = jquery("#contactPerson").val();
	if(contactPerson.length > 30){
		alert("联系人长度不可超过30！");
		return false;
	}
	if(contactPerson == "" || contactPerson == null){
		alert("联系人不可为空！");
		return false;
	}
	//联系电话 contactPhone
	var contactPhone = jquery("#contactPhone").val();
	var reg = /^[\d-]{0,50}$/;
  	if(contactPhone == ""){
    	alert("联系电话不可为空!");
    	return false;
  	}
  	if(!reg.test(contactPhone)){
     	alert('联系电话只支持数字和"-"!');
     	return false;
  	}
	//价格 purPrice
  	var purPrice = jquery("#purPrice").val();
	var reg1 = new RegExp("^[0-9]*$");
	if(isNaN(purPrice)){
	    alert("价格必须输入数字!");
	    return false;
	}
	if(purPrice == ""){
		alert("价格不许为空!");
    	return false;
	}
	//备注 purRemark
  	var purRemark = jquery("#purRemark").val();
  	if(purRemark.length >= 200){
		alert("备注长度不可超过200！");
		return false;
	}
  	submitPriceInfo(contactPerson,contactPhone,purPrice,purRemark);
}
var oldVal = 0;
function showSaleProduct(value){
	var saleProId = value;
	jquery("#aaaa").val(saleProId);
	if(jquery('#saleProduct1').selectpicker('val') != 0){
		/* jquery(".out-box").css("display",""); */
		jquery("#myModalAlert").modal('show');
	}else{
		jquery(".out-box").stop().animate({width:0},600);
		matchingSalePro(0);
	}
}

function showSaleProduct1(value){
	var saleProId = value;
	matchingSalePro(saleProId);
}

function showBaojia(){
	ifVIPaccount();
}

function hdaccount(data){
	if(data == "yes"){
		jquery("#myModal").modal('show');
	}else{
		alert("请先登录义田帮手平台（farmeasy.cn）完成初始化信息，然后报价。如有问题，请咨询全国服务热线：400－8199－586");
	}
}

function getmatch(){
	var saleProId = jquery("#aaaa").val();
	oldVal = saleProId;
	jquery("#myModalAlert").modal('hide');
	matchingSalePro(saleProId);
}


function saveOldValue(){
	alert(1);
}

function hiddenWarn(){
 	jquery('#saleProduct1').selectpicker('val',oldVal);
	jquery("#myModalAlert").modal('hide');
	/* jquery('#saleProduct1').val(oldVal); */
}


//]]>
</script>
</ui:define>
</ui:composition>
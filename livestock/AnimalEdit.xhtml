<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	template="/layout/template_new.xhtml">

	<ui:define name="body">
	<style>
	 .form-control{
			float:left;
		}
	.all_te{width: 100px;}
	</style>
	
		<td valign="top">
		<h:form id="user" enctype="multipart/form-data">
						<!-- Modal -->
<div aria-hidden="false" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="myModal" class="modal fade in w600na" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">提示框</h4>
      </div>
      <div class="modal-body">
       <span id="spanValue">*号部分为必填项！</span>
        
        
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
        <button type="button" class="btn btn-primary" data-dismiss="modal">确认</button>
      </div>
    </div>
  </div>
</div>
                <div class="right_c">
                	<div class="r_title">
                    	<div class="r_t_l">工作 
                    	&#160;&gt;&#160;&#160;<font size="3">牲畜种类</font><rich:messages styleClass="messages"></rich:messages></div>
                    </div>
                    
                	<div class="all_44">
                        <div class="all_da all_w01">
                        	<table>
                        	<!-- #{animalHome.myKindList()} -->
                                <tr>
                                    <td class="all_te">所属类型：</td>
                                    <td>
										<h:selectOneMenu immediate="true" styleClass="selectpicker" id="speciesId" style="width:146px;" value="#{animalHome.speciesId}">
											<s:selectItems value="#{animalHome.kindList}" var="var" label="#{var.name}" itemValue="#{var.id}" escape="false"/>
										</h:selectOneMenu>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <br></br>
                    	<div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">种名：</td>
                                    <td>
                                       <h:inputText styleClass="form-control nw221" id="name" value="#{animalHome.instance.name}"/>
                                       <span class="finput" style="color:#FF0000">*</span>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="all_da all_w01">
                        	<table>
                            	<tr>
                                	<td class="all_te">英文名：</td>
                                    <td><h:inputText class="form-control nw221" value="#{animalHome.instance.englishName}" /></td>
                            	</tr>
                            </table>
                        </div>
                        <div class="all_da all_w01">
                        	<table>
                            	<tr>
                                	<td class="all_te">学名：</td>
                                    <td><h:inputText class="form-control nw221" value="#{animalHome.instance.scientificName}" /></td>
                            	</tr>
                            </table>
                        </div>
                    	<div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">别名：</td>
                                    <td>
                                        <h:inputText id="suitableCrops" size="45" maxlength="45" value="#{animalHome.instance.aliases}" styleClass="form-control nw221" /> 
                                    </td>
                                </tr>
                            </table>
                        </div>
                       <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">科：</td>
                                    <td>
                                     <h:inputText id="faculty"  value="#{animalHome.instance.faculty}" styleClass="form-control nw221" />
                                    </td>
                                </tr>
                            </table>
                        </div>
                         <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">属：</td>
                                    <td>
                                     <h:inputText id="genus"  value="#{animalHome.instance.genus}"
						styleClass="form-control nw221" />
                                    </td>
                                </tr>
                            </table>
                        </div>
                        
                        
                        <div class="all_da all_w01" style="width:724px;">
                 			<table width="100%" cellpadding="0" cellspacing="0" class="qiyesz_table">
                    			<tr>
                        			<td width="100">
                           				<h3 class="all_te" style="margin-top:10px;">图片：</h3>
                           			</td>
                           			<td>
                           				<span class="baseFile_onload">上传图片
	                             			<s:fileUpload id="img_" size="30"
												accept="image/png,image/jpeg,image/gif"
												contentType="image/png,image/jpeg,image/gif"
												fileName="#{animalHome.instance.imgUrlName}"
												data="#{animalHome.instance.imgUrlByte}" onchange="previewImage('imgUrl_id',this);">
											</s:fileUpload>
										</span>
                           			</td>
                       			</tr>
                       			<tr>
                        			<td width="100"></td>
                        			<td>
		                           		 <!--<em class="fl" style="line-height:27px; width:84px;">&#160;</em>-->
			                            <div class="baseFile_pic194 fl">
			                            	<img src="#{animalHome.instance.imgUrl eq null or animalHome.instance.imgUrl eq ''?'../asset/images/no_picture.png':animalHome.instance.imgUrl}" id="imgUrl_id" width="194" height="94" />
			                            	<p class="pic_stress">图片标准：185x114（像素） 支持格式：jpg,gif,png,jpeg,bmp,3gp</p>
			                            </div>
                          			</td>
                        		</tr>
                   			</table>
                   		</div>
                   		<br />
                   		
                   		<!-- <div class="all_da all_w01" style="width:724px;">
                 			<table width="100%" cellpadding="0" cellspacing="0" class="qiyesz_table">
                    			<tr>
                        			<td width="100">
                           				<h3 class="all_te" style="margin-top:10px;">圆图：</h3>
                           			</td>
                           			<td>
                           				<span class="baseFile_onload">上传图片
	                             			<s:fileUpload id="img_Round" size="30"
												accept="image/png,image/jpeg,image/gif"
												contentType="image/png,image/jpeg,image/gif"
												fileName="#{animalHome.instance.imgRoundUrlName}"
												data="#{animalHome.instance.imgRoundUrlByte}" onchange="previewImage('imgRoundUrl_id',this);">
											</s:fileUpload>
										</span>
                           			</td>
                       			</tr>
                       			<tr>
                        			<td width="100"></td>
                        			<td>
		                           		 <em class="fl" style="line-height:27px; width:84px;">&#160;</em>
			                            <div class="baseFile_pic194 fl">
			                            	<img src="#{animalHome.instance.imgRoundUrl eq null or animalHome.instance.imgRoundUrl eq ''?'../asset/images/no_picture.png':animalHome.instance.imgRoundUrl}" id="imgRoundUrl_id" width="194" height="94" />
			                            	<p class="pic_stress">图片标准：300x300（像素） 支持格式：jpg,gif,png,jpeg,bmp,3gp</p>
			                            </div>
                          			</td>
                        		</tr>
                   			</table>
                   		</div>
                   		<br />
                   		
                   		
                   		<div class="all_da all_w01" style="width:724px;">
                 			<table width="100%" cellpadding="0" cellspacing="0" class="qiyesz_table">
                    			<tr>
                        			<td width="100">
                           				<h3 class="all_te" style="margin-top:10px;">方图：</h3>
                           			</td>
                           			<td>
                           				<span class="baseFile_onload">上传图片
	                             			<s:fileUpload id="img_Square" size="30"
												accept="image/png,image/jpeg,image/gif"
												contentType="image/png,image/jpeg,image/gif"
												fileName="#{animalHome.instance.imgSquareUrlName}"
												data="#{animalHome.instance.imgSquareUrlByte}" onchange="previewImage('imgSquareUrl_id',this);">
											</s:fileUpload>
										</span>
                           			</td>
                       			</tr>
                       			<tr>
                        			<td width="100"></td>
                        			<td>
		                           		 <em class="fl" style="line-height:27px; width:84px;">&#160;</em>
			                            <div class="baseFile_pic194 fl">
			                            	<img src="#{animalHome.instance.imgSquareUrl eq null or animalHome.instance.imgSquareUrl eq ''?'../asset/images/no_picture.png':animalHome.instance.imgSquareUrl}" id="imgSquareUrl_id" width="194" height="94" />
			                            	<p class="pic_stress">图片标准：88x88（像素） 支持格式：jpg,gif,png,jpeg,bmp,3gp</p>
			                            </div>
                          			</td>
                        		</tr>
                   			</table>
                   		</div> -->
                        
                       
                        <div class="all_da all_w01" style="width:724px;">
                        	<table>
                                <tr>
                                    <td class="all_te">形态特征：</td>
                                    <td  colspan="3"><h:inputTextarea id="fastness"  styleClass="form-control nw420" rows="3"  value="#{animalHome.instance.feature}" /></td>
                                </tr>
                            </table>
                        </div>
                         
                         <div class="all_da all_w01" style="width:724px;">
                        	<table>
                            	<tr>
                                	<td class="all_te">生态习性：</td>
                                    <td  colspan="3"><h:inputTextarea  styleClass="form-control nw420" rows="3" value="#{animalHome.instance.habits}" /></td>
                            	</tr>
                            </table>
                        </div>
                        <div class="all_da all_w01" style="width:724px;">
                        	<table>
                                <tr>
                                    <td class="all_te">营养价值：</td>
                                    <td  colspan="3"><h:inputTextarea id="root"  styleClass="form-control nw420" rows="3"  value="#{animalHome.instance.nutritiveValue}" /></td>
                                </tr>
                            </table>
                        </div>
                          <div class="all_da all_w01" style="width:724px;">
                        	<table>
                                <tr>
                                    <td class="all_te">食用方法：</td>
                                    <td  colspan="3">
										<h:inputTextarea name="content" class="form-control nw420" style="height:400px" value="#{animalHome.content}" id="content"/>
									</td>
                                </tr>
                            </table>
                        </div>
                        <div class="clear"></div>
                   </div>
                         <table width="180" style="margin:35px auto 0 auto;">
						<tr>
							<td>
							    <ui:fragment rendered="#{animalHome.instance.id==null || animalHome.instance.id==''}">
									<h:commandButton id="persist1" style="float:left;" value="提交" styleClass="btn btn-primary" action="#{animalHome.persist}"  onclick="return checkSubmit()"/>
							    </ui:fragment>
							    <ui:fragment rendered="#{animalHome.instance.id !=null &amp;&amp; animalHome.instance.id !=''}">
							  		<h:commandButton id="persist2" style="float:left;" value="修改" styleClass="btn btn-primary" action="#{animalHome.update}"  onclick="return checkSubmit()"/>
							    </ui:fragment>
							
		    			        &#160;<s:button view="/livestock/AnimalList.seam" value="返回" styleClass="btn btn-default" id="bn_left6" style="margin-left:10px" />
                            </td>
						</tr>
                   </table> 

				<!--入库订单列表结束-->
                    <div class="clear"></div>
                </div><!--right_c结束-->
                <div class="clear"></div>
    <!--右边结束-->
    
    </h:form>
  <script type="text/javascript" src="#{request.contextPath}/asset/js/kindeditor/kindeditor.js"></script>  
<script type="text/javascript">
//<![CDATA[
           var editor;
KindEditor.ready(function(K) {
	editor = K.create('textarea[name="user:content"]', {
		resizeType : 1,
		allowPreviewEmoticons : false,
		uploadJson : '#{request.contextPath}/asset/js/kindeditor/upload_json.jsp?directoryType=15&businessType=3&enterpriseId=' + #{sessionTake.getEnterpriseInfoId()},
		allowImageUpload : true,
		
		items : [
			'source','|','fontname', 'fontsize', '|', 'forecolor', 'hilitecolor', 'bold', 'italic', 'underline',
			'removeformat', '|', 'justifyleft', 'justifycenter', 'justifyright', 'insertorderedlist','image',
			'insertunorderedlist']
	});
});
           
           
        var promptMessage = "#{animalHome.promptMessage}";
		if(promptMessage != ""){
			document.getElementById("spanValue").innerHTML = promptMessage;
			jquery("#myModal").modal('show');
		}
function previewImage(id,file){
	var MAXWIDTH  = 0; 
	var MAXHEIGHT = 0;
	MAXWIDTH  = document.getElementById(id).offsetWidth; 
	MAXHEIGHT = document.getElementById(id).offsetHeight;
	var div = document.getElementById(id);
	if (file.files && file.files[0]){
		var img;
		div.innerHTML = '<img class=imghead id='+id+'>';
		img = document.getElementById(id);
		img.onload = function(){
	        var rect = clacImgZoomParam(MAXWIDTH, MAXHEIGHT, img.offsetWidth, img.offsetHeight);
	        img.width  =  rect.width;
	        img.height =  rect.height;
	        img.style.marginTop = rect.top+'px';
		}
		var reader = new FileReader();
		reader.onload = function(evt){
			img.src = evt.target.result;
		}
		reader.readAsDataURL(file.files[0]);
  	}else{ //兼容IE
    	var sFilter='filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale,src="';
		file.select();
		var src = document.selection.createRange().text;
		var img;
    	div.innerHTML = '<img class=imghead id='+id+'>';
        img = document.getElementById(id);
        img.filters.item('DXImageTransform.Microsoft.AlphaImageLoader').src = src;
        var rect = clacImgZoomParam(MAXWIDTH, MAXHEIGHT, img.offsetWidth, img.offsetHeight);
        status =('rect:'+rect.top+','+rect.left+','+rect.width+','+rect.height);
        div.innerHTML = "<div class=divhead id='"+id+"' style='position:absolute; width:"+rect.width+"px;height:"+rect.height+"px;margin-top:"+rect.top+"px;"+sFilter+src+"\"'></div>";
	}
}

function checkSubmit(){
   var a1 =  document.getElementById("user:name").value;
   if(a1 == ""){
	   document.getElementById("spanValue").innerHTML = "种类名称不能为空";
	   jquery("#myModal").modal('show');return false;
   }
}
function closeMethod(){
	var a1 =  document.getElementById("user:name");
    if(a1.value==""){
   		a1.focus();
   }
}



//]]>
</script>

<script type="text/javascript">
			  window.onload = function () {
			    jquery('.selectpicker').selectpicker();

			    jquery('.ke-container-default').css('width','620px');
			    
			  };
			  
			</script>
            </td> 
	</ui:define>

</ui:composition>

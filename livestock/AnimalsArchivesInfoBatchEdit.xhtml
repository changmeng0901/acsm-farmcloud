<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	template="/layout/template_new.xhtml">

	<ui:define name="body">
	<script type="text/javascript">
document.getElementById("selectBaseDiv").style.display="none";
</script>
<link rel="stylesheet" type="text/css" href="#{request.contextPath}/asset/css/skinBlue.css"/>
<link type="text/css" rel="stylesheet" href="#{request.contextPath}/asset/css/livestock/yangzhi1.css" />
	<script type="text/javascript" src="#{request.contextPath}/asset/js/icheck.js"></script>
	<style>
.farmingInputs{ float:left;width:128px;height:128px;position:relative; margin:10px 10px 5px 0;}
.farmingInputs .closeInputs{ position:absolute; right:0; top:0;}
</style>
<!-- #{animalsArchivesInfoHome.allNull()}-->
<!-- #{animalsArchivesInfoHome.beginMethods()}-->
    <td valign="top">
            <!-- right_c 开始 -->
            <h:form id="all">
            <div class="right_c" style="min-height:30px; padding-bottom:20px;">
                <div class="r_title clear" style="margin-top:0; padding-top:20px;">
                    <div class="r_t_l fl">数字农场&#160;&gt;&#160;&#160;<font size="3">养殖档案</font></div>
                </div>
                <!-- 基本信息 开始 -->
                <div class="baseTtlH3 mt10 clear" style="margin:20px 30px 0">
					 <h3 style="background:none; font-size:16px;line-height:0px;">基本信息</h3>             
                </div>
                <table class="messageTable" width="100%" cellpadding="0" cellspacing="0" style="width:734px; margin:40px auto 20px; font-size:12px;">
                	<tr>
                    	<td class="pr10" align="right" width="110">所属类型</td>
                        <td width="262">
                        	<span class="bootSelt21">
                         		<h:selectOneMenu immediate="true" styleClass="selectpicker" id="myanimalSpeciesId" style="width:146px;" value="#{animalsArchivesInfoHome.myanimalSpeciesId}" onchange="myType(this.value)">
									<s:selectItems value="#{animalsArchivesInfoHome.animalSpeciesList}" var="var" label="#{var.name}" itemValue="#{var.id}" escape="false"/>
								</h:selectOneMenu>
                            </span>
                        </td>
                        <td class="pr10" align="right" width="110">品种名称</td>
                        <td>
                        	<span class="bootSelt21">
                            <h:panelGroup id="vOfsId1">
                            	<h:selectOneMenu immediate="true" styleClass="selectpicker" id="myanimalId" style="width:146px;display:none;" value="#{animalsArchivesInfoHome.myanimalId}" onchange="searchTunnel(this.value);">
									<s:selectItems value="#{animalsArchivesInfoHome.varietiesLis}" var="var" label="#{var.name}" itemValue="#{var.id}" escape="false"/>
								</h:selectOneMenu>
					        </h:panelGroup>
                            </span>
                        </td>
                    </tr>
                     <tr>                   	
                        <td class="pr10" align="right" width="110">所在圈舍</td>
                        <td>
                        	<span class="bootSelt21">
	                        	 <h:panelGroup id="tiiPanel">
									<select  id="tunnelInfoId" class="selectpicker"  data-live-search="true" style="display:none;" multiple="multiple" onchange="searchNumber()">
										<a4j:repeat value="#{animalsArchivesInfoHome.animalTunnelList}" var="var">
											<option value="#{var.tunnelInfoId.tunnelInfoId}">#{var.tunnelInfoId.tunnelName}</option>
										</a4j:repeat>
									</select>
								</h:panelGroup>
								<h:inputHidden id="tunnelInfoIdHidden" value="#{animalsArchivesInfoHome.tunnelIds}" />
                            </span>
                        </td>
                        <td class="pr10" align="right" width="110">编号</td>
                        <td width="262">
                        	<span class="bootSelt21">
                        		<h:panelGroup id="enPanel">
	                            	<select  id="eartagNumber" class="selectpicker"  data-live-search="true" style="display:none;" multiple="multiple">
										<a4j:repeat value="#{animalsArchivesInfoHome.animalNumberList}" var="var">
											<option value="#{var.id}">#{var.eartagNumber}</option>
										</a4j:repeat>
									</select>
								</h:panelGroup>
								<h:inputHidden id="animalsArchivesIdsHidden" value="#{animalsArchivesInfoHome.animalsArchivesIds}" />
                            </span>
                        </td>
                    </tr>                  
                </table>
                <!-- 基本信息 结束 -->
                
                <!-- 兽药记录 免疫记录 饲养信息 开始  -->
                <ul class="nav nav-tabs" role="tablist" id="myTab">
                    <li class="active"><a href="#home" role="tab" data-toggle="tab">兽药记录</a></li>
                    <li><a href="#profile" role="tab" data-toggle="tab">免疫记录</a></li>
                    <li><a href="#messages" role="tab" data-toggle="tab">饲养信息</a></li>
                    <li><a href="#chulanjl" role="tab" data-toggle="tab">出栏记录</a></li>
                    <li><a href="#tuzaijl" role="tab" data-toggle="tab">屠宰记录</a></li>
                </ul>
                <div class="tab-content" style="margin-top:24px; position:relative;">
                    <div class="tab-pane active" id="home">
                    <!-- 兽药记录表格 开始  -->
					<a href="javascript:;" onclick="tianjiaVmr()" class="btn btn-success" data-toggle="modal" data-target="#myModal" style="position:absolute; right:0; top:-62px;" >添加</a>
                    <h:panelGroup id="myVmr">                    
                    <table class="tableModel" width="100%" cellpadding="0" cellspacing="0">
                    <thead>
                    <tr>
                        <th width="10%">兽药名称</th>
                        <th width="10%">生产日期</th>
                        <th width="8%">有效期</th>
                        <th width="10%">发病原因</th>
                        <th width="10%">诊疗结果</th>
                        <th width="8%">用药时间</th>
                        <th width="8%">停药时间</th>
                        <th width="10%">操作人</th>
                        <th width="12%">用药剂量</th>
                        <th width="7%">休药期</th>
                        <th width="7%">备注</th>
                    </tr>
                    </thead>
                    <tbody>
                   		<a4j:repeat value="#{animalsArchivesInfoHome.vmrList}"  var="obj" rowKeyVar="_index">
                    		<tr class="odd">
                    			<td>#{obj.veterinaryMedicineInfoId.name}</td>
                    			<td>
                    				<h:outputText value="#{obj.produceTime}">
										<s:convertDateTime type="both" dateStyle="short" pattern="yyyy-MM-dd" />
						   			</h:outputText>
		                        </td>
		                      	<td>#{obj.validity}</td>
                    			<td>#{obj.etiology}</td>
		                        <td>#{obj.clinicResults}</td>
		                        <td>
		                       		<h:outputText value="#{obj.medicationTime}">
										<s:convertDateTime type="both" dateStyle="short" pattern="yyyy-MM-dd" />
						   			</h:outputText>
		                        </td>
		                        <td>
		                       		<h:outputText value="#{obj.withdrawalTime}">
										<s:convertDateTime type="both" dateStyle="short" pattern="yyyy-MM-dd" />
						   			</h:outputText>
		                        </td>
		                        <td>#{obj.farmerInfoId.name}</td>
		                        <td>#{obj.amount}</td>
		                        <td>#{obj.withdrawalPeriod}</td>
		                        <td>
									<a4j:commandButton id="vmrdelete" title="删除" styleClass="list_delete" action="#{animalsArchivesInfoHome.deleteVeterinaryMedicine(_index)}" reRender="myVmr"/>
		                        	<a4j:commandButton id="vmrupdate" title="编辑"  styleClass="list_edit" action="#{animalsArchivesInfoHome.loadVeterinaryMedicine(_index)}" oncomplete="openvmr(#{_index})" reRender="vmrbianji"/>
		                        
		                        </td>
                    		</tr>
                    	</a4j:repeat>
                    </tbody>
                    </table>
                    </h:panelGroup>
                    <!-- 兽药记录表格 结束  -->
                    </div>
                    <div class="tab-pane" id="profile">
                    <!-- 免疫记录表格 开始  -->
					<a href="javascript:;" onclick="tianjiaVr()" class="btn btn-success" data-toggle="modal" data-target="#myModal_myjl" style="position:absolute; right:0; top:-62px;">添加</a>
                    <h:panelGroup id="myVr">                    
                    <table class="tableModel" width="100%" cellpadding="0" cellspacing="0">
                    <thead>
                    <tr>
                        <th width="13%">疫苗名称</th>
                        <th width="13%">生产日期</th>
                        <th width="13%">有效期</th>
                        <th width="12%">免疫时间</th>
                        <th width="12%">操作人</th>
                        <th width="13%">免疫方法</th>
                        <th width="12%">使用剂量</th>
                        <th width="12%">备注</th>
                    </tr>
                    </thead>
                    <tbody>
                    <a4j:repeat value="#{animalsArchivesInfoHome.vrList}"  var="obj" rowKeyVar="_index">
                    
	                    <tr class="odd">
	                        <td>#{obj.vaccineInfoId.name}</td>
	                        <td>
                   				<h:outputText value="#{obj.produceTime}">
									<s:convertDateTime type="both" dateStyle="short" pattern="yyyy-MM-dd" />
					   			</h:outputText>
	                        </td>
	                        <td>#{obj.validity}</td>
	                         <td>
                   				<h:outputText value="#{obj.immuneTime}">
									<s:convertDateTime type="both" dateStyle="short" pattern="yyyy-MM-dd" />
					   			</h:outputText>
	                        </td>
	                        <td>#{obj.farmerInfoId.name}</td>
	                        <td>#{obj.immuneMethod}</td>
	                        <td>#{obj.amount}</td>
	                        <td>
								<a4j:commandButton id="vrdelete" title="删除" styleClass="list_delete" action="#{animalsArchivesInfoHome.deleteVaccine(_index)}" reRender="myVr"/>
	                        	<a4j:commandButton id="vrupdate" title="编辑"  styleClass="list_edit" action="#{animalsArchivesInfoHome.loadVaccine(_index)}" oncomplete="openvr(#{_index})" reRender="vrbianji"/>
	                        </td>
	                    </tr>
                    </a4j:repeat>
                    </tbody>
                    </table>
                    </h:panelGroup>
                    <!-- 免疫记录表格 结束  -->
                    </div>
                    <div class="tab-pane" id="messages">
                    <!-- 饲养信息表格 开始  -->
                    <a href="javascript:;" onclick="tianjiaAfr()" class="btn btn-success" data-toggle="modal" data-target="#myModal_syxx" style="position:absolute; right:0; top:-62px;">添加</a>
                    <h:panelGroup id="myAfr">
                    <table class="tableModel" width="100%" cellpadding="0" cellspacing="0">
                    <thead>
                    <tr>
                        <th width="12%">饲料名称</th>
                        <th width="11%">生产日期</th>
                        <th width="11%">有效期</th>
                        <th width="11%">禽畜状态</th>
                        <th width="11%">开始使用时间</th>
                        <th width="11%">结束使用时间</th>
                        <th width="11%">总用量</th>
                        <th width="11%">操作人</th>
                        <th width="11%">备注</th>
                    </tr>
                    </thead>
                    <tbody>
                    <a4j:repeat value="#{animalsArchivesInfoHome.afrList}"  var="obj" rowKeyVar="_index">
	                    <tr class="odd">
	                        <td>#{obj.animalFeedInfoId.name}</td>
	                        <td>
                   				<h:outputText value="#{obj.produceTime}">
									<s:convertDateTime type="both" dateStyle="short" pattern="yyyy-MM-dd" />
					   			</h:outputText>
	                        </td>
	                        <td>#{obj.validity}</td>
	                        <td>#{obj.animalStatusId.name}</td>
	                         <td>
                   				<h:outputText value="#{obj.useBeginTime}">
									<s:convertDateTime type="both" dateStyle="short" pattern="yyyy-MM-dd" />
					   			</h:outputText>
	                        </td>
	                        <td>
                   				<h:outputText value="#{obj.useEndTime}">
									<s:convertDateTime type="both" dateStyle="short" pattern="yyyy-MM-dd" />
					   			</h:outputText>
	                        </td>
	                        <td>#{obj.amount}</td>
	                        <td>#{obj.farmerInfoId.name}</td>
	                        <td>
								<a4j:commandButton id="afrdelete" title="删除" styleClass="list_delete" action="#{animalsArchivesInfoHome.deleteAnimalFeed(_index)}" reRender="myAfr"/>
	                        	<a4j:commandButton id="afrupdate" title="编辑"  styleClass="list_edit" action="#{animalsArchivesInfoHome.loadAnimalFeed(_index)}" oncomplete="openafr(#{_index})" reRender="afrbianji"/>
	                        </td>
	                    </tr>
	                </a4j:repeat>
                    </tbody>
                    </table>
                    </h:panelGroup>
                    <!-- 饲养信息表格 结束  -->
                    </div>
                    <div class="tab-pane" id="chulanjl">
                    <!-- 出栏记录表格 开始  -->
                    <table class="messageTable" width="100%" cellpadding="0" cellspacing="0" style="width:734px; margin:40px auto 20px; font-size:12px;">
                	<tr>
                    	<td class="pr10" align="right" width="110">出栏时间</td>
                        <td width="262">
                        	<span class="bootData21">
                                <div class="input-append date form_datetime " style="position:relative;" >
								<h:inputText  readonly="#{facesContext.renderResponse}" id="outfencesTimeId" styleClass="new_time" value="#{animalsArchivesInfoHome.instance.outfencesTime}" style="height:34px;"/>
                                <span class="add-on" style="position:absolute; right:10px; top:10px;"><i class="icon-th" style="margin:0;"></i></span>
                                </div>
								<h:inputHidden value="#{animalsArchivesInfoHome.instance.outfencesTime}" id="outfencesTimeId2"/>  
							</span>
                        </td>
                        <td class="pr10" align="right" width="110">检疫部门</td>
                        <td>
                        	<span class="bootSelt21">
                            	<h:inputText styleClass="form-control" style="width:220px;" value="#{animalsArchivesInfoHome.instance.outfencesAqsiqDept}" id="outfencesAqsiqDeptId"/>
                            </span>
                        </td>
                    </tr>
                    <tr>
                    	<td class="pr10" align="right" width="110">检测内容</td>
                        <td colspan="3">
                        	<span class="bootTextarea"><h:inputTextarea styleClass="form-control area_textarea" value="#{animalsArchivesInfoHome.instance.outfencesAqsiqContent}" id="outfencesAqsiqContentId"></h:inputTextarea></span>
                        </td>
                    </tr>
                    <tr>
                        <td width="100" align="right"><span class="bootTxt21 type1">检疫结果</span></td>
                        <td colspan="3">
                            <ul class="baseRadio_list" style="margin-top:10px; font-size:12px;">
                                <li><input type="radio" class="iRadio" name="testRadio" value="1"/><label class="iRadioLable" style="width:auto; max-width:auto;">合格</label></li>
                                <li><input type="radio" class="iRadio" name="testRadio" checked="checked" value="2"/><label class="iRadioLable" style="width:auto; max-width:auto;">不合格</label></li>
                            	<h:inputHidden id="outType" value="#{animalsArchivesInfoHome.instance.outfencesAqsiqResults}" />
                            </ul>
                        </td>
                    </tr>
                    <tr>
                        <td width="100" align="right"><span style="padding-top: 0px; padding-bottom: 26px;" class="bootTxt21">检疫报告</span></td>
                        <td colspan="3">
                        	<ul class="baseAddList">
                                <li class="baseAddLi">
                                	<h:inputHidden value="#{animalsArchivesInfoHome.instance.outfencesAqsiqUrls}" id="outfencesAqsiqUrls"/>
                                 	<iframe src="#{request.contextPath}/livestock/AnimalsArchivesInfoImages.seam" id="myframe2" name="myframe2" frameBorder="0" scrolling="no" width="" height="155" onLoad="" style="width:560px; height:155px"></iframe>
                                </li>
                            </ul>
                        </td>
                    </tr>
                	</table>
                    <!-- 出栏记录表格 结束  -->
                    </div>
                    <div class="tab-pane" id="tuzaijl">
                    <!-- 屠宰记录表格 开始  -->
                    <table class="messageTable" width="100%" cellpadding="0" cellspacing="0" style="width:734px; margin:40px auto 20px; font-size:12px;">
                	<tr>
                    	<td class="pr10" align="right" width="110">屠宰时间</td>
                        <td width="262">
                        	<span class="bootData21">
                                <div class="input-append date form_datetime " style="position:relative;" >
								<h:inputText  readonly="#{facesContext.renderResponse}" id="slaughterTimeId" styleClass="new_time" value="#{animalsArchivesInfoHome.instance.slaughterTime}" style="height:34px;"/>
                                <span class="add-on" style="position:absolute; right:10px; top:10px;"><i class="icon-th" style="margin:0;"></i></span>
                                </div>
                                <h:inputHidden value="#{animalsArchivesInfoHome.instance.slaughterTime}" id="slaughterTimeId2"/>
                            </span>
                        </td>
                        <td class="pr10" align="right" width="110">检疫部门</td>
                        <td>
                        	<span class="bootSelt21">
                            	<h:inputText styleClass="form-control" style="width:220px;" value="#{animalsArchivesInfoHome.instance.slaughterDept}" id="slaughterDeptId"/>
                            </span>
                        </td>
                    </tr>
                    <tr>
                    	<td class="pr10" align="right" width="110">检测内容</td>
                        <td colspan="3">
                        	<span class="bootTextarea"><h:inputTextarea styleClass="form-control area_textarea" value="#{animalsArchivesInfoHome.instance.slaughterContent}" id="slaughterContentId"></h:inputTextarea></span>
                        </td>
                    </tr>
                    <tr>
                        <td width="100" align="right"><span class="bootTxt21 type2">检疫结果</span></td>
                        <td colspan="3">
                            <ul class="baseRadio_list" style="margin-top:10px; font-size:12px;">
                                <li><input type="radio" class="iRadio" name="testRadio2" value="1"/><label class="iRadioLable" style="width:auto; max-width:auto;">合格</label></li>
                                <li><input type="radio" class="iRadio" name="testRadio2" checked="checked" value="2"/><label class="iRadioLable" style="width:auto; max-width:auto;">不合格</label></li>
                                <h:inputHidden id="slaughterType" value="#{animalsArchivesInfoHome.instance.slaughterResults}" />
                            </ul>
                        </td>
                    </tr>
                    <tr>
                        <td width="100" align="right"><span style="padding-bottom: 16px;" class="bootTxt21">检疫报告</span></td>
                        <td colspan="3">
                            <ul class="baseAddList">
                            	<li class="baseAddLi2" style="width:100%">
                            	    <h:inputHidden value="#{animalsArchivesInfoHome.instance.slaughterUrls}" id="slaughterUrls"/>
                                 	<iframe src="#{request.contextPath}/livestock/AnimalsArchivesInfoImagesTwo.seam" id="myframe4" name="myframe4" frameBorder="0" scrolling="no" width="" height="155" onLoad="" style="width:560px; height:155px"></iframe>
                                </li>
                            </ul>
                        </td>
                    </tr>
                	</table>
                    <!-- 屠宰记录表格 结束  -->
                    </div>
                </div>
                <!-- 兽药记录 免疫记录 饲养信息 结束  -->
                 <table class="baseBtn" style="margin:20px auto;">
    				<tr>
    					<td>
						<h:commandButton id="persist" onclick="return allSubmit()" value="提交" styleClass="btn btn-primary mr15" action="#{animalsArchivesInfoHome.batchPersist()}"/>
       				  <s:link view="/livestock/AnimalsArchivesInfoList.xhtml" styleClass="btn btn-default" value="返回" id="bn_left6" style="margin-left:10px" >
			            	<f:param name="baseId" value="#{animalsArchivesInfoHome.baseId}"/>
			            	<f:param name="pageNum" value="#{animalsArchivesInfoHome.pageNum}"></f:param>
			            	</s:link>
       				  </td>
    				</tr>
				</table>
            </div>
            <!-- right_c 结束 -->
		</h:form>


<!-- 添加免疫记录模态框 开始 -->
<h:form id="vr">
<div class="modal fade" id="myModal_myjl" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-dialog" style="width:794px;">
<div class="modal-content">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"></button>
        <h4 class="modal-title" id="myModalLabel">添加免疫记录</h4>
    </div>
    <div class="modal-body" style="padding:20px 0 0;">
    	<table class="modalTable_minni" width="100%" cellpadding="0" cellspacing="0">
        	<tr>
            	<td class="pr10" width="110" align="right">疫苗名称</td>
                <td width="262">
                	<span class="bootSelt21">
                    <h:selectOneMenu immediate="true" styleClass="selectpicker vr1" id="viId" style="width:146px;" value="#{animalsArchivesInfoHome.vaccineInfoId}">
						<s:selectItems value="#{animalsArchivesInfoHome.viList}" var="var" label="#{var.name}" itemValue="#{var.id}" escape="false"/>
					</h:selectOneMenu>
                    </span>
                </td>
                <td class="pr10" width="110" align="right">生产日期</td>
                <td>
                	<span class="bootData21">
                        <div class="input-append date form_datetime " style="position:relative;" >
                        <h:inputText size="26"  readonly="#{facesContext.renderResponse}" id="vrproduceTimeId" styleClass="new_time" value="#{vaccineRecordHome.instance.produceTime}" style="height:34px;"/>
                        <span class="add-on" style="position:absolute; right:10px; top:10px;"><i class="icon-th" style="margin:0;"></i></span>
                        </div>
                        <h:inputHidden value="#{vaccineRecordHome.instance.produceTime}" id="vrproduceTimeId2"/>
                    </span>
                </td>
            </tr>
            <tr>
            	<td class="pr10" width="110" align="right">有效期</td>
                <td width="262">
                	<span class="bootSelt21">
                    <h:inputText id="vrValidityId" value="#{vaccineRecordHome.instance.validity}" styleClass="form-control" style="width:200px;"/>
                    </span>
                    <span class="fl" style="line-height:34px;">&nbsp;天</span>
                </td>
                <td class="pr10" width="110" align="right">免疫时间</td>
                <td>
                	<span class="bootData21">
                        <div class="input-append date form_datetime " style="position:relative;" >
                        <h:inputText size="26"  readonly="#{facesContext.renderResponse}" id="vrImmuneTimeId" styleClass="new_time" value="#{vaccineRecordHome.instance.immuneTime}" style="height:34px;"/>
                        <span class="add-on" style="position:absolute; right:10px; top:10px;"><i class="icon-th" style="margin:0;"></i></span>
                        </div>
                        <h:inputHidden value="#{vaccineRecordHome.instance.immuneTime}" id="vrImmuneTimeId2"/>
                        
                    </span>
                </td>
            </tr>
            <tr>
            	<td class="pr10" width="110" align="right">操作人</td>
                <td width="262">
                	<span class="bootSelt21">
                      <h:selectOneMenu immediate="true" styleClass="selectpicker" id="myvrfarmerInfoId" style="width:146px;" value="#{animalsArchivesInfoHome.myvrfarmerInfoId}">
						<s:selectItems value="#{animalsArchivesInfoHome.psersonList}" var="var" label="#{var.name}" itemValue="#{var.farmerInfoId}" escape="false"/>
					</h:selectOneMenu>
                    </span>
                </td>
                <td class="pr10" width="110" align="right">免疫方法</td>
                <td>
                	<span class="bootSelt21">
                    <h:inputText id="vrImmuneMethodId" value="#{vaccineRecordHome.instance.immuneMethod}" styleClass="form-control" style="width:200px;"/>
                    </span>
                </td>
            </tr>
            <tr>
            	<td class="pr10" width="110" align="right">使用剂量</td>
                <td colspan="3">
                	<span class="bootSelt21">
                    <h:inputText id="vrAmountId" value="#{vaccineRecordHome.instance.amount}" styleClass="form-control" style="width:200px;"/>
                    </span>
                </td>
            </tr>
            <tr>
            	<td class="pr10" width="110" align="right">图片</td>
            	<td colspan="3">
            	    <h:inputHidden value="#{vaccineRecordHome.instance.imageUrlName}" id="imageUrlNameIds"/>
            		<iframe src="#{request.contextPath}/livestock/VaccineRecordImg.seam" id="vriframe" name="vriframe" frameBorder="0" scrolling="no" width="" height="155" onLoad="" style="width:580px; height:155px"></iframe>
            	</td>
            </tr>
            <tr>
            	<td class="pr10" width="110" align="right">备注</td>
                <td colspan="3">
                <span class="bootTextarea">
                	<h:inputTextarea id="vrRemarkId" styleClass="form-control area_textarea" value="#{vaccineRecordHome.instance.remark}" />
                </span>
                </td>
            </tr>
        </table>     
    </div>
    <div class="modal-footer">
         <a4j:commandButton id="vaccineIds" onclick="if(!vrAdd(1))return false;jquery('.vrbutton').prop('disabled','true');"  oncomplete="jquery('.vrbutton').removeAttr('disabled');"  value="提交" styleClass="btn btn-success vrbutton" action="#{animalsArchivesInfoHome.saveVaccine()}" reRender="myVr"/>
        <a4j:commandButton id="vaccineId" onclick="if(!vrAdd(2))return false;jquery('.vrbuttonsave').prop('disabled','true');"  oncomplete="xtianjiaVr()"  value="提交并新增" styleClass="btn btn-default vrbuttonsave" action="#{animalsArchivesInfoHome.saveVaccine()}" reRender="myVr"/>
        <a class="btn btn-default" data-dismiss="modal" href="#">关闭</a>
    </div>
</div>
</div>
</div>
</h:form>
<!--  添加免疫记录模态框 结束 -->

<!-- 修改免疫记录模态框 开始 -->
<h:form id="xvr">
<div class="modal fade" id="xmyModal_myjl" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-dialog" style="width:794px;">
<div class="modal-content">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"></button>
        <h4 class="modal-title" id="myModalLabel">修改免疫记录</h4>
    </div>
      <h:panelGroup id="vrbianji">
    <div class="modal-body" style="padding:20px 0 0;">
    	<table class="modalTable_minni" width="100%" cellpadding="0" cellspacing="0">
        	<tr>
            	<td class="pr10" width="110" align="right">疫苗名称</td>
                <td width="262">
                	<span class="bootSelt21">
                    <h:selectOneMenu immediate="true" styleClass="selectpicker vr1" id="viId" style="width:146px;" value="#{animalsArchivesInfoHome.vaccineInfoId}">
						<s:selectItems value="#{animalsArchivesInfoHome.viList}" var="var" label="#{var.name}" itemValue="#{var.id}" escape="false"/>
					</h:selectOneMenu>
                    </span>
                </td>
                <td class="pr10" width="110" align="right">生产日期</td>
                <td>
                	<span class="bootData21">
                        <div class="input-append date form_datetime " style="position:relative;" >
                        <h:inputText size="26"  readonly="#{facesContext.renderResponse}" id="vrproduceTimeId" styleClass="new_time" value="#{animalsArchivesInfoHome.vaccineRecord.produceTime}" style="height:34px;"/>
                        <span class="add-on" style="position:absolute; right:10px; top:10px;"><i class="icon-th" style="margin:0;"></i></span>
                        </div>
                        <h:inputHidden value="#{animalsArchivesInfoHome.vaccineRecord.produceTime}" id="vrproduceTimeId3"/>
                    </span>
                </td>
            </tr>
            <tr>
            	<td class="pr10" width="110" align="right">有效期</td>
                <td width="262">
                	<span class="bootSelt21">
                    <h:inputText id="vrValidityId" value="#{animalsArchivesInfoHome.vaccineRecord.validity}" styleClass="form-control" style="width:200px;"/>
                    </span>
                    <span class="fl" style="line-height:34px;">&nbsp;天</span>
                </td>
                <td class="pr10" width="110" align="right">免疫时间</td>
                <td>
                	<span class="bootData21">
                        <div class="input-append date form_datetime " style="position:relative;" >
                        <h:inputText size="26"  readonly="#{facesContext.renderResponse}" id="vrImmuneTimeId" styleClass="new_time" value="#{animalsArchivesInfoHome.vaccineRecord.immuneTime}" style="height:34px;"/>
                        <span class="add-on" style="position:absolute; right:10px; top:10px;"><i class="icon-th" style="margin:0;"></i></span>
                        </div>
                        <h:inputHidden value="#{animalsArchivesInfoHome.vaccineRecord.immuneTime}" id="vrImmuneTimeId3"/>
                        
                    </span>
                </td>
            </tr>
            <tr>
            	<td class="pr10" width="110" align="right">操作人</td>
                <td width="262">
                	<span class="bootSelt21">
                      <h:selectOneMenu immediate="true" styleClass="selectpicker" id="myvrfarmerInfoId" style="width:146px;" value="#{animalsArchivesInfoHome.myvrfarmerInfoId}">
						<s:selectItems value="#{animalsArchivesInfoHome.psersonList}" var="var" label="#{var.name}" itemValue="#{var.farmerInfoId}" escape="false"/>
					</h:selectOneMenu>
                    </span>
                </td>
                <td class="pr10" width="110" align="right">免疫方法</td>
                <td>
                	<span class="bootSelt21">
                    <h:inputText id="vrImmuneMethodId" value="#{animalsArchivesInfoHome.vaccineRecord.immuneMethod}" styleClass="form-control" style="width:200px;"/>
                    </span>
                </td>
            </tr>
            <tr>
            	<td class="pr10" width="110" align="right">使用剂量</td>
                <td colspan="3">
                	<span class="bootSelt21">
                    <h:inputText id="vrAmountId" value="#{animalsArchivesInfoHome.vaccineRecord.amount}" styleClass="form-control" style="width:200px;"/>
                    </span>
                </td>
            </tr>
            <tr>
            	<td class="pr10" width="110" align="right">图片</td>
            	<td colspan="3">
	            	<div style="overflow: auto;height: 144px;width: 580px;">
	            		<h:inputHidden value="#{animalsArchivesInfoHome.vaccineRecord.imageUrlName}" id="imageUrlNameIds"/>
	            	    <ui:fragment rendered="#{animalsArchivesInfoHome.vaccineRecord.imageUrlName!=''}">
		            		<a4j:repeat value="#{animalsArchivesInfoHome.vaccineRecord.imageUrlName.split(',')}"  var="obj" rowKeyVar="_index">
			            		<div class="farmingInputs fl">
			                   		<a class="farmingInputs_pic"><img src="#{obj}" width="128" height="128" class="farmPicUrl"/></a>
			                    	<em class="closeInputs" onclick="delPic(this)"><img src="#{request.contextPath}/asset/images/clo_04.jpg" /></em>
			                    </div>
		                    </a4j:repeat>
	                    </ui:fragment>
	            		<iframe src="#{request.contextPath}/livestock/VaccineRecordImg.seam" id="vriframe2" name="vriframe2" frameBorder="0" scrolling="no" width="" height="140" onLoad="" style="width:128px; height:140px"></iframe>
	            	</div>
            	</td>
            </tr>
            <tr>
            	<td class="pr10" width="110" align="right">备注</td>
                <td colspan="3">
                <span class="bootTextarea">
                	<h:inputTextarea id="vrRemarkId" styleClass="form-control area_textarea" value="#{animalsArchivesInfoHome.vaccineRecord.remark}" />
               		<h:inputHidden value="#{animalsArchivesInfoHome.vrindexof}" id="vrindexof"/>
                </span>
                </td>
            </tr>
        </table>     
    </div>
    <div class="modal-footer">
         <a4j:commandButton id="xvaccineIds" action="#{animalsArchivesInfoHome.updateVaccine}" onclick="if(!vrAdd(3))return false;jquery('.vrbutton').prop('disabled','true');"  oncomplete="jquery('.vrbutton').removeAttr('disabled');"  value="提交" styleClass="btn btn-success vmrbutton"  reRender="myVr"/>
        <a class="btn btn-default" data-dismiss="modal" href="#">关闭</a>
    </div>
    </h:panelGroup>
</div>
</div>
</div>
</h:form>
<!--  修改免疫记录模态框 结束 -->



<!-- 添加兽药记录模态框 开始 -->
<h:form id="vmr">
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-dialog" style="width:794px;">
<div class="modal-content">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"></button>
        <h4 class="modal-title" id="myModalLabel">添加兽药记录</h4>
    </div>
    <div class="modal-body" style="padding:20px 0 0;">
    	<table class="modalTable_minni" width="100%" cellpadding="0" cellspacing="0">
        	<tr>
            	<td class="pr10" width="110" align="right">兽药名称</td>
                <td width="262">
                	<span class="bootSelt21">
                    <h:selectOneMenu immediate="true" styleClass="selectpicker vmr1" id="vmiId" style="width:146px;" value="#{animalsArchivesInfoHome.veterinaryMedicineInfoId}">
						<s:selectItems value="#{animalsArchivesInfoHome.vmiList}" var="var" label="#{var.name}" itemValue="#{var.id}" escape="false"/>
					</h:selectOneMenu>
                    </span>
                </td>
                <td class="pr10" width="110" align="right">生产日期</td>
                <td>
                	<span class="bootData21">
                        <div class="input-append date form_datetime " style="position:relative;" >
                        <h:inputText size="26"  readonly="#{facesContext.renderResponse}" id="vmrproduceTimeId" styleClass="new_time" value="#{veterinaryMedicineRecordHome.instance.produceTime}" style="height:34px;"/>
                        <span class="add-on" style="position:absolute; right:10px; top:10px;"><i class="icon-th" style="margin:0;"></i></span>
                        </div>
                        <h:inputHidden value="#{veterinaryMedicineRecordHome.instance.produceTime}" id="vmrproduceTimeId2"/>
                    </span>
                </td>
            </tr>
            <tr>
            	<td class="pr10" width="110" align="right">有效期</td>
                <td width="262">
                	<span class="bootSelt21">
                    <h:inputText id="vmrValidityId" value="#{veterinaryMedicineRecordHome.instance.validity}" styleClass="form-control" style="width:200px;"/>
                    </span>
                    <span class="fl" style="line-height:34px;">&nbsp;天</span>
                </td>
                <td class="pr10" width="110" align="right">发病原因</td>
                <td>
                	<span class="bootSelt21">
                    <h:inputText id="vmrEtiologyId" value="#{veterinaryMedicineRecordHome.instance.etiology}" styleClass="form-control" style="width:200px;"/>
                    </span>
                </td>
            </tr>
            <tr>
            	<td class="pr10" width="110" align="right">诊疗结果</td>
                <td width="262">
                	<span class="bootSelt21">
                    <h:inputText  styleClass="form-control" id="vmrClinicResultsId" style="width:220px;" value="#{veterinaryMedicineRecordHome.instance.clinicResults}"/>
                    </span>
                </td>
                <td class="pr10" width="110" align="right">用药时间</td>
                <td>
                	<span class="bootData21">
                        <div class="input-append date form_datetime " style="position:relative;" >
                        <h:inputText size="26" readonly="#{facesContext.renderResponse}" id="vmrMedicationTimeId" styleClass="new_time" value="#{veterinaryMedicineRecordHome.instance.medicationTime}"/>
                        <span class="add-on" style="position:absolute; right:10px; top:10px;"><i class="icon-th" style="margin:0;"></i></span>
                        </div>
                        <h:inputHidden value="#{veterinaryMedicineRecordHome.instance.medicationTime}" id="vmrMedicationTimeId2"/>
                        
                    </span>
                </td>
            </tr>
            <tr>
            	<td class="pr10" width="110" align="right">停药时间</td>
                <td width="262">
                	<span class="bootData21">
                        <div class="input-append date form_datetime " style="position:relative;" >
                        <h:inputText size="26" readonly="#{facesContext.renderResponse}" id="vmrWithdrawalTimeId" styleClass="new_time" value="#{veterinaryMedicineRecordHome.instance.withdrawalTime}"/>
                        <span class="add-on" style="position:absolute; right:10px; top:10px;"><i class="icon-th" style="margin:0;"></i></span>
                        </div>
                        <h:inputHidden value="#{veterinaryMedicineRecordHome.instance.withdrawalTime}" id="vmrWithdrawalTimeId2"/>
                        
                    </span>
                </td>
                <td class="pr10" width="110" align="right">操作人</td>
                <td>
                	<span class="bootSelt21">
                    <h:selectOneMenu immediate="true" styleClass="selectpicker" id="myvmrfarmerInfoId" style="width:146px;" value="#{animalsArchivesInfoHome.myvmrfarmerInfoId}">
						<s:selectItems value="#{animalsArchivesInfoHome.psersonList}" var="var" label="#{var.name}" itemValue="#{var.farmerInfoId}" escape="false"/>
					</h:selectOneMenu>
                    </span>
                </td>
            </tr>
            <tr>
            	<td class="pr10" width="110" align="right">用药剂量</td>
                <td width="262">
                	<span class="bootSelt21">
                    <h:inputText id="vmrAmountId" value="#{veterinaryMedicineRecordHome.instance.amount}" style="width:220px;" styleClass="form-control"/>
                    </span>
                </td>
                <td class="pr10" width="110" align="right">休药期</td>
                <td>
                	<span class="bootSelt21">
                    <h:inputText id="vmrWithdrawalPeriodId" value="#{veterinaryMedicineRecordHome.instance.withdrawalPeriod}" style="width:220px;" styleClass="form-control"/>
                    
                    </span>
                    <span class="fl" style="line-height:34px;">&nbsp;天</span>
                </td>
            </tr>
            <tr>
            	<td class="pr10" width="110" align="right">图片</td>
            	<td colspan="3">
            		<h:inputHidden value="#{veterinaryMedicineRecordHome.instance.imageUrlName}" id="imageUrlNameIds"/>
            		<iframe src="#{request.contextPath}/livestock/VeterinaryMedicineRecordImg.seam" id="vmriframe" name="vmriframe" frameBorder="0" scrolling="no" width="" height="155" onLoad="" style="width:580px; height:155px"></iframe>
            	</td>
            </tr>
            <tr>
            	<td class="pr10" width="110" align="right">备注</td>
                <td colspan="3">
                	<span class="bootTextarea">
                	<h:inputTextarea id="vmrRemarkId" styleClass="form-control area_textarea" value="#{veterinaryMedicineRecordHome.instance.remark}" />
                	</span>
                </td>
            </tr>
        </table>     
    </div>
    <div class="modal-footer">
        <a4j:commandButton id="veterinaryMedicineIds" onclick="if(!vmrAdd(1))return false;jquery('.vmrbutton').prop('disabled','true');"  oncomplete="jquery('.vmrbutton').removeAttr('disabled');"  value="提交" styleClass="btn btn-success vmrbutton" action="#{animalsArchivesInfoHome.saveVeterinaryMedicine()}" reRender="myVmr"/>
        <a4j:commandButton id="veterinaryMedicineId" onclick="if(!vmrAdd(2))return false;jquery('.vmrbuttonsave').prop('disabled','true');"  oncomplete="xtianjiaVmr()"  value="提交并新增" styleClass="btn btn-default vmrbuttonsave" action="#{animalsArchivesInfoHome.saveVeterinaryMedicine()}" reRender="myVmr"/>
       
        <a class="btn btn-default" data-dismiss="modal" href="#">关闭</a>
    </div>
</div>
</div>
</div>
</h:form>
<!--  添加兽药记录模态框 结束 -->

<!-- 修改兽药记录模态框 开始 -->
<h:form id="xvmr">
<div class="modal fade" id="xmyModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-dialog" style="width:794px;">
<div class="modal-content">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"></button>
        <h4 class="modal-title" id="myModalLabel">修改兽药记录</h4>
    </div>
    <h:panelGroup id="vmrbianji">
    <div class="modal-body" style="padding:20px 0 0;">
    	<table class="modalTable_minni" width="100%" cellpadding="0" cellspacing="0">
        	<tr>
            	<td class="pr10" width="110" align="right">兽药名称</td>
                <td width="262">
                	<span class="bootSelt21">
                    <h:selectOneMenu immediate="true" styleClass="selectpicker vmr1" id="vmiId" style="width:146px;" value="#{animalsArchivesInfoHome.veterinaryMedicineInfoId}">
						<s:selectItems value="#{animalsArchivesInfoHome.vmiList}" var="var" label="#{var.name}" itemValue="#{var.id}" escape="false"/>
					</h:selectOneMenu>
                    </span>
                </td>
                <td class="pr10" width="110" align="right">生产日期</td>
                <td>
                	<span class="bootData21">
                        <div class="input-append date form_datetime " style="position:relative;" >
                        <h:inputText size="26" readonly="#{facesContext.renderResponse}" id="vmrproduceTimeId" styleClass="new_time" value="#{animalsArchivesInfoHome.veterinaryMedicineRecord.produceTime}" style="height:34px;"/>
                        <span class="add-on" style="position:absolute; right:10px; top:10px;"><i class="icon-th" style="margin:0;"></i></span>
                        </div>
                        <h:inputHidden value="#{animalsArchivesInfoHome.veterinaryMedicineRecord.produceTime}" id="vmrproduceTimeId3"/>
                        
                    </span>
                </td>
            </tr>
            <tr>
            	<td class="pr10" width="110" align="right">有效期</td>
                <td width="262">
                	<span class="bootSelt21">
                    <h:inputText id="vmrValidityId" value="#{animalsArchivesInfoHome.veterinaryMedicineRecord.validity}" styleClass="form-control" style="width:200px;"/>
                    </span>
                    <span class="fl" style="line-height:34px;">&nbsp;天</span>
                </td>
                <td class="pr10" width="110" align="right">发病原因</td>
                <td>
                	<span class="bootSelt21">
                    <h:inputText id="vmrEtiologyId" value="#{animalsArchivesInfoHome.veterinaryMedicineRecord.etiology}" styleClass="form-control" style="width:200px;"/>
                    </span>
                </td>
            </tr>
            <tr>
            	<td class="pr10" width="110" align="right">诊疗结果</td>
                <td width="262">
                	<span class="bootSelt21">
                    <h:inputText  styleClass="form-control" id="vmrClinicResultsId" style="width:220px;" value="#{animalsArchivesInfoHome.veterinaryMedicineRecord.clinicResults}"/>
                    </span>
                </td>
                <td class="pr10" width="110" align="right">用药时间</td>
                <td>
                	<span class="bootData21">
                        <div class="input-append date form_datetime " style="position:relative;" >
                        <h:inputText size="26" readonly="#{facesContext.renderResponse}" id="vmrMedicationTimeId" styleClass="new_time" value="#{animalsArchivesInfoHome.veterinaryMedicineRecord.medicationTime}"/>
                        <span class="add-on" style="position:absolute; right:10px; top:10px;"><i class="icon-th" style="margin:0;"></i></span>
                        </div>
                        <h:inputHidden value="#{animalsArchivesInfoHome.veterinaryMedicineRecord.medicationTime}" id="vmrMedicationTimeId3"/>
                        
                    </span>
                </td>
            </tr>
            <tr>
            	<td class="pr10" width="110" align="right">停药时间</td>
                <td width="262">
                	<span class="bootData21">
                        <div class="input-append date form_datetime " style="position:relative;" >
                        <h:inputText size="26" readonly="#{facesContext.renderResponse}" id="vmrWithdrawalTimeId" styleClass="new_time" value="#{animalsArchivesInfoHome.veterinaryMedicineRecord.withdrawalTime}"/>
                        <span class="add-on" style="position:absolute; right:10px; top:10px;"><i class="icon-th" style="margin:0;"></i></span>
                        </div>
                        <h:inputHidden value="#{animalsArchivesInfoHome.veterinaryMedicineRecord.withdrawalTime}" id="vmrWithdrawalTimeId3"/>
                        
                    </span>
                </td>
                <td class="pr10" width="110" align="right">操作人</td>
                <td>
                	<span class="bootSelt21">
                    <h:selectOneMenu immediate="true" styleClass="selectpicker" id="myvmrfarmerInfoId" style="width:146px;" value="#{animalsArchivesInfoHome.myvmrfarmerInfoId}">
						<s:selectItems value="#{animalsArchivesInfoHome.psersonList}" var="var" label="#{var.name}" itemValue="#{var.farmerInfoId}" escape="false"/>
					</h:selectOneMenu>
                    </span>
                </td>
            </tr>
            <tr>
            	<td class="pr10" width="110" align="right">用药剂量</td>
                <td width="262">
                	<span class="bootSelt21">
                    <h:inputText id="vmrAmountId" value="#{animalsArchivesInfoHome.veterinaryMedicineRecord.amount}" style="width:220px;" styleClass="form-control"/>
                    </span>
                </td>
                <td class="pr10" width="110" align="right">休药期</td>
                <td>
                	<span class="bootSelt21">
                    <h:inputText id="vmrWithdrawalPeriodId" value="#{animalsArchivesInfoHome.veterinaryMedicineRecord.withdrawalPeriod}" style="width:220px;" styleClass="form-control"/>
                    
                    </span>
                    <span class="fl" style="line-height:34px;">&nbsp;天</span>
                </td>
            </tr>
            <tr>
            	<td class="pr10" width="110" align="right">图片</td>
            	<td colspan="3">
	            	<div style="overflow: auto;height: 144px;width: 580px;">
	            	    <h:inputHidden value="#{animalsArchivesInfoHome.veterinaryMedicineRecord.imageUrlName}" id="imageUrlNameIds"/>
	            	    <ui:fragment rendered="#{animalsArchivesInfoHome.veterinaryMedicineRecord.imageUrlName!=''}">
		            		<a4j:repeat value="#{animalsArchivesInfoHome.veterinaryMedicineRecord.imageUrlName.split(',')}"  var="obj" rowKeyVar="_index">
			            		<div class="farmingInputs fl">
			                   		<a class="farmingInputs_pic"><img src="#{obj}" width="128" height="128" class="farmPicUrl"/></a>
			                    	<em class="closeInputs" onclick="delPic(this)"><img src="#{request.contextPath}/asset/images/clo_04.jpg" /></em>
			                    </div>
		                    </a4j:repeat>
	                    </ui:fragment>
	            		<iframe src="#{request.contextPath}/livestock/VeterinaryMedicineRecordImg.seam" id="vmriframe2" name="vmriframe2" frameBorder="0" scrolling="no" width="" height="140" onLoad="" style="width:128px; height:140px"></iframe>
	            	</div>
            	</td>
            </tr>
            <tr>
            	<td class="pr10" width="110" align="right">备注</td>
                <td colspan="3">
                	<span class="bootTextarea">
                		<h:inputTextarea id="vmrRemarkId" styleClass="form-control area_textarea" value="#{animalsArchivesInfoHome.veterinaryMedicineRecord.remark}" />
                		<h:inputHidden value="#{animalsArchivesInfoHome.vmrindexof}" id="vmrindexof"/>
                	</span>
                </td>
            </tr>
        </table>     
    </div>
    <div class="modal-footer">
        <a4j:commandButton id="xveterinaryMedicineIds" action="#{animalsArchivesInfoHome.updateVeterinaryMedicine}" onclick="if(!vmrAdd(3))return false;jquery('.vmrbutton').prop('disabled','true');"  oncomplete="jquery('.vmrbutton').removeAttr('disabled');"  value="提交" styleClass="btn btn-success vmrbutton"  reRender="myVmr"/>
        <a class="btn btn-default" data-dismiss="modal" href="#">关闭</a>
    </div>
    </h:panelGroup>
</div>
</div>
</div>
</h:form>
<!--  修改兽药记录模态框 结束 -->











<!-- 添加饲养信息模态框 开始 -->
<h:form id="afr">
<div class="modal fade" id="myModal_syxx" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-dialog" style="width:794px;">
<div class="modal-content">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"></button>
        <h4 class="modal-title" id="myModalLabel">添加饲养信息</h4>
    </div>
    <div class="modal-body" style="padding:20px 0 0;">
    	<table class="modalTable_minni" width="100%" cellpadding="0" cellspacing="0">
        	<tr>
            	<td class="pr10" width="110" align="right">饲料名称</td>
                <td width="262">
                	<span class="bootSelt21">
                    <h:selectOneMenu immediate="true" styleClass="selectpicker afr1" id="afiId" style="width:146px;" value="#{animalsArchivesInfoHome.animalFeedInfoId}">
						<s:selectItems value="#{animalsArchivesInfoHome.afiList}" var="var" label="#{var.name}" itemValue="#{var.id}" escape="false"/>
					</h:selectOneMenu>
                    </span>
                </td>
                <td class="pr10" width="110" align="right">生产日期</td>
                <td>
                	<span class="bootData21">
                        <div class="input-append date form_datetime " style="position:relative;" >
                        <h:inputText size="26"  readonly="#{facesContext.renderResponse}" id="afrproduceTimeId" styleClass="new_time" value="#{animalFeedRecordHome.instance.produceTime}" style="height:34px;"/>
                        <span class="add-on" style="position:absolute; right:10px; top:10px;"><i class="icon-th" style="margin:0;"></i></span>
                        </div>
                        <h:inputHidden value="#{animalFeedRecordHome.instance.produceTime}" id="afrproduceTimeId2"/>
                    </span>
                </td>
            </tr>
            <tr>
            	<td class="pr10" width="110" align="right">有效期</td>
                <td width="262">
                	<span class="bootSelt21">
                    <h:inputText id="afrValidityId" value="#{animalFeedRecordHome.instance.validity}" styleClass="form-control" style="width:200px;"/>
                    </span>
                    <span class="fl" style="line-height:34px;">&nbsp;天</span>
                </td>
                <td class="pr10" width="110" align="right">禽畜状态</td>
                <td>
                	<span class="bootSelt21">
                	<h:panelGroup id="vOfsId3">
                     <h:selectOneMenu immediate="true" styleClass="selectpicker" id="afranimalStatusId" style="width:146px;" value="#{animalsArchivesInfoHome.afranimalStatusId}">
						<s:selectItems value="#{animalsArchivesInfoHome.stateList}" var="var" label="#{var.name}" itemValue="#{var.id}" escape="false"/>
					 </h:selectOneMenu>
					 </h:panelGroup>
                    </span>
                </td>
            </tr>
            <tr>
            	<td class="pr10" width="110" align="right">开始使用时间</td>
                <td width="262">
                	<span class="bootData21">
                        <div class="input-append date form_datetime " style="position:relative;" >
                        <h:inputText size="26"  readonly="#{facesContext.renderResponse}" id="afrUseBeginTime" styleClass="new_time" value="#{animalFeedRecordHome.instance.useBeginTime}"/>
                        <span class="add-on" style="position:absolute; right:10px; top:10px;"><i class="icon-th" style="margin:0;"></i></span>
                        </div>
                        <h:inputHidden value="#{animalFeedRecordHome.instance.useBeginTime}" id="afrUseBeginTime2"/>
                        
                    </span>
                </td>
                <td class="pr10" width="110" align="right">结束使用时间</td>
                <td>
                	<span class="bootData21">
                        <div class="input-append date form_datetime " style="position:relative;" >
                        <h:inputText size="26"  readonly="#{facesContext.renderResponse}" id="afrUseEndTime" styleClass="new_time" value="#{animalFeedRecordHome.instance.useEndTime}"/>
                        <span class="add-on" style="position:absolute; right:10px; top:10px;"><i class="icon-th" style="margin:0;"></i></span>
                        </div>
                        <h:inputHidden value="#{animalFeedRecordHome.instance.useEndTime}" id="afrUseEndTime2"/>

                    </span>
                </td>
            </tr>
            <tr>
            	<td class="pr10" width="110" align="right">总用量</td>
                <td width="262">
                	<span class="bootSelt21">
                    <h:inputText id="afrAmountId" value="#{animalFeedRecordHome.instance.amount}" styleClass="form-control" style="width:200px;"/>
                    </span>
                    <span class="fl" style="line-height:34px;">&nbsp;吨</span>
                </td>
                <td class="pr10" width="110" align="right">操作人</td>
                <td>
                	<span class="bootSelt21">
                    <h:selectOneMenu immediate="true" styleClass="selectpicker" id="myfarfarmerInfoId" style="width:146px;" value="#{animalsArchivesInfoHome.myfarfarmerInfoId}">
						<s:selectItems value="#{animalsArchivesInfoHome.psersonList}" var="var" label="#{var.name}" itemValue="#{var.farmerInfoId}" escape="false"/>
					</h:selectOneMenu>
                    </span>
                </td>
            </tr>
             <tr>
            	<td class="pr10" width="110" align="right">图片</td>
            	<td colspan="3">
            		 <h:inputHidden value="#{animalFeedRecordHome.instance.imageUrlName}" id="imageUrlNameIds"/>
            		<iframe src="#{request.contextPath}/livestock/AnimalFeedRecordImg.seam" id="afriframe" name="afriframe" frameBorder="0" scrolling="no" width="" height="155" onLoad="" style="width:580px; height:155px"></iframe>
            	</td>
            </tr>
            <tr>
            	<td class="pr10" width="110" align="right">备注</td>
                <td colspan="3">
                	<span class="bootTextarea">
                		<h:inputTextarea id="afrRemarkId" styleClass="form-control area_textarea" value="#{animalFeedRecordHome.instance.remark}" />
               	 </span>
                </td>
            </tr>
        </table>     
    </div>
    <div class="modal-footer">
    	<a4j:commandButton id="animalFeedIds" onclick="if(!afrAdd(1))return false;jquery('.afrbutton').prop('disabled','true');"  oncomplete="jquery('.afrbutton').removeAttr('disabled');"  value="提交" styleClass="btn btn-success afrbutton" action="#{animalsArchivesInfoHome.saveAnimalFeed()}" reRender="myAfr"/>
        <a4j:commandButton id="animalFeedId" onclick="if(!afrAdd(2))return false;jquery('.afrbuttonsave').prop('disabled','true');"  oncomplete="xtianjiaAfr()"  value="提交并新增" styleClass="btn btn-default afrbuttonsave" action="#{animalsArchivesInfoHome.saveAnimalFeed()}" reRender="myAfr"/>
        <a class="btn btn-default" data-dismiss="modal" href="#">关闭</a>
    </div>
</div>
</div>
</div>
</h:form>
 
<!--  添加饲养信息模态框 结束 -->

<!-- 修改饲养信息模态框 开始 -->
<h:form id="xafr">
<div class="modal fade" id="xmyModal_syxx" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-dialog" style="width:794px;">
<div class="modal-content">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"></button>
        <h4 class="modal-title" id="myModalLabel">修改饲养信息</h4>
    </div>
    <h:panelGroup id="afrbianji">
    <div class="modal-body" style="padding:20px 0 0;">
    	<table class="modalTable_minni" width="100%" cellpadding="0" cellspacing="0">
        	<tr>
            	<td class="pr10" width="110" align="right">饲料名称</td>
                <td width="262">
                	<span class="bootSelt21">
                    <h:selectOneMenu immediate="true" styleClass="selectpicker afr1" id="afiId" style="width:146px;" value="#{animalsArchivesInfoHome.animalFeedInfoId}">
						<s:selectItems value="#{animalsArchivesInfoHome.afiList}" var="var" label="#{var.name}" itemValue="#{var.id}" escape="false"/>
					</h:selectOneMenu>
                    </span>
                </td>
                <td class="pr10" width="110" align="right">生产日期</td>
                <td>
                	<span class="bootData21">
                        <div class="input-append date form_datetime " style="position:relative;" >
                        <h:inputText size="26"  readonly="#{facesContext.renderResponse}" id="afrproduceTimeId" styleClass="new_time" value="#{animalsArchivesInfoHome.animalFeedRecord.produceTime}" style="height:34px;"/>
                        <span class="add-on" style="position:absolute; right:10px; top:10px;"><i class="icon-th" style="margin:0;"></i></span>
                        </div>
                        <h:inputHidden value="#{animalsArchivesInfoHome.animalFeedRecord.produceTime}" id="afrproduceTimeId3"/>
                        
                    </span>
                </td>
            </tr>
            <tr>
            	<td class="pr10" width="110" align="right">有效期</td>
                <td width="262">
                	<span class="bootSelt21">
                    <h:inputText id="afrValidityId" value="#{animalsArchivesInfoHome.animalFeedRecord.validity}" styleClass="form-control" style="width:200px;"/>
                    </span>
                    <span class="fl" style="line-height:34px;">&nbsp;天</span>
                </td>
                <td class="pr10" width="110" align="right">禽畜状态</td>
                <td>
                	<span class="bootSelt21">
                	<h:panelGroup id="vOfsId4">
                     <h:selectOneMenu immediate="true" styleClass="selectpicker afr1" id="afranimalStatusId" style="width:146px;" value="#{animalsArchivesInfoHome.afranimalStatusId}">
						<s:selectItems value="#{animalsArchivesInfoHome.stateList}" var="var" label="#{var.name}" itemValue="#{var.id}" escape="false"/>
					 </h:selectOneMenu>
					 </h:panelGroup>
                    </span>
                </td>
            </tr>
            <tr>
            	<td class="pr10" width="110" align="right">开始使用时间</td>
                <td width="262">
                	<span class="bootData21">
                        <div class="input-append date form_datetime " style="position:relative;" >
                        <h:inputText size="26"  readonly="#{facesContext.renderResponse}" id="afrUseBeginTime" styleClass="new_time" value="#{animalsArchivesInfoHome.animalFeedRecord.useBeginTime}"/>
                        <span class="add-on" style="position:absolute; right:10px; top:10px;"><i class="icon-th" style="margin:0;"></i></span>
                        </div>
                        <h:inputHidden value="#{animalsArchivesInfoHome.animalFeedRecord.useBeginTime}" id="afrUseBeginTime3"/>
                    </span>
                </td>
                <td class="pr10" width="110" align="right">结束使用时间</td>
                <td>
                	<span class="bootData21">
                        <div class="input-append date form_datetime " style="position:relative;" >
                        <h:inputText size="26"  readonly="#{facesContext.renderResponse}" id="afrUseEndTime" styleClass="new_time" value="#{animalsArchivesInfoHome.animalFeedRecord.useEndTime}"/>
                        <span class="add-on" style="position:absolute; right:10px; top:10px;"><i class="icon-th" style="margin:0;"></i></span>
                        </div>
                        <h:inputHidden value="#{animalsArchivesInfoHome.animalFeedRecord.useEndTime}" id="afrUseEndTime3"/>

                    </span>
                </td>
            </tr>
            <tr>
            	<td class="pr10" width="110" align="right">总用量</td>
                <td width="262">
                	<span class="bootSelt21">
                    <h:inputText id="afrAmountId" value="#{animalsArchivesInfoHome.animalFeedRecord.amount}" styleClass="form-control" style="width:200px;"/>
                    </span>
                    <span class="fl" style="line-height:34px;">&nbsp;吨</span>
                </td>
                <td class="pr10" width="110" align="right">操作人</td>
                <td>
                	<span class="bootSelt21">
                    <h:selectOneMenu immediate="true" styleClass="selectpicker" id="myfarfarmerInfoId" style="width:146px;" value="#{animalsArchivesInfoHome.myfarfarmerInfoId}">
						<s:selectItems value="#{animalsArchivesInfoHome.psersonList}" var="var" label="#{var.name}" itemValue="#{var.farmerInfoId}" escape="false"/>
					</h:selectOneMenu>
                    </span>
                </td>
            </tr>
            <tr>
            	<td class="pr10" width="110" align="right">图片</td>
            	<td colspan="3">
	            	<div style="overflow: auto;height: 144px;width: 580px;">
	            	 	<h:inputHidden value="#{animalsArchivesInfoHome.animalFeedRecord.imageUrlName}" id="imageUrlNameIds"/>
	            	    <ui:fragment rendered="#{animalsArchivesInfoHome.animalFeedRecord.imageUrlName!=''}">
		            		<a4j:repeat value="#{animalsArchivesInfoHome.animalFeedRecord.imageUrlName.split(',')}"  var="obj" rowKeyVar="_index">
			            		<div class="farmingInputs fl">
			                   		<a class="farmingInputs_pic"><img src="#{obj}" width="128" height="128" class="farmPicUrl"/></a>
			                    	<em class="closeInputs" onclick="delPic(this)"><img src="#{request.contextPath}/asset/images/clo_04.jpg" /></em>
			                    </div>
		                    </a4j:repeat>
	                    </ui:fragment>
	            		<iframe src="#{request.contextPath}/livestock/AnimalFeedRecordImg.seam" id="afriframe2" name="afriframe2" frameBorder="0" scrolling="no" width="" height="140" onLoad="" style="width:128px; height:140px"></iframe>
	            	</div>
            	</td>
            </tr>
            <tr>
            	<td class="pr10" width="110" align="right">备注</td>
                <td colspan="3">
                	<span class="bootTextarea">
                		<h:inputTextarea id="afrRemarkId" styleClass="form-control area_textarea" value="#{animalsArchivesInfoHome.animalFeedRecord.remark}" />
					    <h:inputHidden value="#{animalsArchivesInfoHome.afrindexof}" id="afrindexof"/>
					</span>
                </td>
            </tr>
        </table>     
    </div>
    <div class="modal-footer">
    	 <a4j:commandButton id="xanimalFeedIds" action="#{animalsArchivesInfoHome.updateAnimalFeed}" onclick="if(!afrAdd(3))return false;jquery('.afrbutton').prop('disabled','true');" oncomplete="jquery('.afrbutton').removeAttr('disabled');"  value="提交" styleClass="btn btn-success afrbutton"  reRender="myAfr"/>
        <a class="btn btn-default" data-dismiss="modal" href="#">关闭</a>
    </div>
    </h:panelGroup>
</div>
</div>
</div>
</h:form>

            </td>    
<a4j:form>
	<a4j:queue requestDelay="10" ignoreDupResponses="true"/>
    <a4j:jsFunction name="varietiesOfState" reRender="vOfsId1,vOfsId3,vOfsId4,tiiPanel,enPanel" action="#{animalsArchivesInfoHome.varietiesOfState()}" oncomplete="huidiao1()">
  		<a4j:actionparam name="animalSpeciesId" assignTo="#{animalsArchivesInfoHome.animalSpeciesId}"/>
    </a4j:jsFunction>
    <a4j:jsFunction name="searchTunnelList" reRender="tiiPanel,enPanel" action="#{animalsArchivesInfoHome.getTunnelList()}" oncomplete="huidiao1()"> 
    	<a4j:actionparam name="animalSpeciesId" assignTo="#{animalsArchivesInfoHome.animalSpeciesId}"/>
  		<a4j:actionparam name="myanimalId" assignTo="#{animalsArchivesInfoHome.myanimalId}"/>
    </a4j:jsFunction>
    <a4j:jsFunction name="searchNumberList" reRender="enPanel" action="#{animalsArchivesInfoHome.getEarNumberList()}" oncomplete="huidiao2()"> 
    	<a4j:actionparam name="animalSpeciesId" assignTo="#{animalsArchivesInfoHome.animalSpeciesId}"/>
  		<a4j:actionparam name="myanimalId" assignTo="#{animalsArchivesInfoHome.myanimalId}"/>
  		<a4j:actionparam name="tunnelIds" assignTo="#{animalsArchivesInfoHome.tunnelIds}"/>
    </a4j:jsFunction>
 	</a4j:form>
<script type="text/javascript">
//<![CDATA[
	function myType(typeid){
		varietiesOfState(typeid);
	}
	 //改变品种，联动圈舍
    function searchTunnel(animalId){
    	var myanimalSpeciesId=jquery("#all\\:myanimalSpeciesId").val();
    	searchTunnelList(myanimalSpeciesId,animalId);
    }
    //改变圈舍，联动编号
    function searchNumber(){
    	var myanimalSpeciesId=jquery("#all\\:myanimalSpeciesId").val();
    	var animalId=jquery("#all\\:myanimalId").val();
        var tunnelId=jquery("#tunnelInfoId").val();
        if(null!=tunnelId && ""!=tunnelId){
        	tunnelId="'"+tunnelId+"'";
        }else{
        	tunnelId="";
        }       
    	searchNumberList(myanimalSpeciesId,animalId,tunnelId);
    }
	function huidiao1(){
		//圈舍、编号默认全部
		jquery('#tunnelInfoId').selectpicker({noneSelectedText:"全部"});
		jquery('#tunnelInfoId').selectpicker('deselectAll');
		jquery('#eartagNumber').selectpicker({noneSelectedText:"全部"});
		jquery('#eartagNumber').selectpicker('deselectAll');
		jquery('.selectpicker').selectpicker();
	}
	function huidiao2(){
		jquery('#eartagNumber').selectpicker({noneSelectedText:"全部"});
		jquery('#eartagNumber').selectpicker('deselectAll');
		jquery('.selectpicker').selectpicker();
	}
	function isInteger(value){
		var mny =RegExp(/^([1-9])?[0-9]+$/);
		return mny.test(value);
	}	
	function vmrAdd(savenum){
		var vmrValidity="";
		var myvmrfarmerInfo="";
		
		if(jquery(".vmr1").val() == "" || jquery(".vmr1").val() == null){
			alert("兽药名称不能为空！");
			return false;
		}
		if(savenum==1 || savenum==2){
			vmrValidity=jquery("#vmr\\:vmrValidityId").val();
			myvmrfarmerInfo=jquery("#vmr\\:myvmrfarmerInfoId").val();

			var imgSrcs=""
			if(jquery('#vmriframe').contents().find('.imgBox img').length!=0){
				jquery('#vmriframe').contents().find('.imgBox img').each(function(){
					imgSrcs+=jquery(this).attr('src')+",";
				})
				imgSrcs=imgSrcs.substring(0,imgSrcs.length-1);
			}
			jquery('#vmr\\:imageUrlNameIds').val(imgSrcs);
		}else if(savenum==3){
			vmrValidity=jquery("#xvmr\\:vmrValidityId").val();
			myvmrfarmerInfo=jquery("#xvmr\\:myvmrfarmerInfoId").val();

			var imgSrcs=""
				//	if(jquery('#vmriframe2').contents().find('.imgBox img').length!=0){
		//		jquery('#vmriframe2').contents().find('.imgBox img').each(function(){
		//			imgSrcs+=jquery(this).attr('src')+",";
		//		})
		//	}
			if(jquery('#xvmr .farmingInputs .farmingInputs_pic img').length!=0){
				jquery('#xvmr .farmingInputs .farmingInputs_pic img').each(function(){
					imgSrcs+=jquery(this).attr('src')+",";
				})
				
			}
			if(imgSrcs!=""){
				imgSrcs=imgSrcs.substring(0,imgSrcs.length-1);
			}	
			jquery('#xvmr\\:imageUrlNameIds').val(imgSrcs);
		}
		if(vmrValidity != "" && vmrValidity != null){
			if(!isInteger(vmrValidity)){
				alert("有效期需为正整数！");
				return false;
			}else if(vmrValidity.length>4){
				alert("有效期不能大于4位数字");
				return false;
			}
		}
		
		if(myvmrfarmerInfo == "" || myvmrfarmerInfo == null){
			alert("操作人不能为空！");
			return false;
		}
		if(savenum==1){
			if(jquery('#vmr\\:vmrWithdrawalTimeId').val()<jquery('#vmr\\:vmrMedicationTimeId').val()){
				alert("停药时间必须大于用药时间！");
				return false;
				}
			jquery('#vmr\\:vmrproduceTimeId2').val(jquery('#vmr\\:vmrproduceTimeId').val());
			jquery('#vmr\\:vmrMedicationTimeId2').val(jquery('#vmr\\:vmrMedicationTimeId').val());
			jquery('#vmr\\:vmrWithdrawalTimeId2').val(jquery('#vmr\\:vmrWithdrawalTimeId').val());
			jquery("#myModal").modal("hide");
		}
		if(savenum==2){
			if(jquery('#vmr\\:vmrWithdrawalTimeId').val()<jquery('#vmr\\:vmrMedicationTimeId').val()){
				alert("停药时间必须大于用药时间！");
				return false;
				}
			jquery('#vmr\\:vmrproduceTimeId2').val(jquery('#vmr\\:vmrproduceTimeId').val());
			jquery('#vmr\\:vmrMedicationTimeId2').val(jquery('#vmr\\:vmrMedicationTimeId').val());
			jquery('#vmr\\:vmrWithdrawalTimeId2').val(jquery('#vmr\\:vmrWithdrawalTimeId').val());
		}
		if(savenum==3){
			if(checkEndTime(jquery('#xvmr\\:vmrMedicationTimeId').val(),jquery('#xvmr\\:vmrWithdrawalTimeId').val())){
				alert("停药时间必须大于用药时间！");
				return false;
				}
			jquery('#xvmr\\:vmrproduceTimeId3').val(jquery('#xvmr\\:vmrproduceTimeId').val());
			jquery('#xvmr\\:vmrMedicationTimeId3').val(jquery('#xvmr\\:vmrMedicationTimeId').val());
			jquery('#xvmr\\:vmrWithdrawalTimeId3').val(jquery('#xvmr\\:vmrWithdrawalTimeId').val());
			jquery("#xmyModal").modal("hide");
		}
		return true;
	}
	function tianjiaVmr(){
		jquery("#vmr\\:vmiId").selectpicker("val",jquery("#vmr\\:vmiId option:eq(0)").val());
		jquery("#vmr\\:vmrproduceTimeId").val("");
		jquery("#vmr\\:vmrValidityId").val("");
		jquery("#vmr\\:vmrEtiologyId").val("");
		jquery("#vmr\\:vmrClinicResultsId").val("");
		jquery("#vmr\\:vmrMedicationTimeId").val("");
		jquery("#vmr\\:vmrWithdrawalTimeId").val("");
		jquery("#vmr\\:myvmrfarmerInfoId").selectpicker("val",jquery("#vmr\\:myvmrfarmerInfoId option:eq(0)").val());
		jquery("#vmr\\:vmrAmountId").val("");
		jquery("#vmr\\:vmrWithdrawalPeriodId").val("");
		jquery("#vmr\\:vmrRemarkId").val("");
		jquery('#vmriframe').contents().find('#remall').click();
	}
	function xtianjiaVmr(){
		jquery('.vmrbuttonsave').removeAttr('disabled');
		tianjiaVmr();
	}
	function openvmr(num){
		jquery("#xmyModal").modal("show");
		jquery("#xvmr\\:vmrindexof").attr("value",num);
		jquery('.selectpicker').selectpicker();
		jquery(".form_datetime").datetimepicker({
			format: "yyyy-mm-dd",  /* 控制显示格式，默认为空，显示小时分钟 */
			autoclose: true,
			weekStart: 1,
			language:  'zh-CN',
			startView: 3,
			minView: 2,
			maxView: 2,		
			pickerPosition: "bottom-left"
		});
		
	}

	function delPic(obj){
		jquery(obj).parent().remove();
	}
	
	function afrAdd(savenum){
		var vmrValidity="";
		var myvmrfarmerInfo="";
		var afranimaStatus="";
		if(jquery(".afr1").val() == "" || jquery(".afr1").val() == null){
			alert("饲料名称不能为空！");
			return false;
		}
		if(savenum==1 || savenum==2){
			vmrValidity=jquery("#afr\\:afrValidityId").val();
			myvmrfarmerInfo=jquery("#afr\\:myfarfarmerInfoId").val();
			afranimaStatus=jquery("#afr\\:afranimalStatusId").val();

			var imgSrcs=""
			if(jquery('#afriframe').contents().find('.imgBox img').length!=0){
				jquery('#afriframe').contents().find('.imgBox img').each(function(){
					imgSrcs+=jquery(this).attr('src')+",";
				})
				imgSrcs=imgSrcs.substring(0,imgSrcs.length-1);
			}
			jquery('#afr\\:imageUrlNameIds').val(imgSrcs);
		}else if(savenum==3){
			vmrValidity=jquery("#xafr\\:afrValidityId").val();
			myvmrfarmerInfo=jquery("#xafr\\:myfarfarmerInfoId").val();
			afranimaStatus=jquery("#xafr\\:afranimalStatusId").val();

			var imgSrcs=""
				//if(jquery('#afriframe2').contents().find('.imgBox img').length!=0){
				//jquery('#afriframe2').contents().find('.imgBox img').each(function(){
					//imgSrcs+=jquery(this).attr('src')+",";
				//})
			//}
			if(jquery('#xafr .farmingInputs .farmingInputs_pic img').length!=0){
				jquery('#xafr .farmingInputs .farmingInputs_pic img').each(function(){
					imgSrcs+=jquery(this).attr('src')+",";
				})
			}
			if(imgSrcs!=""){
				imgSrcs=imgSrcs.substring(0,imgSrcs.length-1);
			}	
			jquery('#xafr\\:imageUrlNameIds').val(imgSrcs);
		}
		if(vmrValidity != "" && vmrValidity != null){
			if(!isInteger(vmrValidity)){
				alert("有效期需为正整数！");
				return false;
			}else if(vmrValidity.length>4){
				alert("有效期不能大于4位数字");
				return false;
			}
		}
		if(afranimaStatus == "" || afranimaStatus == null){
			alert("禽畜状态不能为空！");
			return false;
		}
		if(myvmrfarmerInfo == "" || myvmrfarmerInfo == null){
			alert("操作人不能为空！");
			return false;
		}	
		if(savenum==1){
			if(jquery('#afr\\:afrUseEndTime').val()<jquery('#afr\\:afrUseBeginTime').val()){
				alert("结束使用时间必须大于开始使用时间！");
				return false;
			}
			jquery('#afr\\:afrproduceTimeId2').val(jquery('#afr\\:afrproduceTimeId').val());
			jquery('#afr\\:afrUseBeginTime2').val(jquery('#afr\\:afrUseBeginTime').val());
			jquery('#afr\\:afrUseEndTime2').val(jquery('#afr\\:afrUseEndTime').val());
			jquery("#myModal_syxx").modal("hide");
		}
		if(savenum==2){
			if(jquery('#afr\\:afrUseEndTime').val()<jquery('#afr\\:afrUseBeginTime').val()){
				alert("结束使用时间必须大于开始使用时间！");
				return false;
			}
			jquery('#afr\\:afrproduceTimeId2').val(jquery('#afr\\:afrproduceTimeId').val());
			jquery('#afr\\:afrUseBeginTime2').val(jquery('#afr\\:afrUseBeginTime').val());
			jquery('#afr\\:afrUseEndTime2').val(jquery('#afr\\:afrUseEndTime').val());
		}
		if(savenum==3){
			if(checkEndTime(jquery('#xafr\\:afrUseBeginTime').val(),jquery('#xafr\\:afrUseEndTime').val())){
				alert("结束使用时间必须大于开始使用时间！");
				return false;
			}
			jquery('#xafr\\:afrproduceTimeId3').val(jquery('#xafr\\:afrproduceTimeId').val());
			jquery('#xafr\\:afrUseBeginTime3').val(jquery('#xafr\\:afrUseBeginTime').val());
			jquery('#xafr\\:afrUseEndTime3').val(jquery('#xafr\\:afrUseEndTime').val());
			jquery("#xmyModal_syxx").modal("hide");
		}
		return true;
	}
	function tianjiaAfr(){
		jquery("#afr\\:afiId").selectpicker("val",jquery("#afr\\:afiId option:eq(0)").val());
		jquery("#afr\\:afrproduceTimeId").val("");
		jquery("#afr\\:afrValidityId").val("");
		jquery("#afr\\:afranimalStatusId").selectpicker("val",jquery("#afr\\:afranimalStatusId option:eq(0)").val());
		jquery("#afr\\:afrUseBeginTime").val("");
		jquery("#afr\\:afrUseEndTime").val("");
		jquery("#afr\\:afrAmountId").val("");
		jquery("#afr\\:myfarfarmerInfoId").selectpicker("val",jquery("#afr\\:myfarfarmerInfoId option:eq(0)").val());
		jquery("#afr\\:afrRemarkId").val("");
		jquery('#afriframe').contents().find('#remall').click();
	}
	function xtianjiaAfr(){
		jquery('.afrbuttonsave').removeAttr('disabled');
		tianjiaAfr();
	}
	function openafr(num){
		jquery("#xmyModal_syxx").modal("show");
		jquery("#xafr\\:afrindexof").attr("value",num);
		jquery('.selectpicker').selectpicker();
		jquery(".form_datetime").datetimepicker({
			format: "yyyy-mm-dd",  /* 控制显示格式，默认为空，显示小时分钟 */
			autoclose: true,
			weekStart: 1,
			language:  'zh-CN',
			startView: 3,
			minView: 2,
			maxView: 2,		
			pickerPosition: "bottom-left"
		});
	}

	function vrAdd(savenum){
		var vmrValidity="";
		var myvmrfarmerInfo="";

		if(jquery(".vr1").val() == "" || jquery(".vr1").val() == null){
			alert("疫苗名称不能为空！");
			return false;
		}
		if(savenum==1 || savenum==2){
			vmrValidity=jquery("#vr\\:vrValidityId").val();
			myvmrfarmerInfo=jquery("#vr\\:myvrfarmerInfoId").val();

			var imgSrcs=""
			if(jquery('#vriframe').contents().find('.imgBox img').length!=0){
				jquery('#vriframe').contents().find('.imgBox img').each(function(){
					imgSrcs+=jquery(this).attr('src')+",";
				})
				imgSrcs=imgSrcs.substring(0,imgSrcs.length-1);
			}
			jquery('#vr\\:imageUrlNameIds').val(imgSrcs);
		}else if(savenum==3){
			vmrValidity=jquery("#xvr\\:vrValidityId").val();
			myvmrfarmerInfo=jquery("#xvr\\:myvrfarmerInfoId").val();

			var imgSrcs=""
				//if(jquery('#vriframe2').contents().find('.imgBox img').length!=0){
				//jquery('#vriframe2').contents().find('.imgBox img').each(function(){
				//	imgSrcs+=jquery(this).attr('src')+",";
				//})
			//}
			if(jquery('#xvr .farmingInputs .farmingInputs_pic img').length!=0){
				jquery('#xvr .farmingInputs .farmingInputs_pic img').each(function(){
					imgSrcs+=jquery(this).attr('src')+",";
				})
				
			}
			if(imgSrcs!=""){
				imgSrcs=imgSrcs.substring(0,imgSrcs.length-1);
			}	
			jquery('#xvr\\:imageUrlNameIds').val(imgSrcs);
		}
		if(vmrValidity != "" && vmrValidity != null){
			if(!isInteger(vmrValidity)){
				alert("有效期需为正整数！");
				return false;
			}else if(vmrValidity.length>4){
				alert("有效期不能大于4位数字");
				return false;
			}
		}
		if(myvmrfarmerInfo == "" || myvmrfarmerInfo == null){
			alert("操作人不能为空！");
			return false;
		}	

		if(savenum==1){
			if(jquery('#vr\\:vrImmuneTimeId').val()<jquery('#vr\\:vrproduceTimeId').val()){
				alert("免疫时间必须大于生产日期！");
				return false;
			}
			jquery('#vr\\:vrproduceTimeId2').val(jquery('#vr\\:vrproduceTimeId').val());
			jquery('#vr\\:vrImmuneTimeId2').val(jquery('#vr\\:vrImmuneTimeId').val());
			jquery("#myModal_myjl").modal("hide");
		}
		if(savenum==2){
			if(jquery('#vr\\:vrImmuneTimeId').val()<jquery('#vr\\:vrproduceTimeId').val()){
				alert("免疫时间必须大于生产日期！");
				return false;
			}
			jquery('#vr\\:vrproduceTimeId2').val(jquery('#vr\\:vrproduceTimeId').val());
			jquery('#vr\\:vrImmuneTimeId2').val(jquery('#vr\\:vrImmuneTimeId').val());
		}
		if(savenum==3){
			if(checkEndTime(jquery('#xvr\\:vrproduceTimeId').val(),jquery('#xvr\\:vrImmuneTimeId').val())){
				alert("免疫时间必须大于生产日期！");
				return false;
			}
			jquery('#xvr\\:vrproduceTimeId3').val(jquery('#xvr\\:vrproduceTimeId').val());
			jquery('#xvr\\:vrImmuneTimeId3').val(jquery('#xvr\\:vrImmuneTimeId').val());
			jquery("#xmyModal_myjl").modal("hide");
		}
		return true;
	}
	function tianjiaVr(){
		jquery("#vr\\:viId").selectpicker("val",jquery("#vr\\:viId option:eq(0)").val());
		jquery("#vr\\:vrproduceTimeId").val("");
		jquery("#vr\\:vrValidityId").val("");
		jquery("#vr\\:vrImmuneTimeId").val("");
		jquery("#vr\\:myvrfarmerInfoId").selectpicker("val",jquery("#vr\\:myvrfarmerInfoId option:eq(0)").val());
		jquery("#vr\\:vrImmuneMethodId").val("");
		jquery("#vr\\:vrAmountId").val("");
		jquery("#vr\\:vrRemarkId").val("");
		jquery('#vriframe').contents().find('#remall').click();
	}
	function xtianjiaVr(){
		jquery('.vrbuttonsave').removeAttr('disabled');
		tianjiaVr();
	}
	function openvr(num){
		jquery("#xmyModal_myjl").modal("show");
		jquery("#xvr\\:vrindexof").attr("value",num);
		jquery('.selectpicker').selectpicker();
		jquery(".form_datetime").datetimepicker({
			format: "yyyy-mm-dd",  /* 控制显示格式，默认为空，显示小时分钟 */
			autoclose: true,
			weekStart: 1,
			language:  'zh-CN',
			startView: 3,
			minView: 2,
			maxView: 2,		
			pickerPosition: "bottom-left"
		});
	}



	
	function allSubmit() {
		jquery("#all\\:outType").val(jquery(".type1").parent().next().find('.checked').find('.iRadio').val());
		jquery("#all\\:slaughterType").val(jquery(".type2").parent().next().find('.checked').find('.iRadio').val());
		var outImg = "";
		jquery("#myframe2").contents().find(".plant_imgbd").each(function(){
			outImg +=jquery(this).attr('src')+",";
		})
		jquery("#all\\:outfencesAqsiqUrls").attr("value",outImg);
		var slaughterImg = "";
		jquery("#myframe4").contents().find(".plant_imgbd").each(function(){
			slaughterImg +=jquery(this).attr('src')+",";
		})
		jquery("#all\\:slaughterUrls").attr("value",slaughterImg);
		if(document.getElementById("all:myanimalSpeciesId").value==""){
			alert("所属类型不能为空！")
			return false;
		}
		if(document.getElementById("all:myanimalId").value==""){
			alert("品种名称不能为空！")
			return false;
		}
		if(document.getElementById("tunnelInfoId").value==""){
			//alert("所在圈舍不能为空！")
			//return false;
		}
		if(jquery('#all\\:slaughterDeptId').val()!="" && jquery('#all\\:slaughterDeptId').val().length>20){
			alert("检疫部门不能大于20字！")
			return false;
		}
		if(jquery('#all\\:slaughterContentId').val()!="" && jquery('#all\\:slaughterContentId').val().length>40){
			alert("检测内容不能大于40字！")
			return false;
		}

		if(jquery('#all\\:outfencesAqsiqDeptId').val()!="" && jquery('#all\\:outfencesAqsiqDeptId').val().length>20){
			alert("检疫部门不能大于20字！")
			return false;
		}
		if(jquery('#all\\:outfencesAqsiqContentId').val()!="" && jquery('#all\\:outfencesAqsiqContentId').val().length>40){
			alert("检测内容不能大于40字！")
			return false;
		}

		
		jquery('#all\\:tunnelInfoIdHidden').val(jquery("#tunnelInfoId").val());
		jquery('#all\\:animalsArchivesIdsHidden').val(jquery("#eartagNumber").val());
		jquery('#all\\:outfencesTimeId2').val(jquery('#all\\:outfencesTimeId').val());
		jquery('#all\\:slaughterTimeId2').val(jquery('#all\\:slaughterTimeId').val());
		return true;
	}
    function checkEndTime(startTime,endTime){  
        var start=new Date(startTime.replace("-", "/").replace("-", "/"));  
        var end=new Date(endTime.replace("-", "/").replace("-", "/"));  
        if(end<start){  
            return true;  
        }  
        return false;  
    }  
   
	//]]>
</script>

<script type="text/javascript">
//<![CDATA[
jquery = jQuery.noConflict();
jquery(window).load(function() {
	varietiesOfState(jquery("#all\\:myanimalSpeciesId").val());
	jquery(".round_shade_box").remove();
});
jquery(function(){
	magnifier();	
	
	// 时间控件 开始
	jquery(".form_datetime").datetimepicker({
		format: "yyyy-mm-dd",  /* 控制显示格式，默认为空，显示小时分钟 */
		autoclose: true,
		weekStart: 1,
		language:  'zh-CN',
		startView: 3,
		minView: 2,
		maxView: 2,		
		pickerPosition: "bottom-left"
	});
	
	// 单选按钮 开始
	jquery('input[class=iRadio]').iCheck({
		radioClass: 'iradio_minimal-blue',
	});
	//圈舍、编号默认全部
	jquery('#tunnelInfoId').selectpicker({noneSelectedText:"全部"});
	jquery('#tunnelInfoId').selectpicker('deselectAll');
	jquery('#eartagNumber').selectpicker({noneSelectedText:"全部"});
	jquery('#eartagNumber').selectpicker('deselectAll');
	// 下拉框 开始
	jquery('.selectpicker').selectpicker();
	// 表格模板隔行换色 开始 
	jquery('.tableModel tbody tr').mouseover(function(){
		jquery(this).addClass('hover');
	});
	jquery('.tableModel tbody tr').mouseout(function(){
		jquery(this).removeClass('hover');
	});	

});

/*  通用添加图片 开始 */
function magnifier(){
	jquery('.baseAddLi a').click(function(){
	jquery('body').append('<div id="fadeMini" style="position:fixed; width:100%; height:100%; background:rgba(0,0,0,0.5); left:0; top:0; z-index:100;"></div>');	
		var img = jquery(this).find("img");
		var _th = jquery(this);
		var realWidth;//真实的宽度
		var realHeight;//真实的高度
		
		jquery("<img/>").attr("src", jquery(img).attr("src")).load(function() {
			realWidth = this.width;
			realHeight = this.height;
			var width = document.body.clientWidth-30;
			var height = document.body.clientHeight-30;
			var a1 = realWidth/width;
			var a2 = realHeight/height;
			if(a1>a2){
				_th.next().css("max-width",width+"px");
				_th.next().find(".baseAddModel_body").css("max-width",width+"px");
				_th.next().find("#zoomId").css("max-width",width+"px");
				if(realWidth>width){
					_th.next().css("left","15px");
					var x = width/realWidth*realHeight;
					_th.next().css("top",(height-x)/2+"px");
				}else{
					_th.next().css("top",(height-realHeight)/2+"px");
					_th.next().css("left",(width-realWidth)/2+"px");
				}
			}else{
				_th.next().css("max-height",height+"px");
				_th.next().find(".baseAddModel_body").css("max-height",height+"px");
				_th.next().find("#zoomId").css("max-height",height+"px");
				if(realHeight>height){
					_th.next().css("top","15px");
					var x = height/realHeight*realWidth;
					_th.next().css("left",(width-x)/2+"px");
				}else{
					_th.next().css("top",(height-realHeight)/2+"px");
					_th.next().css("left",(width-realWidth)/2+"px");
				}
			}
			_th.next().css('display','block')
			.parent().siblings().children('a').next().hide();
			jquery('.baseAddModel_close').click(function(){
				jquery(this).parent().hide();
				jquery('#fadeMini').remove();	
			});
			
		});
	});
	jquery('.baseAddLi a .closeBtn').click(function(){
		jquery(this).parents('.baseAddLi').remove();	
	});
	/*jquery('.baseAddLi a').blur(function(){
		jquery(this).next('.baseAddModel').hide();
		jquery('#fadeMini').remove();	
	});*/
	
};
/* 放大镜 结束 */
//]]>
</script>




	</ui:define>

</ui:composition>

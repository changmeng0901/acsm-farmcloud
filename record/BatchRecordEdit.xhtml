<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:a="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:c="http://java.sun.com/jstl/core"
    template="/layout/template_new2.xhtml">
    
<ui:define name="body">
<link rel="stylesheet" type="text/css" href="#{request.contextPath}/asset/css/materielAnalysis.css"/>
 <link rel="stylesheet" type="text/css" href="#{request.contextPath}/asset/css/lsll.css"/>
 <link rel="stylesheet" type="text/css" href="#{request.contextPath}/asset/css/printPop.css"/>
  <link rel="stylesheet" type="text/css" href="#{request.contextPath}/asset/css/checkBox/skinBlue.css"/>
  <script type="text/javascript" src="#{request.contextPath}/asset/js/checkBox/icheck.js"></script>

<script type="text/javascript">

window.onload = function () {
    jquery('.selectpicker').selectpicker();
  };
</script>
<td valign="top" >
<div aria-hidden="false" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="myModal" class="modal fade in w600na" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">提示框</h4>
      </div>
      <div class="modal-body">
       <span id="productMsg">*号部分为必填项！</span>
        
        
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
        <button type="button" class="btn btn-primary" data-dismiss="modal">确认</button>
      </div>
    </div>
  </div>
</div>
<div class="right_c">
                	<div class="r_title clear">
                    	<div class="r_t_l fl">精准营销&#160;&gt;&#160;&#160;履历&#160;&gt;&#160;&#160;<font size="3">履历制作</font></div>
                        <div class="fr" style="margin-bottom:-1px;">
                        	<ul class="cm_resumeList clear">
                        		 <h:panelGroup rendered="#{param.source==1}">
                                 <li>
                                	<a  href="#{request.contextPath}/record/ProductBaseInfoList.seam?lvliType=1"><img src="#{request.contextPath}/asset/images/cm_lsllIco01.jpg"/><span>履历设计</span></a>
                                </li>
                                <li>
                                	<a  href="#{request.contextPath}/record/ProductBaseInfoList.seam?lvliType=2"><img src="#{request.contextPath}/asset/images/lvliyl-ico1.jpg"/><span>履历预览</span></a>
                                </li>
                                 </h:panelGroup>
				                <h:panelGroup rendered="#{param.source==2}">
				                    <li>
				                    	<a  href="#{request.contextPath}/resume/NewPhoneModelInfoList.seam"><img src="../asset/images/resume/icon6.png" /><span>履历列表</span></a>
				                    </li>
				                </h:panelGroup>
                            	<li>
                                	<a  href="#{request.contextPath}/record/UsedResume.seam?source=#{param.source}" class="borderBt" ><img src="#{request.contextPath}/asset/images/cm_lsllIco02.jpg" /><span>履历制作</span></a>
                                </li>
                                <li>
                    				<a href="#{request.contextPath}/record/ResumeTracing.seam?source=#{param.source}" ><img src="#{request.contextPath}/asset/images/cm_lsllIco05.png" /><span>履历追溯</span></a>
                   				 </li>
                        	</ul>
                        </div>
                    </div>
                    <br/>
                    
					<div class="print_ser_div">
                                    <table cellpadding="0" cellspacing="0" class="print_sertable">
                                        <tr>
                                            <td>编码：</td>
                                            <td><input type="text" class="form-control nw75" id="s1"/></td>
                                            <td>&#160;<img src="#{request.contextPath}/asset/images/line.png" width="10" height="26" />&#160;</td>
                                            <td><input type="text" class="form-control nw75" id="e1"/></td>
                                         </tr>
                                     </table>  
                                    <table cellpadding="0" cellspacing="0" class="print_sertable">
                                        <tr>
                                            <td>履历名称：</td>
                                            <td><input type="text" class="form-control nw200" id="n1"/></td>
                                         </tr>
                                     </table>  
                                    <div class="print_sertable"><a href="#" onclick="searchOne()" class="btn btn-primary">搜索</a></div>	
                                    <div class="pli_tj"><a href="#" onclick="return checkSelect(1);" class="btn btn-success">添加</a></div>
                                </div>    
                                 <h:form>
                                <h:panelGroup id="refreshT">
                                <s:span id="custom">
                                    <!-- #{batchRecordHome.work2()} -->
                                <table width="100%" class="pil_table" cellpadding="0" cellspacing="0">
                                    <tr>
                                        <td width="5" height="4"><img src="#{request.contextPath}/asset/images/table_d_40.jpg" width="5" height="4" /></td>
                                        <td style="border-top:1px solid #e1e1e1;border-right:1px solid #e1e1e1; background:#f0f5fb;"></td>
                                        <td style="border-top:1px solid #e1e1e1;border-right:1px solid #e1e1e1; background:#f0f5fb;"></td>
                                        <td style="border-top:1px solid #e1e1e1;border-right:1px solid #e1e1e1; background:#f0f5fb;"></td>
                                        <td style="border-top:1px solid #e1e1e1;border-right:1px solid #e1e1e1; background:#f0f5fb;"></td>
                                        <td style="border-top:1px solid #e1e1e1;border-right:1px solid #e1e1e1; background:#f0f5fb;"></td>
                                        <td style="border-top:1px solid #e1e1e1;border-right:1px solid #e1e1e1; background:#f0f5fb;"></td>
                                        <td style="border-top:1px solid #e1e1e1;border-right:1px solid #e1e1e1; background:#f0f5fb;"></td>
                                        <td style="border-top:1px solid #e1e1e1;border-right:1px solid #e1e1e1; background:#f0f5fb;"></td>
                                        <td style="border-top:1px solid #e1e1e1;border-right:1px solid #e1e1e1; background:#f0f5fb;"></td>
                                        <td style="border-top:1px solid #e1e1e1;border-right:1px solid #e1e1e1; background:#f0f5fb;"></td>
                                        <td style="border-top:1px solid #e1e1e1; background:#f0f5fb;"></td>
                                        <td width="5" height="4"><img src="#{request.contextPath}/asset/images/table_d_43.jpg" width="5" height="4" /></td>
                                    </tr>
                                    <tr>
                                        <th class="pil_bg ze_bt_le" width="5" height="4" style="border-right:none;"></th>
                                         <th class="pil_bg">起始编码</th>
                                        <th class="pil_bg">结束编码</th>
                                         <th class="pil_bg">模版名称</th>
                                        <th class="pil_bg">履历名称</th>
                                        <th class="pil_bg">检测机构</th>
                                        <th class="pil_bg">检测种类</th>
                                        <th class="pil_bg">采收日期</th>
                                        <th class="pil_bg">遇冷日期</th>
                                         <th class="pil_bg">检测日期</th>
                                         <th class="pil_bg">包装日期</th>
                                        
                                         <th class="pil_bg" style="border-right:none;">操作</th>
                                        <th class="pil_bg pil_btri" width="5" height="4"></th>
                                    </tr>
            						<a4j:repeat value="#{batchRecordHome.bccList}" var="obj" rowKeyVar="_index">
                                    <tr class="xx xx#{_index}" aa="#{_index}" bb="#{obj.id}">
                                        <td class="pil_bg2 ze_bt_le" width="5" height="4" style="border-right:none;"></td>
                                        <td class="pil_bg2">
                                        <input type="hidden" value="#{obj.beginNumber}" class=" check start#{_index}" />
                                           #{obj.beginNumber}
                                        </td>
                                        <td class="pil_bg2">
                                        <input type="hidden" value="#{obj.endNumber}" class=" check end#{_index}" />
                                            #{obj.endNumber}
                                        </td>
                                        <td class="pil_bg2 ">#{obj.phoneModelInfoId.name}</td>
                                        <td class="pil_bg2 prid searchName#{_index}" aa="#{obj.productInfoId.productInfoId}">#{obj.productInfoId.plantName}</td>
                                        <td class="pil_bg2 ">#{obj.testOrg}</td>
                                        <td class="pil_bg2 ">#{obj.testType}</td>
                                        <td class="pil_bg2 x_#{_index}_4" style="padding:2px"><h:outputText value="#{obj.harvestTime}">
								<s:convertDateTime type="both" dateStyle="short" pattern="yyyy-MM-dd HH:mm" />
						    </h:outputText></td>
						    <td class="pil_bg2 x_#{_index}_2" style="padding:2px"><h:outputText value="#{obj.precoolTime}">
								<s:convertDateTime type="both" dateStyle="short" pattern="yyyy-MM-dd HH:mm" />
						    </h:outputText></td>
                                        <td class="pil_bg2 x_#{_index}_1" style="padding:2px">
                                        <h:outputText value="#{obj.testTime}">
								<s:convertDateTime type="both" dateStyle="short" pattern="yyyy-MM-dd HH:mm" />
						    </h:outputText>
                                        </td>
                                        <td class="pil_bg2 x_#{_index}_3" style="padding:2px"><h:outputText value="#{obj.packTime}">
								<s:convertDateTime type="both" dateStyle="short" pattern="yyyy-MM-dd HH:mm" />
						    </h:outputText></td>
                                        
                                        <td class="pil_bg2" style="border-right:none;">
                                        <ui:fragment rendered="#{obj.productInfoId.deleted}" >
                                        <a style="background: url('#{request.contextPath}/asset/images/ydi.png') no-repeat scroll 0 0 rgba(0, 0, 0, 0);" class="list_edit" title="履历已被删除!" onclick="document.getElementById('productMsg').innerHTML = '履历已被删除！';jquery('#myModal').modal('show');">
                                        	</a>
                                        </ui:fragment> 
                                        <ui:fragment rendered="#{!obj.productInfoId.deleted}">
                                        <a class="list_edit" onclick="if(!edit('#{obj.enterpriseNumber}#{obj.bdCustomBatch.batchNumber}','#{obj.phoneModelInfoId.id}',
                                            '#{obj.productInfoId.productInfoId}','#{obj.beginNumber}','#{obj.endNumber}','#{obj.id}','#{obj.testOrg}','#{obj.testType}',
                                            '#{obj.harvestTime}' ,'#{obj.precoolTime}','#{obj.testTime}' ,'#{obj.packTime}','#{obj.bdCustomBatch.id}' ,'#{obj.orderNumber.orderInfoId}',
                                             '#{obj.farmerInfoId.farmerInfoId}','#{obj.productRecordTimesId.productRecordTimesId}','#{obj.farmerInfoId.name}',
                                             '#{obj.orderNumber.orderCode}','#{obj.detectionInfoId.id}','#{obj.resumeType}' )) return false;" title="编辑1"></a>
                                        </ui:fragment>
                                        <ui:fragment>
                                       		<a class="list_delete" title="删除" onclick="deleteItem(#{obj.id},this)"></a>
                                        </ui:fragment>
                                        </td>
                                        <td class="pil_bg2 pil_btri" width="5" height="4"></td>
                                    </tr>
                           </a4j:repeat>  
                                </table> 
                                </s:span> 
                                </h:panelGroup>  
                                <div class="pli_butdiv">
                                <div style="float: left;font-wight:bold;font-size:14px">原始张数:&#160;&#160;&#160;#{batchRecordHome.bcb_.total}&#160;张</div>
                                <s:button view="/record/BatchRecordList.xhtml" styleClass="btn btn-default" value="返回" rendered="#{empty editfrom}">
                                <f:param name="baseId" value="#{batchRecordHome.baseId}"></f:param>
                                </s:button>
                                <s:button view="/record/#{editfrom}.xhtml" styleClass="btn btn-default" value="返回" rendered="#{!empty editfrom}">
                                <f:param name="pageNum" value="#{pageNum}"></f:param>
                                <f:param name="baseId" value="#{batchRecordHome.baseId}"></f:param>
                                </s:button>
                                </div>
                                </h:form>
		</div>
		<style>
		.dr-mpnl-pnl-b{padding:0px;font-size:14px;font-weight:bold;}
		.rich-calendar-exterior{line-height:initial;}
		.rich-calendar-exterior td{font-weight:normal;}
		</style>
		<!-- Modal -->
		<!-- #{resumeHome.work3()} -->
<div class="modal fade" id="lv" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<a4j:form id="lvform" ajaxSubmit="true" >
                                            <div class="modal-dialog">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                    <button type="button" class="close" data-dismiss="modal"> </button>
                                                    <h4 class="modal-title font14" id="myModalLabel">对应履历</h4>
                                                    </div>
                                                    <div class="modal-body" style="padding-bottom:0;">
                                                   		<table class="farmingMageTab_jl">
                                                        	<tr>
                                                            	<td width="60" align="right">履历类型</td>
                                                                <td width="245" style="padding-left:15px;">
                                                                	<div class="sw170">
<!-- 												                        <select  class="selectpicker" id="resumeType" name="resumeType" style="width:100px;display:none;" onchange="resumeTypeChange(this.value)" > -->
<!-- 												                       		<option value="1">模板履历</option> -->
<!-- 												                       		<option value="2">自定义履历</option> -->
<!-- 																		</select> -->
																		<div style="float:left;" >
							                                        	<input type="radio" value="1" name="resumeType" id="resumeType1"  checked="checked" />
							                                        	<label style="font-weight: 100; margin: 0 5px;" for="resumeType1" >模板履历</label>
							                                        	</div>
							                                            <div style="float:left;" >
							                                            <input type="radio" value="2" name="resumeType" id="resumeType2"  />
							                                            <label style="font-weight: 100; margin: 0 5px;" for="resumeType2" >自定义履历</label>
							                                            </div>
																	</div>
                                                                </td>
                                                                <td width="60" align="right">对应履历</td>
                                                                <td width="200" style="padding-left:15px;">
                                                                	<div class="sw170" id="lvformprid2">
												                        <select  class="selectpicker lvformpr2" id="lvform:pr2" name="pr2" data-live-search="true" style="width:146px;display:none;" onchange="changePrt(this.value)"  >
												                       		<a4j:repeat value="#{resumeHome.prList}" var="var">
												                       		<option value="#{var[0]}">#{var[2]}&#160;#{var[1]}</option>
												                       		</a4j:repeat>
																		</select>
																	</div>
																	<div class="sw170" id="lvformprid3" style="display:none;">
												                        <select  class="selectpicker lvformpr2" id="lvform:pr3" name="pr3" data-live-search="true" style="width:146px;display:none;" onchange="changePrt(this.value)"  >
												                       		<a4j:repeat value="#{resumeHome.prCustomList}" var="var">
												                       		<option value="#{var[0]}">#{var[1]}</option>
												                       		</a4j:repeat>
																		</select>
																	</div>
                                                                </td>
                                                            </tr>
                                                            <tr>
<!--                                                             <td width="60" align="right">印刷批次</td> -->
<!--                                                                 <td width="245" style="padding-left:15px;"> -->
<!--                                                                                         <input type="hidden" value="" id="need" name="need"/> -->
<!--                                                                 	<div class="sw170"> -->
<!--                                                                 		<input type="text" value="#{batchRecordHome.bid}" id="batchId2" name="batchId" readonly="readonly"/> -->
<!-- 																	</div> -->
<!--                                                                 </td> -->
                                                           	<td width="60" align="right">对应编号</td>
                                                               <td width="245" style="padding-left:15px;">
                                                                 <input type="hidden" value="" id="need" name="need"/>
                                                                 <input type="hidden" value="" id="batchId2" name="batchId"/>
                                                                	<h:inputText value="#{resumeHome.start_}" id="start_" styleClass="form-control fl" style="width:85px;"/>
                                                                	<span class="fl" style="padding:0 2px;">—</span>
                                                                	<h:inputText value="#{resumeHome.end_}" id="end_" styleClass="form-control fl" style="width:85px;"/> 
                                                                </td>
                                                                <td width="60" align="right">包装人</td>
                                                                <td width="200" style="padding-left:15px;">
                                                               
                                                                	<select style="display: none;" class="selectpicker" id="farmer_id" name="farmer_id">
										                                    <option value="-1">请选择</option>
										                                    <a4j:repeat value="#{resumeHome.farmerList}" var="var" >
																				<option value="#{var[0]}">#{var[1]}</option>
																			</a4j:repeat> 
										                            </select>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td width="60" align="right">包装时间</td>
                                                                <td width="245" style="padding-left:15px;">
                                                                <div class="input-append date form_datetime land_testDate" >
                                                                <input size="26" type="text" value="" readonly="readonly" id="lvform:packtime_1InputDate" name="lvform:packtime_1InputDate" autocomplete="off"/>
                                                                <span class="add-on"><i class="icon-th leftDate" style="margin-top:5px;margin-right:-16px;"></i></span>
                                                                </div>
                                                                </td>
                                                            </tr>
                                                        </table>
                                                        <h2 class="extraMessage">附加信息</h2>
                                                        <div class="farmingMageTab_fjxx">
                                                        <table class="farmingMageTab_jl">
                                                        	<tr>
                                                            	<td width="60" height="34" align="right">订单编号</td>
                                                                <td width="245" style="padding-left:15px;">
                                                                	<select style="display: none;" class="selectpicker" id="order_id" name="order_id">
                                                                	<option value="-1">请选择</option>
                                                                	<a4j:repeat value="#{resumeHome.orderList}" var="var" >
										<option value="#{var[0]}">#{var[1]}&#160;#{var[2]}</option>
									</a4j:repeat>
                                                                    </select>
                                                                </td>
                                                                <td width="60" height="34" align="right">采收时间
                                                                <input type="hidden" value="" id="harvest_type" name="harvest_type"/>
                                                                <input type="hidden" value="" id="old_id" name="old_id"/>
                                                                </td>
                                                                <td width="200" style="padding-left:15px;">
                                                                <div class="caishou_date fl">
                                                                    <div class="input-append date form_datetime land_testDate " >
                                                                    <input size="26" type="text" value="" readonly="readonly" id="lvform:harvesttime_1InputDate"  name="lvform:harvesttime_1InputDate" autocomplete="off"/>
                                                                    <span class="add-on" style="margin-left:-28px;"><i class="icon-th" style="margin-right:28px;"></i></span>
                                                                    </div>
                                                                    <div class="caishou_selt sw171">
                                                                    <select style="display: none;" class="selectpicker" id="prt_id" name="prt_id" onchange="resetVal(this)">
                                                                       <a4j:repeat var="var" value="#{resumeHome.prtStr}">
                                                                       	<option value="#{var[0]}" aa="#{var[2]}"  bb="#{var[3]}"  cc="#{var[4]}">#{stringUtil.showTime2(var[1])}</option>
                                                                       </a4j:repeat>
                                                                    </select>
                                                                    </div>
                                                                </div>
                                                                <input  class="farmingInputs_add5 " type="button" id="farmingInputs_add5"/>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                            	<td width="60" align="right">预冷时间</td>
                                                                <td width="245" style="padding-left:15px;">
                                                                <div class="input-append date form_datetime land_testDate" >
                                                                <input size="26" type="text" value="" readonly="readonly"  id="lvform:precool_1InputDate" name="lvform:precool_1InputDate" autocomplete="off"/>
                                                                <span class="add-on"><i class="icon-th" style="margin-top:5px;margin-right:-16px;"></i></span>
                                                                </div>
                                                                </td>
                                                                <td width="60" align="right">检测日期</td>
                                                                <td width="200" style="padding-left:15px;">
                                                                <div class="test1">
                                                                <div class="input-append date form_datetime land_testDate" >
                                                                <input size="26" type="text" value="" readonly="readonly" id="lvform:testtime_1InputDate" name="lvform:testtime_1InputDate" autocomplete="off"/>
                                                                <span class="add-on"><i class="icon-th"></i></span> </div>
                                                                </div>
                                                                <div class="test2 sw171"  style="width:150px">
                                                                <select id="detection" class="selectpicker" name="detection">
                                                                	
                                                                </select></div>
                                                               <!--  <input  class="farmingInputs_add55 test2 " type="button" id="farmingInputs_add55" style="cursor: default;"/>-->
                                                               <input type="hidden" name="detection_type" id="detection_type_1"  />
                                                                </td>
                                                            </tr>
                                                            <tr class="test1">
                                                            	<td width="60" align="right">检测机构 </td>
                                                                <td width="245" style="padding-left:15px;">
                                                                    <h:inputText value="#{resumeHome.testorg_}" id="testorg_" styleClass="form-control fl" style="width:188px"/>
                                                                </td>
                                                                <td width="60" align="right">检测种类 </td>
                                                                <td width="200" style="padding-left:15px;">
                                                                	<h:inputText value="#{resumeHome.testtype_}" id="testtype_" styleClass="form-control fl" style="width:188px"/>
                                                                </td>
                                                            </tr>
                                                        </table>
                                                        </div>
                                                    </div>
                                                    <div class="modal-footer">
                <a4j:commandButton eventsQueue="mainQueue" id="but_" reRender="refreshT" onclick="if(!customOneSubmit())return false;this.disabled=true;" value="保存" styleClass="btn btn-success" action="#{resumeHome.editList}" 
		                	 data="#{resumeHome.reeditStr}"
		                	oncomplete="if(data==''){jquery('#lv').modal('hide');refresh();this.disabled=false;}else{alert(data);this.disabled=false;}"
		                	/>
                                                    <h:outputLink value="#" onclick="jquery('#lv').modal('hide');refresh(); return false;" styleClass="btn btn-default">返回
                </h:outputLink>
                                                    </div>
                                                </div>
                                            </div>
                                            </a4j:form>
                                        </div>   
<a4j:form id="formid" >
   <a4j:queue requestDelay="10" ignoreDupResponses="true" id="mainQueue"/>
      <a4j:jsFunction name="pmiChange2" eventsQueue="mainQueue"  action="#{batchRecordHome.pmiChange2}" data="#{batchRecordHome.re_str}" oncomplete="link(data)">
   <a4j:actionparam name="param1" assignTo="#{batchRecordHome.changeId}"/>
</a4j:jsFunction>
<a4j:jsFunction name="changePrt" eventsQueue="mainQueue"  action="#{resumeHome.changePrt}" data="#{resumeHome.re_prt_str}" oncomplete="link2(data);">
<a4j:actionparam name="param1" assignTo="#{resumeHome.param}"/>
</a4j:jsFunction>
<a4j:jsFunction name="deleteItem_next" eventsQueue="mainQueue"  action="#{batchRecordHome.deleteItem_edit}" >
   <a4j:actionparam name="deleteId" assignTo="#{batchRecordHome.deleteId}"/>
</a4j:jsFunction>
</a4j:form>
<style>
.nw123 {
width:165px;
font-weight:100;
}
  [class^="icon-"], [class*=" icon-"] {
    background-image: url("#{request.contextPath}/asset/images/glyphicons-halflings.png");
    background-position: 14px 14px;
    background-repeat: no-repeat;
    display: inline-block;
    height: 14px;
    line-height: 14px;
    margin-top: 1px;
    vertical-align: text-top;
    width: 14px;
}
[class^="icon-"], [class*=" icon-"] {
    background-image: url("#{request.contextPath}/asset/images/glyphicons-halflings.png");
    background-position: 14px 14px;
    background-repeat: no-repeat;
    display: inline-block;
    height: 14px;
    line-height: 14px;
    margin-top: 1px;
    vertical-align: text-top;
    width: 14px;
}
.icon-th {
    background-position: -240px 0;
}
.form_datetime input{ height:30px; line-height:30px;}
.icon-arrow-left { background-position: -240px -96px; } .icon-arrow-right { background-position: -264px -96px; } .dropdown-menu { position: absolute; top: 100%; left: 0; z-index: 1000; display: none; float: left; min-width: 160px; padding: 5px 0; margin: 2px 0 0; font-size: 12px; text-align: left; list-style: none; background-color: #fff; -webkit-background-clip: padding-box; background-clip: padding-box; border: 1px solid #ccc; border: 1px solid rgba(0, 0, 0, .15); border-radius: 4px; -webkit-box-shadow: 0 6px 12px rgba(0, 0, 0, .175); box-shadow: 0 6px 12px rgba(0, 0, 0, .175); } .form_datetime input {  height: 30px; line-height: 30px; }
.input-append.date .add-on i, .input-prepend.date .add-on i {
  cursor: pointer;
    height: 21px;
    
    margin-top: -21px;
    width: 14px;
}

.add-on{float: left; position: relative; z-index: 10; left: 160px;

}
.datetimepicker-dropdown-bottom-left:before {
    border-bottom: 7px solid rgba(0, 0, 0, 0.2);
    border-left: 7px solid transparent;
    border-right: 7px solid transparent;
    content: "";
    display: inline-block;
    position: absolute;
    right: 6px;
    top: -7px;
}
.datetimepicker-dropdown-bottom-left:after {
    border-bottom: 6px solid #ffffff;
    border-left: 6px solid transparent;
    border-right: 6px solid transparent;
    content: "";
    display: inline-block;
    position: absolute;
    right: 7px;
    top: -6px;
}
@media all and (-webkit-min-device-pixel-ratio:0){
 .input-append.date .add-on i, .input-prepend.date .add-on i {
  cursor: pointer;
    height: 14px;
    margin-left: -49px;
      margin-top: -23px;
  
    width: 14px;
 
 }
}
  </style>
		<script type="text/javascript">
		//<![CDATA[
		
		 	var de = '#{sessionTake.detectEnable}';
		 	var batchId = '#{batchRecordHome.bid}';
            function addMe(){
            	jquery("#batchId2").val(batchId);
                
				jquery(".extraMessage").next('.farmingMageTab_fjxx').hide();
				jquery(".extraMessage").addClass('extraMessage2');
				var v = jquery(".lvformpr2 option:eq(0)").attr("value");
				jquery('.lvformpr2').selectpicker("val",v);
				jquery(".lvformpr2").selectpicker("refresh");
				
// 				jquery("#batchId")[0].selectedIndex = 0;
// 				jquery("#batchId").selectpicker("refresh");
				jquery("#farmer_id")[0].selectedIndex = 0;
				jquery("#farmer_id").selectpicker("refresh");
				jquery("#order_id")[0].selectedIndex = 0;
				jquery("#order_id").selectpicker("refresh");
				jquery("#need").val('');
				jquery("#lvform\\:start_").val('');
				jquery("#lvform\\:end_").val('');
				jquery("#lvform\\:testorg_").val("");
				jquery("#lvform\\:testtype_").val("");
				jquery("#lvform input[type='text']").val("");
				jquery("#farmingInputs_add52").removeClass('farmingInputs_add5Bg');
				jquery("#farmingInputs_add52").prev('.caishou_date').children('.form_datetime').css('display','block');	
				jquery("#farmingInputs_add52").prev('.caishou_date').children('.caishou_selt').css('display','none');
				var d = new Date();
	          	jquery("#lvform\\:packtime_1InputDate").val(d.format("yyyy-MM-dd hh:mm"));
	          	if(de==1){
	          		jquery(".test1").hide();
	          		jquery(".test2").show();
	          	}else{
	          		jquery(".test1").show();
	          		jquery(".test2").hide();
	          	}
			}

			function substrData(dataStr,index){
				if(dataStr!=null && dataStr.length >index){
					dataStr = dataStr.substr(0,index);
				}
				return dataStr;
			}

            Date.prototype.format = function(format)
   		 {
   		 	var o = {
   		 	"M+" : this.getMonth()+1, //month
   		 	"d+" : this.getDate(),    //day
   		 	"h+" : this.getHours(),   //hour
   		  	"m+" : this.getMinutes(), //minute
   		 	"s+" : this.getSeconds(), //second
   		  	"q+" : Math.floor((this.getMonth()+3)/3),  //quarter
   		  	"S" : this.getMilliseconds() //millisecond
   		 	}

   		 	if(/(y+)/.test(format)) 
   		 	{
   		 		format=format.replace(RegExp.$1,(this.getFullYear()+"").substr(4 - RegExp.$1.length));
   		 	}
   		 	
   		  	for(var k in o)
   		 	{
   		 		if(new RegExp("("+ k +")").test(format))
   		 		{
   		  			format = format.replace(RegExp.$1,RegExp.$1.length==1 ? o[k] : ("00"+ o[k]).substr((""+ o[k]).length));
   		 		}
   		 	}
   		 	return format;
   		 }
           function checkSelect(obj){
 			 	checkSelectNew(); var flag = checkSelectNew();
	  			  if(!flag && flag!=null && flag!=undefined){
						return false;
	  	          }
					if(obj == 1){//对应
						jquery('#lv').modal('show');
						addMe();
					}else{}
					return true;
	 				}

           function GetTimeByTimeStr(dateStr) {
        	   var timeArr=dateStr.split(" ");
        	   var d=timeArr[0].split("-");
        	   var t=timeArr[1].split(":");
        	   return new Date(d[0],(d[1]-1),d[2],t[0],t[1],t[2]);   
        	 }
			
		var prid_ = "";
		function edit(batchObj,pminame,prid,start,end,id,a1,a2){
			var rty = arguments[19];
			for(var i = 8;i<12;i++){
				if(arguments[i]!=null && arguments[i] !=""){
					if(arguments[i].indexOf('-') > 0){
						arguments[i] = GetTimeByTimeStr(arguments[i]).format("yyyy-MM-dd hh:mm");
					}else{
						arguments[i] = new Date(arguments[i]).format("yyyy-MM-dd hh:mm");
					}
				}
			}
    		if(rty != 2){
    			rty = 1;
    			jquery('#resumeType1').parent().attr("class","iradio_minimal-blue checked");
    			jquery('#resumeType1').attr('checked','checked');
    			jquery('#resumeType2').parent().attr("class","iradio_minimal-blue");
    			jquery('#resumeType2').attr('checked',false);
        	}else{
        		jquery('#resumeType2').parent().attr("class","iradio_minimal-blue checked");
    			jquery('#resumeType2').attr('checked','checked');
    			jquery('#resumeType1').parent().attr("class","iradio_minimal-blue");
    			jquery('#resumeType1').attr('checked',false);
            }
// 			jquery("#resumeType").selectpicker('val', rty);
			resumeTypeChange(rty);
			
			var obj = jquery(".lvformpr2 option[value='"+prid+"']").length;
			if(obj < 1){
				document.getElementById("productMsg").innerHTML = "批次为 "+batchObj+" 的履历已作废!";
				jquery("#myModal3").modal('show');
				return false;
    		}else{
    			if(arguments[18]!='')
    				detection_value = arguments[18];
    			jquery(".extraMessage").next('.farmingMageTab_fjxx').hide();
    			jquery(".extraMessage").addClass('extraMessage2');
    			prid_ = prid;
    			jquery("#need").val(id);
    			jquery("#lvform\\:start_").val(start);
    			jquery("#lvform\\:end_").val(end);
    			jquery("#lvform\\:testorg_").val(a1.split(" ")[0]);
    			jquery("#lvform\\:testtype_").val(a2.split(" ")[0]);
    			document.getElementById("lvform:harvesttime_1InputDate").value=arguments[8];
    			document.getElementById("lvform:precool_1InputDate").value=arguments[9];
    			document.getElementById("lvform:testtime_1InputDate").value=arguments[10];
//     			alert(arguments[11].length + "==" +arguments[11].substr(0,18) );
    			document.getElementById("lvform:packtime_1InputDate").value=arguments[11];
//     			jquery("#batchId").selectpicker('val', arguments[12]);
				jquery("#batchId2").val(arguments[12]);
    			if(arguments[13]=="")
    				jquery("#order_id").selectpicker('val', -1);
    			else
    				jquery("#order_id").selectpicker('val', arguments[13]);
    			if(arguments[14]==""){
    				jquery("#farmer_id").selectpicker('val', -1);
    			}else{
    				jquery("#farmer_id").selectpicker('val', arguments[14]);
    			}
    			if(jquery(".lvformpr2").val()==prid){
    				if(arguments[15]==""){
        				jquery("#lvform\\:harvesttime_1InputDate").val("");
        				jquery("#farmingInputs_add5").removeClass('farmingInputs_add5Bg');
    					jquery("#farmingInputs_add5").prev('.caishou_date').children('.form_datetime').css('display','block');	
    					jquery("#farmingInputs_add5").prev('.caishou_date').children('.caishou_selt').css('display','none');
        			}else{
        				jquery("#prt_id").selectpicker("val",arguments[15]);
        				jquery("#prt_id").selectpicker("refresh");
        				jquery("#farmingInputs_add5").addClass('farmingInputs_add5Bg');
    					jquery("#farmingInputs_add5").prev('.caishou_date').children('.form_datetime').css('display','none');	
    					jquery("#farmingInputs_add5").prev('.caishou_date').children('.caishou_selt').css('display','block');
        			}
    			}else{
    				if(arguments[15]==""){
    					jquery("#lvform\\:harvesttime_1InputDate").val("");
        				jquery("#farmingInputs_add5").removeClass('farmingInputs_add5Bg');
    					jquery("#farmingInputs_add5").prev('.caishou_date').children('.form_datetime').css('display','block');	
    					jquery("#farmingInputs_add5").prev('.caishou_date').children('.caishou_selt').css('display','none');
        			}else{
        				jquery("#old_id").val(arguments[15]);
        				jquery("#farmingInputs_add5").addClass('farmingInputs_add5Bg');
    					jquery("#farmingInputs_add5").prev('.caishou_date').children('.form_datetime').css('display','none');	
    					jquery("#farmingInputs_add5").prev('.caishou_date').children('.caishou_selt').css('display','block');
        			}
    			}
    			jquery("#lvform\\:pmi2").selectpicker('val', pminame);
    			jquery(".lvformpr2").selectpicker('val', prid);
    			jquery('#lv').modal('show');
    			
    			if(de==1||arguments[18]!=''){
	          		jquery(".test1").hide();
	          		jquery(".test2").show();
	          	}else{
	          		jquery(".test1").show();
	          		jquery(".test2").hide();
	          	}
				return true;
        	}
   			return false;
		}
		
		function resetVal(obj){
			if(obj.selectedIndex==-1)
				return;
			var a = obj.options[obj.selectedIndex].getAttribute("aa");
			var b = obj.options[obj.selectedIndex].getAttribute("bb");
			var c = obj.options[obj.selectedIndex].getAttribute("cc");
			if(a=="null")
				jquery("#lvform\\:testtype_").val("");
			else
				jquery("#lvform\\:testtype_").val(a);
			if(b=="null")
				jquery("#lvform\\:testorg_").val("");
			else
				jquery("#lvform\\:testorg_").val(b);
			if(c=="null"||c.length<8)
				jquery("#lvform\\:testtime_1InputDate").val("");
			else
				jquery("#lvform\\:testtime_1InputDate").val(c.substring(0,16));
		}
		
		 //jquery("select").selectmenu({style:'dropdown'});
		 function deleteItem(id,obj){
			 deleteItem_next(id);
			 jquery(obj).closest("tr").remove();
			 }
		function modelSubmit(){
			var str = "";
			jquery(".model").each(function(){
				var temp = jquery(this).val();
				if(jquery(".model"+temp).val()!=""){
					str+=temp+"_"+jquery(".model"+temp).val()+"ii";
				}
			});
			jquery("#model\\:modeStr").val(str);
		}
		function link(data){
			jquery(".lvformpr2").empty().append(data);
			jquery('.lvformpr2').selectpicker('refresh');
			if(prid_!=null&&prid_>0){
				jquery(".lvformpr2").val(prid_);
				prid_ = null;
			}
			
			//jquery(".lvformpr2").selectmenu("destroy").selectmenu({style:'dropdown'});
		}

		function link2(data){
			var str2 = data.split("__++");
			data = str2[0];
			jquery("#prt_id").empty().append(data);
			var v = jquery("#old_id").val();
			if(data.length>0){
				if(v!=""){
					jquery("#prt_id").selectpicker("val",v);
					jquery("#prt_id").selectpicker("refresh");
				}else{
					jquery("#prt_id")[0].selectedIndex = 0;
					jquery("#prt_id").selectpicker("refresh");
				}
			}else{
				jquery("#prt_id").selectpicker("refresh");
			}
			jquery("#detection").empty().append(str2[1]).selectpicker("refresh");
			if(jquery("#farmingInputs_add5").prev('.caishou_date').children('.form_datetime').css("display")=="none"){
				jquery("#prt_id").trigger("onchange");
			}
			
			if(detection_value>-3){
				var len = jquery("#detection option[value='"+detection_value+"']").length;
				if(len<1){
				}else{
					jquery("#detection").selectpicker("val",detection_value);
				}
			}
			detection_value = -3;
			
			jquery("#old_id").val("");
		}

		function customSubmit(){
			var x = true;
			jquery(".xx").each(function(index){
				var aa = jquery(this).attr("aa");
				var start = jquery(".start"+index).val();
				var end = jquery(".end"+index).val();
				var bo = false;
				var length  = jquery(".xx").length;
				if(parseInt(start)>=parseInt(end)){
					jquery(".start"+index).focus();
					alert("起始编码要小于结束编码!");
					x = false;
					return false;
				}
				for(var i = 0;i<length;i++){
					if(i==aa)
						continue;
					var a = jquery(".start"+i).val();
					var b = jquery(".end"+i).val();
					if(parseInt(start)>=parseInt(a)&&parseInt(start)<=parseInt(b)){
						bo = true;
						jquery(".start"+index).focus();
						alert("和已存在起止编码["+a+"--->"+b+"]冲突!");
						x = false;
						break;
					}
					if(parseInt(end)>=parseInt(a)&&parseInt(end)<=parseInt(b)){
						bo = true;
						jquery(".end"+index).focus();
						alert("和已存在起止编码["+a+"--->"+b+"]冲突!");
						x = false;
						break;
					}
				}
				if(bo){
					return false;
				}
			});
			return x ;
		}

		function customOneSubmit(){
			if(jquery("#farmingInputs_add5").prev('.caishou_date').children('.form_datetime').css("display")=="block"){
				jquery("#harvest_type").val(1);
			}else{
				jquery("#harvest_type").val(2);
			}
			
			var x = true;
			var start = jquery("#lvform\\:start_").val();
			var end = jquery("#lvform\\:end_").val();
			start=parseInt(start);
			end = parseInt(end);
			var pid = jquery(".lvformpr2").val();
			if(false){
				jquery(".prid").each(function(){
					if(jquery(this).attr("aa")==pid){
						alert("履历已存在!");
						x = false;
						return false;
					}
				});
			}
			if(isNaN(start)){
				alert("起始编码请填写整字!");
				jquery("#lvform\\:start_").focus();
				return false;
			}
			if(isNaN(end)){
				alert("结束编码请填写整字!");
				jquery("#lvform\\:end_").focus();
				return false;
			}
			if(start>end){
				alert("起始编码要小于结束编码!");
				jquery("#lvform\\:start_").focus();
				return false;
			}
			if(jquery("#lvform\\:testtime_1InputDate").is(":visible")){
				jquery("#detection_type_1").val(2);
			}else{
				jquery("#detection_type_1").val(1);
			}
			return true ;
		}

		function searchOne(){
			var s1 = jquery("#s1").val();
			var e1 = jquery("#e1").val();
			var n1 = jquery("#n1").val();
			s1 = parseInt(s1);
			e1 = parseInt(e1);
			var b1 = true;
			if(isNaN(s1)){
				b1 = false;
			}
			var b2 = true;
			if(isNaN(e1)){
				b2 = false;
			}
			if(b1&&b2&&s1>e1){
				return;			
			}
			jquery(".xx").each(function(index){
				var start = jquery(".start"+index).val();
				var end = jquery(".end"+index).val();
				var length  = jquery(".xx").length;
				if(b1&&!b2){
					if(s1>=parseInt(start)&&s1<=parseInt(end)){
						if(jquery(".searchName"+index).html().indexOf(n1)==-1){
							jquery(this).hide();
						}else{
							jquery(this).show();
						}
					}else{
						jquery(this).hide();
					}
				}
				else if(!b1&&b2){
					if(e1>=parseInt(start)&&e1<=parseInt(end)){
						if(jquery(".searchName"+index).html().indexOf(n1)==-1){
							jquery(this).hide();
						}else{
							jquery(this).show();
						}
					}else{
						jquery(this).hide();
					}
				}
				else if(b1&&b2){
					if((s1<parseInt(start)&&e1<parseInt(start))||(s1>parseInt(end)&&e1>parseInt(end))){
						jquery(this).hide();
					}else{
						if(jquery(".searchName"+index).html().indexOf(n1)==-1){
							jquery(this).hide();
						}else{
							jquery(this).show();
						}
					}
				}
				else if(!b1&&!b2){
					if(jquery(".searchName"+index).html().indexOf(n1)==-1){
						jquery(this).hide();
					}else{
						jquery(this).show();
					}
				}
			});
		}
		function refresh(){
			jquery("#need").val("");
			jquery("#lvform\\:start_").val("");
			jquery("#lvform\\:end_").val("");
// 			jquery("#lvform\\:pmi2")[0].selectedIndex = 0;
// 			jquery('#lvform\\:pmi2').selectpicker('refresh');
// 			jquery("#lvform\\:pmi2").trigger("onchange");
			//jquery("#lvform\\:pmi2").selectmenu("destroy").selectmenu({style:'dropdown'});
			jquery("#lvform input").val("");
			document.getElementById("lvform:but_").value = "提交";
		}
		jquery("#lvform\\:start_").attr("autocomplete","off");
		jquery("#lvform\\:end_").attr("autocomplete","off");
		jquery(".rich-calendar-input").attr("class","form-control nw123");
		 jquery(document).ready(function(){
			 jquery(".land_testDate").datetimepicker({
				    format: "yyyy-mm-dd hh:ii",
				    autoclose: true,
					 weekStart: 1,
					  //startDate: "2014-08-14 10:00",
					 language:  'zh-CN',
				    pickerPosition: "bottom-left"
				    });


			 jquery('input').iCheck({
				    checkboxClass: 'icheckbox_minimal-blue',
				    radioClass: 'iradio_minimal-blue',
				    increaseArea: '20%' // optional
				  });

			 jquery("input[name='resumeType']:radio").on("ifChecked", function(event){
   			  	resumeTypeChange(this.value);
   			  });

			 jquery("#farmingInputs_add5").click(function(){
					if(jquery(this).prev('.caishou_date').children('.form_datetime').is(':visible')){
						jquery("#lvform\\:testtype_").attr("aa",jquery("#lvform\\:testtype_").val());
		    			jquery("#lvform\\:testorg_").attr("aa",jquery("#lvform\\:testorg_").val());
		    			jquery("#lvform\\:testtime_1InputDate").attr("aa",jquery("#lvform\\:testtime_1InputDate").val());
						jquery("#prt_id").trigger("onchange");
						jquery(this).addClass('farmingInputs_add5Bg');
						jquery(this).prev('.caishou_date').children('.form_datetime').css('display','none');	
						jquery(this).prev('.caishou_date').children('.caishou_selt').css('display','block');	
					}else{
						jquery(this).removeClass('farmingInputs_add5Bg');
						jquery(this).prev('.caishou_date').children('.form_datetime').css('display','block');	
						jquery(this).prev('.caishou_date').children('.caishou_selt').css('display','none');	
						jquery("#lvform\\:testtype_").val(jquery("#lvform\\:testtype_").attr("aa"));
						jquery("#lvform\\:testorg_").val(jquery("#lvform\\:testorg_").attr("aa"));
						jquery("#lvform\\:testtime_1InputDate").val(jquery("#lvform\\:testtime_1InputDate").attr("aa"));
						//jquery("#lvform\\:testtype_").val("");
	    				//jquery("#lvform\\:testorg_").val("");
	    				//jquery("#lvform\\:testtime_1InputDate").val("");
					}	
				});
		 
		 jquery("#farmingInputs_add52").click(function(){
				if(jquery(this).prev('.caishou_date').children('.form_datetime').is(':visible')){
					jquery("#test_type2").attr("aa",jquery("#test_type2").val());
	    			jquery("#test_org2").attr("aa",jquery("#test_org2").val());
	    			jquery("#testtime2").attr("aa",jquery("#testtime2").val());
					jquery("#prt_id2").trigger("onchange");
					jquery(this).addClass('farmingInputs_add5Bg');
					jquery(this).prev('.caishou_date').children('.form_datetime').css('display','none');	
					jquery(this).prev('.caishou_date').children('.caishou_selt').css('display','block');	
				}else{
					jquery(this).removeClass('farmingInputs_add5Bg');
					jquery(this).prev('.caishou_date').children('.form_datetime').css('display','block');	
					jquery(this).prev('.caishou_date').children('.caishou_selt').css('display','none');	
					jquery("#test_type2").val(jquery("#test_type2").attr("aa"));
					jquery("#test_org2").val(jquery("#test_org2").attr("aa"));
					jquery("#testtime2").val(jquery("#testtime2").attr("aa"));
					//jquery("#testtime2").val("");
 				//jquery("#test_org2").val("");
 				//jquery("#test_type2").val("");
				}	
			});

				/* 附加信息 */
					jquery(".extraMessage").click(function(){
						if(jquery(this).next('.farmingMageTab_fjxx').is(':visible')){
							jquery(this).addClass('extraMessage2');
							jquery(this).next('.farmingMageTab_fjxx').slideUp(800);
						}else{
							jquery(this).removeClass('extraMessage2');
							jquery(this).next('.farmingMageTab_fjxx').slideDown(800);
						}	
					});
			 
		 });

			function  resumeTypeChange(val){
				if(val == 1){
					jquery('#lvformprid2').css('display','block');
					jquery('#lvform\\:pr2').attr('name','pr2');
					jquery('#lvformprid3').css('display','none');
					jquery('#lvform\\:pr3').attr('name','xxx');
				}else{
					jquery('#lvformprid3').css('display','block');
					jquery('#lvform\\:pr3').attr('name','pr2');
					jquery('#lvformprid2').css('display','none');
					jquery('#lvform\\:pr2').attr('name','xxx');
				}
        	}

		//]]>
		</script>
		</td>
		<style>
.input-append.date .add-on i, .input-prepend.date .add-on i {
cursor: pointer;

margin-left: 0px;
margin-top: -23px;
width: 14px;
}

.form_datetime input {
height: 30px;
line-height: 20px;
}
.dropdown-menu{width: 195px;}
 .w600na{width:auto;}
 .iradio_minimal-blue{margin-top:6px;}
  .leftDate{margin-top:5px;margin-right:-16px;}
</style>

</ui:define>

</ui:composition>

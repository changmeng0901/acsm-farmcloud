<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a4j="http://richfaces.org/a4j"
    template="/layout/template.xhtml">

<ui:define name="body">
<style>
.rich-mpnl-body {
    padding: 0px;
}
.tck_table td {
line-height:15px;
padding:0px;
}
.rich-inslider-size{
	width:200px
}
</style>
	 <div class="right_coment">
<div class="con_top bg"></div>
<div class="con_con">
<!--板块1开始-->
<div class="title_box">
<a href="#"><strong>履历列表</strong></a>
</div>
<div class="box_con">
<div class="bl_t_b">
<table width="99%" cellpadding="0" cellspacing="0"  class="bl_table">
            <tr>
            <!--左侧编辑页面开始-->
            	<td width="57%" valign="top" align="left">
                <div class="bkx_top">
                	<div class="bjbg_03">编辑信息</div>
                </div>
                <div class="bkx_03"></div>
                <div class="bkx_06">
                	<!--农残检测记录-->
                	<rich:modalPanel id="operate" autosized="true"  width="450" headerClass="modalHeader" >
						<div class="tck_div">
				       	<div class="tck_ti">
	       					<h:outputLink value="#" onclick="#{rich:component('operate')}.hide(); return false;">
	                    		<img src="../images/close_17.jpg" width="20" height="20"/>
	                		</h:outputLink>
                		</div>
       					<h:form id="blockDiagramtow" enctype="multipart/form-data">
               			<table class="tck_table">
		                    <tr>
		                    	<td width="130" align="left">检查项目：</td>
		                        <td width="240"  >
		                        	<h:selectOneMenu id="inspectInfo" style="width:130px;" value="#{productRecordTimesHome.productInspect.inspectInfo}">
										<s:selectItems value="#{productRecordTimesHome.getInspectInfoList()}" var="inspectResult" label="#{inspectResult.name}" />
										<s:convertEntity />
									</h:selectOneMenu>
		                        </td>
		                    </tr>
		                    <tr>
		                    	<td align="left">检测单位：</td>
		                        <td  >
		                        	<h:selectOneMenu id="inspectUser" style="width:130px;" value="#{productRecordTimesHome.productInspect.inspectUser}">
										<s:selectItems value="#{productRecordTimesHome.getInspectUserList()}" var="inspectUser" label="#{inspectUser.inspectName}" />
										<s:convertEntity />
									</h:selectOneMenu>
		                        </td>
		                    </tr>
		                    <tr>
		                    	<td align="left">检测时间：</td>
		                        <td >
		                        	<rich:calendar id="inspectTime" value="#{productRecordTimesHome.productInspect.inspectTime}" datePattern="yyyy-MM-dd"/>
		                        </td>
		                    </tr>
		                    <tr>
		                    	<td colspan="2" align="center" valign="bottom">
		                    	<h:commandButton id="persist2" value="保存" action="#{productRecordTimesHome.addProductInspect}"  image="../images/safe.jpg"   style="width:74px;height:26px"/>
				                	<h:outputLink value="#" onclick="#{rich:component('operate')}.hide(); return false;"><img class="er_buttton" src="../images/button_17.jpg" width="74" height="26" />
		                		</h:outputLink>
		                        </td>
		                    </tr>
                		</table>
       				</h:form>
       			</div>
   			</rich:modalPanel>
                    
                	<div class="blshw01">
                    	<div class="bl_title">
                                    	<ul>
                                    		<li class="tit02_b">农残检测记录</li>
                                            <li class="blli"><input type="checkbox"/>启用</li>
                                            <li class="titli_03"><a href="#" onclick="#{rich:component('operate')}.show();"><img src="../images/bj_17.jpg" width="68" height="21" /></a></li>
                                        </ul>
                         </div>
                    	<div class="bj_bg">
                                    	
                                            <table width="416" cellpadding="0" cellspacing="0" border="0" class="bj_bg_t04">
                                                <tr>
                                                    <td width="20%" align="left" valign="middle">检查项目：</td>
                                                    <td width="80%" align="left" valign="middle"> 
                                                    	<h:outputText value="#{productRecordTimesHome.productInspect.inspectInfo.name}" />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td align="left" valign="middle">检测单位：</td>
                                                    <td align="left" valign="middle">
	                                                	<h:outputText value="#{productRecordTimesHome.productInspect.inspectUser.inspectName}" />
													</td>
                                                </tr>
                                                <tr>
                                                    <td align="left" valign="middle">检测时间：</td>
                                                    <td align="left" valign="middle">
														<h:outputText value="#{productRecordTimesHome.productInspect.inspectTime}">
															<s:convertDateTime type="both" pattern="yyyy-MM-dd HH:mm:ss" />
														</h:outputText>
													</td>
                                                </tr>
                
                							
                                            </table>
                          </div>    
                    	<div class="clear"></div>
                    </div>	
				<!--农残检测记录结束-->
					<rich:modalPanel id="operatePanel" autosized="true"  width="450" headerClass="modalHeader" >
						<div class="tck_div">
				       	<div class="tck_ti">
	       					<h:outputLink value="#" onclick="#{rich:component('operatePanel')}.hide(); return false;">
	                    		<img src="../images/close_17.jpg" width="20" height="20"/>
	                		</h:outputLink>
                		</div>
       					<h:form id="blockDiagram" enctype="multipart/form-data">
               			<table class="tck_table">
		                    <tr>
		                    	<td width="130" align="left">操作名称：</td>
		                        <td width="240"  >
		                        	<h:inputText id="operationName" value="#{productRecordTimesHome.processDeliveryRecords.operationName}"/>
		                        </td>
		                    </tr>
		                    <tr>
		                    	<td align="left">时间：</td>
		                        <td  >
		                        	 <rich:calendar id="operationTime" value="#{productRecordTimesHome.processDeliveryRecords.operationTime}" datePattern="yyyy-MM-dd"/>
		                        </td>
		                    </tr>
		                    <tr>
		                    	<td align="left">地点：</td>
		                        <td >
		                        	<h:inputText id="location" value="#{productRecordTimesHome.processDeliveryRecords.location}"/>
		                        </td>
		                    </tr>
		                    <tr>
		                    	<td align="left">操作人：</td>
		                        <td >
		                        	<h:inputText id="operationPeople" value="#{productRecordTimesHome.processDeliveryRecords.operationPeople}"/>
		                        </td>
		                    </tr>
		                    <tr>
		                    	<td align="left">电话：</td>
		                        <td >
		                        	<h:inputText id="phone" value="#{productRecordTimesHome.processDeliveryRecords.phone}"/>
		                        </td>
		                    </tr>
		                    <tr>
		                    	<td colspan="2" align="center" valign="bottom">
		                    	<h:commandButton id="persist" value="保存" action="#{productRecordTimesHome.addPdrMap}"  image="../images/safe.jpg"   style="width:74px;height:26px"/>
				                	<h:outputLink value="#" onclick="#{rich:component('operatePanel')}.hide(); return false;"><img class="er_buttton" src="../images/button_17.jpg" width="74" height="26" />
		                		</h:outputLink>
		                        </td>
		                    </tr>
                		</table>
       				</h:form>
       			</div>
   			</rich:modalPanel>
                    
					<a4j:form>
				        <a4j:jsFunction name="clearOperate"  action="#{productRecordTimesHome.clearOperate()}" reRender="operatePanel" oncomplete="#{rich:component('operatePanel')}.show()">
				        </a4j:jsFunction>
			      	</a4j:form>
                	<!--加工配送记录开始-->
                	<div class="blshw">
                    	<div class="bl_title">
                                    	<ul>
                                    		<li class="tit02_b">加工配送记录</li>
                                            <li class="blli"><input type="checkbox"/>启用</li>
                                            <li class="titli_03"><a href="#" onclick="clearOperate();return false;"><img src="../images/tj_20.jpg" width="68" height="21" /></a></li>
                                        </ul>
                         </div>
                         			 <h:panelGroup id="operateinfo">
                                            <table cellpadding="0" cellspacing="0" border="0" class="bj_bg_t06">
                                                <tr>
                                                	<th width="15%">操作名称</th>
                                                    <th width="15%" class="bl_t_l_te">时间</th>
                                                    <th width="15%">地点</th>
                                                    <th width="15%">操作人</th>
                                                    <th width="20%">电话</th>
                                                    <th width="20%">操作</th>
                                                </tr>                                             
                    						<a4j:repeat value="#{productRecordTimesHome.pdrList}" var="_var" rendered="#{not empty productRecordTimesHome.pdrList}" rowKeyVar="_index">
                                                <tr>
                                                   <td class="bl_t_l_te">#{productRecordTimesHome.pdrMap.get(_var).operationName}</td>
                                                    <td class="bl_t_l_te">
                                                    	<h:outputText value="#{productRecordTimesHome.pdrMap.get(_var).operationTime}">
															<s:convertDateTime pattern="yyyy-MM-dd" />
														</h:outputText>
                                                    </td>
                                                    <td>#{productRecordTimesHome.pdrMap.get(_var).location}</td>
                                                    <td>#{productRecordTimesHome.pdrMap.get(_var).operationPeople}</td>
                                                    <td>#{productRecordTimesHome.pdrMap.get(_var).phone}</td>
                                                    <td>
                                                    	<a href="#" onclick="updatePdrMap(#{_var});return false;" tabindex="0"><img width="38" height="21" src="../images/butt_17.jpg" /></a>
                                                   		<a href="#" onclick="doMenu(#{_var});" tabindex="0"><img width="38" height="21" src="../images/butt_19.jpg" /></a>
                                                    </td>
                                                </tr> 
                                            </a4j:repeat>
                                            </table>
                                            </h:panelGroup>
                                             <a4j:form >
								                 <a4j:jsFunction name="deletePdrMap"  action="#{productRecordTimesHome.deletePdrMap()}" reRender="operateinfo,operatepreview">
								                 	<a4j:actionparam name="stringKey" assignTo="#{productRecordTimesHome.stringKey}"/>
											     </a4j:jsFunction>
										     </a4j:form>
										     <a4j:form >
								                 <a4j:jsFunction name="updatePdrMap"  action="#{productRecordTimesHome.updatePdrMap()}"  oncomplete="#{rich:component('operatePanel')}.show();" reRender="operatePanel">
								                 	<a4j:actionparam name="stringKey" assignTo="#{productRecordTimesHome.stringKey}"/>
											     </a4j:jsFunction>
										     </a4j:form>
                    	<div class="clear"></div>
                    </div>	
				<!--加工配送记录结束-->
			</div>
            
            <div class="bkx_08"></div>
                </td>
            
            <!--左侧编辑页面结束-->
            
            
            <!--右侧网站预览图开始-->
            	<td width="43%" align="left" valign="top">
                <div class="bkx_top02">
					<div class="ylxg_03">预览效果</div>
                 </div>   
                <div class="bkx_033"></div>
   <div class="bkx_066">
		<div class="main">
                     <div class="bl_ock">
                            <div class="far_div">
                                
                                    <div class="ns_jsjl">农事检测记录</div>
                                    <ul class="jcjl">
                                    	<li>检查项目：<h:outputText value="#{productRecordTimesHome.productInspect.inspectInfo.name}" /></li>
                                    	<li>检测单位：<h:outputText value="#{productRecordTimesHome.productInspect.inspectUser.inspectName}" /></li>
                                        <li>检测时间：
											<h:outputText value="#{productRecordTimesHome.productInspect.inspectTime}">
												<s:convertDateTime type="both" pattern="yyyy-MM-dd HH:mm:ss" />
											</h:outputText>
										</li>
                                    </ul>
                            <div class="clear"></div> 
                            </div>  
                           <div class="clear"></div> 
 
					</div> 
                    
                    
                               
                   <!--加工配送记录开始-->
                    <div class="bl_ock">
                    	<div class="title_2">
                            	加工配送记录
                      </div>
                           <div class="far_div">
                            <h:panelGroup id="operatepreview">
                                <table class="jgps" cellpadding="0" cellspacing="0" >
                                	<tr>
                                		<th width="15%">操作名称</th>
                                        <th width="15%">时间</th>
                                        <th width="15%">地点</th>
                                        <th width="15%">操作人</th>
                                        <th width="20%">电话</th>
                                	</tr>
                                	<a4j:repeat value="#{productRecordTimesHome.pdrList}" var="_var" rendered="#{not empty productRecordTimesHome.pdrList}" rowKeyVar="_index">
                                    <tr>
	                                    <td align="left" class="jg_td">#{productRecordTimesHome.pdrMap.get(_var).operationName}</td>
	                                    <td align="center">
                                        	<h:outputText value="#{productRecordTimesHome.pdrMap.get(_var).operationTime}">
												<s:convertDateTime pattern="yyyy-MM-dd" />
											</h:outputText>
                                    	</td>
                                        <td align="center">#{productRecordTimesHome.pdrMap.get(_var).location}</td>
                                        <td align="center">#{productRecordTimesHome.pdrMap.get(_var).operationPeople}</td>
                                        <td align="center">#{productRecordTimesHome.pdrMap.get(_var).phone}</td>
                                      </tr> 
                                      </a4j:repeat>
                                </table>
                                </h:panelGroup>
                               <div class="clear"></div>     
                           </div>   
                              
                              <div class="clear"></div>    
					</div> 
                    

                   <!--加工配送记录 结束-->  
 
      
      
      <!--帮助中心开始-->
	<!--帮助中心结束-->



      <!--版权开始-->
	<!--版权结束-->



      </div>   

</div>
          <div class="bkx_088"></div>
                
                </td>
            <!--右侧网站预览图结-->    
            </tr>
            <tr>
            	<td colspan="2"  align="center" style="padding:20px 0;">
            		<rich:modalPanel id="save">
            			数据保存中.请稍候!
            		</rich:modalPanel>
            		<a4j:form>	
		            	<a4j:jsFunction name="persist" action="#{productRecordTimesHome.persistList()}" oncomplete="goUrl1();">
				        </a4j:jsFunction>
			        </a4j:form>
	               	<a href="#" onclick="persist();return false;"><img src="../image/ok_23.jpg" width="104" height="31" /></a>
	               	 <s:button view="/record/ProductRecordTimesInfo.xhtml" id="create" value="" image="../images/return_23.jpg" width="104" height="31">
							<f:param name="productInfoId" value="#{productRecordTimesListByPR.productRecordId}"/>
					 </s:button>
            	</td>
            
            </tr>
 </table>
         
</div>
<!--板块1结束-->
</div>
</div>
</div>
<!--右板块结束-->
<script type="text/javascript">
goUrl1 = function(){
 	window.location.href="#{request.contextPath}/record/ProductBaseInfoList.seam";
}
function doMenu(varinfo){
	if(confirm('确定删除')){
		deletePdrMap(varinfo);
		return true;
	}
	return false;
}
</script>
</ui:define>

</ui:composition>

<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:a="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:c="http://java.sun.com/jstl/core"
    template="/layout/template_new.xhtml">
<ui:define name="body">
<link type="text/css" rel="stylesheet" href="#{request.contextPath}/asset/css/spgs/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="#{request.contextPath}/asset/css/record/commons.css"/>
<link type="text/css" rel="stylesheet" href="#{request.contextPath}/asset/css/record/backTo.css" />


<td valign="top">
<!-- #{resumeTracingHome.begins()} -->
	<div class="right_c" style="min-height:30px; padding-bottom: 40px;">
	<!-- 面包屑导航 -->
		<div class="breadNav_wap clear">
			<div class="breadNav_lt">精准营销&#160;&gt;&#160;&#160;<a href="#">履历</a><span>&gt;</span><strong>使用履历</strong></div>
            <div class="breadNav_rt" style="margin-bottom:-1px; margin-top:1px;">
            	<ul class="resumeList clear">
            		<h:panelGroup rendered="#{param.source==1}">
	                	<li>
	                    	<a href="#{request.contextPath}/record/ProductBaseInfoList.seam?lvliType=1"><img src="#{request.contextPath}/asset/images/cm_lsllIco01.jpg"/><span>履历设计</span></a>
		                </li>
		                <li>
		                	<a href="#{request.contextPath}/record/ProductBaseInfoList.seam?lvliType=2"><img src="#{request.contextPath}/asset/images/lvliyl-ico1.jpg"/><span>履历预览</span></a>
		                </li>
	                </h:panelGroup>
	                <h:panelGroup rendered="#{param.source==2}">
	                    <li>
	                    	<a  href="#{request.contextPath}/resume/NewPhoneModelInfoList.seam"><img src="../asset/images/resume/icon6.png" /><span>履历列表</span></a>
	                    </li>
	                </h:panelGroup>
	                <li>
	                	<a href="#{request.contextPath}/record/UsedResume.seam?source=#{param.source}"><img src="#{request.contextPath}/asset/images/cm_lsllIco02.jpg" /><span>履历制作</span></a>
	                </li>
	                <li>
                    	<a class="borderBt"  href="#{request.contextPath}/record/ResumeTracing.seam?source=#{param.source}" ><img src="#{request.contextPath}/asset/images/cm_lsllIco05.png" /><span>履历追溯</span></a>
                    </li>
				</ul>
			</div>
		</div>
		<!-- 内容开始 -->
		<div class="s_content clear">
			<div class="s_top">
				<span class="fl s_left">履历追溯搜索</span>
				<div class="s_input fl">
					<input type="text" value="#{resumeTracingHome.useBatch}" style="color:#000"/>
					<span class="anniu" onclick="openShow()"></span>
				</div>
				<span class="fr">
					<h:panelGroup rendered="#{!resumeTracingHome.noneORblock}">
						已为您搜索到一条记录
					</h:panelGroup>
					<h:panelGroup rendered="#{resumeTracingHome.noneORblock}">
						未查询到搜索结果
					</h:panelGroup>
				</span>
			</div>
			
			<h:panelGroup rendered="#{!resumeTracingHome.noneORblock}">
				<table width="100%" cellpadding="0" cellspacing="0" style="margin-top:15px;">
				<tr>
					<td width="60%" style="min-width:716px;" colspan="3" valign="top">
						<div class="table_modal crop">
							<div class="fingerprint">
								<div class="fl" style="width:150px;">
									<img src="/asset/images/record/icon4.jpg" width="41" height="41" style="margin:0 10px;"/>作物信息
								</div>
								<ul class="audio">
									<li class="cur"><img src="/asset/images/record/sp.png" />生长视频</li>
									<li><img src="/asset/images/record/xj.png" />生长图片</li>
								</ul>
							</div>
							<table width="100%" cellpadding="0" cellspacing="0">
								<tr>
									<td class="left">
										<div class="pic">
											<h:panelGroup rendered="#{resumeTracingHome.realplant.breedBreedId.plant.plantImgRound != null }">
												<img src="#{resumeTracingHome.realplant.breedBreedId.plant.plantImgRound}@1000-1ci.png" />
											</h:panelGroup>
											<h:panelGroup rendered="#{resumeTracingHome.realplant.breedBreedId.plant.plantImgRound == null }">
												<img src="/asset/images/record/zstp.png" />
											</h:panelGroup>
										</div>
									</td>
									<td style="min-width:200px" class="txt">
										<h4>#{resumeTracingHome.realplant.breedBreedId.plant.name}</h4>
										<p><span>作物种类：</span><span>#{resumeTracingHome.realplant.breedBreedId.name}</span></p>
										<p><span>种植区域：</span><span>#{resumeTracingHome.realplant.tunnelInfoId.tunnelName}</span></p>
										<p>
											<span>定植时间：</span>
											<span>
												<h:outputText value="#{resumeTracingHome.realplant.plantBeginTime}" >
													  <f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT+8"/>
												</h:outputText>
											</span>
										</p>
										<p>
											<span>包装时间：</span>
											<span>
												<h:outputText value="#{resumeTracingHome.realplant.dateInfo}" >
													  <f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT+8"/>
												</h:outputText>
											</span>
										</p>
									</td>
									<td width="350">
										<div class="hasData">
											<h:panelGroup rendered="#{resumeTracingHome.realplant.videoUrl != null }">
												<div class="vedio grow sp cur" >
													<div class="video1" id="HLSPlayer1">
							                            <script type="text/javascript">
							                            var vID        = ""; 
							                            var vWidth     = "100%";                //播放器宽度设置
							                            var vHeight    = 205;                   //播放器宽度设置
							                            var vPlayer    = "#{request.contextPath}/document/player.swf"; //播放器文件
							                            var vHLSset    = "#{request.contextPath}/document/HLS.swf";             //HLS配置
							                            var vPic       = "#{request.contextPath}/asset/images/iphone/videosImg.jpg"; 
							                            var vCssurl    = "#{request.contextPath}/asset/css/mini.css";     //移动端CSS应用文件
							                            
							                            var  vHLSurl    = "#{resumeTracingHome.realplant.videoUrl}";
							                            //-->
							                            </script> 
									                    <script type="text/javascript" src="#{request.contextPath}/asset/js/hls.min.js"></script>
						                            </div>
												</div>
											</h:panelGroup>
											<h:panelGroup rendered="#{resumeTracingHome.realplant.videoUrl == null }">
												<div class="no_vedio sp cur">
													<img src="/asset/images/record/vedio.jpg" />
													<p>暂无数据</p>
												</div>
											</h:panelGroup>
											<h:panelGroup rendered="#{resumeTracingHome.tunnelImageList.size() !=0}">
											<div class="camera tp grow">
												<ul>
													<a4j:repeat  value="#{resumeTracingHome.tunnelImageList}" var="_var" rowKeyVar="_imag">
														<li class="#{_imag==0?'cur':''}">
															 <img src="#{_var}" />
														</li>
													</a4j:repeat>
												</ul>
												<div class="btns">
													<a href="javascript:void(0)" class="leftBtn"></a>
													<a href="javascript:void(0)" class="rightBtn"></a>
												</div>
											</div>
											</h:panelGroup>
											<h:panelGroup rendered="#{resumeTracingHome.tunnelImageList.size() ==0}">
											<div class="no_vedio tp">
												<img src="/asset/images/record/picture.png" />
												<p>暂无数据</p>
											</div>
											</h:panelGroup>
										</div>
									</td>
								</tr>
							</table>
						</div>
					</td>
					<td style="min-width:15px;"></td>
					<td style="min-width:410px;" valign="top" rowspan="2">
						<div class="info">
							<div class="fingerprint">
								<img src="/asset/images/record/icon11.jpg" width="41" height="41" style="margin:0 10px;"/>
									追溯信息
							</div>
							<div class="tree" style="height:900px;">
								<table width="100%" cellpadding="0" cellspacing="0">
								<a4j:repeat var="var" value="#{resumeTracingHome.tracingInformationList}" rowKeyVar="_index">
										<tr>
											<td width="45%" class="row1">
												<p class="month">
													<h:panelGroup rendered="#{var[1]!=null &amp;&amp; var[1]!=''}">
														#{var[1].split('-')[1]}.#{var[1].split('-')[2]}
													</h:panelGroup>
												</p>
												<p class="year">
													<h:panelGroup rendered="#{var[1]!=null &amp;&amp; var[1]!=''}">
														#{var[1].split('-')[0]}
													</h:panelGroup>
												</p>
												<span class="dot"></span>
											</td>
											<td width="55%" class="row2">
												<h:panelGroup rendered="#{var[0]==3}">
													包装
												</h:panelGroup>
												<h:panelGroup rendered="#{var[0]==2 || var[0]==3}">
													#{var[2]}
												</h:panelGroup>
												<h:panelGroup rendered="#{var[0]==1}">
													<span class="input_p" onclick="openAm('#{var[4]}')">
													#{var[2]}
														<h:panelGroup rendered="#{var[3]!= null &amp;&amp; var[3]!= ''}">
															#{var[3]}
														</h:panelGroup>
													</span>
												</h:panelGroup>
											</td>
										</tr>
									</a4j:repeat>
								</table>
							</div>
						</div>	
					</td>
				</tr>
				<tr>
					<td width="28%" class="left">
						<div class="envir">
							<div class="fingerprint">
								<img src="/asset/images/record/icon5.jpg" width="41" height="41" style="margin:0 10px;"/>
								环境指纹信息
							</div>
							<ui:fragment rendered="#{resumeTracingHome.aveTempShow !=1 &amp;&amp; resumeTracingHome.suitableRainShow!=1 &amp;&amp; resumeTracingHome.weatherTempShow!=1}">
							<div class="dataBox dataBox1" >
								<div class="no_data no_data1">
									<img src="/asset/images/record/data1.png" />
									<p>暂无数据</p>
								</div>
							</div>	
							</ui:fragment>
							<ui:fragment rendered="#{resumeTracingHome.aveTempShow ==1 || resumeTracingHome.suitableRainShow==1 || resumeTracingHome.weatherTempShow==1}">
							<div class="data1">
								<h:panelGroup rendered="#{resumeTracingHome.oneORmore==2}">
									<h:panelGroup rendered="#{resumeTracingHome.aveTempShow==1}">
										<span>(℃)</span>
										<div id="container1" style="min-width:300px;min-height:300px"></div>
										<p><img src="/asset/images/record/grow1.png" />果实生长温度趋势</p>
									</h:panelGroup>
									<h:panelGroup rendered="#{resumeTracingHome.suitableRainShow==1}">	
										<span>(mm)</span>
										<div id="container2" style="min-width:300px;min-height:300px"></div>
										<p><img src="/asset/images/record/grow2.png" />果实生长降水量趋势</p>
									</h:panelGroup>
									<h:panelGroup rendered="#{resumeTracingHome.weatherTempShow==1}">	
										<span>(lux)</span>	
										<div id="container3" style="min-width:300px;min-height:300px"></div>
										<p><img src="/asset/images/record/grow3.png" />果实生长光照趋势</p>
									</h:panelGroup>
								</h:panelGroup>
								<h:panelGroup rendered="#{resumeTracingHome.oneORmore==1}">
									<h:panelGroup rendered="#{resumeTracingHome.aveTempShow==1}">
										<span>(℃)</span>
										<div id="container4" style="min-width:300px;min-height:300px"></div>
										<p><img src="/asset/images/record/grow1.png" />果实生长温度趋势</p>
									</h:panelGroup>
									<h:panelGroup rendered="#{resumeTracingHome.suitableRainShow==1}">
										<span>(%)</span>	
										<div id="container5" style="min-width:300px;min-height:300px"></div>
										<p><img src="/asset/images/record/grow4.png" />果实生长湿度趋势</p>
									</h:panelGroup>
									<h:panelGroup rendered="#{resumeTracingHome.weatherTempShow==1}">
										<span>(lux)</span>	
										<div id="container6" style="min-width:300px;min-height:300px"></div>
										<p><img src="/asset/images/record/grow3.png" />果实生长光照趋势</p>
									</h:panelGroup>
								</h:panelGroup>
								
							</div>
							</ui:fragment>
						</div>	
					</td>
					<td style="min-width:15px;"></td>
					<td class="right">
						<div class="order">
							<div class="fingerprint">
								<img src="/asset/images/record/icon6.jpg" width="41" height="41" style="margin:0 10px;"/>
								订单信息
							</div>
							<ui:fragment rendered="#{resumeTracingHome.orderInroList.size()==0}">
								<div class="dataBox dataBox2" >
									<div class="no_data no_data2">
										<img src="/asset/images/record/data2.png" />
										<p>暂无数据</p>
									</div>
								</div>	
							</ui:fragment>
							<ui:fragment rendered="#{resumeTracingHome.orderInroList.size()!=0}">
								<div class="data2">
									<ul>
										<li>
											<span>订单编号：</span>
											<span>#{resumeTracingHome.orderInroList.get(0)[0]}</span>
										</li>
										<li>
											<span>客户姓名：</span>
											<span>#{resumeTracingHome.orderInroList.get(0)[1]}</span>
										</li>
										<li>
											<span>下单时间：</span>
											<span>
												<ui:fragment rendered="#{resumeTracingHome.orderInroList.get(0)[2]!=null}">
													<h:outputText value="#{resumeTracingHome.orderInroList.get(0)[2]}" >
														  <f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT+8"/>
													</h:outputText>
												</ui:fragment>
												<ui:fragment rendered="#{resumeTracingHome.orderInroList.get(0)[2]==null}">
													--
												</ui:fragment>
											</span>
										</li>
										<li>
											<span>包装时间：</span>
											<span>
												<ui:fragment rendered="#{resumeTracingHome.orderInroList.get(0)[3]!=null}">
													<h:outputText value="#{resumeTracingHome.orderInroList.get(0)[3]}" >
														  <f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT+8"/>
													</h:outputText>
												</ui:fragment>
											</span>
										</li>
										<li>
											<span>签收时间：</span>
											<span>
												<ui:fragment rendered="#{resumeTracingHome.orderInroList.get(0)[4]!=null}">
													<h:outputText value="#{resumeTracingHome.orderInroList.get(0)[4]}" >
														  <f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT+8"/>
													</h:outputText>
												</ui:fragment>
												<ui:fragment rendered="#{resumeTracingHome.orderInroList.get(0)[4]==null}">
													--
												</ui:fragment>
											</span>
										</li>
										<li style="width: 400px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">
											<span>有机追溯码：</span>
											<span title="#{resumeTracingHome.orderInroList.get(0)[5]}">
												<ui:fragment rendered="#{resumeTracingHome.orderInroList.get(0)[5]!=null &amp;&amp; resumeTracingHome.orderInroList.get(0)[5]!=''}">
													#{resumeTracingHome.orderInroList.get(0)[5]}
												</ui:fragment>
												<ui:fragment rendered="#{resumeTracingHome.orderInroList.get(0)[5]==null || resumeTracingHome.orderInroList.get(0)[5]==''}">
													--
												</ui:fragment>
											</span>
										</li>
									</ul>
								</div>
							</ui:fragment>
						</div>
						<div class="recovery">
							<div class="fingerprint">
								<img src="/asset/images/record/icon7.jpg" width="41" height="41" style="margin:0 10px;"/>
								采收信息
							</div>
							<ui:fragment rendered="#{resumeTracingHome.productRecordTimesList.size()==0}">
								<div class="dataBox" style="height:205px">
									<div class="no_data no_data2">
										<img src="/asset/images/record/cais.png" style="margin:64px 0 10px 0"/>
										<p>暂无数据</p>
									</div>
								</div>	
							</ui:fragment>
							<ui:fragment rendered="#{resumeTracingHome.productRecordTimesList.size()!=0}">
								<ul>
									<li>
										<span>采收时间：</span>
										<span>
											<h:outputText value="#{resumeTracingHome.productRecordTimesList.get(0)[0]}" >
												  <f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT+8"/>
											</h:outputText>
										</span>
									</li>
									<li>
										<span>等级：</span>
										<span>#{resumeTracingHome.productRecordTimesList.get(0)[1]}</span>
									</li>
									<li>
										<span>采收量：</span>
										<span>#{resumeTracingHome.productRecordTimesList.get(0)[2]}kg</span>
									</li>
									<li>
										<span>单价：</span>
										<span>#{resumeTracingHome.productRecordTimesList.get(0)[3]}元/kg</span>
									</li>
									<li>
										<span>采收人：</span>
										<span>#{resumeTracingHome.productRecordTimesList.get(0)[4]}</span>
									</li>
								</ul>
							</ui:fragment>
						</div>
					</td>
					<td></td>
				</tr>
				<tr>
			      <td>
			      	<div class="agric">
			      		<div class="fingerprint">
							<img src="/asset/images/record/icon8.jpg" width="41" height="41" style="margin:0 10px;"/>
							农资信息
							<span class="back"><img src="/asset/images/record/back.png" />返回</span>
						</div>
						<table width="100%" cellpadding="0" cellspacung="0">
							<tr class="cf5">
								<td width="34%">投入品名称</td>
								<td width="33%">使用量</td>
								<td width="33%">操作</td>
							</tr>
						</table>
						<ui:fragment rendered="#{resumeTracingHome.inputProductList.size()==0}">
							<div class="dataBox dataBox3" >
								<div class="no_data no_data3">
									<img src="/asset/images/record/data3.png" />
									<p>暂无数据</p>
								</div>
							</div>
						</ui:fragment>
						<ui:fragment rendered="#{resumeTracingHome.inputProductList.size()!=0}">
							<div class="data3">
								<div class="natural"  style="height:306px">
									<table width="100%" cellpadding="0" cellspacung="0">
										<a4j:repeat var="var" value="#{resumeTracingHome.inputProductList}" rowKeyVar="_index">
										<tr>
											<td width="34%"><p title="#{var[0]}" style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis; display: inline-block; width: 123px; text-align: center;">#{var[0]}</p></td>
											<td width="33%">#{var[1]}<h:panelGroup rendered="#{var[4]!=null}">#{var[4]}</h:panelGroup></td>
											<td width="33%"><span class="check">查看</span></td>
										</tr>
										</a4j:repeat>
									</table>
								</div>
								
								<a4j:repeat var="var" value="#{resumeTracingHome.inputProductList}" rowKeyVar="index">
									<div class="n_detail" style="height:306px">
										<table width="100%" cellpadding="0" cellspacung="0">
											<a4j:repeat var="_var" value="#{var[3]}" rowKeyVar="_index">
												<tr>	
													<td width="34%"><p title="#{_var[0]}" style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis; display: inline-block; width: 123px; text-align: center;">#{_var[0]}</p></td>
													<td width="33%">#{_var[1]}<h:panelGroup rendered="#{_var[3]!=null}">#{_var[3]}</h:panelGroup></td>
													<td width="33%">
														<h:outputText value="#{_var[2]}" >
															<f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT+8"/>
														</h:outputText>
													</td>
												</tr>
											</a4j:repeat>
										</table>
									</div>	
								</a4j:repeat>
							</div>
						</ui:fragment>
			      	</div>
			      </td>
			      <td></td>
			      <td colspan="3">
			      	<div class="agric">
			      		<div class="fingerprint">
							<img src="/asset/images/record/icon9.jpg" width="41" height="41" style="margin:0 10px;"/>
							在库信息
						</div>
						<table width="100%" cellpadding="0" cellspacung="0">
							<tr class="cf5">
								<td width="25%">仓库类型</td>
								<td width="25%">出入库类型</td>
								<td width="25%">库房名称</td>
								<td width="25%">出入库时间</td>
							</tr>
						</table>
						<ui:fragment rendered="#{resumeTracingHome.inventoryList.size()==0}">
							<div class="dataBox dataBox4">
								<div class="no_data no_data4">
									<img src="/asset/images/record/data4.png" />
									<p>暂无数据</p>
								</div>
							</div>	
						</ui:fragment>
						<ui:fragment rendered="#{resumeTracingHome.inventoryList.size()!=0}">
							<div class="divdata4" style="height: 303px;">
								<table width="100%" cellpadding="0" cellspacung="0" class="data4">
									<a4j:repeat var="var" value="#{resumeTracingHome.inventoryList}" rowKeyVar="_index">
										<tr>
											<td width="25%">#{var[0]}</td>
											<td width="25%">#{var[1]}</td>
											<td width="25%">#{var[2]}</td>
											<td width="25%">
												<ui:fragment rendered="#{var[3]!=null}">
													<h:outputText value="#{var[3]}" >
														  <f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT+8"/>
													</h:outputText>
												</ui:fragment>
											</td>
										</tr>
									</a4j:repeat>
								</table>
							</div>
						</ui:fragment>
			      	</div>	
			      </td>
			    </tr>
			    <tr>
			      <td colspan="5">
			      	<div class="agric" style="height:135px;">
			      		<div class="fingerprint">
							<img src="/asset/images/record/icon10.jpg" width="41" height="41" style="margin:0 10px;"/>
							农残余检测
						</div>
						<ui:fragment rendered="#{resumeTracingHome.testing[1] ==null || resumeTracingHome.testing[1] ==''}">
							<div class="dataBox dataBox5">
								<div class="no_data no_data5">
									<img src="/asset/images/record/data5.png" />
									<span>暂无数据</span>
								</div>
							</div>
						</ui:fragment>
						<ui:fragment rendered="#{resumeTracingHome.testing[1] !=null &amp;&amp; resumeTracingHome.testing[1] !=''}">
							<table width="100%" cellpadding="0" cellspacung="0" class="data5">
								<tr>
									<td width="33%">
										<span>检测种类：</span>
										<span>
											<ui:fragment rendered="#{resumeTracingHome.testing[0] !=null &amp;&amp; resumeTracingHome.testing[0] !=''}">
												#{resumeTracingHome.testing[0]}
											</ui:fragment>
										</span>
									</td>
									<td width="34%">
										<span>检测机构：</span>
										<span>#{resumeTracingHome.testing[1]}</span>
									</td>
									<td width="33%">
										<span>检测时间：</span>
										<span>
											<ui:fragment rendered="#{resumeTracingHome.testing[2] !=null &amp;&amp; resumeTracingHome.testing[2] !=''}">
												<h:outputText value="#{resumeTracingHome.testing[2]}" >
													  <f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT+8"/>
												</h:outputText>
											</ui:fragment>
										</span>
									</td>
								</tr>
							</table>
						</ui:fragment>
			      	</div>	
			      </td>
			    </tr>
			</table>
			</h:panelGroup>
			<h:panelGroup rendered="#{resumeTracingHome.noneORblock}">
				<div class="no_result">
					<div class="inner">
						<div class="inner_content" style="margin-top:160px;">
							<div class="pic fl">
								<img src="/asset/images/record/plane.png" width="78" height="86"/>
							</div>
							<div class="txt fl">
								<p style="margin-bottom:20px;">抱歉，没有找到“#{resumeTracingHome.useBatch}”相关的搜结果。</p>
								<p>建议您查看输入的内容是否有误</p>
							</div>
						</div>
					</div>
				</div>
			</h:panelGroup>
		</div>
	</div>
	<s:div id="amListId">
	<div class="pop">
		<div class="p_left fl">关闭</div>
		<h:panelGroup rendered="#{resumeTracingHome.withFarmingList.size()!=0}">
			<div class="p_right fl">
				<table width="100%" cellpadding="0" cellspacing="0">
					<tr>
						<td width="200">
							<img src="/asset/images/record/pop1.png" />
							<span>
								<h:outputText value="#{resumeTracingHome.withFarmingList.get(0)[0][0]}" >
									  <f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT+8"/>
								</h:outputText>
							</span>
							<span>
								<h:outputText value="#{resumeTracingHome.withFarmingList.get(0)[0][0]}" >
									  <f:convertDateTime pattern="HH:mm" timeZone="GMT+8"/>
								</h:outputText>
							</span>
						</td>
						<td width="200">
							<img src="/asset/images/record/pop2.png" />
							<span>农事内容：</span>
							<span title="#{resumeTracingHome.withFarmingList.get(0)[0][8]}">#{resumeTracingHome.withFarmingList.get(0)[0][1]}</span>
						</td>
						<td width="200">
							<img src="/asset/images/record/pop3.png" />
							<span>操作人：</span>
							<span title="#{resumeTracingHome.withFarmingList.get(0)[0][7]}">
								<ui:fragment rendered="#{resumeTracingHome.withFarmingList.get(0)[0][2]!=null &amp;&amp; resumeTracingHome.withFarmingList.get(0)[0][2]!=''}">
									#{resumeTracingHome.withFarmingList.get(0)[0][2]}
								</ui:fragment>
								<ui:fragment rendered="#{resumeTracingHome.withFarmingList.get(0)[0][2]==null || resumeTracingHome.withFarmingList.get(0)[0][2]==''}">
								--
								</ui:fragment>
							</span>
						</td>
					</tr>
					<tr>
						<td>
							<img src="/asset/images/record/pop4.png" />
							<span>操作工时：</span>
							<span>#{resumeTracingHome.withFarmingList.get(0)[0][3]}小时</span>
						</td>
						<td>
							<img src="/asset/images/record/pop5.png" />
							<span>空气温度：</span>
							<span>
								<h:panelGroup rendered="#{resumeTracingHome.withFarmingList.get(0)[0][4] !=null &amp;&amp; resumeTracingHome.withFarmingList.get(0)[0][4] !=''}">
									#{resumeTracingHome.withFarmingList.get(0)[0][4]}℃
								</h:panelGroup>
								<h:panelGroup rendered="#{resumeTracingHome.withFarmingList.get(0)[0][4] ==null || resumeTracingHome.withFarmingList.get(0)[0][4] ==''}">
									--
								</h:panelGroup>
							</span>
						</td>
						<td>
							<img src="/asset/images/record/pop6.jpg" />
							<span>空气湿度：</span>
							<span>
									<h:panelGroup rendered="#{resumeTracingHome.withFarmingList.get(0)[0][5] !=null &amp;&amp; resumeTracingHome.withFarmingList.get(0)[0][5] !=''}">
										#{resumeTracingHome.withFarmingList.get(0)[0][5]}%
									</h:panelGroup>
									<h:panelGroup rendered="#{resumeTracingHome.withFarmingList.get(0)[0][5] ==null || resumeTracingHome.withFarmingList.get(0)[0][5] ==''}">
										--
									</h:panelGroup>
							</span>
						</td>
					</tr>
				</table>
				<div class="pics clear">
					<p>农事图片：</p>
					<ul>
						<a4j:repeat var="var" value="#{resumeTracingHome.withFarmingList.get(0)[0][6]}" rowKeyVar="_index">
							<li><img src="#{var}@74h_74w.src" /></li>
						</a4j:repeat>
					</ul>
				</div>
				<div class="pics pics2">
					<p>投入品：</p>
					<ul>
						<a4j:repeat var="var" value="#{resumeTracingHome.withFarmingList.get(0)[1]}" rowKeyVar="_index">
							<li>
								<h:panelGroup rendered="#{var[0] !=null &amp;&amp; var[0] !=''}">
									<img src="#{var[0]}@84h_84w.src"/>
								</h:panelGroup>
								<h:panelGroup rendered="#{var[0] ==null || var[0] ==''}">
									<img src="/asset/images/record/small_trp.png"/>
								</h:panelGroup>
								<div class="txt">
									<span style="white-space: nowrap;overflow: hidden;text-overflow: ellipsis;text-align: center;width: 50px;float: left;" title="#{var[1]}">#{var[1]}</span>
									<span style="white-space: nowrap;overflow: hidden;text-overflow: ellipsis;text-align: center;width: 50px;float: left;padding-left:2px;" title="#{var[2]}#{var[3]}">#{var[2]}#{var[3]}</span>
								</div>
							</li>
						</a4j:repeat>
					</ul>
				</div>
			</div>
		</h:panelGroup>
	</div>
	</s:div>
	
	<a4j:form>
	 	<a4j:jsFunction name="withfarming" action="#{resumeTracingHome.withFarming}" reRender="amListId" oncomplete="huidiao()">
			<a4j:actionparam name="resumeTracingHome" assignTo="#{resumeTracingHome.aaiId}"/>
		</a4j:jsFunction>
	</a4j:form>
	
<script type="text/javascript" src="#{request.contextPath}/asset/js/panorama/jquery.nicescroll.min.js" ></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/highcharts.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/highcharts-more.js"></script>	
<script type="text/javascript">
//<![CDATA[
jquery(document).ready(function(){
	eFingerprint();
	if(jQuery('.no_result').length!=0){
		jQuery('.no_result').css('height',jQuery(window).height()-jQuery('.breadNav_wap').height()-jQuery('.s_top').height()-jQuery('.top').height()-102)
	}
	// 视频图片切换
	jquery('.audio li').click(function() {
		var index = jquery(this).index();
		jquery(this).addClass('cur').siblings().removeClass('cur');
		if(index==0){
			jquery('.hasData .sp').addClass('cur');
			jquery('.hasData .tp').removeClass('cur');
		}else{
			jquery('.hasData .tp').addClass('cur');
			jquery('.hasData .sp').removeClass('cur');
		}
	});
	
	// 图片轮播
	var imageAmount = jquery(".camera li").length;		
 	var nowimg = 0;
	jquery('.camera .rightBtn').click(function() {
		nowimg++;
		if(nowimg > imageAmount - 1){
 			nowimg = 0;
 		}
 		jquery('.camera li').eq(nowimg).addClass("cur").siblings().removeClass("cur");
	});
	jquery('.camera .leftBtn').click(function() {
		nowimg--;
		if(nowimg < 0){
 			nowimg = imageAmount - 1;
 		}
 		jquery('.camera li').eq(nowimg).addClass("cur").siblings().removeClass("cur");
	});

	// 滚动条
	jquery(".data1").niceScroll({
        cursorcolor: "#9fbbdd"
    });

	jquery(".natural").niceScroll({
        cursorcolor: "#9fbbdd"
    });

	jquery(".n_detail").niceScroll({
        cursorcolor: "#9fbbdd"
    });

	jquery(".divdata4").niceScroll({
	       cursorcolor: "#9fbbdd"
	   });

	jquery(".tree").niceScroll({
        cursorcolor: "#9fbbdd"
    });

}) 

window.onresize = function(){
	if(jQuery('.no_result').length!=0){
		jQuery('.no_result').css('height',jQuery(window).height()-jQuery('.breadNav_wap').height()-jQuery('.s_top').height()-jQuery('.top').height()-102)
	}
}


//搜索
function openShow(){
	if(jQuery('input[type=text]').val().trim()==''){
		window.location.href="ResumeTracing.seam?useBatch="+jQuery('input[type=text]').val().trim();
	}else{
		window.location.href="ResumeTracingShow.seam?useBatch="+jQuery('input[type=text]').val().trim();
	}
}  

//农事信息详情
function openAm(id){
	withfarming(id);
}
function huidiao(){
	if(jquery(document).scrollTop()<(jQuery('.breadNav_wap').height()+jQuery('.s_top').height()+jQuery('.top').height()+102)){
		jquery('.pop').css('top',310+"px");
	}else{
		jquery('.pop').css('top',jquery(document).scrollTop()+((jQuery(window).height()-380)/2)+"px");
	}
	if(jquery(".pics2 ul li").length>3){
		jquery(".pics2 ul").css('height','116px');
		jquery(".pics2 ul").niceScroll({
	        cursorcolor: "#9fbbdd"
	    });
	}

	if(jquery(".pics").eq(0).find('li').length>4){
		jquery(".pics ul").eq(0).css('height','89px');
		jquery(".pics ul").niceScroll({
	        cursorcolor: "#9fbbdd"
	    });
	}
	
	jquery('.pop').show();

	jquery('.p_left').click(function() {
		jquery(this).parent('.pop').css('display','none');
	});
}
   
//查看
jquery('.check').click(function() {
	var index = jquery(this).parents('tr').index();
	jquery('.fingerprint .back').css('display','block');
	jquery(this).parents('.natural').css('display','none');
	jquery(this).parents('.natural').siblings('.n_detail').eq(index).css('display','block');
	jquery('.agric .cf5').eq(0).find('td').eq(2).text("使用时间");
	topzreo();
});

jquery('.fingerprint .back').click(function() {
 	jquery(this).css('display','none');
 	 jquery('.natural').css('display','block');
 	 jquery('.n_detail').css('display','none');
 	jquery('.agric .cf5').eq(0).find('td').eq(2).text("操作");
 	topzreo();
 });   

function topzreo(){
	setTimeout(function(){
		jquery('.nicescroll-rails').each(function(){
			if(jquery(this).css('height')=="306px"){
				jquery(this).css('top','1341px');
			}
		})
	}, 500);
}

   
/* 环境指纹 开始 */
var aveTemp =#{resumeTracingHome.aveTemp};
var weatherTemp =#{resumeTracingHome.weatherTemp};
var suitableTemp =#{resumeTracingHome.suitableTemp};
var actualRain =#{resumeTracingHome.actualRain}; 
var weatherRain =#{resumeTracingHome.weatherRain};
var suitableRain=#{resumeTracingHome.suitableRain}; 
var actualLight=#{resumeTracingHome.actualLight}; 
var weatherLight =#{resumeTracingHome.weatherLight};
var suitablelLight=#{resumeTracingHome.suitablelLight}; 
var oneORmore =#{resumeTracingHome.oneORmore};
var minTempY =#{resumeTracingHome.minTempY};
var mwd=#{resumeTracingHome.mwd};
var aveTempArr=#{resumeTracingHome.aveTempArr};
function eFingerprint(){
	if(oneORmore==2){
		chartFun1();   //highcharts方法
		chartFun2();
		chartFun3();
	}else{
		chartFun4();
	    chartFun5();
	    chartFun6();
	}
}

Highcharts.setOptions({ global: { useUTC: false } });   
function chartFun1(){
	var chart1name = [];
	if(aveTemp.length>0){
		chart1name.push({
			name: '实际温度',
			data: aveTemp,
			zIndex: 1,
			marker: {
				fillColor: 'white',
				lineWidth: 2,
				lineColor: "#9cbfdb"
			}
		})
	}
	if(suitableTemp.length>0){
		chart1name.push({
			name: '适宜温度',
			data: suitableTemp,
			type: 'arearange',
			lineWidth: 0,
			color: Highcharts.getOptions().colors[0],
			fillOpacity: 0.3,
			zIndex: 0
			
		})
	}
	jQuery('#container1').highcharts({
		chart:{
			backgroundColor : "transparent"
		},
		title: {
			text: ''
		},
		
		xAxis: {
			type: 'datetime',
			tickPositions:aveTempArr,
			labels: {
				rotation: -45,
			    formatter: function() {
			    	var vDate=new Date(this.value);  
				    if(mwd==2){
			        	return (vDate.getMonth()+1);  
					}else{
						return (vDate.getMonth()+1)+"-"+vDate.getDate();  
					}
			    } 
        	 }
		},
		
		yAxis: {
			title: {
				text: null
			},
			min:minTempY,
			allowDecimals:false,
            tickPixelInterval: 10
		},
		plotOptions: {
            series: {
                connectNulls: true
            }
        },
		
		tooltip: {
			shared: true,
               valueSuffix: '°C',
               dateTimeLabelFormats : {
            	   day: '%m月%d',
   				month:'%m月%d',
				week:'%m月%d'
                
            }
		},
		
		legend: {
		},
		
		series: chart1name
	
	});		
};
function chartFun2(){
	var chart2name = [];
	if(actualRain.length>0){
		chart2name.push({
			name: '实际降水量',
			data: actualRain,
			zIndex: 1,
			marker: {
				fillColor: 'white',
				lineWidth: 2,
				lineColor: "#9cbfdb"
			}
		})
	}
	if(suitableRain.length>0){
		chart2name.push({
			name: '适宜降水量',
			data: suitableRain,
			zIndex: 1,
			marker: {
				fillColor: 'white',
				lineWidth: 2,
				lineColor: "#ebd169"
			}
		} )
	}
	jQuery('#container2').highcharts({
		chart:{
			backgroundColor : "transparent"
		},
		title: {
			text: ''
		},
		
		xAxis: {
			type: 'datetime',
			tickPositions:aveTempArr,
			labels: {
				rotation: -45,
			    formatter: function() {  
			    	var vDate=new Date(this.value);  
				    if(mwd==2){
			        	return (vDate.getMonth()+1);  
					}else{
						return (vDate.getMonth()+1)+"-"+vDate.getDate();  
					}
			    } 
        	 }
		},
		
		yAxis: {
			title: {
				text: ''
			},
			min: 0,
			allowDecimals:false,
            tickPixelInterval: 10
		},
		plotOptions: {
            series: {
                connectNulls: true
            }
        },
		
		tooltip: {
			shared: true,
               valueSuffix: 'mm',
               dateTimeLabelFormats : {
            	   day: '%m月%d',
   				month:'%m月%d',
				week:'%m月%d'
                
            }
		},
		
		legend: {
		},
		
		series: chart2name
	
	});	
};
function chartFun3(){
	var chart3name = [];
	if(actualLight.length>0){
		chart3name.push({
			name: '实际光照',
			data: actualLight,
			zIndex: 1,
			marker: {
				fillColor: 'white',
				lineWidth: 2,
				lineColor: "#9cbfdb"
			}
		})
	}
	if(suitablelLight.length>0){
		chart3name.push({
			name: '适宜光照',
			data: suitablelLight,
			zIndex: 1,
			marker: {
				fillColor: 'white',
				lineWidth: 2,
				lineColor: "#ebd169"
			}
		})
	}
	jQuery('#container3').highcharts({
		chart:{
			backgroundColor : "transparent"
		},
		title: {
			text: ''
		},
		
		xAxis: {
			type: 'datetime',
			tickPositions:aveTempArr,
			labels: {
				rotation: -45,
			    formatter: function() {  
			    	 var vDate=new Date(this.value);  
			         if(mwd==2){
				        	return (vDate.getMonth()+1);  
						}else{
							return (vDate.getMonth()+1)+"-"+vDate.getDate();  
						} 
			    } 
        	 }
		},
		
		yAxis: {
			title: {
				text: null
			},
			min:0,
			allowDecimals:false,
            tickPixelInterval: 10,
           
			labels: {
               formatter: function() {
				return this.value;
          		}
           }
		},
		plotOptions: {
            series: {
                connectNulls: true
            }
        },
		
		tooltip: {
			shared: true,
               valueSuffix: 'lux',
               dateTimeLabelFormats : {
            	   day: '%m月%d',
   				month:'%m月%d',
				week:'%m月%d'
                
            }
		},
		
		legend: {
		},
		
		series:chart3name
	
	});	
};
function chartFun5(){
	var chart5name = [];
	if(actualRain.length>0){
		chart5name.push({
			name: '实际湿度',
			data: actualRain,
			zIndex: 1,
			marker: {
				fillColor: 'white',
				lineWidth: 2,
				lineColor: "#9cbfdb"
			}
		})
	}
	if(weatherRain.length>0){
		chart5name.push({
			name: '气象湿度',
			data: weatherRain,
			zIndex: 1,
			color:'#008844',
			marker: {
				fillColor: 'white',
				lineWidth: 2,
				lineColor: "#bce5ae"
			}
		})
	}
	if(suitableRain.length>0){
		chart5name.push({
			name: '适宜湿度',
			data: suitableRain,
			type: 'arearange',
			lineWidth: 0,
			
			color: Highcharts.getOptions().colors[0],
			fillOpacity: 0.3,
			zIndex: 0
		})
	}
	jQuery('#container5').highcharts({
		chart:{
			backgroundColor : "#f8f8f8"
		},
		title: {
			text: ''
		},
		
		xAxis: {
			type: 'datetime',
			tickPositions:aveTempArr,
			labels: {
				rotation: -45,
			    formatter: function() {  
			    	 var vDate=new Date(this.value);  
			    	 if(mwd==2){
				        	return (vDate.getMonth()+1);  
						}else{
							return (vDate.getMonth()+1)+"-"+vDate.getDate();  
						}
			    } 
        	 }
		},
		
		yAxis: {
			title: {
				text: ''
			},
			min: 0,
			max:100,
			allowDecimals:false,
            tickPixelInterval: 10
		},
		plotOptions: {
            series: {
                connectNulls: true
            }
        },
		
		tooltip: {
			shared: true,
   			valueSuffix: '%',
   			dateTimeLabelFormats : {
   			  day: '%m月%d',
				month:'%m月%d',
				week:'%m月%d'
				
			}
		},
		
		legend: {
		},
		
		series: chart5name
	
	});
};
function chartFun4(){
	var chart4name = [];
	if(aveTemp.length>0){
		chart4name.push({
			name: '实际温度',
			data: aveTemp,
			zIndex: 1,
			marker: {
				fillColor: 'white',
				lineWidth: 2,
				lineColor: "#9cbfdb"
			}
		})}
	if(weatherTemp.length>0){
		chart4name.push({
			name: '气象温度',
			data: weatherTemp,
			zIndex: 1,
			color:'#008844',
			marker: {
				fillColor: 'white',
				lineWidth: 2,
				lineColor: "#bce5ae"
			}
		})
	}
	if(suitableTemp.length>0){
		chart4name.push({
			name: '适宜温度',
			data: suitableTemp,
			type: 'arearange',
			lineWidth: 0,
			
			color: Highcharts.getOptions().colors[0],
			fillOpacity: 0.3,
			zIndex: 0
		})
	}
    jQuery('#container4').highcharts({
        chart:{
            backgroundColor : "#f8f8f8"
        },
        title: {
            text: ''
        },
        
        xAxis: {
			 type: 'datetime',
			 tickPositions:aveTempArr,
			  labels: {
				  rotation: -45,
			      formatter: function() {  
			           var vDate=new Date(this.value);  
			           if(mwd==2){
				        	return (vDate.getMonth()+1);  
						}else{
							return (vDate.getMonth()+1)+"-"+vDate.getDate();  
						} 
			       } 
           }
		},
        
        yAxis: {
            title: {
                text: null
            },
            min:minTempY,
            allowDecimals:false,
            tickPixelInterval: 10
        },
        plotOptions: {
            series: {
                connectNulls: true
            }
        },
        tooltip: {
               shared: true,
               valueSuffix: '°C',
               dateTimeLabelFormats : {
            	   day: '%m月%d',
   				month:'%m月%d',
				week:'%m月%d'
                
            }
        },
        
        legend: {
        },
        
        series: chart4name
    
    });        
};

function chartFun6(){
	var chart6name = [];
	if(actualLight.length>0){
		chart6name.push({
			name: '实际光照',
			data: actualLight,
			zIndex: 1,
			marker: {
				fillColor: 'white',
				lineWidth: 2,
				lineColor: "#9cbfdb"
			}
		})}
	if(weatherLight.length>0){
		chart6name.push({
			name: '气象光照',
			data: weatherLight,
			zIndex: 1,
			color:'#008844',
			marker: {
				fillColor: 'white',
				lineWidth: 2,
				lineColor: "#bce5ae"
			}
		})
	}
	if(suitablelLight.length>0){
		chart6name.push({
			name: '适宜光照',
			data: suitablelLight,
			zIndex: 1,
			marker: {
				fillColor: 'white',
				lineWidth: 2,
				lineColor: "#ebd169"
			}
		})
	}
    jQuery('#container6').highcharts({
        chart:{
            backgroundColor : "#f8f8f8"
        },
        title: {
            text: ''
        },
        
        xAxis: {
			type: 'datetime',
			tickPositions:aveTempArr,
		  	labels: {
			  rotation: -45,
		      formatter: function() {  
		           var vDate=new Date(this.value);  
		          
		           if(mwd==2){
			        	return (vDate.getMonth()+1);  
					}else{
						return (vDate.getMonth()+1)+"-"+vDate.getDate();  
					}
		       } 
           }
		},
        
        yAxis: {
            title: {
                text: null
            },
            min:0,
            allowDecimals:false,
            tickPixelInterval: 10,
           
            labels: {
               formatter: function() {
                return this.value;
                  }
           }
        },
        plotOptions: {
            series: {
                connectNulls: true
            }
        },
        tooltip: {
             formatter: function() {
                 return  Highcharts.dateFormat('%m月%d', this.x) +" "+ this.y +' lux';
         }
        },
        
        legend: {
        },
        
        series:chart6name
    
    });    
};
/* 环境指纹 结束 */
           
//]]>
</script>           
</td> 
</ui:define>
</ui:composition>

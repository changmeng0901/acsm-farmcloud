<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	template="/layout/template_new.xhtml">

	<ui:define name="body">
	<style>
		.form-control{
			float:left;
		}
		.all_d3{
		 margin-left: auto;
   		 margin-right: auto;
   		 width:850px;}   
	</style>
		<td valign="top">
		<h:form id="user">
						<!-- Modal -->
<div aria-hidden="false" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="myModal" class="modal fade in w600na" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">提示框</h4>
      </div>
      <div class="modal-body">
       <span id="spanValue">*号部分为必填项！</span>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
        <button type="button" class="btn btn-primary" data-dismiss="modal">确认</button>
      </div>
    </div>
  </div>
</div>
        <!-- #{bdOperatingInfoHome.work()} -->
                <div class="right_c">
                	<div class="r_title">
                    	<div class="r_t_l"><s:link propagation="none"  view="/record/BatchRecordList.xhtml" style="text-decoration:none;color:black;" value="批量管理 ">
                    	</s:link>
                    	
						&#160;&gt;&#160;&#160;<font size="4">#{bdOperatingInfoHome.operatingTypeObj eq 1?'采摘对应关系':'检测对应关系'}</font></div>
                    </div>
                    <br/>
                     <div class="sp_d_iv">
                                    <span class="spn_01">批次编号：#{bdOperatingInfoHome.batch.batchNumber}</span>
								</div>
				<!--入库订单列表开始-->
				<div class="all_d3">
                    	<div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">#{bdOperatingInfoHome.operatingTypeObj eq 1?'名称':'检测机构'}：</td>
                                    <td>
                                       <h:inputText styleClass="form-control nw221" id="name" value="#{bdOperatingInfoHome.instance.name}" required="true"/>
                                       <span class="finput" style="color:#FF0000">*</span>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    	<div class="all_da all_w01">
                        	<table>
                            	<tr>
                                	<td class="all_te">操作时间：</td>
                                    <td>
                                    <div class="input-append date form_datetime " >
								    <h:inputText  id="operatingTime" styleClass="new_time" value="#{bdOperatingInfoHome.instance.operatingTime}">
								    <f:convertDateTime pattern="yyyy-MM-dd HH:mm" timeZone="GMT+8" />
								    </h:inputText>
								    <span class="add-on"><i class="icon-th"></i></span>
								    </div>
                                    </td>
                            	</tr>
                            </table>
                        </div>
                        <div class="all_da all_w01">
                        	<table>
                            	<tr>
                                	<td class="all_te">开始编号：</td>
                                    <td><h:inputText class="form-control nw221" id="beginNumber" value="#{bdOperatingInfoHome.instance.beginNumber}" />
                                    <span class="finput" style="color:#FF0000">*</span></td>
                            	</tr>
                            </table>
                        </div>
                        <div class="all_da all_w01">
                        	<table>
                            	<tr>
                                	<td class="all_te">结束编号：</td>
                                    <td><h:inputText class="form-control nw221" id="endNumber" value="#{bdOperatingInfoHome.instance.endNumber}" />
                                    <span class="finput" style="color:#FF0000">*</span></td>
                            	</tr>
                            </table>
                        </div>
                        <div class="all_da all_w01" style="width:724px;">
                        	<table>
                                <tr>
							<td class="all_te">#{bdOperatingInfoHome.operatingTypeObj eq 1?'内容':'检测种类'}：</td>
							
							<td>
								<h:inputTextarea id="content" styleClass="form-control nw420" rows="3" value="#{bdOperatingInfoHome.instance.content}" />
                            </td>
						</tr>
						<tr>
							<td colspan="2" height="35"></td>
						</tr>
                            </table>
                        </div>
                        
                        <div class="clear"></div>
                   </div>
				 <table class="r_c_table" style="margin-bottom:30px; margin-top:0;" cellpadding="0" cellspacing="0">
						<tr>
							<td  valign="top" width="170">
		    			<a:commandButton id="persist"  styleClass="btn btn-primary" value="提交" action="#{bdOperatingInfoHome.checkInfo}" rendered="#{!bdOperatingInfoHome.managed}" onclick="if(!checkSubmit()) return false;" data="#{bdOperatingInfoHome.checkParam}" oncomplete="showMessage(data,1)" />
		            	<a:commandButton id="update"  styleClass="btn btn-primary" value="提交" action="#{bdOperatingInfoHome.checkInfo}" rendered="#{bdOperatingInfoHome.managed}" onclick="if(!checkSubmit()) return false;" data="#{bdOperatingInfoHome.checkParam}"  oncomplete="showMessage(data,2)" />
		            	<h:commandButton id="updateHidden1"  styleClass="aaa" style="display:none;" action="#{bdOperatingInfoHome.persist}"/>
		            	<h:commandButton id="updateHidden2"  styleClass="bbb" style="display:none;" action="#{bdOperatingInfoHome.update}"/>
		    			&#160;&#160;
		    			
		    			<a href="#{request.contextPath}/record/BdOperatingInfoList.seam?batchId=#{bdOperatingInfoHome.batchId}&amp;operatingTypeObj=#{bdOperatingInfoHome.operatingTypeObj}" class="btn btn-default">返回</a>
		    			
                            </td>
						</tr>
                   </table> 
				<!--入库订单列表结束-->
                    <div class="clear"></div>
                </div><!--right_c结束-->
                <div class="clear"></div>
                
              </h:form>
<script type="text/javascript">
function checkSubmit(){
	
	   var a1 =  document.getElementById("user:name").value;
	   var beginNumber =  document.getElementById("user:beginNumber").value;
	   var endNumber =  document.getElementById("user:endNumber").value;
	   if(a1==""){
		   document.getElementById("spanValue").innerHTML = "名称不能为空！";
		   jquery("#myModal").modal('show');return false;
	   }else if(beginNumber==""){
		   document.getElementById("spanValue").innerHTML = "开始编号不能为空！";
		   jquery("#myModal").modal('show');return false;
	   }else if(beginNumber.length > 8){
		   document.getElementById("spanValue").innerHTML = "开始编号长度不能大于8位！";
		   jquery("#myModal").modal('show');return false;
	   }else if(isNaN(beginNumber)){
		   document.getElementById("spanValue").innerHTML = "开始编号只能为数字！";
		   jquery("#myModal").modal('show');return false;
	   }else if(endNumber==""){
		   document.getElementById("spanValue").innerHTML = "结束编号不能为空！";
		   jquery("#myModal").modal('show');return false;
	   }else if(endNumber.length > 8){
		   document.getElementById("spanValue").innerHTML = "结束编号长度不能大于8位！";
		   jquery("#myModal").modal('show');return false;
	   }else if(isNaN(endNumber)){
		   document.getElementById("spanValue").innerHTML = "结束编号只能为数字！";
		   jquery("#myModal").modal('show');return false;
	   }else if(parseInt(beginNumber) > parseInt(endNumber)){
		   document.getElementById("spanValue").innerHTML = "开始编号不能大于结束编号！";
		   jquery("#myModal").modal('show');return false;
		   }
	   return true;
}

function closeMethod(){
	    var a1 = document.getElementById("user:name");
	    var beginNumber =  document.getElementById("user:beginNumber");
		   var endNumber =  document.getElementById("user:endNumber");
	   if(a1.value==""){
		   a1.focus();
	   }else if(beginNumber.value==""){
		   beginNumber.focus();
	   }else if(beginNumber.value.length > 8){
		   beginNumber.focus();
	   }else if(isNaN(beginNumber.value)){
		   beginNumber.focus();
	   }else if(endNumber.value==""){
		   endNumber.focus();
	   }else if(endNumber.value.length > 8){
		   endNumber.focus();
	   }else if(isNaN(endNumber.value)){
		   endNumber.focus();
	   }
}

function showMessage(data,index){
	if(data != ""){
		document.getElementById("spanValue").innerHTML = data;
		jquery("#myModal").modal('show');
      return false;
	}else{
		if(index == 1){
			jquery('.aaa').trigger("click");
		}else{
			jquery('.bbb').trigger("click");
		}
	}
}
</script>
  <script type="text/javascript">
           jquery(".form_datetime").datetimepicker({
			    format: "yyyy-mm-dd hh:ii",
			    autoclose: true,
				 weekStart: 1,
				  //startDate: "2014-08-14 10:00",
				 language:  'zh-CN',
			    
			    pickerPosition: "bottom-left"
			    });
			</script>
            </td> 
            <style>
    .rich-calendar-button{
     margin-left:-8px
    }
    </style>
	</ui:define>

</ui:composition>

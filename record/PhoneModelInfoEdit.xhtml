<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:a="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:c="http://java.sun.com/jstl/core"
    template="/layout/template_model.xhtml">

<ui:define name="body">

<!--右边开始-->
            <td valign="top" width="100%">
                <div class="right_c">
                	<div class="r_title">
                    	<div class="r_t_l"><s:link propagation="none"  view="#{sessionTake.urlTemp}" style="text-decoration:none;color:black;" value="工作 ">
                    </s:link>&#160;&gt;&#160;&#160;<font size="3">模版管理</font></div>
                    <div class="r_t_r">
							<ul>
								<li >
									<a href="#{request.contextPath}/record/PrintRecordList.seam" style="text-decoration:none;color:black;" >
				                 		<img src="#{request.contextPath}/asset/images/0001_03.jpg" width="11" height="9" />
				              			打印记录
				              		</a>
			        			</li>
								<li style="border-right:1px solid #ccc;">
									 <a href="#{request.contextPath}/record/RecordManagement.seam" style="text-decoration:none;color:black;" >
									<img src="#{request.contextPath}/asset/images/0001_06.jpg" width="11" height="9" />
			                      	 基础信息
			                      	</a>
			                    </li>
			     			</ul>
						</div>
                    </div>
                
                <table width="100%" cellpadding="0" cellspacing="0" style="margin-top:35px;">
                	<tr>
                		<td width="250" valign="top" style="padding-right:105px;">
                        	<div class="left_logo" id="logo_s2">
                        	<c:if test="#{phoneModelInfoHome.instance.logoImageUrl==null}">
                        	<img src="#{request.contextPath}/asset/images/k7_03.jpg" id="logo_s" class="imghead" width="250" height="40" />
                        	</c:if>
                        	<c:if test="#{phoneModelInfoHome.instance.logoImageUrl!=null}">
                        	<img src="#{phoneModelInfoHome.instance.logoImageUrl}" id="logo_s" class="imghead" width="250" height="40" />
                        	</c:if>
                            	<div class="logo_div">LOGO</div>
                            </div>
                        	<div class="left_pic2" id="back_s2">
                        	<c:if test="#{phoneModelInfoHome.instance.pageTopImageUrl==null}">
                        	<img src="#{request.contextPath}/asset/images/k7_05.jpg" id="back_s" class="imghead" width="250" height="185" />
                        	</c:if>
                        	<c:if test="#{phoneModelInfoHome.instance.pageTopImageUrl!=null}">
                        	<img src="#{phoneModelInfoHome.instance.pageTopImageUrl}" id="back_s" class="imghead" width="250" height="185" />
                        	</c:if>
                            	<div class="pic2_div">页面上方背景图</div>
                            </div>
                        	<div id="color" style="background: none repeat scroll 0 0 #{phoneModelInfoHome.instance.backgroundColor==null?'#B3D08A':phoneModelInfoHome.instance.backgroundColor};height: 155px;margin-bottom: 3px;width: 250px;">
                            	<div class="color2_div">页面背景色</div>
                            </div>
                        	<div class="left_footer" id="foot_s2">
                        	<c:if test="#{phoneModelInfoHome.instance.pageEndImageUrl==null}">
                        	<img src="#{request.contextPath}/asset/images/k7_05.jpg" id="foot_s" class="imghead" width="250" height="40" />
                        	</c:if>
                        	<c:if test="#{phoneModelInfoHome.instance.pageEndImageUrl!=null}">
                        	<img src="#{phoneModelInfoHome.instance.pageEndImageUrl}" id="foot_s" class="imghead" width="250" height="40" />
                        	</c:if>
                            	<div class="footer_div">页面底部版权信息</div>
                            </div>
                        </td>
                        <!--右侧开始-->
                		<td valign="top" width="100%">
                		 <h:form id="phoneModelInfo" enctype="multipart/form-data">
                		 	<rich:modalPanel id="products" autosized="true" height="125" width="240" headerClass="modalHeader" >
                    			<div class="ts_div2" id="div2">
        						<div class="tck_ti"><a href="#">
        							<h:outputLink value="#"  onclick="#{rich:component('products')}.hide(); return false;">
                    				<img src="#{request.contextPath}/asset/images/close_17.jpg" width="20" height="20" onclick="return closeMethod()"/>
                					</h:outputLink>
        						</a></div>
        	 
								<table style="width:100%; margin-top:25px; table-layout:fixed; margin-left:15px;">
				                    <tr>
				                    	<td width="46" align="left"><img src="#{request.contextPath}/asset/images/tstc.jpg" width="46" height="46" /></td>
				                        <td align="left" style="font-family:'宋体'; color:#000000; font-size:12px; padding-left:15px;">
				                        	<span id="spanValue"></span>
				                        </td>
				                    </tr>
				                </table>
				                </div>
		                </rich:modalPanel>
                        	<table width="95%" cellpadding="0" cellspacing="0">
                        	<tr>
                                	<td width="4"  class="ge_td1" valign="top"><img src="#{request.contextPath}/asset/images/bg_se_03.jpg" width="4" height="51" /></td>
                                    <td width="100"  valign="top" align="center" class="ge_td1"><img src="#{request.contextPath}/asset/images/picc_05.jpg" width="37" height="45" /></td>
                                    <td class="ge_td1 ge_td2" align="right" >名&#160;&#160;称：</td>
                                    <td class="ge_td1 ge_td3"><h:inputText id="name" maxlength="30" value="#{phoneModelInfoHome.instance.name}" styleClass="r_c_text"/><font color="#FF0000">*</font></td>
                            	</tr>
                        	
                            	<tr>
                                	<td width="4"  class="ge_td1" valign="top"><img src="#{request.contextPath}/asset/images/bg_se_06.jpg" width="4" height="51" /></td>
                                    <td width="100"  valign="top" align="center" class="ge_td1"><img src="#{request.contextPath}/asset/images/picc_21.jpg" id="logo" width="37" height="45" /></td>
                                    <td class="ge_td1 ge_td2" align="right">公司LOGO：</td>
                                    <td class="ge_td1 ge_td3">
                                    <s:fileUpload id="logoUrl" size="40" accept="image/png,image/jpeg,image/gif" contentType="image/png,image/jpeg,image/gif"
							fileName="#{phoneModelInfoHome.instance.logName}" onchange="previewImage('logo_s',this);" data="#{phoneModelInfoHome.instance.logoUrl}">
						</s:fileUpload>
						</td>
                            	</tr>
                            	<tr>
                                	<td width="4"  class="ge_td1" valign="top"><img src="#{request.contextPath}/asset/images/bg_se_08.jpg" width="4" height="51" /></td>
                                    <td width="100"  valign="top" align="center" class="ge_td1"><img src="#{request.contextPath}/asset/images/picc_25.jpg" width="37" height="45" /></td>
                                    <td class="ge_td1 ge_td2" align="right"  valign="top">页面上方背景图：</td>
                                    <td class="ge_td1 ge_td3">
                                    <s:fileUpload id="topUrl" size="40" accept="image/png,image/jpeg,image/gif" contentType="image/png,image/jpeg,image/gif"
							fileName="#{phoneModelInfoHome.instance.topName}" onchange="previewImage('back_s',this);" data="#{phoneModelInfoHome.instance.topUrl}">
						</s:fileUpload>
                                    </td>
                            	</tr>
                            	<tr>
                                	<td width="4"  class="ge_td1" valign="top"><img src="#{request.contextPath}/asset/images/bg_se_10.jpg" width="4" height="51" /></td>
                                    <td width="100"  valign="top" align="center" class="ge_td1"><img src="#{request.contextPath}/asset/images/picc_28.jpg" width="37" height="45" /></td>
                                    <td class="ge_td1 ge_td2" align="right" >页面背景色：</td>
                                    <td class="ge_td1 ge_td3">
                                    <rich:colorPicker colorMode="hex" id="xxxx" onchange="handle(this);" value="#{phoneModelInfoHome.instance.backgroundColor}">
		                			</rich:colorPicker><font color="#FF0000" style="position:relative; margin-left:10px; *margin-left:10px; line-height:0px;">*</font>
                                    </td>
                            	</tr>
                            	<tr>
                                	<td width="4"  class="ge_td1" valign="top"><img src="#{request.contextPath}/asset/images/bg_se_10.jpg" width="4" height="51" /></td>
                                    <td width="100"  valign="top" align="center" class="ge_td1"><img src="#{request.contextPath}/asset/images/picc_31.jpg" width="37" height="45" /></td>
                                    <td class="ge_td1 ge_td2" align="right" width="145">页面底部版权信息：</td>
                                    <td class="ge_td1 ge_td3">
                                    <s:fileUpload id="endUrl" size="40" accept="image/png,image/jpeg,image/gif" contentType="image/png,image/jpeg,image/gif"
							fileName="#{phoneModelInfoHome.instance.endName}"  onchange="previewImage('foot_s',this)" data="#{phoneModelInfoHome.instance.endUrl}">
						</s:fileUpload>
                                    </td>
                            	</tr>
                                <tr>
                                	<td width="4"></td>
                                    <td width="100"></td>
                                    <td width="140"></td>
                                	<td align="left" class="ge_td3" style="padding-top:50px;">
                        <h:commandButton id="persist"  styleClass="edit_save" action="#{phoneModelInfoHome.persist}"   onclick="return checkSubmit()"/>
		    			&#160;<s:button view="/record/ProductBaseInfoList.xhtml" styleClass="edit_back" id="bn_left6" style="margin-left:10px" />
		    			
                                    </td>
                                </tr>
                        	</table>
                        	</h:form>
                        </td>
                        <!--右侧结束-->
                	</tr>
                </table>
                    <div class="clear"></div>
                </div><!--right_c结束-->
                <script language='javascript'>
              //<![CDATA[
              
               function checkSubmit(){
        	   var a1 = document.getElementById("phoneModelInfo:name").value;
        	   var a2 = jquery("input[name='phoneModelInfo:xxxx']").val();
        	   if(a1==""){
        		   document.getElementById("spanValue").innerHTML = "模版名称不能为空";
        		   #{rich:component('products')}.show();return false;
        	   }
        	    if(a2==""){
        		   document.getElementById("spanValue").innerHTML = "页面背景色不能为空";
        		   #{rich:component('products')}.show();return false;
        	   }
           }

           function closeMethod(){
        	   var a2 =  document.getElementById("phoneModelInfo:name");
        	   var a1 = jquery("input[name='phoneModelInfo:xxxx']").val();
        	   if(a2.value==""){
        		   a2.focus();
        	   }else if(a1==""){
        		   jquery("input[name='phoneModelInfo:xxxx']")[0].focus();
        	   }
           }
              
    var Sys = {};  
        var ua = navigator.userAgent.toLowerCase();  
        var s;  
        (s = ua.match(/version\/([\d.]+).*safari/))? Sys.safari= s[1]: 0;  
  var bbbb = true;
        //以下进行测试  
        if (Sys.safari) bbbb=false; 
              jquery(".rich-color-picker-span").removeClass("rich-color-picker-span");
                jquery("input[name='phoneModelInfo:xxxx']").addClass("r_c_text");
                function handle(obj) 
                {
                    var a = jquery("input[name='phoneModelInfo:xxxx']").val();
                    jquery("#color").attr("style","background: none repeat scroll 0 0 "+a+";height: 155px;margin-bottom: 3px;width: 250px;");
                }
                var arr = {
               'logo_s':"<div class=\"logo_div\">LOGO</div>",
               'back_s':"<div class=\"pic2_div\">页面上方背景图</div>",
               'foot_s':"<div class=\"footer_div\">页面底部版权信息</div>"};
                function previewImage(id,file)
                {
                    if(!bbbb){
                        return;
                    }
                  var MAXWIDTH  = document.getElementById(id).offsetWidth; 
                  var MAXHEIGHT = document.getElementById(id).offsetHeight;
                  var div = document.getElementById(id+"2");
                  if (file.files && file.files[0])
                  {
                	  div.innerHTML = '<img class=imghead id='+id+'>'+arr[id];
                      var img = document.getElementById(id);
                      img.onload = function(){
                        var rect = clacImgZoomParam(MAXWIDTH, MAXHEIGHT, img.offsetWidth, img.offsetHeight);
                        img.width  =  rect.width;
                        img.height =  rect.height;
//                         img.style.marginLeft = rect.left+'px';
                        img.style.marginTop = rect.top+'px';
                      }
                      var reader = new FileReader();
                      reader.onload = function(evt){img.src = evt.target.result;}
                      reader.readAsDataURL(file.files[0]);
                  }
                  else //兼容IE
                  {
                    var sFilter='filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale,src="';
                    file.select();
                    var src = document.selection.createRange().text;
                    div.innerHTML = '<img class=imghead id='+id+'>';
                    var img = document.getElementById(id);
                    img.filters.item('DXImageTransform.Microsoft.AlphaImageLoader').src = src;
                    var rect = clacImgZoomParam(MAXWIDTH, MAXHEIGHT, img.offsetWidth, img.offsetHeight);
                    status =('rect:'+rect.top+','+rect.left+','+rect.width+','+rect.height);
                    div.innerHTML = "<div class=divhead id='"+id+"' style='position:absolute; width:"+rect.width+"px;height:"+rect.height+"px;margin-top:"+rect.top+"px;"+sFilter+src+"\"'></div>"+arr[id];
                  }
                }
                //document.createElement("divCell");
                function clacImgZoomParam( maxWidth, maxHeight, width, height ){
                    var param = {top:0, left:0, width:maxWidth, height:maxHeight};
                    return param;
                }

			         jquery(".rich-color-picker-submit").html("应用");
			         jquery(".rich-color-picker-cancel").html("取消");
            	//]]>
    </script>
<!--content结束-->
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/superfish.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/supersubs.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery-ui.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.dataTables.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.fancybox-1.3.4.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.filestyle.mini.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.treeview.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.tipsy.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/inline.js"></script>
            </td>    
 <style>
            .rich-color-picker-ext{
            height: 178px;
            }
            .rich-color-picker-submit, .rich-color-picker-cancel {
            	top:153px;
            	line-height:15px;
            }
            .imghead {filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=image);}
            .ts_div2{width:240px; height: 125px; border: 1px solid #81C5E9; margin: 0px auto; padding: 0 15px 15px;  background: url(#{request.contextPath}/asset/images/tck_bg_14.jpg) #ffffff repeat-x scroll center top;}
			.dr-mpnl-shadow{background:none;}
			.dr-mpnl-pnl{background:none; border:none;}
			.dr-mpnl-pnl-b{padding:0;}
			.dr-mpnl-shadow{top:0; left:0;}
			.rich-picklist-source-items{margin:0;}
 </style>
</ui:define>

</ui:composition>

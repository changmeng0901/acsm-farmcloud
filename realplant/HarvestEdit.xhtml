<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
     xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a="http://richfaces.org/a4j"
    xmlns:c="http://java.sun.com/jstl/core"
    template="/layout/template_new.xhtml">

<ui:define name="body">
<link rel="stylesheet" type="text/css" href="#{request.contextPath}/asset/css/checkBox/skinBlue.css"/>
<script type="text/javascript" src="#{request.contextPath}/asset/js/checkBox/icheck.js"></script>




<style>
.input-append.date .add-on i, .input-prepend.date .add-on i {
    cursor: pointer;
    height: 14px;
    margin-left: -19px;
    margin-top: 7px;
    width: 14px;
}
.catd {
    font-size: 12px;
    line-height: 25px;
    padding: 5px 0;
    text-align: center;
}
.new_da{float: none;}
.form-control{
	float:left;
}
.new_da{float: none;}
.all_te {
    font-size: 14px;
    height: 30px;
    line-height: 30px;
    text-align: right;
    width: 77px;
}

.newble12 .bootstrap-select:not([class*="span"]):not([class*="col-"]):not([class*="form-control"]):not(.input-group-btn){ width:50%;}
.newble12 .btn-group .btn{ height:28px;}
.pop_up{text-decoration: underline; color: #368aca; cursor: pointer; font-family: "微软雅黑"; height: 30px; float:right; margin-top:-53px;}
.kuandu{width: 710px; left:50%; margin-left: -355px; top:50%; margin-top:-234px; margin-bottom:0; position: absolute;}
.kuandu td{font-family: "微软雅黑"; padding: 10px 0;}
.nw220{width: 220px; margin-left: 10px;}
.yuan{position: absolute; right: 25px; bottom:25px;}
.wenzi{width: 80px; text-align: right;}
.kuandu .bootstrap-select.btn-group:not(.input-group-btn){margin-left: 10px; margin-bottom: 0;}

.warn{position: absolute; width: 446px; left: 50%; margin-left: -218px; top: 15%;}
.warn_icon{text-align: center; padding:20px 0;}
.tip{text-align: center;}
.nextcur{border-color:#4d95cd #4d95cd #4d95cd #4d95cd; background:#4d95cd; color:#fff; }
.star_using{
	float:right;
	line-height:20px;
	padding-top:6px;
	margin-right: 5px;
	position:relative;
	}
</style>

<script type="text/javascript">
document.getElementById("selectBaseDiv").style.display="none";
</script>
<!-- #{productRecordTimesHome.search()}-->
<td valign="top" width="100%">
                <div class="right_c">
                	<div class="r_title">
                	<div class="r_t_l cm_r_t_l"><span>加工&#160;&gt;&#160;&#160;采收</span><em>&gt;</em><font size="3">采收记录</font></div>
                        <div class="tabLink fr" style="margin:8px 0 0 5px;">
                        	<s:link styleClass="link1 cur" view="#{sessionTake.harvestParam eq 1?'/realplant/HarvestRecordsList.xhtml':'/realplant/RealPlantList.xhtml'}">采收记录</s:link>
                        	<span class="line"></span><s:link styleClass="link2" view="/harvest/PreHarvestListNew.xhtml">预采管理</s:link>
                        </div>
                    </div>
                  <!--入库订单列表开始-->
                  <a:form id="ix">
                  <!-- Modal -->
<div aria-hidden="false" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="myModal" class="modal fade in w600na" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">提示框</h4>
      </div>
      <div class="modal-body">
       <span id="spanValue">*号部分为必填项！</span>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
        <button type="button" class="btn btn-primary" data-dismiss="modal">确认</button>
      </div>
    </div>
  </div>
</div>
<!-- #{productRecordTimesHome.baseMethods()} -->
                	<div class="all_d3" style=" margin-top:35px;">
                	<s:div styleClass="new_da" rendered="#{sessionTake.levelId lt 4}">
                        	<table>
                                <tr>
                                    <td class="all_te">基地：</td>
                                    <td>
										 <h:selectOneMenu id="basicId"  styleClass="selectpicker nw200" value="#{productRecordTimesHome.baseId}" valueChangeListener="#{productRecordTimesHome.basePerson}">
												<s:selectItems value="#{productRecordTimesHome.basicLists}" var="var" label="#{var.name}" itemValue="#{var.id}"/>
												<a:support event="onchange" reRender="idObj2,list" eventsQueue="default" ajaxSingle="true" bypassUpdates="true" oncomplete="jquery('.selectpicker').selectpicker();initMe();"/>
												
										</h:selectOneMenu>
                                    </td>
                                </tr>
                            </table>
                        </s:div>
                        <s:div styleClass="new_da" rendered="#{sessionTake.levelId ge 4}" style="margin-right: 5px; min-width: 130px;">
                        	<table>
                                <tr>
                                    <td class="all_te">基地：</td>
                                    <td>
										 <h:outputText value="#{productRecordTimesHome.baseName}" />
                                    </td>
                                </tr>
                            </table>
                        </s:div>
                        <s:fragment rendered="#{sessionTake.harvestHarvesterCheck}">
	                    	<div class="new_da">
	                        	<table>
	                                <tr>
	                                    <td class="all_tenew">采收人：</td>
	                                    <td width="240">
	                                    <h:panelGroup id="idObj2" style="float:left;">
	                                   		<h:selectOneMenu  styleClass="selectpicker nw200 b1" id="operatorId"   value="#{productRecordTimesHome.operatorId}">
												<s:selectItems value="#{productRecordTimesHome.personLists}" var="var" label="#{var[1]}" itemValue="#{var[0]}"/>
											</h:selectOneMenu>
	                                        </h:panelGroup>
	                                    </td>
	                                </tr>
	                            </table>
	                        </div>
	                    </s:fragment>
                    	<div class="new_da">
                        	<table>
                                <tr>
                                    <td class="all_tenew">采收时间：</td>
                                    <td>
                                        <div class="input-append date form_datetime " >
								    <h:inputText id="harvestTime" styleClass="new_time" readonly="true" value="#{productRecordTimesHome.harvestTime}">
								    <f:convertDateTime pattern="yyyy-MM-dd HH:mm"/>   
								    </h:inputText>
								    <span class="add-on"><i class="icon-th"></i></span>
								    <h:inputHidden id="hiddenTime" value="#{productRecordTimesHome.harvestTime}" />
								    </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <!-- 采收入库开始 -->
                        <s:fragment rendered="#{sessionTake.harvestInstockCheck}">
		                <div id="isEnableUser" class="new_da" >
		                     <table >
	                        	<tr>
	                        	    <td class="all_tenew">采收入库：</td>
	                                <td width="205">
										<h:selectOneMenu styleClass="selectpicker sfrk" value="#{productRecordTimesHome.storageRoomId}"  id="storageRoomId0" onchange="storageChange();">
												
											<s:selectItems var="_storage" value="#{productRecordTimesHome.storageRoomList}" label="#{_storage.name}" itemValue="#{_storage.storageRoomId}" />
											<f:selectItem itemLabel="无" itemValue="0" />
										</h:selectOneMenu>
									</td>
	                            </tr>
	                        </table>
						 </div>
						 </s:fragment>
		                 <!-- 采收入库 结束 -->
		                 <s:fragment rendered="#{sessionTake.harvestOperatorCheck}">
			                 <div class="new_da">
	                        	<table>
	                                <tr>
	                                    <td class="all_tenew">经办人：</td>
	                                    <td width="240">
	                                   		<h:selectOneMenu  styleClass="selectpicker nw200 hand1" id="handleId"   value="#{productRecordTimesHome.handleId}">
												<s:selectItems value="#{productRecordTimesHome.operatorList}" var="var" label="#{var[1]}" itemValue="#{var[0]}"/>
											</h:selectOneMenu>
	                                    </td>
	                                </tr>
	                            </table>
	                        </div>
	                     </s:fragment>
                        <div class="clear"></div>
                   </div>
                   </a:form>
                <!--TAB开始-->   
                        <div class="erbox2">
                            <div>
                                    <div class="z_r_ser" style="margin:12px 0 30px; float:left;">
				                     <h:form id="goodsInfoSearch">
				                    	<table cellpadding="0" cellspacing="0" class="cxtja" style="width:547px">
				                    	<h:inputHidden id="hidden1" name="operatorId" value="#{productRecordTimesHome.operatorId}"  />
										<h:inputHidden id="hidden2" name="harvestTime" value="#{productRecordTimesHome.harvestTime}"  />
										<h:inputHidden id="hidden3" name="handleId" value="#{productRecordTimesHome.handleId}"  />
				                           <tr>
				                                <td>
				                                <div class="public-search">   
				                                	<span class="octicon-search02"></span>
				                                	<h:inputText id="name" styleClass="form-control nw300 srarchfont" value="#{productRecordTimesHome.searchName}" style="color:#333;" />
				                                </div>
				                                	<h:commandButton id="search" styleClass="btn btn-primary" value="搜索" action="#{productRecordTimesHome.search()}" onclick="perSearch();" eventsQueue="default" reRender="list" oncomplete="initMe();">                                	
					                                </h:commandButton>
					                                <h:inputHidden id="flag" value="#{productRecordTimesHome.flag1}"/>
				                                </td>
				                           </tr>
				                       </table>    
				                       </h:form>           
				                    </div>
                                    <h:panelGroup id="list">
                                        <div style="border-top: 1px solid #DDDDDD; border-bottom: 1px solid #DDDDDD; width:99%; margin:0 auto; padding-right:12px; [;text-align:left;]; background: url(../asset/images/order/nenxt_bg_25.png) repeat-x; color:#4e4d4d; border-top:1px solid #ccc; border-right:1px solid #ccc; float: left;">
                                    <table width="100%" cellspacing="0" cellpadding="0" border="0" style=" border-collapse:collapse; width:99.2%;  width: -moz-calc(100% - 5px); *width:101% !important； float:left;">
                                        <tr>
                                            <th class="catd" width="5%" style="padding-left: 20px;">
                                            <input type="checkbox" name="checkAll" id="checkAll"/>
                                            </th>
                                            <th class="catd" width="15%">作物</th>
                                            <th class="catd" width="15%">品种</th>
                                            <th class="catd" width="20%">区域</th>
                                            <th class="catd" width="15%">定植日期</th>
                                            <th class="catd" width="15%">负责人</th>
                                            <th class="catd" width="15%">已采收量</th>
                                        </tr>
                                        </table>
                                        <div style="width:101%; height:200px; overflow-y:scroll; overflow-x:hidden; margin:0 auto;  border-right:0px solid #ccc;">
                                        <table id="showProduct" width="100%" cellspacing="0" cellpadding="0" border="0">
                                        <a:repeat value="#{productRecordTimesHome.realList}" var="obj" rowKeyVar="_index">
                                        <tr>
                                            <td class="catd" width="5%" style="padding-left: 20px;">
                                            <input type="checkbox" name="td1" id="td1" value="#{obj[0]}"/>
                                            </td>
                                            <td class="catd" width="15%">#{obj[3]}</td>
                                            <td class="catd" width="15%">#{obj[4]}</td>
                                            <td class="catd" width="20%">#{obj[2]}</td>
                                            <td class="catd" width="15%">
                                            <h:outputText value="#{obj[6]}">
												<s:convertDateTime type="both" dateStyle="short" pattern="yyyy-MM-dd" />
						   					 </h:outputText>
                                            </td>
                                            <td class="catd" width="15%">#{obj[5]}</td>  
                                            <td class="catd" width="15%">
                                            <h:outputText rendered="#{obj[7] eq null or obj[7] lt 0}" value="0" />
                                            <h:outputText rendered="#{obj[7] ne null and obj[7] ge 0}" value="#{obj[7]}" />
                                            kg</td>  
                                        </tr>
                                        </a:repeat>
                                    </table>
                                    </div>
                                    </div>
                                    </h:panelGroup>
                                     <div class="clear"></div>
                                      <!--添加按钮开始-->
                                    <div class="tjan_02" style=" width:100%; text-align:left; margin-top:27px; padding-bottom:27px;margin-left:30px;">
                                        <a class="btn btn-success" href="#" onclick="addOne();return false;">添加</a>
                                    </div>
                                    <!--添加按钮结束-->
                              <div class="pop_up"  data-toggle="modal" data-target="#myModal1" onclick="modelShow();">
									没有合适的采收作物！试试其他录入模式
								</div>
									<!-- 模态框 内容开始 -->
								 <a:form id="tian">
							    <div class="modal fade" id="myModal1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
							      <div class="modal-dialog kuandu">
							        <div class="modal-content">
							          <div class="modal-header">
							            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
							            <h4 class="modal-title" id="myModalLabel">添加采收记录</h4>
							          </div>
							          <div class="modal-body">
							          	<table width="100%" height="100%" cellpadding="0" cellspacing="0">
							          	<h:inputHidden id="num3" name="operatorId" value="#{productRecordTimesHome.operatorId}"  />
										<h:inputHidden id="num4" name="harvestTime" value="#{productRecordTimesHome.harvestTime}"  />
										<h:inputHidden id="num9" name="handleId" value="#{productRecordTimesHome.handleId}"  />
							          		<tr>
							          			<td class="wenzi">采收作物</td>
							          			<td >
			                                   		<h:selectOneMenu id="plantListId"  styleClass="selectpicker nw200 c1"  value="#{productRecordTimesHome.plantListId}"  onchange="plantchange(this.value);">
															<s:selectItems value="#{productRecordTimesHome.plantList}" var="var" label="#{var[1]}" itemValue="#{var[0]}"/>
													</h:selectOneMenu>
			                                    </td>
							          			<td class="wenzi">采收区域</td>
							          			<td >
							          				<h:panelGroup id="tunnel" style="float:left;">
				                                   		<h:selectOneMenu  styleClass="selectpicker nw200 c2" id="tunnelId"   value="#{productRecordTimesHome.tunnelId}"  onchange="tunnelbian();">
				                                   			<f:selectItem itemLabel="无" itemValue="0"></f:selectItem>
															<s:selectItems value="#{productRecordTimesHome.tunnelList}" var="var" label="#{var.tunnelName}" itemValue="#{var.tunnelInfoId}"/>
														</h:selectOneMenu>
			                                        </h:panelGroup>
			                                    </td>
							          		</tr>
							          		<tr>
							          			<td class="wenzi">定植日期</td>
							          			<td >
							          				<h:panelGroup id="beginTime" style="float:left;">
			                                   		<h:selectOneMenu  styleClass="selectpicker nw200 c3" id="beginTimeId"   value="#{productRecordTimesHome.realPlantId}">
														<s:selectItems value="#{productRecordTimesHome.realPlantList}" var="var" label="#{var[1]}#{var[2]}" itemValue="#{var[0]}"/>
															<f:selectItem itemLabel="无" itemValue="0"></f:selectItem>
													</h:selectOneMenu>
			                                        </h:panelGroup>
							          			</td>
							          			<td class="wenzi" style="#{sessionTake.harvestLevelCheck ? '':'display:none'}">等级</td>
							          			<td >
							          				<h:panelGroup id="level" style="float:left; #{sessionTake.harvestLevelCheck ? '':'display:none'}">
			                                   		<h:selectOneMenu  styleClass="selectpicker nw200 c4" id="goodsLeve"   value="#{productRecordTimesHome.goodsLevelId}"  onchange="goodleveprice();">
														<s:selectItems value="#{productRecordTimesHome.goodLeveList}" var="var" label="#{var.name}" itemValue="#{var.goodsLevelId}"/>
													</h:selectOneMenu>
			                                        </h:panelGroup>
							          			</td>
							          		</tr>
							          		<tr>
							          			<td class="wenzi">采收框数量</td>
							          			<td >
							          				<h:inputText id="harvestNum" class="form-control nw220" value="#{productRecordTimesHome.harvestNum}"/>
							          			</td>
							          			<td class="wenzi" style="#{sessionTake.harvestPriceCheck ? '':'display:none'}">单价</td>
							          			<td style="#{sessionTake.harvestPriceCheck ? '':'display:none'}">
							          				<h:inputText id="unitPrice"  class="form-control nw220" value="#{productRecordTimesHome.instance.unitPrice}"/><span class="yuan">元</span>
							          			</td>
							          		</tr>
							          		
							          	</table>
							          </div>
							          <div class="modal-footer">
							          	 <h:commandButton id="persist" action="#{productRecordTimesHome.savePlant}"  onclick="return checkSub();"  styleClass="btn btn-primary" value="提交"/>
							            <button type="button" class="btn btn-default" data-dismiss="modal">返回</button>
							           
							          </div>
							        </div>
							      </div>
							    </div>
							    </a:form>
							     <a:form id="xiu">
							    <div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
							      <div class="modal-dialog kuandu">
							        <div class="modal-content">
							          <div class="modal-header">
							            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
							            <h4 class="modal-title" id="myModalLabel">修改采收记录</h4>
							          </div>
							          <div class="modal-body">
							          <h:panelGroup id="editPlant">
							          	<table width="100%" height="100%" cellpadding="0" cellspacing="0">
							          		<tr>
							          			<td class="wenzi">采收作物</td>
							          			<td >
			                                   		<h:selectOneMenu id="plId"  styleClass="selectpicker nw200 xc1"  value="#{productRecordTimesHome.plId}"  onchange="xplantchange(this.value);">
															<s:selectItems value="#{productRecordTimesHome.plantList}" var="var" label="#{var[1]}" itemValue="#{var[0]}"/>
													</h:selectOneMenu>
			                                    </td>
							          			<td class="wenzi">采收区域</td>
							          			<td >
							          			<h:panelGroup id="xtunnelId" style="float:left;">
							          				<h:panelGroup id="tunnelId" style="float:left;">
				                                   		<h:selectOneMenu  styleClass="selectpicker nw200" id="tuId"   value="#{productRecordTimesHome.tuId}"  onchange="xtunnelbian();">
				                                   			<f:selectItem itemLabel="无" itemValue="0"></f:selectItem>
															<s:selectItems value="#{productRecordTimesHome.tunnelList}" var="var" label="#{var.tunnelName}" itemValue="#{var.tunnelInfoId}"/>
														</h:selectOneMenu>
			                                        </h:panelGroup>
			                                         </h:panelGroup>
			                                    </td>
							          		</tr>
							          		<tr>
							          			<td class="wenzi">定植日期</td>
							          			<td >
							          				<h:panelGroup id="RealbeginTime" style="float:left;">
							          				<div class="star_using" >
			                                   		<h:selectOneMenu  styleClass="selectpicker nw200 notselect" id="reId"   value="#{productRecordTimesHome.reId}" readonly="true" disabled="disabled">
														<s:selectItems value="#{productRecordTimesHome.rpList}" var="var" label="#{var[1]}#{var[2]}" itemValue="#{var[0]}"/>
															<f:selectItem itemLabel="无" itemValue="0"></f:selectItem>
													</h:selectOneMenu>
													</div>
			                                        </h:panelGroup>
							          			</td>
							          			<td class="wenzi">等级</td>
							          			<td >
							          				<h:panelGroup id="levelId" style="float:left;">
			                                   		<h:selectOneMenu  styleClass="selectpicker nw200" id="leId"   value="#{productRecordTimesHome.leId}"  onchange="xgoodleveprice(this.value);">
														<s:selectItems value="#{productRecordTimesHome.goodLeveList}" var="var" label="#{var.name}" itemValue="#{var.goodsLevelId}"/>
													</h:selectOneMenu>
			                                        </h:panelGroup>
							          			</td>
							          		</tr>
							          		<tr>
							          			<td class="wenzi">采收框数量</td>
							          			<td >
							          				<h:inputText id="num" class="form-control nw220" value="#{productRecordTimesHome.num}"/>
							          			</td>
							          			<td class="wenzi">单价</td>
							          			<td >
							          				<h:inputText id="price"  class="form-control nw220" value="#{productRecordTimesHome.price}"/><span class="yuan">元</span>
							          			</td>
							          		</tr>
							          		
							          	</table>
							          	</h:panelGroup>
							          </div>
							          <div class="modal-footer">
							          	<h:inputHidden value="#{productRecordTimesHome.deleteId}" />
							          	 <h:commandButton id="persist" action="#{productRecordTimesHome.updatePlant}"  onclick="return xcheckSub();"  styleClass="btn btn-primary" value="保存"/>
							            <button type="button" class="btn btn-default" data-dismiss="modal">返回</button>
							           
							          </div>
							        </div>
							      </div>
							    </div>
							    </a:form>
                            </div>
                           
                            <div class="clear"></div>
                        </div>  
                <!--TAB结束-->   
				<!--入库订单列表结束-->
				<h:form id="goodsInfo">
				<h:inputHidden id="num1" name="number1" value="#{productRecordTimesHome.number1}"  />
				<h:inputHidden id="num2" name="number2" value="#{productRecordTimesHome.number2}"  />
				<h:inputHidden id="num3" name="operatorId" value="#{productRecordTimesHome.operatorId}"  />
				<h:inputHidden id="num4" name="harvestTime" value="#{productRecordTimesHome.harvestTime}"  />
				<h:inputHidden id="num5" name="baseName" value="#{productRecordTimesHome.baseName}"  />
				<h:inputHidden id="num6" name="baseId" value="#{productRecordTimesHome.baseId}"  />
				<h:inputHidden id="num7" name="storageRoomId" value="#{productRecordTimesHome.storageRoomId}"  />
				<h:inputHidden id="num8" name="checkyorn" value="#{productRecordTimesHome.checkyorn}"  />
				<h:inputHidden id="num9" name="handleId" value="#{productRecordTimesHome.handleId}"  />
				<h:panelGroup id="finalList">
                    <table class="newble12" cellpadding="0" cellspacing="0" style="margin-top:35px;">
                        <tr>
                            <th class="new_thc8" width="10%">作物</th>
                            <th class="new_thc8" width="10%">品种</th>
                           	<th class="new_thc8" width="10%" style="#{sessionTake.harvestSiteCheck ? '':'display:none'}">产出品</th>
                           	<th class="new_thc8" width="8%" style="#{sessionTake.harvestSiteCheck ? '':'display:none'}">部位</th>
                            <th class="new_thc8" width="8%">区域</th>
                            <th class="new_thc8" width="10%">定植日期</th>
                            <th class="new_thc8" width="10%" style="#{sessionTake.harvestPriceCheck ? '':'display:none'}">单价</th>
                            <th class="new_thc8" width="10%">采收筐数量</th>
                            <th class="new_thc8" width="15%" style="#{sessionTake.harvestLevelCheck ? '':'display:none'}">物料等级</th>
                            <th class="new_thc8" width="10%">操作</th>
                        </tr>
                        <a:repeat value="#{productRecordTimesHome.finalList}" var="obj" rowKeyVar="_index" id="lists">
                        
                        <h:outputText rendered="#{obj.realPlantId ne null}">
                        <tr>
                           <td class="new_td8" id="#{obj.realPlantId}">#{obj.breedBreedId.plant.name}</td>
                            <td class="new_td8">#{obj.breedBreedId.name}</td>
                            <td class="new_td8" style="#{sessionTake.harvestSiteCheck ? '':'display:none'}">
                            	<h:selectOneMenu  styleClass="selectpicker levelIds" value="#{obj.outputsId}" onchange="changeOutputs(#{_index},this)" style="width: 111px;">
									<s:selectItems value="#{obj.outputsList}" var="var" label="#{var[1]}"  itemValue="#{var[0]}"/>
								</h:selectOneMenu>
                            </td>
                            <td class="new_td8" style="#{sessionTake.harvestSiteCheck ? '':'display:none'}">
                            	#{obj.cropSite}
                            </td>
                            <td class="new_td8">
                            #{obj.tunnelInfoId.tunnelName}
                            </td>
                            <h:outputText rendered="#{obj.prompt eq 0}">
                            <td class="new_td8">当前</td>
                            <td class="new_td8" style="#{sessionTake.harvestPriceCheck ? '':'display:none'}"> 
                            	<h:inputText value="#{obj.unitPrice}" styleClass="input_02bg price_" id="unitPrice#{_index}" />
                            </td>
                            <td class="new_td8">
                            <h:inputText value="#{obj.num}" styleClass="input_02bg price_ znum" id="price#{_index}">
                            <a:support event="onblur"  eventsQueue="default" />
                            </h:inputText>
                            </td>
                            <td class="new_td8" style="#{sessionTake.harvestLevelCheck ? '':'display:none'}">
                            	<h:selectOneMenu  styleClass="selectpicker levelIds" value="#{obj.levelId}" onchange="lev(this.value,#{_index})" >
									<s:selectItems value="#{obj.levelList}" var="var" label="#{var.name}"  itemValue="#{var.goodsLevelId}"/>
								</h:selectOneMenu>
							</td>
							<td class="new_td8">
								<a href="#" onclick="deleted(#{_index});return false;" class="list_delete" style="color:black;"></a>
							</td>
							</h:outputText>
							<h:outputText rendered="#{obj.prompt eq 1}">
							<td class="new_td8">
							 <h:outputText value="#{obj.plantBeginTime}">
												<s:convertDateTime type="both" dateStyle="short" pattern="yyyy-MM-dd" />
						   	</h:outputText>
							</td>
                            <td class="new_td8" style="#{sessionTake.harvestPriceCheck ? '':'display:none'}"> 
                            	#{obj.unitPrice}
                            </td>
                            <td class="new_td8">
                                #{obj.num}
                            </td>
                            <td class="new_td8" style="#{sessionTake.harvestLevelCheck ? '':'display:none'}">
                            	#{productRecordTimesHome.leveIdName(obj.levelId)}
							</td>
							<td class="new_td8">
							    <a href="#" data-toggle="modal" data-target="#myModal2" onclick="editPlant(#{_index});return false;" title="修改" class="list_edit" style="color:black;display:none"></a>
								<a href="#" onclick="deleted(#{_index});return false;" class="list_delete" style="color:black;"></a>
							</td>  
							</h:outputText>
                            
                        </tr>
                        </h:outputText>
                         <h:outputText rendered="#{obj.realPlantId eq null}">
                        <tr>
                           <td class="new_td8">#{obj.goodsInfoId.plant.name}</td>
                            <td class="new_td8">--</td>
                             <td class="new_td8" style="#{sessionTake.harvestSiteCheck ? '':'display:none'}">
                            	<h:selectOneMenu  styleClass="selectpicker levelIds" value="#{obj.outputsId}" onchange="changeOutputs(#{_index},this)" >
									<s:selectItems value="#{obj.outputsList}" var="var" label="#{var[1]}"  itemValue="#{var[0]}"/>
								</h:selectOneMenu>
                            </td>
                            <td class="new_td8" style="#{sessionTake.harvestSiteCheck ? '':'display:none'}">
                            	#{obj.cropSite}
                            </td>
                            <td class="new_td8">
                           		<h:outputText rendered="#{obj.tunnelInfoId.tunnelName ne null}">#{obj.tunnelInfoId.tunnelName}</h:outputText>
                           		<h:outputText rendered="#{obj.tunnelInfoId.tunnelName eq null}">--</h:outputText>
                            </td>
                            <td class="new_td8">
                            	<h:outputText rendered="#{obj.plantBeginTime ne null}" >#{obj.plantBeginTime}</h:outputText>
                            	<h:outputText rendered="#{obj.plantBeginTime eq null}" >--</h:outputText>
                            </td>
                            <td class="new_td8" style="#{sessionTake.harvestPriceCheck ? '':'display:none'}"> 
                            	<h:outputText value="#{obj.unitPrice}" />
                            </td>
                            <td class="new_td8">
                            	<h:outputText value="#{obj.num}" />
                            </td>
                            <td class="new_td8" style="#{sessionTake.harvestLevelCheck ? '':'display:none'}">
                            	<!-- #{productRecordTimesHome.leveIdName(obj.levelId)} -->
                            	<h:selectOneMenu  styleClass="selectpicker levelIds" value="#{obj.levelId}" onchange="lev(this.value,#{_index})" >
									<s:selectItems value="#{obj.levelList}" var="var" label="#{var.name}"  itemValue="#{var.goodsLevelId}"/>
								</h:selectOneMenu>
							</td>
                            <td class="new_td8">
                            	<a href="#" data-toggle="modal" data-target="#myModal2" onclick="editPlant(#{_index});return false;" title="修改" class="list_edit" style="color:black;display:none"></a> 
                            	<a href="#" onclick="deleted(#{_index});return false;" title="删除" class="list_delete" style="color:black;"></a>
                            </td>  
                        </tr>
                        </h:outputText>
                        </a:repeat>
                    </table>
                    <script type="text/javascript">
						var lengParam =  #{empty productRecordTimesHome.finalList?0:productRecordTimesHome.finalList.size()};
					</script>
                    </h:panelGroup>
                   <div style="height:25px;"></div>
                    <div style=" padding-top:35px; text-align:center;">
                    
                    <s:button id="next"  view="/realplant/RealPlantList.xhtml" styleClass="btn btn-default" value="上一步" style="margin-right:15px;">
                    <f:param name="baseId" value="#{productRecordTimesHome.baseId}"/>
                    </s:button>
                    <h:commandButton id="persist" style="display:none" action="#{productRecordTimesHome.turnNext}"  value="下一步"  styleClass="btn btn-primary" >
                    </h:commandButton>
                   <input type="button" class="btn btn-primary" value="下一步" onclick="return checkSubmit()"></input>
                    </div>
                   <div style="height:20px; width:100%;"></div>
                 <div class="clear"></div>
                 </h:form>
                </div><!--right_c结束-->
                <div aria-hidden="false" id="messageDiv" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" class="modal fade in w600na">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true"></span><span class="sr-only">Close</span></button>
						<h4 class="modal-title" id="messageTitle">提示</h4>
					</div>
					<div class="modal-body">
						<span id="messageValue"></span>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-primary" data-dismiss="modal">确认</button>
					</div>
				</div>
			</div>
		</div>
		<!-- 模态框 内容开始 -->
    <div class="modal fade" id="myModalWarn" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog warn">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            <h4 class="modal-title" id="myModalLabel">提示</h4>
          </div>
          <div class="modal-body">
            <div class="warn_icon">
                <img src="#{request.contextPath}/asset/images/warn.png" alt="" />
            </div> 
            <div class="tip">有作物施用农药后还未过安全间隔期，</div> 
            <div class="tip" style="padding-bottom:20px;">建议不要采收！</div> 
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" id="warnSubmit" onclick="continueSubmit();">继续采收</button>
            <button type="button" class="btn btn-default" data-dismiss="modal" id="backAdd" onclick="backAdd();">返回</button>
          </div>
        </div>
      </div>
    </div>
            </td>  
            <a:form>
            <a:queue requestDelay="10" ignoreDupResponses="true" id="mainQueue"/>
                <a:jsFunction name="plantchange" eventsQueue="mainQueue" reRender="tunnel,level,unitPrice" action="#{productRecordTimesHome.levechange}"   oncomplete="jquery('.selectpicker').selectpicker();">
		            <a:actionparam name="plantListId"   assignTo="#{productRecordTimesHome.plantListId}"/>                  
		        </a:jsFunction>
		        <a:jsFunction name="xplantchange" eventsQueue="mainQueue" reRender="levelId,price,tunnelId,RealbeginTime,xtunnelId" action="#{productRecordTimesHome.xplantchange}"  oncomplete="jquery('.selectpicker').selectpicker();">
		            <a:actionparam name="plId"   assignTo="#{productRecordTimesHome.plId}"/>                  
		        </a:jsFunction>
		        <a:jsFunction name="editPlant" eventsQueue="mainQueue" reRender="editPlant" action="#{productRecordTimesHome.editPlant}"    oncomplete="xeditplant();">
		            <a:actionparam name="param1"   assignTo="#{productRecordTimesHome.deleteId}"/>                  
		        </a:jsFunction>
		        <a:jsFunction name="addSearch" eventsQueue="mainQueue" reRender="finalList" action="#{productRecordTimesHome.addSearch}"  oncomplete="jquery('.selectpicker').selectpicker();">
		            <a:actionparam name="param1"   assignTo="#{productRecordTimesHome.str}"/>                  
		        </a:jsFunction>
		        <a:jsFunction name="deleteds" eventsQueue="mainQueue" reRender="finalList" action="#{productRecordTimesHome.deletedReal}"   oncomplete="jquery('.selectpicker').selectpicker();">
		            <a:actionparam name="param1"   assignTo="#{productRecordTimesHome.deleteId}"/>                  
		        </a:jsFunction>
		        <a:jsFunction name="levels" eventsQueue="mainQueue"  action="#{productRecordTimesHome.levels}" reRender="finalList"  oncomplete="levelprices();" >
		            <a:actionparam name="param1"   assignTo="#{productRecordTimesHome.levelId}"/>                  
		        	<a:actionparam name="param2"   assignTo="#{productRecordTimesHome.mylevelId}"/>                  
		        </a:jsFunction>
            	<a:jsFunction name="tunnelchange" eventsQueue="mainQueue"  action="#{productRecordTimesHome.tunnelChange}" reRender="beginTime"  oncomplete="tunnel();" >
					<a:actionparam name="plantListId" assignTo="#{productRecordTimesHome.plantListId}"/>
					<a:actionparam name="tunnelId" assignTo="#{productRecordTimesHome.tunnelId}"/>
				</a:jsFunction>
            	<a:jsFunction name="xtunnelchange" eventsQueue="mainQueue" action="#{productRecordTimesHome.xtunnelChange}" reRender="RealbeginTime"  oncomplete="xtunnel();" >
					<a:actionparam name="plId" assignTo="#{productRecordTimesHome.plId}"/>
					<a:actionparam name="tuId" assignTo="#{productRecordTimesHome.tuId}"/>
				</a:jsFunction>
            	<a:jsFunction name="goodPirce" eventsQueue="mainQueue" action="#{productRecordTimesHome.goodprice}" data="#{productRecordTimesHome.goodsLevel.unitPrice}" reRender="level"  oncomplete="goodprice(data);">
					<a:actionparam name="goodsLevelId" assignTo="#{productRecordTimesHome.goodsLevelId}"/>
				</a:jsFunction>
            	<a:jsFunction name="xgoodleveprice" eventsQueue="mainQueue" action="#{productRecordTimesHome.xgoodprice}" reRender="price"  oncomplete="query('.selectpicker').selectpicker();">
					<a:actionparam name="leId" assignTo="#{productRecordTimesHome.leId}"/>
				</a:jsFunction>
				<a:jsFunction name="validateSafeTime" action="#{productRecordTimesHome.validateSafeTime()}" data="#{productRecordTimesHome.msg}" oncomplete="safeTime(data);">
					<a:actionparam name="harcestTime" assignTo="#{productRecordTimesHome.sval}"/>
				</a:jsFunction>
				<a:jsFunction name="changeStorageRoom" action="#{productRecordTimesHome.storageChange()}"  >
					<a:actionparam name="storageRoomId1" assignTo="#{productRecordTimesHome.storageRoomId}"/>
				</a:jsFunction>
				<a:jsFunction name="selectOutputs" action="#{productRecordTimesHome.selectOutputs()}"  reRender="finalList"  oncomplete="levelprices();">
		        	<a:actionparam name="param2"   assignTo="#{productRecordTimesHome.mylevelId}"/>  
		        	<a:actionparam name="param1"   assignTo="#{productRecordTimesHome.cropId}"/>  
				</a:jsFunction>
            </a:form>
<script type="text/javascript">
//<![CDATA[
           var harvestInStock = #{sessionTake.harvestInstockCheck};
      //为采收人等字段隐藏值赋值以便搜索时带到后台
      function perSearch(){
    	    var operatorId = document.getElementById("ix:operatorId").value;
	  		var harvestTime = document.getElementById("ix:hiddenTime").value;
	  		var handleId=document.getElementById("ix:handleId").value;
	  		document.getElementById("goodsInfoSearch:hidden1").value = operatorId;
	  		document.getElementById("goodsInfoSearch:hidden2").value = harvestTime;
	  		document.getElementById("goodsInfoSearch:hidden3").value = handleId;
      }
      function xeditplant(){
    	  jquery('.xc1').attr("data-live-search","true"); 
    	
    	  
    	  jquery('.selectpicker').selectpicker();
      }
      function levelprices(){
           jquery('.selectpicker').selectpicker();
      }
      function deleted(obj){
			var flag=window.confirm("确定删除吗？");
			if(flag){
				deleteds(obj);
			}
       }
      //自定义添加修改时提交验证
      function xcheckSub(){
    	  jQuery('#xiu\\:reId').prop('disabled', false);
    	  jQuery("#xiu\\:reId").selectpicker("refresh");
		var num=jquery("#xiu\\:num").val();
		if (num == null || jquery.trim(num) == '') {
			jQuery("#messageValue").html("采收筐数量不能为空！");
			jQuery("#messageDiv").modal('show');
			return false;
		}else {
			if (num <= 0 ) {
				jQuery("#messageValue").html("采收筐数量须大于0！");
				jQuery("#messageDiv").modal('show');
				return false;
			}
			if(num>50){
				jQuery("#messageValue").html("采收筐数量须小于50筐！");
				jQuery("#messageDiv").modal('show');
				return false;
			}
			var reg = new RegExp("^-?\\d+$");
			if(!reg.test(num)){
				jQuery("#messageValue").html("采收筐数量只能为整数！");
				jQuery("#messageDiv").modal('show');
				return false;
			}
		}
      }
       //自定义添加提交验证
      function checkSub(){
		var num=jquery("#tian\\:harvestNum").val();
		if (num == null || jquery.trim(num) == '') {
			jQuery("#messageValue").html("采收筐数量不能为空！");
			jQuery("#messageDiv").modal('show');
			return false;
		}else {
			if (num <= 0 ) {
				jQuery("#messageValue").html("采收筐数量须大于0！");
				jQuery("#messageDiv").modal('show');
				return false;
			}
			if(num>50){
				jQuery("#messageValue").html("采收筐数量须小于50筐！");
				jQuery("#messageDiv").modal('show');
				return false;
			}
			var reg = new RegExp("^-?\\d+$");
			if(!reg.test(num)){
				jQuery("#messageValue").html("采收筐数量只能为整数！");
				jQuery("#messageDiv").modal('show');
				return false;
			}
		}
      }
      function modelShow(){
    	  jquery(".c1").selectpicker("val",jquery(".c1 option:eq(0)").val());
  		  jquery(".c2").selectpicker("val",jquery(".c2 option:eq(0)").val());
  		  jquery(".c4").selectpicker("val",jquery(".c4 option:eq(0)").val());
  		var operatorId = document.getElementById("ix:operatorId").value;
		var harvestTime = document.getElementById("ix:hiddenTime").value;
		var handleId=document.getElementById("ix:handleId").value;
		document.getElementById("tian:num3").value = operatorId;
		document.getElementById("tian:num4").value = harvestTime;
		document.getElementById("tian:num9").value = handleId;
	  };
	//修改页面区域变更
	  function xtunnelbian(){
		var plantId=jquery("#xiu\\:plId").val();
		var tunnelId=jquery("#xiu\\:tuId").val();
		xtunnelchange(plantId,tunnelId);
	  }
      //区域变更
	  function tunnelbian(){
		var plantId=jquery("#tian\\:plantListId").val();
		var tunnelId=jquery("#tian\\:tunnelId").val();
		tunnelchange(plantId,tunnelId);
	  }
	  function tunnel(){
			 jquery('.selectpicker').selectpicker();
			 jquery('.c3').attr("data-live-search","true");
		  }
	  function xtunnel(){
			 jquery('.selectpicker').selectpicker();
		  }
	//自定义模式等级价格级联
	  function goodleveprice(){
		  var leveId=jquery("#tian\\:goodsLeve").val();
			goodPirce(leveId);
	  }
	//自定义价格
	  function goodprice(data){
		  jquery('.selectpicker').selectpicker();
		  if(data==null){
			  document.getElementById("tian:unitPrice").value="";
		  }else{
			  document.getElementById("tian:unitPrice").value=data;
		  }
		  
	  }
    jquery('#goodsInfoSearch\\:name').keydown(function(e){
    	if(e.keyCode==13){
    		jquery("#goodsInfoSearch\\:search").click();
    	}
    }); 
    function lev(a,b){
		levels(a,b);
        }
   	addOne = function(){
		var str = "";
		if(str == "") {
			jquery("input[name='td1']:checked").each(function(){
				str+=this.value+",";			
			});
		}else{
			str = obj;
		}
		if(str==""){
			document.getElementById("spanValue").innerHTML = "请选择需要的物料";
 		   jquery("#myModal").modal('show');return false;
		}
		addSearch(str);
	}
	document.onkeydown=function(event){ 
		e = event ? event :(window.event ? window.event : null); 
		if(e.keyCode==13){ 
		if(document.activeElement.id=="goodsInfoSearch:search"){
			jquery("#goodsInfoSearch\\:search").click();
		}
		e.keyCode=0;
		 if (window.navigator.userAgent.indexOf("MSIE")==-1)
		    {
			 e.preventDefault();
			 return false;
		    }
		e.returnValue=false;				
		} 
	}

	function continueSubmit(){
		jquery('#myModalWarn').modal('hide');
		jquery('#goodsInfo\\:persist').trigger('click');
	}

	function backAdd(){
		jquery('#myModalWarn').modal('hide');
	}
	
	function safeTime(data){
		var message = data.substring(0,2);
		if(message == "OK"){
			jquery('#goodsInfo\\:persist').trigger('click');
		}
		if(message == "NO"){
			var realplantstr = data.substring(2,data.length);
			var realplantArr = realplantstr.split(',');
			jquery('#myModalWarn').modal('show');
			for(var i=0; i<realplantArr.length; i++){
				if(realplantArr[i] != null && realplantArr[i] != ""){
					jquery('#'+realplantArr[i]).css('color','red');
				}
			}
		}
	}
	
	function checkSubmit(){
		var harvestHarvester = #{sessionTake.harvestHarvesterCheck};
		var harvestOperator = #{sessionTake.harvestOperatorCheck};
		var harvestLevel = #{sessionTake.harvestLevelCheck};
		var harvestPrice = #{sessionTake.harvestPriceCheck};
		var b=true;
		  var level = #{sessionTake.levelId};
		  if(level < 4){
			  var baseNameObj = document.getElementById("ix:basicId");
		        var baseName = baseNameObj.options[baseNameObj.selectedIndex].text;
		        document.getElementById("goodsInfo:num5").value = baseName;
				document.getElementById("goodsInfo:num6").value = baseNameObj.value;
			 }
			 //自定义采收人
		if(harvestHarvester){
			var operatorId = document.getElementById("ix:operatorId").value;
			document.getElementById("goodsInfo:num3").value = operatorId;
			if(operatorId==""){
				alert("请先添加采收人")
				b=false;
				return false;
			}
		}
		var harvestTime = document.getElementById("ix:harvestTime").value;
		//var harvestStorage = #{sessionTake.harvestStorageEnable};
		var storageRoomId;
		if(harvestInStock){
			//if(harvestStorage == 1){
				storageRoomId= document.getElementById("ix:storageRoomId0").value;
			/* }else if(harvestStorage == 0){
				storageRoomId= document.getElementById("ix:storageRoomId0").value;
			} */
		}else{
			storageRoomId = "0";
		}
		
		//自定义采收经办人
		if(harvestOperator){
			var handleId=document.getElementById("ix:handleId").value;
			document.getElementById("goodsInfo:num9").value = handleId;
		}
		document.getElementById("goodsInfo:num4").value = harvestTime;
		document.getElementById("goodsInfo:num7").value = storageRoomId;
		if(harvestLevel){
			var le=false;
			jquery('.new_td8 .levelIds .dropdown-toggle').each(function(){
				if(jquery.trim(jquery(this).text())=="无可选择项目"){
					le=true;
				}
			})
			if(le){
				alert("采收等级不能为空");
				b=false;
				return false;
			}
		}
		
		var trLen = jquery(".newble12 tr").length;
		if(trLen < 2 || lengParam==0){
			document.getElementById("spanValue").innerHTML = "请选择需要的物料";
    		jquery("#myModal").modal('show');
    		b=false;
			return false;
		}
		jquery('.znum').each(function(){
			var num=jquery(this).val();
			if (num == null || jquery.trim(num) == '') {
				jQuery("#messageValue").html("采收筐数量不能为空！");
				jQuery("#messageDiv").modal('show');
				b=false;
				return false;
			}else {
				if (num <= 0 ) {
					jQuery("#messageValue").html("采收筐数量须大于0！");
					jQuery("#messageDiv").modal('show');
					b=false;
					return false;
				}
				if(num>50){
					jQuery("#messageValue").html("采收筐数量须小于50筐！");
					jQuery("#messageDiv").modal('show');
					b=false;
					return false;
				}
				var reg = new RegExp("^-?\\d+$");
				if(!reg.test(num)){
					jQuery("#messageValue").html("采收筐数量只能为整数！");
					jQuery("#messageDiv").modal('show');
					b=false;
					return false;
				}
			}
		});

		jquery('.price_').each(function(){
			var num=jquery(this).val().trim();
			if (num != null && num != '') {
				if(isNaN(num) || parseFloat(num) <0){
					jQuery("#messageValue").html("请输入正确的单价数！");
					jQuery("#messageDiv").modal('show');
					b=false;
					return false;
				}
			}
		});
		validateSafeTime(harvestTime);
		return b;
	}

     function initMe(){
    	 jquery('input').iCheck({
 		    checkboxClass: 'icheckbox_minimal-blue',
 		    radioClass: 'iradio_minimal-blue',
 		    increaseArea: '20%' // optional
 		  });
    	
    	 jquery('input[name=checkAll]').on("ifClicked", function(event){
 			if (this.checked) {
 				jquery("input[name='td1']").iCheck("uncheck"); 
 			} else {
 				jquery("input[name='td1']").iCheck("check"); 
 			}
 		});
		 jquery('.enableAcct input').on('ifClicked', function(){
  			  if(jquery('.enableAcctCon').is(':hidden')){
  	 			  jquery('#ix\\:checkyorn').val(0);
  				  jquery('.enableAcctCon').show();
  			  }else{
  				 jquery('#ix\\:checkyorn').val(1);
  				  jquery('.enableAcctCon').hide();
  			  }
  		});
         }
	jquery(document).ready(function(){
		jquery('#xiu\\:reId').attr('disabled', true);
		jquery("#xiu\\:reId").selectpicker("refresh");
		initMe();
		jquery('.c1').attr("data-live-search","true");
		jquery('.xc1').attr("data-live-search","true");  
		jquery('#ix\\:checkyorn').val(1);
		//var harvestStorage = #{sessionTake.harvestStorageEnable};
		/* if(harvestStorage == 1){
			jquery("#storage").iCheck('check');
			 jquery('#ix\\:checkyorn').val(0);
			jquery('.enableAcctCon').show();
		}else{ */
			if(harvestInStock){
				var storageRoom = jquery("#ix:storageRoomId0").val();
				if(storageRoom == "0"){
					jquery("#ix\\:handleId").attr("disabled",true);
					jquery(".dropdown-toggle").removeClass("disabled");
					jquery('.selectpicker').selectpicker();
				}
			}
		//}
		})
		
		function storageChange(){
			//var harvestStorage = #{sessionTake.harvestStorageEnable};
			var val;
			/* if(harvestStorage == 1){
				val= jquery("#ix\\:storageRoomId1").val();
			}else if(harvestStorage == 0){ */
				val=jquery("#ix\\:storageRoomId0").val();
			//}
	 //var val=jquery("#tian\\:storageRoomId").val();
		 if(val !=0){
			 jquery("#ix\\:handleId").attr("disabled",false);
			 jquery(".dropdown-toggle").removeClass("disabled");
	 	}else{
	 		jquery("#ix\\:handleId").attr("disabled",true);
	 	}
		 changeStorageRoom(parseInt(val));
		}
	//产出品修改
	function changeOutputs(idnex,obj){
		var id = jquery(obj).val();
		selectOutputs(idnex,id);
	}
    //]]>
</script>
<script type="text/javascript">
				jquery(".form_datetime").datetimepicker({
			    format: "yyyy-mm-dd hh:ii",
			    autoclose: true,
				 weekStart: 1,
				  //startDate: "2014-08-14 10:00",
				 language:  'zh-CN',
			    
			    pickerPosition: "bottom-left"
			    });
				jquery('.b1').attr("data-live-search","true"); 
			  window.onload = function () {
			    jquery('.selectpicker').selectpicker();
			  };
			</script>
</ui:define>

</ui:composition>

<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:a="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich"
    template="/layout/template_new.xhtml">
	<ui:define name="body">
		   <style>
		   			.form-control{
						float:left;
					}
				   .all_da table,.all_te table{table-layout: inherit;}
				   .input-append.date .add-on i, .input-prepend.date .add-on i {
    cursor: pointer;
    height: 14px;
    margin-left: -19px;
    margin-top: 7px;
    width: 14px;
}
.pos_starRed{ position:relative;}
.pos_starRed .star_red{ position:absolute;left:220px;top:0;width:130px;height:30px;line-height:30px;color:#f00;}
.all_te{ width:100px; height:30px; line-height:30px; text-align:right; font-size:14px;}
			</style>
			<script language="JavaScript" src="#{request.contextPath}/asset/js/order/MemberInfoEdit.js"/> 
		<td valign="top">
                <div class="right_c">
                	 <div class="r_title clear" style="margin-top:0;">
                	 <s:fragment rendered="#{memberInfoHome.pageType eq '2'}">
						<div class="r_t_l">采销存<span style="padding:0 5px;">&gt;</span><font size="3">客户管理</font></div>
	                    <div class="fr" style="margin-bottom:-1px;">
		                    <ul class="cm_resumeList clear">
		                    	<li>
		                            <a href="#{request.contextPath}/contract/PurchaseMemberList.seam"><img src="../asset/images/orderManage/qykh_btn.png" /><span>供应商企业</span></a>
		                        </li>
		                        <li>
		                    		<a href="#{request.contextPath}/contract/DemandMemberList.seam"><img src="../asset/images/orderManage/qykh_btn.png" /><span>需求商企业</span></a>
		                        </li>
		                        <li>
		                    		<a class="borderBt" href="#{request.contextPath}/order/OrderMemberList.seam"><img src="../asset/images/orderManage/ddkh_btn.png" /><span>订单客户</span></a>
		                        </li>
		                    </ul>
		                </div>
					</s:fragment>
					<s:fragment rendered="#{memberInfoHome.pageType ne '2'}">
		               <div class="r_t_l">采销存<span>&gt;</span>订单管理<span>&gt;</span><a href="#{request.contextPath}/order/MemberInfoListOne.seam"><strong>客户管理</strong></a></div>
		               <div class="fr" style="margin-bottom:-1px;">
		                   <ul class="cm_resumeList clear">
		                   		<li>
		                            <a href="#{request.contextPath}/orderManage/OrderOperateList.seam"><img src="../asset/images/orderManage/resumeIco50.jpg" /><span>订单管理</span></a>
		                        </li>
		                        <li>
		                    		<a class="borderBt" href="#{request.contextPath}/order/MemberInfoListOne.seam"><img src="../asset/images/orderManage/resumeIco51.jpg" /><span>客户管理</span></a>
		                        </li>
		                        <li>
		                    		<a href="#{request.contextPath}/card/CardInfoList.seam?cardType=0"><img src="../asset/images/orderManage/resumeIco51.jpg" /><span>会员卡管理</span></a>
		                        </li>
		                        <h:panelGroup rendered="#{s:hasRole('coupon')}">
			                        <li >
		                                <a href="#{request.contextPath}/order/CouponList.seam"><img src="../asset/images/order/resumeIco150.jpg" /><span>红包管理</span></a>
		                            </li>
		                        </h:panelGroup>
		                   </ul>
		               </div>
		           </s:fragment>
           </div>
                    <h:form id="memberInfo" enctype="multipart/form-data">
                    	<!-- Modal -->
<div aria-hidden="false" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="myModal" class="modal fade in w600na" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">提示框</h4>
      </div>
      <div class="modal-body">
       <span id="productMsg">*号部分为必填项！</span>
        
        
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
        <button type="button" class="btn btn-primary" data-dismiss="modal">确认</button>
      </div>
    </div>
  </div>
</div>
                    
                    <h:inputHidden value="#{memberInfoHome.instance.memberInfoId}" id="memberInfoId" />
                     <input type="text" value="#{memberInfoHome.managed}" id="managed" style="display:none"/>
                	<div class="all_d3">
                		<div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">客户名称：</td>
                                    <td>
                                    <div class="pos_starRed">
                                    	 <h:inputText id="realname"  style="margin-right:0px;"
						                        styleClass="form-control nw221"
						                          value="#{memberInfoHome.instance.realname}" onblur="checkName()">
						                </h:inputText>
						                <span class="star_red finput"  style="color:#FF0000" id="custNameText">*</span>
                                    </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">销售人：</td>
                                    <td>
                                    	<span style="float:left">
                                    	 <h:panelGroup rendered="#{sessionTake.farmerInfoId eq null}">
                                    	 	<h:selectOneMenu immediate="true" id="farmerInfoId"  styleClass="selectpicker nw200" value="#{memberInfoHome.farmerInfoId}">
											<s:selectItems value="#{memberInfoHome.getSqlePerson()}" var="var" label="#{var[1]}" itemValue="#{var[0]}"/>
											</h:selectOneMenu>
                                    	 </h:panelGroup>
                                    	  <h:panelGroup rendered="#{sessionTake.farmerInfoId ne null}">
                                    	 	<h:outputText value="#{sessionTake.farmerInfoName}" />                                   	 	
                                    	 </h:panelGroup></span>
                                    	 <span class="finput"  style="color:#FF0000;float:right;margin-left:-3px;">*</span>
                                    </td>
                                </tr>
                            </table>
                        </div>
                         <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">客户类型：</td>
                                    <td>
                                    	 	<h:selectOneMenu immediate="true" id="memberTypeId"  styleClass="selectpicker nw200" value="#{memberInfoHome.instance.mType}">
											<s:selectItems value="#{memberInfoHome.memberTypeList}" var="var" label="#{var.name}"  noSelectionLabel="请选择"/>
											<s:convertEntity/>
											</h:selectOneMenu>
                                    </td>
                                </tr>
                            </table>
                        </div>
                         <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">客户来源：</td>
                                    <td>
                                    	 	<h:selectOneMenu immediate="true" id="memberSourceId"  styleClass="selectpicker nw200" value="#{memberInfoHome.instance.mSource}" disabled="#{memberInfoHome.instance.mSource.memberSourceId eq 2 or memberInfoHome.instance.mSource.memberSourceId eq 3or memberInfoHome.instance.mSource.memberSourceId eq 4?'true':'false'}">
											<s:selectItems value="#{memberInfoHome.memberSourceList}" var="var" label="#{var.name}"  noSelectionLabel="请选择"/>
											<s:convertEntity/>
											</h:selectOneMenu>
                                    </td>
                                </tr>
                            </table>
                        </div>
                         <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">联系方式：</td>
                                    <td>
                                    	<div class="pos_starRed">
	                                    	<h:inputText id="phone" disabled="#{memberInfoHome.instance.mSource.memberSourceId eq 2 or memberInfoHome.instance.mSource.memberSourceId eq 3 or memberInfoHome.instance.mSource.memberSourceId eq 4?'true':'false'}"
							                         styleClass="form-control nw221"
							                          value="#{memberInfoHome.instance.phone}" >
							                </h:inputText>
							                <span class="star_red finput" id="phoneText">*</span>
						                </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">出生日期：</td>
                                    <td>
                                     <div class="input-append date form_datetime " >
								    <h:inputText id="birthday" readonly="#{facesContext.renderResponse}" styleClass="new_time" value="#{memberInfoHome.instance.birthday}"/>
								    <span class="add-on"><i class="icon-th"></i></span>
								    </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">姓名拼音：</td>
                                    <td>
                                    	<h:inputText id="realnamePy"
						                      styleClass="form-control nw221"
						                          value="#{memberInfoHome.instance.realnamePy}">
						                </h:inputText>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">客户类别：</td>
                                    <td>
						                <h:selectOneMenu styleClass="selectpicker" id="memberType"  value="#{memberInfoHome.instance.memberType}">
			                   				<f:selectItem itemLabel="个人" itemValue="1" />
			                   				<f:selectItem itemLabel="企业代表" itemValue="2" />
			                   			</h:selectOneMenu>
                                    </td>
                                </tr>
                            </table>
                        </div>
                         <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">昵&#160;&#160;&#160;&#160;&#160;&#160;称：</td>
                                    <td>
                                    	<h:inputText id="nickName"
						                         styleClass="form-control nw221"
						                          value="#{memberInfoHome.instance.nickName}">
						                </h:inputText>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">身份证号码：</td>
                                    <td>
                                    	<h:inputText id="idCard"
						                       styleClass="form-control nw221"
						                          value="#{memberInfoHome.instance.idCard}">
						                </h:inputText>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">性&#160;&#160;&#160;&#160;&#160;&#160;别：</td>
                                    <td >
                                    	 <h:selectOneMenu id="sex"  styleClass="selectpicker" value="#{memberInfoHome.instance.sex}" >
			                   				
			                   				<f:selectItem itemLabel="男" itemValue="1" />
			                   				<f:selectItem itemLabel="女" itemValue="2" />
			                   				<f:selectItem itemLabel="其它" itemValue="3" />
			                   			</h:selectOneMenu>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">学&#160;&#160;&#160;&#160;&#160;&#160;历：</td>
                                    <td >
                                    	 <h:selectOneMenu styleClass="selectpicker" id="education"  value="#{memberInfoHome.instance.education}" >
			                   				<f:selectItem itemLabel="请选择" itemValue="0" />
			                   				<f:selectItem itemLabel="博士" itemValue="1" />
			                   				<f:selectItem itemLabel="硕士" itemValue="2" />
			                   				<f:selectItem itemLabel="本科" itemValue="3" />
			                   				<f:selectItem itemLabel="大专" itemValue="4" />
			                   				<f:selectItem itemLabel="中专及以下" itemValue="5" />
			                   			</h:selectOneMenu>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">婚姻状况：</td>
                                    <td >
		                                 <h:selectOneMenu styleClass="selectpicker" id="marriageState"  value="#{memberInfoHome.instance.marriageState}">
			                   				<f:selectItem itemLabel="未婚" itemValue="false" />
			                   				<f:selectItem itemLabel="已婚" itemValue="true" />
			                   			</h:selectOneMenu>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        
                        <!-- <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">住宅邮编：</td>
                                    <td>
                                    	<h:inputText id="homePort"
						                       styleClass="form-control nw221"
						                          value="#{memberInfoHome.instance.homePort}">
						                </h:inputText>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">月&#160;收&#160;入：</td>
                                    <td>
                                    	<h:inputText id="income"
						                         styleClass="form-control nw221" style="margin-right:0px;"
						                          value="#{memberInfoHome.instance.income}">
						                </h:inputText>
                                    	 <h:selectOneMenu id="income" style="width: 286px;" value="#{memberInfoHome.instance.income}" >
			                   				<f:selectItem itemLabel="请选择" itemValue="" />
			                   				<f:selectItem itemLabel="0-3000" itemValue="1" />
			                   				<f:selectItem itemLabel="3001-6000" itemValue="2" />
			                   				<f:selectItem itemLabel="6001-1000" itemValue="3" />
			                   			</h:selectOneMenu>
                                   </td>
                                </tr>
                            </table>
                        </div>
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">卡&#160;&#160;&#160;&#160;&#160;&#160;号：</td>
                                    <td>
                                    	<h:inputText id="memberCardCode"
						                        styleClass="form-control nw221"
						                          value="#{memberInfoHome.instance.memberCardCode}">
						                </h:inputText>
                                    </td>
                                </tr>
                            </table>
                        </div>
                       <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">等级积分：</td>
                                    <td>
                                    	<h:inputText id="gradeIntegral"
						                       styleClass="form-control nw221" style="margin-right:0px;"
						                          value="#{memberInfoHome.instance.gradeIntegral}">
						                </h:inputText>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="all_da all_w01"> 
                        	<table>
                                <tr>
                                    <td class="all_te">折&#160;&#160;&#160;&#160;&#160;&#160;扣：</td>
                                    <td>
                                    	<h:inputText id="discount"
						                      styleClass="form-control nw84"
						                          value="#{memberInfoHome.instance.discount}">
						                </h:inputText>
						                <span class="finput">(%)</span>
                                    </td>
                                </tr>
                            </table>
                        </div> -->
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te" >默认配送时间：</td>
                                    <td >
                                    	<h:inputHidden id="distributionTime" value="#{memberInfoHome.instance.distributionTime}" />
                                    	<select class="selectpicker" title="请选择" id="distributionTime" multiple="multiple" >
                                    		<option value="1">星期一</option>
                                    		<option value="2">星期二</option>
                                    		<option value="3">星期三</option>
                                    		<option value="4">星期四</option>
                                    		<option value="5">星期五</option>
                                    		<option value="6">星期六</option>
                                    		<option value="7">星期天</option>
                                    	</select>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="all_da all_w01" style="width:auto; ">
                        	<table>
                                <tr>
                                    <td class="all_te">头&#160;&#160;&#160;&#160;&#160;&#160;像：</td>
                                    <td>
                                    	<s:fileUpload id="icon"
											accept="image/png,image/jpeg,image/gif"
											contentType="image/png,image/jpeg,image/gif"
											fileName="#{memberInfoHome.instance.imgUrlName}"
											data="#{memberInfoHome.instance.imgData}">
										</s:fileUpload>
                                    </td>
                                    <td><p class="pic_stress">支持格式：jpg,gif,png,jpeg,bmp,3gp</p></td>
                                </tr>
                            </table>
                        </div>
                        
                         <div class="all_da" style="width:80%;">
                             <table>
                                <tr>
									<td class="all_te">工作地址：</td>
									<td>
										<h:inputTextarea id="workAddress" styleClass="form-control nw420" rows="3" value="#{memberInfoHome.instance.workAddress}" />
		                            </td>
								</tr>
								<tr>
									<td colspan="2" height="15"></td>
								</tr>
                            </table>
                        </div>
                        <div class="all_da" style="width:80%;">
                            <table>
                                <tr>
									<td class="all_te">住宅地址：</td>
									<td>
										<h:inputTextarea id="homeAddress" styleClass="form-control nw420" rows="3" value="#{memberInfoHome.instance.homeAddress}" />
		                            </td>
								</tr>
								<tr>
									<td colspan="2" height="15"></td>
								</tr>
                            </table>
                        </div>
                        <div class="all_da all_w01" style="width:80%;">
                        	<table>
                                <tr>
									<td class="all_te">忌&#160;&#160;&#160;&#160;&#160;&#160;口：</td>
									<td>
										<h:inputTextarea id="hobby" styleClass="form-control nw420" rows="3" value="#{memberInfoHome.instance.taboo}" />
		                            </td>
								</tr>
								<tr>
									<td colspan="2" height="15"></td>
								</tr>
                            </table>
                        </div>
                        <div class="all_da all_w01" style="width:80%;">
                        	<table>
                                <tr>
									<td class="all_te">爱&#160;&#160;&#160;&#160;&#160;&#160;好：</td>
									<td>
										<h:inputTextarea id="taboo" styleClass="form-control nw420" rows="3" value="#{memberInfoHome.instance.hobby}" />
		                            </td>
								</tr>
								<tr>
									<td colspan="2" height="15"></td>
								</tr>
                            </table>
                        </div>
                        <div class="all_da all_w01" style="width:80%;">
                        	<table>
                                <tr>
									<td class="all_te">备&#160;&#160;&#160;&#160;&#160;&#160;注：</td>
									<td>
										<h:inputTextarea id="remark" styleClass="form-control nw420" rows="3" value="#{memberInfoHome.instance.remark}" />
		                            	
		                            </td>
								</tr>
								<tr>
									<td colspan="2" height="5"></td>
								</tr>
                            </table>
                        </div>
                        <div></div>
                        <div class="clear"></div>
                   </div>
                   <h:inputHidden value="#{memberInfoHome.pageNum}" />
                   <table width="180" style="margin:5px auto 0 auto;">
						<tr>
							<td>
		            			<h:outputText rendered="#{!memberInfoHome.managed}" >
		            			<input type="button" class="btn btn-primary" value="提交" onclick="checkCustPhone(1)"/>
		            			</h:outputText>
		            			<h:outputText rendered="#{memberInfoHome.managed}" >
		            			<input type="button" class="btn btn-primary" value="提交" onclick="checkCustPhone(2)"/>
		            			</h:outputText>
							
								<h:commandButton id="persist" value="提交" styleClass="btn btn-primary" style="display:none;" action="#{memberInfoHome.persist}" rendered="#{!memberInfoHome.managed}"  onclick="return checkSubmit()"/>
		            			<h:commandButton id="update" value="提交" styleClass="btn btn-primary" style="display:none;" action="#{memberInfoHome.update}" rendered="#{memberInfoHome.managed}"   onclick="return checkSubmit()"/>
		            			<s:button view="/order/MemberInfoListOne.seam" styleClass="btn btn-default" value="返回" id="bn_left6" style="margin-left:10px" rendered="#{memberInfoHome.memberInfoType ne 1 and memberInfoHome.pageType ne '2'}">
		            				<f:param name="pageNum" value="#{memberInfoHome.pageNum}" />
		            				<f:param name="rankNum" value="#{memberInfoListOne.rankNum}" />
		            			</s:button>
		            			<s:button view="/order/OrderMemberList.seam" styleClass="btn btn-default" value="返回" style="margin-left:10px" rendered="#{memberInfoHome.pageType eq '2'}">
		            				<f:param name="pageNum" value="#{memberInfoHome.pageNum}" />
		            				<f:param name="pageType" value="#{memberInfoHome.pageType}" />
		            				<f:param name="rankNum" value="#{memberInfoListOne.rankNum}" />
		            			</s:button>
                            </td>
						</tr>
                   </table> 
                    <!--按钮结束-->
                    <div class="clear"></div>
                    </h:form>
                </div><!--right_c结束-->
              
				<!--入库订单列表结束-->
            </td>    
    <!--右边结束-->
 <!--添加按钮结束-->
 
 	<a:form>
		<a:jsFunction name="checkCustName" action="#{memberInfoHome.checkCustName}" data="#{memberInfoHome.isCustNameExist}" oncomplete="showNameMsg(data)">
			<a:actionparam name="custName" assignTo="#{memberInfoHome.custName}"/>
		</a:jsFunction>
	</a:form>
	<a:form>
		<a:jsFunction name="checkPhone" action="#{memberInfoHome.checkPhone}" data="#{memberInfoHome.isPhoneExist}" oncomplete="showPhoneMsg(data)">
			<a:actionparam name="phone" assignTo="#{memberInfoHome.phone}"/>
		</a:jsFunction>
		
		<a:jsFunction name="checkPhone2" action="#{memberInfoHome.checkPhone}" data="#{memberInfoHome.isPhoneExist}" oncomplete="showPhoneMsg2(data)">
			<a:actionparam name="phone" assignTo="#{memberInfoHome.phone}"/>
			<a:actionparam name="memberInfoId" assignTo="#{memberInfoHome.memberInfoId}"/>
		</a:jsFunction>
	</a:form>

<!--鼠标移上去换色js开始-->

<style>
	.VMsgDiv{
		line-height: 85%;
		width: 100%;
		text-align: center;
		padding-top: 3px;
		color: red;
	}
	</style>
<script type="text/javaScript">
	jquery('.selectpicker').selectpicker();
	var promptMessage = "#{memberInfoHome.promptMessage}";
	if(promptMessage != ""){
		document.getElementById("productMsg").innerHTML = promptMessage;
		jquery("#myModal").modal('show');
	}

    jquery(".form_datetime").datetimepicker({
	    format: "yyyy-mm-dd",
	    autoclose: true,
		weekStart: 1,
		//startDate: "2014-08-14 10:00",
		language:  'zh-CN',
		minView:2,
	    pickerPosition: "bottom-left"
	 });

    jQuery(function(){
		var distributionTime = jQuery('#memberInfo\\:distributionTime').val();
		var v = distributionTime.split(",");
		jquery("#distributionTime").selectpicker("val",v);//编辑时 品种取到选好的值
    });
	 
</script>
</ui:define>
</ui:composition>

<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html" 
    xmlns:a="http://richfaces.org/a4j" 
    xmlns:rich="http://richfaces.org/rich"
    template="../layout/template.xhtml">

<ui:define name="body">
	<style>
	.rich-calendar-input{width: 165px;height:22px; line-height:22px; border:1px solid #d8e3e9;}
	</style>
		<table width="100%" cellpadding="0" cellspacing="0" style=" margin-top:-3px; *margin-top:-3px; _margin-top:-9px;">
		<tr>
        	<td><div class="j001"></div></td>
        	<td><div class="top_b_g"></div></td>
        	<td><div class="j002"></div></td>
   		</tr>
   		<tr>
   			<td height="100%"><div class="left_b"></div></td>
   			<td align="center" valign="top" >
   				<div class="rigtjr">
   					<div class="right_coment" style="overflow:hidden;">
   						<div class="right_top">
   							<div class="right_l">
   								<div class="right_r">
   									<div class="list3">
   										<ul>
   											<li class="onmenu"><s:link propagation="none"  view="/member/MemberInfoList.seam?nvaid=#{nvaid}"><strong>客户信息管理</strong></s:link></li>
   										</ul>
   									</div>
   								</div>
   							</div>
   						</div>
   					</div>
   					<div class="con_left">
						<div id="rightPanel" class="con_right">
							<div class="mar" style="margin-bottom: 20px;"></div>      
							<h:form>
								<ui:include src="../member/MemberDetail.xhtml" />
							</h:form>
                            <div class="list_menu_2">
	                        	<ul>
	                        		<li class="list_li1"><s:link propagation="none"  view="/member/MemberInfo.seam?memberInfoMemberInfoId=#{memberInfoHome.instance.memberInfoId}&amp;nvaid=#{nvaid}&amp;recordType=1"><strong>订单信息</strong></s:link></li>
	                        		<li class="list_li1"><s:link propagation="none"  view="/member/MemberCardInfo.seam?memberInfoMemberInfoId=#{memberInfoHome.instance.memberInfoId}&amp;nvaid=#{nvaid}"><strong>卡信息</strong></s:link></li>
	                        		<li class="list_li1"><s:link propagation="none"  view="/member/MemberRechargeRecordList.seam?memberInfoMemberInfoId=#{memberInfoHome.instance.memberInfoId}&amp;nvaid=#{nvaid}"><strong>账户信息</strong></s:link></li>
	                         		<li class="list_li1 hover"><s:link propagation="none"  view="/member/MemberCommModeList.seam?memberInfoMemberInfoId=#{memberInfoHome.instance.memberInfoId}&amp;nvaid=#{nvaid}"><strong>联系人</strong></s:link></li>
	                         		<li class="list_li1"><s:link propagation="none"  view="/member/MemberCallInRecordList.seam?memberInfoMemberInfoId=#{memberInfoHome.instance.memberInfoId}&amp;nvaid=#{nvaid}"><strong>交往历史</strong></s:link></li>
	                         		<li class="list_li1"><s:link propagation="none"  view="/member/MemberComplainRecordList.seam?memberInfoMemberInfoId=#{memberInfoHome.instance.memberInfoId}&amp;nvaid=#{nvaid}"><strong>日志信息</strong></s:link></li>
	                        	</ul>
	                        	<div class="clear"></div>
	                        </div>
							<div class="list_menu_2">
	                        	<ul>
	                        		<li class="list_li1 hover"><s:link propagation="none"  view="/member/MemberCommModeList.seam?memberInfoMemberInfoId=#{memberInfoHome.instance.memberInfoId}&amp;nvaid=#{nvaid}"><strong>联系方式</strong></s:link></li>
	                         		<li class="list_li1"><s:link propagation="none"  view="/member/MemberRelationList.seam?memberInfoMemberInfoId=#{memberInfoHome.instance.memberInfoId}&amp;nvaid=#{nvaid}"><strong>关系信息</strong></s:link></li>
	                         		<li class="list_li1"><s:link propagation="none"  view="/member/MemberRecommendList.seam?memberInfoMemberInfoId=#{memberInfoHome.instance.memberInfoId}&amp;nvaid=#{nvaid}"><strong>推荐信息</strong></s:link></li>
	                        	</ul>
	                        	<h:form id="userInfoSearch" styleClass="edit">
									<table cellpadding="0" cellspacing="0" class="stripe" style="width: 95%">
											<tr>
		   										<td style="height:28px; background:url(../images/tj_bg_03.jpg) repeat-x;">
		   											<table cellpadding="0" cellspacing="0" style="margin-left:10px;">
		                                        		<tr>
				                                            <td align="center">
				                                            	<img src="../images/tj_03.jpg" width="12" height="12" />
			                                            	</td>
				                                            <td align="left" style="padding-left:2px">
				                                            	<s:link propagation="none"  view="/member/MemberCommModeEdit.xhtml" id="memberInfoAdd" value="添加">
														            <f:param name="memberInfoMemberInfoId" value="#{memberInfoMemberInfoId}"/>
														        </s:link>
			                                            	</td>
				                                            <td width="15" align="center">
			                                            	</td>
				                                            <td align="center"></td>
				                                            <td align="center"></td>
		                                        		</tr>
		                                    		</table>
		   										</td>
		   									</tr>
		  									<tr>
		  										<td style="background-color:#ffffff;">                             
												<h:outputText value="没有找到符合条件的结果." rendered="#{empty commModeList.resultList}" />
												<rich:dataTable id="commModeList" var="_cm" styleClass="stripe3" value="#{commModeList.resultList}" 
										              onRowMouseOver="this.style.backgroundColor='#e5f6ec'" onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'" rendered="#{not empty commModeList.resultList}">
											        <h:column>
											            <f:facet name="header">
											                <ui:include src="../layout/sort.xhtml">
											                    <ui:param name="entityList" value="#{commModeList}"/>
											                    <ui:param name="propertyLabel" value="ID"/>
											                    <ui:param name="propertyPath" value="commMode.commModeId"/>
											                </ui:include>
											            </f:facet>
											            <center><h:outputText value="#{_cm.commModeId}"/></center>
											        </h:column>
											        <h:column>
											            <f:facet name="header">
											                <ui:include src="../layout/sort.xhtml">
											                    <ui:param name="entityList" value="#{commModeList}"/>
											                    <ui:param name="propertyLabel" value="类型"/>
											                    <ui:param name="propertyPath" value="commMode.commModeType"/>
											                </ui:include>
											            </f:facet>
											            <center>
											            	<h:outputText value="电话" rendered="#{_cm.commModeType == 1}"/>
											            	<h:outputText value="邮箱" rendered="#{_cm.commModeType == 2}"/>
											            	<h:outputText value="即时通讯" rendered="#{_cm.commModeType == 3}"/>
											            </center>
											        </h:column>
											        <h:column>
											            <f:facet name="header">
											                <ui:include src="../layout/sort.xhtml">
											                    <ui:param name="entityList" value="#{commModeList}"/>
											                    <ui:param name="propertyLabel" value="子类型"/>
											                    <ui:param name="propertyPath" value="commMode.childModeType"/>
											                </ui:include>
											            </f:facet>
											            <center>
											            	<h:outputText value="#{commModeList.queryDataDics(_cm.childModeType)}"></h:outputText>
											            </center>
											        </h:column>
											        <h:column>
											            <f:facet name="header">
											                <ui:include src="../layout/sort.xhtml">
											                    <ui:param name="entityList" value="#{commModeList}"/>
											                    <ui:param name="propertyLabel" value="内容"/>
											                    <ui:param name="propertyPath" value="commMode.content"/>
											                </ui:include>
											            </f:facet>
											            <center>
											            	<h:outputText value="#{_cm.content}"></h:outputText>
											            </center>
											        </h:column>
											        <h:column>
											            <f:facet name="header">
											                <ui:include src="../layout/sort.xhtml">
											                    <ui:param name="entityList" value="#{commModeList}"/>
											                    <ui:param name="propertyLabel" value="创建时间"/>
											                    <ui:param name="propertyPath" value="commMode.insertTime"/>
											                </ui:include>
											            </f:facet>
											            <center>
											            	<h:outputText value="#{_cm.insertTime}">
																<s:convertDateTime type="both" dateStyle="short" pattern="yyyy-MM-dd HH:mm:ss" />
															</h:outputText>
														</center>
											        </h:column>
											        <rich:column styleClass="action" width="20%">
												            <f:facet name="header">操作</f:facet>
												            <table class="ps" align="center">
		               		  								<tr>
		                      									<td>
													            	<div class="chakan">
													            		<span class="i_edit"></span>
													            		<span class="i_left">
													            		<s:link view="/member/MemberCommModeEdit.xhtml" value="编辑" propagation="none" id="memberInfoEdit" rendered="#{empty from}">
															                <f:param name="memberInfoMemberInfoId" value="#{memberInfoMemberInfoId}"/>
															                <f:param name="commModeCommModeId" value="#{_cm.commModeId}"/>
															            </s:link>
													            		</span>
												            		</div>
												            		<div class="chakan">
												            			<span class="i_delete"></span>
											            				<span class="i_left">
											            					<s:link view="/member/MemberCommModeEdit.xhtml" value="删除" propagation="none" action="#{commModeHome.remove}" onclick="return confirm('确定删除吗？');" id="memberInfoDelete" rendered="#{empty from}">
																				<f:param name="memberInfoMemberInfoId" value="#{memberInfoMemberInfoId}"/>
																				<f:param name="commModeCommModeId" value="#{_cm.commModeId}"/>
																			</s:link> 
											            				</span>
										            				</div>
										            				</td>
									            				</tr>
								            				</table>
												        </rich:column>
											    </rich:dataTable>
										    </td>
										</tr>
										<tr>
											<td height="25" align="left" valign="middle" class="add_but" style="height:25px;  background:url(../images/next_bg_22.jpg) repeat-x;">
											<table align="right">
												<tr>
													<td>
														<b>共</b><font color="#FF0000"><b>#{empty commModeList.resultList ? 0 : (commModeList.paginated ? commModeList.resultCount : commModeList.resultList.size)}</b></font><b>条记录</b>&#160;
														<s:link propagation="none"  view="/member/MemberCommModeList.xhtml" rendered="#{commModeList.previousExists}" value="#{messages.left}#{messages.left} 首页" id="firstPage">
												          <f:param name="firstResult" value="0"/>
												        </s:link>
												        <s:link propagation="none"  view="/member/MemberCommModeList.xhtml" rendered="#{commModeList.previousExists}" value="#{messages.left} 上一页" id="previousPage">
												            <f:param name="firstResult" value="#{commModeList.previousFirstResult}"/>
												        </s:link>
												        <s:link propagation="none"  view="/member/MemberCommModeList.xhtml" rendered="#{commModeList.nextExists}" value="下一页 #{messages.right}" id="nextPage">
												            <f:param name="firstResult" value="#{commModeList.nextFirstResult}"/>
												        </s:link>
												        <s:link propagation="none"  view="/member/MemberCommModeList.xhtml" rendered="#{commModeList.nextExists}" value="尾页 #{messages.right}#{messages.right}" id="lastPage">
												            <f:param name="firstResult" value="#{commModeList.lastFirstResult}"/>
												        </s:link>
														</td>
													</tr>
												</table>
											</td>
										</tr>
									</table>
									</h:form>
	                        	<div class="clear"></div>
	                        </div>
							<div class="t8">
								<s:button id="cancel" value="返回" image="../images/an_09.jpg" propagation="end" view="/member/MemberInfoList.xhtml"/>
								<div class="clear"></div>
							</div>
						</div>
                      </div>
					</div>
			</td>
			<td><div class="right_b"></div></td>
		</tr>
   		<tr>
   			<td valign="top" width="21"><div class="j003"></div></td>
            <td><div class="bot_b_g"></div></td>
            <td valign="top" width="21"><div class="j004"></div></td>
   		</tr>
	</table>  
	</ui:define>
</ui:composition>

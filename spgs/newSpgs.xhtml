<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<f:view xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:s="http://jboss.com/products/seam/taglib" contentType="text/html">
	<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>SPGS</title>
<link rel="stylesheet" type="text/css" href="#{request.contextPath}/asset/css/spgs/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="#{request.contextPath}/asset/css/spgs/newSPGS.css"/>
<script type="text/javascript" src="#{request.contextPath}/asset/new/jquery.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/new/bootstrap.min.js"></script>
<style type="">
.black_op50{
	position:fixed;
	left:0;
	top:0;
	right:0;
	bottom:0;
	background-color:#000;
	opacity:0.5;
	filter:alpha(opacity=50);
	}
.maturity_block{
	position:fixed;
	left:50%;
	top:50%;
	z-index:2;
	width:300px;
	padding:20px 0px;
	border-radius:8px;
	box-shadow:0 0 15px -2px #564f3d;
	box-sizing:content-box;
	background-color:#fff;
	font-size:14px;
	color:#333;
	}
.maturity_block .close_tipbtn{
	position:absolute;
	right:10px;
	top:10px;
	width:12px;
	height:12px;
	background:url(/asset/images/farmingIco17.jpg) no-repeat;
	cursor:pointer;
	}
.maturity_block .close_tipbtn:hover{
	background:url(/asset/images/farmingIco16.jpg) no-repeat;
	}
.maturity_block .tip_pic{
	padding-top:10px;
	padding-bottom:10px;
	text-align:center;
	}
.maturity_block .tip_pic img{
	width:36px-;
	height:36px-;
	vertical-align:top;
	}
.maturity_block .tip_txt1{
	line-height:22px;
	text-align:center;
	}
.maturity_block .tip_txt1 .colors_b50{
	color:#69b631;
	}
.maturity_block .tip_txt1 font{
	color:#ff9f13;
	}
</style>
</head>
<body>
 <div class="maturity_block" style="display:none;z-index: 11">
    	<p class="tip_pic"><img src="/asset/images/map/maturity_ico2.png" /></p>
        <p class="tip_txt1">亲，您的 <span class="colors_b50">接口服务</span><span>已过期</span>，暂不可使用，<br />赶快拨打<font>400-8199-586</font><br />联系我们吧！</p>
    </div>
	<div class="black_op50" style="display:none;z-index: 10"></div>
#{spgsHome.spgsDataInit()}
	<div class="SPGS-base-wapper">
		<div class="SPGS-header clear" style="display:none;">
			<a class="logo-lt fl" href="#"><img src="#{request.contextPath}/asset/images/spgs/SPGS_logo1.jpg" width="230" height="69" /></a>
			<a class="return-index fl" href="#">
				<img src="#{request.contextPath}/asset/images/spgs/SPGS_ico1.png" />
				<span>商城首页</span>
			</a>
			<a href="#" class="my-account">我的账户</a>
			<div class="header-rt fr">
				<div class="shoping-cart fl">
					<a href="#">
						<span class="num">0</span>
					</a>
				</div>
				<div class="link-login fl">
					<a href="#" class="">社员登录</a>｜<a href="#" class="">注册</a>
				</div>
				
			</div>
		</div>
	<div class="SPGS-main-wapper" style="margin-top:60px;">
		<table width="100%" cellpadding="0" cellspacing="0">
			<tr>
				<td class="spgs-td-left growth-proccess-lt" align="center" width="310">
				<!-- 生长过程左侧 开始 -->
					<div class="spgs-crop-pic">
						<span class="circle-mark"></span>
						<img class="pic" src="#{spgsHome.realPlant.breedBreedId.plant.plantImgRound}"/>
					</div>
					<p class="spgs-crop-txt"><img src="#{request.contextPath}/asset/images/spgs/SPGS_img2.jpg"/></p>
				<!-- 生长过程左侧 结束 -->
				</td>
				<td class="spgs-td-right growth-proccess-rt">
				<!-- 生长过程右侧 开始 -->
					<strong class="crop-name"><span class="pr10">#{spgsHome.realPlant.breedBreedId.name}</span>#{spgsHome.realPlant.tunnelInfoId.tunnelName}</strong>
					<div class="crop-instro">
						<p>当前周期名称：#{spgsHome.currentPeriod}</p><p> 已种植天数：#{spgsHome.plantDays[2]}#{spgsHome.plantDays[2] gt 0?'天':''}</p>
						<p>认证标准：#{spgsHome.plantStandard}认证</p>
					</div>
					<div class="growthCycle">
		                <div class="curGrowthValue" style="left:#{spgsHome.plantDays[3]}%">
		                    <div class="tip">#{spgsHome.plantDays[2]}#{spgsHome.plantDays[2] gt 0?'天':''}</div>
		                </div>
		                <table class="growthCycleJdt" width="100%" cellpadding="0" cellspacing="0">		                   
		                    <tr>
			                    <a:repeat value="#{spgsHome.plantPeriodList}" rendered="#{spgsHome.plantPeriodList.size() gt 0}" var="_period" rowKeyVar="_index">
                            		<td class="bgColor#{_index+1}"  width="#{_period[2]}">
                            			<span class="text">#{_period[1]}</span>
                            			<div class="date-time">
				                        	<span class="growthDay fl txt-lt">#{_index == 0?'0':''}天  </span>	
				                            <span class="growthDay fr txt-rt">#{_period[0]}
                            			#{_index == spgsHome.plantPeriodList.size() - 1?'天':''}</span>	
				                        </div>                          		
                            		</td>
                            	</a:repeat>
		                    </tr>
		                </table>
		            </div>
				<!-- 生长过程右侧 结束 -->
				</td>
			</tr>
			<tr>
				<td class="spgs-td-left farm-envir-lt bg-line">
					<img src="#{request.contextPath}/asset/images/spgs/SPGS_img10.png" />
				</td>
				<td class="spgs-td-right farm-envir-rt">
				<!-- 农场环境右侧 开始102°54' -->
					<div class="farm-map-wap">
						<iframe src=""
								id="map-canvas" frameborder="no" border="0" style="width:100%;height:500px;">      
    					</iframe>
					</div>
					<table class="farm-map-instr mt20 mb20" width="100%" cellpadding="0" cellspacing="0">
						<tr>
							<td class="instr-td-lt" width="176">东经</td>
							<td class="instr-td-rt" width="30%">
								<h:outputText value="#{spgsHome.longitude}">
                             	</h:outputText>
							</td>
							<td class="instr-td-lt" width="176">北纬</td>
							<td class="instr-td-rt">							
								<h:outputText value="#{spgsHome.latitude}">
                               	</h:outputText>
							</td>
						</tr>
						<tr>
							<td class="instr-td-lt">海拔</td>
							<td class="instr-td-rt">
								<s:fragment  rendered="#{spgsHome.base.altitude != null}">
									<h:outputText value="#{spgsHome.base.altitude}">
	                               		<f:convertNumber pattern="#.###"/>
	                               	</h:outputText>米
	                             </s:fragment>
                               	<h:outputText value="--" rendered="#{spgsHome.base.altitude == null}">
                               	</h:outputText>
                            </td>
							<td class="instr-td-lt">全年积温</td>
							<td class="instr-td-rt">
								<s:fragment rendered="#{spgsHome.baseInfo[1] != null}">
                               		<h:outputText value="#{spgsHome.baseInfo[1]}" >
	                               		<f:convertNumber pattern="#.###"/>
	                               	</h:outputText>摄氏度
                               	</s:fragment>
                               	<h:outputText value="--" rendered="#{spgsHome.baseInfo[1] == null}">
                               	</h:outputText>
							</td>
						</tr>
						<tr>
							<td class="instr-td-lt">平均日夜温差</td>
							<td class="instr-td-rt">
								<s:fragment rendered="#{spgsHome.baseInfo[3] != null}">
                               		<h:outputText value="#{spgsHome.baseInfo[3]}" >
	                               		<f:convertNumber pattern="#.###"/>
	                               	</h:outputText>℃
                               	</s:fragment>
                               	<h:outputText value="--" rendered="#{spgsHome.baseInfo[3] == null}">
                               	</h:outputText>
							</td>
							<td class="instr-td-lt">全年降水量</td>
							<td class="instr-td-rt">
								<s:fragment rendered="#{spgsHome.baseInfo[2] != null}">
                               		<h:outputText value="#{spgsHome.baseInfo[2]}" >
	                               		<f:convertNumber pattern="#.###"/>
	                               	</h:outputText>mm
                               	</s:fragment>
                               	<h:outputText value="--" rendered="#{spgsHome.baseInfo[2] == null}">
                               	</h:outputText>
							</td>
						</tr>
						<tr>
							<td class="instr-td-lt">有机质含量</td>
							<td class="instr-td-rt">								
                               	<s:fragment rendered="#{spgsHome.baseInfo[0] != null}">
                               		<h:outputText value="#{spgsHome.baseInfo[0]}" >
	                               		<f:convertNumber pattern="#.###"/>
	                               	</h:outputText>%
                               	</s:fragment>
                               	<h:outputText value="--" rendered="#{spgsHome.baseInfo[0] == null}">
                               	</h:outputText>
                            </td>
							<td class="instr-td-lt"></td>
							<td class="instr-td-rt"></td>
						</tr>
					</table>
				<!-- 农场环境右侧 结束 -->
				</td>
			</tr>
			<tr>
				<td class="spgs-td-left bg-line">
					<img src="#{request.contextPath}/asset/images/spgs/SPGS_img11.png" />
				</td>
				<td class="spgs-td-right">
				<!-- 自动农事纪录右侧 开始 -->
					<div class="focusmap-wap">
                    	<div class="focusmap-con">
                        	<ul class="items-list">
                        		<a:repeat value="#{spgsHome.agriculturalInfoList}" rendered="#{spgsHome.agriculturalInfoList.size() gt 0}" var="_ail" rowKeyVar="_index">
                        			<li class="items">
	                                	<div class="focusmap-div">
	                                        <div class="focusmap-hd">
	                                        	<s:fragment rendered="#{_ail[6] == null}"><img src="#{request.contextPath}/asset/images/spgs/SPGS_imgdefault1.jpg" /></s:fragment>                          
	                                            <s:fragment rendered="#{_ail[6] != null and _ail[6] != ''}"><img src="#{_ail[6]}" /></s:fragment>                                       
	                                        </div>
	                                        <div class="focusmap-bd">
	                                            <dl>
	                                                <dt class="date-num">
	                                                    <p class="month-txt">#{_ail[1]}</p>
	                                                    <p class="year-txt">#{_ail[0]}</p>
	                                                </dt>
	                                                <dd class="crop-info">
	                                                    <p class="crop-name">#{_ail[4]} #{_ail[5]} #{_ail[7]}</p>
	                                                    <div class="usetime-txt">
	                                                        <p class="usetime">用时#{_ail[2]}小时</p>
	                                                        <p class="come-ly">来自#{_ail[3]==null||_ail[3]==0||_ail[3]==1?"网站":""}#{_ail[3]==2?"手机":""}#{_ail[3]==3?"农事终端":""}#{_ail[3]==4?"系统推送":""}</p>
	                                                        <p class="add-ple">添加人：#{_ail[8]}</p>
	                                                    </div>
	                                                </dd>
	                                            </dl>
	                                        </div>
	                                    </div>
	                                </li>
                        		</a:repeat>                            	                             
                            </ul>
                        </div>
                        <div class="focusmap-btns">
                        	<div class="focus-btnlt"><a href="javascript:;"></a></div>
                            <div class="focus-btnrt"><a href="javascript:;"></a></div>
                        </div>
                    </div>
				<!-- 自动农事纪录右侧 结束 -->
				</td>
			</tr>
			<tr>
				<td class="spgs-td-left bg-line">
					<img src="#{request.contextPath}/asset/images/spgs/SPGS_img12.png" />
				</td>
				<td class="spgs-td-right">
				<!-- 大棚实际情况右侧 开始 -->
					<div class="spgs-analysis-chart">
                    	<div class="expert-say">
                        	<p data-toggle="modal" data-target="#myModal1" style="display:block;"><img src="#{request.contextPath}/asset/images/spgs/SPGS_ico2.jpg" /><span>专家解释</span></p>
                            <p data-toggle="modal" data-target="#myModal2" style="display:none;"><img src="#{request.contextPath}/asset/images/spgs/SPGS_ico2.jpg" /><span>专家解释</span></p>
                            <p data-toggle="modal" data-target="#myModal3" style="display:none;"><img src="#{request.contextPath}/asset/images/spgs/SPGS_ico2.jpg" /><span>专家解释</span></p>
                        </div>
						<div class="spgs-analysis-hd">
							<ul class="items-list clear">
								<li class="itmes cur">
									<a href="javascript:;">环境因子分布</a>
								</li>
								<li class="itmes">
									<a href="javascript:;">成熟度预测</a>
								</li>
							</ul>
						</div>
						<div class="spgs-analysis-bd">
							<div class="noRecord" id="noRecordDiv" style="display:none;">
					            <img src="#{request.contextPath}/asset/images/spgs/warn.png" alt=""/>
					            <p style="line-height:40px;">该地块没有安装智能传感设备，暂无数据！</p>
					        </div>
							<div id="chart-container0" style="min-width:400px;height:400px"></div>
						</div>

					</div>
				<!-- 大棚实际情况右侧 结束 -->
				</td>
			</tr>
			<tr>
				<td class="spgs-td-left bg-line">
					<img src="#{request.contextPath}/asset/images/spgs/SPGS_img13.png" />
				</td>
				<td class="spgs-td-right">
                <!-- 视频追溯右侧 开始 -->                 	
					<div class="video-dating-wap" style="margin-top:60px;margin:0 auto;">
                    	<div id="player">                           
                            <div class="video" id="HLSPlayer">
                            <s:fragment rendered="#{spgsHome.realPlant.videoUrl eq null}">
                            	<img src="#{request.contextPath}/asset/images/spgs/novideo-pic.jpg" />
                            </s:fragment>
                            <s:fragment rendered="#{spgsHome.realPlant.videoUrl ne null}">
	                            <script type="text/javascript">
	                            var vID        = ""; 
	                            var vWidth     = "100%";                //播放器宽度设置
	                            var vHeight    = "100%";                   //播放器宽度设置
	                            var vPlayer    = "#{request.contextPath}/document/player.swf"; //播放器文件
	                            var vHLSset    = "#{request.contextPath}/document/HLS.swf";            //HLS配置
	                            var vPic       = "#{request.contextPath}/asset/images/iphone/videosImg.jpg";
	                            var vCssurl    = "#{request.contextPath}/asset/css/mini.css";     //移动端CSS应用文件
	                            
	                            var  vHLSurl    = "#{spgsHome.realPlant.videoUrl}";//#{request.contextPath}/spgs/playlist.m3u8
	                            //-->				                                
	                            </script> 
	                            <script type="text/javascript" src="#{request.contextPath}/asset/js/hls.min.js"></script>
                            </s:fragment>
                            </div>
                        </div>
					</div>
					
				<!-- 视频追溯右侧 结束 -->
                </td>
			</tr>
			<tr>
				<td class="spgs-td-left health-tdleft">
					<img src="#{request.contextPath}/asset/images/spgs/SPGS_icon_jkzs.png" />
				</td>
				<td class="spgs-td-right">
                <!--  健康指数右侧 开始 -->
                	<div class="exponent-box">
						<div id="healthchart-container" style="min-width:400px;height:400px"></div>
						<div id="healthchart-bottom"><img src="#{request.contextPath}/asset/images/spgs/health_numer.jpg"></img></div>
						<div class="noRecord" id="noHealthchartDiv" style="display:none;">
				            <img src="#{request.contextPath}/asset/images/spgs/warn.png" alt=""/>
				            <p style="line-height:40px;">该地块没有安装智能传感设备，暂无数据！</p>
				        </div>
							
                		<div class="exponent-instro border-bt">
                			<h3 class="ex-title ex-title-green">Consumer : <span class="cor-green">什么是健康指数</span></h3>
                			<strong class="ex-strong">Expert : </strong>
                			<p class="ptext">把现金的数字传感器设备安置于大棚中，实时、连续采集植物生长期间的<span class="cor-blue">空气温湿度、土壤温湿度、光照强度、二氧化碳浓度</span>等参数，系统将采集到的数据汇总到专家系统上，与符合该菜品适宜生长标准模型进行对比，再结合环境健康指数模型的计算，得到“<span class="cor-blue">环境健康指数</span>”。</p>
                			<dl class="exfx-dl">
                				<dd>
                					<p>
                						<img src="#{request.contextPath}/asset/images/spgs/SPGS_icon_kqwsd.jpg"></img>
                						空气温湿度
                					</p>
                					<p>
                						<img src="#{request.contextPath}/asset/images/spgs/SPGS_icon_trwsd.jpg"></img>
                						空气温湿度
                					</p>
                					<p>
                						<img src="#{request.contextPath}/asset/images/spgs/SPGS_icon_gzqd.jpg"></img>
                						空气温湿度
                					</p>
                					<p>
                						<img src="#{request.contextPath}/asset/images/spgs/SPGS_icon_eyhtnd.jpg"></img>
                						空气温湿度
                					</p>
                				</dd>
                				<dt>
                					<img src="#{request.contextPath}/asset/images/spgs/SPGS_banner260.jpg"></img>
                				</dt>
                			</dl>
                		</div>
                		<div class="exponent-instro">
                			<h3 class="ex-title ex-title-blue">Consumer : <span class="cor-blue">健康指数的意义是什么</span></h3>
                			<strong class="ex-strong">Expert : </strong>
                			<div class="exgl-table">
                				<div class="td-left">
                					<img src="#{request.contextPath}/asset/images/spgs/newSpgs_img1.jpg"></img>
                				</div>
                				<div class="td-right">
                					<p class="ptext"><span class="cor-blue">环境的管理</span>与<span class="cor-blue">蔬菜的品质和安全</span>息息相关，为保证蔬果达到品质要求，所采取的水、肥、药的使用及时对环境控制的管理行为，是蔬果质量的核心评价因素。</p>
                				</div>
                			</div>
                			<div class="exfz-table">
                				<div class="td-left">
                					<p class="ptext"><span class="cor-blue">环健康指数分值</span>较高说明温室环境管控得很好，有利于蔬果健康生长，是<span class="cor-blue">农场实力</span>的象征。因此健康指数的计算可以督促农场的种植管理水平在公开、透明的监督下不断提高，让消费者对购入的每一粒米、每一份菜都吃的放心！</p>
                				</div>
                				<div class="td-right">
                					<img src="#{request.contextPath}/asset/images/spgs/newSpgs_img2.jpg"></img>
                				</div>
                			</div>
                		</div>
                	</div>
                <!--  健康指数右侧 结束 -->
                </td>
			</tr>
		</table>
	</div>
    <div class="SPGS-footer-wap clear" style="display:none;">
    	<dl class="SPGS-footer">
        	<dt class="SPGS-footer-lt"><img src="#{request.contextPath}/asset/images/spgs/SPGS_logo2.jpg" /></dt>
            <dd class="SPGS-footer-rt">
            	<div>
                	<p class="copyright-txt">
                    	<span>版权所有：京合农品运营服务管理中心</span>
                        <span>运行支持：北京首农商业连锁有限公司</span><br/>
                        <span>技术支持：北京农学院 北京澳客没技术服务有限公司</span>
                        <span>京ICP备13010716号 京公网安备11010502026854</span>
                    </p>
                </div>
            </dd>
        </dl>
    </div>
</div>
<!-- 环境因子分步 内容开始 -->
    <div class="modal fade" id="myModal1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog" style="width:920px; margin-top:100px;">
        <div class="modal-content">
          <div class="modal-header" style="border:0;">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">x</span><span class="sr-only">Close</span></button>
          </div>
          <div class="modal-body" style="padding: 0 45px; height: 440px; overflow: auto;">
            <div class="paragraph1">
                <div class="paraBox clear">
                    <div class="paraLeft fl">
                        <h4 class="title">Consumer : <span>什么是环境因子</span></h4>
                        <h4 class="title" style="background:none;">Expert : </h4>  
                        <div class="marble clear">
                            <ul>
                                <li><img src="#{request.contextPath}/asset/images/spgs/marble2.jpg" alt=""/></li>
                                <li><img src="#{request.contextPath}/asset/images/spgs/marble3.jpg" alt=""/></li>
                                <li><img src="#{request.contextPath}/asset/images/spgs/marble4.jpg" alt=""/></li>
                            </ul>
                        </div>
                        <p style="padding-left:30px;">环境因子的内容涉及<span style="color:#4e96e0;">土壤、水、大气</span>等各种环境因素</p>    
                    </div>
                    <div class="paraRight fl">
                        <img src="#{request.contextPath}/asset/images/spgs/marble1.jpg" alt=""/>
                    </div>
                </div>
                <div class="paraBox clear">
                    <div class="fl" style="padding: 15px 30px; width:320px;">
                        <img src="#{request.contextPath}/asset/images/spgs/marble5.jpg" alt=""/>
                    </div>
                    <div class="fl" style="padding-top: 40px; width:455px; line-height:30px;">
                        对于农作物环境管理我们可以人为控制大棚内农作物生长环境，将大棚内部的<span style="color:#4e96e0;">土壤、空气温湿度、光照</span>等环境使其更有利于农作物生长，<span style="color:#1cae2f;">抑制病虫害</span>的发生，从而减少化学农药等投入。
                    </div>
                </div>
            </div>
            <div class="paragraph2">
                <div class="paraLeft fl">
                    <h4 class="title">Consumer : <span>为什么要展示病虫害发病率</span></h4>
                    <h4 class="title" style="background:none;">Expert : </h4>  
                    <p style="padding-left:30px; padding-top:5px; line-height:30px;">
                    病虫害发病率是指通过对<span style="color:#4e96e0;">菜品生长环境</span>数据的检测和采集，并与病虫害适宜发生的环境情况进行分析比较，根据影响因子之间的相互关系对菜品的发病情况进行预测，并通过<span style="color:#1cae2f;">发病概率</span>的方式进行预测。通过发病率可以直观反映农作物被施用农药的概率，使消费者足不出户就可以监督农场的<span style="color:#4e96e0;">管理现状</span>和种植过程的<span style="color:#4e96e0;">规范安全性</span>，从而形成消费者和农场之间的良性循环、彼此信任的智能化参与式保障体系。
                </p>
                </div>
                <div class="paraRight fl" style="padding:15px;">
                    <img src="#{request.contextPath}/asset/images/spgs/marble6.jpg" alt=""/>
                </div>               
            </div>
            <div class="paragraph3">
                <div class="paraBox1 clear">
                    <div class="paraLeft fl">
                        <h4 class="title">Consumer : <span>病虫害发病率是如何计算出来的？</span></h4>
                        <h4 class="title" style="background:none;">Expert : </h4>  
                        <p style="padding-left:30px; padding-top:5px; line-height:30px;"><span style="color:#4e96e0;">空气温度、空气湿度</span>是影响作物生长的重要因素，几乎决定了病虫害发病的机率。</p>   
                    </div>
                    <div class="paraRight fl">
                        <ul>
                            <li>
                                <img src="#{request.contextPath}/asset/images/spgs/marble7.jpg" alt=""/>
                                <p style="font-size:14px;">空气温度</p>
                                <p style="color:#4e96e0; font-size:20px;">25<span>℃</span></p>
                            </li>
                            <li>
                                <img src="#{request.contextPath}/asset/images/spgs/marble8.jpg" alt=""/>
                                <p style="font-size:14px;">空气湿度</p>
                                <p style="color:#4e96e0; font-size:20px;">52<span>%</span></p>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="paraBox2 clear">
                    <div class="fl" style="padding-left:30px; width:405px;">
                        <img src="#{request.contextPath}/asset/images/spgs/marble9.jpg" alt=""/>
                    </div>
                    <div class="fl" style="width:370px; padding-top:65px; line-height:30px;">
                        <p>我们运用<span style="color:#4e96e0;">物联网</span>技术，通过<span style="color:#4e96e0;">智能传感设备</span>采集农作物环境生长状况的真实环境数据，结合病害发展模型计算出来的对环境发生大规模病害的可能性的估计。</p>
                    </div>
                </div>
                <div class="paraBox3 clear">
                    <div class="fl" style="padding:40px 30px 0; width:520px; line-height:30px;">
                        <p>对于某个蔬果品种，在其生长过程中，当环境危险度大于等于<span style="color:#1cae2f;">50%</span>时，表示该种植环境中大规模的病害发生的可能性大，进而推测出在此情况下该蔬果品种使用农药的可能性较大。</p>
                    </div>
                    <div class="fl" style="width:200px;">
                        <img src="#{request.contextPath}/asset/images/spgs/marble10.jpg" alt=""/>
                    </div>
                </div>
            </div>
          </div>
          <div class="modal-footer" style="border:0;"></div>
        </div>
      </div>
    </div>
    <!-- 模态框 内容结束 -->
    <!-- 健康指数 -->
    <div class="modal fade" id="myModal3" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog" style="width:920px; margin-top:100px;">
        <div class="modal-content">
          <div class="modal-header" style="border:0;">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">x</span><span class="sr-only">Close</span></button>
          </div>
          <div class="modal-body" style="padding: 0 45px; height: 440px; overflow: auto;">
            <div class="paragraph1">
                <div class="paraBox1 clear">
                    <h4 class="title">Consumer : <span>什么是健康指数</span></h4>
                    <h4 class="title" style="background:none;">Expert : </h4>   
                    <p style="padding-left:30px; line-height:30px; margin-top:10px;">把先进的数字传感器设备安置于大棚中，实时、连续采集植物生长期间的<span style="color:#4e96e0;">空气温湿度、土壤温湿度、光照强度、二氧化碳浓度</span>等参数，系统将采集到的数据汇总到专家系统上，与符合该菜品适宜生长标准模型进行对比，再结合环境健康指数模型的计算，得到“<span style="color:#4e96e0;">环境健康指数</span>”。</p>                       
                </div>
                <div class="paraBox2 clear">
                   <ul>
                       <li><img src="#{request.contextPath}/asset/images/spgs/health1.jpg" alt=""/><p>空气温湿度</p></li>
                       <li><img src="#{request.contextPath}/asset/images/spgs/health2.jpg" alt=""/><p>土壤温湿度</p></li>
                       <li><img src="#{request.contextPath}/asset/images/spgs/health3.jpg" alt=""/><p>光照强度</p></li>
                       <li><img src="#{request.contextPath}/asset/images/spgs/health4.jpg" alt=""/><p>二氧化碳浓度</p></li>
                   </ul>
                   <span class="fl" style="margin-left:20px;"><img src="#{request.contextPath}/asset/images/spgs/health5.jpg" alt=""/></span>
                   
                </div>
            </div>
            <div class="paragraph2">               
                    <h4 class="title">Consumer : <span>健康指数的意义是什么</span></h4>
                    <h4 class="title" style="background:none;">Expert : </h4> 
                    <div class="pareBox clear">
                        <ul>
                            <li><img src="#{request.contextPath}/asset/images/spgs/health6.jpg" alt=""/></li>
                            <li><img src="#{request.contextPath}/asset/images/spgs/health7.jpg" alt=""/></li>
                            <li><img src="#{request.contextPath}/asset/images/spgs/health8.jpg" alt=""/></li>
                        </ul>  
                        <p class="fl" style="width:540px; line-height:30px; margin-left:30px;"><span style="color:#4e96e0;">环境的管理</span>与<span style="color:#4e96e0;">蔬菜的品质和安全</span>息息相关，为保证蔬果达到品质要求，所采取的<span class="color:#22ac38;">水、肥、药</span>的使用及对<span class="color:#22ac38;">环境控制的管理</span> 行为，是蔬果质量的核心评价因素。</p>  
                    </div>  
                    <div class="pareBox clear"> 
                        <p class="fl" style="width:496px; line-height:30px; margin-left:30px; margin-top:50px;">
                            <span style="color:#4e96e0;">环健康指数分值</span>较高说明温室环境管控得很好，有利于蔬果健康生长，是<span style="color:#4e96e0;">农场实力</span>的象征。因此健康指数的计算可以督促农场的种植管理水平在公开、透明的监督下不断提高，让消费者对购入的每一粒米、每一份菜都吃的放心！
                        </p>
                        <span style="margin-left:55px;"><img src="#{request.contextPath}/asset/images/spgs/health9.jpg" alt=""/></span>
                    </div>             
            </div>  
            
          </div>
          <div class="modal-footer" style="border:0;"></div>
        </div>
      </div>
    </div>
    <!-- 健康指数结束 -->
    <!-- 成熟度开始 -->
    <div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog" style="width:920px; margin-top:100px;">
        <div class="modal-content">
          <div class="modal-header" style="border:0;">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">x</span><span class="sr-only">Close</span></button>
          </div>
          <div class="modal-body" style="padding: 0 45px; height: 440px; overflow: auto;">
            <div class="paragraph1">
                    <h4 class="title">Consumer : <span>什么是成熟度</span></h4>
                    <h4 class="title" style="background:none;">Expert : </h4>
                    <span class="fl" style="width:260px; padding:20px;"><img src="#{request.contextPath}/asset/images/spgs/ripe1.jpg" alt=""/></span>   
                    <p class="fl" style="padding-left:30px; line-height:30px; margin-top:50px; width:510px;">自然成熟度是指作物在未添加任何外源催熟剂的情况下自然生长所达到的成熟程度。农业专家根据作物积温模型计算出标准成熟度，当积温累积值达到标准成熟度后，即说明该作物是自然成熟的，使用催熟剂等化学药品的机率较低。</p>                           
            </div>
            <div class="paragraph2">               
                    <h4 class="title">Consumer : <span>自然成熟度是如何计算出来的</span></h4>
                    <h4 class="title" style="background:none;">Expert : </h4> 
                    <div class="pareBox clear">
                        <span class="fl" style="width:370px; padding-left:40px; margin-top:10px;"><img src="#{request.contextPath}/asset/images/spgs/ripe2.jpg" alt=""/></span>
                        <p class="fl" style="line-height:30px; width: 400px; padding-left: 30px; padding-top: 35px;color: #42a21c;">自然成熟的蔬果，色泽好，口感佳，那么怎么判定蔬果是自然成熟的？</p>
                    </div>  
                    <div class="pareBox clear"> 
                        <p class="fl" style="line-height:30px; width:400px; padding-left:30px; padding-top:20px;">
                            自然成熟的蔬果，色泽好，口感佳，那么怎么判定蔬果是自然成熟的？有一个重要参数叫积温。积温对果实品质有明显影响，可以使蔬果的品质、含糖量、糖酸比得到提升，我们从作物定植开始，通过智能传感设备采集的空气温度，计算出在自然状态下每日的有效积温，再对整个生长周期进行累积计算从而推断菜品的成熟程度。
                        </p>
                        <ul style="float: left; width: 300px; margin-left: 60px; margin-top: 30px;">
                            <li><img src="#{request.contextPath}/asset/images/spgs/ripe3.jpg" alt=""/><p>含糖量</p></li>
                            <li><img src="#{request.contextPath}/asset/images/spgs/ripe4.jpg" alt=""/><p>糖酸比</p></li>
                        </ul>
                    </div>             
            </div>  
            
          </div>
          <div class="modal-footer" style="border:0;"></div>
        </div>
      </div>
    </div>
    <!-- 成熟度结束 -->
<script type="text/javascript" src="#{request.contextPath}/asset/js/highcharts/highcharts.js"></script>
<script src="http://ditu.google.cn/maps/api/js?v=3.25&amp;key=AIzaSyB2mG9FLX3dYDFycXGkmidn-OZU-FL1rLM&amp;sensor=false&amp;libraries=drawing"></script>
<script type="text/javascript">
//<![CDATA[
jquery = jQuery.noConflict();

var data='#{spgsHome.result}';
var pestsFlag=#{spgsHome.pestsFlag};
var csdycFlag=#{spgsHome.csdycFlag};
var seriesHealthFlag=#{spgsHome.seriesHealthFlag};
var workpath = "#{request.contextPath}";
data = eval("("+data+")");
function changeChartTab(index){
	if(data != ""){				
		jquery("#noRecordDiv").hide();	
		jquery("#chart-container0").show();			
		if(index==0 && pestsFlag){
			pestsChart();
		}else if(index==1 && csdycFlag){
			csdycChart();
		}else{
			//jquery("#chart-container0").html("");			
        	jquery("#noRecordDiv").show();
        	jquery("#chart-container0").hide();
		}
	}
	//jquery("#chart-container"+index).show();
	//jquery("#chart-container"+index).siblings().hide();
}

var oDomHei = jquery(window).height();
var oDomWid = jquery(window).width();
var oBodyWid = jquery('body').width();
var oDomMinhei = 600;
var oMapHei = parseInt(jquery('#map-canvas').width()*0.4);
jquery('#map-canvas').css({'height':oMapHei});	//计算地图高度是宽度的1/4
jquery('#chart-container0').css({'height':oMapHei});

jquery(function(){	
	if(seriesHealthFlag){
		healthChart();
	}else{
		jquery("#noHealthchartDiv").show();
    	jquery("#healthchart-container").hide();
    	jquery("#healthchart-bottom").hide();
	} 
	if(#{spgsHome.valueAdded.spgsInterface}==-1){
		var oMaturityW = jquery('.maturity_block').width();
		var oMaturityH = jquery('.maturity_block').height();
		jquery('.maturity_block').css({  //计算到期提示框垂直居中
			'margin-left' : -(oMaturityW/2),
			'margin-top'  : -(oMaturityH/2)
		});	
		jquery('.maturity_block span').eq(1).text('尚未开通')
		jquery('.maturity_block').show();
		jquery('.black_op50').show();
	}
	if(#{spgsHome.valueAdded.spgsInterface}==0){
		var oMaturityW = jquery('.maturity_block').width();
		var oMaturityH = jquery('.maturity_block').height();
		jquery('.maturity_block').css({  //计算到期提示框垂直居中
			'margin-left' : -(oMaturityW/2),
			'margin-top'  : -(oMaturityH/2)
		});	
		jquery('.maturity_block span').eq(1).text('已经过期')
		jquery('.maturity_block').show();
		jquery('.black_op50').show();
}
	if(#{spgsHome.valueAdded.spgsInterface}==2){
		var oMaturityW = jquery('.maturity_block').width();
		var oMaturityH = jquery('.maturity_block').height();
		jquery('.maturity_block').css({  //计算到期提示框垂直居中
			'margin-left' : -(oMaturityW/2),
			'margin-top'  : -(oMaturityH/2)
		});	
		jquery('.maturity_block span').eq(1).text('尚未使用')
		jquery('.maturity_block').show();
		jquery('.black_op50').show();
}
	
	var baseId='#{spgsHome.base.id}';
	var coordinateX='#{spgsHome.base.coordinateX}';
	var coordinateY='#{spgsHome.base.coordinateY}';
	var domainUrl='#{dataDicConstant.getDomainNameUrl()}';
	jquery("#map-canvas").attr("src",workpath+"/spgs/map_z/index.html?baseId="+baseId+"&coordinateX="+coordinateX+"&coordinateY="+coordinateY+"&domainUrl="+domainUrl);
	//jquery("#map-canvas").attr("src","http://192.168.21.46:8888/?baseId="+baseId+"&coordinateX="+coordinateX+"&coordinateY="+coordinateY);
	jquery('.spgs-analysis-hd .itmes').each(function(index, elem) {
		jquery(elem).click(function(event) {
			jquery(elem).addClass('cur');
			jquery(elem).siblings().removeClass('cur');
			jquery('.expert-say p').eq(index).show().siblings().hide();
			changeChartTab(index);
		});
			
	});
	changeChartTab(0);
	getFocusMapFn();
	getHeight();
	CMswitch('.focusmap-wap .items-list','.focusmap-wap .items');	
	
	jquery(window).resize(function() {
		jquery('.focusmap-wap .items-list').css('left','0');
		getFocusMapFn();
		CMswitch('.focusmap-wap .items-list','.focusmap-wap .items');
		getHeight();	
	});	
	function getFocusMapFn(){  //焦点图宽高计算的函数
		var focusmapCon = jquery('body').width()-jquery('.spgs-td-left').width()-100;
		jquery('.focusmap-con').css({'width':focusmapCon,'height':Math.ceil(focusmapCon*0.25)}); //li 外层的宽高
		jquery('.focusmap-wap .items-list .items').css({'width':Math.ceil(focusmapCon*0.333)});  //li宽
		jquery('.focusmap-wap .focusmap-hd').css({'height':Math.ceil(jquery('.focusmap-con').height()-58)});  //li里面上层的宽高
		jquery('.focusmap-wap .focusmap-btns').css({'height':Math.ceil(jquery('.focusmap-con').height()-58)});  //按钮的高度
	}
	function CMswitch(obj,items){  
		jquery(obj).css({
			'width' : jquery(items).width()*jquery(items).length
		});
		var focusNum = 0;
		var focusLen = jquery(items).length;
		var Lening = focusLen-3;
		var focusWid = jquery(items).width();

		if(Lening<=0){
			jquery('.focus-btnlt').html("<span></span>");
			jquery('.focus-btnrt').html("<span></span>");
			jquery('.focusmap-wap .focus-btnlt').click(function(){
				focusNum = 0;	
				jquery(obj).css({"left":-focusWid*focusNum});				
			});	
			jquery('.focusmap-wap .focus-btnrt').click(function(){
				focusNum = 0;	
				jquery(obj).css({"left":-focusWid*focusNum});				
			});		
		}else{
			jquery('.focusmap-wap .focus-btnlt').click(function(){
				focusNum--;
				if(focusNum<=0){ 
					jquery('.focus-btnlt').html("<span></span>");
					jquery('.focus-btnrt').html("<a href='javascript:;'></a>");
				}else{
					jquery('.focus-btnlt').html("<a href='javascript:;'></a>");
					jquery('.focus-btnrt').html("<a href='javascript:;'></a>");
				}
				if(focusNum<0){ 
					focusNum=0;
				}
				jquery(obj).css({"left":-focusWid*focusNum});
			});	
			jquery('.focusmap-wap .focus-btnrt').click(function(){
				focusNum++;	
				if(focusNum>=Lening){ 
					jquery('.focus-btnrt').html("<span></span>");
					jquery('.focus-btnlt').html("<a href='javascript:;'></a>");
				}else{
					jquery('.focus-btnlt').html("<a href='javascript:;'></a>");
					jquery('.focus-btnrt').html("<a href='javascript:;'></a>");
				}
				if(focusNum>Lening){ 
					focusNum=Lening;
				}
				jquery(obj).css({"left":-focusWid*focusNum});
			});	
		}	
	}
	
	function getHeight(){  //地图及视频宽高计算的函数
		var oDomHei = jquery(window).height();
		var oDomWid = jquery(window).width();
		var oBodyWid = jquery('body').width();
		var oDomMinhei = 600;
		var oMapHei = parseInt(jquery('#map-canvas').width()*0.4);
		jquery('#map-canvas').css({'height':oMapHei});	//计算地图高度是宽度的1/4
		jquery('#chart-container0').css({'height':oMapHei});
		//jquery('#HLSPlayer').css({'height':parseInt(oBodyWid*0.3),'width':oBodyWid*0.6,'min-width':'200px'});
		
		IsPC();
		function IsPC() {
		    var userAgentInfo = navigator.userAgent;
		    var Agents = ["Android", "iPhone",
		                "SymbianOS", "Windows Phone",
		                "iPad", "iPod"];
		    var flag = true;
		    for (var v = 0; v < Agents.length; v++) {
		        if (userAgentInfo.indexOf(Agents[v]) > 0) {
		        	jquery('#HLSPlayer').css({'height':'200px','width':'400px','min-width':'200px'});
		            flag = false;
		            break;
		        }
			    jquery('#HLSPlayer').css({'height':parseInt(oBodyWid*0.3),'width':oBodyWid*0.6});
		    }
		    
		    return flag;
		}
		//initialize();
	}


	
	/**
	function initialize() {  //谷歌地图控件
	  var myLatLng = new google.maps.LatLng(62.323907, -150.109291);
	  var mapOptions = {
		zoom: 11,
		center: myLatLng,
		mapTypeId: google.maps.MapTypeId.SATELLITE
	  };
	  var map = new google.maps.Map(document.getElementById('map-canvas'),mapOptions);
	}
	google.maps.event.addDomListener(window, 'load', initialize);   
	*/
})

var healthExp = ''; 
function pestsChart(){ 		
	 //病虫害
	jquery('#chart-container0').highcharts({
    	chart: {
            type: 'spline'
        },
        title: {
            text: ''
        },
        subtitle: {
            text: ''
        },
        credits: {
            enabled: false
        },
        exporting: {
            enabled: false
        },
        xAxis: {
            min: 0,
            max: 100,
            title: {
                text: ''
            },
            labels: {
                formatter: function() {
                    return this.value +'%';
                }
            }
        },
        yAxis: {
            min: -20,
            max: 80, 
            tickInterval: 20,
            title: {
                text: ''
            },
            labels: {
                formatter: function() {
                    return this.value + '°C';
                }
            }
        },
        lang: {
            noData: "暂无数据!"
        },noData: {
            style: {    
                fontWeight: 'bold',     
                fontSize: '15px', 
                color: '#FFFFFF'        
            }
        },
        legend: {
            enabled: true,
            layout: 'horizontal',
            align: 'center',
            verticalAlign: 'bottom'
        }, 
        tooltip: {
        	formatter: function () {
                 return '<b>' + this.point.time +'</b><br/>'+ this.series.name + '<br/>' +
                 this.y+'°C/' + this.x+'%';
            }
        },
		plotOptions: {
            spline:{
                lineWidth: 1.5,
                marker: { enabled: false },
                enableMouseTracking: false
            }
            
        },
        series: data.pestsAlert,
        exporting: {
            enabled: false
        },
        credits:{ 
            enabled:false // 禁用版权信息
        },
        colors: "#32c3fd,#ffb577,#ff85a2,#8085e9,#f15c80,#e4d354,#8085e8,#8d4653,#91e8e1".split(",")
    });	
}
function csdycChart(){
	//成熟度
	jquery('#chart-container0').highcharts({
        chart: {
            zoomType: 'xy'
        },
        title: {
            text: '' 
        },
        subtitle: {
            text: ''
        },
        plotOptions: {
        	column: {
        		pointWidth:20 
	        }
        }, 
        xAxis: [{
        	min: 0,
        	tickInterval: data.csdyc.tickInterval,
            categories: data.csdyc.categories 
        }],
        yAxis: [{ // Primary yAxis
        	plotLines: data.csdyc.plotLines,  
	        min: 0,
	        tickPositions: data.csdyc.tickPositions,  
            labels: {
            	 formatter: function() {
	                 return this.value + '°C';
	             }
            },
            title: {
                text: '',
                style: {
                    color: '#89A54E'
                }
            }
        }],
        tooltip: {
            shared: true,
            backgroundColor:'#000000',
            style: {    
                fontWeight: 'bold',     
                fontSize: '12px', 
                color: '#FFFFFF'        
            }
        },
        lang: {
            noData: "暂无数据!"
        },noData: {
            style: {    
                fontWeight: 'bold',     
                fontSize: '15px', 
                color: '#FFFFFF'        
            }
        },
        legend: {
            layout: '',
            align: '',
            x: 50,
            verticalAlign: '',
            y: 30,
            floating: true,
            backgroundColor: 'rgba(255,255,255,0)',
			itemStyle: {
                color: "#fff",
                fontSize: "12px",
                fontWeight: "normal"
            }
        },
        series:data.csdyc.series, 
        exporting: {
            enabled: false
        },
        credits:{
            enabled:false // 禁用版权信息
        },
        colors: "#f00,#90ed7d,#ffb577,#ff85a2,#8085e9,#f15c80,#e4d354,#8085e8,#8d4653,#91e8e1".split(",")
    }); 
}
function healthChart(){
	if(typeof(data.pgwi) != 'undefined' && typeof(data.pgwi.seriesHealthExp) != 'undefined'){
		//环境指数
		jquery('#healthchart-container').highcharts({
	        chart: {
	            zoomType: 'xy'
	        },
	        title: {
	            text: '' 
	        },
	        subtitle: {
	            text: ''
	        },
	        xAxis: [{
	        	min: 0,
	        	tickInterval: data.pgwi.tickInterval[0],
	            categories: data.pgwi.healthExpDateList 
	        }],
	        yAxis: { // Primary yAxis
	        	min: 0,
		        max: 100, 
		        tickInterval: 20,
	            title: {
	                text: '',
	                style: {
	                    color: '#89A54E'
	                }
	            }
	        },
	        tooltip: {
	            shared: true,
	            backgroundColor:'#000000',
	            style: {    
	                fontWeight: 'bold',     
	                fontSize: '12px', 
	                color: '#FFFFFF'        
	            }
	        },
	        lang: {
	            noData: "暂无数据!"
	        },noData: {
	            style: {    
	                fontWeight: 'bold',     
	                fontSize: '15px', 
	                color: '#FFFFFF'        
	            }
	        },
	        legend: {
	            layout: '',
	            align: '',
	            x: 50,
	            verticalAlign: 'top',
	            y: 0,
	            floating: false,
	            backgroundColor: 'rgba(255,255,255,0)',
				itemStyle: {
	                color: "#333",
	                fontSize: "12px",
	                fontWeight: "normal"
	            }
	        },
	        series:data.pgwi.seriesHealthExp,  
	        exporting: {
	            enabled: false
	        },
	        credits:{
		            enabled:false // 禁用版权信息
		    },
		    colors: "#90ed7d,#ffb577,#ff85a2,#8085e9,#f15c80,#e4d354,#8085e8,#8d4653,#91e8e1".split(",")
	    }); 
	}
}

//]]>	
</script>

</body>

</f:view>
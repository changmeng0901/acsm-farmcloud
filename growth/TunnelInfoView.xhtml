<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:a="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich" 
    template="../layout/template_new_tunnel.xhtml">
 
<ui:define name="body" >  
<td>
	<link type="text/css" rel="stylesheet"  href="#{request.contextPath}/asset/monitoring/css/growth.css"/>
	<link type="text/css" rel="stylesheet"  href="#{request.contextPath}/asset/monitoring/css/demo.css"/>
	<link type="text/css" rel="stylesheet"  href="#{request.contextPath}/asset/monitoring/css/zTreeStyle.css"/>
	<link type="text/css" rel="stylesheet" href="#{request.contextPath}/asset/monitoring/css/jquery-picklist.css"  />
	<link href="#{request.contextPath}/asset/css/phone/swiper-3.4.0.min.css" rel="stylesheet" type="text/css"/>
	<link href="#{request.contextPath}/asset/css/phone/jquery-ui.css" rel="stylesheet" type="text/css"/>
	<link href="#{request.contextPath}/asset/css/phone/video-js.css" rel="stylesheet" type="text/css"/>
	<script src="#{request.contextPath}/asset/monitoring/js/jquery.ztree.core-3.5.min.js" />
	<script src="#{request.contextPath}/asset/monitoring/js/jquery.ztree.excheck-3.5.min.js" />
	<script src="#{request.contextPath}/asset/monitoring/js/jquery.ztree.exedit-3.5.min.js" />
	<script src="#{request.contextPath}/asset/monitoring/js/jquery.ztree.exhide-3.5.min.js" />
	<script type="text/javascript" src="#{request.contextPath}/asset/monitoring/js/ScrollText.js"/>
	<script type="text/javascript" src="#{request.contextPath}/asset/js/highcharts/highcharts.js"></script>
	<script type="text/javascript" src="#{request.contextPath}/asset/monitoring/js/monitor_theme.js"></script>
	<script type="text/javascript" src="#{request.contextPath}/asset/js/jquery.ui.widget.mouse.slider.js"></script>
	<script type="text/javascript" src="#{request.contextPath}/asset/monitoring/js/jquery-picklist-HighTunnelEnv.js"></script> 
	<script type="text/javascript" src="#{request.contextPath}/asset/js/icheck.js"></script> 
	<script type="text/javascript" src="#{request.contextPath}/asset/js/common-acsm.js"/> 
	<script type="text/javascript" src="#{request.contextPath}/growth/hls.min.js"></script>
	<script type="text/javascript" src="#{request.contextPath}/asset/js/map/JsMap.js"> </script> 
	
	<script type="text/javascript" src="/asset/js/phone/exponent/swiper-3.4.0.min.js"></script>
	<script type="text/javascript" src="/asset/js/phone/jquery-ui.js"></script>
	<!--[if lt IE 9]>
	<script type="text/javascript" src="/asset/js/phone/monitor/videojs-ie8.js"></script>
	<![endif]-->
	<script type="text/javascript" src="/asset/js/phone/monitor/video.js"></script>
	<script type="text/javascript" src="/asset/js/phone/monitor/videojs-contrib-hls.js"></script>
	<script type="text/javascript" src="/asset/js/phone/monitor/m3u8-parser.js"></script>
	
	<script type="text/javascript" >
	var domain = "http://192.168.21.103:8080";
	</script>
	<style>
	div#menu li{z-index:9;}
	html{height:100%;
	overflow-x:hidden;}
	.videobox2{width:100%; min-height:600px; background:url(../asset/images/growth/zwleft_04.png) repeat; padding-top:150px;}
		.r_title {
			margin-top:0;
		    padding-top: 22px; 
		}
		.TestingTab .nav > li > a {
		    background: url("#{request.contextPath}/asset/images/bg_baojing01.png") repeat scroll 0 0 rgba(0, 0, 0, 0);
		    border-radius: 0;
		    color: #fff;
		    font-size: 14px;
		    height: 30px;
		    line-height: 30px;
		    padding: 0 20px;
		}
        .header_wp01{ position: relative;}
		.TestingTab .nav-tabs > li > a {
		    border-width: 0;
		}
		.usingCheckWp { 
		    line-height: 22px;
		}
		.pickList_list {
		    height: 130px;
		}
		
		.tdRt .pickList_list{ padding:5px 0; border:1px solid #96a1b4;}
		.tdRt .pickList_listItem{ line-height: 20px; text-indent :10px;}
		.tdRt .pickList_controlsContainer button{ background:#15233b; border:1px solid #4e6491; border-radius:4px;}
		.tdRt .pickList_controlsContainer{ margin-top:30px;}
		
		.modal-body{ padding:15px 0;}
		.modalH3{ padding-left:10;}
		.box_back{background:url(../asset/images/bg_png3.png) repeat; position:absolute; z-index:98; display:none;}
		.modal-open {
  overflow: visible;
}

.btns-control-ct{ position:absolute; left:50%; top:7px; width:269px; height:60px; margin-left:-135px; background:url(../asset/images/video_playbg.png);}
		.resize-control{ position:absolute; left:25px; top:25px; z-index:2; width:221px; height:12px;}
		.resize-smaller{ float:left; width:49px; height:12px; background:url(../asset/images/video_smallerBtn2.png); cursor:pointer;}
		.resize-bigger{ float:right; width:49px; height:12px; background:url(../asset/images/video_biggerBtn2.png); cursor:pointer;}
		.resize-smaller.cur{ background:url(../asset/images/video_nosmallerBtn2.png);}
		.resize-bigger.cur{ background:url(../asset/images/video_nobiggerBtn2.png);}
		.direction-control{ position:absolute; left:111px; top:7px; z-index:3; width:47px; height:47px;}
		.direction-control span{ position:absolute; cursor:pointer;}
		.direction-control .play-top{ left:17px; top:-3px; width:12px; height:7px; background:url(../asset/images/video_playtt.png);}
		.direction-control .play-right{ right:-2px; top:18px; width:7px; height:12px; background:url(../asset/images/video_playrt.png);}
		.direction-control .play-bottom{ left:18px; bottom:-2px; width:12px; height:7px; background:url(../asset/images/video_playbt.png);}
		.direction-control .play-left{ left:-2px; top:18px; width:7px; height:12px; background:url(../asset/images/video_playLt.png);}
		.direction-control .play-top.cur{ background:url(../asset/images/video_noplaytt.png);}
		.direction-control .play-right.cur{ background:url(../asset/images/video_noplayrt.png);}
		.direction-control .play-bottom.cur{ background:url(../asset/images/video_noplaybt.png);}
		.direction-control .play-left.cur{ background:url(../asset/images/video_noplayLt.png);}
		.play-control{ position:absolute; left:128px; top:22px; z-index:4; width:16px; height:14px; background:url(../asset/images/video_play.png) no-repeat; cursor:pointer;}
		.play-control span{ position:absolute; z-index:5px; display:none; width:16px; height:16px; background:url(../asset/images/video_noplay.png) no-repeat;}
		/* 小视频按钮样式 */
		.small-video-control{ position:relative; z-index:5; width:410px; height:74px; margin:50px auto;}
		.small-btns-control-ct{ position:absolute; left:50%; top:7px; width:269px; height:60px; margin-left:-135px; background:url(../asset/images/video_playbg2.png);}
		.operation-control{ border:1px solid #96a1b4;}
.operation-control-lt{ padding-right:378px;}
.operation-control-rt{ float:right; width:378px; padding:20px 10px; border-left:1px solid #96a1b4; box-sizing:border-box;}
.tab-control-title{ position:relative; height:24px; line-height:24px; margin-top:10px;}
.v-leftbtn{ position:absolute; left:0; top:2px; display:none; width:15px; height:15px; background:#f1f1f1;}
.v-rightbtn{ position:absolute; right:0; top:2px; display:none; width:15px; height:15px; background:#f1f1f1;}
.v-centercont{ position:relative; margin:0;}
.v-centerScroll{ position:absolute; left:0;}
.v-centerScroll li{ float:left; height:20px; line-height:20px; border-right:1px solid #8798b1; padding:0 15px;}
.v-centerScroll li:last-child{ border-right:0;}
.v-centerScroll li a{ font-size:16px; color:#fefefe;}
.v-centerScroll li.cur a{ color:#1acaf6;}
.tab-control-content{ clear:both; margin-top:24px; }
.v-tab-content{ width:100%; height:100%; display:none; border:1px solid #96a1b4; border-radius:5px; background:rgba(241,238,238,0.1);}
.v-tab-content.cur-block{ display:block;}
.control-dripIrrigation,
.control-shutter,
.control-led{ padding:20px; color:#fff;}
.led-screen-title{ height:48px; line-height:48px; padding-bottom:10px; background:url(../asset/images/control_bg1.png) repeat-x left bottom; font-size:26px; font-family:'黑体'; color:#28ccdf;}
.led-screen-title img{ float:left; width:25px; height:25px; margin:10px 15px 0;}
.led-screen-lt{ float:left; width:140px;}
.led-screen-rt{ float:left; width:170px;}
.led-screen-lt{ background:url(../asset/images/control_bg2.png) repeat-y right top;}
.led-screen-rt .updateTime{ margin-top:4px; padding-left:65px; font-size:16px;}
.led-screen-rt .updateTime span{ display:block; line-height:20px;}
.unusual{}
/* 通用的仿表格的列表 */
.mt30{ margin-top:30px;}
.imitate-table{ overflow:hidden;}
.imitate-table li{ height:34px; padding-bottom:20px;}
.imitate-table input.form-control{ background:none; color:#fff;}
.imitate-table-td1{ float:left; width:72px; line-height:32px; padding-right:15px; font-size:14px; text-align:right;}
.imitate-table-td2{ float:left; width:110px; line-height:32px; padding-right:15px; font-size:14px; text-align:right;}
.imitate-table-td3{ float:left; width:72px; line-height:32px; padding-right:15px; font-size:14px;}
.closeDg-btn, .openDg-btn{ margin:0; cursor:pointer;}
.tapDg-ico{ position:relative; display:block; width:100%; height:34px;}
.tapDg-closeSign{ position:absolute; left:22px; top:0;}
.tapDg-openSign{ position:absolute; left:35px; top:0; display:none;}
		/* 卷帘状态 */
.shutter-status{}
.shutter-status .strong{ display:block; margin:25px 0; font-size:14px; font-weight:normal; text-indent:15px; color:#fff;}
.shutter-status .cur-picnum{ display:none;}
.shutter-status .ui-widget-header{ background:#f0f2f4;}
.shutter-status .ui-widget-content{ width:300px; margin:0 auto; height:4px; border:0; border-radius:2px; background:#0accfd;}
.shutter-status .ui-state-default, 
.shutter-status .ui-widget-content .ui-state-default, 
.shutter-status .ui-widget-header .ui-state-default{ top:-14px; width:64px; height:43px; margin-left:-32px; border:0; background:url(../asset/images/control_ico6.png) no-repeat;}
.shutter-status .control-jlstates{ width:300px; height:50px; margin:0 auto; background:url(../asset/images/control_bg4.png) no-repeat;}
/* LED文字设置 */
.led-settext .strong{ display:block; margin:25px 0; font-size:14px; font-weight:normal; color:#fff;}
.led-settext .form-control{ box-sizing:border-box; height:82px; resize:none; background:rgba(255,255,255,0);}
.led-settext .btn{ margin-top:20px; background:#4170bc;}
/* 农场大棚及LED显示屏 */
.farmShed-wap{ position:relative; width:100%;}
.farmShed-con{ position:relative; margin:80px 20px 20px;}
.control_shedimg{}
.control_water{ position:absolute; left:0; top:0; z-index:2; display:none;}
.control_rolle{ position:absolute; left:0; top:0; z-index:3; display:none;}
.farm-LedMonitor{ position:absolute; top:-2px; right:60px; width:246px; height:96px; background:url(../asset/images/control_bg5.png) no-repeat; font-size:14px; font-family:"宋体"; font-weight:bold;color:#fe2c26;}
.LedMonitor-hd{ display:block; width:234px; line-height:25px; margin:40px 0 0 5px; text-align:center; letter-spacing:2px; }
.LedMonitor-bd{ width:234px; height:20px; line-height:20px; margin:0 0 0 5px; overflow:hidden;}
#LedMonitor-txt{ width:520px;}
#LedMonitor-txt div{ float:left; width:260px;}
		.ui-slider {
	position: relative;
	text-align: left;
}
.ui-slider .ui-slider-handle {
	position: absolute;
	z-index: 2;
	width: 1.2em;
	height: 1.2em;
	cursor: default;
	-ms-touch-action: none;
	touch-action: none;
}
.ui-slider .ui-slider-range {
	position: absolute;
	z-index: 1;
	font-size: .7em;
	display: block;
	border: 0;
	background-position: 0 0;
}

/* support: IE8 - See #6727 */
.ui-slider.ui-state-disabled .ui-slider-handle,
.ui-slider.ui-state-disabled .ui-slider-range {
	filter: inherit;
}

.ui-slider-horizontal {
	height: .8em;
}
.ui-slider-horizontal .ui-slider-handle {
	top: -.3em;
	margin-left: -.6em;
}
.ui-slider-horizontal .ui-slider-range {
	top: 0;
	height: 100%;
}
.ui-slider-horizontal .ui-slider-range-min {
	left: 0;
}
.ui-slider-horizontal .ui-slider-range-max {
	right: 0;
}
.ui-slider-vertical {
	width: .8em;
	height: 100px;
}
.ui-slider-vertical .ui-slider-handle {
	left: -.3em;
	margin-left: 0;
	margin-bottom: -.6em;
}
.ui-slider-vertical .ui-slider-range {
	left: 0;
	width: 100%;
}
.ui-slider-vertical .ui-slider-range-min {
	bottom: 0;
}
.ui-slider-vertical .ui-slider-range-max {
	top: 0;
}

div#menu .siteSeleBd ul,div#menu .helpSeleBd ul{ border-radius:8px 8px 0 0;}



/*监控悬浮框*/
.input-group-btn > .btn:hover, .input-group-btn > .btn:focus, .input-group-btn > .btn:active{
outline:none;
box-shadow:inherit;
}
.videoimg{
	position:inhert;
	box-sizing:border-box;
	width:100%;
	height:100%;
	padding:0;
	}
.videoimg img{
	width:100%;
	height:100%;
	}
.clear{
	clear:both;
	}
.clear:before,
.clear:after{
	display:block;
	content:"";
	height:0;
	visibility:visible;
	clear:both;
	}
ol,ul{
	margin:0;
	padding:0;
	}
.monitor_suspend{
	position:absolute-;
	position:relative;
	z-index:2;
	width:412px;
	height:312px;
	}
.tab_header{
	height:28px;
	}
.tab_header .titem{
	display:inline-block;
	width:132px;
	height:28px;
	vertical-align:top;
	cursor:pointer;
	margin-right:-40px;
	}
.tab_header titem.dq_cur{
	position:relative;
	z-index:1;
	}
.tab_header .input-group{
	width:100%;
	height:100%;
	}
.tab_header .input-group .btn{
	position:relative;
	display:block;
	margin:0;
	padding:0;
	width:132px;
	height:24px;
	border:0;
	box-sizing:border-box;
	background:none;
	font-size:14px;
	color:#fff;
	}
.tab_header .input-group .caret{
	position:absolute;
	left:78px;
	top:11px;
	}
.tab_header .input-group .dropdown-toggle img{
	width:20px;
	height:20px;
	vertical-align:middle;
	margin-top:-2px;
	margin-right:5px;
	}
.tab_header .input-group .dropdown-menu{
	width:110px;
	margin-left:-5px;
	margin-top:6px-;
	margin-bottom:8px;
	padding-left:5px;
	padding-right:5px;
	box-sizing:border-box;
	box-shadow:none !important;
	border:0;
	border-color:#6c9ad1;
	border-radius:0;
	background-color:#6c9ad1;
	overflow:hidden;
	}
.tab_header .input-group-btn{
	position:relative;
	width:inherit;
	}
.tab_header .input-group-btn.open .i_arrow{
	position:absolute;
	left:20px;
	bottom:24px;
	width:0;
	height:0;
	content:"";
	border-width:6px 6px 6px 6px;
	border-style: solid solid solid solid;
	border-color: #6c9ad1 transparent transparent transparent;
	}
.tab_header .dropdown-menu > li.l_line{
	border-bottom:1px solid #5574a8;
	}
.tab_header .dropdown-menu > li.dq_cur{
	background-color:#78aee6;
	}
.tab_header .dropdown-menu > li > a{
	padding-top:3px;
	padding-bottom:3px;
	font-size:14px;
	color:#fff;
	}
.tab_header .dropdown-menu > li > a img{
	width:20px;
	height:20px;
	margin-right:6px;
	margin-left:0px;
	}
.tab_header .dropdown-menu > li > a:hover{
	background:none;
	}
.tab_header .sp_hjsk{
	position:relative;
	z-index:0;
	}
.tab_header .sp_skzb{
	background:url(#{request.contextPath}/asset/images/growth/environMonitor_bg1-2.png) no-repeat;
	}
.tab_header .sp_hjsk{
	background:url(#{request.contextPath}/asset/images/growth/environMonitor_bg2-2.png) no-repeat;
	}
.tab_header .sp_spzs{
	background:url(#{request.contextPath}/asset/images/growth/environMonitor_bg3-2.png) no-repeat;
	}
.tab_header .sp_skzb.dq_cur{
	background:url(#{request.contextPath}/asset/images/growth/environMonitor_bg1-1.png) no-repeat;
	}
.tab_header .sp_hjsk.dq_cur{
	background:url(#{request.contextPath}/asset/images/growth/environMonitor_bg2-1.png) no-repeat;
	}
.tab_header .sp_spzs.dq_cur{
	background:url(#{request.contextPath}/asset/images/growth/environMonitor_bg3-1.png) no-repeat;
	}
.tab_header .dq_cur{	
	position:relative;
	z-index:1;
	}
.tab_content{
	width:400px;
	height:280px;
	padding:8px 10px;
	border:1px solid #819cb9;
	box-sizing:border-box;
	}
.tab_content .m_panel{
	display:none;
	}
.tab_content .m_panel.dq_cur{
	display:block;
	}
.live_broadcast .broadcast_block,
.video_back .video_block{
	width:378px;
	height:260px;
	}
.tab_content .panel_video,
.tab_content .video_back{
	position:relative;
	width:378px;
	height:260px;
	background-color:#000;
	}
.tab_content .panel_video .video,
.tab_content .panel_video .video-js,
.tab_content .video_back .video,
.tab_content .video_back .video-js{
	width:100%;
	height:100%;
	background-color:#000;
	}

.live_broadcast_list,
.live_broadcast_list2{
	position:relative;
	z-index:0;
	width:378px;
	height:260px;
	overflow:hidden;
	}
.panel_videoJK .btn_prev,
.panel_videoKZ .btn_prev,
.panel_videoJK .btn_next,
.panel_videoKZ .btn_next{
	position:absolute;
	top:50%;
	z-index:3;
	width:30px;
	height:30px;
	margin-top:-15px;
	cursor:pointer;
	}
.panel_videoJK .btn_prev,
.panel_videoKZ .btn_prev{
	left:-41px;
	background: url(#{request.contextPath}/asset/images/growth/figure_biglt.png) no-repeat center center;
	}
.panel_videoJK .btn_next,
.panel_videoKZ .btn_next{
	right:-41px;
	background:url(#{request.contextPath}/asset/images/growth/figure_bigrt.png) no-repeat center center;
	}
.live_broadcast_list .live_ol,
.live_broadcast_list2 .live_ol2{
	position:absolute;
	left:0;
	top:0;
	z-index:0;
	}
.live_broadcast_list .live_li,
.live_broadcast_list2 .live_li{
	float:left;
	width:378px;
	height:260px;
	}
.live_broadcast_list .Download,
.live_broadcast_list2 .Download{
	position:absolute;
	right:14px;
	bottom:14px;
	z-index:10;
	width:30px;
	height:30px;
	background:url(/asset/images/growth/Enver_changebtnW.png);
	}
.live_broadcast_list .Download:hover,
.live_broadcast_list2 .Download:hover{
	background:url(/asset/images/growth/Enver_changebtnB.png);
	}
.live_broadcast_list .Download i,
.live_broadcast_list2 .Download i{display:none-;}
.live_broadcast_list .Download:hover i,
.live_broadcast_list2 .Download:hover i{
	display:block;
	position:absolute;
	right:-14px;
	z-index:10;
	bottom:32px;
	width:57px;
	height:32px;
	background:url(/asset/images/growth/Enver_changetip.png);
}
.monitor_suspend,
.cropGrowthImg{
	z-index:0;
	}
.shikuang_btn,
.shikuangs_btn{
	position:relative;
	width:100%;
	height:100%;
	}
.shikuang_btn .icon_shi{
	display:none;
}
.shikuangs_btn .icon_shi{
	position:absolute;
	left:70px;
	top:4px;
	width:20px;
	height:20px;
	background:url(#{request.contextPath}/asset/images/growth/circle_bofang.png) no-repeat center center;
	cursor:pointer;
	}
.shikuang_btn{
	background:url(#{request.contextPath}/asset/images/growth/environMonitor_bg1-2.png) no-repeat center center;
	}
.shikuangs_btn{
	background:url(#{request.contextPath}/asset/images/growth/environMonitor_bg1-4.png) no-repeat center center;
	}
.tab_header .sp_skzb.dq_cur .shikuang_btn{
	background:url(#{request.contextPath}/asset/images/growth/environMonitor_bg1-1.png) no-repeat center center;
	}
.tab_header .sp_skzb.dq_cur .shikuangs_btn{
	background:url(#{request.contextPath}/asset/images/growth/environMonitor_bg1-3.png) no-repeat center center;
	}
/*生长图片焦点图*/
.growth_figure{
	width:378px;
	}
.figure_header{
	position:relative;
	width:378px;
	height:200px;
	overflow:hidden;
	}
.figure_header .btnb_prev,
.figure_header .btnb_next{
	position:absolute;
	top:50%;
	z-index:1;
	width:30px;
	height:30px;
	margin-top:-15px;
	cursor:pointer;
	}
.figure_header .btnb_prev{
	left:15px;
	background:url(#{request.contextPath}/asset/images/growth/figure_biglt.png) no-repeat center center;
	}
.figure_header .btnb_next{
	right:15px;
	background:url(#{request.contextPath}/asset/images/growth/figure_bigrt.png) no-repeat center center;
	}
.biger_figure{
	position:absolute;
	height:260px;
	}
.biger_figure li{
	float:left;
	width:378px;
	height:200px;
	}
.biger_figure li img{
	width:100%;
	height:100%;
	}
.biger_figure img{
	width:100%;
	height:100%;
	}
.figure_footer{
	width:100%;
	margin-top:7px;
	}
.figure_footer .btns_prev,
.figure_footer .btns_next{
	width:16px;
	height:54px;
	cursor:pointer;
	}
.figure_footer .btns_prev{
	float:left;
	background:#333 url(#{request.contextPath}/asset/images/growth/figure_smalllt.png) no-repeat center center;
	}
.figure_footer .btns_next{
	float:right;
	background:#333 url(#{request.contextPath}/asset/images/growth/figure_smallrt.png) no-repeat center center;
	}
.figure_footer .btns_prev:hover,
.figure_footer .btns_next:hover{
	background-color:#2b2b2b;
	}
.small_figure_block{
	position:relative;
	float:left;
	width:330px;
	height:54px;
	margin-left:14px;
	overflow:hidden;
	}
.small_figure{
	position:absolute;
	left:0;
	top:0;
	min-width:300px;
	}
.small_figure li{
	float:left;
	width:58px;
	height:54px;
	margin-right:8px;
	box-sizing:border-box;
	}
.small_figure li.dq_cur{
	border:2px solid #ffae00;
	}
.small_figure li img{
	width:100%;
	height:100%;
	}


/*小屏环境监控样式*/
.small_monitor.monitor_suspend{
	width:326px;
	height:252px;
	}
.small_monitor .tab_content{
	width:326px;
	height:220px;
	padding:5px;
	}
.small_monitor .live_broadcast .broadcast_block, 
.small_monitor .video_back .video_block{
	width:314px;
	height:208px;
	}
.small_monitor .growth_figure{
	width:314px;
	}
.small_monitor .figure_header{
	width:314px;
	height:154px;
	}
.small_monitor .biger_figure{
	height:154px;
	}
.small_monitor .biger_figure li{
	width:314px;
	height:154px;
	}
.small_monitor .small_figure_block{
	width:270px;
	height:46px;
	margin-left:10px;
	}
.small_monitor .figure_footer .btns_prev,
.small_monitor .figure_footer .btns_next{
	height:46px;
	background-color:#4e84aa;
	}
.small_monitor .figure_footer .btns_prev:hover,
.small_monitor .figure_footer .btns_next:hover{
	background-color:#74c5e2;
	}
.small_monitor .small_monitor .small_figure_block{
	margin-left:12px;
	}
.small_monitor .small_figure li{
	width:46px;
	height:46px;
	margin-right:8px;
	}
.small_monitor .live_broadcast .broadcast_block,
.small_monitor .video_back .video_block{
	width:314px;
	height:208px;
	}
.small_monitor .tab_content .panel_video,
.small_monitor .tab_content .video_back{
	width:314px;
	height:208px;
	}
.small_monitor .live_broadcast_list,
.small_monitor .live_broadcast_list2{
	width:314px;
	height:208px;
	}
.small_monitor .live_broadcast_list .live_li,
.small_monitor .live_broadcast_list2 .live_li{
	width:314px;
	height:208px;
	}
.small_monitor .panel_videoJK .btn_prev,
.small_monitor .panel_videoKZ .btn_prev{
	left:-36px;
	}
.small_monitor .panel_videoJK .btn_next,
.small_monitor .panel_videoKZ .btn_next{
	right:-36px;
	}
.small_monitor{}
.rightBtn{width: 121px; height: 34px; border-radius: 4px; overflow: hidden; float: right; border: 1px solid #ccc; margin-top: 5px;}
.rightBtn .list{width: 64px; height: 34px; cursor: pointer; line-height: 34px; background: #428bca; font-size: 12px; color: #fff; text-align: center; border: 1px solid #357ebd; box-sizing:border-box; border-radius: 0 4px 6px 0;}
.rightBtn .detail{width: 55px; height: 34px; cursor: pointer; line-height: 34px; color: #8f8f8f; text-align: center; box-sizing:border-box; border-left: 0;}


a:focus {
	    outline:none;
	    -moz-outline:none;
	} 
	html{ height:100%;}
	h1, h2, h3, h4, h5, h6, ul, li, dl, dt, dd, form, img, p,input {
	    border: medium none;
	    list-style-type: none;
	    margin: 0;
	    padding: 0;
	}
	a{text-decoration:none;}
	.photo_box2{ width:650px; }
	.photo_box2 li{ float:left; width:135px; height:128px;margin-right:5px;  margin-top: 10px}
	.photo_box2 li img{width:128px;height:128px;border:1px solid #d1d1d1;}
	.photo001{ position:absolute; z-index:2;}
	.dkzzedit007{width:130px;height:21px; z-index:3; display:none;  top: -128px;position:relative; }
	.photo001 .dkzzedit007 img{z-index:4;float:right;;position:relative; border:none;width:27px; height:23px; }
	.div1{float: left;height: 144px;width: 128px;position:relative;}
	.div2{text-align:center;font-size:15px;font-weight:800}
	.logoUrl{ width: 144px;height: 144px;cursor: pointer; font-size: 30px;outline: medium none;position: absolute;filter:alpha(opacity=0); -moz-opacity:0;opacity:0; left:0px;top: 0px;}
	.plant_bd{width:128px;height:128px; display:block;}
	.down_chajian{position: absolute; left: 10px;bottom:10px;z-index:9;color:#fff}
	</style>
	<link href="#{request.contextPath}/asset/css/growth/reset.css" rel="stylesheet" type="text/css" />
	<link href="#{request.contextPath}/asset/css/growth/warning.css" rel="stylesheet" type="text/css" />
	<a:status id="ajaxStatus" forceId="true"  onstart="jQuery('#login').css('z-index',200);jQuery('#login').show()" onstop="jQuery('#login').hide()" />
		#{monitoringHome.homePagesInit()}
		<div class="zuowbg" style="#{sessionTake.tunnelZtreeResultJson ne '[]'?'display:none':''}">
					<div class="videobox2">
						<table class="nonesb" cellpadding="0" cellspacing="0" style="margin:auto;">
							<tr>
								<td width="194" height="229" valign="top"><img
									src="#{request.contextPath}/asset/images/growth/none_img.png"
									width="194" height="229" /></td>
								<td valign="top" style="padding-left: 20px;">
									<div style="margin: 30px 0 20px 0;">
										<img
											src="#{request.contextPath}/asset/images/growth/nodevice.png"
											width="275" height="61" />
									</div>
									<div
										style="font-family: 微软雅黑; height: 30px; line-height: 30px; font-size: 18px; color: #fff;">
										您查看的<font color="#2caadf">#{cropGrowthHome.tunnelInfo.tunnelName}</font>没有安装传感器和监控设备
									</div>
									<div
										style="font-family: 微软雅黑; height: 30px; line-height: 30px; font-size: 18px; color: #fff;">
										如需安装请联系北京奥科美技术服务有限公司<b>400-8199-586</b>
									</div>
								</td>
							</tr>
						</table>
					</div>
					<div class="clear"></div>
				</div>
			<div class="foldBtn" style="border-left:0;#{sessionTake.tunnelZtreeResultJson eq '[]'?'display:none':''}"><img src="#{request.contextPath}/asset/images/foldBtn.png"/></div>
			<!-- 主体内容 开始 -->
			
			<div class="main_wp clear"  style="#{sessionTake.tunnelZtreeResultJson eq '[]'?'display:none':''}">
			<table width="100%" cellpadding="0" cellspacing="0">
				<tr>
			    	<td width="216"  class="fixedTd" valign="top" style="/*border-right:1px solid #ddd; background:#fff;*/">
			        <!-- 主体内容 左侧开始 -->
			        <div class="mainLt_wp" style="width:216px;">
			            <div class="leftMainBd mt8" style="overflow:hidden;">
			            	<ul id="treeDemo" class="ztree" style="overflow:auto;width:216px"></ul>
			            </div> 
			        </div>
			        <!-- 主体内容 左侧结束 -->
			        </td>
			        <td valign="top" class="fixedTdRt" style="overflow:hidden;">
			        	<!-- 天气预报 -->
			        	<div id="weatherContent" style="display: none; background:url('#{request.contextPath}/asset/images/weather/bg_qizBig.jpg') no-repeat fixed left bottom #1542a7"> 
			        		<iframe id="weatherContentIframe" src=""  frameborder="0"  scrolling="no"  onLoad="iFrameHeight();" width="100%" height="100%-" style="background:none;" allowtransparency="true">
			        		</iframe>   
			        	</div>
			        	<!-- 天气预报 -->
			        	
			        	<!-- 报警设置 -->
			        	<div id="alarmContent" style="display: none;background:url(#{request.contextPath}/asset/images/bg_jiankong.jpg) no-repeat left top fixed;">
							<div class="warning">	
								<s:div id="alarmInfoRepeat">
								<div class="subtitle">
							    	<p><strong>修改温室报警设置</strong><span>#{monitoringHome.tunnelName}</span></p>
							    </div>
							    <h:outputText rendered="#{monitoringHome.alarmTunnelInfos.size() gt 0}">
							    <div class="setting">
							    	<div class="tip clearfix">
							        	<div class="tip-content">
							            	<p><span></span>启用该设置后，环境参数达到报警线时会给注册手机与抄送人栏中的手机号码发送短信，信息内容可根据报警内容自定义。</p>
							            </div>
							            <a href="javascript:void(0);" class="add" onclick="addjk();">添加</a>
							        </div>
							        <div class="set-list">
							        	<ul class="clearfix">
							        		<a:repeat value="#{monitoringHome.alarmTunnelInfos}" var="_alarm" rowKeyVar="_index">
							            	<li class="clearfix #{_index % 2 eq 0 ?'':'mr'} ">
							                	<div class="icon">
							                		<h:outputText value="" rendered="#{_alarm.alarmType eq 1}">
							                        <img class="img" src="#{request.contextPath}/asset/images/alarm/ico_jiankongKqwd.png"/>
							                        </h:outputText>
							                        <h:outputText value="" rendered="#{_alarm.alarmType eq 2}">
							                        <img class="img" src="#{request.contextPath}/asset/images/alarm/ico_jiankongKqsd.png"/>
							                        </h:outputText>
							                        <h:outputText value="" rendered="#{_alarm.alarmType eq 3}">
							                        <img class="img" src="#{request.contextPath}/asset/images/alarm/ico_jiankongTrwd.png"/>
							                        </h:outputText>
							                        <h:outputText value="" rendered="#{_alarm.alarmType eq 4}">
							                        <img class="img" src="#{request.contextPath}/asset/images/alarm/ico_jiankongTrsf.png"/>
							                        </h:outputText>
							                        <h:outputText value="" rendered="#{_alarm.alarmType eq 5}">
							                        <img class="img" src="#{request.contextPath}/asset/images/alarm/ico_jiankongEyht.png"/>
							                        </h:outputText>
							                        <h:outputText value="" rendered="#{_alarm.alarmType eq 6}">
							                        <img class="img" src="#{request.contextPath}/asset/images/alarm/ico_jiankongGz.png"/>
							                        </h:outputText>
							                        <h:outputText value="" rendered="#{_alarm.alarmType eq 7}">
							                        <img class="img" src="#{request.contextPath}/asset/images/alarm/ico_phmg.png"/>
							                        </h:outputText>
							                        <h:outputText value="" rendered="#{_alarm.alarmType eq 8}">
							                        <img class="img" src="#{request.contextPath}/asset/images/alarm/ico_ecImg.png"/>
							                        </h:outputText>
							                    </div>
							                    <div class="module-des">
							                    	<p>
							                    	<h:outputText value="" rendered="#{_alarm.alarmType eq 1}"><!-- 空气温度 -->
							                        #{_alarm.alarmLimit}°C
							                        </h:outputText>
							                        <h:outputText value="" rendered="#{_alarm.alarmType eq 2}"><!-- 空气湿度 -->
							                        #{_alarm.alarmLimit}%
							                        </h:outputText>
							                        <h:outputText value="" rendered="#{_alarm.alarmType eq 3}"><!-- 土壤温度 -->
							                        #{_alarm.alarmLimit}°C
							                        </h:outputText>
							                        <h:outputText value="" rendered="#{_alarm.alarmType eq 4}"><!-- 土壤湿度 -->
							                        #{_alarm.alarmLimit}%
							                        </h:outputText>
							                        <h:outputText value="" rendered="#{_alarm.alarmType eq 5}"><!-- 二氧化碳 -->
							                        #{_alarm.alarmLimit}ppm
							                        </h:outputText>
							                        <h:outputText value="" rendered="#{_alarm.alarmType eq 6}"><!-- 光照 -->
							                        #{_alarm.alarmLimit}lux
							                        </h:outputText>
							                        <h:outputText value="" rendered="#{_alarm.alarmType eq 7}"><!-- 土壤PH值 -->
							                        #{_alarm.alarmLimit}
							                        </h:outputText>
							                        <h:outputText value="" rendered="#{_alarm.alarmType eq 8}"><!-- 土壤EC值 -->
							                        #{_alarm.alarmLimit}ms/cm
							                        </h:outputText>
							                    	</p>
							                        <span>
							                        <h:outputText rendered="#{_alarm.alarmType eq 1}">空气温度</h:outputText>
							                        <h:outputText rendered="#{_alarm.alarmType eq 2}">空气湿度 </h:outputText>
							                        <h:outputText rendered="#{_alarm.alarmType eq 3}">土壤温度 </h:outputText>
							                        <h:outputText rendered="#{_alarm.alarmType eq 4}">土壤湿度 </h:outputText>
							                        <h:outputText rendered="#{_alarm.alarmType eq 5}">二氧化碳 </h:outputText>
							                        <h:outputText rendered="#{_alarm.alarmType eq 6}">光照 </h:outputText>
							                        <h:outputText rendered="#{_alarm.alarmType eq 7}">土壤PH值 </h:outputText>
							                        <h:outputText rendered="#{_alarm.alarmType eq 8}">土壤EC值 </h:outputText>
													、
													<h:outputText rendered="#{(_alarm.alarmType eq 1 or _alarm.alarmType eq 3) and _alarm.alarmGenre eq 1}">高温 </h:outputText>
													<h:outputText rendered="#{(_alarm.alarmType eq 2 or _alarm.alarmType eq 4) and _alarm.alarmGenre eq 1}">高湿 </h:outputText>
													<h:outputText rendered="#{(_alarm.alarmType eq 5 or _alarm.alarmType eq 6 or _alarm.alarmType eq 7 or _alarm.alarmType eq 8) and _alarm.alarmGenre eq 1}">上限 </h:outputText>
													<h:outputText rendered="#{(_alarm.alarmType eq 1 or _alarm.alarmType eq 3) and _alarm.alarmGenre eq 2}">低温 </h:outputText>
													<h:outputText rendered="#{(_alarm.alarmType eq 2 or _alarm.alarmType eq 4) and _alarm.alarmGenre eq 2}">低湿 </h:outputText>
													<h:outputText rendered="#{(_alarm.alarmType eq 5 or _alarm.alarmType eq 6 or _alarm.alarmType eq 7 or _alarm.alarmType eq 8) and _alarm.alarmGenre eq 2}">下限 </h:outputText>
							                        </span>
							                    </div>
							                    <div id="type_#{_alarm.alarmTunnelId}" class="turn #{_alarm.available?'':'turn-off'}" style="cursor: pointer;" onclick="changeAlarmType(#{_alarm.alarmTunnelId});">
							                    	<div class="turn-btn"></div>
							                    </div>
							                    <div class="edit clearfix" style="width: 61px; padding: 0px;">
							                    	<img class="img" name="pencil" src="#{request.contextPath}/asset/images/alarm/edit.png" style="cursor: pointer;" onclick="selectjk(#{_alarm.alarmTunnelId},#{monitoringHome.pageNum});"/>
							                        <img class="img" name="fork" src="#{request.contextPath}/asset/images/alarm/edit_close.png" style="cursor: pointer;" onclick="deleteAlarmInfo(#{_alarm.alarmTunnelId});"/>
							                    </div>
							                </li>
							                </a:repeat>
							            </ul>
							        </div>
							        <input type="hidden" id="pageNum" value="#{monitoringHome.pageNum}"/>
							        <div class="pages clearfix" style="width: 439px;">
							        	<ul class="clearfix">
							        		<h:outputText rendered="#{monitoringHome.previousExists}">
					                            <li class="first-page" style="cursor: pointer;" onclick="pagechange(1);">首页</li>
					                            <li class="first-page" style="cursor: pointer;" onclick="pagechange(#{monitoringHome.pageNum - 1});">&lt;</li>
					                        </h:outputText>
							            	<a:repeat var="_page" value="#{monitoringHome.pageList}" rowKeyVar="_index">
												<li class="count-page #{_page eq monitoringHome.pageNum?'cur':''}" style="cursor: pointer;" onclick="pagechange(#{_page});">#{_page}</li>
											</a:repeat>
											<h:outputText rendered="#{monitoringHome.nextExists}">
												<li class="next-page" style="cursor: pointer;" onclick="pagechange(#{monitoringHome.pageNum + 1});">&gt;</li>
								                <li class="last-page" style="cursor: pointer;" onclick="pagechange(#{monitoringHome.PAGE_COUNT});">尾页</li>
											</h:outputText>
							                <li class="totle-page" style="border-right:none;">共#{monitoringHome.PAGE_COUNT}页
							                <h:inputHidden id="pageMax"  value="#{monitoringHome.PAGE_COUNT}" />
							                </li>
							            </ul>
							            <span style="cursor: pointer;" onclick="toBack();">返回</span>
							        </div>
							    </div>
							    </h:outputText>
							    <!--无报警信息-->
							    <h:outputText rendered="#{monitoringHome.alarmTunnelInfos.size() le 0}">
							    <div class="no-warning" >
							    	<img class="img" src="#{request.contextPath}/asset/images/alarm/no-warning.png" />
							        <h4>暂无报警信息</h4>
							        <p>设置报警信息可以帮助您实时掌握环境实况及时调控作物生长环境</p>
							        <button type="button" class="btn btn-primary" onclick="addjk();">点击此处设置报警信息</button>
							    </div>
							    </h:outputText>
							    </s:div>
							    <!--编辑框-->
							    <s:div id="alarmInfoAddDiv">
							    <div class="edit-box" id="warning">
							    	<div class="edit-mask"></div>
							        <div class="edit-con">
							        	<div class="edit-title">
							            	<p>添加报警</p>
							                <a href="javascript:;" class="close-btn"></a>
							            </div>
							            <a:form id="addAlarmTunnelInfo">
							            <h:inputHidden id="alarmTunnelIdHidden" value="#{monitoringHome.alarmTunnelInfo.alarmTunnelId}"/>
							            <h:inputHidden id="insertTimeHidden" value="#{monitoringHome.alarmTunnelInfo.insertTime}"/>
							            <h:inputHidden id="insertUserHidden" value="#{monitoringHome.alarmTunnelInfo.insertUser}"/>
							            <h:inputHidden id="partitionsNameHidden" value="#{monitoringHome.alarmTunnelInfo.partitionsName}"/>
							            <h:inputHidden id="tunnelNameHidden" value="#{monitoringHome.alarmTunnelInfo.tunnelName}"/>
							            <h:inputHidden id="tunnelInfoIdHidden" value="#{monitoringHome.tunnelInfoId}"/>
							            <h:inputHidden id="enterpriseInfoIdHidden" value="#{monitoringHome.alarmTunnelInfo.enterpriseInfoId}"/>
							            <div class="edit-list clearfix">
							            	<div class="check-lind fl mr">
							                	<p>检测种类#{monitoringHome.alarmTunnelInfo.alarmTunnelId}</p>
							                	<h:inputHidden id="alarmTypeHidden" value="#{monitoringHome.alarmTunnelInfo.alarmType}"/>
							                    <select id="alarmType" class="selectpicker" onchange="changeType();">
							                        <option value="1">空气温度</option>
							                        <option value="2">空气湿度</option>
							                        <option value="3">土壤温度</option>
							                        <option value="4">土壤湿度</option>
							                        <option value="5">二氧化碳</option>
							                        <option value="6">光照</option>
							                        <option value="7">土壤PH值</option>
							                        <option value="8">土壤EC值</option>
							                    </select>
							                </div>
							            	<div class="check-lind fr">
							                	<p>检测类型</p>
							                	<h:inputHidden id="alarmGenreHidden" value="#{monitoringHome.alarmTunnelInfo.alarmGenre}"/>
							                    <select id="alarmGenre" style="display:block;" class="selectpicker">
							                        <option value="1">高温</option>
							                        <option value="2">低温</option>
							                    </select>
							                </div>
							                <div class="check-lind fl mr">
							                	<p>报警界限</p>
							                	<h:inputText id="alarmLimit" type="text" styleClass="form-control nw300" style="width:144px;" value="#{monitoringHome.alarmTunnelInfo.alarmLimit}"/>
							                    <span id="alarmUnit">℃</span>
							                </div>
							            	<div class="check-lind fr">
							                	<p>报警内容</p>
							                	<h:inputText id="alarmDetails" type="text" styleClass="form-control nw300" value="#{monitoringHome.alarmTunnelInfo.alarmDetails}"/>
							                </div>
											<div class="check-lind fl">
							                	<p>接收时间</p>
							                    <div class="input-append date form_datetime " >
							                    	<h:inputText id="alarmBeginTime" size="26" type="text" value="#{monitoringHome.alarmTunnelInfo.alarmBeginTime}" style="border-width: 0px;" readonly="readonly"/>
							                        <span class="add-on"><i class="icon-th"></i></span>
							                    </div>
							                    <span style="width:18px; height:1px; border-bottom:1px solid #ccc; display:inline-block; margin:0 10px; vertical-align:super;"></span>
							                    <div class="input-append date form_datetime " >
							                    	<h:inputText id="alarmEndTime" size="26" type="text" value="#{monitoringHome.alarmTunnelInfo.alarmEndTime}" style="border-width: 0px;" readonly="readonly"/>
							                        <span class="add-on"><i class="icon-th"></i></span>
							                    </div>
							                </div>
							                <div class="check-lind hei-line fl">
							                	<p>抄送人<font style="opacity:0; filter:alpha(opacity:0);">人</font></p>
							                	<h:inputTextarea id="alamNotifyPeople" styleClass="textarea" rows="3" value="#{monitoringHome.alarmTunnelInfo.alamNotifyPeople}" />
							                    <span>请输入接收人的手机号码，多个号码用逗号隔开。</span>
							                </div>
							                <div class="check-lind fl" style="margin-bottom:16px;">
							                	<p>启用<font style="opacity:0; filter:alpha(opacity:0);">启用</font></p>
							                	<h:inputHidden id="availableHidden" value="#{monitoringHome.alarmTunnelInfo.available}"/>
							                    <div class="on-off #{monitoringHome.alarmTunnelInfo.available ? '':'off'}">
							                    	<div class="on-off-btn"></div>
							                    </div>
							                </div>
							            </div>
							            <div class="btns clearfix">
							                <button type="button" class="btn btn-primary fl" onclick="checkSubmit();">提交</button>
							                <button type="button" class="btn btn-default fr" onclick="fanhui();">返回</button>
							            </div>
							            </a:form>
							        </div>
							    </div>
							    </s:div>
							</div>
			        	</div>
			        	<!-- 报警设置 -->
			        	<!-- 大棚信息 -->
				        	<s:div id="rightContent" > 
				        		 <!-- 主体内容 右侧整体板块 开始 --> 
				        		 <input type="hidden" value="#{monitoringHome.tunnelTypeName}" id="tunnelTypeNameHidden"/>
				        		 <input type="hidden" value="#{monitoringHome.videoBackImg}" id="videoBackImgHidden"/>
				        		 
						        <div class="mainRtWapDiv">
						        	<div class="r_title clear">
						                <div class="r_titleLt fl clear">
						                    <h2 class="fl">环境监测</h2>
						                </div>
						               <div class="rightBtn">
											<span class="detail fl"><a href="/growth/TunnelInfoList.seam" style="color: #fff;"><img src="#{request.contextPath}/asset/images/growth/icon_list.png" style="margin-right: 5px;"/>列表</a></span> 
											<span class="list fl"><a href="/growth/TunnelInfoView.seam" style="color: #fff;"><img src="#{request.contextPath}/asset/images/growth/icon_detail.png" style="margin-right: 5px;"/>详情</a></span>
										</div>
						            </div>
						            <table class="zuowuIntro" width="100%" cellpadding="0" cellspacing="0">
						            	<tr>
						                	<td valign="top">
						                    <!-- 作物生长环境 开始 -->
						                    <div class="cropGrowthWap">
						                    	<table width="100%" cellpadding="0" cellspacing="0">
						                        	<tr>
						                            	<td width="186" height="186" valign="top" style="padding-right:25px;">
						                                <s:div id="refreshPlant0" styleClass="cropGrowthImg" > 
						                                	<img class="mask" src="#{request.contextPath}/asset/images/img_monitor02.png"/>
						                                    <img class="pic" src="#{request.contextPath}/asset/images/wt_big.png" style="#{monitoringHome.imgUrl eq null?'display:block':'display:none'}"/>
						                                    <img class="pic" src="#{monitoringHome.imgUrl}" style="#{monitoringHome.imgUrl ne null?'display:block':'display:none'}"/>
						                                </s:div>
						                                </td>  
						                                <td valign="middle">
						                                	<div class="cropGrowtIntro clear">
						                                    	<h2>#{monitoringHome.tunnelName}</h2>
						                                    	<input id="tunnel_id" type="hidden" value="#{monitoringHome.tunnelInfoId}"/>
						                                        <span class="jk_select" style="padding:0 10px 10px 0">
						                                        <s:fragment rendered="#{not empty monitoringHome.plantList}"> 
						                                        	 <select class="selectpicker" id="plantAlertChangeId" onchange="changePlantValue(this.value);">
								                                        <a:repeat value="#{monitoringHome.plantList}" var="_plant">
								                                        	<option value="#{_plant[4]}|#{_plant[5]},#{_plant[0]},#{_plant[6]},#{_plant[7]}">#{_plant[1]}</option>
								                                        </a:repeat>
							                                        </select>   
						                                        </s:fragment>
						                                        </span>  
						                                        <a class="btn btn-success" href="javascript:void(0);" onclick="showAlarmInfo();">报警设置</a>
						                                    </div>
						                                    <s:div id="refreshPlant1"> 
						                                    	<s:fragment  rendered="#{monitoringHome.plantDays != null}">
						                                    		<p class="growthPeriod">生长期：&nbsp;&nbsp;总共#{monitoringHome.plantDays[0]}天，剩余#{monitoringHome.plantDays[1]}天</p>
						                                    	</s:fragment>
						                                    	<s:fragment  rendered="#{monitoringHome.plantDays == null}">
						                                    		<p class="growthPeriod">生长期：&nbsp;&nbsp;总共--天，剩余--天</p>
						                                    	</s:fragment>
						                                    	
						                                    	<div class="monitor-timetable">
								                                    <table width="100%" cellpadding="0" cellspacing="0">
								                                    	<tr>
								                                        	<td class="monitor-timetd border_rt96" width="33.33%">
								                                            	<table width="100%" cellpadding="0" cellspacing="0">
								                                                	<tr>
								                                                    	<td width="30%" align="center" style="min-width:46px;"><img src="#{request.contextPath}/asset/images/img_monitor05.png" /></td>
								                                                        <td width="70%">
								                                                        	<span>
								                                                        		<s:fragment rendered="#{monitoringHome.mapIdPlant.get(monitoringHome.realPlantId)[10] eq 3}">落叶休眠</s:fragment>
								                                                        		<s:fragment rendered="#{monitoringHome.mapIdPlant.get(monitoringHome.realPlantId)[10] ne 3}">开始时间</s:fragment>
								                                                        	</span><br />
								                                                            <span>
								                                                           		<h:outputText value="#{monitoringHome.mapIdPlant.get(monitoringHome.realPlantId)[3]}" rendered="#{not empty monitoringHome.mapIdPlant.get(monitoringHome.realPlantId)[3]}">
								                                                            		<f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT+8"/>
								                                                            	</h:outputText>
								                                                            	<h:outputText value="--" rendered="#{empty monitoringHome.mapIdPlant.get(monitoringHome.realPlantId)[3]}">
								                                                            	</h:outputText>
								                                                            </span>
								                                                        </td>
								                                                    </tr>
								                                                </table>
								                                            </td>
								                                            <s:fragment rendered="#{monitoringHome.mapIdPlant.get(monitoringHome.realPlantId)[10] eq 3}">
								                                            <td class="monitor-timetd border_rt96" width="33.33%">
								                                            	<table width="100%" cellpadding="0" cellspacing="0">
								                                                	<tr>
								                                                    	<td width="30%" align="center" style="min-width:46px;"><img src="#{request.contextPath}/asset/images/img_monitor06.png" /></td>
								                                                        <td width="70%">
								                                                        	<span>采收开始</span><br />
								                                                            <span style="width: 10px;">
								                                                            	<h:outputText value="#{monitoringHome.mapIdPlant.get(monitoringHome.realPlantId)[8]}" >
								                                                            		<f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT+8"/>
								                                                            	</h:outputText>
								                                                            	<h:outputText value="--" rendered="#{empty monitoringHome.mapIdPlant.get(monitoringHome.realPlantId)[8]}">
								                                                            	</h:outputText>
								                                                            </span>
								                                                        </td>
								                                                    </tr>
								                                                </table>
								                                            </td>
								                                            </s:fragment> 
								                                            <td width="33.33%">
								                                            	<table width="100%" cellpadding="0" cellspacing="0">
								                                                	<tr>
								                                                    	<td width="30%" align="center" style="min-width:46px;"><img src="#{request.contextPath}/asset/images/img_monitor07.png" /></td>
								                                                        <td width="70%">
								                                                        	<span>
								                                                        		<s:fragment rendered="#{monitoringHome.mapIdPlant.get(monitoringHome.realPlantId)[10] eq 3}">采收结束</s:fragment>
								                                                        		<s:fragment rendered="#{monitoringHome.mapIdPlant.get(monitoringHome.realPlantId)[10] ne 3}">结束时间</s:fragment>
								                                                        	</span><br />
								                                                        	<span>
								                                                        		<h:outputText value="#{monitoringHome.mapIdPlant.get(monitoringHome.realPlantId)[9]}" rendered="#{not empty monitoringHome.mapIdPlant.get(monitoringHome.realPlantId)[9]}">
								                                                            		<f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT+8"/>
								                                                            	</h:outputText>
								                                                            	<h:outputText value="--" rendered="#{empty monitoringHome.mapIdPlant.get(monitoringHome.realPlantId)[9]}"> 
								                                                            	</h:outputText>
								                                                            </span>
								                                                        </td>
								                                                    </tr>
								                                                </table>
								                                            </td>
								                                        </tr>
								                                    </table>
							                                    </div>
						                                    </s:div>
						                                </td>
						                            </tr>
						                        </table> 
						                    </div> 
						                    <s:div id="refreshPlant2" styleClass="growthCycle" style="margin-right:28px;">  
						                    	<div class="curGrowthValue" style="left:#{monitoringHome.plantDays[3]}%">
						                        	<div class="tip">#{monitoringHome.plantDays[2]}#{monitoringHome.plantDays[2] gt 0?'天':''}</div>
						                        </div> 
						                        <table class="growthCycleJdt" width="100%" cellpadding="0" cellspacing="0" >
						                            <tr >
						                            	<a:repeat value="#{monitoringHome.plantPeriodList}" rendered="#{monitoringHome.plantPeriodList.size() gt 0}" var="_period" rowKeyVar="_index">
						                            		<td class="bgColor#{_index+1}"  width="#{_period[2]}"><span class="text">#{_period[1]}</span>
						                            		<div style="width:100%;">
						                            		<div style="text-align:right;" class="growthDay">#{_period[0]}
						                            			#{_index == monitoringHome.plantPeriodList.size() - 1?'天':''}
						                            		</div>
						                            		<div style="float:left;width:20px;text-align:left;" class="growthDay">
						                            			#{_index == 0?'0':''}天  
						                            		</div>  
						                            		</div>
						                            		</td>
						                            	</a:repeat>
						                            	<s:fragment rendered="#{monitoringHome.plantPeriodList.size() eq 0}" >
						                            		<td width="100%" class="bgColor0"><span class="text"></span><span class="growthDay"></span></td>
						                            	</s:fragment> 
						                            </tr> 
						                        </table>   
						                    </s:div>
						                    <!-- 作物生长环境 结束 -->
						                    </td>
						                    <td class="videoTd" valign="top" style="padding-left:50px;">
						                    
						                    
						                    <!-- 监控悬浮框  -->
							                <div class="monitor_suspend" id="monitor_suspend">
							                <input type="hidden" id="realPlantUrl" value="#{monitoringHome.realPlantUrl}"/>
							                <input type="hidden" id="showType" value="#{monitoringHome.showType}"/>
							                <input type="hidden" id="showNow" value="1"/>
							                <input id="play_btn" type="hidden" value="1"/>
							                    <ul class="tab_header">
							                        <li class="titem sp_skzb">
							                        	<input type="hidden" value="实况直播"/>
							                        	<div id="skzb_btn" class="shikuang_btn">
							                        		<i class="icon_shi"></i>
							                        	</div>
							                        </li>
							                        <h:outputText value="" rendered="#{monitoringHome.tunnelImgList.size() gt 0 }" ><li class="titem sp_hjsk"></li></h:outputText>
							                        <h:outputText value="" rendered="#{monitoringHome.realPlantUrl ne null and  monitoringHome.realPlantUrl ne ''}" ><li class="titem sp_spzs"><input type="hidden" value="视频追溯"/></li></h:outputText>
							                    </ul>
							                    <div class="tab_content">
							                        <div class="m_panel live_broadcast">
							                        <!--实况直播内容-->
							                            <div id="sk_div" class="panel_video panel_videoJK">
							                                <!--监控视频-->  
							                                <i class="btn_prev"></i>
							                                <div class="live_broadcast_list">
							                                <ol id="videoList" class="live_ol">   
							                                    <li class="live_li 11">                    
							                                    <div class="video player1" id="HLSPlayer0">
							                                        <script language="JavaScript">
																	<!--
																	var vID     = ""; 
																	var vWidth  = "100%";//播放器宽度设置
																	var vHeight = "100%";//播放器宽度设置
																	var vPlayer = "#{request.contextPath}/document/player.swf";//播放器文件
																	var vHLSset = "#{request.contextPath}/document/HLS.swf";//HLS配置
																	var vPic    = "";//视频缩略图
																	var vCssurl = "#{request.contextPath}/asset/css/mini.css";//移动端CSS应用文件
																	var vHLSurl = "http://farmeasy.cn/video/plant/8515/66032/77757/playlist.m3u8";
																	//-->
																	</script>
							                                    </div>
							                                    </li>
							                                    <li class="live_li 22">                    
							                                    <div class="video player1" id="HLSPlayer1">
							                                        <script language="JavaScript">
																	<!--
																	var vID     = ""; 
																	var vWidth  = "100%";//播放器宽度设置
																	var vHeight = "100%";//播放器宽度设置
																	var vPlayer = "#{request.contextPath}/document/player.swf";//播放器文件
																	var vHLSset = "#{request.contextPath}/document/HLS.swf";//HLS配置
																	var vPic    = "";//视频缩略图
																	var vCssurl = "#{request.contextPath}/asset/css/mini.css";//移动端CSS应用文件
																	var vHLSurl = "http://farmeasy.cn/video/plant/8515/66032/77757/playlist.m3u8";
																	//-->
																	</script>
							                                    </div>
							                                    </li>
							                                </ol>
							                                </div>
							                                <i class="btn_next"></i>
							                                <!--监控视频-->
							                            </div>
							                            <!-- <div class="panel_video panel_videoKZ">
							                                <i class="btn_prev"></i>
							                                <div class="live_broadcast_list2">
							                                <ol id="videoList2" class="live_ol2">   
							                                    <li class="live_li">                    
							                                    	<div class="video player2">
									                                    <div id="videoimg1" class="videoimg" style="overflow:hidden;">
													                        <img src="#{request.contextPath}/asset/images/nosp.png" id="imgShow" />
													                        <a class="Download" id="videoActiveX" href="http://img1.farmeasy.cn/plugin/cmsocx.exe">视频插件下载</a>
													                    </div>
									                                </div>
							                                    </li>
							                                    <li class="live_li">                    
							                                    	<div class="video player2">
									                                    <div id="videoimg2" class="videoimg" style="overflow:hidden;">
													                        <img src="#{request.contextPath}/asset/images/nosp.png" id="imgShow" />
													                        <a class="Download" id="videoActiveX" href="http://img1.farmeasy.cn/plugin/cmsocx.exe">视频插件下载</a>
													                    </div>
									                                </div>
							                                    </li>
							                                </ol>
							                                </div>
							                                <i class="btn_next"></i>
							                            </div> -->
							                        <!--实况直播内容-->
							                        </div>
							                        <h:outputText value="" rendered="#{monitoringHome.tunnelImgList.size() gt 0 }" >
							                        <div class="m_panel growth_figure">
							                        <!--生长图片内容-->
							                            <div class="figure_header">
							                                <span class="btnb_prev"></span>
							                                <ul class="biger_figure">
								                                <a:repeat value="#{monitoringHome.tunnelImgList}"  var="_var" rowKeyVar="index">
								                                	<li><img src="#{_var}" /></li>
								                                </a:repeat>
							                                    
							                                </ul>
							                                <span class="btnb_next"></span>
							                            </div>
							                            <div class="figure_footer clear">
							                                <span class="btns_prev"></span>
							                                <div class="small_figure_block">
							                                    <ul class="small_figure">
								                                    <a:repeat value="#{monitoringHome.tunnelImgList}"  var="_var" rowKeyVar="index">
									                                	<li><img src="#{_var}" /></li>
									                                </a:repeat>
							                                        
							                                    </ul>
							                                </div>
							                                <span class="btns_next"></span>
							                            </div>
							                        <!--生长图片内容-->
							                        </div>
							                        </h:outputText>
							                        <h:outputText value="" rendered="#{monitoringHome.realPlantUrl ne null and  monitoringHome.realPlantUrl ne ''}" >
							                        <div id="zs_div" class="m_panel video_back">
							                        <!--视频追溯内容-->
							                            <div id="plantVideos" class="video player3">
							                                <script language="JavaScript">
															<!--
															var vID     = ""; 
															var vWidth  = "100%";//播放器宽度设置
															var vHeight = "100%";//播放器宽度设置
															var vPlayer = "#{request.contextPath}/document/player.swf";//播放器文件
															var vHLSset = "#{request.contextPath}/document/HLS.swf";//HLS配置
															var vPic    = "";//视频缩略图
															var vCssurl = "#{request.contextPath}/asset/css/mini.css";//移动端CSS应用文件
															var vHLSurl = "#{monitoringHome.realPlantUrl}";
															//-->
															</script>
							                            </div>
							                        <!--视频追溯内容-->
							                        </div>
							                        </h:outputText>
							                    </div>
							                </div>
						                    
						                    
						                    
						                    
						                    <!-- 视频插件下载 开始 -->
						                    <!-- <div id="videoimg" class="videoimg" style="overflow:hidden;">
						                        <img src="#{request.contextPath}/asset/images/nosp.png" id="imgShow" />
						                        <a class="Download" id="videoActiveX" href="http://img1.farmeasy.cn/plugin/cmsocx.exe">视频插件下载</a>
						                    </div> -->
						                    <!-- 视频插件下载 结束 -->
						                    </td>
						                </tr>
						            </table>
						            <!-- 生长环境 开始 -->
						            <s:div styleClass="growthEnvirWap" id="growthEnvirWap">
						            	<table width="100%" cellpadding="0" cellspacing="0">
						                	<tr id="alertTD">
						                		<a:repeat value="#{monitoringHome.deviceInfoList}" var="_device">
					                				<td class="tdEqual">
							                        	<span class="envirDepression">
							                        		<s:fragment rendered="#{_device[3]}">
							                        			 <img class="warning" src="#{request.contextPath}/asset/images/img_monitor04.png"/>
							                        		</s:fragment>
							                        	#{_device[0]}
							                        	</span>
							                            <span class="envirPic">
							                            	<s:fragment rendered="#{_device[2] != null}">
							                        			 <img src="#{_device[2]}"/>
							                        		</s:fragment>
							                        		<s:fragment rendered="#{_device[6] != null}">
							                        			 #{_device[6]} 
							                        		</s:fragment>
							                            </span>
							                            <span class="envirValue #{_device[4] == true?'colorWarn':''}">
								                        <h:outputText value="#{_device[1]}" rendered="#{_device[1] ne null}">
								                        	<f:convertNumber pattern="##.#"/>  
								                        </h:outputText>
								                         <h:outputText value="—" rendered="#{_device[1] eq null}">
								                        </h:outputText>
								                        #{_device[5]} 
							                            </span> 
						                       		</td>
						                		</a:repeat> 
						                    </tr>
						                </table> 
						                <script>
						                	growthEnvirWap();
						                </script>
						            </s:div>
						            <!-- 生长环境 结束 -->
						            
						            <!-- 操作控制 开始 -->
						            <s:div rendered="#{monitoringHome.operateStr ne null &amp;&amp; monitoringHome.operateStr ne '' &amp;&amp; monitoringHome.operateStr ne '{}'}">
						            <script type="text/javascript">
						          //<![CDATA[	
						            	var operateStr = '#{monitoringHome.operateStr}';
						            	if(typeof(operateStr)!="undefined" && operateStr != 'null' && operateStr!='')
						            		initManager();
						            	
						            	//]]>
						            </script>
            <h3 class="his_temperatureHd" style="margin-top:24px;margin:20px auto">操作控制</h3>
            <div class="operation-control clear">
            	<div class="operation-control-lt">
                <!-- 操作控制左侧 开始 -->
                    <div class="farmShed-wap fl">
                        <div class="farm-LedMonitor">
                            <em class="LedMonitor-hd">欢迎使用LED屏</em>
                            <div id="LedMonitor-txt1" class="LedMonitor-bd">
                                <div id="LedMonitor-txt">
                                    <div id="LedMonitor-txt2">当前温度：20.6℃ 湿度：48.2%</div>
                                    <div id="LedMonitor-txt3"></div>
                                </div>
                            </div>
                        </div>
                        <div class="farmShed-con">
                        	<img class="control_shedimg" src="#{request.contextPath}/asset/images/control_shed.png" />
                            <img class="control_water" src="#{request.contextPath}/asset/images/control_water.png" />
                            <div class="control_juanl">
                            	<img class="control_rolle" src="#{request.contextPath}/asset/images/control_jl0.png" />
                            	<img class="control_rolle" src="#{request.contextPath}/asset/images/control_jl1.png" />
                                <img class="control_rolle" src="#{request.contextPath}/asset/images/control_jl2.png" />
                                <img class="control_rolle" src="#{request.contextPath}/asset/images/control_jl3.png" />
                                <img class="control_rolle" src="#{request.contextPath}/asset/images/control_jl4.png" />
                            </div>
                        </div>
                    </div>
                <!-- 操作控制左侧 结束 -->
                </div>
                <div class="operation-control-rt">
                <!-- 操作控制右侧 开始 -->
                	<div class="tab-control-title clear">
                    	<span class="v-leftbtn">&lt;&lt;</span>
                        <div class="v-centercont">
                        	<ul class="v-centerScroll">
                            	<li class="cur"><a href="javascript:void(0)">滴灌控制</a></li>
                                <li><a href="javascript:void(0)">卷帘控制</a></li>
                                <li><a href="javascript:void(0)">LED控制</a></li>
                            </ul>
                        </div>
                        <span class="v-rightbtn">&gt;&gt;</span>
                    </div>
                    <div class="tab-control-content">
                    <!-- 操作控制选项卡内容 开始 -->
                    	<div class="v-tab-content cur-block" id="dgdiv">
                        	<div class="control-dripIrrigation">
                            	<div class="led-screen-title">
                                	<span class="led-screen-lt"><img src="#{request.contextPath}/asset/images/control_ico1.png" /><span id="dgstatus">正常</span></span>
                                    <span class="led-screen-rt"><img src="#{request.contextPath}/asset/images/control_ico2.png" /><input type="hidden" id="daojishi" /><span>--</span></span>
                                </div>
                                <ol class="imitate-table mt30">
                                	<li>
                                    <span class="imitate-table-td1">滴灌时间</span>
                                    <span class="imitate-table-td2"><input class="form-control" type="text" id="opendg" name="opendg" onkeyup="clearNoNum(this)"/></span>
                                    <span class="imitate-table-td3">分钟</span>
                                    </li>
                                    <li>
                                    <span class="imitate-table-td1"><em class="closeDg-btn">关闭滴灌</em></span>
                                    <span class="imitate-table-td2"><strong class="tapDg-ico"><img class="tapDg-closeSign" src="#{request.contextPath}/asset/images/control_ico4.png" /><img class="tapDg-openSign" src="#{request.contextPath}/asset/images/control_ico5.png" /></strong></span>
                                    <span class="imitate-table-td3"><em class="openDg-btn">开启滴灌</em></span>
                                    </li>
                                </ol>
                            </div>
                        </div>
                        <!-- 卷帘控制内容 开始 -->
                        <div class="v-tab-content"  id="jldiv">
                        	<div class="control-shutter">
                            	<div class="led-screen-title">
                                	<span class="led-screen-lt"><img src="#{request.contextPath}/asset/images/control_ico1.png" />正常</span>
                                    <span class="led-screen-rt"><img src="#{request.contextPath}/asset/images/control_ico3.png" style="width:27px; height:27px; margin-top:11px;" /><span class="statuesVal">全关</span></span>
                                </div>
                                <div class="shutter-status">
                                	<strong class="strong">卷帘状态</strong>
                                    <p class="cur-picnum">
                                      <input type="text" id="amount" readonly="readonly" style="border:0; color:#f6931f; font-weight:bold;"/>
                                    </p>
                                    <div id="slider-range-max"></div>
                                    <div class="control-jlstates"></div>
                                </div>
                            </div>
                        </div>
                        <!-- LED控制内容 开始 -->
                        <div class="v-tab-content" id="leddiv">
                        	<div class="control-led">
                            	<div class="led-screen-title">
                                	<span class="led-screen-lt" style="background:none;"><img src="#{request.contextPath}/asset/images/control_ico1.png" />正常</span>
                                    <span class="led-screen-rt" style="display:none">
                                    	<img src="#{request.contextPath}/asset/images/control_ico7.png" style="width:37px; height:21px; margin-top:13px;" />
                                        <div class="updateTime" ><span>03月15日</span><span>16点15分</span></div>
                                    </span>
                                </div>
                                <div class="led-settext clear">
                                	<strong class="strong">LED文字设置</strong>
                                    <textarea class="form-control" id="ledtext"></textarea>
                                    <button class="btn btn-primary fr" type="button" onclick="initLedValue(jQuery('#ledtext').val())">启动</button>
                                </div>
                            </div>
                        </div>
                    <!-- 操作控制选项卡内容 结束 -->
                    </div>
                <!-- 操作控制左侧 开始 -->
                </div>
            </div>
            
            </s:div>
            <!-- 操作控制 结束 -->
						            <!-- 环境实况 开始 -->
						            <h3 class="his_temperatureHd" style="margin-top:24px;">环境实况</h3>
						            <div class="r_title clear" style="border:none;">
						                <div class="r_titleLt fl clear">
						                    <span class="jk_select">
						                    <select class="selectpicker" id="selectConditionId" multiple="multiple" onchange="selectConditionChange(-1)">
						                    	<a:repeat value="#{monitoringHome.deviceInfoList}" var="_device">
						                    		<s:fragment rendered="#{_device[7] gt -1}"> 
						                    			<option value="#{_device[7]}">#{_device[0]}</option>  
						                    		</s:fragment>
						                    	</a:repeat> 
						                    </select>  
						                    </span>
						                </div>  
						                <ul class="ul_tabList">
						                    <li class="cur" id="day"><a href="javascript:void(0);" onclick="selectConditionChange(0);">当天</a><span>|</span></li>  
						                    <li id="week"><a href="javascript:void(0);" onclick="selectConditionChange(1);">一周</a><span>|</span></li> 
						                    <li id="month"><a href="javascript:void(0);" onclick="selectConditionChange(2);">一月</a><span>|</span></li> 
						                    <li id="year"><a href="javascript:void(0);" onclick="selectConditionChange(3);">一年</a></li>
						                </ul> 
						            </div>
						            <div>
							            <div id="container_wenshiSk" style="position:relative; top:0; z-index:1; min-width:700px; margin-top:20px;">
							            </div>
							            <div style="overflow:hidden;width:100%">
							            	<p class="his_moreCon"><span>环境实况：指对作物生长有影响的各种环境...</span><a href="javascript:;" onclick="setTimeout(function(){jQuery('body').css('padding-right',0);},1)" data-toggle="modal" data-target="#myModal_wenshiSk">更多>></a></p>
							            </div>
						            </div>
						            <!-- 环境实况 结束 -->
						            <!-- 病虫害预警 开始 -->
						            <div id="realPlantIdLine" style="display: block;">
						            <h3 class="his_temperatureHd" style="margin-top:24px;">病虫害预警</h3>
						            <div class="bchyj_wap" style="margin-top:20px;">
						            	<table width="100%" cellpadding="0" cellspacing="0">
						                	<tr>
						                    	<td width="70%" id="container_BchyjLtTD" style="padding-right:50px;">
						                         <div id="container_BchyjLt" style="position:relative; top:0; z-index:1; min-width:400px; height:300px-;"></div>
						                        </td>
						                        <td id="container_BchyjRtTD" width="30%">
						                         <div id="container_BchyjRt" style="position:relative; top:0; z-index:1; min-width:300px; height:300px-;"></div>
						                        </td>
						                    </tr>
						                </table>
						            </div>        
						            <div style="overflow:hidden;width:100%;">
						            	<p class="his_moreCon"><span>病虫害预警：病虫害预警是指通过对菜品生长...</span><a href="javascript:;" onclick="setTimeout(function(){jQuery('body').css('padding-right',0);},1)" data-toggle="modal" data-target="#myModal_Bchyj">更多>></a></p>
						            </div>
						            <!-- 病虫害预警 结束 -->
						            <!-- 成熟度预测 开始 -->
						            <h3 class="his_temperatureHd" style="margin-top:24px;">成熟度预测</h3>
						            <div id="container_Csdyc" style="position:relative; top:0; z-index:1; min-width:700px; margin-top:20px;"></div>
						            <div style="overflow:hidden;width:100%;">
						            	<p class="his_moreCon"><span>成熟度预测：成熟度预测是通过对种植蔬菜从...</span><a href="javascript:;" onclick="setTimeout(function(){jQuery('body').css('padding-right',0);},1)" data-toggle="modal" data-target="#myModal_Csdyc">更多>></a></p>
						            </div>
						            <!-- 成熟度预测 结束 -->
						            
						            <!-- 环境指数 开始 -->
						            <h3 class="his_temperatureHd" style="margin-top:24px;">环境指数</h3>
						            <div class="r_title clear" style="border:none;"> 
						                <div class="r_titleLt fl clear">
						                    <span class="jk_select">
						                    <select class="selectpicker" id="selectPGWIId" onchange="selectHealthPGWIIdChange(this.value);">
						                    	<option value="0">健康指数</option>
						                    	<option value="1">空气温度指数</option>  
						                    	<option value="2">空气湿度指数</option>    
						                    	<option value="3">土壤温度指数</option>  
						                    </select>    
						                    </span> 
						                </div>   
						            </div> 
						            <div id="container_PGWI" style="position:relative; top:0; z-index:1; min-width:700px; margin-top:20px;"></div>
						            <!-- 环境指数 结束 --> 
						            </div>
						        </div>
						        <!-- 主体内容 右侧整体板块 结束 -->
				        	</s:div>
		        		
			        	<!-- 大棚信息 -->
			        </td>
			    </tr>
			</table>
			</div>
			<!-- 主体内容 结束 -->
			
			<!-- 更多温室模态框 开始 -->
			<div class="modal fade" id="myModal_wenshiSk" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="overflow:hidden; #{sessionTake.tunnelZtreeResultJson eq '[]'?'display:none':''}">
			<div class="modal-dialog" style="width:600px; margin:0; left:50%; margin-left:-300px; top:50%; margin-top:-230px;position:absolute;">
			<div class="modal-content">
			    <div class="modal-header">
			      <button type="button" class="close" data-dismiss="modal"> </button>
			      <h4 class="modal-title font14" id="myModalLabel">环境实况<span>&nbsp;</span></h4>
			    </div>
			    <div class="modal-body" style="height:406px; overflow-y:auto;">
			        <div class="modalheight">
			            <p class="modalSection">指对作物生长有影响的各种环境因子的实时数据，传感器实时、连续采集作物生长期间的空气温湿度、土壤温湿度、二氧化碳浓度、光照度等环境参数，通过与适宜作物生长的对应环境数据的比对，可反映出改作物生长环境的优劣度，通过人为措施或借助自然条件调节改变不利的环境因素，使环境向着不利于病虫害的发生与为害，利于作物生长的方向变化。 </p>
			        </div>
			    </div>
			</div>
			</div>
			</div>
			<!-- 更多温室模态框 结束 -->
			
			<!-- 更多病虫害预警模态框 开始 -->
			<div class="modal fade" id="myModal_Bchyj" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="overflow:hidden;#{sessionTake.tunnelZtreeResultJson eq '[]'?'display:none':''}">
			<div class="modal-dialog" style="width:600px; margin:0; left:50%; margin-left:-300px; top:50%; margin-top:-230px;position:absolute;">
			<div class="modal-content">
			    <div class="modal-header">
			      <button type="button" class="close" data-dismiss="modal"> </button>
			      <h4 class="modal-title font14" id="myModalLabel">病虫害预警<span>&nbsp;</span></h4>
			    </div>
			    <div class="modal-body" style="height:406px; overflow-y:auto;">
			        <div class="modalheight">
			            <p class="modalSection">病虫害预警是指通过对菜品生长环境数据的检测和采集，并与病虫害适宜发生的环境情况进行分析比较，根据影响因子之间的相互关系对菜品的发病情况进行预测，并通过发病概率的方式进行预测，为农农事管理提供参考依据。</p>
			        </div> 
			    </div>
			     
			</div>
			</div>
			</div>
			<!-- 更多病虫害预警模态框 结束 -->
			
			<!-- 更多成熟度预测模态框 开始 -->
			<div class="modal fade" id="myModal_Csdyc" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="overflow:hidden;#{sessionTake.tunnelZtreeResultJson eq '[]'?'display:none':''}">
			<div class="modal-dialog" style="width:600px; margin:0; left:50%; margin-left:-300px; top:50%; margin-top:-230px; position:absolute;">
			<div class="modal-content">
			    <div class="modal-header">
			      <button type="button" class="close" data-dismiss="modal"> </button>
			      <h4 class="modal-title font14" id="myModalLabel">成熟度预测<span>&nbsp;</span></h4> 
			    </div>
			    <div class="modal-body" style="height:406px; overflow-y:auto;">
			        <div class="modalheight">
			            <p class="modalSection">成熟度预测是通过对种植蔬菜从定植开始，在自然状态下每日有效积温的累加，推断菜品的成熟程度，既能够及时提醒农民提前采收或延后采收，又可用于指导消费者判断菜品是否使用催熟剂等生物化学用品。</p>
			        </div>
			    </div>
			</div>
			</div>
			</div>
			<!-- 更多成熟度预测模态框 结束 -->
			
			<!-- 消息提示  -->
			<div class="modal fade" id="showMessageDiv" style="display: none;" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
				<div class="modal-dialog" style="position:fixed; width:340px; margin:0; left:50%; margin-left:-170px; top:50%; margin-top:-100px; position:absolute;">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal"  />
							<h4 class="modal-title font14" id="myModalLabel">提示</h4>
						</div>
						<div class="modal-body" style="height:auto; padding:15px 30px">
							<span id="showMessage"></span>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-primary" data-dismiss="modal">确认</button>
						</div>
					</div>
				</div>
			</div> 
		<!-- 消息提示  -->
			
		<!-- 更多温度模态框 开始 -->
		<div class="modal fade" id="myModal_temperature"  tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="overflow:hidden;">
		<div class="modal-dialog" style="width:600px; margin:0; left:50%; margin-left:-300px; top:50%; margin-top:-230px; position:absolute;">
		<div class="modal-content">
		    <div class="modal-header">
		      <button type="button" class="close" data-dismiss="modal"> </button>
		      <h4 class="modal-title font14" id="myModalLabel">气温(℃)<span>&nbsp;air temperature</span></h4>
		    </div>
		    <div class="modal-body">
		        <div class="modalheight">
		            <h3 class="modalH3" style="background-position:0 12px;">定义</h3>
		            <p class="modalSection">天气预报中所说的气温，指在野外空气流通、不受太阳直射下测得的空气温度(一般在百叶箱内测定)。最高气温是一日内气温的最高值，一般出现在14-15时，最低气温一般出现在早晨5-6时。中国用摄氏温标，以℃表示摄氏度。一般一天观测4次（02、08、14、20四个时次），部分测站根据实际情况，一天观测3次（08、14、20三个时次）。 </p>
		            <h3 class="modalH3">地面气温的测量</h3>
		            <p class="modalSection">气象台站用来测量近地面空气温度的主要仪器是装有水银或酒精的玻璃管温度表。因为温度表本身吸收太阳热量的能力比空气大，在太阳光直接曝晒下指示的读数往往高于它周围空气的实际温度，所以测量近地面空气温度时，通常都把温度表放在离地约1．5m处四面通风的百叶箱里。气象部门所说的地面气温，就是指高地面约1.5m处百叶箱中的温度。</p>
		        </div>
		    </div>
		</div>
		</div>
		</div>
		<!-- 更多温度模态框 结束 -->
		
		<!-- 更多风力风向模态框 开始 -->
		<div class="modal fade" id="myModal_theWind" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="overflow:hidden;">
		<div class="modal-dialog" style="width:600px; margin:0; left:50%; margin-left:-300px; top:50%; margin-top:-230px; position:absolute;">
		<div class="modal-content">
		    <div class="modal-header">
		      <button type="button" class="close" data-dismiss="modal"> </button>
		      <h4 class="modal-title font14" id="myModalLabel">风力风向<span>&nbsp;the wind</span></h4>
		    </div>
		    <div class="modal-body">
		        <div class="modalheight">
		            <h3 class="modalH3" style="background-position:0 12px;">定义</h3>
		            <p class="modalSection">风资料是重要的气象资料之一，无论在理论研究上，还是在国民经济建设的各部门，如农业、运输业、建筑业、水利工程、疗养等部门都是不可缺少的。风是空气的水平运动，是一个用方向（风向）和速度（风速）表示的矢量（或称向量）。风向是指风来的方向，除静风外，用16方位表示。风速是指空气所经过的距离对经过的距离所需时间的比值，单位用米/秒表示，定时观测（基本站每日观测4次，基准站每日观测24次），取整数，自记记录，取小数一位。</p>
		            <h3 class="modalH3">风力等级</h3>
		            <p class="modalSection">风是矢量，用风向、风速(或风力等级)表示。 <br />风速在气象服务之中，常用风力等级来表示风速的大小。英国人F.蒲福于1805年所拟定的“蒲福风级”将风力分为 13个等级(0～12级)。自1946年，风力等级又增加到18个（0～17级）。即风力的大小分为18个等级，最小是0级，最大为17级。风速和风力等级的对应关系如下表所示。</p>
		            <div class="content_topp">
		            	<table class="table">
		                	<tr>
		                    	<td>等级</td>
		                        <td>风速（m/s）</td>
		                        <td>风速（km/h）</td>
		                        <td>等级</td>
		                        <td>风速（m/s）</td>
		                        <td>风速（km/h）</td>
		                        <td>等级</td>
		                        <td>风速（m/s）</td>
		                        <td>风速（km/h）</td>
		                    </tr>
		                    <tr>
		                    	<td>0</td>
		                        <td>0.0-0.2</td>
		                        <td> &lt;1 </td>
		                        <td>6</td>
		                        <td>10.8-13.8</td>
		                        <td>39-49</td>
		                        <td>12</td>
		                        <td>32.7-36.9</td>
		                        <td>118-133</td>
		                    </tr>
		                    <tr>
		                    	<td>1</td>
		                        <td>0.3-1.5</td>
		                        <td>1-5</td>
		                        <td>7</td>
		                        <td>13.9-17.1</td>
		                        <td>50-61</td>
		                        <td>13</td>
		                        <td>37.0-41.4</td>
		                        <td>134-149</td>
		                    </tr>
		                    <tr>
		                    	<td>2</td>
		                        <td>1.6-3.3</td>
		                        <td>6-11</td>
		                        <td>8</td>
		                        <td>17.2-20.7</td>
		                        <td>62-74</td>
		                        <td>14</td>
		                        <td>41.5-46.1</td>
		                        <td>150-166</td>
		                    </tr>
		                    <tr>
		                    	<td>3</td>
		                        <td>3.4-5.4</td>
		                        <td>12-19</td>
		                        <td>9</td>
		                        <td>20.8-24.4</td>
		                        <td>75-88 </td>
		                        <td>15</td>
		                        <td>46.2-50.9</td>
		                        <td>167-183</td>
		                    </tr>
		                    <tr>
		                    	<td>4</td>
		                        <td>5.5-7.9</td>
		                        <td>20-28</td>
		                        <td>10</td>
		                        <td>24.5-28.4</td>
		                        <td>89-102</td>
		                        <td>16</td>
		                        <td>51.0-56.0</td>
		                        <td>184-201</td>
		                    </tr>
		                    <tr>
		                    	<td>5</td>
		                        <td>8.0-10.7</td>
		                        <td>29-38</td>
		                        <td>11</td>
		                        <td>28.5-32.6</td>
		                        <td>103-117</td>
		                        <td>17</td>
		                        <td>56.1-61.2</td>
		                        <td>202-220</td>
		                    </tr>
		                </table>
		            </div>
		            <h3 class="modalH3">风级歌</h3>
		            <p class="modalSection">0级烟柱直冲天，1级青烟随风偏<br />2级风来吹脸面，3级叶动红旗展<br />4级风吹飞纸片，5级带叶小树摇<br />6级举伞步行艰，7级迎风走不便<br />8级风吹树枝断，9级屋顶飞瓦片<br />10级拔树又倒屋， <br />11,12级陆上很少见，<br />13,14级很恐怖。</p>
					<h3 class="modalH3">风的测量</h3>
		            <p class="modalSection">测量风向风速的仪器有EL型电接风向风速计，达因风向风速计等。测定的项目有平均风速和最多风向。配有自记仪器的，作了风向风速的连续记录并进行了整理。此外风的测量中还有以风力等级进行观察的，风力等级是根据风对地上物体所引起的现象将风的大小分成18级，以0～17级的等级数字表示。风力等级观察须在空气不受任何障碍物影响的地方进行。</p>
		        </div>
		    </div>
		</div>
		</div>
		</div>
		<!-- 更多风力风向模态框 结束 -->
		<!-- 更多降水量模态框 开始 --> 
		<div class="modal fade" id="myModal_theRain" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="overflow:hidden;">
		<div class="modal-dialog" style="width:600px; margin:0; left:50%; margin-left:-300px; top:50%; margin-top:-230px; position:absolute;">
		<div class="modal-content">
		    <div class="modal-header">
		      <button type="button" class="close" data-dismiss="modal"> </button>
		      <h4 class="modal-title font14" id="myModalLabel">降水量(mm)<span>&nbsp;precipitation</span></h4>
		    </div>
		    <div class="modal-body">
		        <div class="modalheight">
		            <h3 class="modalH3 mt10" style="background-position:0 12px;">定义</h3>
		            <p class="modalSection">从天空降落到地面上的液态或固态（经融化后）水，未经蒸发、渗透、流失，而在水平面上积聚的深度。降水量以mm为单位，气象观测中取一位小数。</p>
		            <h3 class="modalH3">简介</h3>
		            <p class="modalSection">气象台站用来测量近地面空气温度的主要仪器是装有水银或酒精的玻璃管温度表。因为温度表本身吸收太阳热量的能力比空气大，在太阳光直接曝晒下指示的读数往往高于它周围空气的实际温度，所以测量近地面空气温度时，通常都把温度表放在离地约1．5m处四面通风的百叶箱里。气象部门所说的地面气温，就是指高地面约1.5m处百叶箱中的温度。</p>
		            <h3 class="modalH3">测量仪器</h3>
		            <h4 class="modalH4">雨量器</h4>
		            <dl class="modalComdl">
		                <dt><img src="#{request.contextPath}/asset/images/weather/img_tqyubao01.jpg" /></dt>
		                <dd>雨量器是用于测量一段时间内累积降水量的仪器。外壳是金属圆筒分上下两节，上节是一个口径为20厘米的盛水漏斗，为防止雨水溅失，保持器口面积和形状，筒口用坚硬铜质做成内直外斜的刀刃状；下节筒内放一个储水瓶用来收集雨水。测量时，将雨水倒入特制的雨量杯内读取降水量毫米数。降雪季节将储水瓶取出，换上不带漏斗的筒口，雪花可直接收集在雨量筒内，待雪融化后再读数，也可将雪秤出重量然后根据筒口面积换算成毫米数。</dd>
		            </dl>
		            <h4 class="modalH4">虹吸雨量</h4>
		            <dl class="modalComdl">
		                <dt><img src="#{request.contextPath}/asset/images/weather/img_tqyubao02.jpg" /></dt>
		                <dd>虹吸雨量计是可连续记录降水量和降水时间的仪器。其上部盛水漏斗的形状和大小与雨量器相同。当雨水经过漏斗导入量筒后，量筒内的浮子将随水位升高而上浮，带动自记笔在自记纸上划出水位上升的曲线。当量筒内的水位达到10毫米时，借助虹吸管，使水迅速排出，笔尖回落到零位重新记录。自记钟给出降水量随时间的累积过程。</dd>
		            </dl>
		            <h4 class="modalH4">翻斗式雨量计</h4>
		            <dl class="modalComdl">
		                <dt><img src="#{request.contextPath}/asset/images/weather/img_tqyubao03.jpg" /></dt>
		                <dd>翻斗式雨量计是可连续记录降水量随时间变化和测量累积降水量的有线遥测仪器。分感应器和记录器两部分，其间用电缆连接。感应器用翻斗测量，它是用中间隔板间开的两个完全对称的三角形容器，中隔板可绕水平轴转动，从而使两侧容器轮流接水，当一侧容器装满一定量雨水时（0.1或0.2毫米），由于重心外移而翻转，将水倒出，随着降雨持续，将使翻斗左右翻转，接触开关将翻斗翻转次数变成电信号，送到记录器，在累积计数器和自记钟上读出降水资料。</dd>
		            </dl>
		        </div>
		    </div>
		    
		</div>
		</div>
		</div>
		<!-- 更多降水量模态框 结束 -->	
			
		<div id="imgUpload" class="edit-box" style="width: 100%;height: 100%;left:0;top:0;margin:0;">
	   	<div class="edit-mask"></div>
	       <div class="edit-con" style="position:absolute;absolute;left:50%;top:50%;width: 400px;height: 340px;margin: -200px 0 0 -200px;">
	       	<div class="edit-title">
	           	<p>更换图片</p>
	               <a href="javascript:;" class="close-btn"></a>
	           </div>
	           <a:form id="inputsImages">
	           <input id="tunnelInfoid" type="hidden" value="#{monitoringHome.tunnelInfoId}"/>
	           <div class="edit-list clearfix" style="height: 210px">
					<iframe src="#{request.contextPath}/growth/AddvideoImage.seam" id="myframPic" name="myframPic" frameBorder="0" scrolling="no" height="150px" width="100%" ></iframe>
					<p style="text-align:center;padding:5px 0;color: red;">图片大小380×260，支持上传JPG,PNG格式</p>
					<div style="text-align:center;">
						<input id="videoBackImg" name="videoBackImg" type="checkbox" value=""/>图片同时修改至全部<span id="tunnelType" style="color: -moz-MenuHover">#{monitoringHome.tunnelTypeName}</span>
	           		</div>
	           </div>
	           <div class="btns clearfix">
	               <button type="button" class="btn btn-primary fl" onclick="saveImage();">提交</button>
	               <button type="button" class="btn btn-default fr" onclick="back();">返回</button>
	           </div>
	           </a:form>
	       </div>
	       
	   </div>		
	<a:form>
  		<a:queue requestDelay="10" ignoreDupResponses="true"/>
		<a:jsFunction name="nodeSwitch" status="ajaxStatus" action="#{monitoringHome.nodeSwitch}" data="#{monitoringHome.result}" reRender="rightContent" oncomplete="complate(data);">
			<a:actionparam name="nodeKey" assignTo="#{monitoringHome.nodeKey}"/>  
		</a:jsFunction> 
		<a:jsFunction name="getAreaInfo" action="#{monitoringHome.getAreaInfo}" data="#{monitoringHome.result}" oncomplete="complateZtree(data);">
			<a:actionparam name="nodeKey" assignTo="#{monitoringHome.nodeKey}"/>
		</a:jsFunction> 
		<a:jsFunction name="changePlant" action="#{monitoringHome.changePlant}" data="#{monitoringHome.result}" reRender="refreshPlant0,refreshPlant1,refreshPlant2,growthEnvirWap" oncomplete="refreshChangePlantLine(data);"> 
			<a:actionparam name="realPlantId" assignTo="#{monitoringHome.realPlantId}"/>
			<a:actionparam name="plantOtherIds" assignTo="#{monitoringHome.plantOtherIds}"/>  
		</a:jsFunction> 
		<a:jsFunction name="showEnvironmentline" action="#{monitoringHome.showEnvironmentline}" data="#{monitoringHome.result}" oncomplete="refreshLine(data);"> 
			<a:actionparam name="selectIds" assignTo="#{monitoringHome.selectIds}"/>
			<a:actionparam name="searchType" assignTo="#{monitoringHome.searchType}"/>
		</a:jsFunction>	
		
		<a:jsFunction name="saveVideoImg" action="#{monitoringHome.saveImg}" data="#{monitoringHome.promptMessage}" oncomplete="saveImgHuidiao(data);"> 
			<a:actionparam name="url" assignTo="#{monitoringHome.url}"/>
			<a:actionparam name="tunnelInfoId" assignTo="#{monitoringHome.tunnelInfoId}"/>
			<a:actionparam name="saveType" assignTo="#{monitoringHome.saveType}"/>
		</a:jsFunction>	
		
		<a:jsFunction name="ifHaveDevice" action="#{monitoringHome.ifHaveDevice}" data="#{monitoringHome.result}" oncomplete="weatherStationShow(data);"> 
			<a:actionparam name="baseId" assignTo="#{monitoringHome.baseId}"/>
		</a:jsFunction>
		<a:jsFunction name="getAlertInfo" action="#{monitoringHome.getAlertInfo}" reRender="growthEnvirWap">   
		</a:jsFunction>
		<a:jsFunction name="alarmTunnelInfoList" action="#{monitoringHome.alarmTunnelInfoList}" reRender="alarmInfoRepeat" oncomplete="listhuidiao();">   
			<a:actionparam name="pageNum" assignTo="#{monitoringHome.pageNum}"/>
		</a:jsFunction>
		<a:jsFunction name="alarmTunnelInfoList2" action="#{monitoringHome.alarmTunnelInfoList}" reRender="alarmInfoRepeat" oncomplete="listhuidiao();">   
		</a:jsFunction>
		<a:jsFunction name="selectAlarmTunnelInfos" action="#{monitoringHome.selectAlarmTunnelInfo}" reRender="alarmInfoAddDiv" oncomplete="addhuidiao();"> 
			<a:actionparam name="alarmTunnelId" assignTo="#{monitoringHome.alarmTunnelId}"/>
		</a:jsFunction>
		<a:jsFunction name="selectAlarmTunnelInfo" action="#{monitoringHome.selectAlarmTunnelInfo}" reRender="alarmInfoAddDiv" oncomplete="addhuidiao2();"> 
			<a:actionparam name="alarmTunnelId" assignTo="#{monitoringHome.alarmTunnelId}"/>
		</a:jsFunction>
		<a:jsFunction name="addAlarmTunnelInfo" action="#{monitoringHome.addAlarmTunnelInfo}" data="#{monitoringHome.messageStr}" oncomplete="savehuidiao(data);">
			<a:actionparam name="alarmTunnelId" assignTo="#{monitoringHome.alarmTunnelInfo.alarmTunnelId}"/>
			<a:actionparam name="alarmType" assignTo="#{monitoringHome.alarmTunnelInfo.alarmType}"/>
			<a:actionparam name="alarmGenre" assignTo="#{monitoringHome.alarmTunnelInfo.alarmGenre}"/>
			<a:actionparam name="alarmLimit" assignTo="#{monitoringHome.alarmTunnelInfo.alarmLimit}"/>
			<a:actionparam name="alarmDetails" assignTo="#{monitoringHome.alarmTunnelInfo.alarmDetails}"/>
			<a:actionparam name="alarmBeginTime" assignTo="#{monitoringHome.alarmTunnelInfo.alarmBeginTime}"/>
			<a:actionparam name="alarmEndTime" assignTo="#{monitoringHome.alarmTunnelInfo.alarmEndTime}"/>
			<a:actionparam name="alamNotifyPeople" assignTo="#{monitoringHome.alarmTunnelInfo.alamNotifyPeople}"/>
			<a:actionparam name="available" assignTo="#{monitoringHome.alarmTunnelInfo.available}"/>
			<a:actionparam name="insertTimeHidden" assignTo="#{monitoringHome.alarmTunnelInfo.insertTime}"/>
			<a:actionparam name="insertUserHidden" assignTo="#{monitoringHome.alarmTunnelInfo.insertUser}"/>
			<a:actionparam name="partitionsNameHidden" assignTo="#{monitoringHome.alarmTunnelInfo.partitionsName}"/>
			<a:actionparam name="tunnelNameHidden" assignTo="#{monitoringHome.alarmTunnelInfo.tunnelName}"/>
			<a:actionparam name="tunnelInfoIdHidden" assignTo="#{monitoringHome.alarmTunnelInfo.tunnelInfoId}"/>
			<a:actionparam name="enterpriseInfoIdHidden" assignTo="#{monitoringHome.alarmTunnelInfo.enterpriseInfoId}"/>
		</a:jsFunction>
		<a:jsFunction name="deleteAlarmTunnelInfo" action="#{monitoringHome.deleteAlarmTunnelInfo}" oncomplete="deletehuidiao();">
			<a:actionparam name="alarmTunnelId" assignTo="#{monitoringHome.alarmTunnelId}"/>
		</a:jsFunction>
		<a:jsFunction name="changeAlarmTypes" action="#{monitoringHome.changeAlarmTypes}" >
			<a:actionparam name="alarmTunnelId" assignTo="#{monitoringHome.alarmTunnelId}"/>
		</a:jsFunction>
	</a:form>  
	<!-- 树 -->  

<script type="text/javascript"> 
//<![CDATA[
	var zTree; 
	var clickLevel = 0; 
	var searchType = 0;
	var swithLeftType = 1;
	var areaCodeIframe = 0;
	var baseStationIframe = 0;
	var isIE = 1;  //1.ie,2.其它
	var isWindow = 1;//1.windows,2.其它
 	var video;
	var videoList;
 	var num = 0;//显示第几个摄像头
	var player;
	var setting = {data: { key: { title:"" }, simpleData: { enable: true } }, callback: { beforeClick: beforeClick, onClick: onClick } };
	var zNodes = #{sessionTake.tunnelZtreeResultJson}; 
	var nodata = "<img src='#{request.contextPath}/asset/images/weather/nodata.png'  width='108' height='108' style = 'position: absolute;left: 50%;top:50%;margin-left: -54px;margin-top:-54px;'/>";

	var video_flag = false;

	var videoUrl;

	function aaa(){
		 var userAgentInfo = navigator.userAgent;
		 var Agents = ["Android", "iPhone",
		                "SymbianOS", "Windows Phone",
		                "iPad", "iPod"];
		 for (var v = 0; v < Agents.length; v++) {
		    if (userAgentInfo.indexOf(Agents[v]) > 0) {
		    	video_flag = true;
		       break;
		 	}
		 }
		 if(video_flag){
			 jQuery("#sk_div").empty();	
			 jQuery("#zs_div").empty();	
		 }
	}
	
	jQuery(document).ready(function(){	
		aaa();
		getHeight();
		swithLeftWidth();
		jQuery('.selectpicker').selectpicker();	 
		/* 复选框js */
		jQuery('input[class=iCheck]').iCheck({
			checkboxClass: 'icheckbox_minimal-grey',
		}); 

		zTree = jQuery.fn.zTree.init(jQuery("#treeDemo"), setting, zNodes);
		jQuery.fn.zTree.init(jQuery("#treeDemo"), setting, zNodes);

		//判断操作系统
		if(!(navigator.platform == "Win32" || navigator.platform == "Windows")){
			isWindow = 2;
		}
		//视频  
		/* if(!(window.ActiveXObject || "ActiveXObject" in window)){ 
			isIE = 2;   
			jQuery("#videoActiveX").hide();   
		}    */
		if ((navigator.userAgent.indexOf('MSIE') >= 0) && (navigator.userAgent.indexOf('Opera') < 0)){
		}else if (navigator.userAgent.indexOf('Safari') >= 0  && navigator.userAgent.indexOf('Chrome')<0){
			isIE = 3;   
			jQuery("#videoActiveX").hide();  
		}else{
			isIE = 2;
			jQuery("#videoActiveX").hide();  
		}
		
		//初始化
		var tunnelId = '#{param.tunnelInfoId}';  
		if(tunnelId == '' || tunnelId == 'null'){
			var baseNodes = zTree.getNodesByParam("nodeLevel", 2, null); 
			if(baseNodes.length>0){
				
				lastNode = baseNodes[0]; 
				zTree.selectNode(lastNode);
				//nodeSwitch(lastNode.id); 
				
				if(lastNode.indexNum=="100000"){
					webcam_url = "";
					jQuery("#rightContent").hide();
					jQuery("#alarmContent").hide();  
					jQuery("#weatherContent").show();
					jQuery("#weatherContent").css("background","url('') no-repeat fixed left top rgba(0, 0, 0, 0)");     
					jQuery("#weatherContentIframe").attr("src","../growth/VideoPlay.seam?videoId="+lastNode.id);  
				}else {
					nodeSwitch(lastNode.id); 
				}
			}else {
				baseNodes = zTree.getNodesByParam("nodeLevel", 1, null); 
				if(baseNodes.length>0){
					lastNode = baseNodes[0]; 
					zTree.selectNode(lastNode);
					if(lastNode.indexNum=="100000"){
						webcam_url = "";
						jQuery("#rightContent").hide();
						jQuery("#alarmContent").hide();  
						jQuery("#weatherContent").show();
						jQuery("#weatherContent").css("background","url('') no-repeat fixed left top rgba(0, 0, 0, 0)");     
						jQuery("#weatherContentIframe").attr("src","../growth/VideoPlay.seam?videoId="+lastNode.id);  
					}
				}else{
					baseNodes = zTree.getNodesByParam("nodeLevel", 0, null); 
					if(baseNodes.length>0){
						lastNode = baseNodes[0]; 
						var baseId = lastNode.id; 
						if (baseId.indexOf("node_base") != -1) {
							baseId = baseId.replace("node_base","");  
						} 
						ifHaveDevice(baseId);
						baseStationIframe = baseId;
					}
				}
			}
		}else{
			var nodeKey = "node_tunnel"+tunnelId;
			var selectNode = zTree.getNodeByParam("id", nodeKey, null); 
			zTree.selectNode(selectNode);  
			nodeSwitch(nodeKey);  
			
			if(lastNode.indexNum=="100000" || lastNode.isvideo==11){
				webcam_url = "";
				jQuery("#rightContent").hide();
				jQuery("#alarmContent").hide();  
				jQuery("#weatherContent").show();
				jQuery("#weatherContent").css("background","url('') no-repeat fixed left top rgba(0, 0, 0, 0)");     
				jQuery("#weatherContentIframe").attr("src","../growth/VideoPlay.seam?videoId="+lastNode.id);  
			}else {
				nodeSwitch(lastNode.id); 
			}
		} 
		setTimeout(function(){ 
			var height = 0;
			if(jQuery("#weatherContent").is(":visible"))
				height = jQuery("#weatherContent").height();
			else if(jQuery("#rightContent").is(":visible"))
				height = jQuery("#rightContent").height();
			jQuery('#treeDemo').css({
				"height":jQuery(window).height()-60,
				"min-height":jQuery(".left_c1").height()
				});  
			jQuery('.foldBtn').css({
				"height":jQuery(window).height()-60,
				"min-height":jQuery(".left_c1").height()
				});
		},300);   

		//监控悬浮框切换效果
		jQuery('.tab_header .titem').each(function(index, elem) {
	        jQuery('.tab_header .titem').eq(0).addClass('dq_cur');
			jQuery('.tab_content .m_panel').eq(0).addClass('dq_cur');
			jQuery('li.titem').click(function(){
				jQuery(this).addClass('dq_cur').siblings().removeClass('dq_cur');
				jQuery('.tab_content .m_panel').eq(jQuery(this).index()).addClass('dq_cur').siblings().removeClass('dq_cur');	
				var aaa=jQuery(this).html();
				if(aaa.indexOf('实况直播') >= 0){
					var showNew = jQuery("#showNow").val()
					if(aaa.indexOf('实况直播') >= 0){
						if(showNew == 2){
							videos();
						}
					}	
				}else if(aaa.indexOf('视频追溯') >= 0){
					if(video_flag){
						var plantVidoe = jQuery('#realPlantUrl').val();
						if(plantVidoe != ''){
							jQuery("#plantVideos").empty();
							player.dispose();//清理
							var scriptAdd  = '<video id="plantVideo" class="video-js vjs-default-skin vjs-big-play-centered" style="width:100%;height:100%;" preload="auto" controls><source src="'+plantVidoe+'" type="application/x-mpegURL"/></video>';
							jQuery("#plantVideos").append(scriptAdd);
							player = videojs("plantVideo");
			 	   		    player.play();
				        }
					}
				}
			});
	    });
		
		//监控下拉选择
		jQuery('.tab_header .dropdown-menu > li').each(function(index, elem){
			//jQuery('.tab_content .m_panel .panel_video').eq(0).show().siblings().hide();
			jQuery(elem).click(function(){
				jQuery(this).addClass('dq_cur').siblings().removeClass('dq_cur');
				//jQuery('.tab_content .m_panel .panel_video').eq(jQuery(this).index()).show().siblings().hide();
			});
		});
		
		//监控悬浮--实况直播视频轮播切换
		VideoPanel();
		function VideoPanel(){
			var VLinum = 0;
			var VLength = jQuery('.panel_videoJK .live_li').length;
			//var VMaxlength = VLength-1;
			var VMaxlength = videoList.length-1;
			var VWidth = jQuery('.panel_videoJK .live_li').outerWidth();

			jQuery('.live_ol').width( VWidth*(VMaxlength+1) )
			jQuery('.live_ol').css('left',0);
			
			if( VMaxlength<0 ){
				jQuery('.panel_videoJK .btn_prev').click(function(){
					VLinum = 0;
					num = 0;
					jQuery('.live_ol').stop().animate({left:-VWidth*VLinum});
				});
				jQuery('.panel_videoJK .btn_next').click(function(){
					VLinum = 0;
					num = 0;
					jQuery('.live_ol').stop().animate({left:-VWidth*VLinum});
				});	
			}else{
				jQuery('.panel_videoJK .btn_prev').click(function(){
					VLinum--;
					if( VLinum<0 ){ VLinum =0 }
					num = VLinum;
					jQuery('.live_ol').stop().animate({left:-VWidth*VLinum});
					if(videoList[VLinum].playNum == 1 ){
						jQuery('#skzb_btn').addClass('shikuang_btn').removeClass('shikuangs_btn');
						for(var o in videoList ){
							if(jQuery('#divPlugin'+o).html() != undefined){
								 video = videoList[o];
								 jQuery("#videoimg"+o).empty();
								 if((video.device_type_id == 301 && video.type == 3)||video.device_type_id == 305){
									 if (-1 == WebVideoCtrl.I_CheckPluginInstall()) {
										if(videoUrl==''){
											jQuery("#videoimg"+o).append('<img src="#{request.contextPath}/asset/images/nosp.png" id="imgShow'+o+'"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
										}else{
											jQuery("#videoimg"+o).append('<img src="'+videoUrl+'" id="imgShow'+o+'"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
										}
									 }else{
										 if(videoUrl==''){
											 jQuery("#videoimg"+o).append('<img src="#{request.contextPath}/asset/images/videoPlayer.jpg" /><img id="imgShow'+o+'" src="/asset/images/videoPlayer.png" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
										 	 jQuery('#imgShow'+o).css("cursor","pointer");
										 }else{
											 jQuery("#videoimg"+o).append('<img src="'+videoUrl+'" /><img id="imgShow'+o+'" src="/asset/images/videoPlayer.png" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
											 jQuery('#imgShow'+o).css("cursor","pointer");
										 }
								         jQuery('#imgShow'+o).attr("onclick","showVideo()");  
									 }
								 }else{
									 if(videoUrl==''){
									 	jQuery("#videoimg"+o).html('<img src="#{request.contextPath}/asset/images/videoPlayer.jpg" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/cmsocx.exe">视频插件下载</a>');
									 }else{
										jQuery("#videoimg"+o).html('<img src="'+videoUrl+'" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/cmsocx.exe">视频插件下载</a>');
									 }
									 jQuery('#imgShow'+o).css("cursor","pointer");
								 	 jQuery('#imgShow'+o).attr("onclick","showVideo()"); 
								 }
							}
				     	}
						
					}else{
						jQuery('#skzb_btn').addClass('shikuangs_btn').removeClass('shikuang_btn');
						for(var o in videoList ){
							if(jQuery('#divPlugin'+o).html() != undefined){
								 video = videoList[o];
								 jQuery("#videoimg"+o).empty();
								 if((video.device_type_id == 301 && video.type == 3)||video.device_type_id == 305){
									 if (-1 == WebVideoCtrl.I_CheckPluginInstall()) {
										if(videoUrl==''){
											jQuery("#videoimg"+o).append('<img src="#{request.contextPath}/asset/images/nosp.png" id="imgShow'+o+'"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
										}else{
											jQuery("#videoimg"+o).append('<img src="'+videoUrl+'" id="imgShow'+o+'"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
										}
									 }else{
										 if(videoUrl==''){
											 jQuery("#videoimg"+o).append('<img src="#{request.contextPath}/asset/images/videoPlayer.jpg" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
										 	 jQuery('#imgShow'+o).css("cursor","pointer");
										 }else{
											 jQuery("#videoimg"+o).append('<img src="'+videoUrl+'" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
											 jQuery('#imgShow'+o).css("cursor","pointer");
										 }
								         jQuery('#imgShow'+o).attr("onclick","showVideo()");  
									 }
								 }else{
									 if(videoUrl==''){
									 	jQuery("#videoimg"+o).html('<img src="#{request.contextPath}/asset/images/videoPlayer.jpg" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/cmsocx.exe">视频插件下载</a>');
									 }else{
										jQuery("#videoimg"+o).html('<img src="'+videoUrl+'" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/cmsocx.exe">视频插件下载</a>');
									 }
									 jQuery('#imgShow'+o).css("cursor","pointer");
								 	 jQuery('#imgShow'+o).attr("onclick","showVideo()"); 
								 }
							}
				     	}
						jQuery('#skzb_btn').find('i').unbind();
						jQuery('#skzb_btn').find('i').click(function(){
							  var aa=jQuery('#play_btn').val();
							  if(aa == 1){
							    videos();
							  }else{
							    webUrlPlay();
							  }
						});
		    			
					}
					/* if(videoList[VLinum].playNum==1){
						jQuery('#videoType').hide();
		    	    	jQuery('.i_arrow').hide();
		    	    	jQuery('#aaa').hide();
					}else{
						jQuery('#videoType').show();
		    	    	jQuery('.i_arrow').show();
		    	    	jQuery('#aaa').show();
					} */
				});
				jQuery('.panel_videoJK .btn_next').click(function(){
					VLinum++;
					if( VLinum>VMaxlength ){ VLinum =VMaxlength }
					num = VLinum;
					jQuery('.live_ol').stop().animate({left:-VWidth*VLinum});
					if(videoList[VLinum].playNum == 1 ){
						jQuery('#skzb_btn').addClass('shikuang_btn').removeClass('shikuangs_btn');
						for(var o in videoList ){
							if(jQuery('#divPlugin'+o).html() != undefined){
								 video = videoList[o];
								 jQuery("#videoimg"+o).empty();
								 if((video.device_type_id == 301 && video.type == 3)||video.device_type_id == 305){
									 if (-1 == WebVideoCtrl.I_CheckPluginInstall()) {
										 if(videoUrl==''){
										 	 jQuery("#videoimg"+o).append('<img src="#{request.contextPath}/asset/images/nosp.png" id="imgShow'+o+'"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
										 }else{
											 jQuery("#videoimg"+o).append('<img src="'+videoUrl+'" id="imgShow'+o+'"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
										 }	
									 }else{
										if(videoUrl==''){
											jQuery("#videoimg"+o).append('<img src="#{request.contextPath}/asset/images/videoPlayer.jpg" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
											jQuery('#imgShow'+o).css("cursor","pointer");
										}else{
											jQuery("#videoimg"+o).append('<img src="'+videoUrl+'" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
											jQuery('#imgShow'+o).css("cursor","pointer");
										}
								        jQuery('#imgShow'+o).attr("onclick","showVideo()");  
									 }
								 }else{
									 if(videoUrl==''){
										 jQuery("#videoimg"+o).html('<img src="#{request.contextPath}/asset/images/videoPlayer.jpg" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/cmsocx.exe">视频插件下载</a>');
									 }else{
										 jQuery("#videoimg"+o).html('<img src="'+videoUrl+'" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/cmsocx.exe">视频插件下载</a>');
									 }
									 jQuery('#imgShow'+o).css("cursor","pointer");
								 	 jQuery('#imgShow'+o).attr("onclick","showVideo()"); 
								 }
							}
				     	}
					}else{
						jQuery('#skzb_btn').addClass('shikuangs_btn').removeClass('shikuang_btn');
						for(var o in videoList ){
							if(jQuery('#divPlugin'+o).html() != undefined){
								 video = videoList[o];
								 jQuery("#videoimg"+o).empty();
								 if((video.device_type_id == 301 && video.type == 3)||video.device_type_id == 305){
									 if (-1 == WebVideoCtrl.I_CheckPluginInstall()) {
										 if(videoUrl==''){
										 	 jQuery("#videoimg"+o).append('<img src="#{request.contextPath}/asset/images/nosp.png" id="imgShow'+o+'"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
										 }else{
											 jQuery("#videoimg"+o).append('<img src="'+videoUrl+'" id="imgShow'+o+'"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
										 }	
									 }else{
										if(videoUrl==''){
											jQuery("#videoimg"+o).append('<img src="#{request.contextPath}/asset/images/videoPlayer.jpg" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
											jQuery('#imgShow'+o).css("cursor","pointer");
										}else{
											jQuery("#videoimg"+o).append('<img src="'+videoUrl+'" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
											jQuery('#imgShow'+o).css("cursor","pointer");
										}
								        jQuery('#imgShow'+o).attr("onclick","showVideo()");  
									 }
								 }else{
									 if(videoUrl==''){
										 jQuery("#videoimg"+o).html('<img src="#{request.contextPath}/asset/images/videoPlayer.jpg" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/cmsocx.exe">视频插件下载</a>');
									 }else{
										 jQuery("#videoimg"+o).html('<img src="'+videoUrl+'" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/cmsocx.exe">视频插件下载</a>');
									 }
									 jQuery('#imgShow'+o).css("cursor","pointer");
								 	 jQuery('#imgShow'+o).attr("onclick","showVideo()"); 
								 }
							}
				     	}
						jQuery('#skzb_btn').find('i').unbind();
						jQuery('#skzb_btn').find('i').click(function(){
							  var aa=jQuery('#play_btn').val();
							  if(aa == 1){
							    videos();
							  }else{
							    webUrlPlay();
							  }
						});
		    			
					}
					/* if(videoList[VLinum].playNum==1){
						jQuery('#videoType').hide();
		    	    	jQuery('.i_arrow').hide();
		    	    	jQuery('#aaa').hide();
					}else{
						jQuery('#videoType').show();
		    	    	jQuery('.i_arrow').show();
		    	    	jQuery('#aaa').show();
					} */
				});		
			}
		}
		
		//监控悬浮--生长图片轮播图
		if( jQuery(window).width() <1280){
			jQuery('.monitor_suspend').addClass('small_monitor');
		}else{
			jQuery('.monitor_suspend').removeClass('small_monitor');	
		}
		
		EnvironFigure();
		function EnvironFigure(){
			var oSLinum = 0;
			var oBLinum = 0;
			var oBlength = jQuery('.biger_figure li').length;
			var oSMaxlength = oBlength-5;
			var oBMaxlength = oBlength-1;
			var oSLiwidth = jQuery('.small_figure li').outerWidth()+8;
			var oBLiwidth = jQuery('.biger_figure li').outerWidth();
			jQuery('.small_figure').width( oSLiwidth*oBlength )
			jQuery('.biger_figure').width( oBLiwidth*oBlength )
			
			jQuery('.biger_figure').css('left',0);
			jQuery('.small_figure').css('left',0);
			jQuery('.small_figure li').eq(0).addClass('dq_cur').siblings().removeClass('dq_cur');
			
			if( oBMaxlength < 0 ){
				jQuery('.btnb_prev').click(function(){
					//大图--左侧按钮点击事件
					oBLinum = 0;	
					jQuery('.biger_figure').stop().animate({left:-oBLiwidth*oBLinum} )	
				});
				jQuery('.btnb_next').click(function(){
					//大图--右侧按钮点击事件
					oBLinum = 0;	
					jQuery('.biger_figure').stop().animate({left:-oBLiwidth*oBLinum} )	
				});
			}else{
				jQuery('.btnb_prev').click(function(){
					//大图--左侧按钮点击事件
					oBLinum--;
					if( oBLinum < 0 ){
						oBLinum = 0;
						//alert('已经是第一张了，前面没有了');	
					}	
					if( oBLinum > oSMaxlength){
						jQuery('.small_figure').stop().animate({left:-oSLiwidth*oSMaxlength} )	;	
					}else{
						jQuery('.small_figure').stop().animate({left:-oSLiwidth*oBLinum} )	;	
					}
					jQuery('.biger_figure').stop().animate({left:-oBLiwidth*oBLinum} )	;
					//jQuery('.small_figure').animate({left:-oSLiwidth*oBLinum} )	;
					jQuery('.small_figure li').eq(oBLinum).addClass('dq_cur').siblings().removeClass('dq_cur');
				});
				jQuery('.btnb_next').click(function(){
					//大图--右侧按钮点击事件
					oBLinum++;
					if( oBLinum > oBMaxlength){
						oBLinum = oBMaxlength	;
						//alert('已经是最后一张了，后面没有了');	
					}
					if( oBLinum > oSMaxlength){
						jQuery('.small_figure').stop().animate({left:-oSLiwidth*oSMaxlength} )	;	
					}else{
						jQuery('.small_figure').stop().animate({left:-oSLiwidth*oBLinum} )	;	
					}
					jQuery('.biger_figure').stop().animate({left:-oBLiwidth*oBLinum} )	;
					//jQuery('.small_figure').animate({left:-oSLiwidth*oBLinum} )	;
					jQuery('.small_figure li').eq(oBLinum).addClass('dq_cur').siblings().removeClass('dq_cur');
				});	
			}
			
			if( oSMaxlength < 0 ){
				jQuery('.figure_footer .btns_prev').click(function(){
					//缩略图--左侧按钮点击事件
					oSLinum = 0;	
					jQuery('.small_figure').stop().animate({left:-oSLiwidth*oSLinum} )	
				});
				jQuery('.figure_footer .btns_next').click(function(){
					//缩略图--右侧按钮点击事件
					oSLinum = 0;	
					jQuery('.small_figure').stop().animate({left:-oSLiwidth*oSLinum} )	
				});
			}else{
				jQuery('.figure_footer .btns_prev').click(function(){
					//缩略图--左侧按钮点击事件
					oSLinum--;
					if( oSLinum < 0 ){
						oSLinum = 0;	
					}	
					jQuery('.small_figure').stop().animate({left:-oSLiwidth*oSLinum} )	
				});
				jQuery('.figure_footer .btns_next').click(function(){
					//缩略图--右侧按钮点击事件
					oSLinum++;
					if( oSLinum > oSMaxlength){
						oSLinum = oSMaxlength	
					}
					jQuery('.small_figure').stop().animate({left:-oSLiwidth*oSLinum} )	
				});	
			}
			
			jQuery('.small_figure li').each(function(index, elem) {
				//缩略图--点击小图事件
				jQuery(elem).click(function(){
					jQuery(this).addClass('dq_cur').siblings().removeClass('dq_cur');	
					jQuery('.biger_figure').stop().animate({left:-oBLiwidth*jQuery(this).index()} )	;
					return oBLinum=jQuery(this).index()
				});
			});
		}
		//---------------------------------------------------------------------------------
		//---------------------------------------------------------------------------------
		
		jQuery(window).resize(function(){	
			

			
			
			if( jQuery(window).width() <1280){
				jQuery('.monitor_suspend').addClass('small_monitor');
				jQuery('.live_ol .fdimg1').css({'width':24,'height':24,'margin-top':25});
				jQuery('.divPlugin_gs,#old_hk').css({'height':jQuery('.live_ol .live_li').outerHeight()-75});
			}else{
				jQuery('.monitor_suspend').removeClass('small_monitor');	
				jQuery('.live_ol .fdimg1').css({'width':50,'height':50,'margin-top':10});
				jQuery('.divPlugin_gs,#old_hk').css({'height':jQuery('.live_ol .live_li').outerHeight()-75});
			}
			VideoPanel();
		});
	}); 

	
	function changePlantValue(val){
		if(val != ""){
			var ids = val.split("|"); 
			changePlant(Number(ids[0]),ids[1]); 
		}
	}

	//左侧刷新
    function complateZtree(data){
    	 jQuery('.selectpicker').selectpicker();	   
         data = eval('('+data+')');
       	 jQuery("#baseLeftSelect").empty();
   		 jQuery(data.baseItem).appendTo("#baseLeftSelect")     //添加下拉框的option
   		 jQuery("#baseLeftSelect").selectpicker("refresh");
	}   

	function videos(){
     	//视频
     	//jQuery("#videoList").html("");
     	if(videoList.length>0){
			//for(var o in videoList ){
	            video = videoList[num];
	            //jQuery("#videoList").append('<li id="pvideo'+num+'" class="live_li"></li>');
	            jQuery("#video"+num).empty();
		        jQuery("#video"+num).append('<div class="video player2" id="player'+num+'"></div>');
		        jQuery("#player"+num).append('<div id="videoimg'+num+'" class="videoimg" style="overflow:hidden;"></div>');
	            
	            if((video.device_type_id == 301 && video.type == 3)||video.device_type_id == 305){
	            	 if(isWindow == 1 && isIE != 3 ){
	            		 if (-1 == WebVideoCtrl.I_CheckPluginInstall()) {
							 if(videoUrl==''){
								 jQuery("#videoimg"+num).append('<img src="#{request.contextPath}/asset/images/nosp.png" id="imgShow'+num+'"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+num+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
							 }else{
								 jQuery("#videoimg"+num).append('<img src="'+videoUrl+'" /><img src="/asset/images/videoPlayer.png" id="imgShow'+num+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+num+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
							 }
						 }else{
							 if(videoUrl==''){
								 jQuery("#videoimg"+num).append('<img src="#{request.contextPath}/asset/images/videoPlayer.jpg" /><img src="/asset/images/videoPlayer.png" id="imgShow'+num+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+num+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
								 jQuery('#imgShow'+num).css("cursor","pointer");
							 }else{
								 jQuery("#videoimg"+num).append('<img src="'+videoUrl+'" /><img src="/asset/images/videoPlayer.png" id="imgShow'+num+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+num+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
								 jQuery('#imgShow'+num).css("cursor","pointer");
							 }
					         jQuery('#imgShow'+num).attr("onclick","showVideo()");  
						 }
		             }else{
						if(videoUrl==''){
							jQuery("#videoimg"+num).append('<img src="#{request.contextPath}/asset/images/videoPlayer.jpg" /><img src="/asset/images/videoPlayer.png" id="imgShow'+num+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+num+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
						}else{
							jQuery("#videoimg"+num).append('<img src="'+videoUrl+'" /><img src="/asset/images/videoPlayer.png" id="imgShow'+num+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+num+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
						}
		            	 webcam_url = video.webcam_url; 
						 if(webcam_url!="" && webcam_url != null){ 
			            	 jQuery("#videoActiveX"+num).hide();
			            	 jQuery('#imgShow'+num).css("cursor","pointer");
			            	/*  if(videoUrl==''){
			            		 jQuery('#imgShow'+num).css("cursor","pointer");
				             }else{
				            	 jQuery('#imgShow'+num).css("cursor","pointer");
					         } */
						     jQuery('#imgShow'+num).attr("onclick","showVideo()");  
						 }else{
							 jQuery("#videoActiveX").hide();
			            	 //jQuery('#imgShow'+num).attr("src","#{request.contextPath}/asset/images/videoPlayer.jpg").css("cursor","pointer");
			            	 jQuery('#imgShow'+num).css("cursor","pointer");
			            	 /* if(videoUrl==''){
			            		 jQuery('#imgShow'+num).css("cursor","pointer");
				             }else{
				            	 jQuery('#imgShow'+num).css("cursor","pointer");
					         } */
						 }
				     }
		        }else if(video.device_type_id == 301 && video.type == 1){
					if(isIE == 1 ){
						if(video.type == 1){
							 if(videoUrl==''){
								 jQuery("#videoimg"+num).html('<img src="#{request.contextPath}/asset/images/videoPlayer.jpg" /><img src="/asset/images/videoPlayer.png" id="imgShow'+num+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+num+'" href="http://img1.farmeasy.cn/plugin/cmsocx.exe">视频插件下载</a>');
				             }else{
				            	 jQuery("#videoimg"+num).html('<img src="'+videoUrl+'" /><img src="/asset/images/videoPlayer.png" id="imgShow'+num+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+num+'" href="http://img1.farmeasy.cn/plugin/cmsocx.exe">视频插件下载</a>');
					         }
						 	jQuery('#imgShow'+num).css("cursor","pointer");
						 	jQuery('#imgShow'+num).attr("onclick","showVideo()");  
						}else{
							if(videoUrl==''){
								jQuery("#videoimg"+num).html('<img src="#{request.contextPath}/asset/images/videoPlayer.jpg" /><img src="/asset/images/videoPlayer.png" id="imgShow'+num+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+num+'" href="http://img1.farmeasy.cn/plugin/EHomeActiveX.exe">视频插件下载</a>');
							}else{
								jQuery("#videoimg"+num).html('<img src="'+videoUrl+'" /><img src="/asset/images/videoPlayer.png" id="imgShow'+num+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+num+'" href="http://img1.farmeasy.cn/plugin/EHomeActiveX.exe">视频插件下载</a>');
							}
						 	jQuery('#imgShow'+num).css("cursor","pointer");
						 	jQuery('#imgShow'+num).attr("onclick","showVideo()");
						}
					}else{
						webcam_url = video.webcam_url; 
						if(videoUrl==''){
							jQuery("#videoimg"+num).html('<img src="#{request.contextPath}/asset/images/videoPlayer.jpg" /><img src="/asset/images/videoPlayer.png" id="imgShow'+num+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+num+'" href="http://img1.farmeasy.cn/plugin/EHomeActiveX.exe">视频插件下载</a>');
						}else{
							jQuery("#videoimg"+num).html('<img src="'+videoUrl+'" /><img src="/asset/images/videoPlayer.png" id="imgShow'+num+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+num+'" href="http://img1.farmeasy.cn/plugin/EHomeActiveX.exe">视频插件下载</a>');
						}
						 if(webcam_url!="" && webcam_url != null){ 
							jQuery("#videoActiveX"+num).hide();
							if(videoUrl==''){
								jQuery('#imgShow'+num).css("cursor","pointer");
							}else{
								jQuery('#imgShow'+num).css("cursor","pointer");
							}
					        jQuery('#imgShow'+num).attr("onclick","showVideo()");  
						 }else{
							 jQuery("#videoActiveX"+num).hide();
							 if(videoUrl==''){
								jQuery('#imgShow'+num).css("cursor","pointer");
							 }else{
								jQuery('#imgShow'+num).css("cursor","pointer");
							 }
							 jQuery('#imgShow'+num).attr("onclick","showVideo()");
						 }
					}
				}else{

					if(videoUrl==''){
						jQuery("#videoimg"+num).html('<img src="#{request.contextPath}/asset/images/videoPlayer.jpg" id="imgShow'+num+'"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+num+'" href="http://img1.farmeasy.cn/plugin/EHomeActiveX.exe">视频插件下载</a>');
						jQuery("#videoActiveX"+num).hide();
		           		jQuery('#imgShow'+num).attr("src","#{request.contextPath}/asset/images/videoPlayer.jpg").css("cursor","pointer");
					}else{
						jQuery("#videoimg"+num).html('<img src="'+videoUrl+'" id="imgShow'+num+'"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+num+'" href="http://img1.farmeasy.cn/plugin/EHomeActiveX.exe">视频插件下载</a>');
						jQuery("#videoActiveX"+num).hide();
		           		jQuery('#imgShow'+num).attr("src",videoUrl).css("cursor","pointer");
					}
					
				    //jQuery('#imgShow').attr("onclick","showVideo()"); 
				}
	        //}
			jQuery("#showNow").val(2);
			jQuery('#play_btn').val(2);
		}else{
			var o = 0;
			jQuery("#videoList").append('<li id="video'+o+'" class="live_li"></li>');
	        jQuery("#pvideo"+o).append('<div class="video player2" id="player'+o+'"></div>');
	        jQuery("#player"+o).append('<div id="videoimg'+o+'" class="videoimg" style="overflow:hidden;"></div>');

	        if(videoUrl==''){
	        	jQuery("#videoimg"+o).html('<img src="#{request.contextPath}/asset/images/nosp.png" id="imgShow'+o+'"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/EHomeActiveX.exe">视频插件下载</a>');
				jQuery("#videoActiveX"+o).hide();
	       		jQuery('#imgShow'+o).attr("src","#{request.contextPath}/asset/images/nosp.png").css("cursor","pointer");
		    }else{
		    	jQuery("#videoimg"+o).html('<img src="'+videoUrl+'" id="imgShow'+o+'"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/EHomeActiveX.exe">视频插件下载</a>');
				jQuery("#videoActiveX"+o).hide();
	       		jQuery('#imgShow'+o).attr("src",videoUrl).css("cursor","pointer");
			}

       		jQuery('.btn_prev').hide();
        	jQuery('.btn_next').hide();
		}

		if(videoList.length<=1){
        	jQuery('.btn_prev').hide();
        	jQuery('.btn_next').hide();
		}
		
	}

	function webUrlPlay(){
		/* jQuery("#videoList").html("");
		var url="";
        if(videoList[num].webcam_url != null && videoList[num].webcam_url != 'null' && videoList[num].webcam_url != ''){
			url = video.webcam_url;
        }
    	jQuery("#videoList").append('<li id="video'+num+'" class="live_li"></li>');
        jQuery("#video"+num).append('<div class="video player1" id="HLSPlayer'+num+'">');
        var scriptAdd = "<script> var vID = 'HLSPlayer"+num+"';var vWidth = '100%';var vHeight = '100%';var vPlayer = '#{request.contextPath}/document/player.swf?autostart=true';var vHLSset = '#{request.contextPath}/document/HLS.swf';var vPic = ''; var vHLSurl = '"+url+"';a.init('HLSPlayer"+num+"');<\/script>";
		jQuery("#HLSPlayer"+num).append(scriptAdd); */
		jQuery("#showNow").val(1);
		jQuery('#play_btn').val(1);
	}
	
	//右侧刷新
    function complate(data){ 
       
    	videoUrl = jQuery('#videoBackImgHidden').val();
    	webcam_url = "";
    	window.scrollTo(0,0);
        
    	complateData = data;
    	jQuery('.selectpicker').selectpicker();
    	growthEnvirWap(); 		//传感器参数设置 
        //默认曲线
		//jQuery("#selectConditionId").val(eval("[0]"));  
		//jQuery('#selectConditionId').selectpicker('render');
		//selectConditionChange(0); 
		
		//默认全部选中
		var selectdata = [];
		jQuery("#selectConditionId option").each(function(){
			selectdata.push(this.value);
		}); 
		if(selectdata.length > 0){
			jQuery("#selectConditionId").val(selectdata); 
			jQuery('#selectConditionId').selectpicker('render');
			selectConditionChange(0);
		}
		var showType = jQuery('#showType').val();
		//默认病虫害预警 ,积温
		var ids = jQuery("#plantAlertChangeId").val();
		if(ids!=null && ids!=""){ 
			ids = ids.split("|");  
			jQuery("#realPlantIdLine").show();
			changePlant(Number(ids[0]),ids[1]);  
		}else{
			jQuery("#realPlantIdLine").hide();
		}  
		if(isIE == 2){
			jQuery("#videoActiveX").hide();  
		} 
		if(typeof(data)!='undefined' && data != ''){ 
			jQuery('.tab_content .m_panel .panel_video').eq(0).show();
	    	jQuery('.tab_content .m_panel .panel_video').eq(1).hide();
			json = eval('('+data+')');  
			if(video_flag){
				videoList = json.phone;
			}else{
				videoList = json.pc;
			}
         	//视频
         	jQuery("#videoList").html("");
         	jQuery("#videoList").empty();

	   		if(video_flag){
			var v_url = "";
	   		 for(var o in videoList ){
				if(v_url == ''){
					v_url = videoList[o].webcam_url;
					//player.dispose();//清理
					jQuery("#videoList").append('<li id="video'+o+'" class="live_li"></li>');
	    	        jQuery("#video"+o).append('<div class="video player1" id="HLSPlayer'+o+'">');
	    	        var scriptAdd  = '<video id="live-video'+o+'" class="video-js vjs-default-skin vjs-big-play-centered" style="width:100%;height:100%;" preload="auto" controls><source src="'+v_url+'" type="application/x-mpegURL"/></video>';
	    			jQuery("#HLSPlayer"+o).append(scriptAdd);
	    			player = videojs("live-video"+o);
	 	   		    player.play();
				}
		        
	   		 }
	   		 if(videoList.length == 0){
	   			jQuery("#videoList").append('<li id="video0" class="live_li"></li>');
	            jQuery("#video0").empty();
		        jQuery("#video0").append('<div class="video player2" id="player0"></div>');
		        jQuery("#player0").append('<div id="videoimg0" class="videoimg" style="overflow:hidden;"></div>');
	   			if(videoUrl==''){
       			 jQuery("#videoimg0").append('<img src="#{request.contextPath}/asset/images/nosp.png" id="imgShow0"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX0" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
           	 	}else{
           		 jQuery("#videoimg0").append('<img src="'+videoUrl+'" id="imgShow0"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX0" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
	             }
		   	}
	   			 //jQuery("#zs_div").empty();	
	   		 }else{
		   		 
         	if(videoList.length>0){
				for(var o in videoList){
		            //showVideo(data.video);
		            video = videoList[o];
		            if((video.webcam_url != null && video.webcam_url != 'null' && video.webcam_url != '')||(showType==1||showType=='1')){
						var url="";
			            if(video.webcam_url != null && video.webcam_url != 'null' && video.webcam_url != ''){
							url = video.webcam_url;
				        }
		            	jQuery("#videoList").append('<li id="video'+o+'" class="live_li"></li>');
		    	        jQuery("#video"+o).append('<div class="video player1" id="HLSPlayer'+o+'">');
		    	        var scriptAdd = "<script> var vID = 'HLSPlayer"+o+"';var vWidth = '100%';var vHeight = '100%';var vPlayer = '#{request.contextPath}/document/player.swf?autostart=true';var vHLSset = '#{request.contextPath}/document/HLS.swf';var vPic = ''; var vHLSurl = '"+url+"';a.init('HLSPlayer"+o+"');<\/script>";
		    			jQuery("#HLSPlayer"+o).append(scriptAdd);
		    			//jQuery('.tab_content .m_panel .panel_video').eq(0).show();
				    	//jQuery('.tab_content .m_panel .panel_video').eq(1).hide();
			        }else{
						if((video.device_type_id == 305|| video.device_type_id == 301) && (showType==0||showType=='0')){
							jQuery('.tab_header .dropdown-menu > li').eq(0).removeClass('dq_cur');
							jQuery('.tab_header .dropdown-menu > li').eq(1).addClass('dq_cur');
							videos();

							jQuery("#videoList").append('<li id="video'+o+'" class="live_li"></li>');
				            jQuery("#video"+o).empty();
					        jQuery("#video"+o).append('<div class="video player2" id="player'+o+'"></div>');
					        jQuery("#player"+o).append('<div id="videoimg'+o+'" class="videoimg" style="overflow:hidden;"></div>');
				            if((video.device_type_id == 301 && video.type == 3)||video.device_type_id == 305){
				            	 if(isWindow == 1 && isIE != 3 ){
				            		 if (-1 == WebVideoCtrl.I_CheckPluginInstall()) {
					            		 if(videoUrl==''){
					            			 jQuery("#videoimg"+o).append('<img src="#{request.contextPath}/asset/images/nosp.png" id="imgShow'+o+'"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
						            	 }else{
						            		 jQuery("#videoimg"+o).append('<img src="'+videoUrl+'" id="imgShow'+o+'"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
							             }
									 }else{
										 if(videoUrl==''){
											 jQuery("#videoimg"+o).append('<img src="#{request.contextPath}/asset/images/videoPlayer.jpg" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
											 jQuery('#imgShow'+o).css("cursor","pointer");
										 }else{
											 jQuery("#videoimg"+o).append('<img src="'+videoUrl+'" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
											 jQuery('#imgShow'+o).css("cursor","pointer");
										 }
								         jQuery('#imgShow'+o).attr("onclick","showVideo()");  
									 }
					             }else{
						             if(videoUrl==''){
						            	 jQuery("#videoimg"+o).append('<img src="#{request.contextPath}/asset/images/videoPlayer.jpg" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
							         }else{
							        	 jQuery("#videoimg"+o).append('<img src="'+videoUrl+'" id="imgShow'+o+'"/><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
								     }
					            	 webcam_url = video.webcam_url; 
									 if(webcam_url!="" && webcam_url != null){ 
						            	 jQuery("#videoActiveX"+o).hide();
						            	 if(videoUrl==''){
						            		 jQuery('#imgShow'+o).css("cursor","pointer");
						            	 }else{
						            		 jQuery('#imgShow'+o).css("cursor","pointer");
							             }
									     jQuery('#imgShow'+o).attr("onclick","showVideo()");  
									 }else{
										 jQuery("#videoActiveX").hide();
										 if(videoUrl==''){
											 jQuery('#imgShow'+o).attr("src","#{request.contextPath}/asset/images/videoPlayer.jpg").css("cursor","pointer");
										 }else{
											 jQuery('#imgShow'+o).attr("src",videoUrl).css("cursor","pointer");
										 }
						            	 
									 }
							     }
					        }else if(video.device_type_id == 301 && video.type == 1){
								if(isIE == 1 ){
									if(video.type == 1){
										if(videoUrl==''){
											jQuery("#videoimg"+o).html('<img src="#{request.contextPath}/asset/images/videoPlayer.jpg" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/cmsocx.exe">视频插件下载</a>');
										}else{
											jQuery("#videoimg"+o).html('<img src="'+videoUrl+'" id="imgShow'+o+'"/><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/cmsocx.exe">视频插件下载</a>');
										}
									 	jQuery('#imgShow'+o).css("cursor","pointer");
									 	jQuery('#imgShow'+o).attr("onclick","showVideo()");  
									}else{
										if(videoUrl==''){
											jQuery("#videoimg"+o).html('<img src="#{request.contextPath}/asset/images/videoPlayer.jpg" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/EHomeActiveX.exe">视频插件下载</a>');
										}else{
											jQuery("#videoimg"+o).html('<img src="'+videoUrl+'" id="imgShow'+o+'"/><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/EHomeActiveX.exe">视频插件下载</a>');
										}
									 	jQuery('#imgShow'+o).css("cursor","pointer");
									 	jQuery('#imgShow'+o).attr("onclick","showVideo()");
									}
								}else{
									webcam_url = video.webcam_url; 
									if(videoUrl==''){
										jQuery("#videoimg"+o).html('<img src="#{request.contextPath}/asset/images/videoPlayer.jpg" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/EHomeActiveX.exe">视频插件下载</a>');
									}else{
										jQuery("#videoimg"+o).html('<img src="'+videoUrl+'" id="imgShow'+o+'"/><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/EHomeActiveX.exe">视频插件下载</a>');
									}
									 if(webcam_url!="" && webcam_url != null){ 
										jQuery("#videoActiveX"+o).hide();
										if(videoUrl==''){
											 jQuery('#imgShow'+o).css("cursor","pointer");
										 }else{
											 jQuery('#imgShow'+o).css("cursor","pointer");
										 }
								        jQuery('#imgShow'+o).attr("onclick","showVideo()");  
									 }else{
										 jQuery("#videoActiveX"+o).hide();
										 if(videoUrl==''){
											 jQuery('#imgShow'+o).css("cursor","pointer");
										 }else{
											 jQuery('#imgShow'+o).css("cursor","pointer");
										 }
										 jQuery('#imgShow'+o).attr("onclick","showVideo()");
									 }
								}
							}else{
								if(videoUrl==''){
									jQuery("#videoimg"+o).html('<img src="#{request.contextPath}/asset/images/videoPlayer.jpg" id="imgShow'+o+'"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/EHomeActiveX.exe">视频插件下载</a>');
									jQuery("#videoActiveX"+o).hide();
					           		jQuery('#imgShow'+o).attr("src","#{request.contextPath}/asset/images/videoPlayer.jpg").css("cursor","pointer");
								}else{
									jQuery("#videoimg"+o).html('<img src="'+videoUrl+'" id="imgShow'+o+'"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/EHomeActiveX.exe">视频插件下载</a>');
									jQuery("#videoActiveX"+o).hide();
					           		jQuery('#imgShow'+o).attr("src",videoUrl).css("cursor","pointer");
								}
							}
							//jQuery('.tab_content .m_panel .panel_video').eq(0).hide();
							//jQuery('.tab_content .m_panel .panel_video').eq(1).show();
						}else{
				        	jQuery("#videoList").append('<li id="video'+o+'" class="live_li"></li>');
			    	        jQuery("#video"+o).append('<div class="video player1" id="HLSPlayer'+o+'"></div>');
			    	        if(videoUrl==''){
			    	        	jQuery("#HLSPlayer"+o).append('<img src="#{request.contextPath}/asset/images/videoPlayer.jpg" id="imgShow" style="width: 378px; height: 258px;"/>');
					    	}else{
					    		jQuery("#HLSPlayer"+o).append('<img src="'+videoUrl+'" id="imgShow" style="width: 378px; height: 258px;"/>');
						    }
			    	        
						}
				    }
		        }
				if(videoList[0].playNum == 1 ){
					jQuery('#skzb_btn').addClass('shikuang_btn').removeClass('shikuangs_btn');

					for(var o in videoList ){
						if(jQuery('#divPlugin'+o).html() != undefined){
							 video = videoList[o];
							 jQuery("#videoimg"+o).empty();
							 if((video.device_type_id == 301 && video.type == 3)||video.device_type_id == 305){
								 if (-1 == WebVideoCtrl.I_CheckPluginInstall()) {
									 if(videoUrl==''){
										 jQuery("#videoimg"+o).append('<img src="#{request.contextPath}/asset/images/nosp.png" id="imgShow'+o+'"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
									 }else{
										 jQuery("#videoimg"+o).append('<img src="'+videoUrl+'" id="imgShow'+o+'"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
									 }
								 }else{
									 if(videoUrl==''){
										 jQuery("#videoimg"+o).append('<img src="#{request.contextPath}/asset/images/videoPlayer.jpg" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
										 jQuery('#imgShow'+o).css("cursor","pointer");
									 }else{
										 jQuery("#videoimg"+o).append('<img src="'+videoUrl+'" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
										 jQuery('#imgShow'+o).css("cursor","pointer");
									 }
							         jQuery('#imgShow'+o).attr("onclick","showVideo()");  
								 }
							 }else{
								 if(videoUrl==''){
									 jQuery("#videoimg"+o).html('<img src="#{request.contextPath}/asset/images/videoPlayer.jpg" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/cmsocx.exe">视频插件下载</a>');
								 }else{
									 jQuery("#videoimg"+o).html('<img src="'+videoUrl+'" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/cmsocx.exe">视频插件下载</a>');
								 }
								 jQuery('#imgShow'+o).css("cursor","pointer");
							 	 jQuery('#imgShow'+o).attr("onclick","showVideo()"); 
							 }
						}
			     	}
					
				}else{
					jQuery('#skzb_btn').addClass('shikuangs_btn').removeClass('shikuang_btn');
					jQuery('#skzb_btn').find('i').unbind();
					jQuery('#skzb_btn').find('i').click(function(){
						  var aa=jQuery('#play_btn').val();
						  if(aa == 1){
						    videos();
						  }else{
						    webUrlPlay();
						  }
					});
	    			
				}
         	}else{
         		jQuery("#videoList").append('<li id="video'+o+'" class="live_li"></li>');
    	        jQuery("#video"+o).append('<div class="video player1" id="HLSPlayer'+o+'"></div>');
				if(videoUrl==''){
					jQuery("#HLSPlayer"+o).append('<img src="#{request.contextPath}/asset/images/nosp.png" id="imgShow" style="width: 378px; height: 258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX" href="http://img1.farmeasy.cn/plugin/cmsocx.exe">视频插件下载</a>');
				}else{
					jQuery("#HLSPlayer"+o).append('<img src="'+videoUrl+'" id="imgShow" style="width: 378px; height: 258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX" href="http://img1.farmeasy.cn/plugin/cmsocx.exe">视频插件下载</a>');
				}
    	        jQuery('.btn_prev').hide();
            	jQuery('.btn_next').hide();

            	jQuery('#videoType').hide();
    	    	jQuery('.i_arrow').hide();
    	    	jQuery('#aaa').hide();
            }
		}
         	if(videoList.length<=1){
            	jQuery('.btn_prev').hide();
            	jQuery('.btn_next').hide();
    		}
	    }

		 if(video_flag){
			 var plantVidoe = jQuery('#realPlantUrl').val();
				if(plantVidoe != ''){
					jQuery("#plantVideos").empty();
					var scriptAdd  = '<video id="plantVideo'+o+'" class="video-js vjs-default-skin vjs-big-play-centered" style="width:100%;height:100%;" preload="auto" controls><source src="'+plantVidoe+'" type="application/x-mpegURL"/></video>';
					jQuery("#plantVideos").append(scriptAdd);
	    			
		        }
		}else{
			var plantVidoe = jQuery('#realPlantUrl').val();
			if(plantVidoe != ''){
				jQuery("#plantVideos").empty();
				var scriptAdd = "<script> var vID = 'plantVideos';var vWidth = '100%';var vHeight = '100%';var vPlayer = '#{request.contextPath}/document/player.swf?autostart=true';var vHLSset = '#{request.contextPath}/document/HLS.swf';var vPic = ''; var vHLSurl = '"+plantVidoe+"' ;a.init('plantVideos');<\/script>";
				jQuery("#plantVideos").append(scriptAdd);
			}
		}
	    
		setTimeout(function(){ 
			jQuery('#treeDemo').css({
				"height":jQuery(window).height()-60,
				"min-height":jQuery(".left_c1").height()
				});  
			jQuery('.foldBtn').css({
				"height":jQuery(window).height()-60,
				"min-height":jQuery(".left_c1").height()
				});
		},500);   

		//监控悬浮框切换效果
		jQuery('.tab_header .titem').each(function(index, elem) {
	        jQuery('.tab_header .titem').eq(0).addClass('dq_cur');
			jQuery('.tab_content .m_panel').eq(0).addClass('dq_cur');
			jQuery('li.titem').click(function(){
				jQuery(this).addClass('dq_cur').siblings().removeClass('dq_cur');
				jQuery('.tab_content .m_panel').eq(jQuery(this).index()).addClass('dq_cur').siblings().removeClass('dq_cur');
				var aaa=jQuery(this).html();
				var showNew = jQuery("#showNow").val();
				if(aaa.indexOf('实况直播') >= 0){
					if(showNew == 2){
						if(video_flag){
							for(var o in videoList ){
								if(v_url == ''){
									v_url = videoList[o].webcam_url;
									player.dispose();//清理
									jQuery("#videoList").append('<li id="video'+o+'" class="live_li"></li>');
					    	        jQuery("#video"+o).append('<div class="video player1" id="HLSPlayer'+o+'">');
					    	        var scriptAdd  = '<video id="live-video'+o+'" class="video-js vjs-default-skin vjs-big-play-centered" style="width:100%;height:100%;" preload="auto" controls><source src="'+v_url+'" type="application/x-mpegURL"/></video>';
					    			jQuery("#HLSPlayer"+o).append(scriptAdd);
					    			player = videojs("live-video"+o);
					 	   		    player.play();
								}
					   		 }
						}else{
							videos();
						}
					}else{
						//jQuery("#videoList").html("");
						var url="";
			            if(videoList[num].webcam_url != null && videoList[num].webcam_url != 'null' && videoList[num].webcam_url != ''){
							url = videoList[num].webcam_url;
				        }
		            	//jQuery("#videoList").append('<li id="video'+num+'" class="live_li"></li>');
		            	jQuery("#video"+num).empty();

		            	if(video_flag){
		            		player.dispose();//清理
							jQuery("#videoList").append('<li id="video'+num+'" class="live_li"></li>');
			    	        jQuery("#video"+num).append('<div class="video player1" id="HLSPlayer'+num+'">');
			    	        var scriptAdd  = '<video id="live-video'+num+'" class="video-js vjs-default-skin vjs-big-play-centered" style="width:100%;height:100%;" preload="auto" controls><source src="'+url+'" type="application/x-mpegURL"/></video>';
			    			jQuery("#HLSPlayer"+num).append(scriptAdd);
			    			player = videojs("live-video"+num);
			 	   		    player.play();
			            }else{
			    	        jQuery("#video"+num).append('<div class="video player1" id="HLSPlayer'+num+'">');
			    	        var scriptAdd = "<script> var vID = 'HLSPlayer"+num+"';var vWidth = '100%';var vHeight = '100%';var vPlayer = '#{request.contextPath}/document/player.swf?autostart=true';var vHLSset = '#{request.contextPath}/document/HLS.swf';var vPic = ''; var vHLSurl = '"+url+"';a.init('HLSPlayer"+num+"');<\/script>";
			    			jQuery("#HLSPlayer"+num).append(scriptAdd);
			            }
					}
				}else if(aaa.indexOf('视频追溯') >= 0){
					if(video_flag){
						var plantVidoe = jQuery('#realPlantUrl').val();
						if(plantVidoe != ''){
							jQuery("#plantVideos").empty();
							player.dispose();//清理
							var scriptAdd  = '<video id="plantVideo" class="video-js vjs-default-skin vjs-big-play-centered" style="width:100%;height:100%;" preload="auto" controls><source src="'+plantVidoe+'" type="application/x-mpegURL"/></video>';
							jQuery("#plantVideos").append(scriptAdd);
							player = videojs("plantVideo");
			 	   		    player.play();
				        }
					}
				}

					
			});
	    });

		if(videoList.length > 0){
			//监控悬浮--实况直播视频轮播切换
			VideoPanel();
			if(videoList.length<=1){
	        	jQuery('.btn_prev').hide();
	        	jQuery('.btn_next').hide();
			}
		}else{
			jQuery('.btn_prev').hide();
	    	jQuery('.btn_next').hide();
		}

		//监控悬浮--实况直播视频轮播切换
		function VideoPanel(){
			var VLinum = 0;
			var VLength = jQuery('.panel_videoJK .live_li').length;
			//var VMaxlength = VLength-1;
			var VMaxlength = videoList.length-1;
			var VWidth = jQuery('.panel_videoJK .live_li').outerWidth();

			jQuery('.live_ol').width( VWidth*(VMaxlength+1) )
			jQuery('.live_ol').css('left',0);
			
			if( VMaxlength<0 ){
				jQuery('.panel_videoJK .btn_prev').click(function(){
					VLinum = 0;
					num = 0;
					jQuery('.live_ol').stop().animate({left:-VWidth*VLinum});
				});
				jQuery('.panel_videoJK .btn_next').click(function(){
					VLinum = 0;
					num = 0;
					jQuery('.live_ol').stop().animate({left:-VWidth*VLinum});
				});	
			}else{
				jQuery('.panel_videoJK .btn_prev').click(function(){
					VLinum--;
					if( VLinum<0 ){ VLinum =0 }
					num = VLinum;
					if(video_flag){
						jQuery('#skzb_btn').addClass('shikuang_btn').removeClass('shikuangs_btn');
						jQuery("#videoList").empty(); 
						var url = "";
						for(var o in videoList ){
							if(o == num){
								url = videoList[o].webcam_url;
								player.dispose();//清理
								jQuery("#videoList").append('<li id="video'+o+'" class="live_li"></li>');
				    	        jQuery("#video"+o).append('<div class="video player1" id="HLSPlayer'+o+'">');
				    	        var scriptAdd  = '<video id="live-video'+o+'" class="video-js vjs-default-skin vjs-big-play-centered" style="width:100%;height:100%;" preload="auto" controls><source src="'+url+'" type="application/x-mpegURL"/></video>';
				    			jQuery("#HLSPlayer"+o).append(scriptAdd);
				    			player = videojs("live-video"+o);
				 	   		    player.play();
							}
				     	}
					}else{
						jQuery('.live_ol').stop().animate({left:-VWidth*VLinum});
						if(videoList[VLinum].playNum == 1 ){
							jQuery('#skzb_btn').addClass('shikuang_btn').removeClass('shikuangs_btn');
							for(var o in videoList ){
								if(jQuery('#divPlugin'+o).html() != undefined){
									 video = videoList[o];
									 jQuery("#videoimg"+o).empty();
									 if((video.device_type_id == 301 && video.type == 3)||video.device_type_id == 305){
										 if (-1 == WebVideoCtrl.I_CheckPluginInstall()) {
											if(videoUrl==''){
												jQuery("#videoimg"+o).append('<img src="#{request.contextPath}/asset/images/nosp.png" id="imgShow'+o+'"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
											}else{
												jQuery("#videoimg"+o).append('<img src="'+videoUrl+'" id="imgShow'+o+'"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
											}
										 }else{
											 if(videoUrl==''){
												 jQuery("#videoimg"+o).append('<img src="#{request.contextPath}/asset/images/videoPlayer.jpg" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
											 	 jQuery('#imgShow'+o).css("cursor","pointer");
											 }else{
												 jQuery("#videoimg"+o).append('<img src="'+videoUrl+'" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
												 jQuery('#imgShow'+o).css("cursor","pointer");
											 }
									         jQuery('#imgShow'+o).attr("onclick","showVideo()");  
										 }
									 }else{
										 if(videoUrl==''){
										 	jQuery("#videoimg"+o).html('<img src="#{request.contextPath}/asset/images/videoPlayer.jpg" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/cmsocx.exe">视频插件下载</a>');
										 }else{
											jQuery("#videoimg"+o).html('<img src="'+videoUrl+'" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/cmsocx.exe">视频插件下载</a>');
										 }
										 jQuery('#imgShow'+o).css("cursor","pointer");
									 	 jQuery('#imgShow'+o).attr("onclick","showVideo()"); 
									 }
								}
					     	}
							
						}else{
							jQuery('#skzb_btn').addClass('shikuangs_btn').removeClass('shikuang_btn');
							for(var o in videoList ){
								if(jQuery('#divPlugin'+o).html() != undefined){
									 video = videoList[o];
									 jQuery("#videoimg"+o).empty();
									 if((video.device_type_id == 301 && video.type == 3)||video.device_type_id == 305){
										 if (-1 == WebVideoCtrl.I_CheckPluginInstall()) {
											if(videoUrl==''){
												jQuery("#videoimg"+o).append('<img src="#{request.contextPath}/asset/images/nosp.png" id="imgShow'+o+'"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
											}else{
												jQuery("#videoimg"+o).append('<img src="'+videoUrl+'" id="imgShow'+o+'"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
											}
										 }else{
											 if(videoUrl==''){
												 jQuery("#videoimg"+o).append('<img src="#{request.contextPath}/asset/images/videoPlayer.jpg" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
											 	 jQuery('#imgShow'+o).css("cursor","pointer");
											 }else{
												 jQuery("#videoimg"+o).append('<img src="'+videoUrl+'" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
												 jQuery('#imgShow'+o).css("cursor","pointer");
											 }
									         jQuery('#imgShow'+o).attr("onclick","showVideo()");  
										 }
									 }else{
										 if(videoUrl==''){
										 	jQuery("#videoimg"+o).html('<img src="#{request.contextPath}/asset/images/videoPlayer.jpg" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/cmsocx.exe">视频插件下载</a>');
										 }else{
											jQuery("#videoimg"+o).html('<img src="'+videoUrl+'" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/cmsocx.exe">视频插件下载</a>');
										 }
										 jQuery('#imgShow'+o).css("cursor","pointer");
									 	 jQuery('#imgShow'+o).attr("onclick","showVideo()"); 
									 }
								}
					     	}
							jQuery('#skzb_btn').find('i').unbind();
							jQuery('#skzb_btn').find('i').click(function(){
								  var aa=jQuery('#play_btn').val();
								  if(aa == 1){
								    videos();
								  }else{
								    webUrlPlay();
								  }
							});
			    			
						}
						
					}
					
					/* if(videoList[VLinum].playNum==1){
						jQuery('#videoType').hide();
		    	    	jQuery('.i_arrow').hide();
		    	    	jQuery('#aaa').hide();
					}else{
						jQuery('#videoType').show();
		    	    	jQuery('.i_arrow').show();
		    	    	jQuery('#aaa').show();
					} */
				});
				jQuery('.panel_videoJK .btn_next').click(function(){
					VLinum++;
					if( VLinum>VMaxlength ){ VLinum =VMaxlength }
					num = VLinum;
					if(video_flag){
						jQuery('#skzb_btn').addClass('shikuang_btn').removeClass('shikuangs_btn');
						jQuery("#videoList").empty(); 
						var url = "";
						for(var o in videoList ){
							if(o == num){
								url = videoList[o].webcam_url;
								player.dispose();//清理
								jQuery("#videoList").append('<li id="video'+o+'" class="live_li"></li>');
				    	        jQuery("#video"+o).append('<div class="video player1" id="HLSPlayer'+o+'">');
				    	        var scriptAdd  = '<video id="live-video'+o+'" class="video-js vjs-default-skin vjs-big-play-centered" style="width:100%;height:100%;" preload="auto" controls><source src="'+url+'" type="application/x-mpegURL"/></video>';
				    			jQuery("#HLSPlayer"+o).append(scriptAdd);
				    			player = videojs("live-video"+o);
				 	   		    player.play();
							}
				     	}
					}else{
						jQuery('.live_ol').stop().animate({left:-VWidth*VLinum});
					if(videoList[VLinum].playNum == 1 ){
						jQuery('#skzb_btn').addClass('shikuang_btn').removeClass('shikuangs_btn');
						for(var o in videoList ){
							if(jQuery('#divPlugin'+o).html() != undefined){
								 video = videoList[o];
								 jQuery("#videoimg"+o).empty();
								 if((video.device_type_id == 301 && video.type == 3)||video.device_type_id == 305){
									 if (-1 == WebVideoCtrl.I_CheckPluginInstall()) {
										 if(videoUrl==''){
										 	 jQuery("#videoimg"+o).append('<img src="#{request.contextPath}/asset/images/nosp.png" id="imgShow'+o+'"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
										 }else{
											 jQuery("#videoimg"+o).append('<img src="'+videoUrl+'" id="imgShow'+o+'"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
										 }	
									 }else{
										if(videoUrl==''){
											jQuery("#videoimg"+o).append('<img src="#{request.contextPath}/asset/images/videoPlayer.jpg" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
											jQuery('#imgShow'+o).css("cursor","pointer");
										}else{
											jQuery("#videoimg"+o).append('<img src="'+videoUrl+'" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
											jQuery('#imgShow'+o).css("cursor","pointer");
										}
								        jQuery('#imgShow'+o).attr("onclick","showVideo()");  
									 }
								 }else{
									 if(videoUrl==''){
										 jQuery("#videoimg"+o).html('<img src="#{request.contextPath}/asset/images/videoPlayer.jpg" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/cmsocx.exe">视频插件下载</a>');
									 }else{
										 jQuery("#videoimg"+o).html('<img src="'+videoUrl+'" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/cmsocx.exe">视频插件下载</a>');
									 }
									 jQuery('#imgShow'+o).css("cursor","pointer");
								 	 jQuery('#imgShow'+o).attr("onclick","showVideo()"); 
								 }
							}
				     	}
					}else{
						jQuery('#skzb_btn').addClass('shikuangs_btn').removeClass('shikuang_btn');
						for(var o in videoList ){
							if(jQuery('#divPlugin'+o).html() != undefined){
								 video = videoList[o];
								 jQuery("#videoimg"+o).empty();
								 if((video.device_type_id == 301 && video.type == 3)||video.device_type_id == 305){
									 if (-1 == WebVideoCtrl.I_CheckPluginInstall()) {
										 if(videoUrl==''){
										 	 jQuery("#videoimg"+o).append('<img src="#{request.contextPath}/asset/images/nosp.png" id="imgShow'+o+'"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
										 }else{
											 jQuery("#videoimg"+o).append('<img src="'+videoUrl+'" id="imgShow'+o+'"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
										 }	
									 }else{
										if(videoUrl==''){
											jQuery("#videoimg"+o).append('<img src="#{request.contextPath}/asset/images/videoPlayer.jpg" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
											jQuery('#imgShow'+o).css("cursor","pointer");
										}else{
											jQuery("#videoimg"+o).append('<img src="'+videoUrl+'" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
											jQuery('#imgShow'+o).css("cursor","pointer");
										}
								        jQuery('#imgShow'+o).attr("onclick","showVideo()");  
									 }
								 }else{
									 if(videoUrl==''){
										 jQuery("#videoimg"+o).html('<img src="#{request.contextPath}/asset/images/videoPlayer.jpg" /><img src="/asset/images/videoPlayer.png" id="imgShow'+o+'" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/cmsocx.exe">视频插件下载</a>');
									 }else{
										 jQuery("#videoimg"+o).html('<img src="'+videoUrl+'" /><img id="imgShow'+o+'" src="/asset/images/videoPlayer.png" style="width: 376px; height: 258px; border-top-width: 0px; margin-top: -258px;"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX'+o+'" href="http://img1.farmeasy.cn/plugin/cmsocx.exe">视频插件下载</a>');
									 }
									 jQuery('#imgShow'+o).css("cursor","pointer");
								 	 jQuery('#imgShow'+o).attr("onclick","showVideo()"); 
								 	//jQuery('#imageShow'+o).attr("onclick","showVideo()"); 
								 }
							}
				     	}
						jQuery('#skzb_btn').find('i').unbind();
						jQuery('#skzb_btn').find('i').click(function(){
							  var aa=jQuery('#play_btn').val();
							  if(aa == 1){
							    videos();
							  }else{
							    webUrlPlay();
							  }
						});
		    			
					}
					}
					/* if(videoList[VLinum].playNum==1){
						jQuery('#videoType').hide();
		    	    	jQuery('.i_arrow').hide();
		    	    	jQuery('#aaa').hide();
					}else{
						jQuery('#videoType').show();
		    	    	jQuery('.i_arrow').show();
		    	    	jQuery('#aaa').show();
					} */
				});		
			}
		}

		

		//监控悬浮--生长图片轮播图
		if( jQuery(window).width() <1280){
			jQuery('.monitor_suspend').addClass('small_monitor');
		}else{
			jQuery('.monitor_suspend').removeClass('small_monitor');	
		}
		
		EnvironFigure();
		function EnvironFigure(){
			var oSLinum = 0;
			var oBLinum = 0;
			var oBlength = jQuery('.biger_figure li').length;
			var oSMaxlength = oBlength-5;
			var oBMaxlength = oBlength-1;
			var oSLiwidth = jQuery('.small_figure li').outerWidth()+8;
			var oBLiwidth = jQuery('.biger_figure li').outerWidth();
			jQuery('.small_figure').width( oSLiwidth*oBlength )
			jQuery('.biger_figure').width( oBLiwidth*oBlength )
			
			jQuery('.biger_figure').css('left',0);
			jQuery('.small_figure').css('left',0);
			jQuery('.small_figure li').eq(0).addClass('dq_cur').siblings().removeClass('dq_cur');
			
			if( oBMaxlength < 0 ){
				jQuery('.btnb_prev').click(function(){
					//大图--左侧按钮点击事件
					oBLinum = 0;	
					jQuery('.biger_figure').stop().animate({left:-oBLiwidth*oBLinum} )	
				});
				jQuery('.btnb_next').click(function(){
					//大图--右侧按钮点击事件
					oBLinum = 0;	
					jQuery('.biger_figure').stop().animate({left:-oBLiwidth*oBLinum} )	
				});
			}else{
				jQuery('.btnb_prev').click(function(){
					//大图--左侧按钮点击事件
					oBLinum--;
					if( oBLinum < 0 ){
						oBLinum = 0;
						//alert('已经是第一张了，前面没有了');	
					}	
					if( oBLinum > oSMaxlength){
						jQuery('.small_figure').stop().animate({left:-oSLiwidth*oSMaxlength} )	;	
					}else{
						jQuery('.small_figure').stop().animate({left:-oSLiwidth*oBLinum} )	;	
					}
					jQuery('.biger_figure').stop().animate({left:-oBLiwidth*oBLinum} )	;
					//jQuery('.small_figure').animate({left:-oSLiwidth*oBLinum} )	;
					jQuery('.small_figure li').eq(oBLinum).addClass('dq_cur').siblings().removeClass('dq_cur');
				});
				jQuery('.btnb_next').click(function(){
					//大图--右侧按钮点击事件
					oBLinum++;
					if( oBLinum > oBMaxlength){
						oBLinum = oBMaxlength	;
						//alert('已经是最后一张了，后面没有了');	
					}
					if( oBLinum > oSMaxlength){
						jQuery('.small_figure').stop().animate({left:-oSLiwidth*oSMaxlength} )	;	
					}else{
						jQuery('.small_figure').stop().animate({left:-oSLiwidth*oBLinum} )	;	
					}
					jQuery('.biger_figure').stop().animate({left:-oBLiwidth*oBLinum} )	;
					//jQuery('.small_figure').animate({left:-oSLiwidth*oBLinum} )	;
					jQuery('.small_figure li').eq(oBLinum).addClass('dq_cur').siblings().removeClass('dq_cur');
				});	
			}
			
			if( oSMaxlength < 0 ){
				jQuery('.figure_footer .btns_prev').click(function(){
					//缩略图--左侧按钮点击事件
					oSLinum = 0;	
					jQuery('.small_figure').stop().animate({left:-oSLiwidth*oSLinum} )	
				});
				jQuery('.figure_footer .btns_next').click(function(){
					//缩略图--右侧按钮点击事件
					oSLinum = 0;	
					jQuery('.small_figure').stop().animate({left:-oSLiwidth*oSLinum} )	
				});
			}else{
				jQuery('.figure_footer .btns_prev').click(function(){
					//缩略图--左侧按钮点击事件
					oSLinum--;
					if( oSLinum < 0 ){
						oSLinum = 0;	
					}	
					jQuery('.small_figure').stop().animate({left:-oSLiwidth*oSLinum} )	
				});
				jQuery('.figure_footer .btns_next').click(function(){
					//缩略图--右侧按钮点击事件
					oSLinum++;
					if( oSLinum > oSMaxlength){
						oSLinum = oSMaxlength	
					}
					jQuery('.small_figure').stop().animate({left:-oSLiwidth*oSLinum} )	
				});	
			}
			
			jQuery('.small_figure li').each(function(index, elem) {
				//缩略图--点击小图事件
				jQuery(elem).click(function(){
					jQuery(this).addClass('dq_cur').siblings().removeClass('dq_cur');	
					jQuery('.biger_figure').stop().animate({left:-oBLiwidth*jQuery(this).index()} )	;
					return oBLinum=jQuery(this).index()
				});
			});
		}
		
	}    
	var w=0;
	var h=0;
    function maxwindow(){
        w=jQuery("#videoimg"+num).width();
        h=jQuery("#videoimg"+num).height();
    	var width=document.body.offsetWidth;
    	var height=document.body.offsetHeight;
    	var target = jQuery("#videoimg"+num);
    	target.css({"position":"fixed","top":"0","left":"0","width":width,"height":height,"z-index":"9999"});
    	target.find(".small-video-control").css({"width":width,"background":"black"});
    	target.find("#divPlugin"+num).css("height",height-92).css("width",width);
    	target.find("object").attr("width",width).attr("height",height-92);
    	target.find(".videobg").css({"width":width,"height":height-92});
    	target.find(".fdimg1").hide();
    	target.find(".fdimg2").show();
    	jQuery('.btn_prev').hide();
    	jQuery('.btn_next').hide();
    }
    function minwindow(){
    	//var width=jQuery(".videoTd").width();
    	//var height=jQuery(".videoTd").height();
    	var width=w;
    	var height=h;
    	var target = jQuery("#videoimg"+num);
    	target.css({"position":"","width":width,"height":height});
   		target.find("#divPlugin"+num).css("width",width).css("height",height-75);
   		target.find("object").attr("width",width).attr("height",height-75);
   		target.find(".small-video-control").css({"width":width,"background":"none"});
    	target.find(".fdimg1").show();
    	target.find(".fdimg2").hide();
    	jQuery('.btn_prev').show();
    	jQuery('.btn_next').show();
    }


    
    function maxwindow2(){
        w=jQuery("#videoimg"+num).width();
        h=jQuery("#videoimg"+num).height();
    	var width=document.body.offsetWidth;
    	var height=document.body.offsetHeight;
    	jQuery("#old_hk").css({"width":width,"height":height*0.9});
    	var target = jQuery("#videoimg"+num);
    	target.css({"position":"fixed","top":"0","left":"0","width":width,"height":height,"z-index":"9999"});
    	target.find(".small-video-control").css({"width":width,"background":"black"});
    	//target.find("#divPlugin"+num).css("height",height-92).css("width",width);
    	target.find("object").attr("width",width).attr("height",height-92);
    	target.find(".videobg").css({"width":width,"height":height-92});
    	target.find(".fdimg1").hide();
    	target.find(".fdimg2").show();
    	jQuery('.btn_prev').hide();
    	jQuery('.btn_next').hide();
    }
    function minwindow2(){
    	//var width=jQuery(".videoTd").width();
    	//var height=jQuery(".videoTd").height();
    	var width=w;
    	var height=h;
    	jQuery("#old_hk").css({"width":"100%","height":"186px"});
    	var target = jQuery("#videoimg"+num);
    	target.css({"position":"","width":width,"height":height});
   		//target.find("#divPlugin"+num).css("width",width).css("height",height*0.7);
   		target.find("object").attr("width",width).attr("height",height);
   		target.find(".small-video-control").css({"width":width,"background":"none"});
    	target.find(".fdimg1").show();
    	target.find(".fdimg2").hide();
    	jQuery('.btn_prev').show();
    	jQuery('.btn_next').show();
    }

    
    var g_iWndIndex =0;
    var szIP;
	var szChannelID;
	//显示视频 
	var webcam_url = "";
	
	var re =  /^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/  
	var ipMap = new JsMap();
	
	function showVideo(){
		var ip;
		ip = getIp();
		if(!ipMap.containsKey(ip)){
			if(re.test(ip)){
				ipMap.put(ip,ip);
				showVideo_next();
			}else{
				var url = "#{request.contextPath}/util/cdServlet";
				jquery.ajax({
					type : "get",
					url : url,
					data : "type=getIp&uname=" + ip,
					success : function(msg) {
						if(msg==""){
							ipMap.put(ip,ip);
							showVideo_next();
						}else{
							ipMap.put(ip,msg);
							setIp(msg);
							showVideo_next();
						}
					}
				});
			}
		}else{
			var realIp = ipMap.get(ip);
			setIp(realIp);
			showVideo_next();
		}
	}
	
	function getIp(){
		var ip = "";
		for(var o in videoList){
            //showVideo(data.video);
            if(o == num){
	            video = videoList[o];
				if(video.type==1){
					ip = video.app_ip;    
				}else if(video.type==2){
					ip = video.ip;
				}else if(video.type==3){
					ip = video.app_ip;
				}
            }
		}
		return ip;
	}
	
	function setIp(ip){
		for(var o in videoList){
            //showVideo(data.video);
            if(o == num){
	            video = videoList[o];
				if(video.type==1){
					video.app_ip = ip ;    
				}else if(video.type==2){
					video.ip = ip ;
				}else if(video.type==3){
					video.app_ip = ip ;
				}
			}
		}
	}
	
	function showVideo_next(){
		jQuery('div#menu .siteSeleBd ul, div#menu .helpSeleBd ul').css("border-radius","8px 8px 0 0");
		jQuery('.exit-block').css("border-radius","0");
		 if((video.device_type_id == 301 && video.type == 3)||video.device_type_id == 305){
			 if(isWindow == 1){
				 //未安装视频插件
				 if (-1 == WebVideoCtrl.I_CheckPluginInstall()) {
					 jQuery("#videoimg"+num).html("");
					 jQuery("#videoimg"+num).append('<img src="#{request.contextPath}/asset/images/nosp.png" id="imgShow"/>');	
				 }else{
					 var oClictWid = jQuery(window).width();
					 var imgwidth = 40;
					 var imgheight = 40;
					 var margintop = 15;
						if(oClictWid < 1280){
							imgwidth = 24;
							imgheight = 24;
							margintop = 25;
						}else{
							margintop = 15;
							}
					 var hei = jQuery("#videoimg"+num).height();
					 var liHei = jQuery('.live_ol .live_li').outerHeight()-75;
					 var html = "<div class='divPlugin_gs' id='divPlugin"+num+"' style='width:100%;height:"+liHei+"px;'></div>";//(hei*0.7)
					 html +="<div class='small-video-control' style='width:100%; margin:0; border-top:1px solid #96a1b4;'>";
					 html +="<img class='fdimg1' src='#{request.contextPath}/asset/images/fangda.png' style='cursor:pointer;height:"+imgheight+"px;width:"+imgwidth+"px;margin-top:"+margintop+"px' onclick='maxwindow(1,this)'/>";
					 html +="<img class='fdimg2' src='#{request.contextPath}/asset/images/suoxiao.png' style='cursor:pointer;display:none;height:50px;width:50px;margin-top:10px' onclick='minwindow(1,this)'/>";
					 html +="<div class='btns-control-ct'><div class='resize-control'><span class='resize-smaller' onmousedown='PTZZoomout()' onmouseup='PTZZoomStop()'></span><span class='resize-bigger' onmousedown='PTZZoomIn()' onmouseup='PTZZoomStop()'></span></div><div class='play-control'><span></span></div>";
                     html +="<div class='direction-control'><span class='play-top' onmousedown='mouseDownPTZControl(1)' onmouseup='mouseUpPTZControl()'></span><span class='play-right' onmousedown='mouseDownPTZControl(4)' onmouseup='mouseUpPTZControl()'></span><span class='play-bottom' onmousedown='mouseDownPTZControl(2)' onmouseup='mouseUpPTZControl()'></span><span class='play-left' onmousedown='mouseDownPTZControl(3)' onmouseup='mouseUpPTZControl()'></span></div></div></div>";
                     jQuery("#videoimg"+num).empty();
					 jQuery("#videoimg"+num).append(html);
						// 监控页视频按钮控制
						jQuery('.direction-control span').click(function(){  //视频中间四个方向按钮控制
							jQuery(this).siblings().removeClass('cur');
							jQuery(this).addClass('cur');
						});
						
						jQuery('.resize-control span').click(function(){  //视频中间缩小放大按钮控制
							jQuery(this).siblings().removeClass('cur');
							jQuery(this).addClass('cur');
						});
						  
						jQuery('.play-control').click(function(){  //视频中间暂停和播放按钮控制
							if( jQuery('.play-control span').is(":hidden")){
								clickStopRealPlay();
								jQuery('.play-control span').show();
							}else{
								jQuery('.play-control span').hide();
								clickStartRealPlay(1);		
							}
						});
					 // 初始化插件参数及插入插件
					 WebVideoCtrl.I_InitPlugin("100%", "100%", {
						iWndowType:1,
						szContainerID:'divPlugin'+num,
						cbSelWnd: function(){}
					 });
					 WebVideoCtrl.I_InsertOBJECTPlugin("divPlugin"+num); 
					 var iChannelID = parseInt(video.app_device_video_channel_no, 10);//通道列表
					 var bZeroChannel = false;

					 var iout = WebVideoCtrl.I_Logout(video.app_ip);
					if (0 == iout) {
						//szInfo = "退出成功！";
						console.log("退出成功...");
					} else {
						//szInfo = "退出失败！";
						console.log("退出失败...");
					}
					 // 登录
					 var iRet = WebVideoCtrl.I_Login(video.app_ip, 1, video.app_web_port, video.app_username, video.app_password, {
						success: function (xmlDoc) {
							//console.log("登录成功...");
							szIP =video.app_ip;
							szChannelID = iChannelID;
							
							newVideoPreview(video.app_ip, 2, iChannelID, bZeroChannel);
						},
						error: function () {
							//console.log("登录失败...");
						}
					 });
					 if (-1 == iRet) {
						//console.log("已登录过...");
						szIP =video.app_ip;
						szChannelID = iChannelID;
						clickStopRealPlay();
						newVideoPreview(video.app_ip, 2, iChannelID, bZeroChannel);
					 }
				 }
			 }else{
				 jQuery("#videoActiveX").hide();
				 webcam_url = video.webcam_url; 
				 if(webcam_url!="" && webcam_url != null){ 
					jQuery("#videoimg"+num).html(""); 
					var height = jQuery("#videoimg"+num).height();
					var width = jQuery("#videoimg"+num).width();   
					var scriptAdd = "<script> var vID = 'videoimg';var vWidth = '"+width+"';var vHeight = '"+height+"';var vPlayer = '#{request.contextPath}/document/player.swf?autostart=true';var vHLSset = '#{request.contextPath}/document/HLS.swf';var vPic = ''; var vHLSurl = '"
						+ webcam_url +"';a.init('videoimg');<\/script>";   
					jQuery("#videoimg"+num).html(scriptAdd);     
				 }
		     }
		 }else{
			 if(isIE == 1){
				 jQuery("#videoimg"+num).html("");
				 if(video.type == 1){
					 //硬盘视频
					 var oClictWid = jQuery(window).width();
					 var imgwidth = 40;
					 var imgheight = 40;
					 var margintop = 10;
					 var liHei = jQuery('.panel_video').outerHeight()-75;
					 var margintop = 10;
						if(oClictWid < 1280){
							imgwidth = 24;
							imgheight = 24;
							margintop = 25;
						}else{
							margintop = 15;
							}
					 jQuery("#videoimg"+num).empty();
					 jQuery("#videoimg"+num).append("<div id='old_hk' style='height:"+liHei+"px;width:100%;overflow:hidden;'><object classid='clsid:D5E14042-7BF6-4E24-8B01-2F453E8154D7' id='PlayViewOCX' width='100%' height='258' name='ocx' style='margin-top: -27px;'/></div>");
					 var html ="<div class='small-video-control' style='width:100%; margin:0; border-top:1px solid #96a1b4;'>";
					 html +="<img class='fdimg1' src='#{request.contextPath}/asset/images/fangda.png' style='cursor:pointer;height:"+imgheight+"px;width:"+imgwidth+"px;margin-top:"+margintop+"px' onclick='maxwindow2(1,this)'/>";
					 html +="<img class='fdimg2' src='#{request.contextPath}/asset/images/suoxiao.png' style='cursor:pointer;display:none;height:50px;width:50px;margin-top:10px' onclick='minwindow2(1,this)'/>";
					 html +="<div class='btns-control-ct'><div class='resize-control'><span class='resize-smaller' onmousedown='PTZMinusTimes()' onmouseup='PTZStop()' onmouseout='PTZStop()' ></span><span class='resize-bigger' onmousedown='PTZFarFocus()' onmouseup='PTZStop()' onmouseout='PTZStop()'></span></div><div class='play-control'><span></span></div>";
                     html +="<div class='direction-control'><span class='play-top' onmousedown='PTZUp()' onmouseup='PTZStop()' onmouseout='PTZStop()'></span><span class='play-right' onmousedown='PTZRight()' onmouseup='PTZStop()' onmouseout='PTZStop()'></span><span class='play-bottom'  onmousedown='PTZDown()' onmouseup='PTZStop()' onmouseout='PTZStop()'></span><span class='play-left'  onmousedown='PTZLeft()' onmouseup='PTZStop()' onmouseout='PTZStop()'></span></div></div></div>";
                     jQuery("#videoimg"+num).append(html);
                 	// 监控页视频按钮控制
						jQuery('.direction-control span').click(function(){  //视频中间四个方向按钮控制
							jQuery(this).siblings().removeClass('cur');
							jQuery(this).addClass('cur');
						});
						
						jQuery('.resize-control span').click(function(){  //视频中间缩小放大按钮控制
							jQuery(this).siblings().removeClass('cur');
							jQuery(this).addClass('cur');
						});
						  
						jQuery('.play-control').click(function(){  //视频中间暂停和播放按钮控制
							if( jQuery('.play-control span').is(":hidden")){
								stop();
								jQuery('.play-control span').show();
							}else{
								jQuery('.play-control span').hide();
								start();		
							}
						});
					 if(document.all.PlayViewOCX.object != null){
						 var OCXobj = document.getElementById("PlayViewOCX");
				 	     OCXobj.SetOcxMode(0); 
				 	     OCXobj.SetWndNum(1);   
				    	 var strName = video.video_name;										//设备名称
				         var strIP = video.app_ip;    				        					//设备ip
				         var strAppName = video.app_username;									//用户名 
				         var strAppPwd = video.app_password;					    			//密码 
				         var strPort = video.app_port;				    						//设备端口号
				         var ChanNum1 = video.app_device_video_channel_no;  					//通道号 
				         var cameraID1 = video.app_device_video_channel_no;
				         var strXML = "<?xml version='1.0'?><Parament><CameraName>"+strName+"</CameraName><CameraID>" + cameraID1 + "</CameraID><DeviceIP>" + 
				   	 	     strIP + "</DeviceIP><DevicePort>" + strPort + "</DevicePort><User>"+ strAppName +"</User><Password>" + 
				   	 		 strAppPwd + "</Password><ChannelNum>"+ ChanNum1 +"</ChannelNum><ProtocolType>0</ProtocolType><StreamType>0</StreamType><Transmits></Transmits></Parament>";
				  	     //var win = OCXobj.GetSelWnd();  
				       	 //OCXobj.StopRealPlay(win); 
				       	 OCXobj.StartTask_Preview_InWnd(strXML,0);  
					 }else{ 
						 alert("摄像头加载出错啦");
						 jQuery("#videoimg"+num).html("");
						 jQuery("#videoimg"+num).append('<img src="#{request.contextPath}/asset/images/nosp.png" id="imgShow"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX" href="http://img1.farmeasy.cn/plugin/cmsocx.exe">视频插件下载</a>');
					 }
				 }else{
					 jQuery("#videoimg"+num).append("<object classid='clsid:EE4EA829-B8DA-4229-AC72-585AF45AD778' standby='Waiting...' id='ppvs'  width='376' height='258' name='ocx1'/>");
					 if(document.all.ppvs.object != null){
					     var iConnHandle = -1;		//连接设备返回句柄
						 var iPlayHandle = -1;		//播放视频返回句柄 
						 //var iChannel = 1;		//设备视频通道
						 var iStreamType = 1;		//取设备流类型	0：主码流	1：子码流
						 var szAccount= video.sn;
						 var szRegIP = video.ip;
						 var szUserName = video.username;
						 var szPassWord = video.password;
						 var iRegPort = 7660;
					     //7660
						 //流媒体服务IP、端口
						 var iStreamServerPort = 7554;//7554
						 var iPlayConnMode = 0;		//取流方式	0：与设备直连取流	1：通过流媒体转发取流
						 var PlayOCX = document.getElementById("ppvs");
						 iConnHandle = PlayOCX.ConnectDeviceByACS(szAccount, szRegIP, iRegPort,szUserName,szPassWord);
						 if (0 > iConnHandle){
							 jQuery("#showMessage").html("连接设备失败！");
							 jQuery("#showMessageDiv").modal('show');
							 jQuery("body").css("padding-right",0);
						 }else{
							 if ( 0 > iConnHandle){ 
								 jQuery("#showMessage").html("请先连接设备，并确保连接成功！");
								 jQuery("#showMessageDiv").modal('show');
								 jQuery('body').css('padding-right',0);
								 return;
							 } 
							 var PlayOCX = document.getElementById("ppvs");
							 PlayOCX.StreamPlayStartByTCP(szRegIP, iStreamServerPort, szAccount, "1", iStreamType, 1);
						 }
					 }else{
						 jQuery("#videoimg"+num).html(""); 
						 jQuery("#videoimg"+num).append('<img src="#{request.contextPath}/asset/images/nosp.png" id="imgShow"/><span class="Download" onclick="imgDivShow();"><i></i></span><a class="down_chajian" id="videoActiveX" href="http://img1.farmeasy.cn/plugin/EHomeActiveX.exe">视频插件下载</a>');
					 }
			     }
			 }else{ 
				 alert('当前浏览器不支持摄像头视频播放！');
				/* jQuery("#videoActiveX").hide();
				webcam_url = video.webcam_url; 
				if(webcam_url!="" && webcam_url != null){ 
					 var height = jQuery("#videoimg"+num).height();
					jQuery("#videoimg"+num).html(""); 
					//var height = jQuery("#videoimg").height();
					var width = jQuery("#videoimg").width();   
					var scriptAdd = "<script> var vID = 'videoimg';var vWidth = '"+width+"';var vHeight = '"+height+"';var vPlayer = '#{request.contextPath}/document/player.swf?autostart=true';var vHLSset = '#{request.contextPath}/document/HLS.swf';var vPic = ''; var vHLSurl = '"
						+ webcam_url +"';a.init('videoimg');<\/script>";   
					jQuery("#videoimg"+num).html(scriptAdd);     
				} */
		     } 
		 } 
	} 

	//新硬盘录像机开始预览方法
	function newVideoPreview(szIP, iStreamType, iChannelID, bZeroChannel){
		var oWndInfo = WebVideoCtrl.I_GetWindowStatus(g_iWndIndex);
		if (oWndInfo != null) {// 已经在播放了，先停止
			WebVideoCtrl.I_Stop();
		}
		console.log("预览..."+szIP+'------'+iStreamType+'-----'+iChannelID+'-----'+bZeroChannel);
		// 开始预览 
		var iRet = WebVideoCtrl.I_StartRealPlay(szIP, {iStreamType: iStreamType, iChannelID: iChannelID, bZeroChannel: bZeroChannel});
		if (iRet == 0) { 
			//console.log("开启阅览成功...");
		} else {
			//console.log("开启阅览失败...");
		}
	}

	function beforeClick(treeId, treeNode, clickFlag) {} 
	function onClick(event, treeId, treeNode, clickFlag) {
		jQuery('div#menu .siteSeleBd ul, div#menu .helpSeleBd ul').css("border-radius","8px");
		jQuery('.exit-block').css("border-radius","0 0 8px 8px");

		try{
			clickStopRealPlay();
		}catch(e){
			
		}
		var clickLevel = treeNode.nodeLevel;
		if(clickLevel == 0){
			baseSelectChange(treeNode.id); 
			jQuery('#baseLeftSelect').val(treeNode.id);
			jQuery('#baseLeftSelect').selectpicker('render');
			var baseId = treeNode.id; 
			if (baseId.indexOf("node_base") != -1) {
				baseId = baseId.replace("node_base","");  
			} 
			ifHaveDevice(baseId);
			baseStationIframe = baseId;
		}else if(clickLevel == 1){
			//分区
			if(treeNode.indexNum=="100000"){
				webcam_url = "";
				jQuery("#rightContent").hide();
				jQuery("#alarmContent").hide();  
				jQuery("#weatherContent").show();
				jQuery("#weatherContent").css("background","url('') no-repeat fixed left top rgba(0, 0, 0, 0)");     
				jQuery("#weatherContentIframe").attr("src","../growth/VideoPlay.seam?videoId="+treeNode.id);  
			}
		}else if(clickLevel == 2){
			//大棚，大田
			jQuery("#weatherContent").hide();
			jQuery("#alarmContent").hide();
			jQuery("#rightContent").show();
			zTree.selectNode(treeNode); 
			if(treeNode.indexNum=="100000"  || treeNode.isvideo==11){
				webcam_url = "";
				jQuery("#rightContent").hide();
				jQuery("#alarmContent").hide();  
				jQuery("#weatherContent").show();
				jQuery("#weatherContent").css("background","url('') no-repeat fixed left top rgba(0, 0, 0, 0)");     
				jQuery("#weatherContentIframe").attr("src","../growth/VideoPlay.seam?videoId="+treeNode.id);  
			}else {
				nodeSwitch(treeNode.id); 
			}
			
		}
		jQuery('#baseSelect').prop('disabled',false); 
		jQuery('#baseSelect').selectpicker('refresh');
	}	

	function weatherStationShow(data){
		if(data != ""){ 
			jQuery("#rightContent").hide();
			jQuery("#alarmContent").hide();  
			jQuery("#weatherContent").show();
			jQuery("#weatherContent").css("background","url('#{request.contextPath}/asset/images/bg_qxzBg1.jpg') no-repeat fixed left top rgba(0, 0, 0, 0)");
			jQuery("#weatherContentIframe").css("height","");     
			jQuery("#weatherContentIframe").attr("src","../growth/WeatherStationDataInfo.seam?baseId="+baseStationIframe);  
		}
	}     

	//地区下拉change事件  
	function selectChange(nodeKey){  
		clearTimeout(times);
		if (nodeKey != 0) {   
			var selectNode = zTree.getNodeByParam("id", nodeKey, null); 
			clickLevel = selectNode.nodeLevel;
			if(clickLevel == 3){
				if(selectNode.children != null && selectNode.children != undefined ){
					jQuery("#rightContent").hide(); 
					jQuery("#weatherContent").show(); 
					var areaCode = selectNode.id;
					if (areaCode.indexOf("municipality_district") != -1) { 
						areaCode = areaCode.replace("municipality_district","");
					} else if(areaCode.indexOf("node_district") != -1){
						areaCode = areaCode.replace("node_district",""); 
					}  
					jQuery("#weatherContentIframe").attr("src","../growth/WeatherForecast.seam?areaCode="+areaCode); 
				}
				jQuery('#areaZtreeSelect').val(nodeKey);
				jQuery('#areaZtreeSelect').selectpicker('render');  
			}else if(clickLevel < 4){
				jQuery('#areaZtreeSelect').val(nodeKey);
				jQuery('#areaZtreeSelect').selectpicker('render');  
				jQuery('#baseLeftSelect').val(0); 
				jQuery('#baseLeftSelect').selectpicker('render');
			}  
			var nodes = zTree.getNodes();
			zTree.hideNodes(nodes);  
			zTree.expandAll(false);
			showSelectNode(selectNode); 
			zTree.selectNode(selectNode);
			getAreaInfo(nodeKey,clickLevel);   
			jQuery('#baseSelect').prop('disabled',false);
			jQuery('#baseSelect').selectpicker('refresh');
			jQuery('#baseLeftSelect').prop('disabled',false); 
			jQuery('#baseLeftSelect').selectpicker('refresh');
		} else {
			zTree = jQuery.fn.zTree.init(jQuery("#treeDemo"), setting, zNodes);
			var nodes = zTree.getNodes();
			jQuery('#baseSelect').prop('disabled',true);
			jQuery('#baseSelect').selectpicker('refresh');
			jQuery('#baseLeftSelect').val(0); 
			jQuery('#baseLeftSelect').selectpicker('render');
			jQuery('#baseLeftSelect').prop('disabled',true);
			jQuery('#baseLeftSelect').selectpicker('refresh');
		}  
	} 
	
	function showSelectNode(selectNode){
		zTree.showNode(selectNode);
		zTree.expandNode(selectNode, true, false, false);
		//展开父节点
		showParentNode(selectNode);
		if (selectNode.getParentNode() != null) {
			var parentNode = selectNode.getParentNode();
			for(var i=0;i<parentNode.children.length;i++) { 
				var childNode = parentNode.children[i];
				if (childNode.id != selectNode.id) {
					//zTree.hideNode(childNode);
					zTree.expandNode(childNode, false, false, false);
				}else {
					zTree.showNode(childNode);
				}
			} 
		}else {
			for(var i=0;i<selectNode.children.length;i++) { 
				var childNode = selectNode.children[i];
				zTree.showNode(childNode);
				zTree.expandNode(childNode, false, false, false);
			}
		}
		//展开第一个子节点
		if (selectNode.children  != null) {
			var childrenNode = selectNode.children[0];
			zTree.showNode(childrenNode);
			zTree.expandNode(childrenNode, false, false, false);
		}
	}

	//基地下拉change事件
	function baseSelectChange(baseKey){ 
		var selectNode = zTree.getNodeByParam("id", baseKey, null); 
		zTree.selectNode(selectNode); 
		showSelectNode(selectNode);
	}  

	//循环展开父节点
	function showParentNode(selectNode){
		if (selectNode.getParentNode() != null) {
			var parentNode = selectNode.getParentNode();
			zTree.showNode(parentNode);
			zTree.expandNode(parentNode, true, false, false);
			showParentNode(parentNode);
		}
	}

	//循环展开子节点
	function showChildrenNode(selectNode){
		if (selectNode.children != undefined) {
			var childrenNode = selectNode.children;
			zTree.showNode(childrenNode);
			zTree.expandNode(childrenNode, false, false, false);
		}
	}

	/* 左侧菜单 折叠按钮点击事件 */
	jQuery('.foldBtn').click(function(){
		var oClictHei = jQuery(window).height();
		var oClictWid = jQuery(window).width();
		var hHead = jQuery('.top').height();
		var hFoldBtn = oClictHei - hHead;
		var hLeftMainHd = jQuery('.leftMainHd').height();
		
		jQuery('.foldBtn').css({
			"height":jQuery(window).height()-60,
			"min-height":jQuery(".left_c1").height(),
			"top":hHead
			});
		if(jQuery('.mainLt_wp').parent('td').is(':hidden')){
			jQuery(this).css({ left : '293px' , height : hFoldBtn });
			jQuery('.mainLt_wp').parent('td').show();
			jQuery('.mainLt_wp').parent('td').css({width:216});
			
			if(oClictWid<=1002){
				jQuery('.header_wp01').css({ position : 'relative' ,zIndex : 200 , 'minWidth':1218});
				jQuery('.main_wp').css({ width : 1218 , overflow : 'hidden'});
				jQuery('#rightContent').css({ width : 1002}); 
				jQuery('#container_wenshiSk').css({ width : 942}); 
			}else{
				jQuery('.header_wp01').css({ position : 'relative' ,zIndex : 200 , 'width':'100%'});
				jQuery('.main_wp').css({ width : '100%', overflow : 'hidden'});
				jQuery('#rightContent').css({ width : '100%'});  
			}
			swithLeftType = 1;
			 
		}else{
			jQuery(this).css({ left : "77px" });
			jQuery('.mainLt_wp').parent('td').hide();
			jQuery('.mainLt_wp').parent('td').css({width:0}); 
			
			if(oClictWid<=1002){
				jQuery('.header_wp01').css({ position : 'relative' ,zIndex : 200 , 'width':1002});
				jQuery('.main_wp').css({ width : 1002 , overflow : 'hidden'});
				jQuery('#rightContent').css({ width : 1002}); 
				jQuery('#container_wenshiSk').css({ width : 1002}); 
			}else{
				jQuery('.header_wp01').css({ position : 'relative' ,zIndex : 200 , 'width':'100%'});
				jQuery('.main_wp').css({ width : '100%', overflow : 'hidden'});
				jQuery('#rightContent').css({ width : '100%'});  
			}
			swithLeftType = 2;
			
		};
 
		if(!jQuery("#weatherContent").is(":hidden")){ 
 			if(areaCodeIframe > 0){ 
				jQuery("#weatherContentIframe").attr("src","../growth/WeatherForecast.seam?areaCode="+areaCodeIframe);
				if(oClictWid<1002 && jQuery('.fixedTd').is(':hidden')){
					jQuery('#rightContent').width(jQuery('#rightContent').width() + 293);  
				}  
				//jQuery("#weatherContentIframe").width(jQuery("#weatherContentIframe").width()+216); 
			}else if(baseStationIframe > 0){ 
				jQuery("#weatherContentIframe").css("height","");  
				jQuery("#weatherContentIframe").attr("src","../growth/WeatherStationDataInfo.seam?baseId="+baseStationIframe);
			}  
			var ifm= document.getElementById("weatherContentIframe"); 
	        var subWeb = document.frames ? document.frames["weatherContentIframe"].document :ifm.contentDocument;
	        if(ifm != null && subWeb != null) {
	        	if(ifm.src.indexOf("VideoPlay")>-1){
	        		ifm.height = subWeb.body.scrollHeight
	        	}else{
	        		ifm.height = subWeb.body.scrollHeight-500; 
	        	}
	        }  
	        jQuery('.foldBtn').css({
				"height":jQuery(window).height()-60,
				"min-height":jQuery(".left_c1").height()
				}); 
			jQuery('#treeDemo').css({
				"height":jQuery(window).height()-60,
				"min-height":jQuery(".left_c1").height()
				});   
		}else if(!jQuery("#alarmContent").is(":hidden")){
			jQuery('.foldBtn').css({
				"height":jQuery(window).height()-60,
				"min-height":jQuery(".left_c1").height()
				});
			jQuery('#treeDemo').css({
				"height":jQuery(window).height()-60,
				"min-height":jQuery(".left_c1").height()
				}); 
		}else{
			if(swithLeftType == 1){ 
				if(oClictWid < 1002){  
					jQuery('#container_wenshiSk').css( { height : 300 ,width: 942});
					if (jQuery('#container_BchyjRt').is(":hidden")) {
						jQuery('#container_BchyjLt').css( { height : 300 ,width : 942} ); 
					} else {
						jQuery('#container_BchyjLt').css( { height : 300 ,width : 565} );
						jQuery('#container_BchyjRt').css( { height : 300, width : 282} );
					} 
					jQuery('#container_Csdyc').css( { height : 300,width : 942});
					jQuery('#container_PGWI').css( { height : 300,width : 942});

					jQuery('.header_wp01').css( { width : 1218});
					jQuery('.fixedTdRt').css( { width : 1002});
					jQuery('.main_wp').css( { width : 1218});
					
				}else{
					var showCharHeight = (oClictWid - 293) * 0.3;
					jQuery('#container_wenshiSk').css( { height : showCharHeight ,width: oClictWid - 293 - 62});
					if (jQuery('#container_BchyjRt').is(":hidden")) { 
						jQuery('#container_BchyjLt').css( { height : showCharHeight ,width : (oClictWid - 293 - 62)} );
					}else{
						jQuery('#container_BchyjLt').css( { height : showCharHeight ,width : (oClictWid - 293 - 62-50)*0.6} );
						jQuery('#container_BchyjRt').css( { height : showCharHeight, width : (oClictWid - 293 - 62-50)*0.3} );
					} 
					jQuery('#container_Csdyc').css( { height : showCharHeight,width : oClictWid - 293 - 62});	
					jQuery('#container_PGWI').css( { height : showCharHeight,width : oClictWid - 293 - 62});
				}
			}else{
				if(oClictWid < 1002){  
					jQuery('#container_wenshiSk').css( { height : 300 ,width: 942});
					if (jQuery('#container_BchyjRt').is(":hidden")) {
						jQuery('#container_BchyjLt').css( { height : 300 ,width : 942} ); 
					} else {
						jQuery('#container_BchyjLt').css( { height : 300 ,width : 565} );
						jQuery('#container_BchyjRt').css( { height : 300, width : 282} );
					} 
					jQuery('#container_Csdyc').css( { height : 300,width : 942});
					jQuery('#container_PGWI').css( { height : 300,width : 942});
					jQuery('.header_wp01 ').width(1002); 
				}else{
					oClictWid = oClictWid - 77;
					var showCharHeight = (oClictWid) * 0.3;
					jQuery('#container_wenshiSk').css( { height : showCharHeight ,width: oClictWid - 62});
					if (jQuery('#container_BchyjRt').is(":hidden")) { 
						jQuery('#container_BchyjLt').css( { height : showCharHeight ,width : (oClictWid - 62)} );
					}else{
						jQuery('#container_BchyjLt').css( { height : showCharHeight ,width : (oClictWid - 62-50)*0.6} );
						jQuery('#container_BchyjRt').css( { height : showCharHeight, width : (oClictWid - 62-50)*0.3} );
					} 
					jQuery('#container_Csdyc').css( { height : showCharHeight,width : oClictWid - 62});
					jQuery('#container_PGWI').css( { height : showCharHeight,width : oClictWid - 62});	
				}
			}
			refreshLineDraw();  
			jQuery('.foldBtn').css({
				"height":jQuery(window).height()-60,
				"min-height":jQuery(".left_c1").height()
				}); 
			jQuery('#treeDemo').css({
				"height":jQuery(window).height()-60,
				"min-height":jQuery(".left_c1").height()
				});
		}
	});	
	
	function initOperate(){
	}
	
	function shedSize(){
		var aShedwt = jQuery(".farmShed-wap").width() -40;
		var aShedht = ( jQuery(".farmShed-wap").width() - 40 )*0.42;
		jQuery(".control_shedimg").css({  //大棚整体控制
			"width" : aShedwt,
			"height" :	aShedht
		});
		jQuery(".control_water").css({  //水滴控制
			"width" : aShedwt,
			"height" :	aShedht
		});
		jQuery(".control_juanl .control_rolle").css({  // 卷帘控制
			"width" : aShedwt,
			"height" :	aShedht
		});
		jQuery(".v-tab-content:visible").css({  //右侧选项卡内容高度
			"height" :	jQuery(".farmShed-wap ").height() -100
		});		
	};
	
	/* 获取屏幕高度 */ 
	function getHeight(){ 
		var oClictHei = jQuery(window).height();
		var oClictWid = jQuery(window).width();
		var hHead = jQuery('.header_wp01').height();
		var hFoldBtn = oClictHei - hHead;
		var hLeftMainHd = jQuery('.leftMainHd').height();
		jQuery('.foldBtn').css({
			"height":jQuery(window).height()-60,
			"min-height":jQuery(".left_c1").height(),
			"top":hHead
			});

		/* growthEnvirWap td 宽度的计算 */
		var growthWid = jQuery('.growthEnvirWap').outerWidth();
		var tdLength = jQuery('.growthEnvirWap .tdEqual').length;
		var otdEqualWid = growthWid / tdLength;
		jQuery('.growthEnvirWap .tdEqual').css({width : otdEqualWid});

		jQuery('#weatherContentIframe').css({
			"height" : jQuery(window).height()-60,
			"min-height" : jQuery(".left_c1").height(),
			});

		if(oClictWid<1002){
			//jQuery('.main_wp').css({'paddingTop' : 60});
		}
	};

	function growthEnvirWap(){ 
		/* 四个图表的宽高计算 */
		var obodyWid = jQuery('body').width();
		var wenshiSkWid = jQuery('#container_wenshiSk').innerWidth();
		var wenshiSkHei = wenshiSkWid * 0.3 ;
		jQuery('#container_wenshiSk').css( { height : wenshiSkHei } );
		jQuery('#container_BchyjLt').css( { height : wenshiSkHei } );
		jQuery('#container_BchyjRt').css( { height : wenshiSkHei } );
		jQuery('#container_Csdyc').css( { height : wenshiSkHei } );
		jQuery('#container_PGWI').css( { height : wenshiSkHei } );  

		/* growthEnvirWap td 宽度的计算 */
		var growthWid = jQuery('.growthEnvirWap').outerWidth();
		var tdLength = jQuery('.growthEnvirWap .tdEqual').length;
		var otdEqualWid = growthWid / tdLength;
		jQuery('.growthEnvirWap .tdEqual').css({width : otdEqualWid});
	}

	var complateData="";
	var lineData="";
	function refreshLineDraw(){ 
		if(lineData != ""){  
			refreshLine(lineData); 
		}    
		if(complateData != "" && document.getElementById('plantAlertChangeId')!=null){ 
			refreshChangePlantLine(complateData);
		} 
	} 
	
	jQuery(window).resize(function() {
		jQuery('input[class=iCheck]').iCheck({
			  checkboxClass: 'icheckbox_minimal-grey',
		});
		shedSize();
		getHeight();

		var oClictWid = jQuery(window).width();
		if(oClictWid < 1280){
			swithLeftType = 2;
			jQuery('.foldBtn').css({
				"height":jQuery(window).height()-60,
				"min-height":jQuery(".left_c1").height(),
				"left":77
				});
			jQuery('.mainLt_wp').parent('td').hide(); 
			jQuery('.header_wp01').css({ 'minWidth':1002,width:'100%'});
			jQuery('.main_wp').css({ width : '100%', overflow : 'hidden'});
			jQuery('#rightContent').css({ width : '100%'}); 
			jQuery('.monitor-timetable').find('.monitor-timetd').removeClass('border_rt96');
		}else{
			swithLeftType = 1;
			jQuery('.foldBtn').css({
				"height":jQuery(window).height()-60,
				"min-height":jQuery(".left_c1").height(),
				"left":293
				});
			jQuery('.mainLt_wp').parent('td').show();
			jQuery('.header_wp01').css({ 'minWidth':1002,width:'100%'});
			jQuery('.main_wp').css({ width : oClictWid-77, overflow : 'hidden'});
			jQuery('#rightContent').css({ width : oClictWid-293}); 
			jQuery('#rightContent').css("width","100%");
			if(oClictWid < 1002){ 
				jQuery('.main_wp').css( { width : 1218});
			}
			jQuery('.monitor-timetable').find('.monitor-timetd').addClass('border_rt96');
		}
		
		if(!jQuery("#weatherContent").is(":hidden")){
			if(areaCodeIframe > 0){ 
				jQuery("#weatherContentIframe").attr("src","../growth/WeatherForecast.seam?areaCode="+areaCodeIframe);
			}else if(baseStationIframe > 0){
				jQuery("#weatherContentIframe").css("height","");  
				jQuery("#weatherContentIframe").attr("src","../growth/WeatherStationDataInfo.seam?baseId="+baseStationIframe);
			}   
			
	        var ifm= document.getElementById("weatherContentIframe"); 
	        ifm.onload = function(){
	        	var subWeb = document.frames ? document.frames["weatherContentIframe"].document :ifm.contentDocument;
	        	if(ifm != null && subWeb != null) {
		        	if(ifm.src.indexOf("VideoPlay")>-1){
		        		ifm.height = subWeb.body.scrollHeight;
		        	}else{
		        		ifm.height = subWeb.body.scrollHeight;
		        	}
		        } 
	        }; 
	        jQuery('#treeDemo').css({
				"height":jQuery(window).height()-60,
				"min-height":jQuery(".left_c1").height()
				});  
	        jQuery('.foldBtn').css({
				"height":jQuery(window).height()-60,
				"min-height":jQuery(".left_c1").height()
				});  
		}else if(!jQuery("#alarmContent").is(":hidden")){
			jQuery('#treeDemo').css({
				"height":jQuery(window).height()-60,
				"min-height":jQuery(".left_c1").height()
				});
			jQuery('.foldBtn').css({
				"height":jQuery(window).height()-60,
				"min-height":jQuery(".left_c1").height()
				});
		}else{
			swithLeftWidth();  
			jQuery('#treeDemo').css({
				"height":jQuery(window).height()-60,
				"min-height":jQuery(".left_c1").height()
				});
			jQuery('.foldBtn').css({
				"height":jQuery(window).height()-60,
				"min-height":jQuery(".left_c1").height()
				});
		}

		if(isIE == 2 && webcam_url!="" && webcam_url !=null){ 
			var height = jQuery("#videoimg").height();
			var width = jQuery("#videoimg").width();   
			var scriptAdd = "<script> var vID = 'videoimg';var vWidth = '"+width+"';var vHeight = '"+height+"';var vPlayer = '#{request.contextPath}/document/player.swf?autostart=true';var vHLSset = '#{request.contextPath}/document/HLS.swf';var vPic = ''; var vHLSurl = '"
				+ webcam_url +"';a.init('videoimg');<\/script>";   
			jQuery("#videoimg").html(scriptAdd);
		}  
	}); 

	function swithLeftWidth(){
		var windowWidth = jQuery(window).width();
		if(windowWidth < 1280){
			swithLeftType = 2;
			jQuery('.foldBtn').css({
				"height":jQuery(window).height()-60,
				"min-height":jQuery(".left_c1").height(),
				"left":77
				});
			jQuery('.mainLt_wp').parent('td').hide(); 
			jQuery('#rightContent').css({ width : '100%'}); 
			jQuery('.header_wp01').css({ 'minWidth':1002,width:'100%'});
			//jQuery('.main_wp').css({ width : '100%', overflow : 'hidden'});
			jQuery('.videoTd').css({width:315,height:240});
			jQuery('.videoimg img').not(".fdimg1,.fdimg2").css({width:315,height:240});
			jQuery(".fdimg1").css({width:24,height:24,"margin-top":50});
			jQuery('.monitor-timetable').find('.monitor-timetd').removeClass('border_rt96');
		}else{
			jQuery('.videoTd').css({width:367});
			jQuery('.videoimg img').not(".fdimg1,.fdimg2").css({width:376,height:258});	
			jQuery('.cropGrowtIntro').css({marginTop : 30});
			jQuery('.monitor-timetable').find('.monitor-timetd').addClass('border_rt96');
		} 
		if(swithLeftType == 1){ 
			if(windowWidth < 1002){  
				jQuery('#container_wenshiSk').css( { height : 300 ,width: 942});
				if (jQuery('#container_BchyjRt').is(":hidden")) {
					jQuery('#container_BchyjLt').css( { height : 300 ,width : 942} ); 
				} else {
					jQuery('#container_BchyjLt').css( { height : 300 ,width : 565} );
					jQuery('#container_BchyjRt').css( { height : 300, width : 282} );
				} 
				jQuery('#container_Csdyc').css( { height : 300,width : 942});
				jQuery('#container_PGWI').css( { height : 300,width : 942});

				jQuery('.header_wp01').css( { width : 1218});
				jQuery('.fixedTdRt').css( { width : 1002});
				jQuery('.main_wp').css( { width : 1218});
			}else{
				var showCharHeight = (windowWidth - 293) * 0.3;
				jQuery('#container_wenshiSk').css( { height : showCharHeight ,width: windowWidth - 293 - 139});
				if (jQuery('#container_BchyjRt').is(":hidden")) { 
					jQuery('#container_BchyjLt').css( { height : showCharHeight ,width : (windowWidth - 293 - 139)} );
				}else{
					jQuery('#container_BchyjLt').css( { height : showCharHeight ,width : (windowWidth - 293 - 139-50)*0.6} );
					jQuery('#container_BchyjRt').css( { height : showCharHeight, width : (windowWidth - 293 - 139-50)*0.3} );
				} 
				jQuery('#container_Csdyc').css( { height : showCharHeight,width : windowWidth - 293 - 139});	
				jQuery('#container_PGWI').css( { height : showCharHeight,width : windowWidth - 293 - 139});
			}
		}else{
			if(windowWidth < 1002){  
				jQuery('#container_wenshiSk').css( { height : 300 ,width: 942});
				if (jQuery('#container_BchyjRt').is(":hidden")) {
					jQuery('#container_BchyjLt').css( { height : 300 ,width : 942} ); 
				} else {
					jQuery('#container_BchyjLt').css( { height : 300 ,width : 565} );
					jQuery('#container_BchyjRt').css( { height : 300, width : 282} );
				} 
				jQuery('#container_Csdyc').css( { height : 300,width : 942});
				jQuery('#container_PGWI').css( { height : 300,width : 942});
				jQuery('.header_wp01 ').width(1002); 
			}else{
				var showCharHeight = (windowWidth) * 0.3;
				jQuery('#container_wenshiSk').css( { height : showCharHeight ,width: windowWidth - 139});
				if (jQuery('#container_BchyjRt').is(":hidden")) { 
					jQuery('#container_BchyjLt').css( { height : showCharHeight ,width : (windowWidth - 139)} );
				}else{
					jQuery('#container_BchyjLt').css( { height : showCharHeight ,width : (windowWidth - 139-50)*0.6} );
					jQuery('#container_BchyjRt').css( { height : showCharHeight, width : (windowWidth - 139-50)*0.3} );
				} 
				jQuery('#container_Csdyc').css( { height : showCharHeight,width : windowWidth - 139});
				jQuery('#container_PGWI').css( { height : showCharHeight,width : windowWidth - 139});	
			}
		}
		refreshLineDraw();    
	}

	//选择显示曲线图
	function selectConditionChange(type){ 
		var tagId;
		if (type == 0) {tagId = '#day';}
		if (type == 1) {tagId = '#week';}
		if (type == 2) {tagId = '#month';}
		if (type == 3) {tagId = '#year';}
		jQuery(tagId).addClass('cur'); 
		jQuery(tagId).siblings().removeClass('cur');	
		if(type > -1){
			searchType = type; 
		}
		var ids = jQuery("#selectConditionId").val();
		if(ids != null){
			showEnvironmentline(ids+"",searchType); 
		}else{
			jQuery('#container_wenshiSk').html("");
			jQuery('#container_wenshiSk').append(nodata);
		}
	}
	 
	//环境曲线
	function refreshLine(data){ 
		if(data != ""){  
			lineData = data; 
			data = eval("("+data+")");
			jQuery('#container_wenshiSk').highcharts({
				chart: {
		            type: 'spline'
		        },
				title: {
		            text: '',
		            x: -20 //center
		        },
		        subtitle: {
		            text: '',
		            x: -20
		        },
		        xAxis: data.xAxis,
		        yAxis: data.yAxis,
		        tooltip: {
		            shared: true 
		        }, 
		        lang: {
		            noData: "暂无数据!"
		        },noData: {
		            style: {    
		                fontWeight: 'bold',     
		                fontSize: '15px', 
		                color: '#FFFFFF'        
		            }
		        },
		        legend: {
		            layout: 'horizontal',
		            align: 'center',
		            verticalAlign: 'bottom',
		            itemStyle: {
		                color: "#32c3fd",
		                fontSize: "12px",
		                fontWeight: "bold"
		            }
		        },
		        plotOptions: { 
		        	series: { 
		        		connectNulls: true //连接数据为null的前后点 
		        	} 
		        }, 
		        series: data.series, 
		        exporting: {
		            enabled: false
		        },
		        credits:{
		            enabled:false // 禁用版权信息
		        },
		        colors: "#32c3fd,#90ed7d,#ffb577,#ff85a2,#8085e9,#f15c80,#e4d354,#8085e8,#8d4653,#91e8e1".split(",")
		    });
		}
	}
	
	var healthExp = '';  //环境指数
	function refreshChangePlantLine(data){ 
		if(data != ""){
			complateData = data;
			data = eval("("+data+")");
			if(typeof(data.pestsAlertRight) == 'undefined' || data.pestsAlertRight.data =='' ){  
				jQuery("#container_BchyjRtTD").hide();
				jQuery("#container_BchyjLtTD").css("width","100%"); 
				jQuery("#container_BchyjLtTD").css("padding-right","");
			}else{
				jQuery("#container_BchyjRtTD").show(); 
				jQuery("#container_BchyjLtTD").css("width","70%");
				jQuery("#container_BchyjLtTD").css("padding-right","50px");
			}  
			jQuery('#container_BchyjLt').highcharts({
		    	chart: {
		            type: 'spline'
		        },
		        title: {
		            text: ''
		        },
		        subtitle: {
		            text: ''
		        },
		        credits: {
		            enabled: false
		        },
		        exporting: {
		            enabled: false
		        },
		        xAxis: {
		            min: 0,
		            max: 100,
		            title: {
		                text: ''
		            },
		            labels: {
		                formatter: function() {
		                    return this.value +'%';
		                }
		            }
		        },
		        yAxis: {
		            min: -20,
		            max: 80, 
		            tickInterval: 20,
		            title: {
		                text: ''
		            },
		            labels: {
		                formatter: function() {
		                    return this.value + '°C';
		                }
		            }
		        },
		        lang: {
		            noData: "暂无数据!"
		        },noData: {
		            style: {    
		                fontWeight: 'bold',     
		                fontSize: '15px', 
		                color: '#FFFFFF'        
		            }
		        },
		        legend: {
		            enabled: true,
		            layout: 'horizontal',
		            align: 'center',
		            verticalAlign: 'bottom'
		        }, 
		        tooltip: {
		        	formatter: function () {
		                 return '<b>' + this.point.time +'</b><br/>'+ this.series.name + '<br/>' +
		                 this.y+'°C/' + this.x+'%';
		            }
		        },
				plotOptions: {
		            spline:{
		                lineWidth: 1.5,
		                marker: { enabled: false },
		                enableMouseTracking: false
		            }
		            
		        },
		        series: data.pestsAlert,
		        exporting: {
		            enabled: false
		        },
		        credits:{ 
		            enabled:false // 禁用版权信息
		        },
		        colors: "#32c3fd,#ffb577,#ff85a2,#8085e9,#f15c80,#e4d354,#8085e8,#8d4653,#91e8e1".split(",")
		    });

			if (typeof(data.pestsAlertRight) != 'undefined' && data.pestsAlertRight.data !='') {
				//病虫害右侧
			    jQuery('#container_BchyjRt').highcharts({                                           
			        chart: {                                                           
			            type: 'bar'                                                    
			        },                                                                 
			        title: {                                                           
			            text: ''                    
			        },                                                                 
			        subtitle: {                                                        
			            text: ''                                  
			        },                                                                 
			        xAxis: { 
			            categories: data.pestsAlertRight.categories,
			            title: {                                                       
			                text: null                                                 
			            }                                                              
			        },                                                                 
			        yAxis: {               	                                             
			        	min:0,
					    max:100,                                                          
			            title: {                                                       
			                text: '',                             
			                align: 'high'                                              
			            },                                                             
			            labels: {                                                      
			                overflow: 'justify'                                        
			            }                                                              
			        },                                                                 
			        tooltip: {                                                         
			            pointFormat: '{point.y}%'                                       
			        },                                                                 
			        plotOptions: {  
			            bar: { 
			            	pointWidth:26,                                                        
			                dataLabels: {                                              
			                    enabled: true,
			                    color:'#FFFFFF'                                         
			                }                                                          
			            }                                                              
			        },
			        legend: {                                                          
			            layout: 'vertical',                                            
			            align: 'right',                                                
			            verticalAlign: 'top',                                          
			            x: -40,                                                        
			            y: -5000,                                                        
			            floating: true,                                                
			            borderWidth: 1,                                                
			            backgroundColor: '#FFFFFF',                                    
			            shadow: true                                                   
			        },                                                                 
			        credits: {                                                         
			            enabled: false                                                 
			        },                                                                 
			        series: [{                                                         
			            data: data.pestsAlertRight.data,
						borderColor: "#90d4e7"                                 
			        }] ,
					colors: "#90d4e7,#90ed7d,#ffb577,#ff85a2,#8085e9,#f15c80,#e4d354,#8085e8,#8d4653,#91e8e1".split(",")                                                                
			    });  
			}
			
			//积温
			jQuery('#container_Csdyc').highcharts({
		        chart: {
		            zoomType: 'xy'
		        },
		        title: {
		            text: '' 
		        },
		        subtitle: {
		            text: ''
		        },
		        plotOptions: {
		        	column: {
		        		pointWidth:20 
			        }
		        }, 
		        xAxis: [{
		        	min: 0,
		        	tickInterval: data.csdyc.tickInterval,
		            categories: data.csdyc.categories 
		        }],
		        yAxis: [{ // Primary yAxis
		        	plotLines: data.csdyc.plotLines,  
			        min: 0,
			        tickPositions: data.csdyc.tickPositions,  
		            labels: {
		                format: '{value}°C',
		                style: {
		                    color: '#fff'
		                }
		            },
		            title: {
		                text: '',
		                style: {
		                    color: '#89A54E'
		                }
		            }
		        }],
		        tooltip: {
		            shared: true,
		            backgroundColor:'#000000',
		            style: {    
		                fontWeight: 'bold',     
		                fontSize: '12px', 
		                color: '#FFFFFF'        
		            }
		        },
		        lang: {
		            noData: "暂无数据!"
		        },noData: {
		            style: {    
		                fontWeight: 'bold',     
		                fontSize: '15px', 
		                color: '#FFFFFF'        
		            }
		        },
		        legend: {
		            layout: '',
		            align: '',
		            x: 50,
		            verticalAlign: '',
		            y: 30,
		            floating: true,
		            backgroundColor: 'rgba(255,255,255,0)',
					itemStyle: {
		                color: "#fff",
		                fontSize: "12px",
		                fontWeight: "normal"
		            }
		        },
		        series:data.csdyc.series, 
		        exporting: {
		            enabled: false
		        },
		        credits:{
		            enabled:false // 禁用版权信息
		        },
		        colors: "#f00,#90ed7d,#ffb577,#ff85a2,#8085e9,#f15c80,#e4d354,#8085e8,#8d4653,#91e8e1".split(",")
		    }); 
		    
			healthExp = data.pgwi;
			if(typeof(data.pgwi.seriesHealthExp) != 'undefined'){
				//环境指数
				jQuery('#container_PGWI').highcharts({
			        chart: {
			            zoomType: 'xy'
			        },
			        title: {
			            text: '' 
			        },
			        subtitle: {
			            text: ''
			        },
			        xAxis: [{
			        	min: 0,
			        	tickInterval: data.pgwi.tickInterval[0],
			            categories: data.pgwi.healthExpDateList 
			        }],
			        yAxis: [{ // Primary yAxis
			        	tickPositions: [0, 20, 40, 60, 80, 100], 
			            labels: {
			                style: {
			                    color: '#fff'
			                }
			            },
			            title: {
			                text: '',
			                style: {
			                    color: '#89A54E'
			                }
			            }
			        }],
			        tooltip: {
			            shared: true,
			            backgroundColor:'#000000',
			            style: {    
			                fontWeight: 'bold',     
			                fontSize: '12px', 
			                color: '#FFFFFF'        
			            }
			        },
			        lang: {
			            noData: "暂无数据!"
			        },noData: {
			            style: {    
			                fontWeight: 'bold',     
			                fontSize: '15px', 
			                color: '#FFFFFF'        
			            }
			        },
			        legend: {
			            layout: '',
			            align: '',
			            x: 50,
			            verticalAlign: '',
			            y: 30,
			            floating: true,
			            backgroundColor: 'rgba(255,255,255,0)',
						itemStyle: {
			                color: "#fff",
			                fontSize: "12px",
			                fontWeight: "normal"
			            }
			        },
			        series:data.pgwi.seriesHealthExp,  
			        exporting: {
			            enabled: false
			        },
			        credits:{
				            enabled:false // 禁用版权信息
				    },
				    colors: "#90ed7d,#ffb577,#ff85a2,#8085e9,#f15c80,#e4d354,#8085e8,#8d4653,#91e8e1".split(",")
			    }); 
			}
		}
		
		//定值时间样式修改
		var windowWidth = jQuery(window).width();
		if(windowWidth < 1280){
			jQuery('.videoTd').css({width:315,height:240});
			jQuery(".fdimg1").css({width:24,height:24,"margin-top":50});
			jQuery('.videoimg img').not(".fdimg1,.fdimg2").css({width:315,height:240});
			jQuery('.monitor-timetable').find('.monitor-timetd').removeClass('border_rt96');
		}else{
			jQuery('.videoTd').css({width:376});
			jQuery('.videoimg img').not(".fdimg1,.fdimg2").css({width:376,height:258});	
			jQuery('.monitor-timetable').find('.monitor-timetd').addClass('border_rt96');
		} 
	}

	function selectHealthPGWIIdChange(val){ 
		var series = '';
		var categories;
		var tickInterval;
		switch(Number(val)){
			case 0:
				series = healthExp.seriesHealthExp;
				categories = healthExp.healthExpDateList;
				tickInterval = healthExp.tickInterval[0];
				break;
			case 1:
				series = healthExp.seriesAirTemp;
				categories = healthExp.airTempDateList;
				tickInterval = healthExp.tickInterval[1];
				break;
			case 2:
				series = healthExp.seriesAirHumi;
				categories = healthExp.airHumiExpDateList;
				tickInterval = healthExp.tickInterval[2];
				break;
			case 3:
				series = healthExp.seriesSoilTemp;
				categories = healthExp.soilTempExpDateList;
				tickInterval = healthExp.tickInterval[3];
				break;
		}  
		//环境指数
		jQuery('#container_PGWI').highcharts({
	        chart: {
	            zoomType: 'xy'
	        },
	        title: {
	            text: '' 
	        },
	        subtitle: {
	            text: ''
	        },
	        xAxis: [{
	        	min: 0,
	        	tickInterval: tickInterval,
	            categories: categories 
	        }],
	        yAxis: [{ // Primary yAxis
	        	tickPositions: [0, 20, 40, 60, 80, 100],  
	            labels: {
	                style: {
	                    color: '#fff'
	                }
	            },
	            title: {
	                text: '',
	                style: {
	                    color: '#89A54E'
	                }
	            }
	        }],
	        tooltip: {
	            shared: true,
	            backgroundColor:'#000000',
	            style: {    
	                fontWeight: 'bold',     
	                fontSize: '12px', 
	                color: '#FFFFFF'        
	            }
	        },
	        lang: {
	            noData: "暂无数据!" 
	        },noData: {
	            style: {    
	                fontWeight: 'bold',     
	                fontSize: '15px', 
	                color: '#FFFFFF'        
	            }
	        },
	        legend: {
	            layout: '',
	            align: '',
	            x: 50,
	            verticalAlign: '',
	            y: 30,
	            floating: true,
	            backgroundColor: 'rgba(255,255,255,0)',
				itemStyle: {
	                color: "#fff",
	                fontSize: "12px",
	                fontWeight: "normal"
	            }
	        },
	        series:series,  
	        exporting: { 
	            enabled: false
	        },
	        credits:{
		        enabled:false // 禁用版权信息
		    },
		    colors: "#90ed7d,#ffb577,#ff85a2,#8085e9,#f15c80,#e4d354,#8085e8,#8d4653,#91e8e1".split(",")
	    });  
	}

	function iFrameHeight(){
		var ifm= document.getElementById("weatherContentIframe"); 
        var subWeb = document.frames ? document.frames["weatherContentIframe"].document :ifm.contentDocument;
        if(ifm != null && subWeb != null) {
        	if(ifm.src.indexOf("VideoPlay")>-1){
        		ifm.height = subWeb.body.scrollHeight;
        	}else{
        		ifm.height = subWeb.body.scrollHeight;
        	}
        }
        jQuery('#treeDemo').css({
			"height":jQuery(window).height()-60,
			"min-height":jQuery(".left_c1").height()
			});
        jQuery('.foldBtn').css({
			"height":jQuery(window).height()-60,
			"min-height":jQuery(".left_c1").height()
			});
	}


	function showAlarmInfo(){
		/* var ids = jQuery("#plantAlertChangeId").val();
		if(ids!=null && ids!=""){ 
			jQuery("#rightContent").hide(); 
			jQuery("#alarmContent").show();
			ids = ids.split("|");  
			var arrIds = ids[1].split(",");
			if(arrIds[2] != null && arrIds[2]!=""){
				changAlarmRealPlantId(Number(ids[0]),Number(arrIds[2]));  
				jQuery('#plantAlarmChangeId').val(Number(ids[0])+"|"+Number(arrIds[2])); 
				jQuery('#plantAlarmChangeId').selectpicker('render'); 
			} 
		}else{
			jQuery("#alarmContent").hide();
		}  
		*/ 
		jQuery("#rightContent").hide();
		jQuery("#alarmContent").show(); 
		
		// 分页
		alarmTunnelInfoList(1);
		//tunnelInfoAlarm();
	} 
	function listhuidiao(){
		addStyles();
	}
	function addjk(){
		selectAlarmTunnelInfo(0);
	}

	function selectjk(alarmId,pageNum){
		selectAlarmTunnelInfos(alarmId,pageNum);
	}
	function addhuidiao(){
		var h = jQuery(window).height();
		var w = jQuery(window).width();
		jQuery('#alarmContent').css({"height":900});
		jQuery('#warning').css({"height":h});
		jQuery('#warning').fadeIn();
		jQuery('.selectpicker').selectpicker();	

		jQuery('.edit-title').find('p').html("修改报警设置");
		
		if(jQuery('#addAlarmTunnelInfo\\:alarmTypeHidden').val()==''||jQuery('#addAlarmTunnelInfo\\:alarmTypeHidden').val()=='0'){
			jQuery('#alarmType').selectpicker('val', '1');
		}else{
			jQuery('#alarmType').selectpicker('val', jQuery('#addAlarmTunnelInfo\\:alarmTypeHidden').val());
		}
		if(jQuery('#addAlarmTunnelInfo\\:alarmGenreHidden').val()==''||jQuery('#addAlarmTunnelInfo\\:alarmGenreHidden').val()=='0'){
			jQuery('#alarmGenre').selectpicker('val', '1');
		}else{
			jQuery('#alarmGenre').selectpicker('val', jQuery('#addAlarmTunnelInfo\\:alarmGenreHidden').val());
		}
		if(jQuery('#addAlarmTunnelInfo\\:alarmBeginTime').val()==''){
			jQuery('#addAlarmTunnelInfo\\:alarmBeginTime').val("9:00");
		}
		if(jQuery('#addAlarmTunnelInfo\\:alarmEndTime').val()==''){
			jQuery('#addAlarmTunnelInfo\\:alarmEndTime').val("18:00");
		}
		if(jQuery("#addAlarmTunnelInfo\\:alarmLimit").val()==0){
			jQuery("#addAlarmTunnelInfo\\:alarmLimit").val('');//报警界限
		}
		addStyles();
	}
	function addhuidiao2(){
		var h = jQuery(window).height();
		var w = jQuery(window).width();
		jQuery('#alarmContent').css({"height":900});
		jQuery('#warning').css({"height":h});
		jQuery('#warning').fadeIn();
		jQuery('.selectpicker').selectpicker();	
		jQuery('.edit-title').find('p').html("添加报警设置");
		jQuery('#alarmType').selectpicker('val', '1');
		jQuery('#alarmGenre').selectpicker('val', '1');
		jQuery('#addAlarmTunnelInfo\\:alarmBeginTime').val("9:00");
		jQuery('#addAlarmTunnelInfo\\:alarmEndTime').val("18:00");
		jQuery("#addAlarmTunnelInfo\\:alarmLimit").val('');//报警界限
		jQuery("#addAlarmTunnelInfo\\:alarmDetails").val('');//报警内容
		jQuery("#addAlarmTunnelInfo\\:alamNotifyPeople").val('');//抄送人
		jQuery("#addAlarmTunnelInfo\\:alarmTunnelIdHidden").val('');//id
		jQuery('.on-off').removeClass('off');
		addStyles();
	}
	function pagechange(page){
		var max= jQuery("#pageMax").val();
		if(page>0 && page<=max){
			alarmTunnelInfoList(page);
		}
	}
	
	function checkSubmit(){
		var alarmTunnelId = jQuery("#addAlarmTunnelInfo\\:alarmTunnelIdHidden").val();//id
		var alarmType = jQuery("#alarmType").val();//检测种类
		var alarmGenre = jQuery("#alarmGenre").val();//检测类型
		var alarmLimit = jQuery("#addAlarmTunnelInfo\\:alarmLimit").val();//报警界限
		var alarmDetails = jQuery("#addAlarmTunnelInfo\\:alarmDetails").val();//报警内容
		var alarmBeginTime = jQuery("#addAlarmTunnelInfo\\:alarmBeginTime").val();//接收开始时间
		var alarmEndTime = jQuery("#addAlarmTunnelInfo\\:alarmEndTime").val();//接收结束时间
		var alamNotifyPeople = jQuery("#addAlarmTunnelInfo\\:alamNotifyPeople").val();//抄送人
		
		var insertTimeHidden = jQuery("#addAlarmTunnelInfo\\:insertTimeHidden").val();//添加时间
		var insertUserHidden = jQuery("#addAlarmTunnelInfo\\:insertUserHidden").val();//添加人
		var partitionsNameHidden = jQuery("#addAlarmTunnelInfo\\:partitionsNameHidden").val();//分区名称
		var tunnelNameHidden = jQuery("#addAlarmTunnelInfo\\:tunnelNameHidden").val();//地块名称
		var tunnelInfoIdHidden = jQuery("#addAlarmTunnelInfo\\:tunnelInfoIdHidden").val();//地块ID

		var enterpriseInfoIdHidden = jQuery("#addAlarmTunnelInfo\\:enterpriseInfoIdHidden").val();//地块ID

		
		var available;
		if(jQuery('.on-off').is('.off')){
			available = false;
		}else{
			available = true;
		}
		var aaa=0;
		if(alarmDetails.length>60){
			aaa=1;
			alert('报警内容输入过长');
		}
		if(alamNotifyPeople.length>60){
			aaa=1;
			alert('抄送人输入过长');
		}
		if(aaa==0){
			addAlarmTunnelInfo(alarmTunnelId,alarmType,alarmGenre,alarmLimit,alarmDetails,alarmBeginTime,alarmEndTime,alamNotifyPeople,available,insertTimeHidden,insertUserHidden,partitionsNameHidden,tunnelNameHidden,tunnelInfoIdHidden,enterpriseInfoIdHidden);
		}
	}
	function savehuidiao(data){
		if(data == '请您输入接收短信的手机号码!'){
			alert(data);
		}else if(data == '请修改报警接收时间'){
			alert(data);
		}else{
			alert(data);
			jQuery('#warning').fadeOut();

			jQuery("#rightContent").hide();
			jQuery("#alarmContent").show(); 
			// 分页
			alarmTunnelInfoList(jQuery("#pageNum").val());
		}
	}

	function changeAlarmType(data){
		if(jQuery('#type_'+data).is('.turn-off')){
			if(confirm("确认开启报警设置吗？")){
				changeAlarmTypes(data);
				jQuery('#type_'+data).toggleClass('turn-off');
			}
		}else{
			if(confirm("确认关闭报警设置吗？")){
				changeAlarmTypes(data);
				jQuery('#type_'+data).toggleClass('turn-off');
			}
		}
	}
	
	function changeType(){
		var type=jQuery('#alarmType').val();
		if(type==1||type==3){
			jQuery('#alarmGenre').empty();
			jQuery('#alarmGenre').append('<option value="1">高温</option><option value="2">低温</option>');
      		jQuery('#alarmGenre').selectpicker('refresh');
      		jQuery('#alarmUnit').text('℃');
		}else if(type==2||type==4){
			jQuery('#alarmGenre').empty();
			jQuery('#alarmGenre').append('<option value="1">高湿</option><option value="2">低湿</option>');
      		jQuery('#alarmGenre').selectpicker('refresh');
      		jQuery('#alarmUnit').text('%');
		}else{
			jQuery('#alarmGenre').empty();
			jQuery('#alarmGenre').append('<option value="1">上限</option><option value="2">下限</option>');
      		jQuery('#alarmGenre').selectpicker('refresh');
			if(type==5){
				jQuery('#alarmUnit').text('ppm');
			}else if(type==6){
				jQuery('#alarmUnit').text('lux');
			}else if(type==7){
				jQuery('#alarmUnit').text('');
			}else if(type==8){
				jQuery('#alarmUnit').text('ms/cm');
			}
		}
	}

    
    function deleteAlarmInfo(alarmId){
    	if(confirm("确认删除报警设置吗？")){
    		deleteAlarmTunnelInfo(alarmId);
		}
    }

    function deletehuidiao(){
    	alert('删除成功');
		showAlarmInfo();
    }
    
	function addStyles(){//报警列表样式，事件
		var oLiW = 0;
		for(var i = 0;i<jQuery('.pages ul li').length;i++){
			oLiW += jQuery('.pages ul li').eq(i).outerWidth();
		}
		jQuery('.pages').css('width',oLiW + 80);
		
		jQuery('.set-list ul li').on('mouseenter',function(){
			jQuery(this).children('.edit').fadeIn();
			jQuery(this).css({"border":"1px solid #7c94b1","box-sizing":"border-box"});
		});
		jQuery('.set-list ul li').on('mouseleave',function(){
			jQuery(this).children('.edit').fadeOut();
			jQuery(this).css({"border":"none"});
		});
		
		jQuery('.on-off').on('click',function(){
			jQuery(this).toggleClass('off');
		});

		jQuery('.close-btn').on('click',function(){
			jQuery('#warning').fadeOut();
		});
		
		jQuery('.selectpicker').selectpicker();	
		
		jQuery(".form_datetime").datetimepicker({
			format: "hh:ii", 
			autoclose: true,
			weekStart: 1,
			startView:1,
			language:  'zh-CN',
			pickerPosition: "bottom-left",
			forceParse:false
		});
	}
	function refreshAlarm(data){ 
		jQuery('#treeDemo').css({
			"height":jQuery(window).height()-60,
			"min-height":jQuery(".left_c1").height()
			});
		jQuery('.foldBtn').css({
			"height":jQuery(window).height()-60,
			"min-height":jQuery(".left_c1").height()
			});
		/* 复选框js */
		jQuery('input[class=iCheck]').iCheck({
			checkboxClass: 'icheckbox_minimal-grey',
		});
		//;
		/* 模态框 */ 
		jQuery("#nonnumeric").pickList();     
		//显示
		jQuery("input[name='growEnvCheck']").each(function(){
			if(this.value == "true"){ 
				jQuery("#"+this.id).iCheck('check'); 
			}else{
				jQuery("#"+this.id).iCheck('uncheck');
			} 
		});
		jQuery(".pickList_removeAll").click();    
		if(data != ""){
			data = eval("("+data+")");
			jQuery("#ccEnv").val(data.ccEnv);
			jQuery("#ccGrow").val(data.ccGrow);
			jQuery("#ccIllness").val(data.ccIllness);
			jQuery("#ccTimer").val(data.ccTimer); 
			if(data.growOpen){
				jQuery("#growthEnableId").iCheck('check'); 
			}else{
				jQuery("#growthEnableId").iCheck('uncheck');
			}
			if(data.illnessOpen){
				jQuery("#illnessEnableId").iCheck('check');
			}else{
				jQuery("#illnessEnableId").iCheck('uncheck');
			}
			if(data.timerOpen){
				jQuery("#timerEnableId").iCheck('check');
			}else{
				jQuery("#timerEnableId").iCheck('uncheck');
			}

			if(data.timerOne != ""){
				jQuery('#timeSelectId1').val(data.timerOne); 
				jQuery('#timeSelectId1').selectpicker('render'); 
			}
			if(data.timerTwo != ""){
				jQuery('#timeSelectId2').val(data.timerTwo); 
				jQuery('#timeSelectId2').selectpicker('render'); 
			}
			if(data.timerThree != ""){
				jQuery('#timeSelectId3').val(data.timerThree); 
				jQuery('#timeSelectId3').selectpicker('render'); 
			}
			if(data.timerFour != ""){
				jQuery('#timeSelectId4').val(data.timerFour);  
				jQuery('#timeSelectId4').selectpicker('render'); 
			}
			var ills = data.illnessProbability.split(",");
			for(var i=0;i<ills.length;i++){
				jQuery(".pickList_sourceList li").each(function(){
					if(ills[i]==jQuery(this).text()){
						jQuery(this).attr("class","pickList_listItem ui-selected ui-state-highlight pickList_selectedListItem");
						jQuery(".pickList_add").click();  
					}
		    	});  
			}   
		}else{
			clearInfo();
		}
	}

	function clearInfo(){
		jQuery("#ccEnv,#ccGrow,#ccIllness,#ccTimer").val("");
		jQuery("#growthEnableId").iCheck('uncheck');
		jQuery("#illnessEnableId").iCheck('uncheck');
		jQuery("#timerEnableId").iCheck('uncheck');
		jQuery('#timeSelectId1').val(0); 
		jQuery('#timeSelectId1').selectpicker('render'); 
		jQuery('#timeSelectId2').val(0); 
		jQuery('#timeSelectId2').selectpicker('render'); 
		jQuery('#timeSelectId3').val(0); 
		jQuery('#timeSelectId3').selectpicker('render'); 
		jQuery('#timeSelectId4').val(0); 
		jQuery('#timeSelectId4').selectpicker('render');  
		jQuery('.pickList_removeAll').click(); 
	}

	function toBack(){
		jQuery("#rightContent").show(); 
		jQuery("#alarmContent").hide();
		jQuery('#treeDemo').css({
			"height":jQuery(window).height()-60,
			"min-height":jQuery(".left_c1").height()
			});
		jQuery('.foldBtn').css({
			"height":jQuery(window).height()-60,
			"min-height":jQuery(".left_c1").height()
			}); 
		getAlertInfo();  
	}

	function saveToHighTunnelEnv(){
		if(!validateFormDate()){
			return;
		}
		//环境告警预设信息
		var evnIfChecks = "";
		jQuery("input[name='growEnvCheck']").each(function(){
			if(jQuery(this).is(":checked")){
				evnIfChecks += "1;";
			}else{
				evnIfChecks += "0;";
			}
		});
		
		//三个启用
		var growthIllTimerEnable = "";
		if (jQuery("#growthEnableId").is(":checked")) {
			growthIllTimerEnable += "1;";
		} else {
			growthIllTimerEnable += "0;";
		}
		if (jQuery("#illnessEnableId").is(":checked")) {
			growthIllTimerEnable += "1;";
		} else {
			growthIllTimerEnable += "0;";
		}
		if (jQuery("#timerEnableId").is(":checked")) {
			growthIllTimerEnable += "1;";
		} else {
			growthIllTimerEnable += "0;";
		}
		
		//抄送人
		var ccPerson = "";
		var ccEnv = jQuery("#ccEnv").val();
		ccPerson += ccEnv + " ;";
		var ccGrow = jQuery("#ccGrow").val();
		ccPerson += ccGrow + " ;";
		var ccIllness = jQuery("#ccIllness").val();
		ccPerson += ccIllness + " ;";
		var ccTimer = jQuery("#ccTimer").val();
		ccPerson += ccTimer + " ;";

		//定时发送
		var timeSelect = ""; 
		var timeSelectId1 = jQuery("#timeSelectId1").val();
		timeSelect += (timeSelectId1==null?0:timeSelectId1)+";"
		var timeSelectId2 = jQuery("#timeSelectId2").val();
		timeSelect += (timeSelectId2==null?0:timeSelectId2)+";" 
		var timeSelectId3 = jQuery("#timeSelectId3").val(); 
		timeSelect += (timeSelectId3==null?0:timeSelectId3)+";"
		var timeSelectId4 = jQuery("#timeSelectId4").val();
		timeSelect += (timeSelectId4==null?0:timeSelectId4)+";" 

		//病虫害危险度选择
		var nonnumeric = "";
		jQuery(".pickList_targetList li").each(function(){
			nonnumeric+=jQuery(this).text()+",";   
		});     
		if(nonnumeric.length>0){
			nonnumeric = nonnumeric.substring(0,nonnumeric.length-1);
		}
		saveHighTunnelEnv(evnIfChecks,growthIllTimerEnable,ccPerson,timeSelect,nonnumeric );
	}

	function validateFormDate(){ 
		//环境告警预设信息
		var flag  = true;
		var ifcheck = false;
		jQuery("input[name='growEnvCheck']").each(function(){
			if(jQuery(this).is(":checked")){ 
				ifcheck = true;
				var ids = this.id.split('_'); 
				var upperVal;
				var lowerVal;
				for(var i=1;i<=4;i++){ 
					var val = jQuery("#growEnvInput_"+ids[1]+"_"+i).val();
					var title="";
					if(ids[1] == "1"){ 
						title = "[空气温度检测]";
					}else if(ids[1] == "2"){
						title = "[空气湿度检测]";
					}else if(ids[1] == "3"){
						title = "[土壤温度检测]";
					}else if(ids[1] == "4"){
						title = "[土壤湿度检测]";
					}else if(ids[1] == "5"){
						title = "[二氧化碳检测]";
					}else if(ids[1] == "6"){
						title = "[光照检测]";
					}else if(ids[1] == "7"){
						title = "[土壤PH检测]";
					}else if(ids[1] == "8"){
						title = "[土壤EC检测]";
					}
					if (i==1) {
						if(isNaN(val)){
							flag = false; 
							jQuery("#showMessage").html(title+"中报警高值必须是数字");
							jQuery("#showMessageDiv").modal('show'); 
							jQuery('body').css('padding-right',0);
							break; 
						}
						upperVal = val;
					}
					if(i==3){ 
						if(isNaN(val)){
							flag = false;
							jQuery("#showMessage").html(title+"中报警低值必须是数字");
							jQuery("#showMessageDiv").modal('show'); 
							jQuery('body').css('padding-right',0);
							break;  
						}
						lowerVal = val;   
						if(Number(upperVal) <= Number(lowerVal)){   
							flag = false;
							jQuery("#showMessage").html(title+"中报警高值不能小于报警低值");
							jQuery("#showMessageDiv").modal('show'); 
							jQuery('body').css('padding-right',0);
							break; 
						}
					}  
					if(val == ""){
						flag = false;
						jQuery("#showMessage").html("环境告警预设信息"+title+"已启用，请填写全部内容！");
						jQuery("#showMessageDiv").modal('show'); 
						jQuery('body').css('padding-right',0);
						break;
					}
				} 
			}
		});
		var ccEnv = jQuery("#ccEnv").val();
		if(ifcheck){
			if(ccEnv == ""){ 
				flag = false;
				jQuery("#showMessage").html("环境告警预设信息已启用，抄送人内容不能为空！");
				jQuery("#showMessageDiv").modal('show'); 
				jQuery('body').css('padding-right',0);
			}
		} 
		if(ccEnv!="" && !jQuery.REGEX_TYPES.phones.test(ccEnv)){
			flag = false;
		 	jQuery("#showMessage").html("环境告警预设信息,抄送人格式验证错误");
    		jQuery("#showMessageDiv").modal('show'); 
    		jQuery('body').css('padding-right',0);
		}  
		var ccGrow = jQuery("#ccGrow").val();
		if(jQuery("#growthEnableId").is(":checked")){
			if(ccGrow == ""){
				flag = false;
				jQuery("#showMessage").html("成熟度告警预设信息已启用,抄送人内容不能为空！");
				jQuery("#showMessageDiv").modal('show');
				jQuery('body').css('padding-right',0);
			}
		}
		if(ccGrow !="" && !jQuery.REGEX_TYPES.phones.test(ccGrow)){
			flag = false;
		 	jQuery("#showMessage").html("成熟度告警预设信息,抄送人格式验证错误");
    		jQuery("#showMessageDiv").modal('show');
    		jQuery('body').css('padding-right',0);
		}  
		var ccIllness = jQuery("#ccIllness").val();
		if(jQuery("#illnessEnableId").is(":checked")){
			if(ccIllness == ""){
				flag = false;
				jQuery("#showMessage").html("病虫害告警预设信息已启用,抄送人内容不能为空！");
				jQuery("#showMessageDiv").modal('show');
				jQuery('body').css('padding-right',0);
			}
			var selectNon="";
			jQuery(".pickList_targetList li").each(function(){
				selectNon +=jQuery(this).val()+",";   
			});  
			if(selectNon==""){
				flag = false;
				jQuery("#showMessage").html("病虫害告警预设信息已启用,请选择病虫害危险度！");
				jQuery("#showMessageDiv").modal('show');
				jQuery('body').css('padding-right',0);
			}  
		}
		if(ccIllness!="" && !jQuery.REGEX_TYPES.phones.test(ccIllness)){
			flag = false; 
		 	jQuery("#showMessage").html("病虫害告警预设信息,抄送人格式验证错误");
    		jQuery("#showMessageDiv").modal('show');
    		jQuery('body').css('padding-right',0);
		}  
		var ccTimer = jQuery("#ccTimer").val();
		if(jQuery("#timerEnableId").is(":checked")){
			if(ccTimer == ""){ 
				flag = false;
				jQuery("#showMessage").html("定时告警预设信息已启用,抄送人内容不能为空！");
				jQuery("#showMessageDiv").modal('show');
				jQuery('body').css('padding-right',0);
			}
			var selectFlag = false;
			jQuery("select[name='timeSelectId']").each(function(){
				if(this.value >0){
					selectFlag = true;
					return false;
				} 
			});
			if(!selectFlag){ 
				flag = false; 
				jQuery("#showMessage").html("定时告警预设信息已启用,请选择发送时间！"); 
				jQuery("#showMessageDiv").modal('show');
				jQuery('body').css('padding-right',0);
			}
		}
		if(ccTimer!="" && !jQuery.REGEX_TYPES.phones.test(ccTimer)){
			flag = false;  
		 	jQuery("#showMessage").html("定时告警预设信息,抄送人格式验证错误");
    		jQuery("#showMessageDiv").modal('show');
    		jQuery('body').css('padding-right',0);
		}   
		return flag;    
	}
	
	function saveComplate(data){
		if(data == "save"){
			jQuery("#showMessage").html("告警设置保存成功！");
		}else if(data == "update"){
			jQuery("#showMessage").html("告警设置修改成功！");
		}
		jQuery("#showMessageDiv").modal('show'); 
		jQuery('body').css('padding-right',0);
	} 
	// PTZ控制 9为自动，1,2,3,4,5,6,7,8为方向PTZ
	var g_bPTZAuto = false;
	function mouseDownPTZControl(iPTZIndex) {
		var oWndInfo = WebVideoCtrl.I_GetWindowStatus(g_iWndIndex),
			bZeroChannel =  false,
			iPTZSpeed = 2,//设置速度为2
			bStop = false;

		if (bZeroChannel) {// 零通道不支持云台
			return;
		}
		
		if (oWndInfo != null) {
			if (9 == iPTZIndex && g_bPTZAuto) {
				iPTZSpeed = 0;// 自动开启后，速度置为0可以关闭自动
				bStop = true;
			} else {
				g_bPTZAuto = false;// 点击其他方向，自动肯定会被关闭
				bStop = false;
			}

			WebVideoCtrl.I_PTZControl(iPTZIndex, bStop, {
				iPTZSpeed: iPTZSpeed,
				success: function (xmlDoc) {
					if (9 == iPTZIndex) {
						g_bPTZAuto = !g_bPTZAuto;
					}
					//console.log(oWndInfo.szIP + " 开启云台成功！");
				},
				error: function () {
					//console.log(oWndInfo.szIP + " 开启云台失败！");
				}
			});
		}
	}

	// 方向PTZ停止
	function mouseUpPTZControl() {
		var oWndInfo = WebVideoCtrl.I_GetWindowStatus(g_iWndIndex);

		if (oWndInfo != null) {
			WebVideoCtrl.I_PTZControl(1, true, {
				success: function (xmlDoc) {
					//console.log(oWndInfo.szIP + " 停止云台成功！");
				},
				error: function () {
					//console.log(oWndInfo.szIP + " 停止云台失败！");
				}
			});
		}
	}

	//放大
	function PTZZoomIn() {
	    var oWndInfo = WebVideoCtrl.I_GetWindowStatus(g_iWndIndex);

	    if (oWndInfo != null) {
	        WebVideoCtrl.I_PTZControl(10, false, {
	            iWndIndex: g_iWndIndex,
	            success: function (xmlDoc) {
	                //console.log(oWndInfo.szIP + " 调焦+成功！");
	            },
	            error: function () {
	                //console.log(oWndInfo.szIP + "  调焦+失败！");
	            }
	        });
	    }
	}
	//缩小
	function PTZZoomout() {
	    var oWndInfo = WebVideoCtrl.I_GetWindowStatus(g_iWndIndex);

	    if (oWndInfo != null) {
	        WebVideoCtrl.I_PTZControl(11, false, {
	            iWndIndex: g_iWndIndex,
	            success: function (xmlDoc) {
	                //console.log(oWndInfo.szIP + " 调焦-成功！");
	            },
	            error: function () {
	                //console.log(oWndInfo.szIP + "  调焦-失败！");
	            }
	        });
	    }
	}
	//停止
	function PTZZoomStop() {
	    var oWndInfo = WebVideoCtrl.I_GetWindowStatus(g_iWndIndex);

	    if (oWndInfo != null) {
	        WebVideoCtrl.I_PTZControl(11, true, {
	            iWndIndex: g_iWndIndex,
	            success: function (xmlDoc) {
	                //console.log(oWndInfo.szIP + " 调焦停止成功！");
	            },
	            error: function () {
	                //console.log(oWndInfo.szIP + "  调焦停止失败！");
	            }
	        });
	    }
	}

	function stop(){
		var OCXobj = document.getElementById("PlayViewOCX");
	    OCXobj.StopAllPreview();
	}
	function start(){
		var OCXobj = document.getElementById("PlayViewOCX");
	    OCXobj.SetOcxMode(0); 
	    OCXobj.SetWndNum(1);   
   	 	var strName = video.video_name;										//设备名称
        var strIP = video.app_ip;    				        					//设备ip
        var strAppName = video.app_username;									//用户名 
        var strAppPwd = video.app_password;					    			//密码 
        var strPort = video.app_port;				    						//设备端口号
        var ChanNum1 = video.app_device_video_channel_no;  					//通道号 
        var cameraID1 = video.app_device_video_channel_no;
        var strXML = "<?xml version='1.0'?><Parament><CameraName>"+strName+"</CameraName><CameraID>" + cameraID1 + "</CameraID><DeviceIP>" + 
  	 	     strIP + "</DeviceIP><DevicePort>" + strPort + "</DevicePort><User>"+ strAppName +"</User><Password>" + 
  	 		 strAppPwd + "</Password><ChannelNum>"+ ChanNum1 +"</ChannelNum><ProtocolType>0</ProtocolType><StreamType>0</StreamType><Transmits></Transmits></Parament>";
		OCXobj.StartTask_Preview_InWnd(strXML,0); 
	}
	
	// 停止预览
	function clickStopRealPlay() {
		var oWndInfo = WebVideoCtrl.I_GetWindowStatus(g_iWndIndex),
			szInfo = "";

		if (oWndInfo != null) {
			var iRet = WebVideoCtrl.I_Stop();
			if (0 == iRet) {
				szInfo = "停止预览成功！";
			} else {
				szInfo = "停止预览失败！";
			}
		}
	}

	// 开始预览
	function clickStartRealPlay(type) {
		jQuery('div#menu .siteSeleBd ul, div#menu .helpSeleBd ul').css("border-radius","8px");
		jQuery('.exit-block').css("border-radius","0 0 8px 8px");
		var oWndInfo = WebVideoCtrl.I_GetWindowStatus(g_iWndIndex),
			iStreamType = type,//码流格式
			bZeroChannel = false,
			szInfo = "";

		if ("" == szIP) {
			return;
		}

		if (oWndInfo != null) {// 已经在播放了，先停止
			WebVideoCtrl.I_Stop();
		}

		var iRet = WebVideoCtrl.I_StartRealPlay(szIP, {
			iStreamType: iStreamType,
			iChannelID: szChannelID,
			bZeroChannel: bZeroChannel
		});

		if (0 == iRet) {
			szInfo = "开始预览成功！";
		} else {
			szInfo = "开始预览失败！";
		}
	}
	
	window.onerror = function(){
	}
//]]>
</script>
<script type="text/javascript">
//<![CDATA[
           	var bol_silder = false;
           		function jlSetValue(type){
           			if(type==1){
           				jQuery( "#slider-range-max" ).slider({  //滑块控制控件
                        	range: "max",
                        	min: 0,
                        	max: 4,
                        	value : 0,
                        	step: 1,
                        	slide: function( event, ui ) {
                        		jQuery( ".control_juanl .control_rolle" ).hide();
                        		jQuery( ".control_juanl .control_rolle" ).eq(ui.value).show();
                        		if(ui.value == 0 ){
                        			jQuery(".led-screen-rt .statuesVal").text("全关");	
                        		}else if(ui.value == 1 ){
                        			jQuery(".led-screen-rt .statuesVal").text("1/4开");	
                        		}else if(ui.value == 2 ){
                        			jQuery(".led-screen-rt .statuesVal").text("半开");	
                        		}else if(ui.value == 3 ){
                        			jQuery(".led-screen-rt .statuesVal").text("3/4开");	
                        		}else if(ui.value == 4 ){
                        			jQuery(".led-screen-rt .statuesVal").text("全开");	
                        		}
                        	},
                        	change:function(event, ui){
                        		if(jQuery( "#amount" ).val()!= ui.value ){
                        			opjl(ui.value);
                        			jQuery( "#amount" ).val( ui.value );
                        		}
                        	}
                        });
           				isEvent = false;
           				bol_silder = true;
           			}else{
           				if(bol_silder){
           					jQuery( "#slider-range-max" ).slider("destroy");
           					bol_silder = false;
           				}
           			}
           			
           		}
           		var jlsn = "";
           		function opjl(interval){
           			jQuery.ajax({
						url : updateUrl,
						data : {'type':'update','sn':jlsn,'interval':interval, '_': new Date().getTime(),'device_type':'B' },
						dataType: 'jsonp',  
						crossDomain: true,  
						success: function (data) { 
							console.log(data)
							 if(typeof(data.ok)!="undefined"){
								 jQuery("#ljdiv .led-screen-lt").html("正常");
							 }else{
								 alert("卷帘操作失败!");
								 //jQuery("#dgstatus").html("故障");
								 //jQuery("#daojishi").val(0);
								 //timer();
								 //dgSetValue(2);
							 }
                    	},
                    	error: function(XMLHttpRequest, textStatus, errorThrown){
                    		alert("卷帘通讯失败!");
                    	}
					})
           		}
           		
           		var ledObject;
           		function ledSetValue(){
           			//LED显示屏无间隙滚动控制
	                var LedMonitor1 = document.getElementById("LedMonitor-txt1");
	                var LedMonitor2 = document.getElementById("LedMonitor-txt2");
	                var LedMonitor3 = document.getElementById("LedMonitor-txt3");
	                LedMonitor3.innerHTML=document.getElementById("LedMonitor-txt2").innerHTML;
	                function Marquee(){
	                	//console.log(LedMonitor1.scrollLeft+"xxx"+LedMonitor3.offsetWidth)
	                	if(LedMonitor1.scrollLeft-LedMonitor3.offsetWidth>=0){
	                		LedMonitor1.scrollLeft-=LedMonitor2.offsetWidth;
	                	}
	                	else{
	                		LedMonitor1.scrollLeft++;
	                	}
	                };
	                var myvar;
	                LedMonitor1.onmouseout=function (){myvar=setInterval(Marquee,30);}
	                LedMonitor1.onmouseover=function(){clearInterval(myvar);}
	                this.start = function(){
	                	this.stop();
	                	myvar=setInterval(Marquee,30);
	                }
	                this.stop = function(){
	                	clearInterval(myvar);
	                }
           		}
           		
           		function opled(){
           			jQuery.ajax({
						url : updateUrl,
						data : {'type':'update','sn':jlsn,'interval':interval, '_': new Date().getTime(),'device_type':'B' },
						dataType: 'jsonp',  
						crossDomain: true,  
						success: function (data) { 
							console.log(data)
							 if(typeof(data.ok)!="undefined"){
								 jQuery("#ljdiv .led-screen-lt").html("正常");
							 }else{
								 alert("卷帘操作失败!");
								 //jQuery("#dgstatus").html("故障");
								 //jQuery("#daojishi").val(0);
								 //timer();
								 //dgSetValue(2);
							 }
                    	},
                    	error: function(XMLHttpRequest, textStatus, errorThrown){
                    		alert("卷帘通讯失败!");
                    	}
					})
           		}
           		
           		function initLedValue(newStr){
           			jQuery.ajax({
						url : updateUrl,
						data : {'type':'update','sn':ledsn,'interval':newStr, '_': new Date().getTime(),'device_type':'C' },
						dataType: 'jsonp',  
						crossDomain: true,  
						success: function (data) { 
							console.log(data)
							 if(typeof(data.ok)!="undefined"){
								 jQuery("#ljdiv .led-screen-lt").html("正常");
								 jQuery("#LedMonitor-txt2").html(newStr);
					                jQuery("#LedMonitor-txt3").html(newStr);
					                jQuery("#LedMonitor-txt2").css("width","auto");
					                jQuery("#LedMonitor-txt3").css("width","auto");
					                var _width = jQuery("#LedMonitor-txt2").width();
					                jQuery("#LedMonitor-txt2").css('width',_width);
					                jQuery("#LedMonitor-txt").css('width',_width*2);
					                if(_width>236)
					                	ledObject.start();
					                else
					                	jQuery("#LedMonitor-txt2").css('width',236);
							 }else{
								 alert("卷帘操作失败!");
								 //jQuery("#dgstatus").html("故障");
								 //jQuery("#daojishi").val(0);
								 //timer();
								 //dgSetValue(2);
							 }
                    	},
                    	error: function(XMLHttpRequest, textStatus, errorThrown){
                    		alert("卷帘通讯失败!");
                    	}
					})
           		}
           		
           		function dgSetValue(type){
           			if(type==1){
           				jQuery('.closeDg-btn').unbind("click");
           				jQuery('.openDg-btn').unbind("click");
           				jQuery("#dgtext").removeAttr("readonly");
           				jQuery('.closeDg-btn').click(function(){  //关闭滴灌
           					closedg();
						});
						jQuery('.openDg-btn').click(function(){  //开启滴灌
							opdg();
						});
           			}else{
           				jQuery('.closeDg-btn').unbind("click");
           				jQuery('.openDg-btn').unbind("click");
           				jQuery("#dgtext").attr("readonly","readonly");
           				jQuery('.closeDg-btn').click(function(){  //关闭滴灌
           					if(jQuery("#dgstatus").html()=="故障"){
           						alert("设备故障,无法操作!");
           					}else if(jQuery("#dgstatus").html()=="手动"){
           						alert("设备手动控制,无法操作!");
           					}
						}); 
           				jQuery('.openDg-btn').click(function(){  //开启滴灌
							if(jQuery("#dgstatus").html()=="故障"){
								alert("设备故障,无法操作!");
           					}else if(jQuery("#dgstatus").html()=="手动"){
           						alert("设备手动控制,无法操作!");
           					}
						});
           			}
           		}
           		var dgsn = "";
           		var ledsn = "";
           		var updateUrl = domain+"/jopc/ServiceServlet?jsonpcallback=?";
           		function opdg(){
           			var interval = jQuery("#opendg").val();
           			if(interval==""){
           				alert("请填写滴灌时间!");
           				return;
           			}
           			interval = interval*60;
           			jQuery.ajax({
						url : updateUrl,
						data : {'type':'update','sn':dgsn,'interval':interval, '_': new Date().getTime(),'device_type':'A' },
						dataType: 'jsonp',  
						crossDomain: true,  
						success: function (data) { 
							console.log(data)
							 if(typeof(data.ok)!="undefined"){
								 jQuery("#dgstatus").html("正常");
								 jQuery("#daojishi").val(interval);
								 jQuery('.tapDg-openSign').fadeIn();
								 jQuery('.tapDg-closeSign').fadeOut();	
								 jQuery('.control_water').show();
								 dgSetValue(1);
								 timer();
							 }else{
								 alert("滴灌通讯失败!");
								 //jQuery("#dgstatus").html("故障");
								 //jQuery("#daojishi").val(0);
								 //timer();
								 //dgSetValue(2);
							 }
                    	},
                    	error: function(XMLHttpRequest, textStatus, errorThrown){
                    		alert("滴灌通讯失败!");
                    	}
					})
           		}
           		
           		function closedg(){
           			jQuery.ajax({
						url : updateUrl,
						data : {'type':'update','sn':dgsn,'interval':0, '_': new Date().getTime() ,'device_type':'A'},
						dataType: 'jsonp',  
						crossDomain: true,  
						success: function (data) { 
							console.log(data)
							 if(typeof(data.ok)!="undefined"){
								 jQuery("#dgstatus").html("正常");
								 jQuery("#daojishi").val(0);
								 dgSetValue(1);
								 jQuery('.tapDg-openSign').fadeOut();
								 jQuery('.tapDg-closeSign').fadeIn();
								 jQuery('.control_water').hide();
								 timer();
							 }else{
								 alert("滴灌通讯失败!");
								 //jQuery("#dgstatus").html("故障");
								 //jQuery("#daojishi").val(0);
								 //timer();
								 //dgSetValue(2);
							 }
                    	},
                    	error: function(XMLHttpRequest, textStatus, errorThrown){
                    		alert("滴灌通讯失败!");
                    	}
					})
           		}
           		
				var opdata;
				function initManager(){
					initOperate();
					jQuery('.tab-control-title li').click(function(){  //操作控制选项卡切换
						var _index = jQuery(this).index();
						jQuery(this).addClass('cur')
						.siblings().removeClass('cur');
						jQuery('.tab-control-content').find('.v-tab-content').hide();
						jQuery('.tab-control-content').find('.v-tab-content').eq(_index).show();
						shedSize();
					});
					shedSize();
					eval("opdata = "+operateStr);
					var bb = false;
					//滴灌
					var url = domain+"/jopc/ServiceServlet?jsonpcallback=?";
					if(typeof(opdata.dg) != "undefined"){
						bb = true;
						//操作控制选项卡下的滴灌控制开启和关闭
						dgsn = opdata.dg.sn;
						jQuery.ajax({
							url : url,
							data : {'type':'select','sn':dgsn, '_': new Date().getTime(),'device_type':'A' },
							dataType: 'jsonp',  
							crossDomain: true,  
							success: function (data) { 
								console.log(data)
								 if(typeof(data.ok)!="undefined"){
									 var control = data.ok.control;
									 var interval = data.ok.interval;
									 control = "2";
									 if(control=="1"){//手动
										 jQuery("#dgstatus").html("手动");
										 alert("滴灌手动控制");
										 dgSetValue(2);
									 }else if(control=="2"){//自动
										 jQuery("#dgstatus").html("正常");
									 	console.log(interval)
										 if(interval>0){
											 jQuery("#daojishi").val(interval);
											 dgSetValue(1);
											 timer();
										 }else{
											 jQuery("#daojishi").val(0);
											 dgSetValue(1);
											 jQuery("#dgdiv .led-screen-rt span").html("--:--");  
										 }
									 }
								 }else{
									 alert("滴灌通讯失败!");
									 jQuery("#dgstatus").html("故障");
									 jQuery("#daojishi").val(0);
									 timer();
									 dgSetValue(2);
								 }
                        	},
                        	error: function(XMLHttpRequest, textStatus, errorThrown){
                        		alert("滴灌通讯失败!");
                        	}
						})
						jQuery(".v-centerScroll li:eq(0)").attr("class","cur")
						jQuery(".v-centerScroll li:eq(0)").show();
						jQuery(".v-tab-content:eq(0)").show();
					}else{
						jQuery(".v-centerScroll li:eq(0)").hide();
						jQuery(".v-tab-content:eq(0)").hide();
					}
					//卷帘
					if(typeof(opdata.jl) != "undefined"){
						jlsn = opdata.jl.sn;
						jQuery.ajax({
							url : url,
							data : {'type':'select','sn':jlsn, '_': new Date().getTime() ,'device_type':'B'},
							dataType: 'jsonp',  
							crossDomain: true,  
							success: function (data) { 
								console.log(data)
								 if(typeof(data.ok)!="undefined"){
									 var control = data.ok.control;
									 var interval = data.ok.interval;
									 control = "2";
									 if(control=="1"){//手动
										 alert("卷帘手动控制");
										 jlSetValue(2);
										 jQuery("#ljdiv .led-screen-lt").html("手动");
									 }else {//自动
										 jQuery( "#amount" ).val(interval);
										 jlSetValue(1);
										 jQuery( "#slider-range-max" ).slider( "value",interval );
										 if(interval == 0 ){
			                        			jQuery(".led-screen-rt .statuesVal").text("全关");	
			                        		}else if(interval == 1 ){
			                        			jQuery(".led-screen-rt .statuesVal").text("1/4开");	
			                        		}else if(interval == 2 ){
			                        			jQuery(".led-screen-rt .statuesVal").text("半开");	
			                        		}else if(interval == 3 ){
			                        			jQuery(".led-screen-rt .statuesVal").text("3/4开");	
			                        		}else if(interval == 4 ){
			                        			jQuery(".led-screen-rt .statuesVal").text("全开");	
			                        		}
										 jQuery( ".control_juanl .control_rolle" ).hide();
			                        		jQuery( ".control_juanl .control_rolle" ).eq(interval).show();
										 jQuery("#ljdiv .led-screen-lt").html("正常");
									 }
								 }else{
									 jlSetValue(2);
									 jQuery("#ljdiv .led-screen-lt").html("故障");
									 alert("卷帘通讯失败!");
								 }
                        	},
                        	error: function(XMLHttpRequest, textStatus, errorThrown){
                        		alert("卷帘通讯失败!");
                        	}
						})
						jQuery(".v-centerScroll li:eq(1)").show();
						jQuery(".v-centerScroll li:eq(1)").attr("class","cur")
						if(!bb)
							jQuery(".v-tab-content:eq(1)").show();
						else
							bb = true;
					}else{
						jlSetValue(2);
						jQuery(".control_rolle").hide();
						jQuery(".v-centerScroll li:eq(1)").hide();
						jQuery(".v-tab-content:eq(1)").hide();
					}
					//Led
					if(typeof(opdata.led) != "undefined"){
						ledObject = new ledSetValue();
						ledsn = opdata.led.sn;
						jQuery.ajax({
							url : url,
							data : {'type':'select','sn':ledsn, '_': new Date().getTime(),'device_type':'C' },
							dataType: 'jsonp',  
							contentType : 'utf-8',
							crossDomain: true,  
							success: function (data) { 
								console.log(data)
								 if(typeof(data.ok)!="undefined"){
									 var interval = data.ok.interval;
									initLedValue(interval);
									ledObject.start();
								 }else{
									 alert("LED通讯失败!");
								 }
                        	},
							error: function(XMLHttpRequest, textStatus, errorThrown){
								alert("LED通讯失败!");
                        	}
						})
						jQuery(".farm-LedMonitor").show();
						jQuery(".v-centerScroll li:eq(2)").attr("class","cur")
						jQuery(".v-centerScroll li:eq(2)").show();
						if(!bb)
							jQuery(".v-tab-content:eq(2)").show();
					}else{
						if(typeof(ledObject)!="undefined")
							ledObject.stop();
						jQuery(".farm-LedMonitor").hide();
						jQuery(".v-centerScroll li:eq(2)").hide();
						jQuery(".v-tab-content:eq(2)").hide();
					}
				}
				function checkTime(i)        
		           {        
		              if (i < 10) {        
		                  i = "0" + i;        
		               }        
		              return i;        
		           }
				var times;
				var ind = 1;
				function timer()  {
					var ts = jQuery("#daojishi").val();
					if(ts<=0){
						clearTimeout(times);
						jQuery("#dgdiv .led-screen-rt span").html("--:--");  
						jQuery('.tapDg-openSign').fadeOut();
						jQuery('.tapDg-closeSign').fadeIn();
						jQuery("#opendg").val("");
						jQuery('.control_water').hide();
						return ;
					}else{
						//jquery(".openDg-btn").trigger("click");
					}
					ts = parseInt(ts,10);
					var str = "";
					if(ts>3600){
						var hour = parseInt(ts/3600); 
						str += hour+"小时";
						var mi = ts%3600;
						if(mi>0){
							var h = parseInt(ts/60);
							str += mi+"分";
						}
					}else if(ts>60){
						var h = parseInt(ts/60);
						str += h+"分";
						var mi = ts%60;
						if(mi>0){
							str += mi+"秒";
						}
					}
					if(str == '' ){
						str = "1分";
					}
	                jQuery(".led-screen-rt span").html(str);  
	                jQuery("#daojishi").val(ts-1);
					times = setTimeout("timer()",1000);  
				}
				
				function clearNoNum(obj){
					obj.value = obj.value.replace(/[^\d]/g,"");  //清除“数字”和“.”以外的字符  
					obj.value = obj.value.replace(/^\./g,"");  //验证第一个字符是数字而不是. 
					obj.value = obj.value.replace(/\.{2,}/g,"."); //只保留第一个. 清除多余的.   
					obj.value = obj.value.replace(".","$#$").replace(/\./g,"").replace("$#$",".");
				}
				/*****设置抓图格式为JPG******/
			    function CatchPicJPG()
			    {
			        var OCXobj = document.getElementById("PlayViewOCX");
			        OCXobj.SetCapturParam("C:\\pic",0);
			    }
			    /*****设置抓图格式为BMP******/
			    function CatchPicBMP()
			    {
			        var OCXobj = document.getElementById("PlayViewOCX");
			        OCXobj.SetCapturParam("C:\\pic",1);
			    }
			    /*****云台：左上******/
			    function PTZLeftUp()
			    {
			        var OCXobj = document.getElementById("PlayViewOCX");
			        OCXobj.StartTask_PTZ(25,3);
			    }
			    /*****云台：上******/
			    function PTZUp()
			    {
			        var OCXobj = document.getElementById("PlayViewOCX");
			        OCXobj.StartTask_PTZ(21,3);
			    }
			    /*****云台：右上******/
			    function PTZRightUp()
			    {
			        var OCXobj = document.getElementById("PlayViewOCX");
			        OCXobj.StartTask_PTZ(26,3);
			    }
			    /*****云台：左******/
			    function PTZLeft()
			    {
			        var OCXobj = document.getElementById("PlayViewOCX");
			        OCXobj.StartTask_PTZ(23,3);
			    }
			    /*****云台：自转******/
			    function PTZAuto()
			    {
			        var OCXobj = document.getElementById("PlayViewOCX");
			        OCXobj.StartTask_PTZ(29,3);
			    }
			    /*****云台：右******/
			    function PTZRight()
			    {
			        var OCXobj = document.getElementById("PlayViewOCX");
			        OCXobj.StartTask_PTZ(24,3);
			    }
			    /*****云台：左下******/
			    function PTZLeftDown()
			    {
			        var OCXobj = document.getElementById("PlayViewOCX");
			        OCXobj.StartTask_PTZ(27,3);
			    }
			    /*****云台：下******/
			    function PTZDown()
			    {
			        var OCXobj = document.getElementById("PlayViewOCX");
			        OCXobj.StartTask_PTZ(22,3);
			    }
			    /*****云台：右下******/
			    function PTZRightDown()
			    {
			        var OCXobj = document.getElementById("PlayViewOCX");
			        OCXobj.StartTask_PTZ(28,3);
			    }
			    /*****云台：停止******/
			    function PTZStop()
			    {
			        var OCXobj = document.getElementById("PlayViewOCX");
			        OCXobj.StartTask_PTZ(-21,3);
			    }
			    /*****云台：焦距+******/
			    function PTZAddTimes()
			    {
			        var OCXobj = document.getElementById("PlayViewOCX");
			        OCXobj.StartTask_PTZ(11,3);
			    }
			    /*****云台：焦距-******/
			    function PTZMinusTimes()
			    {
			        var OCXobj = document.getElementById("PlayViewOCX");
			        OCXobj.StartTask_PTZ(12,3);
			    }
			    /*****云台：焦点+******/
			    function PTZFarFocus()
			    {
			        var OCXobj = document.getElementById("PlayViewOCX");
			        OCXobj.StartTask_PTZ(13,3);
			    }
			    /*****云台：焦点-******/
			    function PTZNearFocus()
			    {
			        var OCXobj = document.getElementById("PlayViewOCX");
			        OCXobj.StartTask_PTZ(14,3);
			    }
			    /*****云台：光圈+******/
			    function PTZLargeAperture()
			    {
			        var OCXobj = document.getElementById("PlayViewOCX");
			        OCXobj.StartTask_PTZ(15,3);
			    }
			    /*****云台：光圈-******/
			    function PTZSmallAperture()
			    {
			        var OCXobj = document.getElementById("PlayViewOCX");
			        OCXobj.StartTask_PTZ(16,3);
			    }
			    /*****云台：调用预置点******/
			    function GetPt()
			    {
			        var OCXobj = document.getElementById("PlayViewOCX");
			        ptNum = document.getElementById("SelectGetpt").value;
			        var ret = OCXobj.PTZCtrlGotoPreset(ptNum); 
			             
			    }
			    /*****云台：设置预置点******/
			    function SetPt()
			    {
			        var OCXobj = document.getElementById("PlayViewOCX");
			        ptNum = document.getElementById("SelectSetpt").value;
			        var ret = OCXobj.PTZCtrlSetPreset(parseInt(ptNum));
			    }

				function imgDivShow(){
					jQuery('#imgUpload').show();
					jQuery('#tunnelType').html(jQuery('#tunnelTypeNameHidden').val());
					var tunnelInfoid = jQuery("#tunnel_id").val();  
					jQuery('#myframPic').attr('src','#{request.contextPath}/growth/AddvideoImage.seam?tunnelInfoid='+tunnelInfoid);
				}

			    function saveImage(){
					var url = jQuery("#myframPic").contents().find("#plant0").attr('src'); 
					var tunnelInfoId=jQuery("#tunnel_id").val();
					var type = '0';
					if(jQuery('#videoBackImg').is(':checked')){
						type = '1'
					}
					if(url != ""){
						saveVideoImg(url,tunnelInfoId,type);
					}
				}

			    function back(){
			    	jQuery('#imgUpload').hide();
				}
				
				function saveImgHuidiao(data){
					if(data == "success"){
						var url = jQuery("#myframPic").contents().find("#plant0").attr('src'); 
						if(url == undefined){
							jQuery('.videoimg').each(function(){
								jQuery(this).find('img').eq(0).attr('src', '/asset/images/videoPlayer.jpg');
							})
							
							videoUrl = "/asset/images/videoPlayer.jpg";
						}else{
							jQuery('.videoimg').find('img').eq(0).attr('src', url);
							videoUrl = url;
						}
						if(url == undefined){
							jQuery("#imgShow").attr('src', '/asset/images/nosp.png');
							if( jQuery("#imgShow").length >0 ){
								videoUrl = "/asset/images/nosp.png";
							}
						}else{
							jQuery("#imgShow").attr('src', url);
							videoUrl = url;
						}
						jQuery('#imgUpload').hide();
					}else{
						alert("保存失败");
					}
				}
	//]]>
</script>
<script language="javascript" for="PlayViewOCX" event="FireWindowsNumber(iSel)">   
	szMsg = "窗口分割消息,窗口数" + iSel;  
</script>
<script language="javascript" for="PlayViewOCX" event="FireSelectWindow(iSel)"> 
	szMsg = "窗口选择消息,窗口" + iSel;  
</script>
<script language="javascript" for="PlayViewOCX" event="FireStartRealPlay(iSel)">
	szMsg = "开始预览消息" + iSel;  
</script>
<script language="javascript" for="PlayViewOCX" event="FireStopRealPlay(iSel)">   
	szMsg = "停止预览消息" + iSel ;  
</script>
<script language="javascript" for="PlayViewOCX" event="FireStopPreviewAll()">   
	szMsg = "停止所有预览消息" ;  
</script>
<script language="javascript" for="PlayViewOCX" event="FireOpenSound(iSel)">   
	szMsg = "打开声音消息" ;  
</script>
<script language="javascript" for="PlayViewOCX" event="FireCloseSound(iSel)">   
	szMsg = "关闭声音消息" ;  
</script>
<script language="javascript" for="PlayViewOCX" event="FireChangeWindow(iFrom,iTo)">   
	szMsg = "互换窗口消息"+ "从" +iFrom+"到"+iTo;  
</script>
<script language="javascript" for="PlayViewOCX" event="FirePTZCtrl(iWindowID,iCtrlID,iSpeed)">   
	szMsg = "云台控制消息:"+ "窗口:" +iWindowID+"控制:"+iCtrlID+"速度:"+ iSpeed;  
</script>
<script language="javascript" for="PlayViewOCX" event="FireStartRecord(iWindowID)">   
	szMsg = "开始录像"+ iWindowID;  
</script>
<script language="javascript" for="PlayViewOCX" event="FireStopRecord(iWindowID)">   
	szMsg = "停止录像"+ iWindowID;  
</script>
<script language="javascript" for="PlayViewOCX" event="FireCatchPic(szPath,iWindowID)">   
	szMsg = "抓图"+ "路径" +szPath+"窗口"+iWindowID;  
</script>
<script language="javascript" for="PlayViewOCX" event="FireStartPlayBack(lWindowID)">  
</script>
<script language="javascript" for="PlayViewOCX" event="FireStopPlayBack(lWindowID)">  
</script>
<script type="text/javascript" src="#{request.contextPath}/asset/monitoring/js/webVideoCtrl.js"/>
</td>

<script type="text/javascript" src="#{request.contextPath}/asset/js/alarm/warning.js"></script>
</ui:define>
</ui:composition>

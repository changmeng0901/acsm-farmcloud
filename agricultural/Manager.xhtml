<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	template="/layout/template_new.xhtml">
	<ui:define name="foot">
		<!-- 选择基地 开始 -->
		<ui:include src="/layout/BaseIframe.xhtml"></ui:include>
		<!-- 选择基地 结束 -->  
	</ui:define>
	<ui:define name="head_next">
	<link rel="stylesheet" type="text/css" href="#{request.contextPath}/asset/css/base.css"/>
	<link rel="stylesheet" type="text/css" href="#{request.contextPath}/asset/css/FarmingManage.css"/>
	<link rel="stylesheet" type="text/css" href="#{request.contextPath}/asset/css/skinBlue.css" />
	<link type="text/css" rel="stylesheet" href="#{request.contextPath}/asset/css/agricultural/easyFarm.css" />
	</ui:define>
	<ui:define name="body">
	<!--右边开始-->
            <td valign="top">
  <style>
  body{font-size:14px;}
  .r_t #topModel{width:600px;}
  .r_t #topModel .modal-dialog{ width:600px;}
  .borderBt{ border-bottom:2px solid #33aedc;}
  .bootstrap-select.btn-group{float:left;}
  .bootstrap-select.btn-group .dropdown-menu {max-width: 295px;}
  .MagnifierBox{position: relative;}
  .MagnifierBox .mask{position: absolute; left:0; bottom:0; width:100%; height:auto; z-index:2000; background:url(#{request.contextPath}/asset/images/archive/mask.png) repeat; box-sizing:border-box; padding:5px; line-height:24px;  color: #fff; border-radius:0 0 5px 5px;}
  .farmPics{float: left; max-width:560px;}
   .jl .bootstrap-select.btn-group .dropdown-menu.inner{height:280px;}
   .jh .bootstrap-select.btn-group .dropdown-menu.inner{height:280px;}
   /*01：农事页面增加语音备注*/
		.baseDl_jl dt .voice{
			background: #5cb85c url(#{request.contextPath}/asset/images/icon_voice.png) no-repeat 8px 2px;
			border-radius:10px;
			padding:0 10px 0 22px;
			font-style: normal;
			font-size:14px;
			font-family: "arial";
			font-weight: bold;
			margin-left:5px;
			cursor:pointer;
			}
		.voice_dialog{
			position:fixed;
			left:50%;
			top:50%;
			width:416px;
			margin:-127px 0 0 -208px;
			}
		.voice_dialog .modal-title{
			font-size:14px;
			}
		.voice_dialog .modal-body{
			height:200px;
			padding:15px;
			box-sizing:border-box;
			overflow:auto;
			}
		.voice_list{
			width:220px;
			margin:auto;
			padding-top: 5px;
			}
		.voice_list li{
			padding:10px 0;
			overflow:hidden;
			}
		.voice_list .v_head{
			float:left;
			width:32px;
			height:32px;
			margin-right:26px;
			border-radius:50%;
			overflow:hidden;
			}
		.voice_list .v_head img{
			width:100%;
			height:100%;
			}
		.voice_list .v_time{
			position:relative;
			float:left;
			width:160px;
			height:24px;
			line-height:24px;
			margin-top:3px;
			border-radius:5px;
			background:#5cb85c;
			font-size:14px;
			color:#fff;
			}
		.voice_list .v_time:before{
			position:absolute;
			left:-5px;
			top:7px;
			content:'';
			border-style:solid solid solid solid;
			border-color: transparent #5cb85c transparent transparent;
			border-width:5px 5px 5px 0;
			}
		.voice_list .v_time .v_text{
			display:block;
			height:24px;
			padding-left:30px;
			background:url(#{request.contextPath}/asset/images/icon_voice.png) no-repeat 12px center;
			}
  </style>
  			<script type="text/javascript" src="#{request.contextPath}/asset/js/icheck.js"></script>
			
            <script type="text/javascript" src="#{request.contextPath}/asset/new/bootstrap-popver.js"></script>
            <script src="#{request.contextPath}/asset/js/jquery.lazyloadxt.js"></script>
            #{operateHome.mainList()}
            #{operateHome.initInsertList()}
            #{operateHome.initOperateList()}
            #{operateHome.initTypeList()}
            #{operateHome.initTimeList()}
            #{operateHome.initPlantList()}
            #{operateHome.initFarmerList()}
            #{operateHome.initStorageData()}

            <div style="width:100%;">
                <div class="right_c clear">
                
                	<!-- 公用头部 开始 -->
                	 <div class="r_title clear">
		                <div class="r_t_l fl"><span>生产管理</span><em>&gt;</em><font size="3">农事管理</font></div>
		                <div class="fr" style="margin-bottom:-1px;">
		                    <ul class="cm_resumeList clear">
		                    	<li>
				                    <a href="#{request.contextPath}/agricultural/FarmingCalendar.seam"><img src="#{request.contextPath}/asset/images/agricultural/FarmingCalendar_icon1.jpg"/><span>农事日历</span></a>
				                </li>
		                        <li>
		                            <a class="borderBt" href="#{request.contextPath}/agricultural/Manager.seam"><img src="#{request.contextPath}/asset/images/agricultural/FarmingCalendar_icon2.jpg"/><span>农事管理</span></a>
		                        </li>
		                        <li>
		                            <a href="#{request.contextPath}/agricultural/DiseaseControl.seam"><img src="#{request.contextPath}/asset/disease/images/binghaifz_ico2.jpg" /><span>病害防治</span></a>
		                        </li>
		                    </ul>
		                </div>
		                
		                <a4j:form>
			            <s:div styleClass="fr all_select" style="margin-bottom:-1px;" rendered="#{sessionTake.levelId ge dataDicConstant.getUserLevelBase()}">
			            <input type="hidden" value="#{operateHome.baseId}" class="base_Id"/>
			            </s:div>
			            </a4j:form>
		            </div>
					<!-- 公用头部 结束 -->
                    <!-- 农事管理内容 开始 -->
                    <table width="100%" cellpadding="0" cellspacing="0">
                    	<tr>
                        	<td width="" valign="top">
                            <div class="cm_resumeLt pr20 pt20" style="min-width:740px;">
                            <!-- 农事管理内容 左侧 开始 -->
                                <div class="cm_resumeLtTp clear">
                                    <div class="col-lg-6 fl" style="padding-left:0; padding-right:5px; width:auto;">
                                      <div class="input-group iptSeletAuto">
                                        <select class="selectpicker" id="searchType_">
                                        <option value="-1">全部</option>
                                        <option value="1">记录</option>
                                        <option value="2">计划</option>
                                        </select>
                                        <div class="public-search" style="margin-left:-1px;">
                                        <span class="octicon-search02"></span>
                                        <input type="text" id="searchInfo_"   class="form-control srarchfont" style="width:330px;" value="请输入搜索条件" />
                                        </div>
                                      </div>
                                    </div>
                                    <div class="fl"><input type="button" value="搜索" class="btn btn-primary" onclick="search()"/></div>
                                    <div class="farmmingAdd fr"> 
                                       <input id="add-farm-plan" class="btn btn-success" style="" type="button"  onclick="setAgrValue(1);" value="添加农事记录"></input>
                                       <h:panelGroup rendered="#{operateHome.enterpriseSettings.farmPlatChecked}">
                                       	<input id="add-farm-record" class="btn btn-default ml5 btn-primary" style="display: #{s:hasRole('farmer_work_add')?'hidden':'none'}" type="button" onclick="setAgrValue(2);" value="添加农事计划"></input>
                                       </h:panelGroup>
                                       <input class="btn btn-default ml5" type="button" onclick="if(!alldel())return false;" value="批量删除"></input>
                                       
                                        <!-- Modal 添加农事记录弹窗 开始 -->
                                        <div class="modal fade record" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                            <div class="modal-dialog farmRecord" id="addJilu" >
							                	<div class="modal-content">
							                		<a4j:form ajaxSubmit="true" id="agr">
							                  			<div class="modal-header clear">
										                    <h4 class="modal-title fl">添加农事记录</h4>
										                    <i class="i_close" data-dismiss="modal"></i>
							                  			</div>
							                  			<div class="modal-body clear">
							                  				<div class="main-content770">
								                    			<div class="choice jl">
											                        <p class="item">区域</p>
											                        <h:panelGroup id="plantListDiv">
											                        <select style="display: none;" class="selectpicker" id="record_tunnel" name="record_tunnel" multiple="multiple" data-live-search="true" onchange="tunnelValue('')">
	                                                                	<option value="" disabled="disabled">正在种植</option>
	                                                                    <a4j:repeat value="#{operateHome.plantList}" var="var">
	                                                                    	<option value="#{var[0]}"  aa="#{var[9]}" va="#{var[0]}" fa="#{var[10]}" ty="#{var[12]}" pid="#{var[11]}" style="padding-left:#{var[12]=='realPlant'?'40px;':'20px;'}">
	                                                                        	<h:panelGroup rendered="#{var[12]=='realPlant'}">
	                                                                        		&#160;#{var[2]}-#{var[4]}(#{var[3]})-#{var[8]}
	                                                                        	</h:panelGroup>
	                                                                        	<h:panelGroup rendered="#{var[12]!='realPlant'}">
	                                                                        		&#160;#{var[6]}
	                                                                        	</h:panelGroup>
	                                                                       	</option>
																		</a4j:repeat>
	                                                                    <option value="" disabled="disabled">计划种植</option>
	                                                                    <a4j:repeat value="#{operateHome.planPlantList}" var="var">
	                                                                    	<option value="#{var[0]}"  aa="#{var[9]}" va="#{var[0]}" fa="#{var[10]}" ty="#{var[12]}" pid="#{var[11]}" style="padding-left:#{var[12]=='realPlant'?'40px;':'20px;'}">
	                                                                     	<h:panelGroup rendered="#{var[12]=='realPlant'}">
	                                                                     		&#160;#{var[2]}-#{var[4]}(#{var[3]})-#{var[8]}
	                                                                     	</h:panelGroup>
	                                                                     	<h:panelGroup rendered="#{var[12]!='realPlant'}">
	                                                                     		&#160;#{var[6]}
	                                                                     	</h:panelGroup>
	                                                                    	</option>
	                                                                    </a4j:repeat>
	                                                                </select>
	                                                                <script type="text/javascript">
			                                                          	jquery('.selectpicker').selectpicker({dropupAuto:false});
			                                                        </script>
	                                                                </h:panelGroup>
											                    </div>
											                   
											                    <div class="choice" style="display:#{operateHome.enterpriseSettings.farmerChecked?'block;':'none;'}" dis="#{operateHome.enterpriseSettings.farmerChecked}">
											                        <p class="item">操作人</p>
											                        <s:div id="refreshFarmer">
											                        <select style="display: none;" class="selectpicker" multiple="multiple" data-live-search="true" id="record_name" name="record_name">
		                                               					<a4j:repeat value="#{operateHome.farmerList}" var="var">
		                                               					<option value="#{var[0]}">#{var[1]}</option>
		                                               					</a4j:repeat>
		                                                            </select>
		                                                            </s:div>
											                    </div>
											                    <div class="choice">
											                        <p class="item">操作内容</p>
											                        <s:div id="refreshOlist" styleClass="jl">
	                                                                	<select class="selectpicker" style="display: none;" id="record_operate" name="record_operate"  data-live-search="true">
		                                                                    <a4j:repeat value="#{operateHome.allTypeList}" var="var">
		                                                                    	<option value="#{var[0]}">#{var[1]}</option>
		                                                                    </a4j:repeat>
	                                                                    </select>
	                                                                </s:div>
												                    <div class="addContent">
												                    	<input type="button" class="farmingInputs_add2" onclick="jquery('#o_name_1').val('');jquery('#o_remark_1').val('');jquery('#add_operate2').show();"/>
												                   	</div>
											                   </div>
											                    <div class="choice" style="display:#{operateHome.enterpriseSettings.workTimeChecked?'block;':'none;'}" dis="#{operateHome.enterpriseSettings.workTimeChecked}">
											                        <p class="item">工时</p>
											                        <input class="form-control nw130"  type="text" id="record_time" name="record_time"/>
											                        <p class="unit">小时</p>
											                        <p class="unit" style="color:red;">*</p>
											                    </div>
											                    <div class="choice">
											                        <p class="item">操作时间</p>
											                        <div class="input-append date form_datetime record_date" >
				                                                       <input size="26" type="text" value="" readonly="readonly" id="record_date" name="record_date" />
				                                                       <span class="add-on"><i class="icon-th"></i></span>
				                                                    </div>
											                    </div>
											                    <div class="choice" style="display:#{operateHome.enterpriseSettings.environmentChecked?'block;':'none;'}" dis="#{operateHome.enterpriseSettings.environmentChecked}"> 
											                        <p class="item">环境温度</p>
											                        <input class="form-control nw130"  type="text" id="record_temp" name="record_temp"/>
											                        <p class="unit">℃</p>
											                    </div>
											                    <div class="choice" style="display:#{operateHome.enterpriseSettings.environmentChecked?'block;':'none;'}" dis="#{operateHome.enterpriseSettings.environmentChecked}">
											                        <p class="item">环境湿度</p>
											                        <input class="form-control nw130"  type="text" id="record_humi" name="record_humi"/> 
											                        <p class="unit">%</p>
											                    </div>
											                    <div class="tup clear">
											                    	<div class="choice" style="margin-bottom: 0px;">
											                        	<p class="item farmHeight">农事图片</p>
											                        	<div class="farmPics">
												                            <h:panelGroup id="picId">
			                                                                    <a4j:repeat value="#{operateHome.farmingPicList}" var="var" id="farmingPicList" rowKeyVar="row">
			                                                                    	<div class="farmingInputs fl">
			                                                                        	<a class="farmingInputs_pic" href="javascript:;"><img src="#{var[0]}" width="128" height="128" class="farmPicUrl"/></a>
			                                                                            <em class="closeInputs" onclick="delfarmingPic(this,#{row})"><img src="#{request.contextPath}/asset/images/clo_04.jpg" /></em>
			                                                                        </div>
			                                                                    </a4j:repeat>
			                                                                    <input type="button" class="farmingInputs_add3" style="margin-bottom:25px;float:none;" onclick="addFarming()"></input>
		                                                                    </h:panelGroup>
											                        	</div>
											                   		</div> 
											                        <div class="choice" style="margin-bottom: 0px;display:#{operateHome.enterpriseSettings.inputsInfoChecked?'block;':'none;'}" >
											                            <p class="item farmHeight">投入品</p>
											                            <div class="farmPics">
										                            	<s:div id="farmingInputs_wp" styleClass="farmingInputs_wp ">
		                                                                	<a4j:repeat value="#{operateHome.recordList}" var="var" id="recordList" rowKeyVar="row">
			                                                                	<div class="farmingInputs fl">
			                                                                       	<a class="farmingInputs_pic" href="javascript:;">
			                                                                       	<s:fragment rendered="#{var.inputsInfoId.packingImagesUrl eq null or var.inputsInfoId.packingImagesUrl eq ''}"><img src="#{request.contextPath}/asset/images/inputs/tourupin.jpg" width="128" height="128" /></s:fragment>
			                                                                       	<s:fragment rendered="#{var.inputsInfoId.packingImagesUrl ne null and var.inputsInfoId.packingImagesUrl ne ''}"><img src="#{var.inputsInfoId.packingImagesUrl}" width="128" height="128" /></s:fragment>
			                                                                       	<p>#{var.inputsInfoId.name} #{var.amount}#{var.inputsInfoId.unitInfo.name}</p>
			                                                                       	</a>
			                                                                        <em class="closeInputs" onclick="delRecordList(this,#{row})"><img src="#{request.contextPath}/asset/images/clo_04.jpg" /></em>
			                                                                    </div>
		                                                                	</a4j:repeat>
		                                                                    	
		                                                                        <div class="farmingInputs_add" style="position:static;">
		                                                                        	<input type="button" class="farmingInputs_add3" style="margin-bottom:25px;" onclick="addRecord()"></input>
		                                                           				</div>
		                                                                </s:div>
		                                                                </div>
											                        </div> 
											                    </div>
								                    			<div class="choice" style="display:#{operateHome.enterpriseSettings.inputsInfoChecked?'block;':'none;'}">
											                        <p class="item">农资成本</p>
											                        <s:div id="nsInputsCost">
											                        	<p class="unit" id="nsInputsCostVal">
											                        		<h:outputText value="#{operateHome.inputsCost}" ><f:convertNumber pattern="#.##"/></h:outputText>元
											                        	</p>
											                        </s:div>
											                    </div>
											                    <div class="choice" style="display:#{operateHome.enterpriseSettings.costChecked?'block;':'none;'}" dis="#{operateHome.enterpriseSettings.costChecked}">
											                        <p class="item">其他成本</p>
											                        <input type="text" class="form-control nw130" id="record_costing" name="record_costing"/>
											                        <p class="unit">元</p>
											                    </div>
											                    <div class="choice" style="width:100%;">
								                        			<p class="item">备注</p>
								                        			<textarea class="form-control nw300"  rows="3" id="record_remark" name="record_remark"></textarea>
								                    			</div>
							                    			</div>
							                  			</div>
							                  			<div class="modal-footer">
							                  				<h:inputHidden value="#{operateHome.selBaseId}" id="hidBaseId" name="selBaseId"/>
									                    	<a4j:commandButton id="hidAddBtn"  style="display:none;"  eventsQueue="mainQueue" action="#{operateHome.addAgricultural()}" value="提交" data="#{operateHome.messageStr}"  oncomplete="jquery('.jilubutton').removeAttr('disabled');jquery('.completeNum1,.tooltip_').tooltip();jsZoom();jquery('#myModal').modal('hide');jquery('.lazyloadimg').lazyLoadXT();fhnongshi();" reRender="refreshList,refreshPage,timeList" ></a4j:commandButton>
		                                                    <a4j:commandButton id="hidAddNewBtn"  style="display:none;"  eventsQueue="mainQueue" action="#{operateHome.addAgricultural()}" value="提交并新增" oncomplete="jquery('.jilubutton').removeAttr('disabled');before=1;openRecord();jquery('.completeNum1,.tooltip_').tooltip();jsZoom();jquery('.lazyloadimg').lazyLoadXT();fhnongshi();" reRender="refreshList,refreshPage,timeList"></a4j:commandButton>
		                                                    
		                                                    <a4j:commandButton styleClass="btn btn-success jilubutton"  eventsQueue="mainQueue" value="提交" onclick="checkAgr(1)"></a4j:commandButton>
		                                                    <a4j:commandButton styleClass="btn btn-default jilubutton"  eventsQueue="mainQueue" value="提交并新增" onclick="checkAgr(2)"></a4j:commandButton>
		                                                    <input class="btn btn-default" type="button" value="返回" onclick="jquery('#myModal').modal('hide');jsZoom();"></input>
                                                    	</div>
                                                   	</a4j:form>
							                  	</div>
							                </div>
              
              
              
              								<div class="modal-dialog farmRecord" id="addJihua">
							                	<div class="modal-content">
							                		<a4j:form ajaxSubmit="true" id="agr2">
							                  			<div class="modal-header">
	                                                    	<h4 class="modal-title font14 fl" id="myModalLabel">添加农事计划</h4>
										                    <i class="i_close" data-dismiss="modal"></i>
	                                                    </div>
							                  			<div class="modal-body clear" style="#{operateHome.enterpriseSettings.inputsInfoChecked?'overflow:auto;':'overflow:inherit;'}">
							                    			<div class="main-content770">
								                    			<div class="choice jh">
											                        <p class="item">区域</p>
											                        <h:panelGroup id="jhPlantListDiv">
											                        	<select style="display: none;" class="selectpicker" id="record_tunnel2" name="record_tunnel2" multiple="multiple" data-live-search="true" onchange="tunnelValue(2)">
	                                                                        <option value="" disabled="disabled">正在种植</option>
	                                                                        <a4j:repeat value="#{operateHome.plantList}" var="var">
	                                                                        	<option value="#{var[0]}"  aa="#{var[9]}" va="#{var[0]}" fa="#{var[10]}" ty="#{var[12]}" pid="#{var[11]}" style="padding-left:#{var[12]=='realPlant'?'40px;':'20px;'}">
		                                                                        	<h:panelGroup rendered="#{var[12]=='realPlant'}">
		                                                                        		&#160;#{var[2]}-#{var[4]}(#{var[3]})-#{var[8]}
		                                                                        	</h:panelGroup>
		                                                                        	<h:panelGroup rendered="#{var[12]!='realPlant'}">
		                                                                        		&#160;#{var[6]}
		                                                                        	</h:panelGroup>
	                                                                        	</option>
	                                                                        </a4j:repeat>
	                                                                        <option value="" disabled="disabled">计划种植</option>
	                                                                        <a4j:repeat value="#{operateHome.planPlantList}" var="var">
	                                                                        	<option value="#{var[0]}"  aa="#{var[9]}" va="#{var[0]}" fa="#{var[10]}" ty="#{var[12]}" pid="#{var[11]}" style="padding-left:#{var[12]=='realPlant'?'40px;':'20px;'}">
		                                                                        	<h:panelGroup rendered="#{var[12]=='realPlant'}">
		                                                                        		&#160;#{var[2]}-#{var[4]}(#{var[3]})-#{var[8]}
		                                                                        	</h:panelGroup>
		                                                                        	<h:panelGroup rendered="#{var[12]!='realPlant'}">
		                                                                        		&#160;#{var[6]}
		                                                                        	</h:panelGroup>
	                                                                        	</option>
	                                                                        </a4j:repeat>
	                                                                    </select>
	                                                                    <script type="text/javascript">
	                                                                    	jquery('.selectpicker').selectpicker({dropupAuto:false});
				                                                        </script>
	                                                                </h:panelGroup>
											                    </div>
											                    <div class="choice" style="display:#{operateHome.enterpriseSettings.farmerChecked?'block;':'none;'}" dis2="#{operateHome.enterpriseSettings.farmerChecked}">
											                        <p class="item">操作人</p>
											                        <s:div id="refreshFarmerJh">
											                        	<select style="display: none;" class="selectpicker" multiple="multiple" data-live-search="true" id="record_name2" name="record_name2">
	                                                    					<a4j:repeat value="#{operateHome.farmerList}" var="var">
	                                                    					<option value="#{var[0]}">#{var[1]}</option>
	                                                    					</a4j:repeat>
	                                                                    </select>
	                                                                </s:div>
											                    </div>
											                    <div class="choice">
											                        <p class="item">操作内容</p>
											                   		<s:div id="refreshOlist_" styleClass="jh">
	                                                                	<select class="selectpicker" style="display: none;" id="record_operate2" name="record_operate2" data-live-search="true">
		                                                                    <a4j:repeat value="#{operateHome.allTypeList}" var="var">
		                                                                    	<option value="#{var[0]}">#{var[1]}</option>
		                                                                    </a4j:repeat>
	                                                                    </select>
	                                                                </s:div>
	                                                           		<input type="button" class="farmingInputs_add2" onclick="jquery('#o_name_1').val('');jquery('#o_remark_1').val('');jquery('#add_operate2').show();"/>
											                   </div>
											                    <div class="choice" style="display:#{operateHome.enterpriseSettings.workTimeChecked?'block;':'none;'}" dis2="#{operateHome.enterpriseSettings.workTimeChecked}">
											                        <p class="item">工时</p>
	                                                                	<input class="form-control fl" style="width:108px; margin-right:5px;" type="text" id="record_time2" name="record_time2"/>
											                        <p class="unit">小时</p>
											                        <p class="unit" style="color:red;">*</p>
											                    </div>
											                    <div class="choice">
											                        <p class="item">操作时间</p>
				                                                    <div class="input-append date form_datetime record_date2" >
	                                                                	<input size="26" type="text" value="" readonly="readonly" id="record_date2" name="record_date2"/>
	                                                                	<span class="add-on"><i class="icon-th"></i></span>
	                                                                </div>
											                    </div>
											                    <div class="tup clear">
											                        <div class="choice" style="margin-bottom: 0px;display:#{operateHome.enterpriseSettings.inputsInfoChecked?'block;':'none;'}" dis2t="#{operateHome.enterpriseSettings.inputsInfoChecked}">
											                            <p class="item farmHeight">投入品</p>
											                            <div class="farmPics">
											                            	<s:div id="farmingInputs_wp2" styleClass="farmingInputs_wp">
			                                                                	<a4j:repeat value="#{operateHome.recordList}" var="var" id="recordList" rowKeyVar="row">
				                                                                	<div class="farmingInputs fl">
				                                                                       	<a class="farmingInputs_pic" href="javascript:;">
				                                                                       	<s:fragment rendered="#{var.inputsInfoId.packingImagesUrl eq null or var.inputsInfoId.packingImagesUrl eq ''}"><img src="#{request.contextPath}/asset/images/inputs/tourupin.jpg" width="128" height="128" /></s:fragment>
				                                                                       	<s:fragment rendered="#{var.inputsInfoId.packingImagesUrl ne null and var.inputsInfoId.packingImagesUrl ne ''}"><img src="#{var.inputsInfoId.packingImagesUrl}" width="128" height="128" /></s:fragment>
				                                                                       	<p>#{var.inputsInfoId.name} #{var.amount}#{var.inputsInfoId.unitInfo.name}</p>
				                                                                       	</a>
				                                                                        <em class="closeInputs" onclick="delRecordList(this,#{row})"><img src="#{request.contextPath}/asset/images/clo_04.jpg" /></em>
				                                                                    </div>
			                                                                	</a4j:repeat>
		                                                                        <div class="farmingInputs_add" style="position:static;">
		                                                                        	<input type="button" class="farmingInputs_add3" style="margin-bottom:25px;" onclick="addRecord()"></input>
		                                                           				</div>
		                                                                    </s:div>
		                                                                </div>
											                        </div> 
											                    </div>
											                    <div class="choice" style="display:#{operateHome.enterpriseSettings.inputsInfoChecked?'block;':'none;'}">
											                        <p class="item">农资成本</p>
											                        <s:div id="jhInputsCost">
											                        	<p class="unit" id="jhInputsCostVal">
											                        		<h:outputText value="#{operateHome.inputsCost}" ><f:convertNumber pattern="#.##"/></h:outputText>元
											                        	</p>
											                        	
											                        </s:div>
											                    </div>
											                    <div class="choice" style="display:#{operateHome.enterpriseSettings.costChecked?'block;':'none;'}" dis2="#{operateHome.enterpriseSettings.costChecked}">
											                        <p class="item">其他成本</p>
											                        <input type="text" class="form-control nw130" id="record_costing2" name="record_costing2"/>
											                        <p class="unit">元</p>
											                    </div>
								                    			<div class="choice" style="width:100%;">
								                        			<p class="item">备注</p>
	                                                                	<textarea class="form-control" style="width:380px; resize:none; font-size:12px;" rows="3" id="record_remark2" name="record_remark2"></textarea>
								                    			</div>
							                    			</div>
							                  			</div>
							                  			<div class="modal-footer">
							                  				<h:inputHidden value="#{operateHome.selBaseId}" id="hidjhBaseId"/>
									                    	<a4j:commandButton id="hidAddBtn1"  style="display:none;"  eventsQueue="mainQueue" action="#{operateHome.addAgriculturalPlant()}" value="提交"  oncomplete="jquery('.jihuabutton').removeAttr('disabled');jquery('.completeNum1,.tooltip_').tooltip();jsZoom();jquery('#myModal').modal('hide');jquery('.lazyloadimg').lazyLoadXT();fhjihua();" reRender="refreshList,refreshPage"></a4j:commandButton>
		                                                    <a4j:commandButton id="hidAddNewBtn1"  style="display:none;"  eventsQueue="mainQueue" action="#{operateHome.addAgriculturalPlant()}" value="提交并新增"  oncomplete="jquery('.jihuabutton').removeAttr('disabled');before=1;openRecord();jquery('.completeNum1,.tooltip_').tooltip();jsZoom();jquery('.lazyloadimg').lazyLoadXT();fhjihua();" reRender="refreshList,refreshPage"></a4j:commandButton>
		                                                    
		                                                    <a4j:commandButton styleClass="btn btn-success jihuabutton"  eventsQueue="mainQueue" value="提交" onclick="checkAgr2(3)"></a4j:commandButton>
		                                                    <a4j:commandButton styleClass="btn btn-default jihuabutton"  eventsQueue="mainQueue" value="提交并新增" onclick="checkAgr2(4)"></a4j:commandButton>
		                                                    
		                                                    <input class="btn btn-default" type="button" value="返回" onclick="jquery('#myModal').modal('hide');jsZoom();"></input>
                                                    	</div>
                                                   	</a4j:form>
							                  	</div>
							                </div>
                     
                                            
                                            <div class="farmingInputs_mini modal-dialog" id="addInputRecord" style="z-index:101;position:absolute; left:50%; top:65px; width:828px; margin-left:-414px;">
                                                                            	<a4j:form ajaxSubmit="true" id="record_" autocomplete="on">
                                                                            	<div class="farmingInputs_miniHd"><h3>添加投入品</h3><input type="button" class="butt" onclick="jquery('#addInputRecord').hide()"/></div>
                                                                                <div class="farmingInputs_miniBd" style="padding:0;">
                                                                                	<div class="box_padding20">
	                                                                                    <div id="iradio-InputProductInfo">
	                                                                                    	<!-- 投入品搜索 -->
	                                                                                    	<div class="farminputs_search clear">
	                                                                                    		<div class="public-search">
																									<span class="octicon-search02"></span>
																									<input class="form-control nw300 srarchfont" id="searchInputText" type="text" value="请输入查询内容" onfocus="FocusFn(this,'#333','请输入查询内容')" onblur="BlurFn(this,'#a8a8a8','请输入查询内容')"></input>
																								</div>
																								<p class="txt_name fl">投入品类型</p>
																								<div class="inputs_selectpicker">
																									<select class="selectpicker" id="inputType">
				                                                                                        <option value="2">农药</option>
				                                                                                        <option value="3">肥料</option>
				                                                                                        <option value="5">种子</option>
				                                                                                        <option value="4">其他</option>
			                                                                                        </select>
		                                                                                        </div>
		                                                                                        <input type="button" class="btn btn-primary fl" onclick="searchInputs(1);" value="搜索"/>
	                                                                                    	</div>
	                                                                                    	<!-- 投入品表格上 -->
	                                                                                    	<h:panelGroup id="recordInputList">
	                                                                                    	<div class="inputs_table" id="inputs_table">
	                                                                                    	<table width="100%" cellpadding="0" cellspacing="0" id="inputsTable">
		                                                                                        <tr>
		                                                                                        	<th width="30" class="br_bt br_rt radius_lt"><span id="mn_checkall" class="mn_checkall" onclick="OutputCheckAll(this,'#inputs_table')"></span></th>
		                                                                                        	<th width="164" class="br_bt br_rt">投入品编号</th>
		                                                                                        	<th width="170" class="br_bt br_rt">投入品名称</th>
		                                                                                        	<th width="176" class="br_bt br_rt">投入品规格</th>
		                                                                                        	<th class="br_bt radius_lt">生产厂家</th>
		                                                                                        </tr>
		                                                                                        <a4j:repeat value="#{operateHome.goodsInfoList}" var="var">
			                                                                                        <tr id="trp_#{var[0]}">
			                                                                                        	<td class="br_bt br_rt"><span class="mn_check" id="check_#{var[0]}" onclick="OutputCheck(this,'#inputs_table','#mn_checkall','#{var[0]}')"></span>
			                                                                                        		<input type="hidden" value="#{var[0]}"/>
			                                                                                        		<input type="hidden" value="#{var[9]}"/>
			                                                                                        	</td>
			                                                                                        	<td class="br_bt br_rt"><p class="ellipsis">#{var[11]}</p></td>
			                                                                                        	<td class="br_bt br_rt"><p class="ellipsis">#{var[1]}</p> </td>
			                                                                                        	<td class="br_bt br_rt"><p class="ellipsis">#{var[5]}#{var[10]}<s:fragment rendered="#{not empty var[7]}">/#{var[7]}</s:fragment></p></td>
			                                                                                        	<td class="br_bt"><p class="ellipsis">#{var[8]}</p></td>
			                                                                                        </tr>
		                                                                                        </a4j:repeat>
	                                                                                        </table>
	                                                                                        </div>
	                                                                                        <!-- 分页 开始 -->
																						    <table class="pageModel-wap fr" cellpadding="0" cellspacing="0">
																						        <tr>
																						            <td>
																						                <div style="width:auto;">
																						                    <table class="pageModel" cellpadding="0" cellspacing="0">
																						                        <tr>
																						                            <td>
																						                            	<s:fragment rendered="#{operateHome.inputsPageNum ne 1 and operateHome.inputsTotalPageNum gt 0}">
																						                            		<span class="page_num"><a id="lastPage" href="javascript:inputsJump(1);">首页</a></span>
																							                            	<span class="page_num"><a href="javascript:inputsJump(#{operateHome.inputsPageNum-1});">&lt;&lt;</a></span>
																							                            </s:fragment>
																							                            <a4j:repeat value="#{operateHome.inputsPageList}" var="_page">
																							                            	<span class="page_num #{operateHome.inputsPageNum eq _page? 'page_Cur':''}"><a href="javascript:inputsJump(#{_page});">#{_page}</a></span>
																							                            </a4j:repeat>
																							                            <s:fragment rendered="#{operateHome.inputsPageNum ne operateHome.inputsTotalPageNum and operateHome.inputsTotalPageNum gt 0}">
																							                            	<span class="page_num"><a href="javascript:inputsJump(#{operateHome.inputsPageNum+1});">&gt;&gt;</a></span>
																							                            	<span class="page_num"><a id="lastPage" href="javascript:inputsJump(#{operateHome.inputsTotalPageNum});">尾页</a></span>
																							                            </s:fragment>																						                               
																						                                <span class="page_num pageCount page_last" style="border-right:0;"><a href="javascript:;" style="cursor:default;">共#{operateHome.inputsTotalPageNum}页</a></span>
																						                             </td>
																						                    	</tr>
																						                    </table>
																						                </div>
																						            </td>
																						        </tr>
																						    </table>
																						    </h:panelGroup>
																					    </div>
                                                                                    </div>
																				    <!-- 投入品表格下 -->
																				    <div class="box_padding20 br_dd mb20 clear">
																				    	<div class="inputs_table mt20">
                                                                                    	<table width="100%" cellpadding="0" cellspacing="0" id="addInputsTable">
	                                                                                        <tr>
	                                                                                        	<th width="40" class="br_bt br_rt radius_lt">序号</th>
	                                                                                        	<th width="80" class="br_bt br_rt">投入品名称</th>
	                                                                                        	<th width="80" class="br_bt br_rt">规格</th>
	                                                                                        	<th width="60" class="br_bt br_rt">使用量</th>
	                                                                                        	<th width="60" class="br_bt br_rt">成本</th>
	                                                                                        	<th width="120" class="br_bt br_rt">出库</th>
	                                                                                        	<th width="150" class="br_bt br_rt">入库批次</th>
	                                                                                        	<th width="90" class="br_bt br_rt">经办人</th>
	                                                                                        	<th width="50" class="br_bt br_rt">库存量</th>
	                                                                                        	<th class="br_bt radius_lt">操作</th>
	                                                                                        </tr>
                                                                                        </table>
                                                                                        </div>
																				    </div>
																				</div>                                                                               
                                                                                <div class="farmingInputs_miniFt">                                                                               						
																					<h:inputHidden value="#{operateHome.inputsInfoData}" id="inputsInfoData"/>
	                                                                                 <a4j:commandButton id="submitInputs"  eventsQueue="mainQueue" value="添加投入品" onclick="if(!submitRecord()){return false;}" reRender="farmingInputs_wp,farmingInputs_wp2,nsInputsCost,jhInputsCost" oncomplete="jquery('#addInputRecord').hide();document.getElementById('record_:submitInputs').disabled = false;farpicref()" action="#{operateHome.addInputsRecord()}" styleClass="btn btn-success"/>
	                                                                                <input class="btn btn-default" onclick="jquery('#addInputRecord').hide();" type="button" value="返回" style="margin-left:5px"></input>
                                                                                </div>
                                                                                </a4j:form>
                                                                            </div>
                                                                            
                                                                            <div class="farmingInputs_mini modal-dialog" id="addMyFarming" style="z-index:101;position:absolute; left:50%; top:50%; margin-left:-235px; margin-top:-210px;width:487px;">
                                                                            	<a4j:form ajaxSubmit="true" id="pic" autocomplete="on">
                                                                            	<div class="farmingInputs_miniHd"><h3>添加农事图片</h3><input type="button" class="butt" onclick="picFiltration();jquery('#addMyFarming').hide()"/></div>
                                                                                <div class="farmingInputs_miniBd_min">
                                                                                <iframe src="#{request.contextPath}/agricultural/farmingPic.seam" id="myframPic" name="myframPic" frameBorder="0" scrolling="no" height="228px" width="320" ></iframe>
                                                                                <table>
												                        		 <tr>
                                                                                	<td width="100"><h3 class="all_te" style="margin-top:10px;">图片说明:</h3></td>
                                                                                    <td width="230" >
                                                                                    	<h:inputTextarea value="#{operateHome.centent}" styleClass="form-control" id="contentId" style="width:319px; float:left; display:inline; margin-right:5px;"/>
                                                                                    	<h:inputHidden value="#{operateHome.imgUrl}" id="imgUrl"/>
                                                                                    	<h:inputHidden value="#{operateHome.picJson}" id="picJson"/>
                                                                                    	<span style="color:#f00;font-size:12px;font-family:'微软雅黑';">最多不能超过70字</span>
                                                                                    </td>
                                                                                  
                                                                                </tr>
                                                                                </table>
                                                                                </div>
                                                                                <div class="farmingInputs_miniFt">
                                                                                <a4j:commandButton value="提交"  eventsQueue="mainQueue" onclick="if(!myPicUrl())return false" data="#{operateHome.promptMessage}" oncomplete="farpicref(data)" reRender="picId"  action="#{operateHome.farmingPic()}" styleClass="btn btn-success"/>
                                                                                <input class="btn btn-default" onclick="picFiltration();jquery('#addMyFarming').hide();" type="button" value="返回" style="margin-left:5px"></input>
                                                                                </div>
                                                                                </a4j:form>
                                                                            </div>
                                                                            
                                                                            
                                             <div class="farmingInputs_mini" id="add_operate2" style="z-index:101;display:none;position:absolute; left:50%; top:50%; margin-left:-173px; margin-top:-150px;">
                                             <a4j:form ajaxSubmit="true">
                                                <div class="farmingInputs_miniHd"><h3>添加农事操作类型</h3>
                                                <input type="button" class="butt" onclick="jquery('#add_operate2').hide()"> </input>
                                                </div>
                                                <div class="farmingInputs_miniBd_min">
                                               
                                                <table>
                                                <tr>
                                                    <td width="60" align="right" valign="middle">名称</td>
                                                    <td style="padding-left:15px;">
                                                        <input class="form-control" id="o_name_1"  name="o_name" type="text" style="width:188px; float:left; display:inline; margin-right:5px;" />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td width="60" align="right" valign="middle">描述</td>
                                                    <td style="padding-left:15px;">
                                                        <textarea class="form-control" id="o_remark_1" name="o_remark" style="width:200px; resize:none;" rows="3"></textarea>
                                                    </td>
                                                </tr>
                                                </table>
                                                </div>
                                                <div class="farmingInputs_miniFt">
                                                <a4j:commandButton value="提交"  eventsQueue="mainQueue" onclick="if(!checkOp1())return false" action="#{operateHome.addOperate()}" reRender="refreshO,refreshOlist,refreshOlist_" oncomplete="jquery('#record_operate,#record_operate2').selectpicker('refresh');jquery('#add_operate2').hide()" styleClass="btn btn-success" style=""/>
                                                    <input class="btn btn-default" type="button"  onclick="jquery('#add_operate2').hide()" value="返回"/>
                                                </div>
                                                </a4j:form>
                                            </div>                               
                                        	<div class="modal-dialog" id="addInput" style="display:none;width:660px;">
                                        	<a4j:form ajaxSubmit="true" id="inputs" autocomplete="on">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                    <input type="button" class="close" onclick="closeAddInputsDiv();"> </input>
                                                    <h4 class="modal-title font14 mlal" id="myModalLabel">添加农药</h4>
                                                    </div>
                                                    <div class="modal-body" style="padding-bottom:0;    height: 390px;overflow-y:auto;">
                                                   		<table class="farmingMageTab_jl">
                                                            <tr>
                                                            	<td width="62" align="right">投入品名称</td>
                                                                <td width="205" style="padding-left:15px;">
							               							<input type="text" class="form-control nw221" style="width:190px;float:left;margin-left:2px;" id="input_name" name="input_name" /><span style="color: red;">*</span>
                                                                </td>
                                                            	<td width="62" align="right">投入品类型</td>
                                                                <td width="240" style="padding-left:15px;">
                                                                	<input type="hidden" id="input_type" name="input_type"/>
							               							<select class="selectpicker data_dic" id="input_type_id" name="input_type_id" onchange="changeType();" data-live-search="true">
	                                                                       <a4j:repeat  value="#{operateHome.inputsTypeList}" var="var" >	
	                                                                       		<s:fragment rendered="#{var[2] eq true}">                                                                    		
	                                                                       			<option value="#{var[0]}"  disabled="disabled" aa="#{var[3]}">#{var[1]}</option>	   
	                                                                       		</s:fragment>   
	                                                                       		<s:fragment rendered="#{var[2] ne true}">                                                                    		
	                                                                       			<option value="#{var[0]}" aa="#{var[3]}">#{var[1]}</option>	   
	                                                                       		</s:fragment>                                                                    																						
																			</a4j:repeat>
                                                                     </select>										                   			
                                                                </td>                                                               
                                                            </tr>
                                                            <tr  class="input_h ">                                                           	
                                                            	<td width="" align="right">保质期</td>
                                                                <td width="" style="padding-left:15px;">
                                                                	<input type="text" class="form-control nw221" style="width:180px;float:left;margin-left:2px;float:left" id="input_shelfLife" name="input_shelfLife"  />
                                                                	<div>月<span style="color: red;">*</span></div>
                                                                </td>
																<td width="62" align="right">规格</td>
                                                                <td width="218" style="padding-left:15px;">
                                                                	<input type="text" class="form-control nw221" style="width:70px;height:30px;float:left;margin-right:5px;" id="net_content" name="net_content"  />
												               		<div class="bootSelt-80" style="float:left;">
											                   			<select class="selectpicker" id="input_unit" name="input_unit">
																			
																		</select>
										                   			</div>
										                   			<p style="float:left; margin-right: 2px;margin-left: -5px;">/</p>
												               		<input type="text" class="form-control nw221" style="width:70px;height:30px;float:left;" id="input_spec" name="input_spec"  />
								               						<div style="clear:both;line-height:1;"><span style="color: red;">*</span>(净含量 单位规格/包装规格)</div>
								               						<div style="color: red;line-height:1;">投入品规格在提交投入品信息后不可修改！</div>
                                                                </td>
                                                            </tr>
                                                            <tr  class="input_h ">
                                                            	<td width="" align="right">存储类型</td>
                                                                <td width="" style="padding-left:15px;">
										                   			<select class="selectpicker" id="goods_storage_type" name="goods_storage_type">
																		<a4j:repeat  value="#{goodsInfoHome.goodsStorgeTypeList()}" var="var" >
																		<option value="#{var.goodsStorageTypeId}">#{var.name}</option>
																		</a4j:repeat>
																	</select>
										                   			<span style="color: red;">*</span>
                                                                </td>
                                                                <td width="" align="right">生产厂家</td>
                                                                <td width="" style="padding-left:15px;">
                                                                	<input type="text" class="form-control nw221" style="width:190px;float:left;margin-left:2px;" id="input_facture" name="input_facture"  />
                                                                	<span style="color: red;">*</span>
                                                                </td>
                                                            </tr>
                                                            <tr class="input_pest inpu">
                                                            	<td width="" align="right">有效成分</td>
                                                                <td width="" style="padding-left:15px;">
                                                                	<input type="text" class="form-control nw221" style="width:190px;" id="pest_active" name="pest_active"  />
                                                                </td>
                                                                <td width="" align="right">适用标准</td>
                                                                <td width="" style="padding-left:15px;">
                                                                	<select multiple="multiple" data-live-search="true" class="selectpicker data_dic" id="pest_data_dic" name="pest_data_dic">
																		<a4j:repeat  value="#{operateHome.ddList}" var="var" >
																		<option value="#{var.dataDicId}">#{var.name}</option>
																		</a4j:repeat>
																	</select>
                                                                </td>
                                                            </tr>
                                                            <tr class="input_pest inpu">
                                                            	<td width="" align="right">安全间隔期</td>
                                                                <td width="" style="padding-left:15px;">
                                                                	<input type="text" class="form-control nw221" style="width:190px;float:left" id="pest_interval" name="pest_interval"  /> 天
                                                                </td>
                                                                <td width="" align="right"></td>
                                                                <td width="" style="padding-left:15px;">                                                               	
                                                                </td>
                                                            </tr>
                                                            <tr class="input_pest inpu">
                                                            	<td width="" align="right">使用方法</td>
                                                                <td width="" style="padding-left:15px;">
                                                                	<textarea class="form-control" id="pest_method" name="pest_method" style="width:175px; resize:none; font-size:12px;" rows="3"></textarea>
                                                                </td>
                                                                <td width="" align="right">防治对象</td>
                                                                <td width="" style="padding-left:15px;">
                                                                	<textarea class="form-control" id="pest_control" name="pest_control" style="width:175px; resize:none; font-size:12px;" rows="3"></textarea>
                                                                </td>                                                               
                                                            </tr>
                                                            <tr class="input_fert inpu">
                                                            	<td width="" align="right">登记证号</td>
                                                                <td width="" style="padding-left:15px;">
                                                                	<input type="text" class="form-control nw221" style="width:190px;" id="fert_no" name="fert_no"  />
                                                                </td>
                                                                <td width="" align="right">养分含量</td>
                                                                <td width="" style="padding-left:15px;">
                                                                	<input type="text" class="form-control nw221" style="width:190px;" id="fert_content" name="fert_content"  />
                                                                </td>
                                                            </tr>
                                                            <tr class="input_fert inpu">
                                                            	<td width="" align="right">适用标准</td>
                                                                <td width="" style="padding-left:15px;">
                                                                	<select multiple="multiple" data-live-search="true" class="selectpicker data_dic" id="fert_data_dic" name="fert_data_dic">
																		<a4j:repeat  value="#{operateHome.ddList}" var="var" >
																		<option value="#{var.dataDicId}">#{var.name}</option>
																		</a4j:repeat>
																	</select>
                                                                </td>
                                                                <td width="" align="right"></td>
                                                                <td width="" style="padding-left:15px;">                                                                	
                                                                </td>
                                                            </tr>
                                                            <tr class="input_fert inpu">
                                                            	<td width="" align="right">施用方法</td>
                                                                <td width="" style="padding-left:15px;">
                                                                	<textarea class="form-control" id="fert_method" name="fert_method" style="width:175px; resize:none; font-size:12px;" rows="3"></textarea>
                                                                </td>
                                                                <td width="" align="right">适用作物</td>
                                                                <td width="" style="padding-left:15px;">
                                                                	<textarea class="form-control" id="fert_crop" name="fert_crop" style="width:175px; resize:none; font-size:12px;" rows="3"></textarea>
                                                                </td>                                                             
                                                            </tr>
                                                            <tr class="input_other inpu">
                                                            	<td width="" align="right">适用标准</td>
                                                                <td width="" style="padding-left:15px;">
                                                                	<select multiple="multiple" data-live-search="true" class="selectpicker data_dic" id="other_data_dic" name="other_data_dic">
																		<a4j:repeat  value="#{operateHome.ddList}" var="var" >
																		<option value="#{var.dataDicId}">#{var.name}</option>
																		</a4j:repeat>
																	</select>
                                                                </td>
                                                                <td width="" align="right"></td>
                                                                <td width="" style="padding-left:15px;">                                                                	
                                                                </td>
                                                            </tr>
                                                            
                                                            <tr class="input_seed inpu">
                                                            	<td width="" align="right">适用标准</td>
                                                                <td width="" style="padding-left:15px;">
                                                                	<select multiple="multiple" data-live-search="true" class="selectpicker data_dic" id="seed_data_dic" name="seed_data_dic" title="请选择">
																		<a4j:repeat  value="#{operateHome.ddList}" var="var" >
																		<option value="#{var.dataDicId}">#{var.name}</option>
																		</a4j:repeat>
																	</select>
                                                                </td>
                                                                <td width="" align="right">茬口</td>
                                                                <td width="" style="padding-left:15px;"> 
                                                                <input type="text" class="form-control nw221 " style="width:190px;float:left;margin-left:2px;" id="seed_crops" name="seed_crops"  /> <span style="color: red;">*</span>                                                              	
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                            	<td width="" align="right" valign="middle">备注</td>
                                                                <td width="" style="padding-left:15px;">
                                                                	<textarea class="form-control" id="input_description" name="input_description" style="width:175px; resize:none; font-size:12px;" rows="3"></textarea>
                                                                </td>
                                                                <td width="" align="right" valign="middle">图片上传：<input type="hidden" value="" id="url" name="url"/></td>
                                                                <td width="" style="padding-left:15px;">
                                                                	<iframe src="#{request.contextPath}/agricultural/InputsImage.seam" id="myframe" name="myframe" frameBorder="0" scrolling="no" width="200" onLoad="" ></iframe>
                                                                </td>
                                                            </tr>
                                                        </table>
                                                        <input type="hidden" id="data_dic" name="data_dic"/>
                                                    </div>
                                                    <div class="modal-footer inputFooter1">
                                                    <a4j:commandButton styleClass="btn btn-success" value="提交"  eventsQueue="mainQueue" onclick="if(!checkInput())return false;"/>
                                                    <a4j:commandButton styleClass="btn btn-success" value="提交"  id="if1Btn" eventsQueue="mainQueue" style="cursor: pointer;display:none;" action="#{operateHome.updateInputs}" data="#{operateHome.re_inputs_Str}_#{operateHome.promptMessage}" oncomplete="updateInputs_next(data,1);"/>
                                                    <input class="btn btn-default" type="button" onclick="jquery('#addInput').hide();jquery('#addJilu').show();jquery('#addInputRecord').show();"  value="返回"></input>
                                                    </div>
                                                    <div class="modal-footer inputFooter2">
                                                    <a4j:commandButton styleClass="btn btn-success" value="提交"  eventsQueue="mainQueue" onclick="if(!checkInput())return false;"/>
                                                    <a4j:commandButton styleClass="btn btn-success" value="提交"  id="if2Btn" eventsQueue="mainQueue" style="cursor: pointer;;display:none;" action="#{operateHome.updateInputs}" data="#{operateHome.re_inputs_Str}_#{operateHome.promptMessage}" oncomplete="updateInputs_next(data,2);"/>
                                                    <input class="btn btn-default" type="button" onclick="jquery('#addInput').hide();jquery('#addJihua').show();jquery('#addInputRecord').show();"  value="返回"></input>
                                                    </div>
                                                </div>
                                                </a4j:form>
                                            </div>
                                        
                                        </div>
                                        <!-- Modal 添加农事记录弹窗 结束 -->
                                        
                                        
										<!-- Modal 添加农事计划弹窗 开始 -->
                                        <!-- Modal 添加农事计划弹窗 结束 -->

                                    </div>
                                </div>
                                <s:div rendered="#{operateHome.tjb}">
                                <s:link view="/agricultural/Manager.xhtml" action="#{operateHome.reset()}" styleClass="queryClear mt20 clear" includePageParams="false">
                                <f:param name="pageNum" value="#{operateHome.pageNum}"></f:param>
                                <span class="clearAll_serDel">
                                <img src="#{request.contextPath}/asset/images/selectMenu-close03.png" />
                                </span>清除所有搜索条件
                                </s:link>
                                </s:div>
                                <div class="cm_resumeLtBt mt20 clear"  >
                                    <div class="cm_resumeMore clearfix">
                                    	<span style="padding-left: 5px;float:left;margin: 8px auto;">
	                                 		<input type="checkbox" id="cheAll" name="iCheck"  />
	                                 	</span>
                                        <h2>全选&#160;农事管理表</h2>
                                        <div class="fr">
                                        	
                                            <h:form>
                                            	<!-- 农事操作 开始 -->
                                            	<div class="fl status">
                                                <div class="btn-group" style="padding-right:12px;">                                                	
                                                      <input type="button" style="width:60px;" class="btn btn-default dropdown-toggle" value="农事操作" id="operateType_" data-toggle="dropdown">
                                                      </input> <span class="caret" style="margin-top:13px;"></span>
                                                      <ul class="dropdown-menu" role="menu">
                                                      	<li onclick="checkOperateType('1547');"><a href="#">田间管理</a></li>
                                                        <li onclick="checkOperateType(15);"><a href="#">定植</a></li>
                                                        <li onclick="checkOperateType(47);"><a href="#">采收</a></li>
                                                      </ul>
                                                    </div>
                                                </div>
                                                <!-- 农事操作 结束 -->
                                                <!-- 农事图片 开始 -->
                                            	<div class="fl status">
                                                <div class="btn-group" style="padding-right:12px;">
                                                      <input type="button" style="width:60px;" class="btn btn-default dropdown-toggle" value="农事图片" id="imgFlag_" data-toggle="dropdown">
                                                      </input> <span class="caret" style="margin-top:13px;"></span>
                                                      <ul class="dropdown-menu" role="menu">
                                                      	<li onclick="checkImgFlag(1);"><a href="#">有图</a></li>
                                                        <li onclick="checkImgFlag(2);"><a href="#">无图</a></li>
                                                      </ul>
                                                    </div>
                                                </div>
                                                <!-- 农事图片 结束 -->
                                                <!-- 添加人等下拉框控件 开始 -->
                                            	<div class="fl addPerson_selt">
                                                <select style="display: none;" id="addMan_" class="selectpicker" data-live-search="true" onchange="addM(this)">
                                                    <option value="-1">添加人</option>
                                                    <a4j:repeat value="#{operateHome.insertList}" var="var">
                                                    <option value="#{var[0]}">#{var[1]}</option>
                                                    </a4j:repeat>
                                                </select>
                                            	</div>
                                                
                                                <div class="fl">
                                                <!-- 时间 开始 -->
                                                <div class="farmingInputs_add1">
                                                    <div class="farmingbgIco18" style="padding-right:0; padding-left:0;">
                                                    <input type="button" onclick="jquery(this).parent().next('div').show();" class="filter-option pull-left" style="width:40px; background:none;" value="时间" /><span class="caret" style="margin-top:13px;"></span></div>
                                                    <div class="farmingInputs_mini" style="top:45px; left:auto; right:-100px; width:300px;  font-size:12px;">
                                                        <div class="farmingInputs_miniHd"><h3 style="font-size:14px; font-weight:bold;">按时间搜索</h3>
                                                        <input type="button" class="close" onclick="jquery(this).closest('.farmingInputs_mini').hide()"> </input></div>
                                                        <div class="farmingInputs_miniBd_min">
                                                        <table>
                                                        <tr>
                                                            <td width="70" align="right" valign="middle">开始时间：</td>
                                                            <td width="200">
                                                                 <div class="input-append date form_datetime dt1" style="font-family:'微软雅黑';">
                                                                    <input size="26" type="text" value="" id="start_" readonly="readonly" />
                                                                    <span class="add-on"><i class="icon-th"></i></span>
    														     </div>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td width="70" align="right" valign="middle">结束时间：</td>
                                                            <td width="200">
                                                                <div class="input-append date form_datetime dt1" style="font-family:'微软雅黑';" >
                                                                    <input size="26" type="text" value="" id="end_" readonly="readonly" />
                                                                    <span class="add-on"><i class="icon-th"></i></span>
    														     </div>
                                                            </td>
                                                        </tr>
                                                        </table>
                                                        </div>
                                                        <div class="farmingInputs_miniFt">
                                                            <input style="margin-left: 5px;" class="btn btn-success" onclick="tme()" type="button" value="提交"></input>
                                                            <input class="btn btn-default" onclick="jquery(this).closest('.farmingInputs_mini').hide()" style="margin-left: 5px;" type="button" value="返回"></input>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- 时间 结束 -->
                                                </div>
                                                <div class="fl status">
                                                <div class="btn-group" style="padding-right:12px;">
                                                      <input type="button" style="width:40px;" class="btn btn-default dropdown-toggle" value="状态" id="state_" data-toggle="dropdown">
                                                      </input> <span class="caret" style="margin-top:13px;"></span>
                                                      <ul class="dropdown-menu" role="menu">
                                                        <li onclick="stat(3);"><a href="#">已完成</a></li>
                                                        <li onclick="stat(2);"><a href="#">未完成</a></li>
                                                      </ul>
                                                    </div>
                                                </div>
                                                <div class="fl addPerson_selt">
                                                <select style="display: none;" class="selectpicker" id="operateMan_" data-live-search="true" onchange="operateM(this);">
                                                    <option value="-1">完成人</option>
                                                    <a4j:repeat value="#{operateHome.operateList}" var="var">
                                                    <option value="#{var[0]}">#{var[1]}</option>
                                                    </a4j:repeat>
                                                </select>
                                            	</div>
                                            	
                                            	</h:form>
                                            <!--  表格头部 右侧 结束 -->


                                            <!-- 添加人等下拉框控件 结束 -->
                                        </div>
                                    </div>
                                    <!-- 农事管理表表格1 开始 -->
                                    <a4j:outputPanel id="refreshList">
                                    <s:div styleClass="farming_nodata" rendered="#{empty operateHome.objList}">
                                    	<div class="warning_noData">
                                        	<em>很遗憾，没有农事计划和记录</em>
                                            <p>完整的农事计划和记录可以帮助您有效进行人员管理，全程追溯农事内容，保证蔬菜安全放心，快来添加吧！</p>
                                        </div>
                                    </s:div>
                                    <table width="100%" class="farmingMageTab">
                                        <tbody>
                                        <a4j:repeat var="var" value="#{operateHome.objList}" rowKeyVar="_row">
                                        <ui:fragment rendered="#{_row==0}">
                                        <tr >
                                        <td  colspan="5" class="cm_printDate clear" style="background-color: white;border-bottom: 1px solid #d8e6ec;color: #888;line-height: 18px;padding: 5px 10px;text-indent: 8px;">
                                        <img src="#{request.contextPath}/asset/images/cm_lsllIco02.png" />#{var[1]}
                                        </td>
                                        </tr>
                                        </ui:fragment>
                                        <ui:fragment rendered="#{var[0] ne operateHome.objList[_row-1][0] &amp;&amp; _row!=0}">
                                        <tr >
                                        <td  colspan="5" class="cm_printDate clear" style="background-color: white;border-bottom: 1px solid #d8e6ec;color: #888;line-height: 18px;padding: 5px 10px;text-indent: 8px;">
                                        <img src="#{request.contextPath}/asset/images/cm_lsllIco02.png" />#{var[1]}
                                        </td>
                                        </tr>
                                        </ui:fragment>
                                            <tr>
                                            	<td style="padding-left: 5px;width: 1px">
													<input type="checkbox" id="cheOne" exid="#{var[13]}" name="iCheck"/>
					                            </td>
                                                <td valign="middle" width="45%">
                                                    <dl class="baseDl_jl">
                                                    	<dt>
                                                    		<ui:fragment rendered="#{s:hasRole('farmer_work_edit')}">
	                                                    		<s:link view="/agricultural/#{var[6] ==1||var[6] ==null||var[6] ==0?'EditManager.xhtml':''}#{var[6] ==2?'AddManagerPlant.xhtml':''}#{var[6] ==3 &amp;&amp; !var[17]?'EditManagerPlant.xhtml':''}#{var[6] ==3 &amp;&amp; var[17]?'AddManagerPlant.xhtml':''}" >
	                                                        	<f:param name="id" value="#{var[13]}"></f:param>
	                                                        	<img src="#{request.contextPath}/asset/images/#{var[6] ==1 || var[6] ==3 ||var[6]==null?'farmingIco02.png':'farmingIco01.png'}" width="14" height="14" />
	                                                        	<span>#{var[2]}(#{var[3]})</span><strong>#{var[4]}</strong></s:link>
	                                                        	<ui:fragment rendered="#{var[6]==1||var[6]==null}">
	                                                        		<em class="bgBlue_jl">记录</em>
	                                                        	</ui:fragment>
	                                                        	<ui:fragment rendered="#{var[6]==2}">
	                                                        		<em class="bgPurple_jh">计划</em><em class="bgRed_wwc">未完成</em>
	                                                        	</ui:fragment>
	                                                        	<ui:fragment rendered="#{var[6]==3}">
	                                                        		<ui:fragment rendered="#{!var[17]}">
	                                                        		<em class="bgPurple_jh">计划</em><em class="bgGreen_ywc">已完成</em>
	                                                        		</ui:fragment>
	                                                        		<ui:fragment rendered="#{var[17]}">
	                                                        			<em class="bgPurple_jh">计划</em><em class="bgGreen_ywc" style="background: #ff8800;">已驳回</em>
	                                                        		</ui:fragment>
	                                                        	</ui:fragment>
                                                    		</ui:fragment>
                                                    		<ui:fragment rendered="#{!s:hasRole('farmer_work_edit')}">
                                                    			<a><img src="#{request.contextPath}/asset/images/#{var[6] ==1 || var[6] ==3 ||var[6]==null?'farmingIco02.png':'farmingIco01.png'}" width="14" height="14" />
	                                                        	<span>#{var[2]}(#{var[3]})</span><strong>#{var[4]}</strong>
	                                                        	</a>
	                                                        	<ui:fragment rendered="#{var[6]==1||var[6]==null}">
	                                                        	<em class="bgBlue_jl">记录</em>
	                                                        	</ui:fragment>
	                                                        	<ui:fragment rendered="#{var[6]==2}">
	                                                        	<em class="bgPurple_jh">计划</em><em class="bgRed_wwc">未完成</em>
	                                                        	</ui:fragment>
	                                                        	<ui:fragment rendered="#{var[6]==3}">
	                                                        	<em class="bgPurple_jh">计划</em><em class="bgGreen_ywc">已完成</em>
	                                                        	</ui:fragment>
                                                    		</ui:fragment>
                                                    		<ui:fragment rendered="#{var[18].size() &gt; 0}">
                                                    			<em class="voice"  onclick="openVoiceModal(this)">#{var[18][0][0]}</em>
                                                    			 <a4j:repeat value="#{var[18]}" var="sound_">
                                                    			 	<div style="display:none;" sound_time='#{sound_[0]}' sound_src='#{sound_[1]}'></div>
                                                    			 </a4j:repeat>
                                                    		</ui:fragment>
                                                        </dt>
                                                        <dd><span><h:panelGroup rendered="#{var[6]==1 || var[6]==null}">#{var[11]}操作</h:panelGroup></span><span style="padding-left:#{var[6]==1 || var[6]==null?'10px' :'0px'}">用时#{var[5]==null?2:var[5]}小时</span><span style="padding-left:10px">来自#{var[14]==null||var[14]==0||var[14]==1?"网站":""}#{var[14]==2?"手机":""}#{var[14]==3?"农事终端":""}#{var[14]==4?"系统推送":""}</span>
                                                        	<span style="padding-left:10px">添加人：#{var[14]==4?'系统':var[15]}</span>
                                                        </dd>
                                                    </dl>
                                                </td>
                                                <td width="">
                                                    <ul class="farmingMage_pics" style="width:auto">
                                                    <a4j:repeat value="#{var[7]}" var="_var" rendered="#{'' ne var[7]}">
                                                        <li>
                                                            <a href="javascript:;">
                                                            <h:panelGroup rendered="#{_var.imgWidth==null || _var.imgHeight==null || _var.imgWidth=='' || _var.imgHeight==''}">
                                                            	<img data-src="#{_var.pictureUrl}@40w_40h_1e_1c.src" class="lazyloadimg" wi="#{_var.imgWidth}" he="#{_var.imgHeight}"/>
                                                            </h:panelGroup>
                                                            <h:panelGroup rendered="#{_var.imgWidth!=null &amp;&amp; _var.imgHeight!=null &amp;&amp; _var.imgWidth!='' &amp;&amp; _var.imgHeight!=''}">
                                                            	<h:panelGroup rendered="#{_var.minPictureUrl==null || _var.minPictureUrl==''}">
                                                            		<img data-src="#{_var.pictureUrl}@40w_40h_1e_1c.src" class="lazyloadimg" wi="#{_var.imgWidth}" he="#{_var.imgHeight}"/>
                                                            	</h:panelGroup>
                                                            	<h:panelGroup rendered="#{_var.minPictureUrl!=null &amp;&amp; _var.minPictureUrl!=''}">
                                                            		<img data-src="#{_var.minPictureUrl}@40w_40h_1e_1c.src" class="lazyloadimg" wi="#{_var.imgWidth}" he="#{_var.imgHeight}"/>
                                                            	</h:panelGroup>
                                                            </h:panelGroup>
                                                            </a>
                                                            <div class="farmingMage_Magnifier" style="z-index:1000">
                                                            	<em class="MagnifierClose" style="z-index: 1"><img src="#{request.contextPath}/asset/images/farmingIco05.png" width="28" height="28" /></em>
                                                                <div class="MagnifierBox"><img  id="zoomId" sr="#{_var.pictureUrl}" />
                                                                <div class="mask">
                                                                <h:panelGroup rendered="#{_var.dateTime !=null}">
                                                               		<div class="fl mr20"><span> 拍摄时间：</span><span>#{_var.dateTime}</span></div>
                                                                </h:panelGroup>
                                                               	<h:panelGroup rendered="#{_var.model !=null}">
                                                               		<div class="fl mr20"><span>相机：</span><span>#{_var.model}</span></div>
                                                               	</h:panelGroup>
                                                               	<h:panelGroup rendered="#{_var.fnumber !=null}">
                                                               		<div class="fl mr20"><span>光圈：</span><span>#{_var.fnumber}</span></div>
                                                               	</h:panelGroup>
                                                               	<h:panelGroup rendered="#{_var.lensModel !=null}">
                                                               		<div class="fl mr20"><span>镜头：</span><span>#{_var.lensModel}</span></div>
                                                               	</h:panelGroup>
                                                               	<h:panelGroup rendered="#{_var.focalLength !=null}">
                                                               		<div class="fl mr20"><span> 焦距：</span><span>#{_var.focalLength}</span></div>
                                                               	</h:panelGroup>
                                                               	<h:panelGroup rendered="#{_var.iso !=null}">
                                                               	 	<div class="fl mr20"><span>ISO：</span><span>#{_var.iso}</span></div>
                                                               	</h:panelGroup>
                                                               	<h:panelGroup rendered="#{_var.exposureTime !=null}">
                                                               		<div class="fl mr20"><span>曝光时间：</span><span>#{_var.exposureTime}</span></div>
                                                               	</h:panelGroup>
                                                               		<h:panelGroup rendered="#{_var.longitude !=null &amp;&amp; _var.longitude !=(null) &amp;&amp; _var.longitude !=''}">
                                                               	<div class="fl mr20"><span>经度：</span><span>#{_var.longitude}</span></div>
                                                               	</h:panelGroup>
                                                               	<h:panelGroup rendered="#{_var.latitude !=null &amp;&amp; _var.latitude !=(null) &amp;&amp; _var.latitude !=''}">
                                                               		<div class="fl mr20"><span>纬度：</span><span>#{_var.latitude}</span></div>
                                                               	</h:panelGroup>
                                                                </div>
                                                                </div>
                                                            </div>
                                                        </li>
                                                    </a4j:repeat>    
                                                    </ul>
                                                </td>
                                                <td width="80">
                                                    <div class="completePerson_wp completeNum1" id="completeNum1" rel="tooltip" data-placement="right" data-original-title="#{var[9]}">
                                                    <a href="javascript:;">#{var[12]}</a><em style="#{var[10] gt 1?'':'display:none'}">#{var[10]}</em>
                                                    </div>                                                    
                                                </td>
                                                <td width="52">
                                                	<div class="tooltip_" style="width:30px" rel="tooltip" data-placement="right" data-original-title="#{operateHome.objList2[_row][1]}">
                                                	<ui:fragment rendered="#{s:hasRole('farmer_work_edit')}">
	                                                	<s:link view="/agricultural/#{var[6] ==1||var[6] ==null||var[6] ==0?'EditManager.xhtml':''}#{var[6] ==2?'AddManagerPlant.xhtml':''}#{var[6] ==3?'EditManagerPlant.xhtml':''}"  styleClass="#{operateHome.objList2[_row][0]>0?'letter_has':'letter_none'}">
	                                                    <f:param name="id" value="#{var[13]}"></f:param>#{operateHome.objList2[_row][0]}</s:link>
                                                	</ui:fragment>
                                                	<ui:fragment rendered="#{!s:hasRole('farmer_work_edit')}">
                                                		<span Class="#{operateHome.objList2[_row][0]>0?'letter_has':'letter_none'}">#{operateHome.objList2[_row][0]}</span>
                                                	</ui:fragment>
                                                  </div>
                                                </td>
                                                <td width="30">
                                                <a href="#" class="list_delete" onclick="document.getElementById('deleteid').value='#{var[13]}';document.getElementById('my_confirm').style.display= 'block';document.getElementById('showDiv').style.display = 'block'; " id="plantInfoDelete" ></a>
                                                </td>
                                            </tr>
                                            </a4j:repeat>
                                        </tbody>
                                    </table>
                                    </a4j:outputPanel>
                                    <!-- 农事管理表表格2 结束 -->
                                </div>
                                <!-- 分页 开始 -->
                                <a4j:outputPanel id="refreshPage">
                                <table style="height:30px; margin:40px auto 0 auto;" cellpadding="0" cellspacing="0">
                    	<tr>
                    	<ui:fragment rendered="#{not empty operateHome.objList}">
			                <ui:fragment rendered="#{!operateHome.previousExists }">
			                <td><img src="#{request.contextPath}/asset/images/page_68.jpg" width="4" height="30" /></td>
			                </ui:fragment>
			                 <ui:fragment rendered="#{operateHome.previousExists }">
			                <td><img src="#{request.contextPath}/asset/images/page_67.jpg" width="4" height="30" /></td>
			                </ui:fragment>
			                <ui:fragment rendered="#{operateHome.previousExists }">
	                            <td class="td_t_b">
		                            <a href="#" onclick="jump(0);return false;">首页</a>
	                            </td>
	                            <td class="td_t_b td_t_t" style="padding:0; width:30px;">
		                            <a href="#" onclick="jump(#{operateHome.previousFirstResult});return false;" class="no_n">
		                            	&lt;
		                            </a>
	                            </td>
	                        </ui:fragment>
					       <a4j:repeat var="_page" value="#{operateHome.pageList}" rowKeyVar="_index">
								<td class="td_t_b #{operateHome.previousExists or _index >0 ?'td_t_t':''} #{_page eq operateHome.pageNum?'onp':''}">
									<a href="#" onclick="jump(#{_page});return false;">
										#{_page}
									</a>
								</td>
							</a4j:repeat>
							<ui:fragment rendered="#{operateHome.nextExists}">
                            <td class="td_t_b td_t_t">
	                            <a href="#" class="no_d" onclick="jump(#{operateHome.nextFirstResult});return false;">
	                            &gt;
	                            </a>
                            </td>
                            <td class="td_t_b td_t_t">
								 <a href="#" onclick="jump(#{operateHome.PAGE_COUNT});return false;">
								 尾页
								 </a>
							</td>
							</ui:fragment>
							<td class="td_t_b td_t_t" style=" color:#9a9a9c;">共#{operateHome.PAGE_COUNT}页</td>
                            <td ><img src="#{request.contextPath}/asset/images/page_70.jpg" width="4" height="30" /></td>
                            </ui:fragment>
                    	</tr>
                    </table>
                    </a4j:outputPanel>
                                <!-- 分页 结束 -->
                            <!-- 农事管理内容 左侧 结束 -->
                            </div>
                            </td>
                            <td width="" valign="top" style="width:300px;">
                            <div class="cm_resumeRt pt20" style="width:300px;">
                            <!-- 农事管理内容 右侧 开始 -->
                            <a4j:outputPanel id="refreshO">
                                <div class="cm_resumeRtTp">
                                    <div class="cm_resumeMore2 clear">
                                        <h2>农事操作管理</h2>
                                        <s:link view="/farming/AmRfidInfoTypeChildList.xhtml" style="display: #{s:hasRole('farmer_work_show')?'none':'none'}" target="_blank">更多</s:link>
                                    </div>
                                    <div class="cm_llTotal clear">
                                        <span class="farming_cugl"><font>共</font><b class="colorYell font20">#{operateHome.typeCount}</b><font>项</font></span>
                                        <div class="farmingInputs_addtj" style="position:static; float:right;">
                                        	 <input class="btn btn-success fr add" style="display: #{s:hasRole('farmer_work_add')?'hidden':'none'}" onclick="addOp(this)" type="button" value="添加"></input>
                                        </div>
                                    </div>
                                    <div class="p_ltrb" style="padding-top:0;">
                                        <table width="100%" class="cm_buildTab">
                                            <tbody>
                                            <a4j:repeat value="#{operateHome.typeList}" var="var">
                                                <tr>
                                                    <td width="80%"><span>#{var[1]}</span></td>
                                                    <td width="20%">
                                                    <s:div rendered="#{var[2]==sessionTake.enterpriseInfoId}">
                                                        <a href="javascript:;" style="display: #{s:hasRole('farmer_work_del')?'hidden':'none'}" onclick="removeO(#{var[0]})" class="fr"><img src="#{request.contextPath}/asset/images/farmingIco11.png" width="13" height="14" /></a>
                                                    </s:div>
                                                    </td>
                                                </tr>
                                            </a4j:repeat>    
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                </a4j:outputPanel>
                                <div id="add_operate" class="modal">
                                            <div class="farmingInputs_mini" id="" style="display:block;position:absolute; left:50%; top:50%; margin-left:-173px; margin-top:-150px;">
                                             <a4j:form ajaxSubmit="true">
                                                <div class="farmingInputs_miniHd"><h3>添加农事操作类型</h3>
                                                <input type="button" class="butt" onclick="jquery('#add_operate').modal('hide')"> </input>
                                                </div>
                                                <div class="farmingInputs_miniBd_min">
                                               
                                                <table>
                                                <tr>
                                                    <td width="60" align="right" valign="middle">名称</td>
                                                    <td style="padding-left:15px;">
                                                        <input class="form-control" id="o_name"  name="o_name" type="text" style="width:188px; float:left; display:inline; margin-right:5px;" />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td width="60" align="right" valign="middle">描述</td>
                                                    <td style="padding-left:15px;">
                                                        <textarea class="form-control" id="o_remark" name="o_remark" style="width:200px; resize:none;" rows="3"></textarea>
                                                    </td>
                                                </tr>
                                                </table>
                                                </div>
                                                <div class="farmingInputs_miniFt">
                                                <a4j:commandButton value="提交"  eventsQueue="mainQueue"  onclick="if(!checkOp())return false;if(!checkOp())return false;jquery('.operateButton').prop('disabled','true');" action="#{operateHome.addOperate()}" reRender="refreshO,refreshOlist,refreshOlist_" oncomplete="jquery('.operateButton').removeAttr('disabled');jquery('#record_operate,#record_operate2').selectpicker('refresh');jquery('#add_operate').modal('hide')" styleClass="btn btn-success operateButton" style=""/>
                                                    <input class="btn btn-default" type="button"  onclick="jquery('#add_operate').modal('hide')" value="返回"/>
                                                </div>
                                                </a4j:form>
                                            </div></div>
                                <div class="cm_resumeRtBt mt20">
                                    <div class="cm_resumeMore2 clear">
                                        <h2>月排行榜</h2>
                                    </div>
                                    <div class="p_ltrb" style="padding-top:0;">
                                    <a4j:outputPanel id="timeList">
                                        <table width="100%" class="monthRanking">
                                            <tbody>
                                            <a4j:repeat value="#{operateHome.timeList}" var="var" rowKeyVar="row" >
                                                <tr>
                                                	<td width="75">
                                                        <em class="number #{row>2?'number02':''}">#{row+1}</em><span class="name">#{var[2]}</span>                                                       
                                                    </td>
                                                    <td>
                                                    	<div class="userTimes_total">#{operateHome.fomartNum(var[0])}小时</div>
                                                    	<div class="progress">
                                                            <div class="progress-bar #{row==0?'progress-bar-danger':''}#{row==1?'progress-bar-warning':''}#{row==2?'progress-bar-success':''}#{row==3?'progress-bar-info':''}#{row==4?'progress-bar-five':''}" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width:#{var[0]/operateHome.timeCount*100}%;">
                                                              <span class="sr-only">90% Complete</span>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </a4j:repeat>
                                            <ui:fragment rendered="#{empty operateHome.timeList}">
                                            <tr>
                                            <td align="center">本月没有劳动工时记录!
                                            </td>
                                            </tr>
                                            </ui:fragment>
                                            </tbody>
                                        </table>
                                        </a4j:outputPanel>
                                    </div>
                                </div>
                            <!-- 农事管理内容 右侧 结束 -->
                            </div>
                            </td>
                        </tr>
                    </table>
                    <!-- 农事管理内容 结束 -->
					
                </div><!--right_c结束-->
            </div>
            <h:form>
            <input type="hidden" value="#{operateHome.pageNum}" id="pageNum" name="pageNum"/>
            <input type="hidden" value="#{operateHome.baseId}" id="baseId" name="baseId"/>
            <input type="hidden" value="#{operateHome.searchType}" id="searchType" name="searchType"/>
            <input type="hidden" value="#{operateHome.searchInfo}" id="searchInfo" name="searchInfo"/>
            <input type="hidden" value="#{operateHome.addMan}" id="addMan" name="addMan"/>
            <input type="hidden" value="#{operateHome.start}" id="start" name="start"/>
            <input type="hidden" value="#{operateHome.end}" id="end" name="end"/>
            <input type="hidden" value="#{operateHome.state}" id="state" name="state"/>
            <input type="hidden" value="#{operateHome.operateMan}" id="operateMan" name="operateMan"/>
            <input type="hidden" value="#{operateHome.stype}" id="stype" name="stype"/>
            <input type="hidden" value="#{operateHome.operateType}" id="operateType" name="operateType"/>
            <input type="hidden" value="#{operateHome.imgFlag}" id="imgFlag" name="imgFlag"/>
            <h:commandButton value="" action="/agricultural/Manager.xhtml" styleClass="but_" style="display:none"/>
            </h:form>
            <div></div>
<div aria-hidden="false" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="my_confirm" class="modal fade in " style="display: none;">
  <div class="modal-dialog" style="width:600px;">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" onclick="jquery('#my_confirm').hide();jquery('#showDiv').hide();jquery('#deleteid').val('')"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">提示框</h4>
      </div>
      <div class="modal-body">
       <span id="productMsg">确定删除吗！</span>
       <input type="hidden" value="" id="deleteid" />
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" onclick="document.getElementById('my_confirm').style.display= 'none';document.getElementById('showDiv').style.display = 'none';document.getElementById('deleteid').value=''">取消</button>
        <button type="button" class="btn btn-primary" onclick="document.getElementById('my_confirm').style.display= 'none';document.getElementById('showDiv').style.display = 'none'; jquery('#login').show();delAgricultural(document.getElementById('deleteid').value);document.getElementById('deleteid').value=''">确认</button>
      </div>
    </div>
  </div>
</div>	

<!-- 语音Modal -->
    <div class="modal fade" id="voiceModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog voice_dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel">语音备注</h4>
            </div>
            <div class="modal-body">
				<ul class="voice_list">
                	<li>
                    	<span class="v_head">
                        	<img src="#{request.contextPath}/asset/images/icon_head.png" />
                        </span>
                        <div class="v_time">
                        	<p class="v_text">1"</p>
                        </div>
                    </li>
                </ul>
                <audio></audio>
            </div>
        </div>
        </div>
    </div>
 <!-- 语音Modal -->   

<div class="modal-backdrop fade in" id="showDiv" style="display:none;"></div>
<a4j:form id="formid" >
<a4j:queue requestDelay="10" ignoreDupResponses="true" id="mainQueue"/>
<a4j:jsFunction status="ajaxStatus" eventsQueue="mainQueue" name="removeO" action="#{operateHome.removeOperate()}" reRender="refreshO,refreshOlist,refreshOlist_" oncomplete="jquery('#record_operate,#record_operate2').selectpicker('refresh');">
	<a4j:actionparam name="param" assignTo="#{operateHome.param}"/>
</a4j:jsFunction>
<a4j:jsFunction eventsQueue="mainQueue" name="searchInputsList" action="#{operateHome.searchGoodsInfoList()}" oncomplete="searchInputsList_next()" reRender="recordInputList">
	<a4j:actionparam name="param" assignTo="#{operateHome.param}" />
	<a4j:actionparam name="plantValues" assignTo="#{operateHome.plantValues}" />
	<a4j:actionparam name="searchInfo" assignTo="#{operateHome.searchInfo}" />
	<a4j:actionparam name="inputsPageNum" assignTo="#{operateHome.inputsPageNum}" />
</a4j:jsFunction>
<a4j:jsFunction eventsQueue="mainQueue" name="delRecordList_next" action="#{operateHome.delRecordList()}" reRender="nsInputsCost,jhInputsCost" oncomplete="jquery('#login').hide();">
	<a4j:actionparam name="param" assignTo="#{operateHome.param}" />
</a4j:jsFunction>
<a4j:jsFunction eventsQueue="mainQueue" name="resetRecordList_next" action="#{operateHome.resetRecordList()}" >
</a4j:jsFunction>
<a4j:jsFunction eventsQueue="mainQueue" name="delAgricultural" action="#{operateHome.delAgricultural()}" oncomplete="jquery('#login').hide();jquery('.jihuabutton').removeAttr('disabled');jquery('.completeNum1,.tooltip_').tooltip();jsZoom();jquery('#myModal').modal('hide');jquery('.lazyloadimg').lazyLoadXT();" reRender="refreshList,refreshPage,timeList">
<a4j:actionparam name="param" assignTo="#{operateHome.param}" />
</a4j:jsFunction>
<a4j:jsFunction eventsQueue="mainQueue" name="delallAgricultural" action="#{operateHome.delAllAgricultural()}" oncomplete="jquery('#login').hide();jquery('.jihuabutton').removeAttr('disabled');jquery('.completeNum1,.tooltip_').tooltip();jsZoom();jquery('#myModal').modal('hide');jquery('.lazyloadimg').lazyLoadXT();" reRender="refreshList,refreshPage,timeList">
<a4j:actionparam name="param" assignTo="#{operateHome.param}" />
</a4j:jsFunction>
<a4j:jsFunction eventsQueue="mainQueue" name="changeStorageRoom" action="#{operateHome.changeStorageRoom()}" data="#{operateHome.resultData}" oncomplete="changeRoom_next(data)" >
	<a4j:actionparam name="storageRoomId" assignTo="#{operateHome.storageRoomId}" />
	<a4j:actionparam name="inputsInfoId" assignTo="#{operateHome.inputsInfoId}" />
</a4j:jsFunction>
<a4j:jsFunction eventsQueue="mainQueue" name="searchGoodsCount" action="#{operateHome.searchGoodsCount()}" data="#{operateHome.resultData}" oncomplete="changeGoodsBatch_next(data)">
	<a4j:actionparam name="goodsBatchIds" assignTo="#{operateHome.goodsBatchIds}" />
	<a4j:actionparam name="inputsInfoId" assignTo="#{operateHome.inputsInfoId}" />
</a4j:jsFunction>
<a4j:jsFunction eventsQueue="mainQueue" name="changeGoodsInfo" action="#{operateHome.searchStorageRoomList()}" data="#{operateHome.resultData}" oncomplete="storageCallback(data);">
	<a4j:actionparam name="inputsIds" assignTo="#{operateHome.inputsIds}" />
</a4j:jsFunction>
<a4j:jsFunction name="checkStorage"  eventsQueue="mainQueue" action="#{operateHome.checkStorage()}" data="#{operateHome.messageStr}" oncomplete="submitAgr(data)" >
	<a4j:actionparam name="operType" assignTo="#{operateHome.operType}"/>
</a4j:jsFunction>
<a4j:jsFunction name="searchPlantList"  eventsQueue="mainQueue" action="#{operateHome.selBaseRefresh()}"  reRender="plantListDiv,jhPlantListDiv,refreshFarmer,refreshFarmerJh,refreshOlist,refreshOlist_" oncomplete="alertBaseInfo();">
	<a4j:actionparam name="operType" assignTo="#{operateHome.baseId}"/>
</a4j:jsFunction>

</a4j:form>
<a4j:form>
         <a4j:jsFunction name="delfarmingPicList" reRender="picId" action="#{operateHome.delfarmingPicList()}" data="#{operateHome.re_input_Str}" oncomplete="farpicref()">
      		<a4j:actionparam name="index" assignTo="#{operateHome.index}"/>
        </a4j:jsFunction>
 	</a4j:form>
<a4j:status id="ajaxStatus" forceId="true" onstart="jquery('#login').show()" onstop="jquery('#login').hide()" />
            <script type="text/javascript">
    								document.onkeydown=function(event){ 
    									e = event ? event :(window.event ? window.event : null); 
    									if(e.keyCode==13){ 
    									if(document.activeElement.id=="searchInfo_"){
    										search();
    									}
    									e.keyCode=0;
    									 if (window.navigator.userAgent.indexOf("MSIE")==-1)
    									    {
    										 e.preventDefault();
    										 return false;
    									    }
    									e.returnValue=false;				
    									} 
    								}
    								var searchType = '#{operateHome.searchType}';
    								if(searchType!=""){
    									jquery("#searchType").val(searchType);
    								}
    								var searchInfo = '#{operateHome.searchInfo}';
    								if(searchInfo!=""){
    									jquery("#searchInfo").val(searchInfo);
    								}else{
    									jquery("#searchInfo").val("请输入搜索条件");
    								}
    								
    								</script>
<script type="text/javascript">
//<![CDATA[

    var beforeUnit="";
    function changeGoodsBatch(obj,inputsId){
        var batch=jquery(obj).val();
        if(null==batch){
        	batch="";
        }       
        searchGoodsCount(batch.toString(),inputsId);
        getCostByPrice(inputsId);
    }
    function myPicUrl(){
    	jquery("#pic\\:imgUrl").val(jquery("#myframPic").contents().find("#imgUrl_id").attr("src"));
        jquery("#pic\\:picJson").val(jquery("#myframPic").contents().find("#inputsImages\\:picJson").val());
    	if(jquery('#pic\\:contentId').val().length>70){
          	alert("图片说明字数需小于70字");
			return false;
         }
    	if(jquery("#myframPic").contents().find("#imgUrl_id").attr("src")=='../asset/images/farmingIco15.jpg'){
    		alert("上传图片不能为空！");
			return false;
         }
    	jquery('#addMyFarming').hide();
		return true;
    }       
    function farpicref(data){
       // if(data != ""){
			//alert(data); 
       // }else{
        	jquery('.farmingInputs').mouseover(function(){
        		jquery(this).children('.closeInputs').css('display','block');	
        	});
        	jquery('.farmingInputs').mouseout(function(){
        		jquery(this).children('.closeInputs').css('display','none');	
        	});
       // }

        /* jquery('.farmHeight').eq(0).css('height',jquery('.farmPics').eq(0).height());
        if(jquery('.farmingInputs_wp').eq(0).find('.fl').length>=4){
            var va=parseInt((jquery('.farmingInputs_wp').eq(0).find('.fl').length+1)/4);
            var va_=parseInt((jquery('.farmingInputs_wp').eq(0).find('.fl').length+1)%4);
            if(va_>0){
            	va_=1;
            }
        	jquery('.farmHeight').eq(1).css('height',va*155+va*10+va_*155 );
        } */
        
    }       
           
   function delfarmingPic(obj,index){
	   delfarmingPicList(index);
	}     
           
   function addFarming(){
		jquery("#pic\\:imgUrl").val(jquery("#myframPic").contents().find("#imgUrl_id").attr("src","../asset/images/farmingIco15.jpg"));
		jquery("#pic\\:contentId").val('');
		jquery('#addMyFarming').show();
	}
	        
search = function(){
	jquery("#searchType").val(jquery("#searchType_").val());
	jquery("#searchInfo").val(jquery("#searchInfo_").val());
	jquery(".but_").trigger("click");
}


addM = function(obj){
	jquery("#addMan").val(jquery(obj).val());
	jquery("#stype").val(1);
	jquery(".but_").trigger("click");
}

tme = function(){
	jquery("#start").val(jquery("#start_").val());
	jquery("#end").val(jquery("#end_").val());
	jquery("#stype").val(2);
	jquery(".but_").trigger("click");
}

stat = function(obj){
	jquery("#state").val(obj);
	jquery("#stype").val(3);
	jquery(".but_").trigger("click");
}

operateM = function(obj){
	jquery("#operateMan").val(jquery(obj).val());
	jquery("#stype").val(4);
	jquery(".but_").trigger("click");
}
checkOperateType = function(obj){
	jquery("#operateType").val(obj);
	jquery("#stype").val(5);
	jquery(".but_").trigger("click");
}
checkImgFlag = function(obj){
	jquery("#imgFlag").val(obj);
	jquery("#stype").val(6);
	jquery(".but_").trigger("click");
}
function jump(index){
	jquery("#pageNum").val(index);
	jquery(".but_").trigger("click");
}

/* 投入品点击删除和农事图片点击放大 */
jquery(function(){
	if(jquery("#searchType").val()!=""){
		jquery('#searchType_').val(jquery("#searchType").val());
	}else{
		jquery('#searchType_').val(-1);
	}
	
	if(jquery("#searchInfo").val()!=""){
		jquery('#searchInfo_').val(jquery("#searchInfo").val());
	}
	
	if(jquery("#addMan").val()!=""){
		jquery("#addMan_").val(jquery("#addMan").val());
	}else{
		jquery('#addMan_').val(-1);
	}
	var d = new Date();
  	
	if(jquery("#start").val()!=""){
		jquery("#start_").val(jquery("#start").val());
	}else{
		jquery("#start_").val(d.format("yyyy-MM-dd"));
	}
	
	if(jquery("#end").val()!=""){
		jquery("#end_").val(jquery("#end").val());
	}else{
		jquery("#end_").val(d.format("yyyy-MM-dd"));
	}
	
	/* if(jquery("#state").val()!=""){
		jquery("#state_").val(jquery("#state_").val());
	}else{
		jquery('#state_').val(-1);
	} */
	
	if(jquery("#operateMan").val()!=""){
		jquery("#operateMan_").val(jquery("#operateMan").val());
	}else{
		jquery('#operateMan_').val(-1);
	}
	/*暂定
	var stateValue=jquery("#state").val();
	if(stateValue=="3"){
		jquery('#state_').val("已完成");
	}else if(stateValue=="2"){
		jquery('#state_').val("未完成");
	}else{
		jquery('#state_').val("状态");
	}
	var imgFlagValue=jquery("#imgFlag").val();
	if(imgFlagValue=="1"){
		jquery('#imgFlag_').val("有图");
	}else if(imgFlagValue=="2"){
		jquery('#imgFlag_').val("无图");
	}else{
		jquery('#imgFlag_').val("农事图片");
	}
	var operateTypeValue=jquery("#operateType").val();
	if(operateTypeValue=="15"){
		jquery('#operateType_').val("定植");
	}else if(operateTypeValue=="47"){
		jquery('#operateType_').val("采收");
	}else if(operateTypeValue=="1547"){
		jquery('#operateType_').val("田间管理");
	}else{
		jquery('#operateType_').val("农事操作");
	}*/

	jquery('select:not(.data_dic)').selectpicker();	
    jquery('#pest_data_dic').selectpicker({noneSelectedText:"请选择"});
    jquery('#fert_data_dic').selectpicker({noneSelectedText:"请选择"});
    jquery('#other_data_dic').selectpicker({noneSelectedText:"请选择"});
    jquery('#input_type_id').selectpicker({noneSelectedText:"请选择"});
    
	//添加投入品 农资类型 加载数据
	var trType=jquery('#record_type1').val();
	jquery('#unitInfo').selectpicker('val',10);	
});

/* 添加投入品弹窗显示关闭 */

	

/* 文本框获取焦点变化 js */
jquery(function(){
	jquery(".lazyloadimg").lazyLoadXT();
		var txt_value = jquery(this).val();
		if(txt_value != '请输入搜索条件'){
			jQuery("#searchInfo_").css("color","#000");
		}else{
			jQuery("#searchInfo_").css("color","#a8a8a8");
		}	
	
	
	jquery('.public-search .form-control').focus(function(){
		var txt_value = jquery(this).val();
		if(txt_value == '请输入搜索条件'){
			jquery(this).val('');	
			jQuery("#searchInfo_").css("color","#000");
		}	
	});
	jquery('.public-search .form-control').blur(function(){
		var txt_value = jquery(this).val();
		if(txt_value == ''){
			jquery(this).val('请输入搜索条件');	
			jQuery("#searchInfo_").css("color","#a8a8a8");
		}	
	});
	
	//初始化执行添加农事计划和添加农事记录事件函数
	DragModalFn("#myModal .modal-dialog");
	jQuery('#add-farm-plan,#add-farm-record').click(function(){
		//按钮点击，弹框计算中心位置
		ResizeModal("#myModal",840,525,"min-w","min-h");
	});
	jQuery('#myModal .i_close,#myModal .modal-footer .btn').click(function(){
		//关闭按钮点击，恢复弹框中心位置
		ResizeModal("#myModal",840,525,"min-w","min-h");
	});
	jQuery(window).resize(function(){
		//缩放时，重新计算弹框中心位置
		ResizeModal("#myModal",840,525,"min-w","min-h");
	});
});

/*  放大镜js */
function jsZoom(){
	jquery('.farmingMage_pics li a').click(function(){
		var img = jquery(this).find("img");
		//var pic = jquery(this).find("img").attr('src');
		var _th = jquery(this);
		var realWidth;//真实的宽度
		var realHeight;//真实的高度
		var src = jquery(img).attr("src");
		src = src.split("@")[0];
		jquery("<img/>").attr("src", src+"?" + new Date().getTime()).load(function() {
		var _w=jquery(img).attr('wi');
		var _h=jquery(img).attr('he');
		if(_w !=null && _h !=null && _w !='' && _h !=''){
			realWidth = parseInt(_w.substring(0,_w.indexOf('p')));
			realHeight = parseInt(_h.substring(0,_h.indexOf('p')));
		}else{
			realWidth = this.width;
			realHeight = this.height;
		}
		
		var width = jquery(window).width()-30;
		var height = jquery(window).height()-40;
		var a1 = realWidth/width;
		var a2 = realHeight/height;
		//console.log(a1+"+++"+a2);
		if(a1>a2){
			_th.next().css("max-width",width+"px");
			_th.next().find(".MagnifierBox").css("max-width",width+"px");
			_th.next().find("#zoomId").css("max-width",width+"px");
			if(realWidth>width){
				_th.next().css("left","15px");
				var x = width/realWidth*realHeight;
				_th.next().css("top",(height-x)/2+"px");
			}else{
				_th.next().css("top",(height-realHeight)/2+"px");
				_th.next().css("left",(width-realWidth)/2+"px");
			}
		}else{
			_th.next().css("max-height",height+"px");
			_th.next().find(".MagnifierBox").css("max-height",height+"px");
			_th.next().find("#zoomId").css("max-height",height+"px");
			if(realHeight>height){
				_th.next().css("top","15px");
				var x = height/realHeight*realWidth;
				_th.next().css("left",(width-x)/2+"px");
			}else{
				_th.next().css("top",(height-realHeight)/2+"px");
				_th.next().css("left",(width-realWidth)/2+"px");
			}
		}
		if(realWidth<230){
			_th.next().find(".mask").css('display','none');
		}
		_th.next().find("#zoomId").attr('src',_th.next().find("#zoomId").attr('sr'));
		_th.next().css('display','block')
		.parent().siblings().children('a').next().hide();
		jquery('.MagnifierClose').click(function(){
			jquery(this).parent().hide();	
		});
		});
	});
	//jquery('.farmingMage_pics li a').blur(function(){
	//	jquery(this).next('.farmingMage_Magnifier').fadeOut();	
	//});


	jquery('input[name=iCheck]').iCheck({
		  checkboxClass: 'icheckbox_minimal-blue',
		  radioClass: 'iradio_minimal-blue',
		  increaseArea: '20%' // optional
		});
	jquery('#cheAll').parent().iCheck("uncheck");

	jquery('input[id=cheAll]').on("ifClicked", function(event){
		if(this.checked){
			jquery(".icheckbox_minimal-blue").each(function(){
				jquery(this).iCheck("uncheck");
			});
		}else{
			jquery(".icheckbox_minimal-blue").each(function(){
				jquery(this).iCheck("check");
			});
		}
	});

	jquery('input[id=cheOne]').on("ifClicked", function(event){
		if(this.checked){
			jquery('#cheAll').parent().iCheck("uncheck");
		}else{
			jquery(this).iCheck("check");
			jquery('#cheAll').parent().iCheck("check");
			var i=0;
			jquery(".icheckbox_minimal-blue").each(function(){
				i++;
				if(i!=1){
					if(jquery(this).attr('class').indexOf('checked')==-1){
						jquery('#cheAll').parent().iCheck("uncheck");
					}
				}
			});
		}
	});
	jquery('.farmHeight').css('height','');
	jquery('.modal-body').css('height','');
}
function jsZoom2(){
	jquery('.farmHeight').css('height','');
	jquery('.modal-body').css('height','');
	
}

function fhnongshi(){
	/* if(jquery('[dis=false]').length-1>0 && jquery('[dis=false]').length-1<3){
		jquery('.modal-body').css('height',470-54+'px');
	}else if(jquery('[dis=false]').length-1>0 && jquery('[dis=false]').length-1>2){
		jquery('.modal-body').css('height',470-(54*2)+'px');
	}else{
		jquery('.modal-body').css('height','470px');
	} */
	jquery("#login").hide();
}

function fhjihua(){
/* 	if(jquery('[dis2=false]').length>1){
		if(jquery('[dis2t=false]').length>0){
			jquery('.modal-body').css('height','200px');
		}else{
			jquery('.modal-body').css('height','350px');
		}
	}else{
		if(jquery('[dis2t=false]').length>0){
			jquery('.modal-body').css('height','248px');
		}else{
			jquery('.modal-body').css('height','407px');
		}
	} */
	jquery("#login").hide();
}

jquery(function(){
	jsZoom();
	jquery('.selectpicker').selectpicker({dropupAuto:false});
});
	
	
/* 投入品点击删除 */
jquery(function(){
	jquery('.farmingInputs').mouseover(function(){
		jquery(this).children('.closeInputs').css('display','block');	
	});
	jquery('.farmingInputs').mouseout(function(){
		jquery(this).children('.closeInputs').css('display','none');	
	});
	jquery('.farmingInputs .closeInputs').click(function(){
		jquery(this).parent().css('display','none');
	});	
	jquery('.farmingInputs .closeInputs').click(function(){
		jquery(this).parent('.farmingInputs').css('display','none');
		jquery(this).parent('.farmingInputs').next('.farmingMage_Magnifier2').css('display','none');	
	});	
	jquery('.farmingInputs a img').click(function(){
		jquery('.farmingMage_Magnifier2').css('display','none');
		jquery(this).parents('.farmingInputs').next('.farmingMage_Magnifier2').css('display','block');	
		jquery('.farmingInputs_mini').css('display','none');
	});
	jquery('.MagnifierClose').click(function(){
		jquery(this).parent('.farmingMage_Magnifier2').css('display','none');	
	});	
});

/* 添加投入品弹窗显示关闭 */
jquery(function(){
	jquery('input[name=iCheck]').iCheck({
		  checkboxClass: 'icheckbox_minimal-blue',
		  radioClass: 'iradio_minimal-blue',
		  increaseArea: '20%' // optional
		});
	
		jquery('input[id=cheAll]').on("ifClicked", function(event){
			if(this.checked){
				jquery(".icheckbox_minimal-blue").each(function(){
					jquery(this).iCheck("uncheck");
				});
				/*var str=jquery("#alldel\\:allId").val();
				var strs=new Array();
				if(str!=""){
					strs=str.split(',');
					for ( var i=0;i<strs.length-1;i++) {
						jquery(".icheckbox_minimal-blue").each(function(){
							if(strs[i]==jquery(this).find('#cheOne').attr('exid')){
								strs.splice(i,1) 
							}
						});
					}
				jquery("#alldel\\:allId").val("");
				}*/

			}else{
				jquery(".icheckbox_minimal-blue").each(function(){
					jquery(this).iCheck("check");
				});
			}
		});

		jquery('input[id=cheOne]').on("ifClicked", function(event){
			if(this.checked){
				jquery('#cheAll').parent().iCheck("uncheck");
				/*var str=jquery("#alldel\\:allId").val();
				var strs=new Array();
				if(str!=""){
					strs=str.split(',');
				}
				if(str!=""){
					for ( var i=0;i<strs.length-1;i++) {
						if(strs[i]==jquery(this).attr('exid')){
							strs.splice(i,1) 
						}
					}
					jquery("#alldel\\:allId").val(strs+"");
				}*/
			}else{
				jquery(this).iCheck("check");
				jquery('#cheAll').parent().iCheck("check");
				var i=0;
				jquery(".icheckbox_minimal-blue").each(function(){
					i++;
					if(i!=1){
						if(jquery(this).attr('class').indexOf('checked')==-1){
							jquery('#cheAll').parent().iCheck("uncheck");
						}
					}
				});
			}
		});


		jquery('[data-id=record_operate2]').click(function(){
			setTimeout(function () { 
				jquery('.jl .bootstrap-select.open').attr('class','btn-group bootstrap-select show-tick open ');
		    }, 20);
		})

		jquery('[data-id=record_operate]').click(function(){
			setTimeout(function () { 
				jquery('.jl .bootstrap-select.open').attr('class','btn-group bootstrap-select show-tick open ');
			}, 20);
		})
});

function alldel(){
	var str="";
	jquery(".icheckbox_minimal-blue").each(function(){
		if(jquery(this).attr('class').indexOf('checked')!=-1){
			if(jquery(this).find('#cheOne').attr('exid')!=null && jquery(this).find('#cheOne').attr('exid')!=''){
				str+=jquery(this).find('#cheOne').attr('exid')+",";
			}
		}
	});
	if(str!=''){
		if(confirm('确定删除？')){
			delallAgricultural(str.substring(0,str.length-1))
			jquery('#login').show();
			return true;
		}
	}else{
		alert("请选择要删除的农事！")
		return false;
	}
}


/* 添加投入品弹窗显示关闭 */
jquery(function(){
	jQuery('.addPerson_selt .bootstrap-select').click(function(){	
		jQuery('.farmingbgIco18').next('.farmingInputs_mini').css('display','none');
		jQuery('.farmingInputs_addtj button').next('.farmingInputs_mini').css('display','none');		
	});
});

function addOp(obj){
	jquery("#o_name").val("");
	jquery("#o_remark").val("");
	//jquery('.farmingbgIco18').next('.farmingInputs_mini').css('display','none');
	jquery("#add_operate").modal("show");
}

<!-- 农事管理表  完成人提示框 -->
jquery(function(){
	jquery(".completeNum1,.tooltip_").tooltip();
});


/* 时间控件 */
jquery(".dt1").datetimepicker({
		format: "yyyy-mm-dd",  /* 控制显示格式，默认为空，显示小时分钟 */
		autoclose: true,
		 weekStart: 1,
		  //startDate: "2014-08-14 10:00",
		 language:  'zh-CN',
		 startView: 3,
		minView: 2,
		maxView: 4,		
		pickerPosition: "bottom-left"
    });
    
jquery(".record_date").datetimepicker({
	format: "yyyy-mm-dd hh:ii",  
	autoclose: true,
	 weekStart: 1,
	 language:  'zh-CN',
	pickerPosition: "bottom-left"
});

jquery(".record_date2").datetimepicker({
	format: "yyyy-mm-dd",  
	autoclose: true,
	 weekStart: 1,
	 language:  'zh-CN',
	 startView: 3,
	minView: 2,
	maxView: 4,	
	pickerPosition: "bottom-left"
});
    
    
Date.prototype.format = function(format)
{
	var o = {
	"M+" : this.getMonth()+1, //month
	"d+" : this.getDate(),    //day
	"h+" : this.getHours(),   //hour
 	"m+" : this.getMinutes(), //minute
	"s+" : this.getSeconds(), //second
 	"q+" : Math.floor((this.getMonth()+3)/3),  //quarter
 	"S" : this.getMilliseconds() //millisecond
	}

	if(/(y+)/.test(format)) 
	{
		format=format.replace(RegExp.$1,(this.getFullYear()+"").substr(4 - RegExp.$1.length));
	}
	
 	for(var k in o)
	{
		if(new RegExp("("+ k +")").test(format))
		{
 			format = format.replace(RegExp.$1,RegExp.$1.length==1 ? o[k] : ("00"+ o[k]).substr((""+ o[k]).length));
		}
	}
	return format;
}

function addInputs(index){	
	jquery("#input_description").val("");
	jquery("#addInput .form-control").val("");
	jquery("#url").val("");
	jquery("#input_type_id").selectpicker("val","");//默认类型为请选择，页面为其它类型页面
	if(jquery('#addJilu').is(":visible")){
		jquery("#addInp1").show();
		jquery("#addInp2").hide();
	}else{
		jquery("#addInp1").hide();
		jquery("#addInp2").show();
	}
	if(jquery('#addJilu').is(":visible")){
		jquery(".inputFooter1").show();
		jquery(".inputFooter2").hide();
	}else{
		jquery(".inputFooter1").hide();
		jquery(".inputFooter2").show();
	}
	hidee();
	jquery(".dk_tdiv").hide();
	jquery(".inputs_").show();
	jquery("#addInput .modal-body").css("height","410px");
	jquery("#addInput").show();
	jquery("#addInput").scrollTop(0);
}
function changeType(){	
	var index=jquery("#input_type_id").find("option:selected").attr("aa");
	jquery("#input_type").val(index);
	if(index==2){
		jquery(".inpu").hide();
		jquery(".mlal").html("添加农药");
		jquery(".input_pest").show();
	}else if(index==3){
		jquery(".inpu").hide();
		jquery(".input_fert").show();
		jquery(".mlal").html("添加肥料");		
	}else if(index==5){
		jquery(".inpu").hide();
		jquery(".input_seed").show();
		jquery(".mlal").html("添加种子");
	}else{
		jquery(".inpu").hide();
		jquery(".input_other").show();
		jquery(".mlal").html("添加其他");
	}
}
function hidee(){
 	var v = jquery("#myframe").contents();
 	v.find("#input_img").html("<img src=\"#{request.contextPath}/asset/images/dpadd.jpg\" width=\"60\" height=\"60\"/>");
	v.find(".photo_box2 li:eq(1)").show();
	v.find(".photo_box2 li:eq(0)").hide();	
	v.find("#input_type").val(jquery("#input_type").val());
}
var reg = new RegExp("^[0-9]*$");
function checkInput(){
	var inputType=jquery("#input_type").val();
	var inputTypeId=jquery("#input_type_id").val();
    var inputName=jquery("#input_name").val();
    if(trim(inputName)==""){
        alert("请填写投入品名称!");
        return false;
    }else if(inputName.length>20){
    	alert("投入品名称输入过长!");
        return false;
    }
    if(null==inputTypeId || ""==inputTypeId){
    	alert("请选择投入品类型!");
        return false;
    }
    var bzq=jquery("#input_shelfLife").val();
	if(trim(bzq)==""){
		alert("请填写保质期!");
		return false;
	}else if(!reg.test(bzq)){
		alert("请正确填写保质期!");
		return false;
	}else if(bzq<=0){
		alert("保质期需大于0!");
		return false;
	}
	var netContent=jquery("#net_content").val();
	var inputSpec=jquery("#input_spec").val();
	if(inputType==2 || inputType==3){
		if(trim(netContent)==""){
			alert("请填写净含量!");
			return false;
		}else if(!reg.test(netContent)){
			alert("请正确填写净含量!");
			return false;
		}else if(netContent>99999){
			alert("净含量输入太大!");
			return false;
		}		
		if(trim(inputSpec)==""){
			alert("请填写包装规格!");
			return false;
		}		
	}else{
		if(trim(netContent)!="" && !reg.test(netContent)){
			alert("请正确填写净含量!");
			return false;
		}
	}
	
	var gst=jquery("#goods_storage_type").val();
	if(gst==null){
        alert("请添加存储类型!");
        return false;
    }
	var inputFacture=jquery("#input_facture").val();
	if(trim(inputFacture)==""){
		alert("请添加生产厂家!");
        return false;
	}else if(inputFacture.length>50){
		alert("生产厂家输入过长!");
		return false;
	}
	var dataDic="";
	if(inputType==2){
		var pestActive=jquery("#pest_active").val();
		if(pestActive.length>20){
			alert("有效成分输入过长!");
			return false;
		}
		dataDic=jquery("#pest_data_dic").val();		
		var pestInterval=jquery("#pest_interval").val();
		if(pestInterval.length>10){
			alert("安全间隔期输入过长!");
			return false;
		}else if(pestInterval!=""){
			if(!reg.test(pestInterval)){
				alert("请正确填写安全间隔期!");
				return false;
			}
		}
		var pestControl=jquery("#pest_control").val();
		if(pestControl.length>10){
			alert("防治对象输入过长!");
			return false;
		}
		var pestMethod=jquery("#pest_method").val();
		if(pestMethod.length>100){
			alert("使用方法输入过长!");
			return false;
		}
	}else if(inputType==3){
		dataDic=jquery("#fert_data_dic").val();		
		var fertNo=jquery("#fert_no").val();
		if(fertNo!="" && fertNo.length>50){
			alert("登记证号长度过长最多50位!");
			return false;
		}
		var fertContent=jquery("#fert_content").val();
		if(fertContent.length>20){
			alert("养分含量输入过长!");
			return false;
		}
		var fertCrop=jquery("#fert_crop").val();
		if(fertCrop.length>10){
			alert("适用作物输入过长!");
			return false;
		}
		var fertMethod=jquery("#fert_method").val();
		if(fertMethod.length>100){
			alert("施用方法输入过长!");
			return false;
		}
	}else if(inputType==5){
		dataDic=jquery("#seed_data_dic").val();	
		var crops=jquery("#seed_crops").val();
		if(crops==null||crops==''){
			alert("茬口不能为空!");
			return false;
		}else if(crops.length>20){
			alert("茬口输入过长!");
			return false;
		}
	}else{
		dataDic=jquery("#other_data_dic").val();		
	}
	var inputDescription=jquery("#input_description").val();
	if(inputDescription.length>200){
		alert("备注输入过长!");
		return false;
	}
	jquery("#data_dic").val(dataDic);
	//var v = jquery("#myframe").contents().find("#url").val();
	//jquery("#url").val(v);
    var logoUrl=jquery("#myframe").contents().find("#inputsImages\\:logoUrl").val();
    if(""!=logoUrl){
    	jquery("#myframe").contents().find("#inputsImages\\:insertImages").click();
    }else{
    	if(jquery('.inputFooter1').is(":visible")){
			jquery("#inputs\\:if1Btn").click();
		}else{
			jquery("#inputs\\:if2Btn").click();
		}
    }
	return true;
}
function updateInputs_next(data,num){	
	var data1 = data.split("_")[0];
	var data2 = data.split("_")[1];
	if(data2 == ""){
		var trType=jquery('#record_type1').val();
		changeInputsType(trType);
		if(num==1){
   			jquery('#addInput').hide();jquery('#addJilu').show();jquery('#addInputRecord').show();
		}else{
			jquery('#addInput').hide();jquery('#addJihua').show();jquery('#addInputRecord').show();
		}
		/*
		if(data1&&data1.length>0){
			jquery("#record_input1").append(data1);
			jquery("#record_input1").selectpicker('refresh');			
		}
		*/
	}else{
		alert(data2);
	}	
}
function sel(obj){
	if(obj.selectedIndex==0){
		jquery('#baseId').val("-1");
		jquery('.but_').trigger('click')
	}else{
		jquery('#baseId').val(obj.value);
		jquery('.but_').trigger('click')
	}
}

function searchInputsList_next(){
	var trLength=jQuery("#inputsTable tr").length;
	for(var i=1;i<trLength;i++){
		var inputIds=jQuery("#inputsTable tr:eq("+i+") td:eq(0) input:eq(0)").val();
		if(jquery("#addtr_"+inputIds).length>0){
			jquery("#check_"+inputIds).addClass('checked');
		}
	}
	var allNum = jQuery("#inputs_table").find('td .mn_check').length;
	var allLen = jQuery("#inputs_table").find('td .mn_check.checked').length;
	//alert('allNum:'+allNum+'allLen:'+allLen)
	//如果个数和选中的个数相等，则全选为选中状态
	if(allLen == allNum && allNum>0){
		jQuery("#mn_checkall").addClass('checked');
	}else{
		jQuery("#mn_checkall").removeClass('checked');
	}
	jQuery("#login").hide();
}

function changeRoom_next(data){
	var inputsId=data.inputsInfoId;   
	var goodsBatchSel="<select class='selectpicker' multiple='multiple' onchange='changeGoodsBatch(this,"+inputsId+")'>";
	var farmerInfoSel="<select class='selectpicker' >";
	if(typeof(data.goodsBatch) != "undefined"){
		goodsBatchSel+=data.goodsBatch;
	}
	if(typeof(data.farmerInfo) != "undefined"){
		farmerInfoSel+=data.farmerInfo;
	}  	
	if(typeof(data.goodsCount) != "undefined"){
		jquery('#goodsCount_'+inputsId).html(data.goodsCount);
		jquery('#goodsCount_'+inputsId).attr("title",data.goodsCount);
	}  
	if(typeof(data.unitinfoId) != "undefined"){
		jquery('#unit_'+inputsId).val(data.unitinfoId);
	}  		
	goodsBatchSel+="</select>";
	farmerInfoSel+="</select>";	
	jquery('#batch_'+inputsId).html(goodsBatchSel);
	jquery('#farmer_'+inputsId).html(farmerInfoSel);
	jquery('.selectpicker').selectpicker();	
	getCostByPrice(inputsId);
}
function changeGoodsBatch_next(data){
	var inputsId=data.inputsInfoId; 
	var msg=data.promptMessage;   
	if(typeof(data.goodsCount) != "undefined"){
		jquery('#goodsCount_'+inputsId).html(data.goodsCount);
		jquery('#goodsCount_'+inputsId).attr("title",data.goodsCount);
	}   
	if(msg!=""){
		alert("请选择同一单位的入库批次!");
		var goodsBatchids=jquery("#batch_"+inputsId+" select").val().toString();
		var batchValue=goodsBatchids.replace(","+msg,"").split(",");
		jquery("#batch_"+inputsId+" select").selectpicker('val',batchValue);			
	}
}
function isFloat(value){
	var mny =RegExp(/^([0-9]+(\.?))?[0-9]+$/);
	return mny.test(value);
}
var goodsCount=0.0;
//农事投入品提交验证
function submitRecord(){
	var tunnelInfoSize=1;
	if(jquery('#addJilu').is(":visible")){
		tunnelInfoSize=jquery("#record_tunnel").val().length;

	}else{
		tunnelInfoSize=jquery("#record_tunnel2").val().length;
	}
	var trLength=jQuery("#addInputsTable tr").length;
	if(trLength<=1){
		alert("请选择投入品！");
		return false;
	}
	var inputsRecordStr='{"inputsDatas":[';
   	for(var i=1;i<trLength;i++){   	   	
   		var inputsId=jQuery("#addInputsTable tr:eq("+i+") td:eq(0) input:eq(0)").val();
   		var unitId=jQuery("#addInputsTable tr:eq("+i+") td:eq(0) input:eq(1)").val();
   		var inputsName=jQuery("#addInputsTable tr:eq("+i+") td:eq(1) p").html();
   		var useNum=jQuery("#addInputsTable tr:eq("+i+") td:eq(3) input:eq(0)").val();
   		var cost=jQuery("#addInputsTable tr:eq("+i+") td:eq(4) input:eq(0)").val();
   		var roomId=jQuery("#addInputsTable tr:eq("+i+") td:eq(5) select").val();
   		var batchId=jQuery("#addInputsTable tr:eq("+i+") td:eq(6) select").val();
   		var farmerId=jQuery("#addInputsTable tr:eq("+i+") td:eq(7) select").val();
   		var goodsCount=jQuery("#addInputsTable tr:eq("+i+") td:eq(8)").html();
			
   		if(""==goodsCount){
   			goodsCount=0;
   		}
   		if(null==useNum || ""==useNum){
   			alert(inputsName+"的使用量不能为空！");
   			return false;
   		}else if(!isFloat(useNum)){
   			alert("请输入正确的"+inputsName+"使用量！");
   			return false;
   		}else if(parseFloat(useNum)>9999999){
   			alert(inputsName+"的使用量不能大于9999999！");
   			return false;
   	   	}
   		if(null==cost || ""==cost){
   			alert(inputsName+"的成本不能为空！");
   			return false;
   		}else if(!isFloat(cost)){
   			alert("请输入正确的"+inputsName+"成本！");
   			return false;
   		}else if(parseFloat(cost)>9999999){
   			alert(inputsName+"的成本不能大于9999999！");
   		   	return false;
   		}
   		if("0"!=roomId){		
   			if(null==batchId || ""==batchId){
   				alert(inputsName+"的入库批次不能为空！");
   				return false;
   			}
   			if(null==farmerId || ""==farmerId){
   				alert(inputsName+"的经办人不能为空！");
   				return false;
   			}
   			if((parseFloat(useNum)*tunnelInfoSize)>parseFloat(goodsCount)){
   				alert(inputsName+"库存不足，请重新输入使用量！");
   				return false;
   			} 			
   		}	
   		inputsRecordStr+= "{'inputsId':'" +inputsId + "','useNum':'"+ useNum +"','cost':'"+ cost +"','roomId':'"+ roomId +
   							"','batchId':'"+ batchId +"','farmerId':'"+ farmerId +"','unitId':'"+ unitId +"'},";	 		
   	}
   	inputsRecordStr = inputsRecordStr.substring(0, inputsRecordStr.length-1) + ']}';
   	jquery("#record_\\:inputsInfoData").val(inputsRecordStr);
	document.getElementById('record_:submitInputs').disabled = true;
	return true;
}
function addRecord(){		
	var tunnelInfoSize=1;
	if(jquery('#addJilu').is(":visible")){
		if(jquery("#record_tunnel").val()==null||jquery("#record_tunnel").val()==""){
			alert("请选择区域!");
			return false;
		}
		tunnelInfoSize=jquery("#record_tunnel").val().length;
		jquery("#addInp1").show();
		jquery("#addInp2").hide();
	}else{
		if(jquery("#record_tunnel2").val()==null||jquery("#record_tunnel2").val()==""){
			alert("请选择区域!");
			return false;
		}
		tunnelInfoSize=jquery("#record_tunnel2").val().length;
		jquery("#addInp1").hide();
		jquery("#addInp2").show();
	}
	if(tunnelInfoSize>1){
		alert("您选择了多个区域，填写的使用量为每个区域的使用量！");
	}
	jquery('#inputType').selectpicker('val',2);
	jquery("#searchInputText").val("");
	searchInputs(1);
	jquery("#addInputsTable .Output_tr").remove();
	jquery('#addInputRecord').show();
}


jquery("#recordList_,#jishuarecordList_").delegate('.farmingInputs','mouseenter mouseleave',function ( event ) {
    if (event.type == 'mouseenter') {
    	jquery(this).children('.closeInputs').css('display','block');	
   } else {
	   jquery(this).children('.closeInputs').css('display','none');
   }
});

function delRecordList(obj,index){
	jquery("#login").show();
	jquery(obj).parent().css('display','none');
	delRecordList_next(index);
}
function trim(str){
   	return str.replace(/(^\s+)|\s+$/g,"");
 }
 var operType=0;
function checkAgr(type){
	var v = "";
	//jquery("#myframe2").contents().find(".plant_imgbd").each(function(){
	//	v +=jquery(this).attr('src')+",";
	//})
	jquery("#record_url").val(v);
	if(jquery("#record_tunnel").val()==null||jquery("#record_tunnel").val()==""){
		alert("请选择区域!");
		return false;
	}else{
		var tunval=jquery('#record_tunnel').val();
		var tunids=""
		for(var i=0;i<tunval.length;i++){
			if(jquery("[value="+tunval[i]+"]").attr("ty")!="partition" && tunval[i]!=0){
				tunids+=tunval[i]+",";
			}
		}
		if(tunids!=""){
			tunids=tunids.substring(0,tunids.length-1);
		}
		jquery('#record_tunnel').removeAttr('onchange');
		jquery("#record_tunnel").val(tunids.split(','));
		jquery('#record_tunnel').attr('onchange',"tunnelValue('')");
	}
	//if(jquery("#record_name").val()==null||jquery("#record_name").val()==""){
		//alert("请选择操作人!");
		//return false;
	//}
	if(jquery("#record_time").parent().css('display')!='none'){
		var rtime = jquery("#record_time").val();
		if(trim(rtime)==""){
			alert("请填写工时!");
			return false;
		}	
		if(isNaN(rtime)){
			alert("工时请填写数字!");
			return false;
		}else{
			rtime = parseFloat(rtime);
			if(rtime>200){
				alert("工时不能超过200!");
				return false;
			}
		}
	}

	if(jquery("#record_temp").parent().css('display')!='none'){
		var temp = jquery("#record_temp").val();
		if(isNaN(temp)){
			alert("空气温度请填写数字!");
			return false;
		}else{
			temp = parseFloat(temp);
		}
		
		var humi = jquery("#record_humi").val();
		if(isNaN(humi)){
			alert("空气湿度请填写数字!");
			return false;
		}else{
			humi = parseFloat(humi);
		}
	}

	if(jquery("#record_costing").parent().css('display')!='none'){
		var costing = jquery("#record_costing").val();
		if(isNaN(costing)){
			alert("其他成本请填写数字!");
			return false;
		}else{
			costing = parseFloat(costing);
			if(costing>1000000){
				alert("其他成本不能超过1000000!");
				return false;
			}
		}
	}
	
	if(jquery('#record_remark').val().length>200){
		alert("备注字数不能大于200!");
		return false;
	}
	jquery("#login").show();
	operType=type;
	checkStorage(1);
	return true;
}

function checkAgr2(type){
	var v = "";
	//jquery("#myframe2").contents().find(".plant_imgbd").each(function(){
	//	v +=jquery(this).attr('src')+",";
	//})
	jquery("#record_url").val(v);
	if(jquery("#record_tunnel2").val()==null||jquery("#record_tunnel2").val()==""){
		alert("请选择区域!");
		return false;
	}else{
		var tunval=jquery('#record_tunnel2').val();
		var tunids=""
		for(var i=0;i<tunval.length;i++){
			if(jquery("[value="+tunval[i]+"]").attr("ty")!="partition" && tunval[i]!=0){
				tunids+=tunval[i]+",";
			}
		}
		if(tunids!=""){
			tunids=tunids.substring(0,tunids.length-1);
		}
		jquery('#record_tunnel2').removeAttr('onchange');
		jquery("#record_tunnel2").val(tunids.split(','));
		jquery('#record_tunnel2').attr('onchange',"tunnelValue(2)");

	}
//	if(jquery("#record_name2").val()==null||jquery("#record_name2").val()==""){
//		alert("请选择操作人");
//		return false;
//	}
	if(jquery("#record_time2").parent().css('display')!='none'){
		var rtime = jquery("#record_time2").val();
		if(trim(rtime)==""){
			alert("请填写工时!");
			return false;
		}	
		if(isNaN(rtime)){
			alert("工时请填写数字!");
			return false;
		}else{
			rtime = parseFloat(rtime);
			if(rtime>200){
				alert("工时不能超过200!");
				return false;
			}
		}
	}

	if(jquery("#record_costing2").parent().css('display')!='none'){
		var costing = jquery("#record_costing2").val();
		if(isNaN(costing)){
			alert("其他成本成本请填写数字!");
			return false;
		}else{
			costing = parseFloat(costing);
			if(costing>1000000){
				alert("其他成本成本不能超过1000000!");
				return false;
			}
		}
	}
	
	if(jquery("#record_remark2").val().length > 50){
		alert("备注字数不能超过50!");
		return false;
	}
	operType=type;
	checkStorage(1);
	jquery("#login").show();
	return true;
}
function submitAgr(data){
	if(""!=data){
		alert(data);			
	}else{
		if(operType==1){//农事提交
			jquery("#agr\\:hidAddBtn").click(); 
			jquery('.jilubutton').prop('disabled','true');
		}else if(operType==2){//农事提交并新增
			jquery("#agr\\:hidAddNewBtn").click(); 
			jquery('.jilubutton').prop('disabled','true');
		}else if(operType==3){//计划提交
			jquery("#agr2\\:hidAddBtn1").click(); 
			jquery('.jihuabutton').prop('disabled','true');
		}else if(operType==4){//计划提交并新增
			jquery("#agr2\\:hidAddNewBtn1").click(); 
			jquery('.jihuabutton').prop('disabled','true');
		}	
	}
}

var before = 0;
function openRecord(){
	resetRecordList_next();
	if(before==0){
		jquery("#record_tunnel").selectpicker("val",[]);
		jquery("#record_name").selectpicker("val",[]);
	}
	jquery("#record_operate").selectpicker('val',jquery("#record_operate option:eq(0)").val());
	var d = new Date();
	jquery("#record_date").val(d.format("yyyy-MM-dd hh:mm"));
	jquery("#record_time").val("1");
	jquery("#record_tunnel").selectpicker("val",[]);
	jquery("#record_costing").val(null);
	tunnelIds="";
	//window.frames['myframe2'].removeAll();
	jquery("#record_remark").val("");
	jquery(".farmingInputs").remove();
	
	if(before==0){
		jquery("#record_tunnel2").selectpicker("val",[]);
		jquery("#record_name2").selectpicker("val",[]);
	}
	before = 0;
	jquery("#record_operate2").selectpicker('val',jquery("#record_operate2 option:eq(0)").val());
	var d = new Date();
	jquery("#record_date2").val(d.format("yyyy-MM-dd"));
	jquery("#record_time2").val("1");
	jquery("#record_remark2").val("");
	jquery("#record_tunnel2").selectpicker("val",[]);
	jquery("#record_costing2").val(null);
	tunnelIds2="";
	jquery(".farmingInputs2").remove();
	jquery("#nsInputsCostVal").html("0元");
	jquery("#jhInputsCostVal").html("0元");
}

function checkOp(){
	var name=jquery("#o_name").val();
	var remark=jquery("#o_remark").val();
	if(trim(name)==""){
		alert("请填写名称!");
		return false
	}else if(name.length>45){
		alert("名称不可超过45个字符!");
		return false
	}
	if(trim(remark)!="" && remark.length>200){
		alert("描述不可超过200个字符!");
		return false
	}
	return true;
}
function checkOp1(){
	var name=jquery("#o_name_1").val();
	var remark=jquery("#o_remark_1").val();
	if(trim(name)==""){
		alert("请填写名称!");
		return false
	}else if(name.length>45){
		alert("名称不可超过45个字符!");
		return false
	}
	if(trim(remark)!="" && remark.length>200){
		alert("描述不可超过200个字符!");
		return false
	}
	return true;
}
var agrType=1;
function callBack(baseId){
	searchPlantList(baseId);
	jquery('#agr\\:hidBaseId').val(baseId);
	jquery('#agr2\\:hidjhBaseId').val(baseId);	
}
function setAgrValue(index){
	agrType=index;
	if(checkBaseModule(true)){
		alertBaseInfo();
	}
}
function alertBaseInfo(){
	if(agrType == 1){
			jquery('#record_time').val('1');
			jquery('#addJilu').show();jquery('#addJihua').hide();
			jquery('#addInput').hide();jquery('#add_operate2').hide();
			jquery("#record_tunnel").selectpicker("val",[]);
			jquery("#record_costing").val(null);
			tunnelIds="";
			openRecord();
			/* if(jquery('[dis=false]').length-1>0 && jquery('[dis=false]').length-1<3){
				jquery('.modal-body').css('height',470-54+'px');
			}else if(jquery('[dis=false]').length-1>0 && jquery('[dis=false]').length-1>2){
				jquery('.modal-body').css('height',470-(54*2)+'px');
			}else{
				jquery('.modal-body').css('height','470px');
			} */
			jquery('.record').modal('show')
	}else{
			jquery('#record_time2').val('1');
			jquery("#record_tunnel2").selectpicker("val",[]);
			jquery("#record_costing2").val(null);
			tunnelIds2="";
			jquery('#addJilu').hide();
			jquery('#addJihua').show();
			jquery('#addInput').hide();
			jquery('#add_operate2').hide();
			openRecord();

			/* if(jquery('[dis2=false]').length>1){
				if(jquery('[dis2t=false]').length>0){
					jquery('.modal-body').css('height','200px');
				}else{
					jquery('.modal-body').css('height','350px');
				}
			}else{
				if(jquery('[dis2t=false]').length>0){
					jquery('.modal-body').css('height','248px');
				}else{
					jquery('.modal-body').css('height','407px');
				}
			} */

			
			jquery('.record').modal('show')
	}
	jquery('#addInputRecord').hide();
}
function clearNoNum(obj){
	obj.value = obj.value.replace(/[^\d.]/g,"");//清除“数字”和“.”以外的字符  
	obj.value = obj.value.replace(/^\./g,"");  //验证第一个字符是数字而不是. 
	obj.value = obj.value.replace(/\.{2,}/g,"."); //只保留第一个. 清除多余的.   
	obj.value = obj.value.replace(".","$#$").replace(/\./g,"").replace("$#$",".");
}
function picFiltration(){
	jquery('#myframPic').contents().find(".pic_stress").text('图片标准：185x114（像素）');
}
function changeRoom(room,inputsId){
	if(room=="0"){
		var goodsBatchSel="<select class='selectpicker' multiple='multiple' onchange='changeGoodsBatch(this,"+inputsId+")'></select>";
    	var farmerInfoSel="<select class='selectpicker' ></select>";
		jquery('#batch_'+inputsId ).html(goodsBatchSel);
		jquery('#farmer_'+inputsId).html(farmerInfoSel); 	
		jquery('#goodsCount_'+inputsId).html("0"); 	
		jquery('#goodsCount_'+inputsId).attr("title",0);
		jquery('.selectpicker').selectpicker();	
		getCostByPrice(inputsId);
	}else{
		changeStorageRoom(room,inputsId);
	}
}
//回调将生成的编号赋值给input_code
function changeGoodsCode(goodsCode){
	document.getElementById("input_code").value=goodsCode;
	document.getElementById("auto_input_code").value=goodsCode;
}  
function closeAddInputsDiv(){
	jquery('#addInput').hide();	
	jquery('#addInputRecord').show();
	if(agrType==2){
		jquery('#addJihua').show();
		jquery('#addJilu').hide();
	}else{
		jquery('#addJilu').show();
		jquery('#addJihua').hide();
	}
}
/* function changeInputsType(type){
	var plantValues="";
	if(jquery('#addJilu').is(":visible")){
		plantValues=jquery("#record_tunnel").selectpicker("val");
	}else{
		plantValues=jquery("#record_tunnel2").selectpicker("val");
	}
	changeInputs1(type,"'"+plantValues+"'");
	jquery("#login").show();
} */

function tunnelValue(va){
	var tunVal=jQuery('#record_tunnel'+va).val();
	var faVal=jQuery('#record_name'+va).val();
	if(faVal!=null){
		jQuery('#record_tunnel'+va+' option').each(function(){
			if(jQuery(this).attr('fa'+va)!=null){
				for(var i=0;i<faVal.length;i++){
					if(faVal[i]==jQuery(this).attr('fa'+va)){
						faVal.splice(i,1);
						i--;
					}
				}
				
			}
		})
	}else{
		faVal=new Array();
	}
	
	if(tunVal!=null){
		for(var i=0;i<tunVal.length;i++){
			if(jQuery('[va'+va+'='+tunVal[i]+']').attr('fa'+va)!=null){
				faVal.push(jQuery('[va'+va+'='+tunVal[i]+']').attr('fa'+va));
			}
		}
	}
	jQuery('#record_name'+va).selectpicker("val",faVal);
	if(va==''){
		changeTun3();
	}else{
		changeTun6();
	}
}

var tunnelIds=jquery('#record_tunnel').val();//历史数据
function changeTun3(){
	//没有选中数据
	if(jquery('#record_tunnel').val()==null){
		tunnelIds="";
	}else{//选中数据
		var ids3=jquery("#record_tunnel").val();//选中数据
		
		//历史数据中长度为0  新增数据
		if(tunnelIds.length==0){
			var ids="";
			/*循环选中数据  为0的  全部选中
			    有attr("ty") =partition  区域选中
			    其他为单独地块选中
			*/
			for(var i=0;i<ids3.length;i++){
				if(ids3[i]==0){
					ids="";
					jquery("#record_tunnel").find('option').each(function(){
						ids+=jquery(this).val()+",";
					})
					break;
				}
				ids+=ids3[i]+",";
				if(jquery("#record_tunnel").find("[value="+ids3[i]+"]").attr("ty")=="partition"){
					jquery("#record_tunnel").find("[pid="+ids3[i]+"]").each(function(){
						ids+=jquery(this).attr('value')+",";
					})
				}
			}

			/*选中长度 = 总长度-1
			    如果选中数据中 没有 0（全部）
			    把0加进去
			*/
			
			//赋值
			ids=ids.substring(0,ids.length-1);
			jquery('#record_tunnel').removeAttr('onchange');
			jquery('#record_tunnel').selectpicker('val',ids.split(','));
			tunnelIds=ids;
			jquery('#record_tunnel').attr('onchange',"tunnelValue('')");
		}else{//历史数据中长度！=0   修改数据
			var tunnelIds_0=tunnelIds.split(","); //历史数据
			var ids="";//新生成数据
			//历史数据长度 > 新选中数据长度  为去掉勾选
			if(tunnelIds_0.length>ids3.length){
				var difference =""; //去掉勾选的value
				//循环 查找被去掉勾选的值
			    for (key in tunnelIds_0) {
			        var stra = tunnelIds_0[key];
			        var count = 0;  
			        for(var j= 0; j < ids3.length; j++){  
			            var strb = ids3[j];  
			            if(stra == strb) {  
			                count++;  
			            }  
			        }  
			        if(count==0) {
			        	difference=stra;  
			        }  
				}
			  //去掉勾选值不为0
				//去掉勾选值 为区域  把区域及其下级地块和全部去掉
				if(jquery("#record_tunnel").find("[value="+difference+"]").attr("ty")=="partition"){
					for(var i=0;i<ids3.length;i++){
						if(ids3[i]!=difference && jquery("[value="+ids3[i]+"]").attr('pid')!=difference && ids3[i]!=0){
							ids+=ids3[i]+",";
						}
					}
				}else{//去掉勾选值 为地块 把地块及其上级区域和全部去掉
					for(var i=0;i<ids3.length;i++){
						if(ids3[i]!=difference && jquery("[value="+difference+"]").attr('pid')!=ids3[i] && ids3[i]!=0){
							ids+=ids3[i]+",";
						}
					}
				}
			}else{//历史数据长度 > 新选中数据长度  为添加勾选
				var difference =""; //添加勾选的value
				//循环 查找添加勾选的值
			    for (key in ids3) {
			        var stra = ids3[key];
			        var count = 0;  
			        for(var j= 0; j < tunnelIds_0.length; j++){  
			            var strb = tunnelIds_0[j];  
			            if(stra == strb) {  
			                count++;  
			            }  
			        }  
			        if(count==0) {
			        	difference=stra;  
			        }  
				}
			  	//添加勾选值不为0
			    //添加勾选为 区域  区域及下级地块 全部添加
				if(jquery("#record_tunnel").find("[value="+difference+"]").attr("ty")=="partition"){
					for(var i=0;i<ids3.length;i++){
						if(jquery("[value="+ids3[i]+"]").attr('pid')!=difference && ids3[i]!=0){
							ids+=ids3[i]+",";
						}
					}
					jquery("#record_tunnel").find("[pid="+difference+"]").each(function(){
						ids+=jquery(this).attr('value')+",";
					})
				}else{//添加勾选 为 地块  单独添加
					for(var i=0;i<ids3.length;i++){
						ids+=ids3[i]+",";
					}
				}
			}

			//赋值
			if(ids!=""){
				ids=ids.substring(0,ids.length-1);
				jquery('#record_tunnel').removeAttr('onchange');
				jquery('#record_tunnel').selectpicker('val',ids.split(','));
				tunnelIds=ids;
				jquery('#record_tunnel').attr('onchange',"tunnelValue('')");
			}else{
				jquery('#record_tunnel').removeAttr('onchange');
				jquery('#record_tunnel').selectpicker('val',null);
				tunnelIds="";
				jquery('#record_tunnel').attr('onchange',"tunnelValue('')");
			}
		}
	}
}

var tunnelIds2=jquery('#record_tunnel2').val();//历史数据
function changeTun6(){
	if(jquery("#record_tunnel2").val()==null){
		tunnelIds2="";
	}else{
		var ids6=jquery("#record_tunnel2").val();
		if(tunnelIds2.length==0){
			var ids="";
			for(var i=0;i<ids6.length;i++){
				if(ids6[i]==0){
					ids="";
					jquery("#record_tunnel2").find('option').each(function(){
						ids+=jquery(this).val()+",";
					})
					break;
					
				}
				ids+=ids6[i]+",";
				if(jquery("#record_tunnel2").find("[value="+ids6[i]+"]").attr("ty")=="partition"){
					jquery("#record_tunnel2").find("[pid="+ids6[i]+"]").each(function(){
						ids+=jquery(this).attr('value')+",";
					})
				}
			}
			
			
			ids=ids.substring(0,ids.length-1);
			jquery('#record_tunnel2').removeAttr('onchange');
			jquery('#record_tunnel2').selectpicker('val',ids.split(','));
			tunnelIds2=ids;
			jquery('#record_tunnel2').attr('onchange',"tunnelValue(2)");
		}else{
			var tunnelIds_0=tunnelIds2.split(",");
			var ids="";

			if(tunnelIds_0.length>ids6.length){
				var difference =""; 
			    for (key in tunnelIds_0) {
			        var stra = tunnelIds_0[key];
			        var count = 0;  
			        for(var j= 0; j < ids6.length; j++){  
			            var strb = ids6[j];  
			            if(stra == strb) {  
			                count++;  
			            }  
			        }  
			        if(count==0) {
			        	difference=stra;  
			        }  
				}
				
				if(jquery("#record_tunnel2").find("[value="+difference+"]").attr("ty")=="partition"){
					for(var i=0;i<ids6.length;i++){
						if(ids6[i]!=difference && jquery("[value="+ids6[i]+"]").attr('pid')!=difference && ids6[i]!=0){
							ids+=ids6[i]+",";
						}
					}
				}else{
					for(var i=0;i<ids6.length;i++){
						if(ids6[i]!=difference && jquery("[value="+difference+"]").attr('pid')!=ids6[i] && ids6[i]!=0){
							ids+=ids6[i]+",";
						}
					}
				}
	
			}else{
				var difference =""; 
			    for (key in ids6) {
			        var stra = ids6[key];
			        var count = 0;  
			        for(var j= 0; j < tunnelIds_0.length; j++){  
			            var strb = tunnelIds_0[j];  
			            if(stra == strb) {  
			                count++;  
			            }  
			        }  
			        if(count==0) {
			        	difference=stra;  
			        }  
				}
				
				if(jquery("#record_tunnel2").find("[value="+difference+"]").attr("ty")=="partition"){
					for(var i=0;i<ids6.length;i++){
						if(jquery("#record_tunnel2").find("[value="+ids6[i]+"]").attr('pid')!=difference && ids6[i]!=0){
							ids+=ids6[i]+",";
						}
					}
					jquery("#record_tunnel2").find("[pid="+difference+"]").each(function(){
						ids+=jquery(this).attr('value')+",";
					})
				}else{
					for(var i=0;i<ids6.length;i++){
						ids+=ids6[i]+",";
					}
				}
					
			}
			if(ids!=""){
				ids=ids.substring(0,ids.length-1);
				jquery('#record_tunnel2').removeAttr('onchange');
				jquery('#record_tunnel2').selectpicker('val',ids.split(','));
				tunnelIds2=ids;
				jquery('#record_tunnel2').attr('onchange','tunnelValue(2)');
			}else{
				jquery('#record_tunnel2').removeAttr('onchange');
				jquery('#record_tunnel2').selectpicker('val',null);
				tunnelIds2="";
				jquery('#record_tunnel2').attr('onchange',"tunnelValue(2)");
			}
		}
	}

 }

function openVoiceModal(now){
	jquery('.voice_list li').remove()
	jquery(now).parent().find('div').each(function(){
		var sound_time=jquery(this).attr('sound_time');
		var sound_src=jquery(this).attr('sound_src');
		var sound_heml="<li onclick='audipPlay(this)' style='cursor: pointer;'><span class='v_head'><img src='#{request.contextPath}/asset/images/icon_head.png' /></span><div class='v_time'>"
		sound_heml+="<p class='v_text' soundsrc='"+sound_src+"'>"+sound_time+"</p></div></li>";
		jquery('.voice_list').append(sound_heml);
	})
	jquery('#voiceModal').modal('show');
}
function audipPlay(now){
	jquery('.v_text').each(function(){
		jquery(this).css('background','');	
	})
	jquery('audio').attr('src',jquery(now).find('.v_text').attr('soundsrc'));
	jquery('audio')[0].play();
	jquery(now).find('.v_text').css('background','url(/asset/images/icon_voice_soft.gif) no-repeat 12px center');	
}

/* function picUrlgo(){
	var picUrl="";
	jQuery("#tdurl").find(".farmPicUrl").each(function(){
		picUrl +=jquery(this).attr('src')+",";
	})
	if(picUrl!=""){
		picUrl=picUrl.substring(0, picUrl.length);
		jQuery("#agr\\:picUrlList").val(picUrl);
	}
} */
jquery('audio').bind('ended',function(){
	var au_src=jquery('audio').attr('src');
	jquery("[soundsrc='"+au_src+"']").css('background','');	
});


//新版添加农事投入品-----------
window.onload = function (){
	var searchStr = jQuery("#searchInfo_").val();
	if(searchStr == "" || searchStr == null){
		jQuery("#searchInfo_").val("请输入搜索条件");
		jQuery("#searchInfo_").css("color","#a8a8a8");
	}else if(searchStr == "请输入搜索条件"){
		jQuery("#searchInfo_").css("color","#a8a8a8");
	}else{
		jQuery("#searchInfo_").css("color","#000");
	}
}

//(1)删除投入品
function DeleteOutput(obj,inputsId){
	jQuery(obj).parents('.Output_tr').remove();
	jQuery("#check_"+inputsId).removeClass('checked');
	//取消全选
	if(jQuery("#mn_checkall").hasClass('checked')){   		
		jQuery("#mn_checkall").removeClass('checked');
	}
	resetIndex();  	
}
//添加投入品，由于删除，添加操作序号变乱，重新排序
function resetIndex(){
	var trLength=jQuery("#addInputsTable tr").length;
	for(var i=1;i<trLength;i++){
		jQuery("#addInputsTable tr:eq("+i+") td:eq(0) span").html(i);
    }
}
//(2-1)投入品表格复选框，全选功能
function OutputCheckAll(obj,oparents){
	if(jQuery(obj).hasClass('checked')){
		//取消全选
		jQuery(obj).removeClass('checked');
		jQuery(oparents).find('td .mn_check').removeClass('checked');
		//只取消本页的
		//jQuery("#addInputsTable .Output_tr").remove();
		var trLength=jQuery("#inputsTable tr").length;
		for(var i=0;i<trLength;i++){
			var inputIds=jQuery("#inputsTable tr:eq("+i+") td:eq(0) input:eq(0)").val();
			jQuery("#addtr_"+inputIds).remove();
    	}
		resetIndex();  	
	}else{   		
		//var trLength=jQuery("#inputsTable tr").length;
		//全选时，判断没有选中的添加到投入品，已添加的不在查询
		var inputIds="";   		
		var noCheckObj=jQuery("#inputs_table").find('td .mn_check ').not(".checked");
		var trLength=noCheckObj.length;
		
		for(var i=0;i<trLength;i++){
			//inputIds+=jQuery("#inputsTable tr:eq("+i+") td:eq(0) input:eq(0)").val()+",";
			inputIds+=jQuery(noCheckObj).eq(i).siblings("input:eq(0)").val()+",";
        } 
        if(trLength>1){
        	inputIds=inputIds.substring(0,inputIds.length-1);
        }
		//如果是空，则是没有选中状态,点击后全选
		jQuery(obj).addClass('checked');
		jQuery(oparents).find('td .mn_check').addClass('checked');
		//添加多个投入品，获取库存信息
		changeGoodsInfo(inputIds);  
		jQuery("#login").show();
	}
}
var tableStr="";
//(2-2)如果有一个复选框没有选中，则全选按钮为取消状态，否则相反
function OutputCheck(obj,oparents,oAll,inputsId){
	if(jQuery(obj).hasClass('checked')){
		//取消全选
		jQuery(obj).removeClass('checked');
		//如果一个取消，那么全选为取消状态
		jQuery(oAll).removeClass('checked');
		jQuery('#addtr_'+inputsId).remove();
		resetIndex();  	
	}else{
		jQuery(obj).addClass('checked');
		//如果是空，则是没有选中状态,点击后选择
		var allNum = jQuery(oparents).find('td .mn_check').length;
		var allLen = jQuery(oparents).find('td .mn_check.checked').length;
		//alert('allNum:'+allNum+'allLen:'+allLen)
		//如果个数和选中的个数相等，则全选为选中状态
		if(allLen == allNum){
    		jQuery(oAll).addClass('checked');
		}else{
    		jQuery(oAll).removeClass('checked');
		}
		//添加一个投入品，获取库存信息
		changeGoodsInfo(inputsId);    		
		jQuery("#login").show();
	}
}
//添加投入品-获取库存信息回调
function storageCallback(resultData){
    var inputList=resultData.result;
    jquery(inputList).each(function(index, data){
		var inputsId=data.inputsInfoId;
	        var rowNum=jQuery("#addInputsTable tr").length;
	    	var inputName=jQuery("#trp_"+inputsId+" td:eq(2) p").html();
	    	var unitName=jQuery("#trp_"+inputsId+" td:eq(3) p").html();
	    	var storageRoomSel="<select class='selectpicker'  onchange='changeRoom(this.value,"+inputsId+")'><option value='0'>无</option>";
	    	var goodsBatchSel="<select class='selectpicker' multiple='multiple' onchange='changeGoodsBatch(this,"+inputsId+")'>";
	    	var farmerInfoSel="<select class='selectpicker' >";
	    	if(typeof(data.storageRoom) != "undefined"){
	    		storageRoomSel+=data.storageRoom;
	    	} 
	    	if(typeof(data.goodsBatch) != "undefined"){
	    		goodsBatchSel+=data.goodsBatch;
	    	}
	    	if(typeof(data.farmerInfo) != "undefined"){
	    		farmerInfoSel+=data.farmerInfo;
	    	}  	
	    	storageRoomSel+="</select>";
	    	goodsBatchSel+="</select>";
	    	farmerInfoSel+="</select>";
	    	
	    	tableStr="<tr class=\"Output_tr\" id='addtr_"+inputsId+"'>"+
		    	"<td class=\"br_bt br_rt\">"+
	    		"<input type='hidden' value='"+inputsId+"'/>"+
		    		"<input type='hidden' value='' id='unit_"+inputsId+"'/><span>"+rowNum+"</<span></td>"+
	    		"<td class=\"br_bt br_rt\"><p class=\"ellipsis\" title='"+inputName+"'>"+inputName+"</p></td>"+
			    "<td class=\"br_bt br_rt\"><p class=\"ellipsis\" title='"+unitName+"'>"+unitName+"</p></td>"+   	
		    	"<td class=\"br_bt br_rt\">"+
		    		"<input class=\"Output_input\" onblur=\"useNumBlur(this.value,"+inputsId+")\"></input>"+
		    	"</td>"+
		    	"<td class=\"br_bt br_rt\">"+
		    		"<input class=\"Output_input\" value='0'></input>"+
		    	"</td>"+
		    	"<td class=\"br_bt br_rt\">"+
			    	"<div class=\"Output_selectpicker\" id='room_"+inputsId+"'>"+storageRoomSel+"</div>"+
		    	"</td>"+
		    	"<td class=\"br_bt br_rt\">"+
		    		"<div class=\"Output_selectpicker\" id='batch_"+inputsId+"'>"+goodsBatchSel+"</div>"+
		    	"</td>"+
		    	"<td class=\"br_bt br_rt\">"+
					"<div class=\"Output_selectpicker\" id='farmer_"+inputsId+"'>"+farmerInfoSel+"</div>"+
				"</td>"+
		    	"<td class=\"br_bt br_rt\" style='overflow: hidden;' id='goodsCount_"+inputsId+"'>0</td>"+
		    	"<td class=\"br_bt\">"+
		    		"<a href=\"javascript:;\" onclick=\"DeleteOutput(this,"+inputsId+")\">删除</a>"+
		    	"</td>"+
	    	"</tr>";
	    	jquery("#addInputsTable").append(tableStr);
	});    
	jquery('.selectpicker').selectpicker();			
	jQuery("#login").hide();
}
//(3)获取焦点，失去焦点
function FocusFn(obj,oColor,txt_val){
	if(jQuery(obj).val()==txt_val){
		jQuery(obj).val('');
		jQuery(obj).css('color',oColor)
	}
}
function BlurFn(obj,oColor,txt_val){
	if(jQuery(obj).val()==''){
		jQuery(obj).val(txt_val);
		jQuery(obj).css('color',oColor)
	}
}
//投入品列表信息查询
function searchInputs(pageNum){
	var plantValues="";
	if(jquery('#addJilu').is(":visible")){
		plantValues=jquery("#record_tunnel").selectpicker("val");
	}else{
		plantValues=jquery("#record_tunnel2").selectpicker("val");
	}		
	var inputType=jquery("#inputType").val();
	var searchText=jquery("#searchInputText").val();
	if(searchText=="请输入查询内容"){
		searchText="";
	}
	searchInputsList(inputType,"'"+plantValues+"'",searchText,pageNum);
	jquery("#login").show();
}
//翻页
function inputsJump(inputsPageNum){
	searchInputs(inputsPageNum);
}

function getCostByPrice(inputsId){
	var costObj=jQuery("#addtr_"+inputsId+" td:eq(4) input:eq(0)");
	var batchId=jQuery("#addtr_"+inputsId+" td:eq(6) select").val();
	var priceObj=jQuery("#addtr_"+inputsId+" td:eq(6) select").find("option:selected");

	if(batchId==null){//没有选择批次
		//jQuery(costObj).val(0);
		return;
	}
	var price=0;

    for(var i=0;i<batchId.length;i++){//循环选择的批次
		for(var i=0;i<priceObj.length;i++){//循环批次价格
			var batchPrice=jQuery(priceObj).attr("price");
			if(batchId[i]==jQuery(priceObj).val() && batchPrice>0){//匹配价格，多个批次取不为0的第一个价格
			 	price=batchPrice;
			 	break;
			}
		}
		if(price>0){
			break;
		}
    }
	var useNum=jQuery("#addtr_"+inputsId+" td:eq(3) input:eq(0)").val();
	if(null==useNum || ""==useNum){
		return false;
	}else if(!isFloat(useNum)){
		return false;
	}else if(price>0){
		jQuery(costObj).val((useNum*price).toFixed(2));
	}
}
//使用量失去焦点
function useNumBlur(useNum,inputsId){
	if(null==useNum || ""==useNum){
		return false;
	}else if(!isFloat(useNum)){
		return false;
	}
	getCostByPrice(inputsId);
}

//农事记录、农事计划modal控制
//obj:模态框盒子    minw：最小宽度     minh：同理    classw：屏幕小于最小宽度时添加控制宽度class classh：同理
function ResizeModal(obj,minw,minh,classw,classh){
	var _windowW = jQuery(window).width();
	var _windowH = jQuery(window).height();
	if(_windowW<minw){
		jQuery(obj+" .modal-dialog").addClass( classw );
	}else{
		jQuery(obj+" .modal-dialog").removeClass( classw );
	}
	if(_windowH<minh){
		jQuery(obj+" .modal-dialog").addClass( classh );
	}else{
		jQuery(obj+" .modal-dialog").removeClass( classh );
	}
	var _modalW = jQuery(obj+" .modal-dialog").width();
	var _modalH = jQuery(obj+" .modal-dialog").height();
	var _modalL = (_windowW-_modalW)/2;
	var _modalT = (_windowH-_modalH)/2;
	jQuery(obj+" .modal-dialog").css({
		'left' : _modalL,
		'top'  : _modalT,
		'margin-top':'0px',
		'margin-left':'0px'
	});
	//console.log('w:'+_bodyW+'h:'+_windowH+'modalw:'+_modalW+'modalH:'+_modalH)
}

//农事记录、农事计划modal拖动事件控制
function DragModalFn(obj){
	var move=false;//移动标记
	var _x,_y;//鼠标离控件左上角的相对位置
		
	jQuery(obj).mousedown(function(e){
		move=true;
		_x=e.pageX-parseInt(jQuery(obj).css("left"));
		_y=e.pageY-parseInt(jQuery(obj).css("top"));
		//console.log(_x+':'+_y)
	});
	jQuery(obj).mousemove(function(e){
		jQuery(obj).css('cursor','all-scroll');
		if(move){
			var x=e.pageX-_x;//控件左上角到屏幕左上角的相对位置
			var y=e.pageY-_y;
			var _modalW = jQuery(obj).width();
			var _modalH = jQuery(obj).height();
			if(x<=0){
				x=0;
			}
			if(y<=0){
				y=0;
			}
			if(x>=jQuery(window).width()-_modalW){
				x=jQuery(window).width()-_modalW;
			}
			if(y>=jQuery(window).height()-_modalH){
				y=jQuery(window).height()-_modalH;
			}
			jQuery(obj).css({"top":y,"left":x});
		}
	});
	jQuery(obj).mouseup(function(){
		move=false;
	});
}

	
//]]>
</script>
            </td>
	</ui:define>

</ui:composition>

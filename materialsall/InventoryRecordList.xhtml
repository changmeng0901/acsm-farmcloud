<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"	
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a="http://richfaces.org/a4j" 
    template="/layout/order_template.xhtml">

<ui:define name="body">
	<td valign="top" >
	<h:form id="submitOrderSearch">
	<div class="right_c">
                	<div class="r_title">
                    	<div class="r_t_l"><s:link propagation="none"  view="#{sessionTake.urlTemp}" style="text-decoration:none;color:black;" value="盘点管理 ">
                    </s:link>&#160;&gt;&#160;&#160;<font size="3">盘点信息</font></div>
                    <div class="r_t_r">
							<ul>
								<li >
									<a href="#{request.contextPath}/product/GoodsStorageTypeList.seam" style="text-decoration:none;color:black;" >
				                 		<img src="#{request.contextPath}/asset/images/wuliao.png" width="12" height="10" />
				                 		
				              			物料管理
				              		</a>
			        			</li>
								<li style="border-right:1px solid #ccc;">
									 <a href="#{request.contextPath}/storage/StorageTypeList.seam" style="text-decoration:none;color:black;" >
									<img src="#{request.contextPath}/asset/images/cangku.png" width="13" height="10" />
			                      	 库房管理
			                      	</a>
			                    </li>
			     			</ul>
						</div>
                    </div>
                    
                   
                		<div style="padding-left:14px; line-height:30px;">
                        	<table style="float:left; margin-right:70px;">
                                <tr>
                                    <td class="all_te">盘点批次：</td>
                                    <td>
                                    	<h:outputText value="#{inventoryHome.instance.inventoryBatch}" />
                                    </td>
                                </tr>
                            </table>
                            
                       
                    	
                        	<table style="float:left; margin-right:70px;">
                                <tr>
                                    <td class="all_te">盘点日期：</td>
                                    <td>
                                    	<h:outputText value="#{inventoryHome.instance.inventoryTime}"><s:convertDateTime type="both" dateStyle="short" pattern="yyyy-MM-dd" /></h:outputText>
                                    </td>
                                </tr>
                            </table>
                           
                       
                      
                        	<table style="float:left; margin-right:70px;">
                                <tr>
                                    <td class="all_te">经手人：</td>
                                    <td>	
                                    	<h:outputText value="#{inventoryHome.instance.inventoryPeople}" />
                                    </td>
                                </tr>
                            </table>
                            
                        
                        
                        	<table style="float:left;">
                        	
                                <tr>
                                    <td class="all_te">盘点库房：</td>
                                    <td>	
                                    	<h:outputText value="#{inventoryHome.instance.storageRoomId.name}" />
                                    </td>
                                </tr>
                            </table>
                            <div class="clear"></div>
                        </div>    
                      <div class="all_d3" style="margin-top:15px;">   
                        <div class="all_da all_w01" style="margin-left:0px;">
                        	<table>
                                <tr>
                                    <td class="all_te">录入人：</td>
                                    <td  style="width: 266px;">	
		                   				<h:inputText id="entryUser" maxlength="50" value="#{inventoryHome.instance.entryUser}" styleClass="r_c_text_new"/>
                                        <font color="#FF0000">*</font>
                                    </td>
                                </tr>
                            </table>
                            
                        </div>
                        
                         <div class="all_da all_w01" style="margin-left:0px;">
                        	<table>
                                <tr>
                                    <td class="all_te">录入日期：</td>
                                    <td>	
			                   			<rich:calendar id="entryTime"  datePattern="yyyy-MM-dd"  value="#{inventoryHome.instance.entryTime}"/>
		                                <font color="#FF0000">*</font>
                                    </td>
                                </tr>
                            </table>
                            
                        </div>
                        
                        
                         <div class="clear"></div>
                   </div>
	 <table width="100%" class="ze_table" cellpadding="0" cellspacing="0">
                    	<tr>
                    		<td width="5" height="4"><img src="#{request.contextPath}/asset/images/table_d_40.jpg" width="5" height="4" /></td>
                    		<td colspan="7" style="border-top:1px solid #e1e1e1; background:#f0f5fb;"></td>
                            <td width="5" height="4"><img src="#{request.contextPath}/asset/images/table_d_43.jpg" width="5" height="4" /></td>
                    	</tr>
                    	<tr>
                    		<th class="ze_bg ze_bt_le" width="5" height="4"></th>
                    		<th width="18%" class="ze_bg">库存批次</th>
		                    <th width="10%" class="ze_bg">物料编号</th>
		                    <th width="10%" class="ze_bg">名称</th>
		                    <th width="7%" class="ze_bg">库存</th>
		                    <th width="15%" class="ze_bg">规格</th>
		                    <th width="10%" class="ze_bg">差异</th>
		                    <th width="30%" class="ze_bg">备注</th>
                            <th class="ze_bg ze_bt_ri" width="5" height="4"></th>
                    	</tr>
                    	<input type="hidden" id="hiddenId" value="#{inventoryHome.irList.size()}"/>
						<ui:repeat value="#{inventoryHome.irList}" var="_inventoryRecord" rowKeyVar="_index">
                    	<tr>
                    		<td class="ze_bg2 ze_bt_le" width="5" height="4"></td>
                    		<td class="ze_bg2"><h:outputText value="#{_inventoryRecord.goodsBatchId.batchCode}" /></td>
                    		<td class="ze_bg2"><h:outputText value="#{_inventoryRecord.goodsBatchId.goodsInfoId.goodsCode}" /></td>
                    		<td class="ze_bg2"><h:outputText value="#{_inventoryRecord.goodsBatchId.goodsInfoId.name}"><s:convertDateTime type="both" dateStyle="short" pattern="yyyy-MM-dd" /></h:outputText></td>
                    		<td class="ze_bg2"><h:outputText value="#{_inventoryRecord.goodsBatchStock}"/></td>
                    		<td class="ze_bg2"><h:outputText value="#{_inventoryRecord.goodsBatchId.goodsInfoId.goodsSpec}" /></td>
                    		<td class="ze_bg2"> 
                    			<span style=" *width:123px; *background:url(../asset/images/text_12.jpg) no-repeat;"> <h:inputText styleClass="r_c_text180" id="actualStock#{_index}" value="#{_inventoryRecord.differenceValue}" style="*background:none;"/></span>
                    		</td>
                    		<td class="ze_bg2">
                    			<span style="*width:245px; *background:url(../asset/images/text_10.jpg) no-repeat;"><h:inputText styleClass="r_c_text" id="remark#{_index}" value="#{_inventoryRecord.remark}" style="*background:none;width:240px"/></span>
                    		</td>
                            <td class="ze_bg2 ze_bt_ri" width="5" height="4"></td>
                    	</tr>
                    	</ui:repeat>
                    </table>
   	<div class="car_button">
		<h:commandButton id="persist"  styleClass="edit_save" action="#{inventoryHome.update}" onclick="return checkSubmit1()"/>
		&#160;
		<s:button view="/materialsall/InventoryList.xhtml" styleClass="edit_back" id="bn_left6" style="margin-left:10px" />
	</div>
</div>
</h:form>
<script type="text/javascript">
//<![CDATA[
jquery(".rich-calendar-input").addClass("r_c_text_date");
jquery(".rich-calendar-input").removeClass("rich-calendar-input");
function checkSubmit1(){
	var a1 =  document.getElementById("submitOrderSearch:entryUser").value;
    var b1 =  document.getElementById("submitOrderSearch:entryTimeInputDate").value;
	   if(a1==""){
		  document.getElementById("productMsg").innerHTML = "录入人不能为空";
	  #{rich:component('products')}.show();
	  return false;
	   }
	   if(b1==""){
		  document.getElementById("productMsg").innerHTML = "录入日期不能为空";
	  #{rich:component('products')}.show();
	  return false;
	   } 
	   var b = true;
	   for(var i = 0;i<jquery(".r_c_text180").length;i++){
		   var a1 =  document.getElementById("submitOrderSearch:j_id86:"+ i +":actualStock").value;
		   var b1 =  document.getElementById("submitOrderSearch:j_id86:"+ i +":remark").value;
		   if(a1 != "" && a1 != "0" && b1 == ""){
			   b = false;
			  document.getElementById("productMsg").innerHTML = "备注不能为空";
			  #{rich:component('products')}.show();
			  return false;
		   }                                 
	   }
	   return b;
}
//]]>
</script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/superfish.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/supersubs.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/hoverIntent.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.flot.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery-ui.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery-ui-select.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/customInput.jquery.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.dataTables.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.fancybox-1.3.4.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.filestyle.mini.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery-ui-timepicker-addon.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.treeview.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.tipsy.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.wysiwyg.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/inline.js"></script>
<rich:modalPanel id="products" autosized="true" height="125" width="240" headerClass="modalHeader">
		<div class="ts_div2" id="div2">
		<div class="tck_ti"><a href="#"><h:outputLink value="#" onclick="#{rich:component('products')}.hide(); return false;">
		<img src="#{request.contextPath}/asset/images/close_17.jpg" width="20" height="20"  /></h:outputLink></a></div>
			<table
				style="width: 100%; margin-top: 25px; table-layout: fixed; margin-left: 15px;">
				<tr>
					<td width="46" align="left"><img
						src="#{request.contextPath}/asset/images/tstc.jpg" width="46"
						height="46" /></td>
					<td align="left"
						style="font-family: '宋体'; color: #000000; font-size: 12px; padding-left: 15px;">
					<span id="productMsg">*号部分为必填项！</span></td>
				</tr>
			</table>
			</div>
		</rich:modalPanel>
</td> 
<style>
  .ts_div2{width:240px; height: 125px; border: 1px solid #81C5E9; margin: 0px auto; padding: 0 15px 15px;  background: url(#{request.contextPath}/asset/images/tck_bg_14.jpg) #ffffff repeat-x scroll center top;}
  .dr-mpnl-shadow{background:none;}
  .dr-mpnl-pnl{background:none; border:none;}
  .dr-mpnl-pnl-b{padding:0;}
  .dr-mpnl-shadow{top:0; left:0;}
  .rich-picklist-source-items{margin:0;}
  .ui-selectmenu{*float:left;}
</style> 
</ui:define>
</ui:composition>

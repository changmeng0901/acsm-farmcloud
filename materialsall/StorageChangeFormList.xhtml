<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:a="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:c="http://java.sun.com/jstl/core"
    template="/layout/template_new.xhtml">

<ui:define name="body">
<td valign="top" width="100%">
		<style>
		 /*下拉搜索样式09-04*/
	.input-group .form-control:first-child, .input-group-addon:first-child, .input-group-btn:first-child > .btn, .input-group-btn:first-child > .btn-group > .btn, .input-group-btn:first-child > .dropdown-toggle, .input-group-btn:last-child > .btn:not(:last-child):not(.dropdown-toggle), .input-group-btn:last-child > .btn-group:not(:last-child) > .btn {
	    border-bottom-right-radius: 0;
	    border-top-right-radius: 0;
	}.input-group .form-control:last-child, .input-group-addon:last-child, .input-group-btn:last-child > .btn, .input-group-btn:last-child > .btn-group > .btn, .input-group-btn:last-child > .dropdown-toggle, .input-group-btn:first-child > .btn:not(:first-child), .input-group-btn:first-child > .btn-group:not(:first-child) > .btn {
	    border-bottom-left-radius: 0;
	    border-top-left-radius: 0;
	}
	.form-control{  
	border-bottom-left-radius: 0;
	    border-top-left-radius: 0;
	    height:31px;
	    }
    .select_input07 .form-control{width:300px;}
    
		</style>
                <div class="right_c">
                	<div class="r_title">
                    	<div class="r_t_l">
						<s:link propagation="none"  view="#{sessionTake.urlTemp}" style="text-decoration:none;color:black;" value="工作 ">
                        </s:link>
						&#160;&gt;&#160;&#160;<font size="3">流水管理</font></div>
						<div class="r_t_r">
							<ul>
								<li >
									<a href="#{request.contextPath}/product/GoodsStorageTypeList.seam" style="text-decoration:none;color:black;" >
				                 		<img src="#{request.contextPath}/asset/images/wuliao.png" width="12" height="10" />
				                 		
				              			物料管理
				              		</a>
			        			</li>
								<li style="border-right:1px solid #ccc;">
									 <a href="#{request.contextPath}/storage/StorageTypeList.seam" style="text-decoration:none;color:black;" >
									<img src="#{request.contextPath}/asset/images/cangku.png" width="13" height="10" />
			                      	 库房管理
			                      	</a>
			                    </li>
			     			</ul>
						</div>
                    </div>
					<div class="yuleng">
						<a href="#{request.contextPath}/inOut/StockRecord.seam"><img src="#{request.contextPath}/asset/images/jx_03.jpg" width="106" height="74" /></a>
 						<a href="#{request.contextPath}/materialsall/GoodsBatchList.seam"><img src="#{request.contextPath}/asset/images/jx_05.jpg" width="106" height="74" /></a>
 						<a href="#{request.contextPath}/materialsall/StorageChangeFormList.seam"><img src="#{request.contextPath}/asset/images/jx_07.jpg" width="106" height="74" /></a>
 						<a href="#{request.contextPath}/storage/EnterOf.seam"><img src="#{request.contextPath}/asset/images/jx_09.jpg" width="106" height="74" /></a>
 						<a href="#{request.contextPath}/materialsall/InventoryList.seam"><img src="#{request.contextPath}/asset/images/jx_11.jpg" width="106" height="74" /></a>
						<a href="#{request.contextPath}/storage/OutOf.seam"><img src="#{request.contextPath}/asset/images/jx_13.jpg" width="106" height="74" /></a>
					</div>
                    
                    <h:form id="goodsInfoSearch">
                    <div class="z_r_ser">
                    	<table cellpadding="0" cellspacing="0" class="cxtja" style="width:660px;">
                            <tr>
                                <td style="padding-left: 100px;">
		                      <!--   带下拉搜索框     -->
							  <div class="select_input07" >
							    <div class="input-group">
							      <div class="input-group-btn">
							        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><span id="rpType">物料类型</span><span class="caret"></span></button >
							        <ul class="dropdown-menu" role="menu">
							         <li><a href="javascript:void(0);" id="liObj0" onclick="changeVal(0)">全部</a></li>
							          <li><a href="javascript:void(0);" id="liObj1" onclick="changeVal(1)">原料</a></li>
							          <li><a href="javascript:void(0);" id="liObj2" onclick="changeVal(2)">半成品</a></li>
							          <li><a href="javascript:void(0);" id="liObj3" onclick="changeVal(3)">成品</a></li>
							        </ul>
							      </div>
							      <div class="public-search">
							        <span class="octicon-search02"></span>
							        
							        <h:inputText id="storageName" onfocus="objFocus(this)" onblur="objBlur(this)" styleClass="form-control srarchfont" value="#{storageChangeFormListFour.storageName}"/>
                                	<input type="hidden" value="#{storageChangeFormListFour.goodsTypeInfo}" id="goodsTypeInfo" name="goodsTypeInfo"/>
							      </div>
							      <h:commandButton id="search" styleClass="btn btn-primary" value="搜索" action="/materialsall/StorageChangeFormList.xhtml">                                	
	                                </h:commandButton>
							    </div>
							</div>
                                </td>
                           </tr>
                       </table>                          
                    </div>
                    </h:form>
   		<!-- Modal -->
<div aria-hidden="false" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="myModal" class="modal fade in w600na" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">提示框</h4>
      </div>
      <div class="modal-body">
        <h:form id="productform" enctype="multipart/form-data">
       <!-- #{aliasesHome.works()} -->
               	
               
       </h:form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
        <button type="button" class="btn btn-primary" data-dismiss="modal">确认</button>
      </div>
    </div>
  </div>
</div>
					<!--商品分类开始-->
                    <div class="tree_dis">
                     
                        <div class="box2">
                        	<!--全部开始-->
                        	  <table width="100%" cellpadding="0" cellspacing="0" class="tr_ls" style="border-top:1px solid #ddd;">
                                    <tr>
                                        <td class="trls_th" width="11%">库房名称</td>
                                        <td class="trls_th" width="11%">品名</td>
                                        <td class="trls_th" width="13%">生产日期</td>
                                        <td class="trls_th" width="13%">保质期</td>
                                        <td class="trls_th" width="13%">单价</td>
                                        <td class="trls_th" width="11%">出入库数量</td>
                                         <td class="trls_th" width="10%">规格</td>
                                        <td class="trls_th" width="10%">金额</td>
                                        <td class="trls_th" width="8%">操作</td>
                                    </tr>
                                </table>
                        	<!--第一个table开始-->
                        		<a4j:repeat value="#{storageChangeFormListFour.resultList}" var="_obj" rowKeyVar="_index">
                                	<table width="100%" cellpadding="0" cellspacing="0" class="tr_lsm">
	                                    <tr class="nottt">
	                                    
	                                        <td height="48" colspan="8" style="border-bottom:1px solid #ddd; border-right:1px solid #ddd;">
	                                            <span class="tr_span" style="width: 20%;text-align: center;"><font color="#71aae1">凭证号：</font><font color="#717171">#{_obj.name}</font></span>
	                                            <span class="tr_span" style="width: 10%;"><font color="#71aae1">类型：</font><font color="#717171">#{_obj.storageChangeTypeId.name}</font></span>
	                                            <span class="tr_span" style="width: 15%;"><font color="#71aae1">时间：</font><font color="#717171"><h:outputText value="#{_obj.createTime}"><s:convertDateTime type="both" dateStyle="short" pattern="yyyy-MM-dd " /></h:outputText></font></span>
	                                            <span class="tr_span" style="width: 18%;"><font color="#71aae1">经手人：</font><font color="#717171">#{_obj.operater}</font></span>
	                                            <span class="tr_span" style="width: 16%;"><font color="#71aae1">库房：</font><font color="#717171">#{collectionsUtil.toList2(_obj.goodsPalletChangeRecords)}</font></span>
	                                            <span class="tr_span" style="width: 11%;"><font color="#71aae1">金额：</font><font color="#717171">#{collectionsUtil.toList(_obj.goodsPalletChangeRecords)} 元</font></span>
	                                        </td>
	                                        <td width="8%" align="center">
	                                            <s:link propagation="none"  view="/materialsall/StorageChangeForm.xhtml" styleClass="list_view" title="查看"  id="View">
												<f:param name="storageChangeFormStorageChangeFormId" value="#{_obj.storageChangeFormId}" />
												</s:link>&#160;
				                                <s:link propagation="none"  view="/materialsall/StorageChangeFormEdit.xhtml" styleClass="list_edit" id="Edit" title="编辑" >
				                                <f:param name="storageChangeFormStorageChangeFormId" value="#{_obj.storageChangeFormId}" />
												</s:link>&#160;
												<s:link propagation="none"  view="/materialsall/StorageChangeFormEdit.xhtml" styleClass="list_delete" action="#{storageChangeFormHome.remove}" title="删除" onclick="return confirm('确定删除吗？');" id="Delete" >
				                                <f:param name="storageChangeFormStorageChangeFormId" value="#{_obj.storageChangeFormId}" />
				                                </s:link>
	                                        </td>
	                                    </tr>
	                                    <a4j:repeat value="#{collectionsUtil.toList3(_obj.goodsPalletChangeRecords)}" var="_var"  rowKeyVar="_index">
		                                    <tr>
		                                        <td class="trls_td" width="11%">
		                                        <h:outputText value="#{_var.storageRoomId.name}" rendered="#{_var.storageRoomId!=null}"/>
                                        		<h:outputText value="#{_var.palletId.storageGoodsShelf.storageArea.storageRoom.name}" rendered="#{_var.palletId!=null}"/>
		                                        </td>
		                                        <td class="trls_td" width="11%">#{_var.goodsBatchId.goodsInfoId.name}</td>
		                                        <td class="trls_td" width="13%"><h:outputText value="#{_var.goodsBatchId.produceDate}"><s:convertDateTime type="both" dateStyle="short" pattern="yyyy-MM-dd " /> </h:outputText></td>
		                                        <td class="trls_td" width="13%">#{_var.goodsBatchId.expirationDate}天</td>
		                                        <td class="trls_td" width="13%">#{_var.goodsPrice} 元</td>
		                                        <td class="trls_td" width="11%">#{_var.goodsNum}   </td>
		                                        <td class="trls_td" width="10%">#{_var.goodsBatchId.goodsInfoId.goodsSpec}</td>
		                                        <td class="trls_td" width="10%">#{_var.goodsPrice * _var.goodsNum} 元</td>
		                                        <td class="trls_td" width="8%">
	                                             	<s:link propagation="none"  view="/materialsall/StorageChangeFormInfo.xhtml" styleClass="list_view" title="查看"  id="View">
													<f:param name="goodsPalletChangeRecordGoodsPalletChangeRecord" value="#{_var.goodsPalletChangeRecord}" />
													</s:link>&#160;
		                                        </td>
		                                    </tr>
	                                    </a4j:repeat>
	                             	</table>
	                            </a4j:repeat>
                                <!--第一个table结束-->
                        	 <!--翻页开始-->
		                    <table style="height:30px; margin:40px auto 0 auto;" cellpadding="0" cellspacing="0">
		                    	<tr>
					                <s:decorate rendered="#{!storageChangeFormListFour.previousExists }">
					                <td><img src="#{request.contextPath}/asset/images/page_68.jpg" width="4" height="30" /></td>
					                </s:decorate>
					                 <s:decorate rendered="#{storageChangeFormListFour.previousExists }">
					                <td><img src="#{request.contextPath}/asset/images/page_67.jpg" width="4" height="30" /></td>
					                </s:decorate>
					                <s:decorate rendered="#{storageChangeFormListFour.previousExists }">
			                            <td class="td_t_b">
				                            <s:link propagation="none"  view="/materialsall/StorageChangeFormList.xhtml" >首页
				                            	<f:param name="pageNum" value="0" />
				                            </s:link>
			                            </td>
			                            <td class="td_t_b td_t_t" style="padding:0; width:30px;">
				                            <s:link propagation="none"  view="/materialsall/StorageChangeFormList.xhtml"  styleClass="no_n" >
				                            	<f:param name="pageNum" value="#{storageChangeFormListFour.previousFirstResult}"/>&lt;
				                            </s:link>
			                            </td>
			                        </s:decorate>
							       <a4j:repeat var="_page" value="#{storageChangeFormListFour.pageList}" rowKeyVar="_index">
										<td class="td_t_b #{storageChangeFormListFour.previousExists or _index >0 ?'td_t_t':''} #{_page eq storageChangeFormListFour.pageNum?'onp':''}">
											<s:link propagation="none"  view="/materialsall/StorageChangeFormList.xhtml" value="#{_page}" id="previousPage">
												<f:param name="pageNum" value="#{_page}" />
											</s:link>
										</td>
									</a4j:repeat>
									<s:decorate rendered="#{storageChangeFormListFour.nextExists}">
		                            <td class="td_t_b td_t_t">
			                            <s:link propagation="none"  view="/materialsall/StorageChangeFormList.xhtml"   styleClass="no_d" >
			                            	<f:param name="pageNum" value="#{storageChangeFormListFour.nextFirstResult}" />&gt;
			                            </s:link>
		                            </td>
		                            <td class="td_t_b td_t_t">
										 <s:link propagation="none"  view="/materialsall/StorageChangeFormList.xhtml" >尾页
										 	<f:param name="pageNum" value="#{storageChangeFormListFour.PAGE_COUNT}" />
										 </s:link>
									</td>
									</s:decorate>
									<td class="td_t_b td_t_t" style=" color:#9a9a9c;">共#{storageChangeFormListFour.PAGE_COUNT}页</td>
		                            <td ><img src="#{request.contextPath}/asset/images/page_70.jpg" width="4" height="30" /></td>
		                    	</tr>
		                    </table>
		                    <!--翻页结束-->
                                <!--叶类结束-->    
                        <div class="clear"></div>
                        </div>
                    	<div class="clear"></div>
                    </div>

					<!--商品分类结束-->
                    <div class="clear"></div>
                </div><!--right_c结束-->
                <script type="text/javascript">
op = function(ind){
	if(ind.getAttribute("aa")=="1"){
		jquery(".gjs").show("fast");
		jquery(".gjss_a").attr("aa",2);
	}else{
		jquery(".gjs").hide("fast");
		jquery(".gjss_a").attr("aa",1);
	}
}
                
se = function(obj){
	jquery(".sel").each(function(){
		jquery(this).removeClass("current");
	});
	jquery("#sel"+obj).addClass("current");

	jquery(".box2 > div").each(function(index,domEle){
		if(index==obj){
			jquery(domEle).css("display","block");
		}else{
			jquery(domEle).css("display","none");
		}
	});
}

jquery(document).ready(function(){  //这个就是传说的ready
    jquery(".tr_lsm tr").not(".nottt").mouseover(function(){  
            //如果鼠标移到class为stripe的表格的tr上时，执行函数
    jquery(this).addClass("over");})
        jquery(".tr_lsm tr").not(".nottt").mouseout(function(){                       //给这行添加class值为over，并且当鼠标一出该行时执行函数
    jquery(this).removeClass("over");})  //移除该行的class

    var rpObj = "#{storageChangeFormListFour.goodsTypeInfo}";
	  if(rpObj == ""){
		  document.getElementById("rpType").innerHTML  = "全部角色";
	  }else{
		  var valObj = document.getElementById("liObj"+rpObj).text;
		  document.getElementById("rpType").innerHTML  = valObj;
	  }
		var v = document.getElementById("goodsInfoSearch:storageName").value;
		if(v == ""){
			document.getElementById("goodsInfoSearch:storageName").value = "请输入搜索条件";
			}
});

function changeVal(obj){
	  document.getElementById("goodsTypeInfo").value = obj;
	  var valObj = document.getElementById("liObj"+obj).text;
	  document.getElementById("rpType").innerHTML  = valObj;
	  }

</script>
            </td>
</ui:define>
	</ui:composition>


<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	template="#{sessionTake.loginStep==6?'/layout/template.xhtml':'/layout/template_custom.xhtml'}">

	<ui:define name="body">
            <!--右边开始-->
            <td valign="top" width="195" style=" border-right:1px solid #e1e4eb;">
                <div style="width:165px; text-align:center; margin-top:35px;">
                	<img src="#{request.contextPath}/asset/images/new_032.jpg" width="80" height="739" />
                </div>
            </td>
            <td valign="top">
            		<h:form id="tunnelInfoForm" enctype="multipart/form-data">
            		<rich:modalPanel id="products" autosized="true" height="125"
				width="240" headerClass="modalHeader">
				<div class="ts_div2" id="div2">
				<div class="tck_ti"><a href="#"> <h:outputLink value="#"
					onclick="#{rich:component('products')}.hide(); return false;">
					<img src="#{request.contextPath}/asset/images/close_17.jpg"
						width="20" height="20" onclick="return closeMethod()" />
				</h:outputLink> </a></div>

				<table
					style="width: 100%; margin-top: 25px; table-layout: fixed; margin-left: 15px;">
					<tr>
						<td width="46" align="left"><img
							src="#{request.contextPath}/asset/images/tstc.jpg" width="46"
							height="46" /></td>
						<td align="left"
							style="font-family: '宋体'; color: #000000; font-size: 12px; padding-left: 15px;">
						<span id="productMsg">*号部分为必填项！</span></td>
					</tr>
				</table>
				</div>
			</rich:modalPanel>
			<!-- #{tunnelInfoHome.getFarmerMethod()} -->
                <div class="right_c">
                	<div class="r_title">
                    	<div class="r_t_l"><font size="4">大棚信息</font></div>
                    </div>
				<!--入库订单列表开始-->
                	<div class="all_d3">
                    	<div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">温室名称：</td>
                                    <td>
                                       <h:inputText id="tunnelName" styleClass="r_c_text_new" value="#{tunnelInfoHome.instance.tunnelName}"  />
                                    <font color="#FF0000">*</font>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    	<div class="all_da all_w01">
                        	<table>
                            	<tr>
                                	<td class="all_te">单元名称：</td>
                                    <td><h:inputText class="r_c_text" value="#{tunnelInfoHome.instance.tunnelChildName}" /></td>
                            	</tr>
                            </table>
                        </div>
                        <div class="all_da all_w01" >
                        	<table>
                                <tr>
                                    <td class="all_te">农场监督：</td>
                                    <td>
                                    	<h:selectOneMenu  id="masterInfo"  style="width:150px;" value="#{tunnelInfoHome.instance.masterInfo}">
											<s:selectItems value="#{tunnelInfoHome.masterListTwo}" var="obj" label="#{obj.name}"/>
											<s:convertEntity />
										</h:selectOneMenu>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    	<div class="all_da all_w01">
                        	<table>
                            	<tr>
                                	<td class="all_te">农场管家：</td>
                                    <td>
                                    	<h:selectOneMenu  style="width:150px;" value="#{tunnelInfoHome.instance.keeperInfo}">
											<s:selectItems value="#{tunnelInfoHome.keeperListTwo}" var="obj"   label="#{obj.name}"/>
											<s:convertEntity />
										</h:selectOneMenu>
                                   </td>
                            	</tr>
                            </table>
                        </div>
                    	<div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">经度：</td>
                                    <td>
                                        <h:inputText id="longitude" value="#{tunnelInfoHome.instance.longitude}"	styleClass="r_c_text_date" />°
                                    </td>
                                </tr>
                            </table>
                        </div>
                    	<div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">纬度：</td>
                                    <td>
                                     <h:inputText id="latitude"  value="#{tunnelInfoHome.instance.latitude}" styleClass="r_c_text_date" />°
                                    </td>
                                </tr>
                            </table>
                        </div>
                    	<div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">基地名称：</td>
                                    <td align="left">
                                    <h:inputText id="address"  value="#{tunnelInfoHome.instance.address}"	styleClass="r_c_text" />
                                    </td>
                                </tr>
                            </table>
                        </div>
                    	<div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">面积：</td>
                                    <td align="left"><h:inputText id="userEmail"  value="#{tunnelInfoHome.instance.area}"	styleClass="r_c_text_date" />㎡</td>
                                </tr>
                            </table>
                        </div>
                    	<div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">图片：</td>
                                    <td align="left">
                                       <s:fileUpload id="imgIphoneUrl" size="40" accept="image/png,image/jpeg,image/gif" contentType="image/png,image/jpeg,image/gif" fileName="#{tunnelInfoHome.instance.pictureName}"
											data="#{tunnelInfoHome.instance.picture}">
											</s:fileUpload>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    	<div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">描述：</td>
                                    <td>
                                         <h:inputText id="desc"    value="#{tunnelInfoHome.instance.description}" styleClass="r_c_text" />
                                    </td>
                                </tr>
                            </table>
                        </div>
                        
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">气候：</td>
                                    <td>
                                    <h:inputText id="wea"  value="#{tunnelInfoHome.instance.weather}" styleClass="r_c_text" />
                                    </td>
                                 </tr>
                            </table>
                        </div>
                        
                        
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">水源：</td>
                                    <td>
                                    <h:inputText id="water" value="#{tunnelInfoHome.instance.water}" styleClass="r_c_text" />
                                    </td>
                                 </tr>
                            </table>
                        </div>
                        
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">风向：</td>
                                    <td>
                                    <h:inputText id="wind" value="#{tunnelInfoHome.instance.wind}" styleClass="r_c_text" />
                                    </td>
                                 </tr>
                            </table>
                        </div>
                        
                        <div class="all_da all_w01">
                        	<table>
                                <tr>
                                    <td class="all_te">土壤：</td>
                                    <td>
                                    <h:inputText id="soil" value="#{tunnelInfoHome.instance.soil}" styleClass="r_c_text" />
                                    </td>
                                 </tr>
                            </table>
                        </div>
                        
                        <div class="all_da all_w01" style="width:724px;">
                        	<table>
                                <tr>
                                    <td class="all_te">光照：</td>
                                    <td>
                                        <h:inputTextarea id="illumination" value="#{tunnelInfoHome.instance.illumination}" styleClass="big" /> 
                                    </td>
                                </tr>
                            </table>
                        </div>
                        
                       
                        
                         <div class="all_da all_w01" style="width:724px;">
                        	<table>
                                <tr>
                                    <td class="all_te">土壤历史：</td>
                                    <td>
                                    <h:inputTextarea id="soilHistory"  value="#{tunnelInfoHome.instance.soilHistory}" styleClass="big" />
                                    </td>
                                 </tr>
                            </table>
                        </div>
                        
                        
                        <div class="all_da all_w01" style="width:724px;">
                        	<table>
                                <tr>
                                    <td class="all_te">土壤酸碱度：</td>
                                    <td>
                                    <h:inputTextarea id="soilPh" value="#{tunnelInfoHome.instance.soilPh}" styleClass="big" />
                                    </td>
                                 </tr>
                            </table>
                        </div>
                        
                        <div class="all_da all_w01" style="width:724px;">
                        	<table>
                                <tr>
                                    <td class="all_te">如何生产：</td>
                                    <td>
                                    <h:inputTextarea id="how"   value="#{tunnelInfoHome.instance.how}" styleClass="big" />
                                    </td>
                                 </tr>
                            </table>
                        </div>
                        
                        <div class="clear"></div>
                   </div>
                        <table width="180" style="margin:35px auto 0 auto;">
						 <tr>
						   <td>
		    			    <s:button view="/custom/Third.xhtml" styleClass="edit_back_big" id="bn_left6" />
                           </td>
						   <td>
						     <h:commandButton id="persist"  styleClass="edit_save_big" action="#{tunnelInfoHome.persist}" rendered="#{!tunnelInfoHome.managed}"  onclick="return checkSubmit()"/>
		            	     <h:commandButton id="update"  styleClass="edit_save_big" action="#{tunnelInfoHome.update}" rendered="#{tunnelInfoHome.managed}"   onclick="return checkSubmit()"/>
		    			   </td>
						 </tr>
                       </table>
                        <div class="clear"></div>

				<!--入库订单列表结束-->
                    <div class="clear"></div>
                </div><!--right_c结束-->
                <div class="clear"></div>
    <!--右边结束-->
    <style>
    .rich-calendar-button{
     margin-left:-8px
    }
    </style>
    </h:form>

<script type="text/javascript" src="#{request.contextPath}/asset/js/form/superfish.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/supersubs.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/hoverIntent.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.flot.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery-ui.js"></script>

<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery-ui-select.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/customInput.jquery.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.dataTables.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.fancybox-1.3.4.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.filestyle.mini.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery-ui-timepicker-addon.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.treeview.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.tipsy.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.wysiwyg.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/inline.js"></script>
<script type="text/javascript">

//<![CDATA[	

	function checkSubmit(){
		   var tunnelName = document.getElementById("tunnelInfoForm:tunnelName").value; //温室名称
		   var longitude = document.getElementById("tunnelInfoForm:longitude").value;
		   var latitude = document.getElementById("tunnelInfoForm:latitude").value;
		   var userEmail = document.getElementById("tunnelInfoForm:userEmail").value;
			var regNum = /^[1-9]+[0-9]*]*$/; 
			var regDNum = /^[+|-]?\d*\.?\d*$/;
		   if(tunnelName == ""){
				document.getElementById("productMsg").innerHTML = "请输入温室名称";
				#{rich:component('products')}.show();
				return false;
			}
			if(longitude == ""){
				document.getElementById("tunnelInfoForm:longitude").value = "0"
			}else if(!regDNum.test(longitude)){
				document.getElementById("productMsg").innerHTML = "请输入数字或带小数点的数字";
				#{rich:component('products')}.show();
				return false;
			}
			if(latitude == ""){
				document.getElementById("tunnelInfoForm:latitude").value = "0";
			}else if(!regDNum.test(latitude)){
				document.getElementById("productMsg").innerHTML = "请输入数字或带小数点的数字";
				#{rich:component('products')}.show();
				return false;
			}
			if(userEmail == ""){
				document.getElementById("tunnelInfoForm:userEmail").value = "0";
			}else if(!regDNum.test(userEmail)){
				document.getElementById("productMsg").innerHTML = "请输入数字或带小数点的数字";
				#{rich:component('products')}.show();
				return false;
			}
		  
	}
	
	function closeMethod(){
		var tunnelName = document.getElementById("tunnelInfoForm:tunnelName").value; //温室名称
		 var longitude = document.getElementById("tunnelInfoForm:longitude").value;
		   var latitude = document.getElementById("tunnelInfoForm:latitude").value;
		   var userEmail = document.getElementById("tunnelInfoForm:userEmail").value;
		   var regNum = /^[1-9]+[0-9]*]*$/; 
			var regDNum = /^[+|-]?\d*\.?\d*$/;
		   if(tunnelName == ""){
			   document.getElementById("tunnelInfoForm:tunnelName").focus();
			   return false;
			}
		   if(!regDNum.test(longitude)){
			   document.getElementById("tunnelInfoForm:longitude").focus();
			   return false;
			}
			if(!regDNum.test(latitude)){
				 document.getElementById("tunnelInfoForm:latitude").focus();
				   return false;
			}
			if(!regDNum.test(userEmail)){
				document.getElementById("tunnelInfoForm:userEmail").focus();
				   return false;
			}
	}
	//]]>
</script>
<style>
	  .ts_div2{width:240px; height: 125px; border: 1px solid #81C5E9; margin: 0px auto; padding: 0 15px 15px;  background: url(#{request.contextPath}/asset/images/tck_bg_14.jpg) #ffffff repeat-x scroll center top;}
	  .dr-mpnl-shadow{background:none;}
	  .dr-mpnl-pnl{background:none; border:none;}
	  .dr-mpnl-pnl-b{padding:0;}
	  .dr-mpnl-shadow{top:0; left:0;}
	  .rich-picklist-source-items{margin:0;}
	  .ui-selectmenu{*float:left;}
	</style>
            </td> 
	</ui:define>

</ui:composition>

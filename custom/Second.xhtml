<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	template="#{sessionTake.loginStep==6?'/layout/template.xhtml':'/layout/template_custom.xhtml'}">

	<ui:define name="body">
	<td valign="top" width="195" style=" border-right:1px solid #e1e4eb;">
                <div style="width:165px; text-align:center; margin-top:35px;">
                	<img src="#{request.contextPath}/asset/images/new_031.jpg" width="80" height="739" />
                </div>
            </td>
       <td valign="top" >
		<div class="right_c">
                	<div class="r_title">
                    	<div class="r_t_l"><font size="4">人员信息</font></div>
                    </div>
					<br/>
                    <div class="z_r_ser">
                    </div>
                     <!--添加按钮开始-->
                    <div class="tjan_01">
                    	<s:link view="/custom/SecondEdit.xhtml" propagation="none"><f:param name="farmerInfoFarmerInfoId" />
                    	<img src="#{request.contextPath}/asset/images/tj_03.jpg" width="44" height="30" /></s:link>
                    </div>
                    <!--添加按钮结束-->
                    <table width="100%" class="ze_table" cellpadding="0" cellspacing="0">
                    	<tr>
                    		<td width="5" height="4"><img src="#{request.contextPath}/asset/images/table_d_40.jpg" width="5" height="4" /></td>
                    		<td colspan="6" style="border-top:1px solid #e1e1e1; background:#f0f5fb;"></td>
                            <td width="5" height="4"><img src="#{request.contextPath}/asset/images/table_d_43.jpg" width="5" height="4" /></td>
                    	</tr>
                    	<tr>
                    		<th class="ze_bg ze_bt_le" width="5" height="4"></th>
                            
                    		<th class="ze_bg" width="25%">名称</th>
                    		<th class="ze_bg" width="15%">农户类型</th>
                    		<th class="ze_bg" width="12%">年龄</th>
                    		<th class="ze_bg" width="13%">从业年限</th>
                    		<th class="ze_bg" width="20%">电话</th>
                    		
                    		<th class="ze_bg" width="15%">操作</th>
                            
                            <th class="ze_bg ze_bt_ri" width="5" height="4"></th>
                    	</tr>
						<ui:repeat value="#{farmerInfoList.getAllFarmer()}" var="_farmerInfo"  rowKeyVar="_index">
                    	<tr>
                    		<td class="ze_bg2 ze_bt_le" width="5" height="4"></td>
                            
                    		<td class="ze_bg2"><h:outputText value="#{stringUtil.shortString(_farmerInfo.name,17)}"/></td>
                    		<td class="ze_bg2"><h:outputText  rendered="#{_farmerInfo.type eq 1}" value="农场管家"/>
                    					<h:outputText  rendered="#{_farmerInfo.type eq 2}" value="农场监督"/>
                    		</td>
                    		<td class="ze_bg2"><s:decorate rendered="#{_farmerInfo.age==null?'false':'true'}"><h:outputText value="#{_farmerInfo.age}"/>岁</s:decorate></td>
                    		<td class="ze_bg2"><s:decorate rendered="#{_farmerInfo.workAge==null?'false':'true'}"><h:outputText value="#{_farmerInfo.workAge}" />年</s:decorate></td>
                    		<td class="ze_bg2"><h:outputText value="#{_farmerInfo.phone}" /></td>
                    		
                    		<td class="ze_bg2">
                            	<s:link propagation="none"  view="/#{empty from ? 'custom/SecondView' : from}.xhtml" styleClass="list_view" title="查看" id="farmerInfoViewId">
								<f:param name="farmerInfoFarmerInfoId" value="#{_farmerInfo.farmerInfoId}" />
								</s:link>&#160;
                                <s:link propagation="none"  view="/custom/SecondEdit.xhtml"   styleClass="list_edit" id="farmerInfoEdit"  title="编辑" rendered="#{empty from}">
                                <f:param name="farmerInfoFarmerInfoId" value="#{_farmerInfo.farmerInfoId}" />
								</s:link>&#160;
								<s:link propagation="none"  view="/custom/SecondEdit.xhtml"  styleClass="list_delete" action="#{farmerInfoHome.remove}" title="删除" onclick="return confirm('确定删除吗？');" id="farmerInfoDelete" rendered="#{empty from}">
                                <f:param name="farmerInfoFarmerInfoId" value="#{_farmerInfo.farmerInfoId}" />
                                </s:link>
                            </td>
                            
                            <td class="ze_bg2 ze_bt_ri" width="5" height="4">
                            </td>
                    	</tr>
                    	</ui:repeat>
                    </table>
                     <table width="180" style="margin:35px auto 0 auto;">
						<tr>
							<td>
							<s:button id="next"  view="/custom/First.xhtml"  style="width:126px; height:36px;" image="../asset/images/order/next_27.jpg"/>
							</td>
							<td>
							<h:form id="farmerInfoFrom" >
								 <rich:modalPanel id="products" autosized="true" height="125"
								width="240" headerClass="modalHeader">
								<div class="ts_div2" id="div2">
								<div class="tck_ti"><a href="#"> <h:outputLink value="#"
									onclick="#{rich:component('products')}.hide(); return false;">
									<img src="#{request.contextPath}/asset/images/close_17.jpg"
										width="20" height="20" onclick="return closeMethod()" />
								</h:outputLink> </a></div>
				
								<table
									style="width: 100%; margin-top: 25px; table-layout: fixed; margin-left: 15px;">
									<tr>
										<td width="46" align="left"><img
											src="#{request.contextPath}/asset/images/tstc.jpg" width="46"
											height="46" /></td>
										<td align="left"
											style="font-family: '宋体'; color: #000000; font-size: 12px; padding-left: 15px;">
										<span id="productMsg">*号部分为必填项！</span></td>
									</tr>
								</table>
								</div>
							</rich:modalPanel>
						    	<a4j:commandLink id="farmerCount" action="#{farmerInfoHome.findFarmerCount}" data="#{farmerInfoHome.farmerCount}" oncomplete="getFarmerCheck(data)" >
									<img src="../asset/images/order/next_29.jpg" />
								</a4j:commandLink>
					    	</h:form>
                            </td>
						</tr>
                   </table> 
                    <!--翻页开始-->
                    <!--翻页结束-->
                    <div class="clear"></div>
                </div><!--right_c结束-->
                
<a4j:form>
	<a4j:jsFunction name="updateNext" action="#{farmerInfoHome.update2()}" oncomplete="goToNext()">
		
	</a4j:jsFunction>
</a4j:form>
<script type="text/javascript" language="javascript"><!--
//<![CDATA[
           
    
  	//获得农户管家 
    function getFarmerCheck(data){
        var str = data.split(",");
        if(str[0]==0){//农场管家
        	document.getElementById("productMsg").innerHTML = "至少有一位农场管家!";
			#{rich:component('products')}.show();
			return false;
        }
        if(str[1]==0){//农场监督
        	document.getElementById("productMsg").innerHTML = "至少有一位农场监督!";
			#{rich:component('products')}.show();
			return false;
        }
		updateNext();
		
    }

    function goToNext(){
    	window.location.href = "#{request.contextPath}/custom/Third.seam";
    }
   
	
	
//]]>
-->
</script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/superfish.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/supersubs.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/hoverIntent.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.flot.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery-ui.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery-ui-select.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/customInput.jquery.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.dataTables.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.fancybox-1.3.4.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.filestyle.mini.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery-ui-timepicker-addon.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.treeview.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.tipsy.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/jquery.wysiwyg.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/form/inline.js"></script>
	<style>
	  .ts_div2{width:240px; height: 125px; border: 1px solid #81C5E9; margin: 0px auto; padding: 0 15px 15px;  background: url(#{request.contextPath}/asset/images/tck_bg_14.jpg) #ffffff repeat-x scroll center top;}
	  .dr-mpnl-shadow{background:none;}
	  .dr-mpnl-pnl{background:none; border:none;}
	  .dr-mpnl-pnl-b{padding:0;}
	  .dr-mpnl-shadow{top:0; left:0;}
	  .rich-picklist-source-items{margin:0;}
	  .ui-selectmenu{*float:left;}
	</style>
</td>
	</ui:define>

</ui:composition>

<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	template="#{sessionTake.loginStep==6?'/layout/template.xhtml':'/layout/template_custom.xhtml'}">

	<ui:define name="body">
	<td valign="top" width="195" style=" border-right:1px solid #e1e4eb;">
                <div style="width:165px; text-align:center; margin-top:35px;">
                	<img src="#{request.contextPath}/asset/images/new_032.jpg" width="80" height="739" />
                </div>
            </td>
       <td valign="top" >
       <style>
		.ts_div2{width:240px; height: 125px; border: 1px solid #81C5E9; margin: 0px auto; padding: 0 15px 15px;  background: url(#{request.contextPath}/asset/images/tck_bg_14.jpg) #ffffff repeat-x scroll center top;}
		.dr-mpnl-shadow{background:none;}
		.dr-mpnl-pnl{background:none; border:none;}
		.dr-mpnl-pnl-b{padding:0;}
		.dr-mpnl-shadow{top:0; left:0;}
		.rich-picklist-source-items{margin:0;}
		</style>
		 <rich:modalPanel id="products" autosized="true" height="125" width="240" headerClass="modalHeader" >
                    	<div class="ts_div2" id="div2">
        		<div class="tck_ti"><a href="#">
        			<h:outputLink value="#"  onclick="#{rich:component('products')}.hide(); return false;">
                    <img src="#{request.contextPath}/asset/images/close_17.jpg" width="20" height="20" onclick="return closeMethod()"/>
                </h:outputLink>
        		</a></div>
        	 
				<table style="width:100%; margin-top:25px; table-layout:fixed; margin-left:15px;">
                    <tr>
                    	<td width="46" align="left"><img src="#{request.contextPath}/asset/images/tstc.jpg" width="46" height="46" /></td>
                        <td align="left" style="font-family:'宋体'; color:#000000; font-size:12px; padding-left:15px;">
                        	<span id="spanValue"></span>
                        </td>
                    </tr>
                </table>
                </div>
                </rich:modalPanel>
		<div class="right_c">
                	<div class="r_title">
                    	<div class="r_t_l"><font size="4">区域信息</font></div>
                    </div>
					<br/>
                     <!--添加按钮开始-->
                    <div class="tjan_02" style="margin-top: 0;">
                    	<s:link view="/custom/ThirdEdit.xhtml" propagation="none" title="添加大棚"><f:param name="tunnelInfoTunnelInfoId" />
                    	<img src="#{request.contextPath}/asset/images/tj_03.jpg" width="44" height="30" /></s:link>
                    	<s:link view="/custom/ThirdBatch.xhtml" propagation="none" title="批量添加大棚"><f:param name="tunnelInfoTunnelInfoId" />
                    	<img src="#{request.contextPath}/asset/images/add_batch.jpg" width="56" height="30" /></s:link>
                    </div>
                    <!--添加按钮结束-->
                    <table width="100%" class="ze_table" cellpadding="0" cellspacing="0">
                    	<tr>
                    		<td width="5" height="4"><img src="#{request.contextPath}/asset/images/table_d_40.jpg" width="5" height="4" /></td>
                    		<td colspan="7" style="border-top:1px solid #e1e1e1; background:#f0f5fb;"></td>
                            <td width="5" height="4"><img src="#{request.contextPath}/asset/images/table_d_43.jpg" width="5" height="4" /></td>
                    	</tr>
                    	<tr>
                    		<th class="ze_bg ze_bt_le" width="5" height="4"></th>
                    		<th class="ze_bg" width="5%"><input type="checkbox" id="th"  onclick="checkAll('td',this)"/></th>
                    		<th class="ze_bg" width="15%">大棚名称</th>
                    		<th class="ze_bg" width="20%">单元名称</th>
                    		<th class="ze_bg" width="15%">面积</th>
                    		<th class="ze_bg" width="15%">经度</th>
                    		<th class="ze_bg" width="15%">纬度</th>
                    		<th class="ze_bg" width="15%">操作</th>
                            <th class="ze_bg ze_bt_ri" width="5" height="4"></th>
                    	</tr>
						<ui:repeat value="#{tunnelInfoList.getAllTunnel()}" var="_tunnelInfo" rowKeyVar="_index">
                    	<tr>
                    		<td class="ze_bg2 ze_bt_le" width="5" height="4"></td>
                    		<td class="ze_bg2"><input type="checkbox" aa="#{tunnelInfoList.map[_tunnelInfo.tunnelInfoId]}" name="td" id="td" value="#{_tunnelInfo.tunnelInfoId}"/></td>
                    		<td class="ze_bg2"><h:outputText value="#{_tunnelInfo.tunnelName}"/></td>
                    		<td class="ze_bg2"><h:outputText value="#{_tunnelInfo.tunnelChildName}"/></td>
                    		<td class="ze_bg2"><h:outputText value="#{_tunnelInfo.area}" />㎡</td>
                    		<td class="ze_bg2"><h:outputText value="#{_tunnelInfo.longitude}" />°</td>
                    		<td class="ze_bg2"><h:outputText value="#{_tunnelInfo.latitude}" />°</td>
                    		<td class="ze_bg2">
                            	<s:link propagation="none"  view="/#{empty from ? 'custom/ThirdView' : from}.xhtml" styleClass="list_view"  id="tunnelInfoViewId" title="查看">
								<f:param name="tunnelInfoTunnelInfoId" value="#{_tunnelInfo.tunnelInfoId}" />
								</s:link>&#160;
                                <s:link propagation="none"  view="/custom/ThirdEdit.xhtml"     styleClass="list_edit" id="tunnelInfoEdit" rendered="#{empty from}" title="编辑">
                                <f:param name="tunnelInfoTunnelInfoId" value="#{_tunnelInfo.tunnelInfoId}" />
								</s:link>&#160;
								<s:link propagation="none"  view="/custom/ThirdEdit.xhtml"  title="删除" styleClass="list_delete" action="#{tunnelInfoHome.remove}" onclick="return confirm('确定删除吗？');" id="tunnelInfoDelete" rendered="#{empty from}">
                                <f:param name="tunnelInfoTunnelInfoId" value="#{_tunnelInfo.tunnelInfoId}" />
                                </s:link>
                            </td>
                            
                            <td class="ze_bg2 ze_bt_ri" width="5" height="4"></td>
                    	</tr>
                    	</ui:repeat>
                    </table>
                    <!--翻页开始-->
                    <table width="180" style="margin:35px auto 0 auto;">
						<tr>
							<td>
							<s:button id="next"  view="/custom/Second.xhtml"  style="width:126px; height:36px;" image="../asset/images/order/next_27.jpg"/>
							</td>
							<td>
			                    <img onclick="del('#{request.contextPath}/custom/Fourth.seam?x=2')" src="../asset/images/order/next_29.jpg" width="126px" height="36px" style="cursor:pointer"></img>
                            </td>
                            
						</tr>
                   </table> 
                   
                    <!--翻页结束-->
                    <div class="clear"></div>
                    <h:form id="formx1" style="display:none">
                    <h:inputHidden value="#{realPlantHome.checked}" id="checked"/>
                    <h:commandButton action="/custom/Fourth.seam?x=2" value="tijiao" style="display:none" id="subm"/>
                    </h:form>
                </div><!--right_c结束-->
		<script type="text/javascript">
//<![CDATA[
		 jquery(document).ready(function(){
	          	jquery("input[type='checkbox']").each(function(){
					if(jquery(this).attr("aa")=="checked"){
						jquery(this).attr("checked",true);
					}
	          	});
	      });
		
		function checkAll (name,obj){
			jquery("input[name='"+name+"']").attr("checked",jquery(obj).attr("checked"));
		}
	     //删除
	       function del (url){
	       	var str = "";
	       	jquery("input[name='td']:checked").each(function(){
	       		str+=this.value+",";			
	       	});
	       	if(#{tunnelInfoList.getAllTunnel().size()} == 0){
	       		document.getElementById("spanValue").innerHTML = "请先添加大棚";
	     		   #{rich:component('products')}.show();return false;
	       	}
	       	if(str==""){
	       		document.getElementById("spanValue").innerHTML = "请先选择大棚";
     		   #{rich:component('products')}.show();return false;
	       	}
	       	document.getElementById("formx1:checked").value=str;
	       	jquery("#formx1\\:subm").trigger("click");;
	       }
	     //]]>
		</script>
</td>
	</ui:define>

</ui:composition>

<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	template="/layout/template_new.xhtml">
	<ui:define name="body">
	<link type="text/css" rel="stylesheet" href="#{request.contextPath}/asset/css/archive/gorder.css" />
	<link rel="stylesheet" type="text/css" href="#{request.contextPath}/asset/css/FarmingManage1.css"/>
	<link rel="stylesheet" type="text/css" href="#{request.contextPath}/asset/css/archive/launch.css"/>
	<link type="text/css" rel="stylesheet" href="#{request.contextPath}/asset/css/agricultural/easyFarm.css" />
	<script src="#{request.contextPath}/asset/js/archive/jquery.galleryview-1.1.js"></script>
	<script src="#{request.contextPath}/asset/js/archive/jquery.timers-1.1.2.js"></script>
	
	<style >
	.farmingInputs_add3{ float:left; width:130px; height:130px;background:url(../asset/images/farmingIco15.jpg) no-repeat; border:none;}
	
	.completePerson_wp{ float:none; display:inline-block;}
	.completePerson_wp > a:hover{ text-decoration:none;}
	.farmingMageTab_jl .farmingInputs{ margin-right:10px; margin-bottom:10px;}
	.farmingMage_pics3 a img{ margin:5px 5px 5px 0;}
	.markb50{display:none;position:absolute;left:0;top:0;z-index:21;width:100%;height:100%;background:#000;opacity:0.5;filter:alpha(opacity=50);}
	.modal-open .modal {overflow-x: auto;overflow-y: auto;}
	.farmPics {float: left;max-width: 560px;}
	</style>
	<!--鼠标移上去换色js开始-->
<script type="text/javascript">
jquery(document).ready(function(){  //这个就是传说的ready

	jquery(".str_t tr:even").addClass("alt");

                //给class为stripe的表格的偶数行添加class值为alt
	document.getElementById("selectBaseDiv").style.display="none";
    
});
</script>
<!-- #{realPlantHome.work4()}" -->
<!-- #{realPlantHome.work2()}" -->
<!-- #{realPlantHome.initStorageData()}" -->
		<!--右边开始-->
		<td valign="top">
		<div style="background:url(../asset/images/bg_png.png) repeat;width:100%; height:100%; position:absolute; z-index:1684; display:none;" id="login">
			<div id="login2" style="width:60px; height:60px; margin:220px auto 0 auto;"><img src="../asset/images/loginda.gif" /></div>
			<div id="ossfile" style="margin-top:20px;"></div> 
		</div>
		<div class="right_c" style="min-height:800px;">
	<!-- 面包屑 开始 -->
    <div class="r_title clear">
        <div class="r_t_l">
        	<span>数字农场</span>
            <em>&nbsp;>&nbsp;</em>
            <font size="3">种植档案</font>
        </div>
    </div>
    <!-- 面包屑 结束 -->
    <div class="gdh_01"><img src="#{request.contextPath}/asset/images/archive/listbz01.png" />基本信息</div>
    <!-- 表格 开始 -->
	<input type="hidden" id="dataStandard" name="dataStandard" value="#{realPlantHome.instance.plantStandard}"/>
    <s:div rendered="#{realPlantHome.index == 0 }">
	    <table class="mt25 tableModel2" width="100%" cellpadding="0" cellspacing="0">
	    	<tr class="trOdd">
	        	<td class="tdCon1" width="20%">所在大棚</td>
	            <td class="tdTxt1" width="30%">#{realPlantHome.instance.tunnelInfoId.tunnelName}</td>
	            <td class="tdCon1" width="20%">植物类型</td>
	            <td class="tdTxt1 x1" width="30%"></td>
	        </tr>
	        <tr class="trEven">
	        	<td class="tdCon1">作物种类</td>
	            <td class="tdTxt1">#{realPlantHome.instance.breedBreedId.plant.name}</td>
	            <td class="tdCon1">种植品种</td>
	            <td class="tdTxt1">#{realPlantHome.instance.breedBreedId.name}</td>
	        </tr>
	        <tr class="trOdd">
	        	<td class="tdCon1">休耕开始</td>
	            <td class="tdTxt1"> <h:outputText value="#{realPlantHome.instance.plantBeginTime}">
										<s:convertDateTime type="both" dateStyle="short" pattern="yyyy-MM-dd" />
						   			</h:outputText></td>
	            <td class="tdCon1">休耕结束</td>
	            <td class="tdTxt1">
	            <h:outputText value="#{realPlantHome.instance.plantEndTime}">
										<s:convertDateTime type="both" dateStyle="short" pattern="yyyy-MM-dd" />
						   			</h:outputText></td>
	        </tr>
	        <tr class="trEven">
	            <td class="tdCon1">种植面积</td>
	            <td class="tdTxt1" >#{realPlantHome.instance.cropArea}亩</td>
	       </tr>
	    </table>
    </s:div>
    <s:div rendered="#{realPlantHome.index == 1 }">
	    <table class="mt25 tableModel2" width="100%" cellpadding="0" cellspacing="0">
	    	<tr class="trOdd">
	        	<td class="tdCon1" width="20%">所在大棚</td>
	            <td class="tdTxt1" width="30%">#{realPlantHome.instance.tunnelInfoId.tunnelName}</td>
	            <td class="tdCon1" width="20%">植物类型</td>
	            <td class="tdTxt1 x1" width="30%"></td>
	        </tr>
	        <tr class="trEven">
	        	<td class="tdCon1">作物种类</td>
	            <td class="tdTxt1">#{realPlantHome.instance.breedBreedId.plant.name}</td>
	            <td class="tdCon1">种植品种</td>
	            <td class="tdTxt1">#{realPlantHome.instance.breedBreedId.name}</td>
	        </tr>
	        <tr class="trOdd">
	        	<td class="tdCon1">种植时间</td>
	            <td class="tdTxt1">
	            <h:outputText value="#{realPlantHome.instance.plantBeginTime}">
										<s:convertDateTime type="both" dateStyle="short" pattern="yyyy-MM-dd" />
						   			</h:outputText></td>
	            <td class="tdCon1">种植结束</td>
	            <td class="tdTxt1">
	            <h:outputText value="#{realPlantHome.instance.plantEndTime}">
										<s:convertDateTime type="both" dateStyle="short" pattern="yyyy-MM-dd" />
						   			</h:outputText></td>
	        </tr>
	        <tr class="trEven">
	        	<td class="tdCon1">采收开始</td>
	            <td class="tdTxt1">
	             <h:outputText value="#{realPlantHome.htime}">
										<s:convertDateTime type="both" dateStyle="short" pattern="yyyy-MM-dd" />
						   			</h:outputText></td>
	            
	            <td class="tdCon1">种植面积</td>
	            <td class="tdTxt1" >#{realPlantHome.instance.cropArea}亩</td>
	       </tr>
	    </table>
    </s:div>
    <s:div rendered="#{realPlantHome.index == 2 }">
   		<table class="mt25 tableModel2" width="100%" cellpadding="0" cellspacing="0">
	    	<tr class="trOdd">
	        	<td class="tdCon1" width="20%">所在大棚</td>
	            <td class="tdTxt1" width="30%">#{realPlantHome.instance.tunnelInfoId.tunnelName}</td>
	            <td class="tdCon1" width="20%">植物类型</td>
	            <td class="tdTxt1 " width="30%"></td>
	        </tr>
	        <tr class="trEven">
	        	<td class="tdCon1">作物种类</td>
	            <td class="tdTxt1">#{realPlantHome.instance.breedBreedId.plant.name}</td>
	            <td class="tdCon1">种植品种</td>
	            <td class="tdTxt1">#{realPlantHome.instance.breedBreedId.name}</td>
	        </tr>
	        <tr class="trOdd">
	        	<td class="tdCon1">幼苗开始</td>
	            <td class="tdTxt1"><h:outputText value="#{realPlantHome.instance.plantBeginTime}" /></td>
	            <td class="tdCon1">幼苗结束</td>
	            <td class="tdTxt1"><h:outputText value="#{realPlantHome.instance.harvestTime}" /> </td>
	        </tr>
	        <tr class="trEven">
	      		<td class="tdCon1">落叶休眠</td>
	            <td class="tdTxt1" ><h:outputText value="#{realPlantHome.instance.schedulingModelId.valueTime}-#{realPlantHome.instance.schedulingModelId.valueTenDays}" /></td>
	            <td class="tdCon1">采收开始</td>
	            <td class="tdTxt1" ><h:outputText value="#{realPlantHome.instance.schedulingModelId.plantBeginTime}-#{realPlantHome.instance.schedulingModelId.plantBeginTenDays}" /></td>
	       </tr>
	        <tr class="trOdd">
	        	<td class="tdCon1">采收结束</td>
	            <td class="tdTxt1"><h:outputText value="#{realPlantHome.instance.schedulingModelId.plantEndTime}-#{realPlantHome.instance.schedulingModelId.plantEndTenDays}" /></td>
	            <td class="tdCon1">种植结束</td>
	            <td class="tdTxt1"><h:outputText value="#{realPlantHome.instance.plantEndTime}" /></td>
	        </tr>
	        <tr class="trEven">
	      		<td class="tdCon1">种植面积</td>
	            <td class="tdTxt1" >#{realPlantHome.instance.cropArea}亩</td>
	       </tr>
	    </table>
    </s:div>
	<!-- 表格 结束 -->
    
    <!--   地块产量开始   -->
          <div class="gdh_01"><img src="#{request.contextPath}/asset/images/archive/listbz02.png" />地块产量</div>
          
          
          
          <table class="gdh_table" width="100%" border="0" cellspacing="0" cellpadding="0" align="center">
          <tr>
    <td class="gdh_line"><div class="gdh_y"><img src="#{request.contextPath}/asset/images/archive/gdh_yuan.png" /></div></td>
    <td class="gdh_line"><div class="gdh_y"><img src="#{request.contextPath}/asset/images/archive/gdh_yuan.png" /></div></td>
    <td class="gdh_line"><div class="gdh_y"><img src="#{request.contextPath}/asset/images/archive/gdh_yuan.png" /></div></td>
    <td class="gdh_line"><div class="gdh_y"><img src="#{request.contextPath}/asset/images/archive/gdh_yuan.png" /></div></td>
    <td class="gdh_line"><div class="gdh_y"><img src="#{request.contextPath}/asset/images/archive/gdh_yuan.png" /></div></td>
    <td class="gdh_line"><div class="gdh_y"><img src="#{request.contextPath}/asset/images/archive/gdh_yuan.png" /></div></td>
    <td class="gdh_line"><div class="gdh_y"><img src="#{request.contextPath}/asset/images/archive/gdh_yuan.png" /></div></td>
    <td class="gdh_line"><div class="gdh_y"><img src="#{request.contextPath}/asset/images/archive/gdh_yuan.png" /></div></td>
    <td class="gdh_line"><div class="gdh_y"><img src="#{request.contextPath}/asset/images/archive/gdh_yuan.png" /></div></td>
    <td class="gdh_line"><div class="gdh_y"><img src="#{request.contextPath}/asset/images/archive/gdh_yuan.png" /></div></td>
    <td class="gdh_line"><div class="gdh_y"><img src="#{request.contextPath}/asset/images/archive/gdh_yuan.png" /></div></td>
    <td class="gdh_line"><div class="gdh_y"><img src="#{request.contextPath}/asset/images/archive/gdh_yuan.png" /></div></td>
  </tr>
  <tr>
  
    <td>一月份</td>
    <td>二月份</td>
    <td>三月份</td>
    <td>四月份</td>
    <td>五月份</td>
    <td>六月份</td>
    <td>七月份</td>
    <td>八月份</td>
    <td>九月份</td>
    <td>十月份</td>
    <td>十一月份</td>
    <td>十二月份</td>
  </tr>
  <tr>
    <td>#{realPlantHome.month1==null?'--':realPlantHome.month1}</td>
    <td>#{realPlantHome.month2==null?'--':realPlantHome.month2}</td>
    <td>#{realPlantHome.month3==null?'--':realPlantHome.month3}</td>
    <td>#{realPlantHome.month4==null?'--':realPlantHome.month4}</td>
    <td>#{realPlantHome.month5==null?'--':realPlantHome.month5}</td>
    <td>#{realPlantHome.month6==null?'--':realPlantHome.month6}</td>
    <td>#{realPlantHome.month7==null?'--':realPlantHome.month7}</td>
    <td>#{realPlantHome.month8==null?'--':realPlantHome.month8}</td>
    <td>#{realPlantHome.month9==null?'--':realPlantHome.month9}</td>
    <td>#{realPlantHome.month10==null?'--':realPlantHome.month10}</td>
    <td>#{realPlantHome.month11==null?'--':realPlantHome.month11}</td>
    <td>#{realPlantHome.month12==null?'--':realPlantHome.month12}</td>
  </tr>

</table>
     
    <!--   地块产量结束   -->
    
    
     
     <!-- 管理数据开始 开始  --> 
     <div class="gdh_01"><img src="#{request.contextPath}/asset/images/archive/listbz03.png" />管理数据</div>
                <ul class="nav nav-tabs" role="tablist" id="myTab">
                	<li class="active"><a href="#cost-dd" role="tab" data-toggle="tab">&nbsp;&nbsp;成本&nbsp;&nbsp;</a></li>
                    <li><a href="#home" role="tab" data-toggle="tab">农事管理</a></li>
                    <li><a href="#profile" role="tab" data-toggle="tab">&nbsp;采&nbsp;收&nbsp;</a></li>
                    <li><a href="#inpu" role="tab" data-toggle="tab">&nbsp;投入品&nbsp;</a></li>
                    <li><a href="#lvli" role="tab" data-toggle="tab">履历使用</a></li>
                    
                </ul>
                <div class="tab-content" style="margin-top:24px; position:relative;">
                
	                <div class="tab-pane active" id="cost-dd">
				        <!-- 成本选项卡内容 开始  -->
				        <h:panelGroup id="chengben">
				        <table class="tableModel" width="100%" cellpadding="0" cellspacing="0">
				            <thead>
				            <tr>
				                <th width="12%">日期</th>
				                <th width="12%">名称</th>
				                <th width="12%">类别</th>
				                <th width="12%">数量</th> 
				                <th width="12%">金额(元)</th>
				                <th width="12%">经办人</th>
				                <th width="12%">备注</th>
				                <th width="12%">操作</th>       
				            </tr>
				            </thead>
				            <tbody>
				            <a4j:repeat value="#{realPlantHome.costList}" var="var" >
                            	<tr>
                                	<td class="dk_cb021 table_cost_date#{var.id}" bgcolor="#FFFFFF" >
										<h:outputText value="#{var.inputsTime}">
											<s:convertDateTime type="both" dateStyle="short" pattern="yyyy-MM-dd" />
									    </h:outputText>
									</td>
                                    <td class="dk_cb022">#{var.name}</td>
                                    <td class="dk_cb022">#{var.costType.name}</td>
                                    <td class="dk_cb022">#{var.number}kg</td>
                                    <td class="dk_cb022">#{var.money} </td>
                                    <td class="dk_cb022">#{var.managers}</td>
                                    <td class="dk_cb022" title="#{var.description}">#{stringUtil.shortString(var.description,8)}</td>
                                    <td>
                                   	 <a  class="list_edit" onclick="costEditing('#{var.id}')" title="编辑" href="#"></a>
                                    <a class="list_delete" title="删除" onclick="del2('#{var.id}');return false;" href="#"></a>
                                    
                                    </td>
                            	</tr>
                            </a4j:repeat>
				            </tbody>
				        </table>
				        </h:panelGroup>
			        <!-- 成本选项卡内容 结束  -->
			        </div> 
                
                
                
                
                	<a4j:form id="costForm">
               		 <div class="modal" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                     	<div class="modal-dialog" style="width:720px; height:556px; position:fixed; left:50%; top:50%; margin-left:-398px; margin-top:-278px;">
                        	<div class="modal-content">
                            	<div class="modal-header">
                                	<button type="button" class="close" onclick="jquery('#myModal2').hide()"> </button>
                                	<h4 class="modal-title font14" id="myModalLabel">成本管理</h4>
                                </div>
                            <div class="modal-body" style="padding-bottom:0; height:249px; overflow:auto;">
                            <h:panelGroup id="xiucost">
								<table width="700" cellspacing="0" cellpadding="0" border="0" class="dk_showt2">
									<tr height="45" >
										<td align="right">日期：</td>
									    <td  class="tc_strong">
	                                    	<div class="input-append date cost_datetime form_datetime">
											    <input size="23" type="text" value="#{realPlantHome.inputsTime}"  readonly="readonly" id="cost_InputDate" autocomplete="off" />
											    <span class="add-on" style="height:14px"><i class="icon-th"></i></span>
											</div>
											<h:inputHidden value="#{realPlantHome.inputsTime}" id="inputsTime2"/>
		                            	</td>
									    <td align="right">名称：</td>
									    <td>
									    <h:inputHidden value="#{realPlantHome.costId}" id="costId"/>
									   		<h:inputText value="#{realPlantHome.costInfo.name}" styleClass="form-control nw221"  id="cost_name" style="width:170px;"/>
									    </td>
									</tr>
									<tr height="45" >
										<td align="right">类别：</td>
									    <td> 
										    <h:selectOneMenu  styleClass="selectpicker" id="cost_dicId"   value="#{realPlantHome.dicId}" >
												<s:selectItems value="#{realPlantHome.dicList}" var="var" label="#{var.name}" itemValue="#{var.dataDicId}"/>
											</h:selectOneMenu>
										</td>
									    <td align="right">数量：</td>
									    <td>
									    	<h:inputText value="#{realPlantHome.costInfo.number}" styleClass="form-control nw221" id="cost_number" style="width:170px;"/>
									    </td>
									</tr>
									<tr height="45" >
									 	<td align="right">单价：</td>
									 	<td>
									 		<h:inputText value="#{realPlantHome.costInfo.unitPrice}" styleClass="form-control nw221"  id="cost_unit_price" style="width:170px;"/>
									 	</td>
									    <td align="right">经办人：</td>
									    <td>
									    	<h:inputText value="#{realPlantHome.costInfo.managers}" styleClass="form-control nw221" id="cost_managers" style="width:170px;"/>
									    </td>
									</tr>
									<tr height="45" >
										<td align="right">备注：</td>
									    <td>
									    	<h:inputTextarea value="#{realPlantHome.costInfo.description}" id="cost_description" style="width:300px;height:65px; float:left; resize:none;"/>
										</td>
									 </tr>	 
								</table>
								</h:panelGroup>
			         		</div>
							<div class="modal-footer">
					              <a4j:commandButton styleClass="btn btn-primary chengbutton" value="保存" onclick="if(!chengSave())return false;jquery('.chengbutton').prop('disabled','true');" oncomplete="jquery('.chengbutton').removeAttr('disabled');" eventsQueue="mainQueue" action="#{realPlantHome.persistCostInfo}" reRender="chengben"/>
					              
					              &#160;&#160;
					              <input type="button" class="btn btn-default" onclick="jquery('#myModal2').hide()" value="返回"  />
					        </div>
                 		</div>
					</div>
				</div>
                </a4j:form>
                
                
                    <div class="tab-pane" id="home">
                    <!-- 农事管理 开始  -->
                    
                    <a href="javascript:;" class="btn btn-success" onclick="farming()" data-toggle="modal" data-target="#myModal" style="position:absolute; right:0; top:-62px;" >添加</a>
                                                 
                  <h:panelGroup id="faRecordId">
                                        
                  <table class="tableModel" width="100%" cellpadding="0" cellspacing="0">
                    <thead>
                    <tr>
                        <th width="11%">操作时间</th>
                        <th width="11%">操作内容</th>
                        <th width="11%">工时</th>
                        <th width="12%">投入品</th>
                        <th width="20%">图片</th>
                     
                
                        <th width="13%">备注</th>
                        <th width="8%">完成人</th>
                        <th width="8%">操作</th>
                    </tr>
                    </thead>
                    <tbody>
                    
                     <a4j:repeat value="#{realPlantHome.amAgriculturalInfoList}" var="var">
                   		<tr>
		                   	<td><h:outputText value="#{var[1]}" /></td> 
	                        <td>#{var[2]}</td>
	                        <td>#{var[3]}</td>
	                        <td>
	                        <div class="completePerson_wp completeNum1" id="completeNum1" rel="tooltip" data-placement="right" data-original-title="#{var[9]}">
                                                    <a href="javascript:;">#{var[4]}</a><em style="#{var[13] gt 1?'':'display:none'}">#{var[13]}</em>
                                                    </div>
	                        </td>
	                        <td class="farmingMage_pics3">
	                       	<ui:fragment rendered="#{var[6]!=''}">
	                        <a4j:repeat value="#{var[6].split(',')}" var="url_" id="urlid" rowKeyVar="row">
                                             <a href="javascript:;"><img id="imurlId" src="#{url_}" width="39" height="39"/></a>
                                             <div class="farmingMage_Magnifier">
                                             	<em class="MagnifierClose"><img src="#{request.contextPath}/asset/images/farmingIco05.png" width="28" height="28" /></em>
                                                 <div class="MagnifierBox"><img src="#{url_}" id="zzid"/></div>
                                             </div>
	                        </a4j:repeat>
	                       </ui:fragment>
							</td>
	                        
	                        <td>#{var[7]}</td>
	                        <td>
	                         <div class="completePerson_wp completeNum1" id="completeNum1" rel="tooltip" data-placement="right" data-original-title="#{var[11]}">
                                                    <a href="javascript:;">#{var[8]}</a><em style="#{var[12] gt 1?'':'display:none'}">#{var[12]}</em>
                                                    </div></td>
	                        <td>
	                            <a class="list_edit" title="编辑" data-toggle="modal" data-target="#myModal" onclick="isajax(#{var[0]})"/> 
	                            <a class="list_delete" title="删除" onclick="del('#{var[0]}');return false;" href="#"></a>
	                            
	                         </td>
                        </tr>
                    </a4j:repeat>
                    </tbody>
                    </table>
                    </h:panelGroup>
                  
                    <!-- 农事管理 结束  -->
                    </div>
                    <div class="tab-pane" id="profile">
                    <!-- 采收 开始  -->
          
                
                  <table class="tableModel" width="100%" cellpadding="0" cellspacing="0">
                    <thead>
                    <tr>
                        <th width="25%">日期</th>
                        <th width="25%">采收人</th>
                        <th width="25%">菜品等级</th>
                        <th width="25%">实际采收量</th>       
                    </tr>
                    </thead>
                    <tbody>
                    <a4j:repeat value="#{realPlantHome.productRecordTimesList}" var="var">
                   		<tr>
                          <td  class="ze_bg2"><h:outputText value="#{var.harvestTime}" /></td>
                          <td  class="ze_bg2">#{var.personName}</td>
                          <td  class="ze_bg2">#{var.levelName}</td>
                          <td  class="ze_bg2">#{var.weight==null?"0":var.weight}&#160;KG</td>
                        </tr>
                    </a4j:repeat>
                    </tbody>
                    </table>
                    <!-- 采收 结束  -->
                    </div>
                    
                    <div class="tab-pane" id="inpu">
                    <!-- 投入品 开始  -->       
                    <h:panelGroup id="inputsRecordInfo">                 
                  <table class="tableModel" width="100%" cellpadding="0" cellspacing="0">
                    <thead>
                    <tr>
                        <th width="25%">类型</th>
                        <th width="25%">名称</th>
                        <th width="25%">使用总量</th>
                        <th width="25%">操作</th>       
                    </tr>
                    </thead>
                    <tbody>
                    <a4j:repeat value="#{realPlantHome.irList}" var="var" >
                   		<tr>
                          <td  class="ze_bg2"><h:outputText value="#{var[0]}" /></td>
                          <td  class="ze_bg2">#{var[1]}</td>
                          <td  class="ze_bg2">#{var[2]}</td>
                          <td  class="ze_bg2"><a class="list_view" onclick="mym3(#{var[3]},#{var[4]})"></a></td>
                        </tr>
                    </a4j:repeat>
                    </tbody>
                    </table>
                    </h:panelGroup>
                    <!-- 投入品结束  -->
                    </div>  
                      
                    <div class="tab-pane" id="lvli">
                    <!-- 履历使用 开始  -->
          
              	  <p class="mb20">履历使用总量：<span style="color:#428bca;">#{realPlantHome.allCount}</span></p>
                  <table class="tableModel" width="100%" cellpadding="0" cellspacing="0">
                    <thead>
                    <tr>
                        <th width="10%">日期</th>
                        <th width="10%">数量</th>
                        <th width="10%">类型</th>
                        <th width="15%">履历编号</th>
                        <th width="10%">包装人</th>
                        <th width="15%">包装时间</th>
                        <th width="15%">订单编号</th>
                        <th width="15%">检测日期</th>         
                    </tr>
                    </thead>
                    <tbody>
                    <a4j:repeat value="#{realPlantHome.cvList}" var="var">
                   		<tr>
                         <td  class="ze_bg2">#{var[0]}</td>
                         <td  class="ze_bg2">#{var[1]}</td>
                         <td  class="ze_bg2">#{var[2]}</td>
                         <td  class="ze_bg2">#{var[3]}</td>
                         <td  class="ze_bg2">#{var[4]}</td>
                         <td  class="ze_bg2">#{var[5]}</td>
                         <td  class="ze_bg2">#{var[6]} #{var[7]}</td>
                         <td  class="ze_bg2">#{var[8]} #{var[9]}</td>
                        </tr>
                    </a4j:repeat>
                    </tbody>
                    </table>
                    <!-- 履历使用结束  -->
                    </div>                
                </div>
                
                <div class="modal" id="myModal3" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
				  		<h:panelGroup id="inpuid">
				  		<div class="modal-dialog " id="box">
				   			 <div class="modal-content" >
				      			<div class="modal-header">
				        			<button type="button" class="close" onclick="jquery('#myModal3').hide();"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				        			<h4 class="modal-title ziti" id="myModalLabel">#{realPlantHome.iiName}使用记录</h4>
				      			</div>
				     			<div class="modal-body body" id="pad">
				       				<table  width="95%" cellpadding="0" cellspacing="0">
				            	<thead>
				                	<tr>        
				                    		<th colspan="2" class="shiydate ziti"><i class="ico_title"></i>使用日期</th>                    	
				                    </tr>
				                </thead>
				
				                <tbody>
				                	
				                	 <a4j:repeat value="#{realPlantHome.iiList}" var="var"  rowKeyVar="row">
				                    <tr>
				                     <ui:fragment rendered="#{realPlantHome.iiList.size !=row+1}">
				                    	<td class="dateTd bg row1" >#{var[0]}<i class="ico_bg"></i></td>
				                     </ui:fragment> 
				                     <ui:fragment rendered="#{realPlantHome.iiList.size ==row+1}">
				                    	<td class="dateTd  row1" >#{var[0]}<i class="ico_bg"></i></td>
				                     </ui:fragment>     
				                        <td class="row2">
											<div class="bg_kuang">
												<span>使用量 : #{var[1]}#{var[5]}</span>
												<span>操作内容 : #{var[2]}</span> 
				                        		<span>操作人 : #{var[3]}</span> 
				                        		<div class="sanjiao"></div>
											</div>
				                        	</td>
				                    </tr>
				                    </a4j:repeat>
				                </tbody>
				            </table>
				        
				        
				      			</div>
				      
				   			 </div>
				  		</div>
				  		</h:panelGroup>
					</div>
                
                <!-- 管理 结束  -->
                <!--图片弹出滚动开始-->
                <div class="modal " id="myModa2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                			<h:panelGroup id="tuid">
       				<div class="modal-dialog" style="width:795px;">
           				<div class="modal-content">
                			<div class="modal-header">
                				<button type="button" class="close" onclick="jquery('#myModa2').hide();"> </button>
                				<h4 class="modal-title font14" id="myModalLabel">图片展示</h4>
                			</div>
							<div class="modal-body" style="padding-bottom:0;">
                					<div id="photos" class="galleryview">
                				    <a4j:repeat value="#{realPlantHome.imgList}" var="var"  rowKeyVar="row">
                				    <div class="panel">
     									<img id="imgId" src="#{var.pictureUrl}" /> 
										<div class="panel-overlay">
     										<p>#{var.content}</p>
   										</div>
  									</div>
                					</a4j:repeat>
									<ul class="filmstrip">
									 <a4j:repeat value="#{realPlantHome.imgList}" var="pic"  rowKeyVar="row">
                				    	<li><img src="#{pic.pictureUrl}"/></li>
  									</a4j:repeat>
									</ul>
								</div>
							</div>
							
                       		<div class="modal-footer">
                       		</div>
						</div>
					</div>
					
							</h:panelGroup>
				</div> 
<!--图片弹出滚动结束-->				
	            
     
	             
             <div style=" text-align: center; margin:30px auto;">
             	<s:link propagation="none" style="margin-left:10px;display: #{s:hasRole('plant_edit')?'hidden':'none'}" includePageParams="false" view="/archive/PlantInfoEdit.xhtml"     styleClass="btn btn-default" id="plantInfoEdit" rendered="#{empty from}" value="编辑" title="编辑">
                       <f:param name="plantInfoPlantInfoId" value="#{realPlantHome.instance.realPlantId}" />
				</s:link>
				 <s:link propagation="none" style="margin-left:10px;display:none" view="/archive/PlantInfoSure.xhtml" styleClass="btn btn-default" id="plantInfoEditTow" rendered="#{realPlantHome.instance.plantStauts eq 2}" value="确认种植" title="确认种植">
                       <f:param name="plantInfoPlantInfoId" value="#{realPlantHome.instance.realPlantId}" />
				</s:link>
               	 <a href="#" onclick="removeP(#{realPlantHome.instance.realPlantId})" title="删除" class="btn btn-default" style="margin-left:10px;display: #{s:hasRole('plant_del')?'hidden':'none'}">删除</a>
	             <s:link view="/archive/PlantInfoList.xhtml" styleClass="btn btn-default" value="返回" id="bn_left6" style="margin-left:10px" >
				 	<f:param name="baseId" value="#{preHarvestHome.baseId}"></f:param>	
				 	<f:param name="pageNum" value="#{realPlantHome.pageNum}"></f:param>		 
				 	<f:param name="initType" value="#{realPlantHome.initType}"></f:param>		 		
				 </s:link>
			 </div>
             
</div>
<a4j:form>
	<a4j:jsFunction eventsQueue="mainQueue" name="searchInputsList" action="#{realPlantHome.searchGoodsInfoList()}" oncomplete="searchInputsList_next()" reRender="recordInputList">
		<a4j:actionparam name="param" assignTo="#{realPlantHome.param}" />
		<a4j:actionparam name="dataStandard" assignTo="#{realPlantHome.dataStandard}" />
		<a4j:actionparam name="searchInfo" assignTo="#{realPlantHome.searchInfo}" />
		<a4j:actionparam name="inputsPageNum" assignTo="#{realPlantHome.inputsPageNum}" />
	</a4j:jsFunction>
	<a4j:jsFunction eventsQueue="mainQueue" name="changeStorageRoom" action="#{realPlantHome.changeStorageRoom()}" data="#{realPlantHome.resultData}" oncomplete="changeRoom_next(data)" >
		<a4j:actionparam name="storageRoomId" assignTo="#{realPlantHome.storageRoomId}" />
		<a4j:actionparam name="inputsInfoId" assignTo="#{realPlantHome.inputsInfoId}" />
	</a4j:jsFunction>
	<a4j:jsFunction eventsQueue="mainQueue" name="searchGoodsCount" action="#{realPlantHome.searchGoodsCount()}" data="#{realPlantHome.resultData}" oncomplete="changeGoodsBatch_next(data)">
		<a4j:actionparam name="goodsBatchIds" assignTo="#{realPlantHome.goodsBatchIds}" />
		<a4j:actionparam name="inputsInfoId" assignTo="#{realPlantHome.inputsInfoId}" />
	</a4j:jsFunction>
	<a4j:jsFunction eventsQueue="mainQueue" name="changeGoodsInfo" action="#{realPlantHome.searchStorageRoomList()}" data="#{realPlantHome.resultData}" oncomplete="storageCallback(data);">
		<a4j:actionparam name="inputsIds" assignTo="#{realPlantHome.inputsIds}" />
	</a4j:jsFunction>	
</a4j:form>
<a4j:form>
         <a4j:jsFunction name="delfarmingPicList" reRender="picId" action="#{realPlantHome.delfarmingPicList()}" oncomplete="farpicref()">
      		<a4j:actionparam name="index" assignTo="#{realPlantHome.index}"/>
        </a4j:jsFunction>
 	</a4j:form>
 	<a4j:form>
 	<a4j:jsFunction name="delRecordList_next" action="#{realPlantHome.delRecordList()}" reRender="nsInputsCost" oncomplete="jquery('#login').hide();">
	<a4j:actionparam name="param" assignTo="#{realPlantHome.param}" />
</a4j:jsFunction>
</a4j:form>
<a4j:form>
         <a4j:jsFunction name="xiufar" reRender="xiufa" action="#{realPlantHome.xiufar()}" oncomplete="rexiufar()">
      		<a4j:actionparam name="amid" assignTo="#{realPlantHome.amid}"/>
        </a4j:jsFunction>
 	</a4j:form>
 	<a4j:form >
<a4j:jsFunction name="deleted"  action="#{realPlantHome.deleteObj}" reRender="faRecordId,inputsRecordInfo,chengben" oncomplete="farpicref()">
      		<a4j:actionparam name="amid" assignTo="#{realPlantHome.amid}"/>
</a4j:jsFunction>
</a4j:form>
 	<a4j:form >
<a4j:jsFunction name="tupian"  action="#{realPlantHome.tupian}" reRender="tuid" oncomplete="huidiao()">
      		<a4j:actionparam name="amid" assignTo="#{realPlantHome.amid}"/>
</a4j:jsFunction>
</a4j:form>
<a4j:form >
<a4j:jsFunction name="reFaRe"  action="#{realPlantHome.reFaRe}" reRender="picId,farmingInputs_wp,nsInputsCost">
</a4j:jsFunction>
</a4j:form>
<a4j:form >
	<a4j:jsFunction name="costInfoEditing"  action="#{realPlantHome.costInfoEditing}" reRender="xiucost" oncomplete="recost()">
		<a4j:actionparam name="costId" assignTo="#{realPlantHome.costId}"/>
	</a4j:jsFunction>
</a4j:form>
	<a4j:form >
<a4j:jsFunction name="deleteCostInfo"  action="#{realPlantHome.deleteCostInfo}" reRender="chengben">
      		<a4j:actionparam name="costId" assignTo="#{realPlantHome.costId}"/>
</a4j:jsFunction>

 <a4j:jsFunction name="removePlant"    action="#{realPlantHome.remove}"  >
        <a4j:actionparam name="param1"   assignTo="#{realPlantHome.realPlantRealPlantId}"/>
        <a4j:actionparam name="param3" assignTo="#{realPlantHome.removeType}"></a4j:actionparam>
        </a4j:jsFunction>
</a4j:form>
<a4j:form>
         <a4j:jsFunction name="inpiview" reRender="inpuid" action="#{realPlantHome.inpiView()}" oncomplete="huidiao3()">
      		<a4j:actionparam name="iiId" assignTo="#{realPlantHome.iiId}"/>
      		<a4j:actionparam name="rpId" assignTo="#{realPlantHome.rpId}"/>
        </a4j:jsFunction>
        <a4j:jsFunction name="checkStorage"  action="#{realPlantHome.checkStorage()}" data="#{realPlantHome.messageStr}" oncomplete="submitAgr(data)" ></a4j:jsFunction>
 	</a4j:form>
 
 										<!-- Modal 添加农事记录弹窗 开始 -->
                                        <div class="modal" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static">
	                                        <a4j:form id="far">
	                                            <div class="modal-dialog farmRecord" id="addJilu" >
							                	<div class="modal-content">
							                  			<div class="modal-header clear">
										                    <h4 class="modal-title fl">添加农事记录</h4>
										                    <i class="i_close" onclick="jquery('#myModal').hide()" data-dismiss="modal"></i>
							                  			</div>
							                  			<h:panelGroup id="xiufa">
							                  			<div class="modal-body clear">
										                    <div class="choice" style="display:#{realPlantHome.enterpriseSettings.farmerChecked?'block;':'none;'}" dis="#{realPlantHome.enterpriseSettings.farmerChecked}">
										                        <p class="item">操作人</p>
										                        <select id="aai_farmId2" name="aai_farmId" onchange="changebList()" multiple="multiple" class="selectpicker">
													                <a4j:repeat value="#{realPlantHome.farList}" var="var">
													                	<option value="#{var[0]}">#{var[1]}</option>
													                </a4j:repeat>
													             </select>
													             <h:inputHidden value="#{realPlantHome.farmerId}" id="farmerId" />
										                    </div>
										                    <div class="choice">
										                        <p class="item">操作类型</p>
                                                                	 <h:selectOneMenu  styleClass="selectpicker" id="frfidId"   value="#{realPlantHome.frfidId}" >
																		<s:selectItems value="#{realPlantHome.frfidList}" var="var" label="#{var.name}" itemValue="#{var.id}"/>
																	</h:selectOneMenu>
										                   </div>
										                    <div class="choice">
										                        <p class="item">操作时间</p>
										                        <div class="input-append date form_datetime"  >
																     <input size="23" type="text"  value="#{realPlantHome.operationTime}" readonly="readonly" id="operationTime" name="operationTime" autocomplete="off" />
																    <span class="add-on" style="height:14px"><i class="icon-th"></i></span>
															    </div>
										                    </div>
										                    <div class="choice" style="display:#{realPlantHome.enterpriseSettings.workTimeChecked?'block;':'none;'}" dis="#{realPlantHome.enterpriseSettings.workTimeChecked}">
										                        <p class="item">工时</p>
										                        <h:inputText value="#{realPlantHome.workTime}" id="work_time" styleClass="form-control nw130" />
										                        <p class="unit">小时</p>
										                        <p class="unit" style="color:red;">*</p>
										                    </div>
										                    <div class="choice" style="display:#{realPlantHome.enterpriseSettings.environmentChecked?'block;':'none;'}" dis="#{operateHome.enterpriseSettings.environmentChecked}"> 
										                        <p class="item">环境温度</p>
										                        <h:inputText value="#{realPlantHome.airTemp}" id="airTemp" class="form-control nw130"/>
										                        <p class="unit">℃</p>
										                    </div>
										                    <div class="choice" style="display:#{realPlantHome.enterpriseSettings.environmentChecked?'block;':'none;'}" dis="#{realPlantHome.enterpriseSettings.environmentChecked}">
										                        <p class="item">环境湿度</p>
										                        <h:inputText value="#{realPlantHome.airHumi}" id="airHumi" class="form-control nw130"/> 
										                        <p class="unit">%</p>
										                    </div>
										                    <div class="tup clear">
										                    	<div class="choice" style="margin-bottom: 0px;">
										                        	<p class="item farmHeight">农事图片</p>
										                        	<div class="farmPics">
											                            <h:panelGroup id="picId">
		                                                                    <a4j:repeat value="#{realPlantHome.farmingPicList}" var="var" id="farmingPicList" rowKeyVar="row">
		                                                                    	<div class="farmingInputs fl">
		                                                                        	<a class="farmingInputs_pic" href="javascript:;"><img src="#{var[0]}" width="128" height="128" /></a>
		                                                                            <em class="closeInputs" onclick="delfarmingPic(this,#{row})"><img src="#{request.contextPath}/asset/images/clo_04.jpg" /></em>
		                                                                        </div>
		                                                                    </a4j:repeat>
		                                                                    <input type="button" class="farmingInputs_add3" style="margin-bottom:25px;float:left;" onclick="addFarming()"></input>
	                                                                    </h:panelGroup>
										                        	</div>
										                   		</div> 
										                        <div class="choice" style="margin-bottom: 0px;display:#{realPlantHome.enterpriseSettings.inputsInfoChecked?'block;':'none;'}" >
										                            <p class="item farmHeight">投入品</p>
										                            <div class="farmPics">
		                                                                	<s:div id="farmingInputs_wp" styleClass="farmingInputs_wp">
			                                                                	<a4j:repeat value="#{realPlantHome.recordList1}" var="var" id="recordList" rowKeyVar="row">
			                                                                		<s:fragment rendered="#{var.deleted ne true}">
			                                                                		<div class="farmingInputs fl">
			                                                                        	<a class="farmingInputs_pic" href="javascript:;">
			                                                                        	<s:fragment rendered="#{var.inputsInfoId.packingImagesUrl eq null or var.inputsInfoId.packingImagesUrl eq ''}"><img src="#{request.contextPath}/asset/images/inputs/tourupin.jpg" width="128" height="128" /></s:fragment>
				                                                                       	<s:fragment rendered="#{var.inputsInfoId.packingImagesUrl ne null and var.inputsInfoId.packingImagesUrl ne ''}"><img src="#{var.inputsInfoId.packingImagesUrl}" width="128" height="128" /></s:fragment>
			                                                                        	<p>#{var.inputsInfoId.name} #{var.amount}#{var.inputsInfoId.unitInfo.name}</p>
			                                                                        	</a>
			                                                                            <em class="closeInputs" onclick="delRecordList(this,#{row})"><img src="#{request.contextPath}/asset/images/clo_04.jpg" /></em>
			                                                                        </div>
			                                                                        </s:fragment>
			                                                                	</a4j:repeat>
		                                                                        <div class="farmingInputs_add" style="position:static;">
		                                                                        	<input type="button" class="farmingInputs_add3" style="margin-bottom:25px;" onclick="addRecord()"></input>
		                                                           				</div>
		                                                                    </s:div>
	                                                                </div>
										                        </div> 
										                    </div>
							                    			<div class="choice" style="display:#{realPlantHome.enterpriseSettings.inputsInfoChecked?'block;':'none;'}">
										                        <p class="item">农资成本</p>
										                        <s:div id="nsInputsCost">
										                        	<p class="unit" id="nsInputsCostVal"><h:outputText value="#{realPlantHome.inputsCost}" ><f:convertNumber pattern="#.##"/></h:outputText>元</p>
										                        </s:div>
										                    </div>
										                    <div class="choice" style="display:#{realPlantHome.enterpriseSettings.costChecked?'block;':'none;'}" dis="#{realPlantHome.enterpriseSettings.costChecked}">
										                        <p class="item">其他成本</p>
										                        <h:inputText value="#{realPlantHome.costing}"  class="form-control nw130" id="recordCosting" name="recordCosting"/>
										                        <p class="unit">元</p>
										                    </div>
										                    <div class="choice" style="width:100%;">
							                        			<p class="item">备注</p>
							                        			<h:inputTextarea value="#{realPlantHome.note}" id="noteId" styleClass="form-control nw300"/>
													            <h:inputHidden value="#{realPlantHome.amid}" id="amid"/>
							                    			</div>
							                  			</div>
							                  			</h:panelGroup>
							                  			<div class="modal-footer">
		                                                    <a4j:commandButton id="hidAddAgrBtn" style="display:none;" reRender="faRecordId,inputsRecordInfo,chengben" action="#{realPlantHome.farPersis}" value="保存" oncomplete="jquery('.tianjiabutton').removeAttr('disabled');huidiao();jquery('#myModal').modal('hide');"></a4j:commandButton>
		                                                    <a4j:commandButton styleClass="btn btn-primary tianjiabutton"  value="保存" onclick="if(!reSave())return false;jquery('.tianjiabutton').prop('disabled','true');"></a4j:commandButton>
		                                                    <button class="btn btn-default" onclick="jquery('#myModal').hide()" type="button" data-dismiss="modal">返回</button>
	                                                    </div>
							                  	</div>
							                </div>
	                                            
	                                        </a4j:form>
	                                        <!-- 添加投入品 start -->
	                                        <div class="farmingInputs_mini modal-dialog" id="addInputRecord" style="z-index:101;position:absolute; left:50%; top:50%; width:828px; margin-left:-414px; margin-top:-210px;">
										        <a4j:form ajaxSubmit="true" id="record_" autocomplete="on">
										            <div class="farmingInputs_miniHd"><h3>添加投入品</h3><input type="button" class="butt" onclick="jquery('#addInputRecord').hide()"/></div>
										                 <div class="farmingInputs_miniBd" style="padding:0;height:462px;">
										                     <div class="box_padding20">
											                     <div id="iradio-InputProductInfo">
										                             <!-- 投入品搜索 -->
										                             <div class="farminputs_search clear">
										                                  	<div class="public-search">
																				<span class="octicon-search02"></span>
																				<input class="form-control srarchfont" id="searchInputText" type="text" value="请输入查询内容" onfocus="FocusFn(this,'#333','请输入查询内容')" onblur="BlurFn(this,'#a8a8a8','请输入查询内容')"></input>
																			</div>
																			<p class="txt_name fl">投入品类型</p>
																			<div class="inputs_selectpicker">
																				<select class="selectpicker" id="inputType">
											                                         <option value="2">农药</option>
											                                         <option value="3">肥料</option>
											                                         <option value="5">种子</option>
											                                         <option value="4">其他</option>
										                                        </select>
										                                    </div>
										                                     <input type="button" class="btn btn-primary fl" onclick="searchInputs(1);" value="搜索"/>
										                             </div>
										                             <!-- 投入品表格上 -->
											                          <h:panelGroup id="recordInputList">
											                              <div class="inputs_table" id="inputs_table">
											                                   <table width="100%" cellpadding="0" cellspacing="0" id="inputsTable">
											                                       <tr>
											                                       	<th width="30" class="br_bt br_rt radius_lt"><span id="mn_checkall" class="mn_checkall" onclick="OutputCheckAll(this,'#inputs_table')"></span></th>
											                                       	<th width="164" class="br_bt br_rt">投入品编号</th>
											                                       	<th width="170" class="br_bt br_rt">投入品名称</th>
											                                       	<th width="176" class="br_bt br_rt">投入品规格</th>
											                                       	<th class="br_bt radius_lt">生产厂家</th>
											                                       </tr>
											                                       <a4j:repeat value="#{realPlantHome.goodsInfoList}" var="var">
											                                        <tr id="trp_#{var[0]}">
											                                        	<td class="br_bt br_rt"><span class="mn_check" id="check_#{var[0]}" onclick="OutputCheck(this,'#inputs_table','#mn_checkall','#{var[0]}')"></span>
											                                        		<input type="hidden" value="#{var[0]}"/>
											                                        		<input type="hidden" value="#{var[9]}"/>
											                                        	</td>
											                                        	<td class="br_bt br_rt"><p class="ellipsis">#{var[11]}</p></td>
											                                        	<td class="br_bt br_rt"><p class="ellipsis">#{var[1]}</p> </td>
											                                        	<td class="br_bt br_rt"><p class="ellipsis">#{var[5]}#{var[10]}<s:fragment rendered="#{not empty var[7]}">/#{var[7]}</s:fragment></p></td>
											                                        	<td class="br_bt"><p class="ellipsis">#{var[8]}</p></td>
											                                        </tr>
											                                       </a4j:repeat>
											                                    </table>
											                              </div>
										                              	<!-- 分页 开始 -->
																    	<table class="pageModel-wap fr" cellpadding="0" cellspacing="0">
																	        <tr>
																	            <td>
																	                <div style="width:auto;">
																	                    <table class="pageModel" cellpadding="0" cellspacing="0">
																	                        <tr>
																	                            <td>
																	                            	<s:fragment rendered="#{realPlantHome.inputsPageNum ne 1 and realPlantHome.inputsTotalPageNum gt 0}">
																	                            		<span class="page_num"><a id="lastPage" href="javascript:inputsJump(1);">首页</a></span>
																		                            	<span class="page_num"><a href="javascript:inputsJump(#{realPlantHome.inputsPageNum-1});">&lt;&lt;</a></span>
																		                            </s:fragment>
																		                            <a4j:repeat value="#{realPlantHome.inputsPageList}" var="_page">
																		                            	<span class="page_num #{realPlantHome.inputsPageNum eq _page? 'page_Cur':''}"><a href="javascript:inputsJump(#{_page});">#{_page}</a></span>
																		                            </a4j:repeat>
																		                            <s:fragment rendered="#{realPlantHome.inputsPageNum ne realPlantHome.inputsTotalPageNum and realPlantHome.inputsTotalPageNum gt 0}">
																		                            	<span class="page_num"><a href="javascript:inputsJump(#{realPlantHome.inputsPageNum+1});">&gt;&gt;</a></span>
																		                            	<span class="page_num"><a id="lastPage" href="javascript:inputsJump(#{realPlantHome.inputsTotalPageNum});">尾页</a></span>
																		                            </s:fragment>																						                               
																	                                <span class="page_num pageCount page_last" style="border-right:0;"><a href="javascript:;" style="cursor:default;">共#{realPlantHome.inputsTotalPageNum}页</a></span>
																	                             </td>
																	                    	</tr>
																	                    </table>
																	                </div>
																	            </td>
																	        </tr>
																    	</table>
																	</h:panelGroup>
																</div>
										                    </div>
															<!-- 投入品表格下 -->
															<div class="box_padding20 br_dd mb20 clear">
																<div class="inputs_table mt20">
										                          	<table width="100%" cellpadding="0" cellspacing="0" id="addInputsTable">
										                                <tr>
										                                	<th width="40" class="br_bt br_rt radius_lt">序号</th>
										                                	<th width="80" class="br_bt br_rt">投入品名称</th>
										                                	<th width="80" class="br_bt br_rt">规格</th>
										                                	<th width="60" class="br_bt br_rt">使用量</th>
										                                	<th width="60" class="br_bt br_rt">成本</th>
										                                	<th width="120" class="br_bt br_rt">出库</th>
										                                	<th width="150" class="br_bt br_rt">入库批次</th>
										                                	<th width="90" class="br_bt br_rt">经办人</th>
										                                	<th width="50" class="br_bt br_rt">库存量</th>
										                                	<th class="br_bt radius_lt">操作</th>
										                                </tr>
										                            </table>
										                        </div>
															</div>
														</div>                                                                               
										                <div class="farmingInputs_miniFt">        
										                	<input type="hidden" id="agricultralType" name="agricultralType"/>                                                                       						
															<h:inputHidden value="#{realPlantHome.inputsInfoData}" id="inputsInfoData"/>
										                	<a4j:commandButton id="submitInputs" value="提交" onclick="if(!submitRecord()){return false;};jquery('.markb50').hide();" reRender="farmingInputs_wp,nsInputsCost" 
														         oncomplete="jquery('#addInputRecord').hide();document.getElementById('record_:submitInputs').disabled = false;farpicref()" 
														         action="#{realPlantHome.addInputsRecord()}" styleClass="btn btn-success"/>
													        <input class="btn btn-default" onclick="jquery('#addInputRecord').hide();jquery('.markb50').hide();" type="button" value="返回" style="margin-left:5px"></input>
													    </div>
										            </a4j:form>
										         </div>
										         <!-- 添加投入品 end -->
										         <div class="farmingInputs_mini modal-dialog" id="addMyFarming" style="z-index:101;position:absolute; left:50%; top:50%; margin-left:-235px; margin-top:-230px;width:487px;">
										             	<a4j:form ajaxSubmit="true" id="pic" autocomplete="on">
										             	<div class="farmingInputs_miniHd"><h3>添加农事图片</h3><input type="button" class="butt" onclick="jquery('#addMyFarming').hide()"/></div>
										                 <div class="farmingInputs_miniBd_min">
										                 <table>
										                 <iframe src="#{request.contextPath}/agricultural/farmingPic.seam" id="myframPic" name="myframPic" frameBorder="0" scrolling="no" height="228px" width="320" onLoad="" ></iframe>
															<tr>
										                      <td width="100"><h3 class="all_te" style="margin-top:-26px;">图片说明:</h3></td>
										                     <td width="230" >
										                     	<h:inputTextarea value="#{realPlantHome.centent}" styleClass="form-control" id="contentId" style="width:319px; float:left; display:inline; margin-right:5px;"/>
										                     	<h:inputHidden value="#{realPlantHome.imgUrl}" id="imgUrl"/>
										                     	<h:inputHidden value="#{realPlantHome.picJson}" id="picJson"/>
										                     	<span style="color:#f00;">最多不能超过70字</span>
										                     </td>
										                   
										                 </tr>
										                 </table>
										                 </div>
										                 <div class="farmingInputs_miniFt">
										                 <a4j:commandButton value="提交"  onclick="if(!myPicUrl())return false;jquery('.markb50').hide();" oncomplete="farpicref()" reRender="picId"  action="#{realPlantHome.farmingPic()}" styleClass="btn btn-success"/>
										                 <input class="btn btn-default" onclick="jquery('#addMyFarming').hide();jquery('.markb50').hide();" type="button" value="返回" style="margin-left:5px"></input>
										                 </div>
										                 </a4j:form>
									             </div>
									             <!-- 添加农事图片 end -->
	                                        </div>
	                                        <!-- Modal 添加农事记录弹窗 结束 -->
 
 	
<script type="text/javascript">
	//<![CDATA[
	var val1 = '#{realPlantHome.instance.plantBeginTime}';
	 var val2 = '#{realPlantHome.instance.plantEndTime}';
	 val1=val1.split(" ")[0];
	 val2=val2.split(" ")[0];
	 
	var nowD = new Date();
	var nowD_ = new Date(nowD.getFullYear(),nowD.getMonth()+1,nowD.getDate());
	var endTime = val2;
	var arrs = endTime.split("-");
   var lktime = new Date(arrs[0], arrs[1], arrs[2]);
   var lktimes = lktime.getTime();
   
   var beginTime = val1;
   var arr = beginTime.split("-");
   var bt = new Date(arr[0], arr[1], arr[2]);
   var bts = bt.getTime();
   if(lktimes<=nowD_.getTime()){
   	jquery(".x1").html("历史种植");
   }else{
   	if(bts<nowD_.getTime()){
   		jquery(".x1").html("实际种植");
   	}else{
   		jquery(".x1").html("计划种植");
   	}
   } 
	//]]>
	</script>

<script type="text/javascript">
//<![CDATA[
	jquery(document).ready(function(){
		jquery('#photos').galleryView({
			panel_width: 760,
			panel_height: 300,
			frame_width: 100,
			frame_height: 50
		});
		ModalResize();
	});
	function ModalResize(){
		if(jquery(window).height()<600){
			jquery('.addfarm_dialog').css({
				'position' : 'absolute',
				'top' : 0,
				'margin-top':'50px'
			})
		}else{
			jquery('.addfarm_dialog').css({
				'position' : 'absolute',
				'top' : '50%',
				'margin-top':'-278px'
			})
		}
	}
	jquery(window).resize(function(){
		ModalResize();
	});
	function farming(){
		reFaRe();
		jquery("#myModal").show();
		jquery('.selectpicker').selectpicker({dropupAuto:false});
		jquery("#far\\:aai_show").val("1");
		jquery("#far\\:amid").val("");
		jquery('.selected').attr('class','');
		jquery('.pull-left').text('无可选择项目');
		jquery("#far\\:frfidId").selectpicker("val",jquery("#far\\:frfidId option:eq(0)").val());
		jquery('.aai_1').find('.btn-default').attr('title','无可选择项目')	;
		jquery('#aai_farmId2').val('');
		jquery('#operationTime').val('');
		jquery('#far\\:work_time').val('');
		jquery('#far\\:noteId').val('');
		jquery('#far\\:airHumi').val('');
		jquery('#far\\:airTemp').val('');
		jquery('#far\\:recordCosting').val('');
	
	}
	function addRecord(){
		//将投入品信息置为默认值
		jquery('#inputType').selectpicker('val',2);
		jquery("#searchInputText").val("");
		jquery("#addInputsTable .Output_tr").remove();
		searchInputs(1);

		jquery("#addInputRecord").show();
		jquery('.markb50').show();
	}
	 function radio22(obj){
     	if(obj.getAttribute("aa")=="0"){
     		jquery("#far\\:aai_show").val("1");
     		jquery(obj).addClass("checked");
     		obj.setAttribute("aa","1");
     	}else{
     		jquery(obj).removeClass("checked");
         	obj.setAttribute("aa","0");
     		jquery("#far\\:aai_show").val("0");
     	}
     }
	 function changebList(){
			jquery('#far\\:farmerId').val(jquery('#aai_farmId2').val()+'');
	}
	function changeInputs_next(obj){
		//jquery("#record_input").empty().append(obj);
		//jquery("#record_input").selectpicker("refresh");
		jquery("#record_input").trigger("onchange");
		jQuery("#login").hide();
	}
	  function delfarmingPic(obj,index){
		   delfarmingPicList(index);
		}  
	  function farpicref(){
	    	jquery('.farmingInputs').mouseover(function(){
	    		jquery(this).children('.closeInputs').css('display','block');	
	    	});
	    	jquery('.farmingInputs').mouseout(function(){
	    		jquery(this).children('.closeInputs').css('display','none');	
	    	});
	    	jquery(".completeNum1,.tooltip_").tooltip();
	    } 
	  function addFarming(){
			jquery("#pic\\:imgUrl").val(jquery("#myframPic").contents().find("#imgUrl_id").attr("src","../asset/images/farmingIco15.jpg"));
			jquery("#pic\\:contentId").val('');
			jquery('#addMyFarming').show();
			jquery('.markb50').show();
		}   
	  function myPicUrl(){
	    	jquery("#pic\\:imgUrl").val(jquery("#myframPic").contents().find("#imgUrl_id").attr("src"));
	    	jquery("#pic\\:picJson").val(jquery("#myframPic").contents().find("#inputsImages\\:picJson").val());
	    	jquery('#addMyFarming').hide();
	    	if(jquery('#pic\\:contentId').val().length>70){
	          	alert("图片说明字数需小于70字");
				return false;
	         }
	         if(jquery("#myframPic").contents().find("#imgUrl_id").attr("src")=='../asset/images/farmingIco15.jpg'){
	        		alert("上传图片不能为空！");
					return false;
		         }
			return true;
	    }
	  function delRecordList(obj,index){
		  jquery('#login').show();
		  jquery(obj).parent().css('display','none');
		  delRecordList_next(index);
		}
	function inputfu(){
		jquery("#record_\\:inputId").val(jquery("#record_input").val());
		if(jquery('#inputNum').val()==''){
			alert("使用量不能为空！")
			return false;
			}
		return true;
		}
	function reSave(){
		if(jquery('#aai_farmId2').val()==null){
			alert("操作人不能为空!");
			return false;
		}
		if(jquery('#far\\:frfidId').val()==''){
			alert("操作类型不能为空!");
			return false;
		}
		if(jquery('#operationTime').val()==''){
			alert("操作时间不能为空!");
			return false;
		}
		if(jquery("#far\\:work_time").parent().css('display')!='none'){
			var rtime=jquery('#far\\:work_time').val();
			if(rtime==''){
				alert("工时不能为空!");
				return false;
			}	
			if(isNaN(rtime)){
				alert("工时请填写数字!");
				return false;
			}else{
				rtime = parseFloat(rtime);
				if(rtime>200){
					alert("工时不能超过200!");
					return false;
				}
			}
		}
		if(jquery("#far\\:airTemp").parent().css('display')!='none'){
			var temp = jquery("#far\\:airTemp").val();
			if(isNaN(temp)){
				alert("空气温度请填写数字!");
				return false;
			}else{
				temp = parseFloat(temp);
			}
			
			var humi = jquery("#far\\:airHumi").val();
			if(isNaN(humi)){
				alert("空气湿度请填写数字!");
				return false;
			}else{
				humi = parseFloat(humi);
			}
		}

		if(jquery("#far\\:recordCosting").parent().css('display')!='none'){
			var costing = jquery("#far\\:recordCosting").val();
			if(isNaN(costing)){
				alert("其他成本请填写数字!");
				return false;
			}else{
				costing = parseFloat(costing);
				if(costing>1000000){
					alert("其他成本不能超过1000000!");
					return false;
				}
			}
		}
		
		checkStorage();               
		return true;
	}
	function submitAgr(data){
		if(""!=data){
			alert(data);			
		}else{
			jquery("#myModal").hide();
			jquery("#far\\:hidAddAgrBtn").trigger("click");			
		}
	}
	function picRoll(id){
		tupian(id);
		jquery("#myModa2").show();
		} 
	function isajax(amid){
		xiufar(amid);
		jquery("#myModal").show();
		jquery('.selectpicker').selectpicker();
		
	}   
	function rexiufar(){
		jquery('.selectpicker').selectpicker();
		jquery('#aai_farmId2').selectpicker('val',jquery('#far\\:farmerId').val().split(','));
		if(jquery("#far\\:aai_show").val()=="1"){
			jquery('.radio2').attr('aa','1')
			jquery('.radio2').attr('class','radio2 checked')
     	}else{
     		jquery('.radio2').attr('aa','0')
			jquery('.radio2').attr('class','radio2')
     	}
		farpicref();
		jquery(".form_datetime").datetimepicker({
			format: "yyyy-mm-dd hh:ii",  
			autoclose: true,
			 weekStart: 1,
			 language:  'zh-CN',
			pickerPosition: "bottom-left"
		});
		}  
	del = function(a,b){
		if(confirm('确定删除?')){
	 		deleted(a,b);
	 		return true;
	 	}
	 	return false;
	}
	function huidiao(){
		jquery(".completeNum1,.tooltip_").tooltip();
		jquery('#photos').galleryView({
			panel_width: 760,
			panel_height: 300,
			frame_width: 100,
			frame_height: 50
		});
	}
	jquery(function(){
		jquery(".completeNum1,.tooltip_").tooltip();
	})
	
	function costEditing(id){
		costInfoEditing(id);
		jquery("#myModal2").show();
		}
	function recost() {
		jquery('.selectpicker').selectpicker();
		
		jquery(".cost_datetime").datetimepicker({
		    format: "yyyy-mm-dd",
		    autoclose: true,
			 weekStart: 1,
			 language:  'zh-CN',
		   minView:2,
		    pickerPosition: "bottom-left"
	    });
	}
	function chengSave(){
		jquery('#costForm\\:inputsTime2').val(jquery('#cost_InputDate').val());
		jquery('#myModal2').hide();
		return true;
		}
	del2= function(id){
		if(confirm('确定删除?')){
			deleteCostInfo(id);
	 		return true;
	 	}
	 	return false;
	}
	//]]>
</script>

    <script>
    jquery = jQuery.noConflict();
/* 时间控件 */

jquery(".form_datetime").datetimepicker({
	format: "yyyy-mm-dd hh:ii",  
	autoclose: true,
	 weekStart: 1,
	 language:  'zh-CN',
	pickerPosition: "bottom-left"
});
</script>
<script>
//<![CDATA[
jquery = jQuery.noConflict();
/*  放大镜js */
jquery(function(){
	jquery('.farmingMage_pics3 a').click(function(){
		jquery(this).next().css('display','block')
		.parent().siblings().children('a').next().hide();
		jquery('.MagnifierClose').click(function(){
			jquery(this).parent().slideUp(0);	
		});
	});
	jquery('.farmingMage_pics3 a').blur(function(){
		jquery(this).next('.farmingMage_Magnifier').fadeOut();	
		jquery(this).next('.farmingMage_Magnifier').css('top','0');	
	});	
});

function removeP(plantId){
	   var type = 1;
	   if(confirm('确定删除吗？')){
		   removePlant(plantId,type);
		   if(confirm('请确认是否删除相应的的农事管理中农事计划与记录')){
			   type=2;
			   removePlant(plantId,type);
		   }else{
			   
		   }
		   window.location.href=jquery("#bn_left6").attr("href");
	   }
}    
function mym3(iiId,rpId){
	inpiview(iiId,rpId);
	
}
function huidiao3(){
	jquery('#myModal3').show();
}

function changeGoodsBatch(obj,inputsId){
    var batch=jquery(obj).val();
    if(null==batch){
    	batch="";
    }       
    searchGoodsCount(batch.toString(),inputsId);
}
function changeGoodsBatch_next(data){
	var inputsId=data.inputsInfoId; 
	var msg=data.promptMessage;   
	if(typeof(data.goodsCount) != "undefined"){
		jquery('#goodsCount_'+inputsId).html(data.goodsCount);
		jquery('#goodsCount_'+inputsId).attr("title",data.goodsCount);
	}   
	if(msg!=""){
		alert("请选择同一单位的入库批次!");
		var goodsBatchids=jquery("#batch_"+inputsId+" select").val().toString();
		var batchValue=goodsBatchids.replace(","+msg,"").split(",");
		jquery("#batch_"+inputsId+" select").selectpicker('val',batchValue);			
	}
}

function isFloat(value){
	var mny =RegExp(/^([0-9]+(\.?))?[0-9]+$/);
	return mny.test(value);
}
var goodsCount=0.0;
//农事投入品提交验证
function submitRecord(){
	var trLength=jQuery("#addInputsTable tr").length;
	if(trLength<=1){
		alert("请选择投入品！");
		return false;
	}
	var inputsRecordStr='{"inputsDatas":[';
   	for(var i=1;i<trLength;i++){   	   	
   		var inputsId=jQuery("#addInputsTable tr:eq("+i+") td:eq(0) input:eq(0)").val();
   		var unitId=jQuery("#addInputsTable tr:eq("+i+") td:eq(0) input:eq(1)").val();
   		var inputsName=jQuery("#addInputsTable tr:eq("+i+") td:eq(1) p").html();
   		var useNum=jQuery("#addInputsTable tr:eq("+i+") td:eq(4) input:eq(0)").val();
   		var cost=jQuery("#addInputsTable tr:eq("+i+") td:eq(4) input:eq(0)").val();
   		var roomId=jQuery("#addInputsTable tr:eq("+i+") td:eq(5) select").val();
   		var batchId=jQuery("#addInputsTable tr:eq("+i+") td:eq(6) select").val();
   		var farmerId=jQuery("#addInputsTable tr:eq("+i+") td:eq(7) select").val();
   		var goodsCount=jQuery("#addInputsTable tr:eq("+i+") td:eq(8)").html();
			
   		if(""==goodsCount){
   			goodsCount=0;
   		}
   		if(null==useNum || ""==useNum){
   			alert(inputsName+"的使用量不能为空！");
   			return false;
   		}else if(!isFloat(useNum)){
   			alert("请输入正确的"+inputsName+"使用量！");
   			return false;
   		}else if(parseFloat(useNum)>9999999){
   			alert(inputsName+"的使用量不能大于9999999！");
   			return false;
   	   	}
   		if(null==cost || ""==cost){
   			alert(inputsName+"的成本不能为空！");
   			return false;
   		}else if(!isFloat(cost)){
   			alert("请输入正确的"+inputsName+"成本！");
   			return false;
   		}else if(parseFloat(cost)>9999999){
   			alert(inputsName+"的成本不能大于9999999！");
   		   	return false;
   		}
   		if("0"!=roomId){		
   			if(null==batchId || ""==batchId){
   				alert(inputsName+"的入库批次不能为空！");
   				return false;
   			}
   			if(null==farmerId || ""==farmerId){
   				alert(inputsName+"的经办人不能为空！");
   				return false;
   			}
   			if(parseFloat(useNum)>parseFloat(goodsCount)){
   				alert(inputsName+"库存不足，请重新输入使用量！");
   				return false;
   			} 			
   		}	
   		inputsRecordStr+= "{'inputsId':'" +inputsId + "','useNum':'"+ useNum +"','cost':'"+ cost +"','roomId':'"+ roomId +
			"','batchId':'"+ batchId +"','farmerId':'"+ farmerId +"','unitId':'"+ unitId +"'},";		 		
   	}
   	inputsRecordStr = inputsRecordStr.substring(0, inputsRecordStr.length-1) + ']}';
   	jquery("#record_\\:inputsInfoData").val(inputsRecordStr);
 	 var showHid=jquery("#home").css("display");
	 if(showHid=="block"){//农事
		 jquery("#agricultralType").val("1");
	 }else{
		 jquery("#agricultralType").val("2");
     }	 	
 	document.getElementById('record_:submitInputs').disabled = true;
 	return true;
}
function clearNoNum(obj){
 	obj.value = obj.value.replace(/[^\d.]/g,"");//清除“数字”和“.”以外的字符  
 	obj.value = obj.value.replace(/^\./g,"");  //验证第一个字符是数字而不是. 
 	obj.value = obj.value.replace(/\.{2,}/g,"."); //只保留第一个. 清除多余的.   
 	obj.value = obj.value.replace(".","$#$").replace(/\./g,"").replace("$#$",".");
 }
function changeRoom(room,inputsId){
	if(room=="0"){
		var goodsBatchSel="<select class='selectpicker' multiple='multiple' onchange='changeGoodsBatch(this,"+inputsId+")'></select>";
    	var farmerInfoSel="<select class='selectpicker' ></select>";
		jquery('#batch_'+inputsId ).html(goodsBatchSel);
		jquery('#farmer_'+inputsId).html(farmerInfoSel); 	
		jquery('#goodsCount_'+inputsId).html("0"); 	
		jquery('#goodsCount_'+inputsId).attr("title",0);
		jquery('.selectpicker').selectpicker();			
	}else{
		changeStorageRoom(room,inputsId);
	}
}
function changeRoom_next(data){
	var inputsId=data.inputsInfoId;   
	var goodsBatchSel="<select class='selectpicker' multiple='multiple' onchange='changeGoodsBatch(this,"+inputsId+")'>";
	var farmerInfoSel="<select class='selectpicker' >";

	if(typeof(data.goodsBatch) != "undefined"){
		goodsBatchSel+=data.goodsBatch;
	}
	if(typeof(data.farmerInfo) != "undefined"){
		farmerInfoSel+=data.farmerInfo;
	}  	
	if(typeof(data.goodsCount) != "undefined"){
		jquery('#goodsCount_'+inputsId).html(data.goodsCount);
		jquery('#goodsCount_'+inputsId).attr("title",data.goodsCount);
	}  
	if(typeof(data.unitinfoId) != "undefined"){
		jquery('#unit_'+inputsId).val(data.unitinfoId);
	}  		
	goodsBatchSel+="</select>";
	farmerInfoSel+="</select>";	
	jquery('#batch_'+inputsId).html(goodsBatchSel);
	jquery('#farmer_'+inputsId).html(farmerInfoSel);
	jquery('.selectpicker').selectpicker();	
}


//新版添加农事投入品------
window.onload = function (){
	var searchStr = jQuery("#searchInfo_").val();
	if(searchStr == "" || searchStr == null){
		jQuery("#searchInfo_").val("请输入搜索条件");
		jQuery("#searchInfo_").css("color","#a8a8a8");
	}else if(searchStr == "请输入搜索条件"){
		jQuery("#searchInfo_").css("color","#a8a8a8");
	}else{
		jQuery("#searchInfo_").css("color","#000");
	}
}

//(1)删除投入品
function DeleteOutput(obj,inputsId){
	jQuery(obj).parents('.Output_tr').remove();
	jQuery("#check_"+inputsId).removeClass('checked');
	//取消全选
	if(jQuery("#mn_checkall").hasClass('checked')){   		
		jQuery("#mn_checkall").removeClass('checked');
	}
	resetIndex();  	
}
//添加投入品，由于删除，添加操作序号变乱，重新排序
function resetIndex(){
	var trLength=jQuery("#addInputsTable tr").length;
	for(var i=1;i<trLength;i++){
		jQuery("#addInputsTable tr:eq("+i+") td:eq(0) span").html(i);
}
}
//(2-1)投入品表格复选框，全选功能
function OutputCheckAll(obj,oparents){
	if(jQuery(obj).hasClass('checked')){
		//取消全选
		jQuery(obj).removeClass('checked');
		jQuery(oparents).find('td .mn_check').removeClass('checked');
		//只取消本页的
		//jQuery("#addInputsTable .Output_tr").remove();
		var trLength=jQuery("#inputsTable tr").length;
		for(var i=0;i<trLength;i++){
			var inputIds=jQuery("#inputsTable tr:eq("+i+") td:eq(0) input:eq(0)").val();
			jQuery("#addtr_"+inputIds).remove();
		}
		resetIndex();  	
	}else{   		
		//var trLength=jQuery("#inputsTable tr").length;
		//全选时，判断没有选中的添加到投入品，已添加的不在查询
		var inputIds="";   		
		var noCheckObj=jQuery("#inputs_table").find('td .mn_check ').not(".checked");
		var trLength=noCheckObj.length;
		
		for(var i=0;i<trLength;i++){
			//inputIds+=jQuery("#inputsTable tr:eq("+i+") td:eq(0) input:eq(0)").val()+",";
			inputIds+=jQuery(noCheckObj).eq(i).siblings("input:eq(0)").val()+",";
    } 
    if(trLength>1){
    	inputIds=inputIds.substring(0,inputIds.length-1);
    }
		//如果是空，则是没有选中状态,点击后全选
		jQuery(obj).addClass('checked');
		jQuery(oparents).find('td .mn_check').addClass('checked');
		//添加多个投入品，获取库存信息
		changeGoodsInfo(inputIds);  
		jQuery("#login").show();
	}
}
var tableStr="";
//(2-2)如果有一个复选框没有选中，则全选按钮为取消状态，否则相反
function OutputCheck(obj,oparents,oAll,inputsId){
	if(jQuery(obj).hasClass('checked')){
		//取消全选
		jQuery(obj).removeClass('checked');
		//如果一个取消，那么全选为取消状态
		jQuery(oAll).removeClass('checked');
		jQuery('#addtr_'+inputsId).remove();
		resetIndex();  	
	}else{
		jQuery(obj).addClass('checked');
		//如果是空，则是没有选中状态,点击后选择
		var allNum = jQuery(oparents).find('td .mn_check').length;
		var allLen = jQuery(oparents).find('td .mn_check.checked').length;
		//alert('allNum:'+allNum+'allLen:'+allLen)
		//如果个数和选中的个数相等，则全选为选中状态
		if(allLen == allNum){
		jQuery(oAll).addClass('checked');
		}else{
		jQuery(oAll).removeClass('checked');
		}
		//添加一个投入品，获取库存信息
		changeGoodsInfo(inputsId);    		
		jQuery("#login").show();
	}
}
//添加投入品-获取库存信息回调
function storageCallback(resultData){
var inputList=resultData.result;
jquery(inputList).each(function(index, data){
		var inputsId=data.inputsInfoId;
	        var rowNum=jQuery("#addInputsTable tr").length;
	    	var inputName=jQuery("#trp_"+inputsId+" td:eq(2) p").html();
	    	var unitName=jQuery("#trp_"+inputsId+" td:eq(3) p").html();
	    	var storageRoomSel="<select class='selectpicker'  onchange='changeRoom(this.value,"+inputsId+")'><option value='0'>无</option>";
	    	var goodsBatchSel="<select class='selectpicker' multiple='multiple' onchange='changeGoodsBatch(this,"+inputsId+")'>";
	    	var farmerInfoSel="<select class='selectpicker' >";
	    	if(typeof(data.storageRoom) != "undefined"){
	    		storageRoomSel+=data.storageRoom;
	    	} 
	    	if(typeof(data.goodsBatch) != "undefined"){
	    		goodsBatchSel+=data.goodsBatch;
	    	}
	    	if(typeof(data.farmerInfo) != "undefined"){
	    		farmerInfoSel+=data.farmerInfo;
	    	}  	
	    	storageRoomSel+="</select>";
	    	goodsBatchSel+="</select>";
	    	farmerInfoSel+="</select>";
	    	
	    	tableStr="<tr class=\"Output_tr\" id='addtr_"+inputsId+"'>"+
		    	"<td class=\"br_bt br_rt\">"+
	    		"<input type='hidden' value='"+inputsId+"'/>"+
		    		"<input type='hidden' value='' id='unit_"+inputsId+"'/><span>"+rowNum+"</span></td>"+
	    		"<td class=\"br_bt br_rt\"><p class=\"ellipsis\" title='"+inputName+"'>"+inputName+"</p></td>"+
			    "<td class=\"br_bt br_rt\"><p class=\"ellipsis\" title='"+unitName+"'>"+unitName+"</p></td>"+  	
		    	"<td class=\"br_bt br_rt\">"+
		    		"<input class=\"Output_input\"></input>"+
		    	"</td>"+
		    	"<td class=\"br_bt br_rt\">"+
		    		"<input class=\"Output_input\" value='0'></input>"+
		    	"</td>"+
		    	"<td class=\"br_bt br_rt\">"+
			    	"<div class=\"Output_selectpicker\" id='room_"+inputsId+"'>"+storageRoomSel+"</div>"+
		    	"</td>"+
		    	"<td class=\"br_bt br_rt\">"+
		    		"<div class=\"Output_selectpicker\" id='batch_"+inputsId+"'>"+goodsBatchSel+"</div>"+
		    	"</td>"+
		    	"<td class=\"br_bt br_rt\">"+
					"<div class=\"Output_selectpicker\" id='farmer_"+inputsId+"'>"+farmerInfoSel+"</div>"+
				"</td>"+
		    	"<td class=\"br_bt br_rt\" style='overflow: hidden;' id='goodsCount_"+inputsId+"'>0</td>"+
		    	"<td class=\"br_bt\">"+
		    		"<a href=\"javascript:;\" onclick=\"DeleteOutput(this,"+inputsId+")\">删除</a>"+
		    	"</td>"+
	    	"</tr>";
	    	jquery("#addInputsTable").append(tableStr);
	});    
	jquery('.selectpicker').selectpicker();			
	jQuery("#login").hide();
}
//(3)获取焦点，失去焦点
function FocusFn(obj,oColor,txt_val){
	if(jQuery(obj).val()==txt_val){
		jQuery(obj).val('');
		jQuery(obj).css('color',oColor)
	}
}
function BlurFn(obj,oColor,txt_val){
	if(jQuery(obj).val()==''){
		jQuery(obj).val(txt_val);
		jQuery(obj).css('color',oColor)
	}
}
//投入品列表信息查询
function searchInputs(pageNum){
	var dataStandard=jquery("#dataStandard").val();
	var inputType=jquery("#inputType").val();
	var searchText=jquery("#searchInputText").val();
	if(searchText=="请输入查询内容"){
		searchText="";
	}
	searchInputsList(inputType,dataStandard,searchText,pageNum);
	jquery("#login").show();
}
//翻页
function inputsJump(inputsPageNum){
	searchInputs(inputsPageNum);
}
function searchInputsList_next(){
	var trLength=jQuery("#inputsTable tr").length;
	for(var i=1;i<trLength;i++){
		var inputIds=jQuery("#inputsTable tr:eq("+i+") td:eq(0) input:eq(0)").val();
		if(jquery("#addtr_"+inputIds).length>0){
			jquery("#check_"+inputIds).addClass('checked');
		}
	}
	var allNum = jQuery("#inputs_table").find('td .mn_check').length;
	var allLen = jQuery("#inputs_table").find('td .mn_check.checked').length;
	//alert('allNum:'+allNum+'allLen:'+allLen)
	//如果个数和选中的个数相等，则全选为选中状态
	if(allLen == allNum && allNum>0){
		jQuery("#mn_checkall").addClass('checked');
	}else{
		jQuery("#mn_checkall").removeClass('checked');
	}
	jQuery("#login").hide();
}
//]]>
</script>
		</td>
	</ui:define>

</ui:composition>

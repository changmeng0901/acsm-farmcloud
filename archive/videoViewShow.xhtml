<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<f:view xmlns="http://www.w3.org/1999/xhtml"
   xmlns:ui="http://java.sun.com/jsf/facelets"
   xmlns:f="http://java.sun.com/jsf/core"
   xmlns:h="http://java.sun.com/jsf/html"
   xmlns:a="http://richfaces.org/a4j"
   xmlns:s="http://jboss.com/products/seam/taglib"
   xmlns:rich="http://richfaces.org/rich"
   contentType="text/html">
<html> 
   <head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
		<title></title>
	<link rel="stylesheet" type="text/css" media="screen" href="#{request.contextPath}/asset/css/bootstrap-select.min.css"/>
      <link href="#{request.contextPath}/asset/css/bootstrap3.min.css" rel="stylesheet"/>
		<script type="text/javascript" src="#{request.contextPath}/asset/new/jquery.js"></script>
		<script type="text/javascript" src="#{request.contextPath}/asset/new/bootstrap.min.js"></script>
<style>
html,body,div,p,a,ul,ol,li{margin:0;padding:0;}
html{ height:auto; background:#fff;}
body{ height:auto;}
.videoTeach-wap{ position:relative; background:#000 url(#{request.contextPath}/asset/images/jiankong_videobg.jpg) no-repeat center center;}
.videoTeach{ position:absolute; left:50%; top:50%; margin-left:0; margin-top:0; width:340px; height:267px;}
.videoTeach h3{ margin:0 0 40px; font-size:18px; font-weight:bold; color:#fff;}
/*监控悬浮框*/
.clear{clear:both;}
.clear:before, .clear:after{display:block;content:"";height:0;visibility:visible;clear:both;}
ul,ol{margin-bottom:0;}
.m_close{position:absolute;right:20px;top:20px;width:16px;height:16px;cursor:pointer;}
.m_close img{width:100%;height:100%;}
.monitor_suspend{position:absolute-;left:50%-;top:50%-;z-index:2;width:684px;height:550px;margin-left:-342px-;margin-top:-225px-;background-color:#000;}
.tab_header{padding-top:28px;text-align:center;}
.tab_header .titem{position:relative;display:inline-block;width:146px;height:36px;line-height:36px;padding:0 24px-; text-align:center;vertical-align:top;font-size:14px;color:#fff;cursor:pointer;}
.tab_header .titem.dq_cur{background-color:#588ca8;border-radius:18px;box-shadow:inset 0px 0px 5px #474747;}
.tab_header .titem .icon_hjsk{width:20px;height:20px;margin-right:5px;vertical-align:middle;margin-top:-2px;}
.tab_header .input-group .btn{ height:36px;padding:0;border:0;background:none;font-size:14px;color:#fff;}
.tab_header .input-group .dropdown-toggle img{width:20px;height:20px;vertical-align:middle;margin-top:-2px;margin-right:5px;}
.tab_header .input-group .dropdown-menu{width:140px;margin-left:-24px;margin-top:20px;padding-left:5px;padding-right:5px;box-sizing:border-box;box-shadow:none !important;border:0;border-color:#588ca8;border-radius:0;background-color:#588ca8;overflow:hidden;}
.tab_header .input-group-btn{position:relative;width:inherit;}
.tab_header .input-group-btn.open .i_arrow{position:absolute;right:0;top:36px;width:0;height:0;content:"";border-width:10px 10px 10px 10px;border-style: solid solid solid solid;border-color:transparent transparent #588ca8 transparent;}
.tab_header .dropdown-menu > li.l_line{border-bottom:1px solid #9fb8c5;}
.tab_header .dropdown-menu > li.dq_cur{background-color:#6a9eb8;}
.tab_header .dropdown-menu > li > a{padding-top:8px;padding-bottom:8px;font-size:14px;color:#fff;}
.tab_header .dropdown-menu > li > a img{width:20px;height:20px;margin-right:10px;margin-left:14px;}
.tab_header .dropdown-menu > li > a:hover{background:none;}
.tab_header .item_live{display:inline-block;vertical-align:top;height:36px;line-height:36px;}
.tab_header .item_live .icon_skzb{width:20px;height:20px;margin-right:5px;vertical-align:middle;margin-top:-2px;}
.tab_header .live_size{display:inline-block;vertical-align:top;height:36px;line-height:36px;}
.tab_header .live_size .icon_skzb{width:20px;height:20px;margin-right:5px;vertical-align:middle;margin-top:-2px;}
.tab_header .live_size .icon_size{float:right;border-radius:0 18px 18px 0;margin-right:-12px;margin-left:14px;display:inline-block;width:36px;height:36px;vertical-align:top;border-left:1px solid #000;background:#000 url(/asset/images/archive/icon_circleqh.png) no-repeat center center;}
.tab_header .titem.dq_cur .icon_size{ border-left:1px solid #8db6cc;background-color:#659cb9;}
.tab_content{padding:20px 30px;}
.tab_content .m_panel{display:none;}
.tab_content .m_panel.dq_cur{display:block;overflow:hidden;}
.tab_content .panel_video, .tab_content .video_back{width:624px;height:446px;border:1px solid #383a39;box-sizing:border-box;}
.tab_content .panel_video .video, .tab_content .panel_video .video-js, .tab_content .video_back .video, .tab_content .video_back .video-js{width:100%;height:100%;}
.live_broadcast{overflow:hidden}
.live_broadcast .broadcast_block, .live_broadcast .video_block{width:624px;height:446px;}
/*生长图片焦点图*/
.growth_figure{width:624px;}
.figure_header{position:relative;width:624px;height:330px;overflow:hidden;}
.figure_header .btnb_prev, .figure_header .btnb_next{position:absolute;top:50%;z-index:1;width:30px;height:30px;margin-top:-15px;cursor:pointer;}
.figure_header .btnb_prev{left:15px;background:url(#{request.contextPath}/asset/images/plant/figure_biglt.png) no-repeat center center;}
.figure_header .btnb_next{right:15px;background:url(#{request.contextPath}/asset/images/plant/figure_bigrt.png) no-repeat center center;}
.biger_figure{position:absolute;height:260px;}
.biger_figure li{float:left;width:624px;height:330px;}
.biger_figure li img{width:100%;height:100%;}
.biger_figure img{width:100%;height:100%;}
.figure_footer{width:100%;margin-top:20px;}
.figure_footer .btns_prev, .figure_footer .btns_next{width:30px;height:94px;cursor:pointer;}
.figure_footer .btns_prev{float:left;background:#333 url(#{request.contextPath}/asset/images/plant/figure_smalllt2.png) no-repeat center center;}
.figure_footer .btns_next{float:right;background:#333 url(#{request.contextPath}/asset/images/plant/figure_smallrt2.png) no-repeat center center;}
.figure_footer .btns_prev:hover, .figure_footer .btns_next:hover{background-color:#2b2b2b;}
.small_figure_block{position:relative;float:left;width:540px;height:94px;margin-left:18px;overflow:hidden;}
.small_figure{position:absolute;left:0;top:0;min-width:300px;}
.small_figure li{float:left;width:94px;height:94px;margin-right:14px;box-sizing:border-box;}
.small_figure li.dq_cur{border:2px solid #73b8de;}
.small_figure li img{width:100%;height:100%;}


.videobut,.videobut_{float:left;width:321px;height:77px;}

.videobut_{background:url(../asset/images/growth/videobuts.png) no-repeat;}
.videobut{background:url(../asset/images/growth/videobutk.png) no-repeat;}

#videoimg{width: 620px; height: 100%; overflow: hidden; text-align: center;}
.seconddiv{position:relative;background: #000; width: 620px; padding-top: 10px; padding-bottom: 10px; height: 70px; display: none; margin-top:0px;}
.big_screen{padding-bottom:70px;}
.big_screen #videoimg,
.big_screen #divPlugin{position:absolute;left:0;top:0;width:100%;height:100%;overflow:hidden-; background:#000;}
.big_screen #divPlugin embed,
.big_screen #divPlugin object{position:relative;left:0;top:0;z-index:10;width:100%;height:100%;}
.big_screen .seconddiv{position:absolute;left:0;bottom:0;width:100%;height:70px;margin:0;}
.big_screen .videobut, 
.big_screen .videobut_{ position:absolute; left:50%; top:17px;margin-left:-160px;}

</style>
   </head>
<body>
<script type="text/javascript" src="#{request.contextPath}/growth/hls.min.js"></script>
#{newPlantInfoHome.getvideoMess()}

<!-- 监控悬浮框  -->
<div class="monitor_suspend" id="monitor_suspend">
	<!-- <i class="m_close"><img src="#{request.contextPath}/asset/images/plant/plantinggl_ico08.png" /></i> -->
	<ol class="tab_header">
		<h:outputText rendered="#{newPlantInfoHome.initType ne 2}">
        <li class="titem">
        	<div class="item_live" id="videoShow" style="display:inline-block-;width: 133px;"><img class="icon_skzb" src="#{request.contextPath}/asset/images/plant/environMonitor_icon2.png" />实况直播</div>
        	<div class="live_size" style="display:none;">
        		<img class="icon_skzb" src="#{request.contextPath}/asset/images/plant/environMonitor_icon2.png" />实况直播
        		<span class="icon_size" ><input id="videoShowType" type="hidden" value="1"/></span>
        	</div>
        	<!-- <div class="input-group" style="display:table-;">
            <div class="input-group-btn">
            	<i class="i_arrow"></i>
            	<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" id="videoButton"><img src="#{request.contextPath}/asset/images/plant/environMonitor_icon2.png" />实况直播 <span id="xuanze" class="caret"></span></button>
                <ul class="dropdown-menu" role="menu" id="choose">
                    <li class="item_jk dq_cur l_line"><a href="javascript:void(0);" ><img src="#{request.contextPath}/asset/images/plant/environMonitor_icon3.png" />监控</a></li>
                    <li class="item_kz"><a href="javascript:void(0);" ><img src="#{request.contextPath}/asset/images/plant/environMonitor_icon4.png" />控制</a></li>
                </ul>
            </div>
            </div> -->
        </li> 
        </h:outputText> 
        <h:outputText rendered="#{newPlantInfoHome.growImgs.size() gt 0 or  newPlantInfoHome.deviceType eq 305}">
    	<li class="titem"><img class="icon_hjsk" src="#{request.contextPath}/asset/images/plant/environMonitor_icon1.png" />环境实况</li>
    	</h:outputText>
    	<h:outputText rendered="#{newPlantInfoHome.initType ne 5 and newPlantInfoHome.growVideoUrl ne '' and newPlantInfoHome.growVideoUrl ne null }">
        <li class="titem"><img class="icon_hjsk" src="#{request.contextPath}/asset/images/plant/environMonitor_icon5.png" />视频追溯</li>
        </h:outputText>
    </ol>
    <div class="tab_content">
    	<h:outputText rendered="#{newPlantInfoHome.initType ne 2}">
    	<div class="m_panel live_broadcast">
    	<div class="jian-video-body"  style="height: 332px;">
            	<div class="imgvideo videoimg" id="videoimg" style="width: 620px-; height: 332px-; overflow: hidden-; text-align: center-;">
            		
            	</div>
            </div>
        	
        <!--实况直播内容-->
        </div>
        </h:outputText>
        <h:outputText rendered="#{newPlantInfoHome.growImgs.size() gt 0 }">  
        <div class="m_panel growth_figure">
        <!--生长图片内容-->
        	<div class="figure_header">
            	<span class="btnb_prev"></span>
                <ul class="biger_figure">
                	<a:repeat value="#{newPlantInfoHome.growImgs}"  var="_var" rowKeyVar="index">
	                	<li><img src="#{_var}" /></li>
	                </a:repeat>
                </ul>
                <span class="btnb_next"></span>
            </div>
            <div class="figure_footer clear">
            	<span class="btns_prev"></span>
                <div class="small_figure_block">
                    <ul class="small_figure">
                        <a:repeat value="#{newPlantInfoHome.growImgs}" var="_var" rowKeyVar="index">
		                	<li><img src="#{_var}" /></li>
		                </a:repeat>
                    </ul>
                </div>
                <span class="btns_next"></span>
            </div>
        <!--生长图片内容-->
        </div>
        </h:outputText>
        <h:outputText rendered="#{newPlantInfoHome.growImgs.size() eq 0 and newPlantInfoHome.deviceType eq 305}">  
        <div class="m_panel growth_figure">
        <!--生长图片内容-->
			<img src="#{request.contextPath}/asset/images/archive/zwtp_video.png"/>
        <!--生长图片内容-->
        </div>
        </h:outputText>
        <h:outputText rendered="#{newPlantInfoHome.initType ne 5 and newPlantInfoHome.growVideoUrl ne '' and newPlantInfoHome.growVideoUrl ne null }">
        <div class="m_panel video_back ">
        <!--视频追溯内容-->
        	<div class="video player3">
            <div class="videoTeach-wap">
			<div class="videoTeach">
			<!--HLSPlayer代码开始-->
			<div id="player">
			<div class="video" id="HLSPlayer" style="width: 622px; margin-left: -311px; height: 444px;" >
			<script language="JavaScript">
			<!--
			var vID     = ""; 
			var vWidth  = "100%";//播放器宽度设置
			var vHeight = "100%";//播放器宽度设置
			var vPlayer = "#{request.contextPath}/document/player.swf";//播放器文件
			var vHLSset = "#{request.contextPath}/document/HLS.swf";//HLS配置
			var vPic    = "";//视频缩略图
			var vCssurl = "#{request.contextPath}/asset/css/mini.css";//移动端CSS应用文件
			var vHLSurl = "#{newPlantInfoHome.growVideoUrl}";
			//-->
			</script>
			<script type="text/javascript" src="#{request.contextPath}/growth/hls.min.js"></script>
			</div>
			</div>
			<!--HLSPlayer代码结束-->
			</div>
			</div>
            </div>
        <!--视频追溯内容-->
        </div>
        </h:outputText>
        
        <div id="haikangNew" style="" class="seconddiv">
	                  
	                  <div class="videocj" style="float:left; margin-left:20px;margin-top:10px; z-index: 99999">
	          				<img class="fdimg1" src="#{request.contextPath}/asset/images/fangda.png" style="cursor:pointer;" onclick="maxwindow()"/>  
	          				<img class="fdimg2" src="#{request.contextPath}/asset/images/suoxiao.png" style="cursor:pointer;display:none;" onclick="minwindow()"/>                   
	                  </div> 
	                 <div class="videobut vb" style="position:relative-;z-index:1-;">
	                     <table width="107" height="77" cellpadding="0" cellspacing="0" style="float:left;"> 
	                     		<tr>
	                          	<td  valign="middle" align="center" id="vbtn">
	                              	<a id="v1" href="Javascript: void(0)" onmousedown="PTZZoomout()" onmouseup="PTZZoomStop()"><img src="#{request.contextPath}/asset/images/growth/but_jian.png" width="14" height="14" /></a>
	                              	<a style="display:none" id="v2" href="Javascript: void(0)" onmousedown="PTZMinusTimes()" onmouseup="PTZStop()" onmouseout="PTZStop()"><img src="#{request.contextPath}/asset/images/growth/onbut_jian.png" width="14" height="14" /></a>
	                              </td>
	                          </tr>
	                     </table>  
	                     <table width="66" height="77" cellpadding="0" cellspacing="0" style="float:left; margin-left:28px;"> 
	                     		<tr>
	                          	<td width="22"></td>
	                          	<td width="23" valign="bottom"  id="vbut3">
	                              	<a id="v5" href="Javascript: void(0)" onmousedown="mouseDownPTZControl(1);" onmouseup="mouseUpPTZControl();" onmouseout="mouseUpPTZControl()"><img src="#{request.contextPath}/asset/images/growth/but_up.png" width="12" height="9" /></a>
	                              </td>
	                              <td width="21"></td>
	                          </tr>
	                     		<tr>
	                          	<td valign="middle" id="vbut4">
	                              	<a id="v7" href="Javascript: void(0)" onmousedown="mouseDownPTZControl(3);" onmouseup="mouseUpPTZControl();" onmouseout="mouseUpPTZControl()"><img src="#{request.contextPath}/asset/images/growth/but_left.png" width="9" height="13" /></a>
	                              </td>
	                             <td >
                                  <div style="width: 14px; height: 14px; cursor: pointer;" id="switch"></div>
                                  </td>
	                              <td valign="middle" id="vbut5" >
	                              	<a id="v9" href="Javascript: void(0)" onmousedown="mouseDownPTZControl(4);" onmouseup="mouseUpPTZControl();" onmouseout="mouseUpPTZControl()"><img src="#{request.contextPath}/asset/images/growth/but_right.png" width="9" height="13" /></a>
	                              </td>
	                          </tr>
	                     		<tr>
	                          	<td></td>
	                          	<td valign="top" id="vbut6" >
	                              	<a id="v11" href="Javascript: void(0)" onmousedown="mouseDownPTZControl(2);" onmouseup="mouseUpPTZControl();" onmouseout="mouseUpPTZControl()"><img src="#{request.contextPath}/asset/images/growth/but_down.png" width="12" height="9" /></a>
	                              </td>
	                              <td ></td>
	                          </tr>
	                     </table>                                           
	                     <table width="120" height="77" cellpadding="0" cellspacing="0" style="float:left;"> 
	                     		<tr>
	                          	<td  valign="middle" align="center" id="vbut7" style="margin-left: 0px; margin-right: 0; padding-right:0;">
	                              	<a style="margin-left:10px;" id="v3" href="Javascript: void(0)" onmousedown="PTZZoomIn()" onmouseup="PTZZoomStop()" ><img src="#{request.contextPath}/asset/images/growth/but_jia.png" width="14" height="14" /></a>
	                              </td>
	                          </tr>
	                     </table>  
	                  </div>
	                  <div class="videocj" style="float:right; margin-right:20px;margin-top:22px;z-index:1; ">
	                 	<a style="color: #ff0000;font-size:14px;text-decoration:underline;" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">
	          			<img src="#{request.contextPath}/asset/images/xiazai.png" />                 
	                  </a></div>
	               </div>
        
         <div id="haikangOld" style="" class="seconddiv">
	                  <i class="aerial_bgbtns"></i>
	                  <div class="videocj" style="float:left; margin-left:20px;margin-top:10px; z-index: 99999">
	          						<img class="fdimg1" src="#{request.contextPath}/asset/images/fangda.png" style="cursor:pointer;" onclick="maxwindow()"/>  
	          						<img class="fdimg2" src="#{request.contextPath}/asset/images/suoxiao.png" style="cursor:pointer;display:none;" onclick="minwindow()"/>                   
	                           </div> 
	                 <div class="videobut vb" style="position:relative-;z-index:1-;" >
	                     <table width="107" height="77" cellpadding="0" cellspacing="0" style="float:left;"> 
	                     		<tr>
	                          	<td  valign="middle" align="center" id="vbtn">
	                              	<a id="v1" href="Javascript: void(0)" onmousedown="PTZMinusTimes()" onmouseup="PTZStop()" onmouseout="PTZStop()"><img src="#{request.contextPath}/asset/images/growth/but_jian.png" width="14" height="14" /></a>
	                              </td>
	                          </tr>
	                     </table>  
	                     <table width="66" height="77" cellpadding="0" cellspacing="0" style="float:left; margin-left:28px;"> 
	                     		<tr>
	                          	<td width="22"></td>
	                          	<td width="23" valign="bottom"  id="vbut3">
	                              	<a id="v5" href="Javascript: void(0)" onmousedown="PTZUp()" onmouseup="PTZStop()" onmouseout="PTZStop()"><img src="#{request.contextPath}/asset/images/growth/but_up.png" width="12" height="9" /></a>
	                              </td>
	                              <td width="21"></td>
	                          </tr>
	                     		<tr>
	                          	<td valign="middle" id="vbut4">
	                              	<a id="v7" href="Javascript: void(0)" onmousedown="PTZLeft()" onmouseup="PTZStop()" onmouseout="PTZStop()"><img src="#{request.contextPath}/asset/images/growth/but_left.png" width="9" height="13" /></a>
	                              </td>
	                             <td >
                                  <div style="width: 14px; height: 14px; cursor: pointer;" id="switch2"></div>
                                  </td>
	                              <td valign="middle" id="vbut5" >
	                              	<a id="v9" href="Javascript: void(0)" onmousedown="PTZRight()" onmouseup="PTZStop()" onmouseout="PTZStop()"><img src="#{request.contextPath}/asset/images/growth/but_right.png" width="9" height="13" /></a>
	                              </td>
	                          </tr>
	                     		<tr>
	                          	<td></td>
	                          	<td valign="top" id="vbut6" >
	                              	<a id="v11" href="Javascript: void(0)" onmousedown="PTZDown()" onmouseup="PTZStop()" onmouseout="PTZStop()"><img src="#{request.contextPath}/asset/images/growth/but_down.png" width="12" height="9" /></a>
	                              </td>
	                              <td ></td>
	                          </tr>
	                     </table>                                           
	                     <table width="120" height="77" cellpadding="0" cellspacing="0" style="float:left;"> 
	                     		<tr>
	                          	<td  valign="middle" align="center" id="vbut7" style="margin-left: 0px; margin-right: 0; padding-right: 0;">
	                              	<a style="margin-left:10px;" id="v3" href="Javascript: void(0)" onmousedown="PTZAddTimes()" onmouseup="PTZStop()" onmouseout="PTZStop()"><img src="#{request.contextPath}/asset/images/growth/but_jia.png" width="14" height="14" /></a>
	                              </td>
	                          </tr>
	                     </table>  
	                  </div>
	                  <div class="videocj" style="float:right; margin-right:20px;margin-top:22px; ">
	                 	<a style="color: #ff0000;font-size:14px;text-decoration:underline;" href="http://img1.farmeasy.cn/plugin/cmsocx.exe">
	          			<img src="#{request.contextPath}/asset/images/xiazai.png" />                 
	                  </a></div>
	               </div>
    </div>
</div>
<!-- 监控悬浮框 -->
<script type="text/javascript" src="#{request.contextPath}/asset/js/highcharts.js"></script>

<script type="text/javascript">
//<![CDATA[
jQuery(function(){
	//---------------------------------------------------------------------------------
	//监控悬浮框切换效果
	jQuery('.tab_header .titem').each(function(index, elem) {
        jQuery('.tab_header .titem').eq(0).addClass('dq_cur');
		jQuery('.tab_content .m_panel').eq(0).show();
		jQuery(elem).click(function(){
			jQuery(this).addClass('dq_cur').siblings().removeClass('dq_cur');
			jQuery('.tab_content .m_panel').eq(jQuery(this).index()).show().siblings('.m_panel').hide();
			jQuery('.icon_size').unbind();
			var aaa=jQuery(this).html();
			if(aaa.indexOf('实况直播') >= 0){
				var types = jQuery('#videoShowType').val();
				if(types==2||type=='2'){
					if (-1 == WebVideoCtrl.I_CheckPluginInstall()) {
						 jQuery(".jian-video-body").css({'height':440});
						 jQuery(".videoimg").html("");
						 jQuery(".videoimg").css({'height':440});
						 jQuery(".videoimg").append('<img src="#{request.contextPath}/asset/images/nosp.png" id="imgShow" style="width:620px;height:440px;"/><a class="Download" id="videoActiveX"  style="margin: 496px 0px -74px 490px; color: rgb(255, 255, 255); height: 23px; position: fixed; z-index: 999; left: 0px; bottom: 0px; right: 0px; top: 0px; width: 157px;" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
						 jQuery("#haikangOld").hide();
					 }else{
						 showVideo2();
					 }
				}
				jQuery('.icon_size').click(function(){
					var aaa=jQuery('#videoShowType').val();
					if(aaa==1||aaa=='1'){
						//未安装视频插件
						 if (-1 == WebVideoCtrl.I_CheckPluginInstall()) {
							 jQuery(".jian-video-body").css({'height':440});
							 jQuery(".videoimg").html("");
							 jQuery(".videoimg").css({'height':440});
							 jQuery(".videoimg").append('<img src="#{request.contextPath}/asset/images/nosp.png" style="width:620px;height:440px;" id="imgShow"/><a class="Download" id="videoActiveX"  style="margin: 496px 0px -74px 490px; color: rgb(255, 255, 255); height: 23px; position: fixed; z-index: 999; left: 0px; bottom: 0px; right: 0px; top: 0px; width: 157px;" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
							 jQuery("#haikangNew").hide();
							 jQuery("#haikangOld").hide();	
						 }else{
							 showVideo2();
						 }
						 type=2;
						 jQuery('#videoShowType').val(2);
					}else{
						jQuery(this).addClass('dq_cur').siblings().removeClass('dq_cur');	
						showVideo3();
						type=1;
						jQuery("#haikangNew").hide();
						jQuery("#haikangOld").hide();
						jQuery('#videoShowType').val(1);
					}
				});
			}else{
				jQuery("#haikangNew").hide();
				jQuery("#haikangOld").hide();
			}
		});
    });
	jQuery('.tab_header .dropdown-menu .item_jk').click(function(){
		jQuery(this).addClass('dq_cur').siblings().removeClass('dq_cur');	
		showVideo3();
		type=1;
		jQuery("#haikangNew").hide();
		jQuery("#haikangOld").hide();
	});


	jQuery('.tab_header .dropdown-menu .item_kz').click(function(){
		jQuery(this).addClass('dq_cur').siblings().removeClass('dq_cur');	
		 //未安装视频插件
		 if (-1 == WebVideoCtrl.I_CheckPluginInstall()) {
			 jQuery(".jian-video-body").css({'height':440});
			 jQuery(".videoimg").html("");
			 jQuery(".videoimg").css({'height':440});
			 jQuery(".videoimg").append('<img src="#{request.contextPath}/asset/images/nosp.png" style="width:620px;height:440px;" id="imgShow"/><a class="Download" id="videoActiveX"  style="margin: 496px 0px -74px 490px; color: rgb(255, 255, 255); height: 23px; position: fixed; z-index: 999; left: 0px; bottom: 0px; right: 0px; top: 0px; width: 157px;" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
			 jQuery("#haikangNew").hide();
			 jQuery("#haikangOld").hide();	
		 }else{
			 showVideo2();
		 }
		 type=2;
	});
	jQuery('.icon_size').click(function(){
		var aaa=jQuery('#videoShowType').val();
		if(aaa==1||aaa=='1'){
			//未安装视频插件
			 if (-1 == WebVideoCtrl.I_CheckPluginInstall()) {
				 jQuery(".jian-video-body").css({'height':440});
				 jQuery(".videoimg").html("");
				 jQuery(".videoimg").css({'height':440});
				 jQuery(".videoimg").append('<img src="#{request.contextPath}/asset/images/nosp.png" style="width:620px;height:440px;" id="imgShow"/><a class="Download" id="videoActiveX"  style="margin: 496px 0px -74px 490px; color: rgb(255, 255, 255); height: 23px; position: fixed; z-index: 999; left: 0px; bottom: 0px; right: 0px; top: 0px; width: 157px;" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
				 jQuery("#haikangNew").hide();
				 jQuery("#haikangOld").hide();	
			 }else{
				 showVideo2();
			 }
			 type=2;
			 jQuery('#videoShowType').val(2);
		}else{
			jQuery(this).addClass('dq_cur').siblings().removeClass('dq_cur');	
			showVideo3();
			type=1;
			jQuery("#haikangNew").hide();
			jQuery("#haikangOld").hide();
			jQuery('#videoShowType').val(1);
		}
	});
	
	//监控下拉选择
	jQuery('.tab_header .dropdown-menu > li').each(function(index, elem){
		jQuery('.tab_content .m_panel .panel_video').eq(0).show().siblings().hide();
		jQuery(elem).click(function(){
			jQuery(this).addClass('dq_cur').siblings().removeClass('dq_cur');
			jQuery('.tab_content .m_panel .panel_video').eq(jQuery(this).index()).show().siblings().hide();
		});
	});
	
	//监控悬浮--生长图片轮播图
	var oSLinum = 0;
	var oBLinum = 0;
	var oBlength = jQuery('.biger_figure li').length;
	var oSMaxlength = oBlength-5;
	var oBMaxlength = oBlength-1;
	var oSLiwidth = jQuery('.small_figure li').outerWidth()+14;
	var oBLiwidth = jQuery('.biger_figure li').outerWidth();
	jQuery('.small_figure').width( oSLiwidth*oBlength )
	jQuery('.biger_figure').width( oBLiwidth*oBlength )
	
	if( oBMaxlength < 0 ){
		jQuery('.btnb_prev').click(function(){
			//大图--左侧按钮点击事件
			oBLinum = 0;	
			jQuery('.biger_figure').animate({left:-oBLiwidth*oBLinum} )	
		});
		jQuery('.btnb_next').click(function(){
			//大图--右侧按钮点击事件
			oBLinum = 0;	
			jQuery('.biger_figure').animate({left:-oBLiwidth*oBLinum} )	
		});
	}else{
		jQuery('.btnb_prev').click(function(){
			//大图--左侧按钮点击事件
			oBLinum--;
			if( oBLinum < 0 ){
				oBLinum = 0;	
			}	
			if( oBLinum > oSMaxlength){
				jQuery('.small_figure').animate({left:-oSLiwidth*oSMaxlength} )	;	
			}else{
				jQuery('.small_figure').animate({left:-oSLiwidth*oBLinum} )	;	
			}
			jQuery('.biger_figure').animate({left:-oBLiwidth*oBLinum} )	;
			//jQuery('.small_figure').animate({left:-oSLiwidth*oBLinum} )	;
			jQuery('.small_figure li').eq(oBLinum).addClass('dq_cur').siblings().removeClass('dq_cur');
		});
		jQuery('.btnb_next').click(function(){
			//大图--右侧按钮点击事件
			oBLinum++;
			if( oBLinum > oBMaxlength){
				oBLinum = oBMaxlength	
			}
			if( oBLinum > oSMaxlength){
				jQuery('.small_figure').animate({left:-oSLiwidth*oSMaxlength} )	;	
			}else{
				jQuery('.small_figure').animate({left:-oSLiwidth*oBLinum} )	;	
			}
			jQuery('.biger_figure').animate({left:-oBLiwidth*oBLinum} )	;
			//jQuery('.small_figure').animate({left:-oSLiwidth*oBLinum} )	;
			jQuery('.small_figure li').eq(oBLinum).addClass('dq_cur').siblings().removeClass('dq_cur');
		});	
	}
	
	if( oSMaxlength < 0 ){
		jQuery('.figure_footer .btns_prev').click(function(){
			//缩略图--左侧按钮点击事件
			oSLinum = 0;	
			jQuery('.small_figure').animate({left:-oSLiwidth*oSLinum} )	
		});
		jQuery('.figure_footer .btns_next').click(function(){
			//缩略图--右侧按钮点击事件
			oSLinum = 0;	
			jQuery('.small_figure').animate({left:-oSLiwidth*oSLinum} )	
		});
	}else{
		jQuery('.figure_footer .btns_prev').click(function(){
			//缩略图--左侧按钮点击事件
			oSLinum--;
			if( oSLinum < 0 ){
				oSLinum = 0;	
			}	
			jQuery('.small_figure').animate({left:-oSLiwidth*oSLinum} )	
		});
		jQuery('.figure_footer .btns_next').click(function(){
			//缩略图--右侧按钮点击事件
			oSLinum++;
			if( oSLinum > oSMaxlength){
				oSLinum = oSMaxlength	
			}
			jQuery('.small_figure').animate({left:-oSLiwidth*oSLinum} )	
		});	
	}
	
	jQuery('.small_figure li').each(function(index, elem) {
		//缩略图--点击小图事件
        jQuery(elem).click(function(){
			jQuery(this).addClass('dq_cur').siblings().removeClass('dq_cur');	
			jQuery('.biger_figure').animate({left:-oBLiwidth*jQuery(this).index()} )	;
			return oBLinum=jQuery(this).index()
		});
    });

	jQuery("#videoButton").click(function(){
		jQuery(this).addClass('dq_cur').siblings().removeClass('dq_cur');
		jQuery('.tab_content .m_panel').eq(jQuery(this).index()).show().siblings('.m_panel').hide();	
		var a=jQuery('.tab_header .titem').html();
		if(a.indexOf('实况直播') >= 0){
			if(type==1){
				showVideo3();
			}else if(type==2){
				//未安装视频插件
				jQuery('.live_broadcast').show();
				jQuery('.tab_header .dropdown-menu .item_kz').click(); 
			}
		}
	});

	jQuery("#videoShow").click(function(){
		jQuery('.tab_content .m_panel').eq(0).show();
		var a=jQuery('.tab_header .titem').html();
		if(a.indexOf('实况直播') >= 0){
			showVideo();
			/* if (-1 == WebVideoCtrl.I_CheckPluginInstall()) {
				 jQuery(".videoimg").html("");
				 jQuery(".videoimg").append('<img src="#{request.contextPath}/asset/images/nosp.png" id="imgShow"/><a class="Download" id="videoActiveX" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');	
			 }else{
				 showVideo2();
			 } */
		}
	});
	
	var a=jQuery('.tab_header .titem').html();
	if(a.indexOf('实况直播') >= 0){
		WebVideoCtrl.I_Stop();
		showVideo();
	}

});


	var video = #{newPlantInfoHome.result};
	var isWindow = 1;
	var isIE = 1;  //1.ie,2.其它
	var webcam_url = "";
	var whattype = 0;
	var g_iWndIndex = 0;
	var streamType = 2;
	var type=1;
	function showVideo2(){
		 if(video.device_type==301 ||video.device_type==305){
			 if(video.type == 1){
				 if(isWindow==1 && isIE == 1){
					 jQuery(".videoimg").html("");
					 if(video.type == 1){
						 jQuery("#haikangNew").hide();
						 jQuery("#haikangOld").show();
						 jQuery(".jian-video-body").css({height:332});
						 jQuery("#videoimg").height('332px');
						 //硬盘视频
						 jQuery(".videoimg").append("<object classid='clsid:D5E14042-7BF6-4E24-8B01-2F453E8154D7' id='PlayViewOCX' width='566' height='400' style='margin-top:-25px;margin-bottom:-30px;' name='ocx'/>");
						 if(document.all.PlayViewOCX.object != null){
							 jQuery(".btns-lt1").hide();
							 jQuery(".btns-lt2").hide();
							 jQuery(".btns-line").hide();
							 jQuery(".btns-lt3").hide();
							 jQuery(".btns-lt4").hide();
							 setTimeout(function(){
								 jQuery("#videoimg")[0].style["border-top"]="1px solid #FF8A24";
								 },1);
							 whattype = 1;
							 var OCXobj = document.getElementById("PlayViewOCX");
					 	     OCXobj.SetOcxMode(0); 
					 	     OCXobj.SetWndNum(1);  
					 	     OCXobj.SetCapturParam("C:\\camera",0);
					    	 var strName = video.video_name;										//设备名称
					         var strIP = video.app_ip;    				        					//设备ip
					         var strAppName = video.app_username;									//用户名 
					         var strAppPwd = video.app_password;					    			//密码 
					         var strPort = video.app_port;				    						//设备端口号
					         var ChanNum1 = video.app_device_video_channel_no;  					//通道号 
					         var cameraID1 = video.app_device_video_channel_no;
					         var strXML = "<?xml version='1.0'?><Parament><CameraName>"+strName+"</CameraName><CameraID>" + cameraID1 + "</CameraID><DeviceIP>" + 
					   	 	     strIP + "</DeviceIP><DevicePort>" + strPort + "</DevicePort><User>"+ strAppName +"</User><Password>" + 
					   	 		 strAppPwd + "</Password><ChannelNum>"+ ChanNum1 +"</ChannelNum><ProtocolType>0</ProtocolType><StreamType>0</StreamType><Transmits></Transmits></Parament>";
					  	     //var win = OCXobj.GetSelWnd();  
					       	 //OCXobj.StopRealPlay(win); 
					       	 OCXobj.StartTask_Preview_InWnd(strXML,0);  

					       	jQuery("#switch2").closest(".vb").removeAttr("videobut vb").attr("class","videobut vb");
							jQuery("#switch2").click(function(){
								//alert('hshshhshs');
								StopPlayView();
							});
							
						 }else{ 
							 jQuery(".videoimg").html("");
							 jQuery(".videoimg").append('<img src="#{request.contextPath}/asset/images/nosp.png" id="imgShow"/><a class="Download" id="videoActiveX" href="http://img1.farmeasy.cn/plugin/cmsocx.exe">视频插件下载</a>');
						 }
					 }else{
						 jQuery(".jian-video-body").css({height:332});
						 jQuery("#videoimg").height('332px');
						 jQuery(".videoimg").append("<object classid='clsid:EE4EA829-B8DA-4229-AC72-585AF45AD778' standby='Waiting...' id='ppvs'  width='566' height='400' name='ocx1'/>");
						 if(document.all.ppvs.object != null){
							 whattype = 2;
							 jQuery(".btns-lt1").hide();
							 jQuery(".btns-lt2").hide();
							 jQuery(".btns-line").hide();
							 jQuery(".btns-lt3").hide();
							 jQuery(".btns-lt4").hide();
						     var iConnHandle = -1;		//连接设备返回句柄
							 var iPlayHandle = -1;		//播放视频返回句柄 
							 //var iChannel = 1;		//设备视频通道
							 var iStreamType = 0;		//取设备流类型	0：主码流	1：子码流
							 var szAccount= video.sn;
							 var szRegIP = video.ip;
							 var szUserName = video.username;
							 var szPassWord = video.password;
							 var iRegPort = 7660;
						     //7660
							 //流媒体服务IP、端口
							 var iStreamServerPort = 7554;//7554
							 var iPlayConnMode = 0;		//取流方式	0：与设备直连取流	1：通过流媒体转发取流
							 var PlayOCX = document.getElementById("ppvs");
							 iConnHandle = PlayOCX.ConnectDeviceByACS(szAccount, szRegIP, iRegPort,szUserName,szPassWord);
							 if (0 > iConnHandle){
								 jQuery("#showMessage").html("连接设备失败！");
								 jQuery("#showMessageDiv").modal('show');
								 jQuery("body").css("padding-right",0);
							 }else{
								 if ( 0 > iConnHandle){ 
									 jQuery("#showMessage").html("请先连接设备，并确保连接成功！");
									 jQuery("#showMessageDiv").modal('show');
									 jQuery('body').css('padding-right',0);
									 return;
								 } 
								 var PlayOCX = document.getElementById("ppvs");
								 PlayOCX.StreamPlayStartByTCP(szRegIP, iStreamServerPort, szAccount, "1", iStreamType, 1);
							 }
						 }else{
							 jQuery(".videoimg").html(""); 
							 jQuery(".videoimg").append('<img src="#{request.contextPath}/asset/images/nosp.png" id="imgShow"/><a class="Download" id="videoActiveX" href="http://img1.farmeasy.cn/plugin/EHomeActiveX.exe">视频插件下载</a>');
						 }
				     }
				 }else{
					 jQuery(".jian-video-body").css({'height':440});
					 jQuery(".videoimg").html("");
					 jQuery(".videoimg").css({'height':440});
					 jQuery(".videoimg").append('<img src="#{request.contextPath}/asset/images/nosp.png" id="imgShow" style="width:620px;height:440px;"/>');
					 jQuery("#haikangOld").hide();
				 }
			 }else{
				 jQuery("#haikangNew").show();
				 jQuery("#haikangOld").hide();
				 if(isWindow == 1 && isIE != 3){
					 //未安装视频插件
					 jQuery(".jian-video-body").css({height:332});
					 jQuery("#videoimg").height('332px');
					 if (-1 == WebVideoCtrl.I_CheckPluginInstall()) {
						 jQuery(".jian-video-body").css({'height':440});
						 jQuery(".videoimg").html("");
						 jQuery(".videoimg").css({'height':440});
						 jQuery(".videoimg").append('<img src="#{request.contextPath}/asset/images/nosp.png" style="width:620px;height:440px;" id="imgShow"/><a class="Download" id="videoActiveX"  style="margin: 496px 0px -74px 490px; color: rgb(255, 255, 255); height: 23px; position: fixed; z-index: 999; left: 0px; bottom: 0px; right: 0px; top: 0px; width: 157px;" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
						 jQuery("#haikangNew").hide();
						 jQuery("#haikangOld").hide();
					 }else{
						 
						 jQuery(".videoimg").html("");
						 jQuery(".videoimg").html("<div id='divPlugin' class='plugin' style='width:100%;height:100%;'></div>");
						 // 初始化插件参数及插入插件
						 WebVideoCtrl.I_InitPlugin("100%", "100%", {
							iWndowType:1, 
							cbSelWnd: function(){}
						 });
						 WebVideoCtrl.I_InsertOBJECTPlugin("divPlugin"); 
						 
						 var bZeroChannel = false;
						 var iChannelID = parseInt(video.app_device_video_channel_no, 10);//通道列表
						 console.log(video.app_ip+"----"+video.app_web_port+'-------'+video.app_username+'---------'+video.app_password+'--------'+iChannelID);
						 // 登录
						 var iRet = WebVideoCtrl.I_Login(video.app_ip, 1, video.app_web_port, video.app_username, video.app_password, {
							 success: function (xmlDoc) {
								console.log("登录成功...");
								var a= xmlDoc;
								WebVideoCtrl.I_Stop();
								newVideoPreview(video.app_ip, streamType, iChannelID, bZeroChannel);
							},
							error: function () {
								console.log("登录失败...");
							}
						 });

						/* if(iRet == undefined){
							WebVideoCtrl.I_Stop();
							newVideoPreview(video.app_ip, streamType, iChannelID, bZeroChannel);
						} */
						 
						 if (-1 == iRet) {
							console.log("已登录过...");
							WebVideoCtrl.I_Stop();
							newVideoPreview(video.app_ip, streamType, iChannelID, bZeroChannel);
						 }
						 jQuery("#switch").closest(".vb").attr("class","videobut_ vb");
						 jQuery("#switch").click(function(){
							 clickStopRealPlay(video.app_ip, streamType, iChannelID, bZeroChannel);
						 });
					 }
				 }else{
					 jQuery(".jian-video-body").css({'height':440});
					 jQuery(".videoimg").html("");
					 jQuery(".videoimg").css({'height':440});
					 jQuery(".videoimg").append('<img src="#{request.contextPath}/asset/images/nosp.png" id="imgShow" style="width:620px;height:440px;"/>');
					 jQuery("#haikangOld").hide();
				 }
			 }
		}
	}


	function showVideo3(){
		jQuery("#videoActiveX").hide();
		 webcam_url = video.webcam_url; 
		 if(webcam_url!="" && webcam_url != null){ 
			jQuery(".video-btns-control").show();
			jQuery(".videoimg").html(""); 
			jQuery(".jian-video-body").css({height:440});
			jQuery("#videoimg").height('440px');
			var height = jQuery("#videoimg").height();
			var width = jQuery("#videoimg").width();   
			var scriptAdd = "<script> var vID = 'videoimg';var vWidth = '620px';var vHeight = '440px';var vPlayer = '#{request.contextPath}/document/player.swf?autostart=true';var vHLSset = '#{request.contextPath}/document/HLS.swf';var vPic = ''; var vHLSurl = '"
				+ webcam_url +"';a.init('videoimg');<\/script>";   
			jQuery("#videoimg").html(scriptAdd);
		 }
	}
	function showVideo(){
		//if(video.length>2){
		if((video.device_port == ''||video.device_port == null) ||  (video.webcam_url == "" || video.webcam_url == null)){
			if(video.device_type==301 ||video.device_type==305){
				 if(video.type == 1){
					 if(isWindow==1 && isIE == 1){
						 jQuery("#haikangNew").hide();
						 jQuery("#haikangOld").show();
						 jQuery(".videoimg").html("");
						 if(video.type == 1){
							 //硬盘视频
							 jQuery(".jian-video-body").css({height:332});
							 jQuery("#videoimg").height('332px');
							 jQuery(".videoimg").append("<object classid='clsid:D5E14042-7BF6-4E24-8B01-2F453E8154D7' id='PlayViewOCX' width='100%' height='400' style='margin-top:-25px;margin-bottom:-30px;' name='ocx'/>");
							 if(document.all.PlayViewOCX.object != null){
								 jQuery(".btns-lt1").hide();
								 jQuery(".btns-lt2").hide();
								 jQuery(".btns-line").hide();
								 jQuery(".btns-lt3").hide();
								 jQuery(".btns-lt4").hide();
								 setTimeout(function(){
									 jQuery("#videoimg")[0].style["border-top"]="1px solid #FF8A24";
									 },1);
								 whattype = 1;
								 var OCXobj = document.getElementById("PlayViewOCX");
						 	     OCXobj.SetOcxMode(0); 
						 	     OCXobj.SetWndNum(1);  
						 	     OCXobj.SetCapturParam("C:\\camera",0);
						    	 var strName = video.video_name;										//设备名称
						         var strIP = video.app_ip;    				        					//设备ip
						         var strAppName = video.app_username;									//用户名 
						         var strAppPwd = video.app_password;					    			//密码 
						         var strPort = video.app_port;				    						//设备端口号
						         var ChanNum1 = video.app_device_video_channel_no;  					//通道号 
						         var cameraID1 = video.app_device_video_channel_no;
						         var strXML = "<?xml version='1.0'?><Parament><CameraName>"+strName+"</CameraName><CameraID>" + cameraID1 + "</CameraID><DeviceIP>" + 
						   	 	     strIP + "</DeviceIP><DevicePort>" + strPort + "</DevicePort><User>"+ strAppName +"</User><Password>" + 
						   	 		 strAppPwd + "</Password><ChannelNum>"+ ChanNum1 +"</ChannelNum><ProtocolType>0</ProtocolType><StreamType>0</StreamType><Transmits></Transmits></Parament>";
						  	     //var win = OCXobj.GetSelWnd();  
						       	 //OCXobj.StopRealPlay(win); 
						       	 OCXobj.StartTask_Preview_InWnd(strXML,0);  
						       	jQuery("#switch2").closest(".vb").attr("class","videobut_ vb");
								jQuery("#switch2").click(function(){
									StopPlayView();
								});
							 }else{ 
								 jQuery(".jian-video-body").css({'height':440});
								 jQuery(".videoimg").html("");
								 jQuery(".videoimg").css({'height':440});
								 jQuery(".videoimg").append('<img src="#{request.contextPath}/asset/images/nosp.png" id="imgShow" style="width:620px;height:440px;"/><a class="Download" id="videoActiveX" href="http://img1.farmeasy.cn/plugin/cmsocx.exe">视频插件下载</a>');
								 jQuery("#haikangOld").hide();
							 }

							 jQuery(".item_live").show();
							 jQuery(".live_size").hide();
							 //jQuery("#videoShow").show();
							 //jQuery(".input-group").hide();
						 }else{

							 jQuery(".jian-video-body").css({height:332});
							 jQuery("#videoimg").height('332px');
							 jQuery(".videoimg").append("<object classid='clsid:EE4EA829-B8DA-4229-AC72-585AF45AD778' standby='Waiting...' id='ppvs'  width='566' height='400' name='ocx1'/>");
							 if(document.all.ppvs.object != null){
								 whattype = 2;
								 jQuery(".btns-lt1").hide();
								 jQuery(".btns-lt2").hide();
								 jQuery(".btns-line").hide();
								 jQuery(".btns-lt3").hide();
								 jQuery(".btns-lt4").hide();
							     var iConnHandle = -1;		//连接设备返回句柄
								 var iPlayHandle = -1;		//播放视频返回句柄 
								 //var iChannel = 1;		//设备视频通道
								 var iStreamType = 0;		//取设备流类型	0：主码流	1：子码流
								 var szAccount= video.sn;
								 var szRegIP = video.ip;
								 var szUserName = video.username;
								 var szPassWord = video.password;
								 var iRegPort = 7660;
							     //7660
								 //流媒体服务IP、端口
								 var iStreamServerPort = 7554;//7554
								 var iPlayConnMode = 0;		//取流方式	0：与设备直连取流	1：通过流媒体转发取流
								 var PlayOCX = document.getElementById("ppvs");
								 iConnHandle = PlayOCX.ConnectDeviceByACS(szAccount, szRegIP, iRegPort,szUserName,szPassWord);
								 if (0 > iConnHandle){
									 jQuery("#showMessage").html("连接设备失败！");
									 jQuery("#showMessageDiv").modal('show');
									 jQuery("body").css("padding-right",0);
								 }else{
									 if ( 0 > iConnHandle){ 
										 jQuery("#showMessage").html("请先连接设备，并确保连接成功！");
										 jQuery("#showMessageDiv").modal('show');
										 jQuery('body').css('padding-right',0);
										 return;
									 } 
									 var PlayOCX = document.getElementById("ppvs");
									 PlayOCX.StreamPlayStartByTCP(szRegIP, iStreamServerPort, szAccount, "1", iStreamType, 1);
								 }
							 }else{
								 jQuery(".videoimg").html(""); 
								 jQuery(".videoimg").append('<img src="#{request.contextPath}/asset/images/nosp.png" id="imgShow"/><a class="Download" id="videoActiveX" href="http://img1.farmeasy.cn/plugin/EHomeActiveX.exe">视频插件下载</a>');
								 jQuery("#haikangOld").hide();
							 }
					     }
					 }else{
						 jQuery(".jian-video-body").css({'height':440});
						 jQuery(".videoimg").html("");
						 jQuery(".videoimg").css({'height':440});
						 jQuery(".videoimg").append('<img src="#{request.contextPath}/asset/images/nosp.png" id="imgShow" style="width:620px;height:440px;"/>');
						 jQuery("#haikangOld").hide();
					 }
				 }else{
					 if(isWindow == 1 && isIE != 3){
						 jQuery("#haikangNew").show();
						 jQuery("#haikangOld").hide();
						 //未安装视频插件
						 if (-1 == WebVideoCtrl.I_CheckPluginInstall()) {
							 jQuery(".jian-video-body").css({'height':440});
							 jQuery(".videoimg").html("");
							 jQuery(".videoimg").css({'height':440});
							 jQuery(".videoimg").append('<img src="#{request.contextPath}/asset/images/nosp.png" style="width:620px;height:440px;" id="imgShow"/><a class="Download" id="videoActiveX"  style="margin: 496px 0px -74px 490px; color: rgb(255, 255, 255); height: 23px; position: fixed; z-index: 999; left: 0px; bottom: 0px; right: 0px; top: 0px; width: 157px;" href="http://img1.farmeasy.cn/plugin/WebComponents.exe">视频插件下载</a>');
							 jQuery("#haikangNew").hide();
							 jQuery("#haikangOld").hide();	
						 }else{
							 jQuery(".jian-video-body").css({height:332});
							 jQuery("#videoimg").height('332px');
							 jQuery(".videoimg").html("");
							 jQuery(".videoimg").html("<div id='divPlugin' class='plugin' style='width:100%;height:100%;'></div>");
							 // 初始化插件参数及插入插件
							 WebVideoCtrl.I_InitPlugin("100%", "100%", {
								iWndowType:1, 
								cbSelWnd: function(){}
							 });
							 WebVideoCtrl.I_InsertOBJECTPlugin("divPlugin"); 
							
							 var bZeroChannel = false;
							 var iChannelID = parseInt(video.app_device_video_channel_no, 10);//通道列表
							 console.log(video.app_ip+"----"+video.app_web_port+'-------'+video.app_username+'---------'+video.app_password+'--------'+iChannelID);
							 // 登录
							 var iRet = WebVideoCtrl.I_Login(video.app_ip, 1, video.app_web_port, video.app_username, video.app_password, {
								 success: function (xmlDoc) {
									console.log("登录成功...");
									newVideoPreview(video.app_ip, streamType, iChannelID, bZeroChannel);
								},
								error: function () {
									console.log("登录失败...");
								}
							 });
							 if (-1 == iRet) {
								console.log("已登录过...");
								WebVideoCtrl.I_Stop();
								newVideoPreview(video.app_ip, streamType, iChannelID, bZeroChannel);
							 }
							 jQuery("#switch").closest(".vb").attr("class","videobut_ vb");
							 jQuery("#switch").click(function(){
								 clickStopRealPlay(video.app_ip, streamType, iChannelID, bZeroChannel);
							 });
						 }
						 }else{
							 jQuery(".jian-video-body").css({'height':440});
							 jQuery(".videoimg").html("");
							 jQuery(".videoimg").css({'height':440});
							 jQuery(".videoimg").append('<img src="#{request.contextPath}/asset/images/nosp.png" id="imgShow" style="width:620px;height:440px;"/>');
							 jQuery("#haikangOld").hide();
						 }
					 }
				}
				jQuery(".item_live").show();
			 	jQuery(".live_size").hide();
				//jQuery("#videoShow").show();
				//jQuery(".input-group").hide();
			}else{
				 jQuery("#videoActiveX").hide();
				 webcam_url = video.webcam_url; 
				 if(webcam_url!="" && webcam_url != null){
					 jQuery(".jian-video-body").css({height:440});
					 jQuery("#videoimg").height('440px');
					 jQuery("#haikangNew").hide();
					 jQuery("#haikangOld").hide(); 
					jQuery(".video-btns-control").show();
					jQuery(".videoimg").html(""); 
					var height = jQuery("#videoimg").height();
					var width = jQuery("#videoimg").width();   
					var scriptAdd = "<script> var vID = 'videoimg';var vWidth = '620px';var vHeight = '440px';var vPlayer = '#{request.contextPath}/document/player.swf?autostart=true';var vHLSset = '#{request.contextPath}/document/HLS.swf';var vPic = ''; var vHLSurl = '"
						+ webcam_url +"';a.init('videoimg');<\/script>";   
					jQuery("#videoimg").html(scriptAdd);  
					if(isWindow == 1){
						 if(video.device_type==301){
							 if(video.type == 3){
								 if(isIE != 3 && video.app_ip!=null && video.app_ip!='' && video.app_web_port!=null && video.app_web_port!='' && 
										 video.app_username!=null && video.app_username!='' && video.app_password!=null && video.app_password!=''){
									 console.log("显示切换按钮...");
									 jQuery(".item_live").hide();
									 jQuery(".live_size").show();
								 }else{
									 jQuery(".item_live").show();
									 jQuery(".live_size").hide();
								 }
							 }else{
								 if(isIE == 1 && video.app_ip!=null && video.app_ip!='' && video.app_web_port!=null && video.app_web_port!='' && 
										 video.app_username!=null && video.app_username!='' && video.app_password!=null && video.app_password!=''){
									 jQuery(".item_live").hide();
									 jQuery(".live_size").show();
									 console.log("显示切换按钮...");
								 }else{
									 jQuery(".item_live").show();
									 jQuery(".live_size").hide();
								 }
							 }
						 }
						 if(video.device_type==305){
							 if(isIE != 3 && video.app_ip!=null && video.app_ip!='' && video.app_web_port!=null && video.app_web_port!='' && 
									 video.app_username!=null && video.app_username!='' && video.app_password!=null && video.app_password!=''){
								 jQuery(".item_live").hide();
								 jQuery(".live_size").show();
								 console.log("显示切换按钮...");
							 }else{
								 jQuery(".item_live").show();
								 jQuery(".live_size").hide();
							 }
						 }
						
					 }   
				 }else{
					 jQuery(".item_live").show();
					 jQuery(".live_size").hide();
					 
					 /* if(isWindow == 1){
						 if(video.device_type==301){
							 if(video.type == 3){
								 if(isIE != 3 && video.app_ip!=null && video.app_ip!='' && video.app_web_port!=null && video.app_web_port!='' && 
										 video.app_username!=null && video.app_username!='' && video.app_password!=null && video.app_password!=''){
									 console.log("显示切换按钮...");
									 jQuery("#videoShow").hide();
									 jQuery(".input-group").show();
								 }else{
									 jQuery("#videoShow").show();
									 jQuery(".input-group").hide();
								 }
							 }else{
								 if(isIE == 1 && video.app_ip!=null && video.app_ip!='' && video.app_web_port!=null && video.app_web_port!='' && 
										 video.app_username!=null && video.app_username!='' && video.app_password!=null && video.app_password!=''){
									 console.log("显示切换按钮...");
									 jQuery("#videoShow").hide();
									 jQuery(".input-group").show();
								 }else{
									 jQuery("#videoShow").show();
									 jQuery(".input-group").hide();
								 }
							 }
						 }
						 if(video.device_type==305){
							 if(isIE != 3 && video.app_ip!=null && video.app_ip!='' && video.app_web_port!=null && video.app_web_port!='' && 
									 video.app_username!=null && video.app_username!='' && video.app_password!=null && video.app_password!=''){
								 console.log("显示切换按钮...");
								 jQuery("#videoShow").hide();
								 jQuery(".input-group").show();
							 }else{
								 jQuery("#videoShow").show();
								 jQuery(".input-group").hide();
							 }
						 }
						 if(video.device_type!=301 && video.device_type==305){
							 jQuery("#videoShow").show();
							 jQuery(".input-group").hide();
						 }
					 } */
				 }
			}
		//}else{
			//alert('无摄像头');
		//}
	}

	jQuery(function(){
		if(!(navigator.platform == "Win32" || navigator.platform == "Windows")){
			isWindow = 2;
		}
		if ((navigator.userAgent.indexOf('MSIE') >= 0) && (navigator.userAgent.indexOf('Opera') < 0)){
		}else if (navigator.userAgent.indexOf('Safari') >= 0 && navigator.userAgent.indexOf('Chrome')<0){
			isIE = 3;   
			jQuery("#videoActiveX").hide();  
		}else{
			isIE = 2;
			jQuery("#videoActiveX").hide();  
		}
		showVideo();
		//视频控制按钮
		function onoroff(obj,elem,noelem,func1,func2){
			jQuery(obj).click(function(){  //视频左侧声音按钮控制
				if(jQuery(elem).is(':visible')){
					jQuery(elem).hide();	
					jQuery(noelem).show();	
					func1();
				}else{
					jQuery(elem).show();	
					jQuery(noelem).hide();
					func2();
				}
			});	
		};
		/* onoroff('.btns-lt1','.btn-noHD','.btn-HD',hd2,hd1);
		onoroff('.btns-lt2','.btn-camera','.btn-nocamera',none,none);
		onoroff('.btns-lt3','.btn-speech','.btn-nospeech',clickStartVoiceTalk,clickStopVoiceTalk);
		onoroff('.btns-lt4','.btn-voice','.btn-novoice',openVoice,closeVoice); */
		
		jQuery('.direction-control span').click(function(){  //视频中间四个方向按钮控制
			jQuery(this).siblings().removeClass('cur');
			jQuery(this).addClass('cur');
		});
		
		jQuery('.resize-control span').click(function(){  //视频中间缩小放大按钮控制
			jQuery(this).siblings().removeClass('cur');
			jQuery(this).addClass('cur');
		});
		  
		jQuery('.play-control').click(function(){  //视频中间暂停和播放按钮控制
			if( jQuery('.play-control span').is(":hidden")){
				jQuery('.play-control span').show();
				stopVideo();
			}else{
				showVideo();
				jQuery('.play-control span').hide();		
			}
		});	
		
	});
		//新硬盘录像机开始预览方法
		function newVideoPreview(szIP, iStreamType1, iChannelID1, bZeroChannel1){
			var oWndInfo = WebVideoCtrl.I_GetWindowStatus(g_iWndIndex);
			if (oWndInfo != null) {// 已经在播放了，先停止
				WebVideoCtrl.I_Stop();
			}
			// 开始预览 
			var iRet = WebVideoCtrl.I_StartRealPlay(szIP, {iStreamType: iStreamType1, iChannelID: iChannelID1, bZeroChannel: bZeroChannel1});
			if (iRet == 0) { 
				jQuery("#switch").closest(".vb").attr("class","videobut_ vb");//播放
				console.log("开启阅览成功...");
			} else {
				console.log("开启阅览失败...");
			}

			jQuery("#switch").unbind("click");
			jQuery("#switch").bind("click",function(){
				jQuery(this).closest(".vb").attr("class","videobut vb");//暂停
		         clickStopRealPlay(szIP,iStreamType1, iChannelID1, bZeroChannel1);
		     });
		}

		//停止预览
		function clickStopRealPlay(szIP, iStreamType1, iChannelID1, bZeroChannel1) {
			var oWndInfo = WebVideoCtrl.I_GetWindowStatus(g_iWndIndex),
				szInfo = "";

			if (oWndInfo != null) {
				var iRet = WebVideoCtrl.I_Stop();
				if (0 == iRet) {
					szInfo = "停止预览成功！";
				} else {
					szInfo = "停止预览失败！";
				}
				showOPInfo(oWndInfo.szIP + " " + szInfo);
			}
			jQuery("#switch").unbind("click");
			jQuery("#switch").bind("click",function(){
				jQuery(this).closest(".vb").attr("class","videobut vb");
				console.log('开始：--'+szIP+"----"+iStreamType1+'-------'+iChannelID1+'---------'+bZeroChannel1);
		        newVideoPreview(szIP, iStreamType1, iChannelID1, bZeroChannel1);
		    });
		}
		
		function PTZControlOn(temp)
		{
			//channelNo:函数设备通道号
			//temp：命令控制号（11 - 焦距变大，12 - 焦距变小 ，13 - 焦点变大  ，14 - 焦点变小 ， 15 - 光圈变大，16 - 光圈变小 ，21 - 云台向上， 22 - 云台向下， 23 - 云台左转， 24 - 云台右转）
			var PlayOCX = document.getElementById("ppvs");
			PlayOCX.PTZControl(channelNo,temp,0,1);
		}
		function stopVideo(){
			if(whattype == 1){
				 var OCXobj = document.getElementById("PlayViewOCX");
			     OCXobj.StopAllPreview();
			}else if(whattype == 2){
				var PlayOCX = document.getElementById("ppvs");
				try{
					PlayOCX.StreamPlayStop();
					PlayOCX.RealPlayStop();
					iPlayHandle = -1;
				}catch(e){
				}
				if( iPlayHandle>=0 ){
					if (parseInt(iPlayConnMode) == 0){
						if(PlayOCX.RealPlayStop()){      
							iPlayHandle = -1;}
					}
					else{
						if(PlayOCX.StreamPlayStop()){
							iPlayHandle = -1;
						}
					}
				}
			}else if(whattype == 3){
				var oWndInfo = WebVideoCtrl.I_GetWindowStatus(g_iWndIndex),
				szInfo = "";
				if (oWndInfo != null) {
					var iRet = WebVideoCtrl.I_Stop();
					if (0 == iRet) {
						szInfo = "停止预览成功！";
					} else {
						szInfo = "停止预览失败！";
					}
					console.log(oWndInfo.szIP + " " + szInfo);
				}
			}else if(whattype == 4){
				
			}
		}
		function hd1(){
			streamType = 1;
			stopVideo();
			showVideo();
		}
		
		function hd2(){
			streamType = 2;
			stopVideo();
			showVideo();
		}
		//开始对讲
		function clickStartVoiceTalk() {
			var szIP = video.app_ip;
			if ("" == szIP) {
				return;
			}
			WebVideoCtrl.I_GetAudioInfo(szIP, {
				success: function (xmlDoc) {
					var oAudioChannels = jQuery(xmlDoc).find("TwoWayAudioChannel"),
						oSel = jQuery("#audiochannels").empty();
					jQuery.each(oAudioChannels, function () {
						var id = jQuery(this).find("id").eq(0).text();
						oSel.append("<option value='" + id + "'>" + id + "</option>");
					});
					iAudioChannel = parseInt(jQuery("#audiochannels").val(), 10);
					if(isNaN(iAudioChannel)){
						alert("无对讲通道！");
						return;
					}
					var iRet = WebVideoCtrl.I_StartVoiceTalk(szIP, iAudioChannel);

					if (0 == iRet) {
						szInfo = "开始对讲成功！";
					} else {
						szInfo = "开始对讲失败！";
					}
					console.log(szIP + " " + szInfo);
				},
				error: function () {
					console.log(szIP + " 获取对讲通道失败！");
				}
			});
		}
		
		// 停止对讲
		function clickStopVoiceTalk() {
			var szIP = video.app_ip;
				iRet = WebVideoCtrl.I_StopVoiceTalk(),
				szInfo = "";

			if ("" == szIP) {
				return;
			}

			if (0 == iRet) {
				szInfo = "停止对讲成功！";
			} else {
				szInfo = "停止对讲失败！";
			}
			console.log(szIP + " " + szInfo);
		}
		function openVoice(){
			if(whattype == 1){
				var OCXobj = document.getElementById("PlayViewOCX");
		        OCXobj.FireOpenSound(1);
			}else if(whattype == 2){
				var PlayOCX = document.getElementById("ppvs");
				if( iPlayHandle<0 ){
					alert( "请确保正在预览视频!" );
					return;
				}
				if( false == PlayOCX.OpenSound() ){
					alert("打开声音失败!");
				}
			}else if(whattype == 3){
				var oWndInfo = WebVideoCtrl.I_GetWindowStatus(g_iWndIndex),
				szInfo = "";
				if (oWndInfo != null) {
					var allWndInfo = WebVideoCtrl.I_GetWindowStatus();
					// 循环遍历所有窗口，如果有窗口打开了声音，先关闭
					var iRet = WebVideoCtrl.I_OpenSound();
					if (0 == iRet) {
						szInfo = "打开声音成功！";
					} else {
						szInfo = "打开声音失败！";
					}
					console.log(oWndInfo.szIP + " " + szInfo);
				}
			}else if(whattype == 4){
				
			}
		}
		
		function closeVoice(){
			if(whattype == 1){
				var OCXobj = document.getElementById("PlayViewOCX");
		        OCXobj.FireCloseSound(1);
			}else if(whattype == 2){
				var PlayOCX = document.getElementById("ppvs");
				if( iPlayHandle<0 ){
					alert( "请确保正在预览视频!" );
					return;
				}
				if( false == PlayOCX.StopSound() ){
					alert("关闭声音失败!");
				}
			}else if(whattype == 3){
				var oWndInfo = WebVideoCtrl.I_GetWindowStatus(g_iWndIndex),
				szInfo = "";
				if (oWndInfo != null) {
					var iRet = WebVideoCtrl.I_CloseSound();
					if (0 == iRet) {
						szInfo = "关闭声音成功！";
					} else {
						szInfo = "关闭声音失败！";
					}
					console.log(oWndInfo.szIP + " " + szInfo);
				}
			}else if(whattype == 4){
				
			}
		}


		//视频
		var g_iWndIndex = 0;
		function PTZZoomStop() {
		    var oWndInfo = WebVideoCtrl.I_GetWindowStatus(g_iWndIndex);

		    if (oWndInfo != null) {
		        WebVideoCtrl.I_PTZControl(11, true, {
		            iWndIndex: g_iWndIndex,
		            success: function (xmlDoc) {
		                showOPInfo(oWndInfo.szIP + " 调焦停止成功！");
		            },
		            error: function () {
		                showOPInfo(oWndInfo.szIP + "  调焦停止失败！");
		            }
		        });
		    }
		}
		function PTZZoomout() {
		    var oWndInfo = WebVideoCtrl.I_GetWindowStatus(g_iWndIndex);

		    if (oWndInfo != null) {
		        WebVideoCtrl.I_PTZControl(11, false, {
		            iWndIndex: g_iWndIndex,
		            success: function (xmlDoc) {
		                showOPInfo(oWndInfo.szIP + " 调焦-成功！");
		            },
		            error: function () {
		                showOPInfo(oWndInfo.szIP + "  调焦-失败！");
		            }
		        });
		    }
		}
		function PTZZoomIn() {
		    var oWndInfo = WebVideoCtrl.I_GetWindowStatus(g_iWndIndex);

		    if (oWndInfo != null) {
		        WebVideoCtrl.I_PTZControl(10, false, {
		            iWndIndex: g_iWndIndex,
		            success: function (xmlDoc) {
		                showOPInfo(oWndInfo.szIP + " 调焦+成功！");
		            },
		            error: function () {
		                showOPInfo(oWndInfo.szIP + "  调焦+失败！");
		            }
		        });
		    }
		}
				
		// PTZ控制 9为自动，1,2,3,4,5,6,7,8为方向PTZ
		var g_bPTZAuto = false;
		function mouseDownPTZControl(iPTZIndex) {
			var oWndInfo = WebVideoCtrl.I_GetWindowStatus(g_iWndIndex),
			bZeroChannel = false,
			iPTZSpeed = 2,
			bStop = false;

			if (bZeroChannel) {// 零通道不支持云台
				return;
			}
			
			if (oWndInfo != null) {
				if (9 == iPTZIndex && g_bPTZAuto) {
					iPTZSpeed = 0;// 自动开启后，速度置为0可以关闭自动
					bStop = true;
				} else {
					g_bPTZAuto = false;// 点击其他方向，自动肯定会被关闭
					bStop = false;
				}

				WebVideoCtrl.I_PTZControl(iPTZIndex, bStop, {
					iPTZSpeed: iPTZSpeed,
					success: function (xmlDoc) {
						if (9 == iPTZIndex) {
							g_bPTZAuto = !g_bPTZAuto;
						}
						showOPInfo(oWndInfo.szIP + " 开启云台成功！");
					},
					error: function () {
						showOPInfo(oWndInfo.szIP + " 开启云台失败！");
					}
				});
			}
		}

		// 方向PTZ停止
		function mouseUpPTZControl() {
			var oWndInfo = WebVideoCtrl.I_GetWindowStatus(g_iWndIndex);

			if (oWndInfo != null) {
				WebVideoCtrl.I_PTZControl(1, true, {
					success: function (xmlDoc) {
						showOPInfo(oWndInfo.szIP + " 停止云台成功！");
					},
					error: function () {
						showOPInfo(oWndInfo.szIP + " 停止云台失败！");
					}
				});
			}
		}	
		function showOPInfo(str){
			try{
				console.log(str);
			}catch(e){
				
			}
		}
		
		/**
		 * 通过正则获取url参数
		 * @param name
		 * @returns
		 */
		function GetQueryString(name){
		     var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
		     var r = window.location.search.substr(1).match(reg);
		     if(r!=null)return  unescape(r[2]); return null;
		}
		var from = GetQueryString("from");
		
		var w=0;
		var h=0;
		function maxwindow(){
			if(from == null){
				var width = window.parent.document.body.offsetWidth;
				var height = window.parent.window.innerHeight;
				w=jQuery("#videoimg").width();
		        h=jQuery("#videoimg").height();
		        jQuery(".videoViewShow",window.parent.document).addClass("big_iframe");
				jQuery(".videoViewShow",window.parent.document).css("width",window.parent.window.innerWidth-77);
				jQuery("#videoimg").css("height",window.parent.window.innerHeight-70);
				jQuery("#videoimg object").attr("height",window.parent.window.innerHeight-2);//-70+25+30+63
				jQuery("#divPlugin embed").attr("height",window.parent.window.innerHeight-2);
		        jQuery("body").addClass("big_screen");
				jQuery("#video_iframe",window.parent.document).css({"left":"77px","top":"0","margin-left":"0","margin-top":"0"});
			}else{
				var width = window.parent.document.body.offsetWidth;
				var height = window.parent.window.innerHeight;
				w=jQuery("#videoimg").width();
		        h=jQuery("#videoimg").height();
		        jQuery(".videoViewShow",window.parent.document).addClass("big_iframe");
				jQuery(".videoViewShow",window.parent.document).css("width",window.parent.window.innerWidth);
				jQuery("#videoimg").css("height",window.parent.window.innerHeight-70);
				jQuery("#videoimg object").attr("height",window.parent.window.innerHeight-2);//-70+25+30+63
				jQuery("#divPlugin embed").attr("height",window.parent.window.innerHeight-2);
		        jQuery("body").addClass("big_screen");
				jQuery("#video_iframe",window.parent.document).css({"left":"0","top":"0","margin-left":"0","margin-top":"0"});
			}
			
	    	jQuery(".fdimg1").hide();
	    	jQuery(".fdimg2").show();

		}
		function minwindow(){
			if(from == null){
				jQuery(".videoViewShow",window.parent.document).removeClass("big_iframe");
				jQuery(".videoViewShow",window.parent.document).css("width","680px");
				jQuery("#videoimg").height('332px');
				jQuery("#videoimg object").attr("height","400px");//332-70+25+30+63
				jQuery("#divPlugin embed").attr("height","332px");
				jQuery("body").removeClass("big_screen");
				var target = jQuery("#videoimg");
				jQuery("#video_iframe",window.parent.document).css({"left":"50%","top":"50%","margin-left":"-342px","margin-top":"-225px"});
			}else{
				jQuery(".videoViewShow",window.parent.document).removeClass("big_iframe");
				jQuery(".videoViewShow",window.parent.document).css("width","680px");
				jQuery("#videoimg").height('332px');
				jQuery("#videoimg object").attr("height","400px");//332-70+25+30+63
				jQuery("#divPlugin embed").attr("height","332px");
				jQuery("body").removeClass("big_screen");
				var target = jQuery("#videoimg");
				var iframeObj = jQuery("#video_iframe",window.parent.document);
				var offsetTop = iframeObj.height()/2;
				jQuery("#video_iframe",window.parent.document).css({"left":"50%","top":"50%","margin-left":"-342px","margin-top":-offsetTop});
			}
			
	    	
	    	
			jQuery(".fdimg1").show();
			jQuery(".fdimg2").hide(); 
		}

		jQuery(window).resize(function(){
			var width = window.parent.document.body.offsetWidth;
			var height = window.parent.window.innerHeight;
			//alert(1)
			w=jQuery("#videoimg").width();
	        h=jQuery("#videoimg").height();
			var target = jQuery("#videoimg");
			
			//target.css({"height":jQuery(window).height()-70})
			//target.find("#divPlugin").css("height",h).css("width",w);
	    	//target.find("object").attr("width",w).attr("height",h);
	    	//target.find(".videobg").css({"width":w,"height":h});
			//jQuery(".seconddiv.big_screen").css({"width":width-77})
		});
		
		function StartPlayView(){
			jQuery("#switch2").unbind("click");
			jQuery("#switch2").bind("click",function(){
	            StopPlayView();
	            jQuery(this).closest(".vb").attr("class","videobut vb");//暂停
         	});
			setTimeout(function(){
				 jQuery("#videoimg")[0].style["border-top"]="1px solid #FF8A24";
			},1);
			 var OCXobj = document.getElementById("PlayViewOCX");
	 	     OCXobj.SetOcxMode(0); 
	 	     OCXobj.SetWndNum(1);  
	 	     OCXobj.SetCapturParam("C:\\camera",0);
	    	 var strName = video.video_name;										//设备名称
	         var strIP = video.app_ip;    				        					//设备ip
	         var strAppName = video.app_username;									//用户名 
	         var strAppPwd = video.app_password;					    			//密码 
	         var strPort = video.app_port;				    						//设备端口号
	         var ChanNum1 = video.app_device_video_channel_no;  					//通道号 
	         var cameraID1 = video.app_device_video_channel_no;
	         var strXML = "<?xml version='1.0'?><Parament><CameraName>"+strName+"</CameraName><CameraID>" + cameraID1 + "</CameraID><DeviceIP>" + 
	   	 	     strIP + "</DeviceIP><DevicePort>" + strPort + "</DevicePort><User>"+ strAppName +"</User><Password>" + 
	   	 		 strAppPwd + "</Password><ChannelNum>"+ ChanNum1 +"</ChannelNum><ProtocolType>0</ProtocolType><StreamType>0</StreamType><Transmits></Transmits></Parament>";
			OCXobj.StartTask_Preview_InWnd(strXML,0);
	    }
		function StopPlayView(){
			jQuery("#switch2").unbind("click");
			jQuery("#switch2").bind("click",function(){
	            StartPlayView()
	            jQuery(this).closest(".vb").attr("class","videobut_ vb");//播放
	        });
	
	        var OCXobj = document.getElementById("PlayViewOCX");
	        OCXobj.StopAllPreview();
	    }

	    /*****设置抓图格式为JPG******/
	    function CatchPicJPG()
	    {
	        var OCXobj = document.getElementById("PlayViewOCX");
	        OCXobj.SetCapturParam("C:\\pic",0);
	    }
	    /*****设置抓图格式为BMP******/
	    function CatchPicBMP()
	    {
	        var OCXobj = document.getElementById("PlayViewOCX");
	        OCXobj.SetCapturParam("C:\\pic",1);
	    }
	    /*****云台：左上******/
	    function PTZLeftUp()
	    {
	        var OCXobj = document.getElementById("PlayViewOCX");
	        OCXobj.StartTask_PTZ(25,3);
	    }
	    /*****云台：上******/
	    function PTZUp()
	    {
	        var OCXobj = document.getElementById("PlayViewOCX");
	        OCXobj.StartTask_PTZ(21,3);
	    }
	    /*****云台：右上******/
	    function PTZRightUp()
	    {
	        var OCXobj = document.getElementById("PlayViewOCX");
	        OCXobj.StartTask_PTZ(26,3);
	    }
	    /*****云台：左******/
	    function PTZLeft()
	    {
	        var OCXobj = document.getElementById("PlayViewOCX");
	        OCXobj.StartTask_PTZ(23,3);
	    }
	    /*****云台：自转******/
	    function PTZAuto()
	    {
	        var OCXobj = document.getElementById("PlayViewOCX");
	        OCXobj.StartTask_PTZ(29,3);
	    }
	    /*****云台：右******/
	    function PTZRight()
	    {
	        var OCXobj = document.getElementById("PlayViewOCX");
	        OCXobj.StartTask_PTZ(24,3);
	    }
	    /*****云台：左下******/
	    function PTZLeftDown()
	    {
	        var OCXobj = document.getElementById("PlayViewOCX");
	        OCXobj.StartTask_PTZ(27,3);
	    }
	    /*****云台：下******/
	    function PTZDown()
	    {
	        var OCXobj = document.getElementById("PlayViewOCX");
	        OCXobj.StartTask_PTZ(22,3);
	    }
	    /*****云台：右下******/
	    function PTZRightDown()
	    {
	        var OCXobj = document.getElementById("PlayViewOCX");
	        OCXobj.StartTask_PTZ(28,3);
	    }
	    /*****云台：停止******/
	    function PTZStop()
	    {
	        var OCXobj = document.getElementById("PlayViewOCX");
	        OCXobj.StartTask_PTZ(-21,3);
	    }
	    /*****云台：焦距+******/
	    function PTZAddTimes()
	    {
	        var OCXobj = document.getElementById("PlayViewOCX");
	        OCXobj.StartTask_PTZ(11,3);
	    }
	    /*****云台：焦距-******/
	    function PTZMinusTimes()
	    {
	        var OCXobj = document.getElementById("PlayViewOCX");
	        OCXobj.StartTask_PTZ(12,3);
	    }
	    /*****云台：焦点+******/
	    function PTZFarFocus()
	    {
	        var OCXobj = document.getElementById("PlayViewOCX");
	        OCXobj.StartTask_PTZ(13,3);
	    }
	    /*****云台：焦点-******/
	    function PTZNearFocus()
	    {
	        var OCXobj = document.getElementById("PlayViewOCX");
	        OCXobj.StartTask_PTZ(14,3);
	    }
	    /*****云台：光圈+******/
	    function PTZLargeAperture()
	    {
	        var OCXobj = document.getElementById("PlayViewOCX");
	        OCXobj.StartTask_PTZ(15,3);
	    }
	    /*****云台：光圈-******/
	    function PTZSmallAperture()
	    {
	        var OCXobj = document.getElementById("PlayViewOCX");
	        OCXobj.StartTask_PTZ(16,3);
	    }
	    /*****云台：调用预置点******/
	    function GetPt()
	    {
	        var OCXobj = document.getElementById("PlayViewOCX");
	        ptNum = document.getElementById("SelectGetpt").value;
	        var ret = OCXobj.PTZCtrlGotoPreset(ptNum); 
	             
	    }
	    /*****云台：设置预置点******/
	    function SetPt()
	    {
	        var OCXobj = document.getElementById("PlayViewOCX");
	        ptNum = document.getElementById("SelectSetpt").value;
	        var ret = OCXobj.PTZCtrlSetPreset(parseInt(ptNum));
	    }
		//]]>
	</script>
	<script language="javascript" for="PlayViewOCX" event="FireWindowsNumber(iSel)">   
		szMsg = "窗口分割消息,窗口数" + iSel;  
	</script>
	<script language="javascript" for="PlayViewOCX" event="FireSelectWindow(iSel)"> 
		szMsg = "窗口选择消息,窗口" + iSel;  
	</script>
	<script language="javascript" for="PlayViewOCX" event="FireStartRealPlay(iSel)">
		szMsg = "开始预览消息" + iSel;  
	</script>
	<script language="javascript" for="PlayViewOCX" event="FireStopRealPlay(iSel)">   
		szMsg = "停止预览消息" + iSel ;  
	</script>
	<script language="javascript" for="PlayViewOCX" event="FireStopPreviewAll()">   
		szMsg = "停止所有预览消息" ;  
	</script>
	<script language="javascript" for="PlayViewOCX" event="FireOpenSound(iSel)">   
		szMsg = "打开声音消息" ;  
	</script>
	<script language="javascript" for="PlayViewOCX" event="FireCloseSound(iSel)">   
		szMsg = "关闭声音消息" ;  
	</script>
	<script language="javascript" for="PlayViewOCX" event="FireChangeWindow(iFrom,iTo)">   
		szMsg = "互换窗口消息"+ "从" +iFrom+"到"+iTo;  
	</script>
	<script language="javascript" for="PlayViewOCX" event="FirePTZCtrl(iWindowID,iCtrlID,iSpeed)">   
		szMsg = "云台控制消息:"+ "窗口:" +iWindowID+"控制:"+iCtrlID+"速度:"+ iSpeed;  
	</script>
	<script language="javascript" for="PlayViewOCX" event="FireStartRecord(iWindowID)">   
		szMsg = "开始录像"+ iWindowID;  
	</script>
	<script language="javascript" for="PlayViewOCX" event="FireStopRecord(iWindowID)">   
		szMsg = "停止录像"+ iWindowID;  
	</script>
	<script language="javascript" for="PlayViewOCX" event="FireCatchPic(szPath,iWindowID)">   
		szMsg = "抓图"+ "路径" +szPath+"窗口"+iWindowID;  
	</script>
	<script language="javascript" for="PlayViewOCX" event="FireStartPlayBack(lWindowID)">  
	</script>
	<script language="javascript" for="PlayViewOCX" event="FireStopPlayBack(lWindowID)">  
	</script>





<script type="text/javascript" src="#{request.contextPath}/asset/monitoring/js/webVideoCtrl.js"/>
</body>
</html>
</f:view>
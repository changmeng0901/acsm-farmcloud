<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	template="/layout/template_new.xhtml">
<ui:define name="head_next">
<style>
*{box-sizing:border-box;}
a:hover{ text-decoration:none;}
/* 公用面包屑导航  */
.r_t_l{ font-family:'微软雅黑';}
.r_t_l span{ font-size:12px;}
.r_t_l em{ padding:0 5px; font-style:normal; }
.cm_resumeList{}
.cm_resumeList li{ float:left;}
.cm_resumeList li a{display:block; height:44px; line-height:44px; padding:0 10px; color:#3f3f3f; overflow:hidden; font-family:'宋体';}
.cm_resumeList li a:active{border-bottom:2px solid #33aedc;}
.cm_resumeList li img{ float:left; margin-top:16px;}
.cm_resumeList li span{ float:left; text-indent:10px;}
.borderBt{ border-bottom:2px solid #33aedc;}
.borderBt02{ border-bottom:1px solid #cbcbcb;}

/* 种植管理 样式 */
.plantinggl_wap{ padding-top:20px;}
.plantinggl_wap .public-search{ position:relative;}
.plantinggl_wap .public-search .form-control{ width:300px; height:34px; padding-left:34px; font-size:14px; color:#a8a8a8;}
.plantinggl_wap .public-search .octicon-search02{ position:absolute; left:10px; top:8px; width:18px; height:18px; background:url(../asset/images/plantinggl_ico15.jpg) no-repeat;}
.searchCondition{ margin:5px 0 0 10px; border-left:1px solid #d4d4d4;}
.searchCondition li{ float:left; display:inline; margin-left:10px;}
.searchCondition li a{ display:block; height:24px; line-height:24px; padding:0 8px; font-size:14px; color:#1a1a1a;}
.searchCondition li.cur a{ background:#9ac062; border-radius:12px; color:#fff;}
.plantinggl_list{ margin:0 auto; clear:both;}
.plantinggl_list .plantItems{ position:relative; float:left; width:268px; height:120px; margin:0 10px 20px 10px; padding:10px 13px 0; border:1px solid #dcdcdc; border-radius:5px; box-shadow:2px 2px 3px #dcdcdc;}
.plantinggl_list .poBlock{ position:absolute; right:13px; top:8px;}
.plantinggl_list .poBlock span{ float:left; width:18px; height:18px; margin-left:5px; cursor:pointer;}
.plantinggl_list .plantDt{ float:left; width:78px;}
.plantinggl_list .plantDt .plant_area{ width:62px; height:20px; line-height:20px; margin-top:5px; overflow:hidden; font-size:12px; font-weight:normal; text-align:center; color:#000;}
.plantinggl_list .plantDt a:hover .plant_area{ text-shadow:1px 1px 2px #dcdcdc;}
.plantinggl_list .plantDd{ padding-left:78px;}
.plantinggl_list .plantDd h5{ width:112px; height:28px; line-height:18px; padding-top:10px; overflow:hidden; font-size:12px; white-space:nowrap; color:#7e7e7e;;margin-top:0px;margin-bottom:0px}
.plantinggl_list .plantDd .link{ display:block; width:100%; height:25px; line-height:20px; padding-top:5px; white-space:nowrap; text-overflow:ellipsis; overflow:hidden; font-size:14px; color:#000;}
.plantinggl_list .plantDd .link:hover{ text-shadow:1px 1px 2px #dcdcdc;}
.plantinggl_list .plant_shadeWap{ display:block; position:relative; width:62px; height:62px; margin-top:14px;}
.plantinggl_list .plant_shadeWap .shade{ position:absolute; left:0; top:0; z-index:2; width:62px; height:62px;}
.plant_progress:hover{ text-shadow:1px 1px 2px #dcdcdc;}
.plant_progress .dateBlock{ line-height:16px; overflow:hidden; color:#525252;font-size:10px;  }
.plant_progress .dateBlock .dateStar{ float:left;-webkit-transform:scale(0.8);-o-transform:scale(1);-webkit-transform-origin:left}
.plant_progress .dateBlock .dateEnd{ float:right;-webkit-transform:scale(0.8);-o-transform:scale(1);-webkit-transform-origin:right}
.plant_progress{ position:relative; display:block; height:32px; padding-top:25px; color:#525252;}
.plant_progress:hover{ color:#525252; text-shadow:1px 1px 2px #dcdcdc;}
.plant_progress .progress{ height:6px; margin:0;}
.plant_progress .progress .progress-bar{ min-width:0;}
.plant_progress .progress .progress-bar-success{ background:#b7d091;}
.plant_progress .progress .progress-bar-warning{ background:#e3e07f;}
.plant_progress .progress .progress-bar-danger{ background:#f48bb3;}
.plant_progress .plantCur_num{ position:absolute; top:0; z-index:2; width:100px; height:44px; line-height:24px; margin:0 0 0 -50px; background:url(../asset/images/plantinggl_ico07.png) no-repeat center bottom; text-align:center; font-size:12px; color:#000;}

#timeline{ position:inherit;}
.plantShade_wap{ position:absolute; left:0; top:0; z-index:300; width:100%;}
#timeline .container.main{ width:100%;}
#timeline .container{ padding-left:0; padding-right:0;}
#timeline .slider{ min-height:200px;}
.media-container img{ width:360px; height:226px;}


body{ min-height:500px-; padding:0;}
.plantShade_wap{ position:absolute-; position:relative; left:0; top:0; z-index:10; width:100%;}
#timeline{ height:410px;}
.main{ background:transparent;}
.container{ padding:0;}
.slider .slider-container-mask{ height:372px;}
.slider .slider-item{ width:100%; height:372px; margin:0; padding:0;}
#timeline .thumbnail{ width:28px; height:28px; padding:0; border-radius:0;}
#timeline .thumbnail img{ height:100%;}
#timeline .navigation .timenav .content .marker .flag .flag-content h3{ margin-top:5px; padding-left:40px; color:#e1e1e1;}
/*去掉左右按钮的date和title*/
.slider .nav-previous .nav-container{ left:10px;}
.slider .nav-next .nav-container{ right:10px;}
.slider .nav-previous:hover .icon{ margin-left:10px;}
.slider .nav-next:hover .icon{ margin-right:10px; right:0;}
.slider .nav-previous .date, .slider .nav-previous .title{ display:none;}
.slider .nav-next .date, .slider .nav-next .title{ display:none;}
.slider .nav-next .icon{ background:url(images/timeline.png) no-repeat 50px -221px;}
/*navigation:before:after的黑边白边 */
#timeline div.navigation::before{ top:-10px; height:9px;}
#timeline div.navigation::after{ top:-9px; height:2px;}
#timeline .navigation .timenav .time .time-interval-minor .minor{ top:-7px;}


/* 页面样式 */
.plantinggl_list .plantItems{ display:inline-block;}
.plantShade_wap{ margin-bottom:30px; clear:both;}
.plantItems .arrowTop{ position:absolute; left:50%; margin-left:-12px; bottom:-21px; width:23px; height:9px; background:url(../asset/images/plantinggl_ico19.jpg) no-repeat; cursor:pointer;}

/* 种植管理的弹出层 样式 */
.plantShade_wap{ min-height:474px; background:#727272;}
.plantShade_powap{ position:relative;}
.plantShade_powap .closeBtn{ position:absolute; left:22px; top:22px; width:18px; height:18px; background:url(../asset/images/plantinggl_ico08.png) no-repeat; cursor:pointer;}
.plantShade_powap .nav-tabs{ border-bottom:0; width:276px; margin:0 auto; padding:20px 0;}
.plantShade_powap .nav-tabs > li{ margin:0;}
.plantShade_powap .nav-tabs > li > a{ display:block; width:92px; height:24px; line-height:24px; margin:0; padding:0; background:none; border:0; font-size:14px; text-align:center; color:#fff;}
.plantShade_powap .nav-tabs > li > a:hover{ line-height:24px; border:0; border-radius:0; background:none;}
.plantShade_powap .nav-tabs > li.active > a,
.plantShade_powap .nav-tabs > li.active > a:hover, 
.plantShade_powap .nav-tabs > li.active > a:focus{ background:url(../asset/images/plantinggl_img01.png) no-repeat; border:0; border-radius:0; color:#fff;}
/* 种植信息内容 */
.plantIntro_dl{ width:876px; margin:0 auto;}
.plantIntro_dt{ float:left; width:240px; height:222px;}
.plantIntro_dt .plantPic{ position:relative; width:210px; height:210px;}
.plantIntro_dt .plantPic .shade{ position:absolute; left:0; top:0; z-index:2;}
.plantIntro_dd{ padding-left:240px;}

.plantIntro_dd .plant_cropName{ overflow:hidden;}
.plantIntro_dd .plantLink{ float:left; max-width:500px; height:40px; line-height:40px; font-size:28px; color:#e1e1e1; white-space:nowrap; text-overflow:ellispsis; overflow:hidden;}
.plantIntro_dd .hideBtns{ display:none; float:left; padding-left:20px; height:40px; line-height:40px;}
.plantIntro_dd .hideBtns a{ float:left; margin:14px 10px 0 0;}
.plantIntro_dd .hideBtns img{ width:20px; height:20px;}
/*.tab-content > .tab-pane{ display:block; visibility:hidden;}
.tab-content > .active{ visibility:visible;}*/

.plantIntro_dd .plantTxt{ height:20px; line-height:20px; margin:15px 0; font-size:14px; color:#cacaca;}
.plantIntro_dd .plantTxt .items{ float:left; padding-right:20px;}
.plantIntro_dd .plantTxt img{ margin:2px 5px 0 0; vertical-align:top;}
.plantIntro_dd .plantTxt i{ font-style:normal;}
.plantingDate_table{ display:inline-block; border-width:1px 1px 1px 1px; border-style:solid solid solid solid; border-color:#898989 #898989 #4f4f4f #4f4f4f; overflow:hidden;}
.plantingDate_td{ float:left; width:158px; height:110px; padding:34px 15px; border-width:1px 1px 1px 1px; border-style:solid solid solid solid; border-color:#4f4f4f #4f4f4f #898989 #898989; color:#e1e1e1;}
.plantingDate_td dt{ float:left; width:50px;} 
.plantingDate_td dd{ padding-left:50px;} 
.plantingDate_td dd .text{ display:block; line-height:18px; font-size:12px;} 
.plantingDate_td dd .time{ display:block; line-height:22px; margin:0; font-size:12px; font-style:normal; font-family:'微软雅黑';} 

.output_table{ margin-top:40px; background:url(../asset/images/plantinggl_bg01.jpg) repeat-x;}
.output_table table{ width:780px; margin:0 auto; text-align:center; color:#e1e1e1;}
.output_table table th{ width:60px; padding:5px 0; font-size:14px; font-weight:normal;}
.output_table table td{ width:60px; padding:5px 0; font-size:12px;}
.output_table table td .danger{ color:#e67da5;}
.output_table table .colspanTh td{ padding:20px 0 10px; line-height:20px; font-size:12px; background:url(../asset/images/plantinggl_ico14.jpg) no-repeat center top;}
.output_table table .colspanTr td{ line-height:20px; font-size:14px;}
/* 环境监控内容 */
.envirRecord_table{ display:table; margin:0 auto; border-width:1px 1px 1px 1px; border-style:solid solid solid solid; border-color:#898989 #898989 #4f4f4f #4f4f4f; overflow:hidden;}
.envirRecord_table table{ border-collapse:separate;}
.envirRecord_table .itmesTd{ position:relative; padding:20px 20px; border-width:1px 1px 1px 1px; border-style:solid solid solid solid; border-color:#4f4f4f #4f4f4f #898989 #898989; color:#e1e1e1; cursor:pointer;}
.envirRecord_table .itmesTd .curIco{ position:absolute; left:0; bottom:0; display:none; width:100%; height:8px; background:url(../asset/images/plantinggl_bg02.png) no-repeat center bottom;}
.envirRecord_td .dt{ padding-right:5px;} 
.envirRecord_td .dt img{ width:42px; height:50px;}
.envirRecord_td .dd{} 
.envirRecord_td .dd .text{ display:block; line-height:18px; font-size:12px;} 
.envirRecord_td .dd .time{ display:inline-block; line-height:34px; margin:0; font-size:14px; font-style:normal; font-family:'微软雅黑';} 

/* timeline控件样式修改 开始 */
#timeline .feedback{ display:none;}
.firebugResetStyles {z-index: 2147483646 !important; top: 0 !important;left: 0 !important;display: block !important;border: 0 none !important; margin: 0 !important; padding: 0 !important;outline: 0 !important;min-width: 0 !important;max-width: none !important;min-height: 0 !important; max-height: none !important; position: fixed !important;transform: rotate(0deg) !important;transform-origin: 50% 50% !important;border-radius: 0 !important;box-shadow: none !important;background: transparent none !important;pointer-events: none !important;white-space: normal !important;}
style.firebugResetStyles {display: none !important;}
.firebugBlockBackgroundColor { background-color: transparent !important;}
.firebugResetStyles:before, .firebugResetStyles:after {content: "" !important;}
.firebugCanvas {display: none !important;}
.firebugLayoutBox {width: auto !important; position: static !important;}
.firebugLayoutBoxOffset {opacity: 0.8 !important;position: fixed !important;}
.firebugLayoutLine {opacity: 0.4 !important;background-color: #000000 !important;}
.firebugLayoutLineLeft, .firebugLayoutLineRight {width: 1px !important;height: 100% !important;}
.firebugLayoutLineTop, .firebugLayoutLineBottom {width: 100% !important; height: 1px !important;}
.firebugLayoutLineTop { margin-top: -1px !important; border-top: 1px solid #999999 !important;}
.firebugLayoutLineRight { border-right: 1px solid #999999 !important;}
.firebugLayoutLineBottom { border-bottom: 1px solid #999999 !important;}
.firebugLayoutLineLeft { margin-left: -1px !important; border-left: 1px solid #999999 !important;}
.firebugLayoutBoxParent { border-top: 0 none !important; border-right: 1px dashed #E00 !important;border-bottom: 1px dashed #E00 !important;border-left: 0 none !important;position: fixed !important;width: auto !important;}
.firebugRuler{ position: absolute !important;}
.firebugRulerH { top: -15px !important;left: 0 !important;width: 100% !important; height: 14px !important;background:red; border-top: 1px solid #BBBBBB !important; border-right: 1px dashed #BBBBBB !important; border-bottom: 1px solid #000000 !important;}
.firebugRulerV {top: 0 !important; left: -15px !important;width: 14px !important; height: 100% !important;background:red; border-left: 1px solid #BBBBBB !important; border-right: 1px solid #000000 !important;border-bottom: 1px dashed #BBBBBB !important;}
.overflowRulerX > .firebugRulerV { left: 0 !important;}
.overflowRulerY > .firebugRulerH { top: 0 !important;}
.fbProxyElement {position: fixed !important;pointer-events: auto !important;}
/* 新增样式 */
#timeline{ position:inherit;}
.plantShade_wap{ position:absolute; left:0; top:0; z-index:300; width:100%;}
#timeline .container.main{ width:100%;}
#timeline .container{ padding-left:0; padding-right:0;}
#timeline .slider{ min-height:200px;}
.media-container img{ width:360px; height:226px;}
html{height:100%;}
body{min-width:1003px; min-height:500px-; padding:0;}
.plantShade_wap{ position:absolute-; position:relative; left:0; top:0; z-index:10; width:100%;}
#timeline{ height:460px;}
.main{ background:rgba(0,0,0,0);}
.container{ padding:0;}
.slider .slider-container-mask{ height:372px;}
.slider .slider-item{ width:100%; height:372px; margin:0; padding:0;}
#timeline .thumbnail{ width:28px; height:28px; padding:0; border-radius:0;}
#timeline .thumbnail img{ height:100%;}
#timeline .navigation .timenav .content .marker .flag .flag-content h3{ margin-top:5px; padding-left:40px; color:#e1e1e1;}
/*去掉左右按钮的date和title*/
.slider .nav-previous, .slider .nav-next{ z-index:3;}
.slider .nav-previous .nav-container{ left:10px;}
.slider .nav-next .nav-container{ right:10px;}
.slider .nav-previous:hover .icon{ margin-left:10px;}
.slider .nav-next:hover .icon{ margin-right:10px; right:0;}
.slider .nav-previous .date, .slider .nav-previous .title{ display:none;}
.slider .nav-next .date, .slider .nav-next .title{ display:none;}
.slider .nav-next .icon{ background:url(../asset/timeline/css/timeline.png) no-repeat 50px -221px;}
/*navigation:before:after的黑边白边 */
#timeline div.navigation::before{ top:-10px; height:9px;}
#timeline div.navigation::after{ top:-9px; height:2px;}
#timeline .navigation .timenav .time .time-interval-minor .minor{ top:-7px;}
.plantinggl_list .plantItems{ display:inline-block;}
.plantShade_wap{ margin-bottom:30px; clear:both;}
.plantItems .arrowTop{ position:absolute; left:50%; margin-left:-12px; bottom:-21px; display:none; width:23px; height:9px; background:url(../asset/images/plantinggl_ico19.jpg) no-repeat; cursor:pointer;}
#timeline .vco-timeline .vco-navigation{ background:url(../asset/images/timeline_bg.jpg); border-top:0;}
.vco-timeline .vco-navigation::before{ background:url(../asset/images/timeline_bg.jpg);content: "";height:9px;left: 0;position: absolute;top: -10px;width: 100%;}
.vco-timeline .vco-navigation::after{ background:rgba(0, 0, 0, 0) -moz-linear-gradient(center bottom , #434446 0%, #363839 100%) repeat-x scroll 0 0; content: "";height:2px;left: 0; position: absolute;top:-9px;width: 100%;}
.vco-timeline .vco-navigation .timenav-background{ background-color:rgba(0, 0, 0, 0.4) !important;}
#timeline .vco-timeline .vco-navigation .timenav-background .timenav-interval-background{ background:#626262 ;}
#timeline .vco-timeline .vco-navigation .timenav .content .marker .flag{background:url(../asset/timeline/css/timeline.png);background-position:0 0;}
#timeline .vco-timeline .vco-navigation .timenav .content .marker .flag:hover{background-position:0 -110px;}
#timeline .vco-timeline .vco-navigation .timenav .content .marker .flag .flag-content{ padding-top:5px;}
#timeline .vco-timeline .vco-navigation .timenav .content .marker .flag .flag-content h3{font-size:14px; color:#e1e1e1;}
#timeline .vco-timeline .vco-navigation .timenav .content .marker .flag:hover .flag-content h3{font-size:14px; color:#525252;}
#timeline .vco-timeline .vco-navigation .vco-toolbar{background:#202222;}
#timeline .vco-timeline .vco-navigation .vco-toolbar .zoom-in .icon{ width:16px; height:16px; background:url(../asset/timeline/css/timeline.png);background-position: 0 -1507px;}
#timeline .vco-timeline .vco-navigation .vco-toolbar .zoom-out .icon{ width:16px; height:16px; background:url(../asset/timeline/css/timeline.png);background-position: 0 -1647px;}
#timeline .vco-slider .nav-next .icon{ background:url(../asset/timeline/css/timeline.png);background-position: 0 -220px}
#timeline .vco-slider .nav-previous .icon{ background:url(../asset/timeline/css/timeline.png);background-position: 0 -293px}
#timeline .vco-timeline .vco-navigation .vco-toolbar .zoom-in, 
#timeline .vco-timeline .vco-navigation .vco-toolbar .zoom-out{ border:none;}
#timeline .vco-timeline .vco-navigation .vco-toolbar{ border:none;}
/* timeline控件样式修改 结束 */
.top div#menu .siteSeleHd-{width:89px;}
.top div#menu .helpSeleHd{width:60px;}
.top .r_t{width:570px;}
.addFarm a{color:#fff;}
.addFarm a:hover{text-decoration: none;}
.addFarm img{padding-bottom:3px; padding-right:3px;}
.btn-group{display: block;}
/*监控悬浮框*/
.clear{clear:both;}
.clear:before, .clear:after{display:block;content:"";height:0;visibility:visible;clear:both;}
.m_close{position:absolute;right:20px;top:20px;z-index:1;width:16px;height:16px;cursor:pointer;}
.m_close img{width:100%;height:100%;}

.monitor_suspend{position:absolute;left:50%;top:50%;z-index:2;width:684px;height:550px;margin-left:-342px;margin-top:-225px;background-color:#000;}


.videoViewShow{ position:relative;width:680px;height:550px;}
.videoViewShow.big_iframe{ position:fixed;left:77px; right:0; top:0;bottom:0;z-index:999999;width:100%-;height:100%;}
.farmPics{float: left; max-width:560px;}
.farmingInputs{margin-bottom: 10px;}
.jl .bootstrap-select.btn-group .dropdown-menu.inner{height:280px;}
.jh .bootstrap-select.btn-group .dropdown-menu.inner{height:280px;}
.record_date2 input{text-indent: 10px;padding: 8px 12px;line-height: normal;border: 1px solid #ddd;border-radius: 4px;background: #fff;height: 34px;}
.modal-open {overflow: auto;}
</style>
</ui:define>
<ui:define name="foot">
	<!-- 选择基地 开始 -->
	<ui:include src="/layout/BaseIframe.xhtml"></ui:include>
	<!-- 选择基地 结束 -->  
</ui:define>
	<ui:define name="body">
	<script type="text/javascript" src="#{request.contextPath}/asset/js/highcharts.js"></script>
	<link rel="stylesheet" type="text/css" href="#{request.contextPath}/asset/css/archive/plantInfo.css"/>
	<link rel="stylesheet" type="text/css" href="#{request.contextPath}/asset/css/skinBlue.css" />
	<script src="#{request.contextPath}/asset/js/jquery.lazyloadxt.js"></script>
	<script type="text/javascript" src="#{request.contextPath}/asset/js/icheck.js"></script>
	<script type="text/javascript" src="#{request.contextPath}/asset/new/bootstrap-popver.js"></script>
	<link type="text/css" rel="stylesheet" href="#{request.contextPath}/asset/css/agricultural/easyFarm.css" />

		<!-- 
			#{newPlantInfoHome.initList()}
			#{newPlantInfoHome.initStorageData()}
		 -->
	<td valign="top">
	<div style="background:url(../asset/images/bg_png.png) repeat;width:100%; height:100%; position:absolute; z-index:1684; display:none;" id="login">
		<div id="login2" style="width:60px; height:60px; margin:220px auto 0 auto;"><img src="../asset/images/loginda.gif" /></div>
		<div id="ossfile" style="margin-top:20px;"></div> 
	</div>
	 <div class="right_c" style="min-height:30px; padding-bottom:20px;">
	 <span style="background: none;height: 100%; left: 0;position: fixed;top: 0;width: 100%;z-index: 200;display:none;" class="mongolia"></span>
	 
            	<!-- 面包屑导航 开始 -->
                <div class="r_title clear" style="">
                    <div class="r_t_l fl">数字农场<span style="padding:0 5px;">&gt;</span><font size="3">种植档案</font></div>
                    <div class="fr" style="margin-bottom:-1px;">
                        <ul class="cm_resumeList clear">
                            <li>
                                <a class="borderBt" href="#"><img src="#{request.contextPath}/asset/images/plantinggl_ico01.jpg"/><span>种植管理</span></a>
                            </li>
                            <li>
                                <a href="#{request.contextPath}/model/ModelInfoOne.seam"><img src="#{request.contextPath}/asset/images/plantinggl_ico02.jpg" /><span>模型库</span></a>
                            </li>
                        </ul>
                    </div>
                </div>
                <!-- 面包屑导航 结束 -->
                <!-- 种植管理主体内容 开始 -->
             	<div class="plantinggl_wap">
                	<div class="mb20 clear" style="height:34px;">
                    	<div class="fl" style="margin-left:5px">
                        	<div class="public-search fl"><span class="octicon-search02"></span>
                            <input type="text" id="searchInfo_"  class="form-control srarchfont" onfocus="searchFocus(this)" onblur="searchBlur(this)"/>
                            </div>
                            <ul class="searchCondition fl">
                            	<li class="#{newPlantInfoHome.initType eq 4?'cur':''}">
                            		<s:link view="/archive/PlantInfoList.xhtml">
                            			<f:param value="4" name="initType"></f:param><f:param value="1" name="pageNum"></f:param><f:param value="" name="searchInfo"></f:param>全部
                            		</s:link>
                            	</li>
                                <li class="#{newPlantInfoHome.initType eq 1?'cur':''}">
                                	<s:link view="/archive/PlantInfoList.xhtml">
                                		<f:param value="1" name="initType"></f:param><f:param value="1" name="pageNum"></f:param><f:param value="" name="searchInfo"></f:param>当前种植
                                	</s:link>
                                </li>
                                <li class="#{newPlantInfoHome.initType eq 2?'cur':''}">
	                                <s:link view="/archive/PlantInfoList.xhtml">
	                                	<f:param value="2" name="initType"></f:param><f:param value="1" name="pageNum"></f:param><f:param value="" name="searchInfo"></f:param>历史种植
	                                </s:link>
                                </li>
                                <li class="#{newPlantInfoHome.initType eq 3?'cur':''}">
	                                <s:link view="/archive/PlantInfoList.xhtml">
	                                	<f:param value="3" name="initType"></f:param><f:param value="1" name="pageNum"></f:param><f:param value="" name="searchInfo"></f:param>计划种植
	                                </s:link>
                                </li>
                            </ul>
                        </div>
                        <div class="btn-group fr">
                            <button style="display: #{s:hasRole('plant_add')?'hidden':'none'}" type="button" class="btn btn-success dropdown-toggle" data-toggle="dropdown"><span id="Primary">添加</span><span class="caret"></span></button>
                            <input class="btn btn-default" style="margin-left:5px;margin-left：20px;"  type="button" onclick="importInit();" value="&#160;导入&#160;"></input>
							<ul class="dropdown-menu" role="menu">
								<li>
						      		<s:link onclick="return checkBase(this)" value="添加" view="/archive/PlantInfoEdit.xhtml" propagation="none" includePageParams="false">
		                    			<f:param name="plantInfoPlantInfoId" />
		                    			<f:param name="baseId" value="#{plantInfoList.baseId}"/>
		                    			<f:param name="pageNum" value="#{plantInfoList.pageNum}"/>
		                    		</s:link>
		                       	</li>
		                        <li>
		                        	<s:link onclick="return checkBase(this)" value="批量添加" view="/archive/PlantInfoEditBatch.xhtml" propagation="none" includePageParams="false">
		                    			<f:param name="plantInfoPlantInfoId" />
		                    			<f:param name="baseId" value="#{plantInfoList.baseId}"/>
		                    			<f:param name="pageNum" value="#{plantInfoList.pageNum}"/>
		                    		</s:link>
		                        </li>
						  	</ul>
                        </div>
                    </div>
                    <!-- 列表内容 开始 -->
                    <div class="plantinggl_list" >
                    <div style="width:1166px;overflow-x: auto;" id="scrollDiv">
                    <div style="width:1166px;" id="itemsDiv">
                    	<a4j:repeat value="#{newPlantInfoHome.objList}" var="var" rowKeyVar="_index">
<div class="plantItems" id="plantItems#{var[0]}">
<em class="arrowTop"></em>
<div class="poBlock">
<ui:fragment rendered="#{var[17]==1&amp;&amp;var[18]==2}"><span onclick=""><img src="#{request.contextPath}/asset/images/wt11.png" /></span></ui:fragment>
<ui:fragment rendered="#{var[8]!=null}">
<span onclick="deviceData_before(#{var[0]},'#{var[8]}',this,'#{var[15]}','#{var[16]}','#{var[18]}')">
<img src="#{request.contextPath}/asset/images/plantinggl_ico05.jpg" />
</span></ui:fragment><ui:fragment rendered="#{var[7]!=null}">
<span name="videoImg" onclick="showVideos(#{var[0]},#{var[7]})" ><img src="#{request.contextPath}/asset/images/plantinggl_ico06.jpg" />
</span>
</ui:fragment>
</div>
<dl class="plantDl"><dt class="plantDt"><a href="javascript:void(0)" ><span class="plant_shadeWap" onclick="plantInfo_before(#{var[0]},'#{var[8]}',this,'#{var[15]}','#{var[16]}','#{var[18]}')"><!--  --><span class="shade"><img src="#{request.contextPath}/asset/images/#{var[17]==1&amp;&amp;var[18]==2?'plantinggl_ico04.png':'plantinggl_ico03.png'}" width="62" height="62" /></span>
<ui:fragment rendered="#{var[5]!=null and var[5]!=''}"><img class="lazyloadimg" src="#{request.contextPath}/asset/images/plantinggl_ico03.png" data-src="#{var[5]}" width="62" height="62" /></ui:fragment><ui:fragment rendered="#{var[5]==null or var[5]==''}"><img src="#{request.contextPath}/asset/images/wt.png" width="62" height="62" /></ui:fragment></span>
<p class="plant_area" onclick="plantInfo_before(#{var[0]},'#{var[8]}',this,'#{var[15]}','#{var[16]}','#{var[18]}')">面积#{var[11]}亩</p></a></dt>
<dd class="plantDd"><h5>#{var[10]}</h5><span style="display:none" class="searchText">#{var[10]}－#{var[4]}－#{var[2]}</span>
<a class="link" href="javascript:void(0)" onclick="plantInfo_before(#{var[0]},'#{var[8]}',this,'#{var[15]}','#{var[16]}','#{var[18]}')"  title="#{var[4]}－#{var[2]}">#{var[4]}－#{var[2]}</a>
<a class="plant_progress plant_progress0" href="javascript:void(0)" onclick="operateList_before(#{var[0]},'#{var[8]}',this,'#{var[15]}','#{var[16]}','#{var[18]}')">
<div class="plantStatues_progress" ></div><div class="progress"><div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="#{var[15]/var[16]*100 gt 100?100:var[15]/var[16]*100}" aria-valuemin="0" aria-valuemax="100" style="width:#{var[15]/var[16]*100 gt 100?100:var[15]/var[16]*100}%;"><span class="sr-only">#{var[15]/var[16]*100 gt 100?100:var[15]/var[16]*100}% Complete</span>
</div><div class="plantCur_num"><span>#{var[15]}</span>天</div> </div><p class="dateBlock"><span class="dateStar">#{var[12]}</span><span class="dateEnd">#{var[14]}</span></p></a></dd></dl></div>
		<s:fragment rendered="#{(_index%5) eq 0 and _index ne 0} "><div style="clear:both;"></div></s:fragment>
                        </a4j:repeat>
                    </div>
                    </div>
                        <!-- 分页 开始 -->
                       <div style="clear:both;">
                         <a4j:outputPanel id="refreshPage">
                              <table style="height:30px; margin:40px auto 0 auto;" cellpadding="0" cellspacing="0">
		                    	<tr>
		                    	<ui:fragment rendered="#{not empty newPlantInfoHome.objList}">
					                <ui:fragment rendered="#{!newPlantInfoHome.previousExists }">
					                <td><img src="#{request.contextPath}/asset/images/page_68.jpg" width="4" height="30" /></td>
					                </ui:fragment>
					                 <ui:fragment rendered="#{newPlantInfoHome.previousExists }">
					                <td><img src="#{request.contextPath}/asset/images/page_67.jpg" width="4" height="30" /></td>
					                </ui:fragment>
					                <ui:fragment rendered="#{newPlantInfoHome.previousExists }">
			                            <td class="td_t_b">
				                            <a href="#" onclick="jump(0);return false;">首页</a>
			                            </td>
			                            <td class="td_t_b td_t_t" style="padding:0; width:30px;">
				                            <a href="#" onclick="jump(#{newPlantInfoHome.previousFirstResult});" class="no_n">
				                            	&lt;
				                            </a>
			                            </td>
			                        </ui:fragment>
							       <a4j:repeat var="_page" value="#{newPlantInfoHome.pageList}" rowKeyVar="_index">
										<td class="td_t_b #{newPlantInfoHome.previousExists or _index >0 ?'td_t_t':''} #{_page eq newPlantInfoHome.pageNum?'onp':''}">
											<a href="#" onclick="jump(#{_page});return false;">
												#{_page}
											</a>
										</td>
									</a4j:repeat>
									<ui:fragment rendered="#{newPlantInfoHome.nextExists}">
		                            <td class="td_t_b td_t_t">
			                            <a href="#" class="no_d" onclick="jump(#{newPlantInfoHome.nextFirstResult});">
			                            &gt;
			                            </a>
		                            </td>
		                            <td class="td_t_b td_t_t">
										 <a href="#" onclick="jump(#{newPlantInfoHome.PAGE_COUNT});">
										 尾页
										 </a>
									</td>
									</ui:fragment>
									<td class="td_t_b td_t_t" style=" color:#9a9a9c;">共#{newPlantInfoHome.PAGE_COUNT}页</td>
		                            <td ><img src="#{request.contextPath}/asset/images/page_70.jpg" width="4" height="30" /></td>
		                            </ui:fragment>
		                    	</tr>
		                    </table>
		                </a4j:outputPanel>
		                <h:form>
				            <input type="hidden" value="#{newPlantInfoHome.pageNum}" id="pageNum" name="pageNum"/>		
				            <input type="hidden" value="#{newPlantInfoHome.baseId}" id="baseId" name="baseId"/>
				            <input type="hidden" value="#{newPlantInfoHome.searchInfo}" id="hidSearchInfo" name="searchInfo"/>
				            <input type="hidden" value="#{newPlantInfoHome.initType}" id="hidInitType" name="initType"/>
				            <h:commandButton value="" action="/archive/PlantInfoList.xhtml" class="searchBtn" style="display:none;"/>
				         </h:form>
                         <!-- 分页 结束 -->
                       </div>
                         <!-- 遮罩层 开始 -->
                        <div class="plantShade_wap" id="plantShade_wap"  style=" display:none; position:absolute;">
                        	<div id="loading" style="position:absolute; left:0; top:0;z-index:1000; width:100%;height:100%;background:rgba(255,255,255,0.8);">
                                <img src="../asset/images/loginda.gif" style="position:absolute;left:50%; top:50%; margin-left:-64px; margin-top:-84px;" />
                            </div>
                            <div class="plantShade_powap">
                                <em class="closeBtn" style="z-index:10000"></em>
                                <ul class="nav nav-tabs" role="tablist" id="myTab">
                                    <li class="active"><a href="javascript:void(0)" onclick="tab_(0)">农事信息</a></li>
                                    <li><a href="javascript:void(0)" onclick="tab_(1)">种植信息</a></li>
                                    <li><a href="javascript:void(0)" onclick="tab_(2)">环境监控</a></li>
                                </ul>
                                <div class="tab-content">
                                <!-- 农事信息 开始 -->
                                <div class="tab-pane active" id="farmingXx" style="position:relative;">
                                <div style="position:absolute; right:45px; top:-40px; width:68px; height:22px; z-index:105;cursor:pointer;" class="addFarm">
                                	<a  class="pinggu"><img src="#{request.contextPath}/asset/images/archive/nspg_02.png"/>农事评估</a>
                                </div>
                                <s:fragment rendered="#{newPlantInfoHome.initType ne 2 and newPlantInfoHome.initType ne 3}">
	                                <div id="tjnsTbn" style="position:absolute; right:150px; top:-40px; width:68px; height:22px; z-index:105;cursor:pointer;" class="addFarm" onclick="alertBaseInfo();">
	                                	<a><img src="#{request.contextPath}/asset/images/archive/nspg_01.png"  />添加农事</a>
	                                </div>
                                </s:fragment>
                                <div id="timeline" style="background-color:#727272">
                                   
                                </div>
                                </div>
                                <!-- 农事信息 结束 -->
                                <!-- 种植信息 开始 -->
                                <div class="tab-pane" id="plantingXx">
                                    <dl class="plantIntro_dl">
                                        <dt class="plantIntro_dt">
                                            <div class="plantPic">
                                                <img class="shade" src="#{request.contextPath}/asset/images/plantinggl_img02.png" width="210" height="210"  />
                                                <img class="img" src="#{request.contextPath}/asset/images/plantinggl_img03.jpg" width="210" height="210"  />
                                            </div>
                                        </dt>
                                        <dd class="plantIntro_dd">
                                            <div class="plant_cropName">
                                                <a class="plantLink" href="#" title="B2-51号棚 甜玉米（水果玉米）">B2-51号棚 甜玉米（水果玉米）</a>
                                                <a href='#' id='hideBtnsxx' style="float:left;margin:10px 5px 0 5px;display:none;"><img src='#{request.contextPath}/asset/images/wt2.png' /></a>
                                                <div class="hideBtns">
                                                	<ui:fragment  rendered="#{initType==2}"><a href="#" onclick="editbut(-1)"><img src="#{request.contextPath}/asset/images/shuaixin-icon.png"  style="height:18px" title="再次种植"/></a></ui:fragment>
                                                    <a href="#" onclick="editbut(0)"><img src="#{request.contextPath}/asset/images/plantinggl_ico16.png" /></a>
                                                    <a href="#" onclick="editbut(1)"><img src="#{request.contextPath}/asset/images/plantinggl_ico17.png" /></a>
                                                    <a href="#" onclick="editbut(2)"><img src="#{request.contextPath}/asset/images/plantinggl_ico18.png" /></a>
                                                </div>
                                            </div>
                                            <p class="plantTxt">
                                                <span class="items"><img src="#{request.contextPath}/asset/images/plantinggl_ico09.png" />农户 <i id="farmer">刘盘龙</i></span>
                                                <span class="items"><img src="#{request.contextPath}/asset/images/plantinggl_ico10.png" /><i id="area">0.6亩/0.65亩</i></span>
                                                <span class="items"><img src="#{request.contextPath}/asset/images/plantinggl_ico09.png" />工单号 <i id="code">PL016201830003</i></span>
                                            </p>
                                             <p class="plantTxt">
                                                <span class="items"><img src="#{request.contextPath}/asset/images/archive/plantinggl_ico1202.png" />未来一天预采量 <i id="preHarvestNum">100kg</i></span>
                                                <span class="items"><img src="#{request.contextPath}/asset/images/archive/plantinggl_ico1203.png" />实时市场价格<i id="marketPrice">￥10/kg</i></span>
                                               
                                            </p>
                                            <div class="plantingDate_table">
                                                <ul>
                                                    <li class="plantingDate_td">
                                                        <dl>
                                                            <dt><img src="#{request.contextPath}/asset/images/plantinggl_ico11.png" width="40" height="40" /></dt>
                                                            <dd>
                                                                <span class="text">定植时间</span>
                                                                <em class="time">2015-03-09</em>
                                                            </dd>
                                                        </dl>
                                                    </li>
                                                    <li class="plantingDate_td">
                                                        <dl>
                                                            <dt><img src="#{request.contextPath}/asset/images/plantinggl_ico12.png" width="40" height="40" /></dt>
                                                            <dd>
                                                                <span class="text">采收时间</span>
                                                                <em class="time">2015-03-09</em>
                                                            </dd>
                                                        </dl>
                                                    </li>
                                                    <li class="plantingDate_td">
                                                        <dl>
                                                            <dt><img src="#{request.contextPath}/asset/images/plantinggl_ico13.png" width="40" height="40" /></dt>
                                                            <dd>
                                                                <span class="text">种植结束</span>
                                                                <em class="time">2015-03-09</em>
                                                            </dd>
                                                        </dl>
                                                    </li>
                                                    <li class="plantingDate_td dqcycleItem"  onclick="openPeriodModal();">
                                                        <dl>
                                                            <dt><img src="#{request.contextPath}/asset/images/archive/plantinggl_ico1201.png" width="40" height="40" /></dt>
                                                            <dd>
                                                                <span class="text">当前生长周期</span>
                                                                <em class="time"></em>
                                                            </dd>
                                                        </dl>
                                                    </li>
                                                </ul>
                                            </div>
                                        </dd>
                                    </dl>
                                    <div class="output_table">
                                        <table cellpadding="0" cellspacing="0">
                                            <tr class="colspanTh">
                                                <th></th>
                                                <td>一月份</td>
                                                <td>二月份</td>
                                                <td>三月份</td>
                                                <td>四月份</td>
                                                <td>五月份</td>
                                                <td>六月份</td>
                                                <td>七月份</td>
                                                <td>八月份</td>
                                                <td>九月份</td>
                                                <td>十月份</td>
                                                <td>十一月份</td>
                                                <td>十二月份</td>
                                            </tr>
                                            <tr class="colspanTr">
                                                <th>预估产量</th>
                                                <td class="month01">--</td>
                                                <td class="month02">--</td>
                                                <td class="month03">--</td>
                                                <td class="month04">--</td>
                                                <td class="month05">--</td>
                                                <td class="month06">--</td>
                                                <td class="month07">--</td>
                                                <td class="month08">--</td>
                                                <td class="month09">--</td>
                                                <td class="month10">--</td>
                                                <td class="month11">--</td>
                                                <td class="month12">--</td>
                                            </tr>
                                            <tr class="colspanTr">
                                                <th>已收釆量</th>
                                                <td class="caimonth01">--</td>
                                                <td class="caimonth02">--</td>
                                                <td class="caimonth03">--</td>
                                                <td class="caimonth04">--</td>
                                                <td class="caimonth05">--</td>
                                                <td class="caimonth06"><span class="danger">950.0</span></td>
                                                <td class="caimonth07">--</td>
                                                <td class="caimonth08">--</td>
                                                <td class="caimonth09">--</td>
                                                <td class="caimonth10">--</td>
                                                <td class="caimonth11">--</td>
                                                <td class="caimonth12">--</td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                                <!-- 种植信息 结束 -->
                                <!-- 环境监控 开始 -->
                                <div class="tab-pane" id="envirJk">
                                    <div class="envirRecord_table">
                                    <table cellpadding="0" cellspacing="0">
                                        <tr>
                                        <td class="itmesTd" >
                                            <table class="envirRecord_td">
                                                <tr>
                                                    <td class="dt"><img src="#{request.contextPath}/asset/images/ico_jiankongKqwd2.png" /></td>
                                                    <td class="dd">
                                                        <span class="text">空气温度</span>
                                                        <em class="time">--</em>
                                                    </td>
                                                </tr>
                                            </table>
                                            <i class="curIco" style="display:block;"></i>
                                        </td>
                                        <td class="itmesTd" >
                                            <table class="envirRecord_td">
                                                <tr>
                                                    <td class="dt"><img src="#{request.contextPath}/asset/images/ico_jiankongKqsd2.png" /></td>
                                                    <td class="dd">
                                                        <span class="text">空气湿度</span>
                                                        <em class="time">--</em>
                                                    </td>
                                                </tr>
                                            </table>
                                            <i class="curIco"></i>
                                        </td>
                                        <td class="itmesTd" >
                                            <table class="envirRecord_td">
                                                <tr>
                                                    <td class="dt"><img src="#{request.contextPath}/asset/images/ico_jiankongTrwd2.png" /></td>
                                                    <td class="dd">
                                                        <span class="text">土壤温度</span>
                                                        <em class="time">--</em>
                                                    </td>
                                                </tr>
                                            </table>
                                            <i class="curIco"></i>
                                        </td>
                                        <td class="itmesTd" >
                                            <table class="envirRecord_td">
                                                <tr>
                                                    <td class="dt"><img src="#{request.contextPath}/asset/images/ico_jiankongTrsf2.png" /></td>
                                                    <td class="dd">
                                                        <span class="text">土壤水分</span>
                                                        <em class="time">--</em>
                                                    </td>
                                                </tr>
                                            </table>
                                            <i class="curIco"></i>
                                        </td>
                                        <td class="itmesTd" >
                                            <table class="envirRecord_td">
                                                <tr>
                                                    <td class="dt"><img src="#{request.contextPath}/asset/images/ico_jiankongEyht2.png" /></td>
                                                    <td class="dd">
                                                        <span class="text">二氧化碳</span>
                                                        <em class="time">--</em>
                                                    </td>
                                                </tr>
                                            </table>
                                            <i class="curIco"></i>
                                        </td>
                                        <td class="itmesTd" >
                                            <table class="envirRecord_td">
                                                <tr>
                                                    <td class="dt"><img src="#{request.contextPath}/asset/images/ico_jiankongGz2.png" /></td>
                                                    <td class="dd">
                                                        <span class="text">光照</span>
                                                        <em class="time">--</em>
                                                    </td>
                                                </tr>
                                            </table>
                                            <i class="curIco"></i>
                                        </td>
                                        <td class="itmesTd" >
                                            <table class="envirRecord_td">
                                                <tr>
                                                    <td class="dt"><img src="#{request.contextPath}/asset/images/ico_jiankongEC.png" /></td>
                                                    <td class="dd">
                                                        <span class="text">EC值</span>
                                                        <em class="time">--</em>
                                                    </td>
                                                </tr>
                                            </table>
                                            <i class="curIco"></i>
                                        </td>
                                        <td class="itmesTd" >
                                            <table class="envirRecord_td">
                                                <tr>
                                                    <td class="dt"><img src="#{request.contextPath}/asset/images/ico_jiankongPH.png" /></td>
                                                    <td class="dd">
                                                        <span class="text">PH值</span>
                                                        <em class="time">--</em>
                                                    </td>
                                                </tr>
                                            </table>
                                            <i class="curIco"></i>
                                        </td>
                                        </tr>
                                    </table>
                                    </div>
                                    <div id="container_chart" style="min-width:700px;height:290px; margin-top:20px;position:relative;"></div>
                                </div>
                                <!-- 环境监控 结束 -->
                                </div>
                            </div>
                        </div>
                        <!-- 遮罩层 结束 -->
                    </div>
                    <!-- 列表内容 结束 -->
                </div>
                <!-- 种植管理主体内容 结束 -->
            </div>
            <div class="noneinfo" style="display:none">
            <div style="width:780px; margin:90px auto 0; text-align:center;">
				<img src="#{request.contextPath}/asset/images/plantinggl_ico22.png" />
				<p style="padding-top:15px;color:#fff;">很遗憾，没有农事信息</p>
				<p style="padding-top:30px;color:#fff;">完整的农事计划和记录可以帮助您全程追溯农事生产，保证农产品优质优价，快去模型库与农事模块中添加吧！</p>
			</div>
            </div>
    <!-- 添加农事计划模态框 内容开始 -->
    <div class="modal fade addFarmModal" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog popWidth" id="agriculturalModal">
       <a4j:form ajaxSubmit="true" id="agr">
        <div class="modal-content">
          <div class="modal-header">
            <input type="button" class="close" data-dismiss="modal"> </input>
            <h4 class="modal-title" id="myModalLabel">添加农事</h4>
          </div>
          <div class="modal-body" style="min-height:445px;width:803px;">
                <ul class="nav nav-tabs" role="tablist" id="myTab">
			      <li class="active"><a href="#home" role="tab" data-toggle="tab" id="jltab">记录</a></li>
			      <li style="display:#{newPlantInfoHome.enterpriseSettings.farmPlatChecked?'block':'none'}"><a href="#profile" role="tab" data-toggle="tab" id="jhtab">计划</a></li>
			    </ul>
			   
			    <div class="tab-content" style="padding-top: 10px;">
			      <div class="tab-pane active" id="home">
					<div class="modal-body farmRecord  clear" style="padding-top: 10px;top:inherit; max-height:381px; overflow:auto; width: 816px;">
						<div class="choice jl">
							<p class="item">区域</p>
							<s:div id="refreshPlantInfo" styleClass="popSelect">
							</s:div>
							<s:div id="refreshDataStandard">
								<input type="hidden" id="dataStandard" name="" value="#{newPlantInfoHome.dataStandard}"/>
							</s:div>
						</div>
						<div class="choice" style="display:#{newPlantInfoHome.enterpriseSettings.farmerChecked?'block;':'none;'}" dis="#{newPlantInfoHome.enterpriseSettings.farmerChecked}">
							<p class="item">操作人</p>
								<select style="display: none;" class="selectpicker" multiple="multiple" data-live-search="true" id="record_name" name="record_name">
            					<a4j:repeat value="#{newPlantInfoHome.farmerList}" var="var">
            					<option value="#{var[0]}">#{var[1]}</option>
            					</a4j:repeat>
                            </select>
						</div>
						<div class="choice">
							<p class="item">操作内容</p>
							<s:div id="refreshOlist" styleClass="popSelect jl" style="float:left;">
                               <select class="selectpicker" style="display: none;" id="record_operate" name="record_operate" data-live-search="true">
                                    <a4j:repeat value="#{newPlantInfoHome.allTypeList}" var="var">
                                    	<option value="#{var[0]}">#{var[1]}</option>
                                    </a4j:repeat>
                               </select>
                            </s:div>
							<input type="button" class="farmingInputs_add2" onclick="jquery('#o_name_1').val('');jquery('#o_remark_1').val('');jquery('#add_operate2').show();"/>
						</div>
						<div class="choice" style="display:#{newPlantInfoHome.enterpriseSettings.workTimeChecked?'block;':'none;'}" dis="#{newPlantInfoHome.enterpriseSettings.workTimeChecked}">
							<p class="item">工时</p>
							<input type="text" class="form-control nw130" value="1"  id="record_time" name="record_time"/>
							<p class="unit">小时</p>
							<p class="unit" style="color:red;">*</p>
						</div>
						<div class="choice">
							<p class="item">操作时间</p>
							<div class="input-append date form_datetime zhongzhi_datetime">
								<input size="26" type="text"  value=""  readonly="readonly" style="width:190px" id="record_date" name="record_date"/>
								<span class="add-on"><i class="icon-th"></i></span>
							</div>
						</div>
	                    <div class="choice" style="display:#{newPlantInfoHome.enterpriseSettings.environmentChecked?'block;':'none;'}" dis="#{newPlantInfoHome.enterpriseSettings.environmentChecked}"> 
	                        <p class="item">环境温度</p>
	                       <input type="text" class="form-control nw130" value="" id="record_temp" name="record_temp"/>
	                        <p class="unit">℃</p>
	                    </div>
	                    <div class="choice" style="display:#{newPlantInfoHome.enterpriseSettings.environmentChecked?'block;':'none;'}" dis="#{newPlantInfoHome.enterpriseSettings.environmentChecked}">
	                        <p class="item">环境湿度</p>
	                        <input type="text" class="form-control nw130" value=""  id="record_humi" name="record_humi"/>
	                        <p class="unit">%</p>
	                    </div>
						<div class="tup clear">
							<div class="choice" style="margin-bottom: 0px;">
								<p class="item farmHeight">农事图片</p>
								<div class="farmPics">
									<h:panelGroup id="picId">
	                                     <a4j:repeat value="#{newPlantInfoHome.farmingPicList}" var="var" id="farmingPicList" rowKeyVar="row">
	                                     	<div class="farmingInputs fl">
	                                         	<a class="farmingInputs_pic" href="javascript:;"><img src="#{var[0]}" width="128" height="128" /></a>
	                                             <em class="closeInputs" onclick="delfarmingPic(this,#{row})"><img src="#{request.contextPath}/asset/images/clo_04.jpg" /></em>
	                                         </div>
	                                     </a4j:repeat>
	                                     <input type="button" class="farmingInputs_add3" style="margin-bottom:25px;float:none;" onclick="addFarming();"></input>
                                     </h:panelGroup>
								</div>
							</div> 
	                        <div class="choice" style="margin-bottom: 0px;display:#{newPlantInfoHome.enterpriseSettings.inputsInfoChecked?'block;':'none;'}" >
	                            <p class="item farmHeight">投入品</p>
	                            <div class="farmPics">
	                            	<s:div id="farmingInputs_wp" styleClass="farmingInputs_wp">
	                                 	<a4j:repeat value="#{newPlantInfoHome.recordList}" var="var" id="recordList" rowKeyVar="row">
				                         	<div class="farmingInputs fl">
				                                 <a class="farmingInputs_pic" href="javascript:;">
				                                 <s:fragment rendered="#{var.inputsInfoId.packingImagesUrl eq null or var.inputsInfoId.packingImagesUrl eq ''}"><img src="#{request.contextPath}/asset/images/inputs/tourupin.jpg" width="128" height="128" /></s:fragment>
		                                         <s:fragment rendered="#{var.inputsInfoId.packingImagesUrl ne null and var.inputsInfoId.packingImagesUrl ne ''}"><img src="#{var.inputsInfoId.packingImagesUrl}" width="128" height="128" /></s:fragment>
				                                 <p>#{var.inputsInfoId.name} #{var.amount}#{var.inputsInfoId.unitInfo.name}</p>
				                                 </a>
				                                 <em class="closeInputs" onclick="delRecordList(this,#{var.id_index})"><img src="#{request.contextPath}/asset/images/clo_04.jpg" /></em>
				                             </div>
				                        </a4j:repeat>                       	
		                                <div class="farmingInputs_add" style="position:static;">
		                                	<input type="button" class="farmingInputs_add3" style="margin-bottom:25px;" onclick="addRecord()"></input>
		                   				</div>
	                            	</s:div>	
	                            </div>
							</div> 
						</div>
						<div class="choice" style="display:#{newPlantInfoHome.enterpriseSettings.inputsInfoChecked?'block;':'none;'}">
	                        <p class="item">农资成本</p>
	                        <s:div id="nsInputsCost">
	                        	<p class="unit" id="nsInputsCostVal"><h:outputText value="#{newPlantInfoHome.nsInputsCost}" ><f:convertNumber pattern="#.##"/></h:outputText>元</p>
	                        </s:div>
	                    </div>
						<div class="choice" style="display:#{newPlantInfoHome.enterpriseSettings.costChecked?'block;':'none;'}" dis="#{newPlantInfoHome.enterpriseSettings.costChecked}">
	                        <p class="item">其他成本</p>
	                        <input type="text" class="form-control nw130" id="record_costing" name="record_costing"/>
	                        <p class="unit">元</p>
	                    </div>
                 		<div class="choice" style="width:100%;">
                     		<p class="item">备注</p>
                     		<textarea  rows="2" id="record_remark" name="record_remark"></textarea>	
                 		</div>
					</div>
			      </div>
			      
			      <div class="tab-pane" id="profile">
			      	<div class="modal-body farmRecord  clear" style="padding-top: 10px;top:inherit; max-height:381px;min-height:381px; overflow:auto; width: 816px;">
						<div class="choice jh">
							<p class="item">区域</p>
							<s:div id="refreshPlantInfo1" styleClass="popSelect">								    
							</s:div>
						</div>
						<div class="choice" style="display:#{newPlantInfoHome.enterpriseSettings.farmerChecked?'block;':'none;'}" dis="#{newPlantInfoHome.enterpriseSettings.farmerChecked}">
							<p class="item">操作人</p>
							<select style="display: none;" class="selectpicker" multiple="multiple" data-live-search="true" id="record_name2" name="record_name2">
               					<a4j:repeat value="#{newPlantInfoHome.farmerList}" var="var">
               					<option value="#{var[0]}">#{var[1]}</option>
               					</a4j:repeat>
                        	</select>
						</div>
						<div class="choice">
							<p class="item">操作内容</p>
							<s:div id="refreshOlist1" styleClass="popSelect jh" style="float:left;">
                               	<select class="selectpicker" style="display: none;" id="record_operate2" name="record_operate2" data-live-search="true">
                                   <a4j:repeat value="#{newPlantInfoHome.allTypeList}" var="var">
                                   <option value="#{var[0]}">#{var[1]}</option>
                                   </a4j:repeat>
                                   </select>
                             </s:div>
							<input type="button" class="farmingInputs_add2" onclick="jquery('#o_name_1').val('');jquery('#o_remark_1').val('');jquery('#add_operate2').show();"/>
						</div>
						<div class="choice" style="display:#{newPlantInfoHome.enterpriseSettings.workTimeChecked?'block;':'none;'}" dis="#{newPlantInfoHome.enterpriseSettings.workTimeChecked}">
							<p class="item">工时</p>
							<input type="text" class="form-control nw130" value="1"  id="record_time2" name="record_time2"/>
							<p class="unit">小时</p>
							
						</div>
						<div class="choice">
							<p class="item">操作时间</p>
							<div class="input-append date  record_date2" >
								<input size="26" type="text" value="" readonly="readonly" style="width:190px" id="record_date2" name="record_date2"/>
								    <span class="add-on"><i class="icon-th"></i></span>
							</div>
						</div>
						<div class="tup clear">
	                        <div class="choice" style="margin-bottom: 0px;display:#{newPlantInfoHome.enterpriseSettings.inputsInfoChecked?'block;':'none;'}" >
	                            <p class="item farmHeight">投入品</p>
	                            <div class="farmPics">
	                            	<s:div id="farmingInputs_wp2" styleClass="farmingInputs_wp2">
                                 	<a4j:repeat value="#{newPlantInfoHome.recordList2}" var="var" id="jishuarecordList_" rowKeyVar="row">
			                         	<div class="farmingInputs fl">
			                                 <a class="farmingInputs_pic" href="javascript:;">
			                                 <s:fragment rendered="#{var.inputsInfoId.packingImagesUrl eq null or var.inputsInfoId.packingImagesUrl eq ''}"><img src="#{request.contextPath}/asset/images/inputs/tourupin.jpg" width="128" height="128" /></s:fragment>
	                                         <s:fragment rendered="#{var.inputsInfoId.packingImagesUrl ne null and var.inputsInfoId.packingImagesUrl ne ''}"><img src="#{var.inputsInfoId.packingImagesUrl}" width="128" height="128" /></s:fragment>
			                                 <p>#{var.inputsInfoId.name} #{var.amount}#{var.inputsInfoId.unitInfo.name}</p>
			                                 </a>
			                                 <em class="closeInputs" onclick="delRecordList(this,#{var.id_index})"><img src="#{request.contextPath}/asset/images/clo_04.jpg" /></em>
			                             </div>
                        			</a4j:repeat>                           	
                                <div class="farmingInputs_add" style="position:static;">
                                	<input type="button" class="farmingInputs_add3" style="margin-bottom:25px;" onclick="addRecord()"></input>
                   				</div>
                            </s:div>	
	                            </div>
							</div> 
						</div>
						<div class="choice" style="display:#{newPlantInfoHome.enterpriseSettings.inputsInfoChecked?'block;':'none;'}">
	                        <p class="item">农资成本</p>
	                        <s:div id="jhInputsCost">
	                        	<p class="unit" id="jhInputsCostVal"><h:outputText value="#{newPlantInfoHome.jhInputsCost}" ><f:convertNumber pattern="#.##"/></h:outputText>元</p>
	                        </s:div>
	                    </div>
						<div class="choice" style="display:#{newPlantInfoHome.enterpriseSettings.costChecked?'block;':'none;'}" dis="#{newPlantInfoHome.enterpriseSettings.costChecked}">
	                        <p class="item">其他成本</p>
	                        <input type="text" class="form-control nw130" id="record_costing2" name="record_costing2"/>
	                        <p class="unit">元</p>
	                    </div>
                 		<div class="choice" style="width:100%;">
                     		<p class="item">备注</p>
                     		<textarea  rows="2"  id="record_remark2" name="record_remark2"></textarea>			
                 		</div>
					</div>
			      
			      </div>
			    </div> 
          </div>
          <div class="modal-footer">
             <a4j:commandButton styleClass="btn btn-success submitBtn" style="display:none;" action="#{newPlantInfoHome.addAgricultural()}" value="提交"  oncomplete="jquery('.jilubutton').removeAttr('disabled');jquery('#myModal').modal('hide');"></a4j:commandButton>
             <a4j:commandButton styleClass="btn btn-default submitAddBtn" style="display:none;" action="#{newPlantInfoHome.addAgricultural()}" value="提交并新增"  oncomplete="jquery('.jilubutton').removeAttr('disabled');openRecord();"></a4j:commandButton>        
             
             <a4j:commandButton styleClass="btn btn-success submitBtn2" style="display:none;" action="#{newPlantInfoHome.addAgriculturalPlant()}" value="提交" oncomplete="jquery('.jilubutton').removeAttr('disabled');jquery('#myModal').modal('hide');"></a4j:commandButton>
             <a4j:commandButton styleClass="btn btn-default submitAddBtn2" style="display:none;" action="#{newPlantInfoHome.addAgriculturalPlant()}" value="提交并新增" oncomplete="jquery('.jilubutton').removeAttr('disabled');openRecord();"></a4j:commandButton>
                                                                                              
          	<button type="button" class="btn btn-success jilubutton" onclick="submitAgricultural('1');">提交</button>
          	<button type="button" class="btn btn-default jilubutton" onclick="submitAgricultural('2');">提交并新增</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">返回</button>
          </div>
        </div>
        </a4j:form>
      </div>
       <!-- 添加农事图片开始-->
    <div class="farmingInputs_mini modal-dialog" id="addMyFarming" style="z-index:10111;position:absolute; left:50%; top:50%; margin-left:-235px; margin-top:-260px;width:487px;">
    	<a4j:form ajaxSubmit="true" id="pic" autocomplete="on">
	    	<div class="farmingInputs_miniHd"><h3>添加农事图片</h3><input type="button" class="butt" onclick="picFiltration();jquery('#addMyFarming').hide()"/></div>
	        <div class="farmingInputs_miniBd_min">
	        	<iframe src="#{request.contextPath}/agricultural/farmingPic.seam" id="myframPic" name="myframPic" frameBorder="0" scrolling="no" height="228px" width="320" ></iframe>
		        <table>			        
					<tr>
			            <td width="100"><h3 class="all_te" style="margin-top:10px;">图片说明:</h3></td>
			            <td width="230" >
			            	<h:inputTextarea value="#{newPlantInfoHome.centent}" styleClass="form-control" id="contentId" style="width:319px; float:left; display:inline; margin-right:5px;"/>
			            	<h:inputHidden value="#{newPlantInfoHome.imgUrl}" id="imgUrl"/>
			                <h:inputHidden value="#{newPlantInfoHome.picJson}" id="picJson"/>
			            	<span style="color:#f00;">最多不能超过70字</span>
			            </td>        
			        </tr>
		        </table>
	        </div>
	        <div class="farmingInputs_miniFt">
		        <a4j:commandButton value="提交"  onclick="if(!myPicUrl())return false" data="#{newPlantInfoHome.promptMessage}" action="#{newPlantInfoHome.farmingPic()}" oncomplete="farpicref(data)" reRender="picId" styleClass="btn btn-success"/>
		        <input class="btn btn-default" onclick="picFiltration();jquery('#addMyFarming').hide();" type="button" value="返回" style="margin-left:5px"></input>
	        </div>
        </a4j:form>
    </div>
    <!-- 添加农事图片结束 -->
     <div class="farmingInputs_mini modal-dialog" id="addInputRecord" style="z-index:101;position:absolute; left:50%; top:70px; width:828px; margin-left:-357px; ">
        <a4j:form ajaxSubmit="true" id="record_" autocomplete="on">
            <div class="farmingInputs_miniHd"><h3>添加投入品</h3><input type="button" class="butt" onclick="jquery('#addInputRecord').hide()"/></div>
                 <div class="farmingInputs_miniBd" style="padding:0;">
                     <div class="box_padding20">
	                     <div id="iradio-InputProductInfo">
                             <!-- 投入品搜索 -->
                             <div class="farminputs_search clear">
                                  	<div class="public-search">
										<span class="octicon-search02"></span>
										<input class="form-control srarchfont" id="searchInputText" type="text" value="请输入查询内容" onfocus="FocusFn(this,'#333','请输入查询内容')" onblur="BlurFn(this,'#a8a8a8','请输入查询内容')"></input>
									</div>
									<p class="txt_name fl">投入品类型</p>
									<div class="inputs_selectpicker">
										<select class="selectpicker" id="inputType">
	                                         <option value="2">农药</option>
	                                         <option value="3">肥料</option>
	                                         <option value="5">种子</option>
	                                         <option value="4">其他</option>
                                        </select>
                                    </div>
                                     <input type="button" class="btn btn-primary fl" onclick="searchInputs(1);" value="搜索"/>
                             </div>
                             <!-- 投入品表格上 -->
	                          <h:panelGroup id="recordInputList">
	                              <div class="inputs_table" id="inputs_table">
	                                   <table width="100%" cellpadding="0" cellspacing="0" id="inputsTable">
	                                       <tr>
	                                       	<th width="30" class="br_bt br_rt radius_lt"><span id="mn_checkall" class="mn_checkall" onclick="OutputCheckAll(this,'#inputs_table')"></span></th>
	                                       	<th width="164" class="br_bt br_rt">投入品编号</th>
	                                       	<th width="170" class="br_bt br_rt">投入品名称</th>
	                                       	<th width="176" class="br_bt br_rt">投入品规格</th>
	                                       	<th class="br_bt radius_lt">生产厂家</th>
	                                       </tr>
	                                       <a4j:repeat value="#{newPlantInfoHome.goodsInfoList}" var="var">
	                                        <tr id="trp_#{var[0]}">
	                                        	<td class="br_bt br_rt"><span class="mn_check" id="check_#{var[0]}" onclick="OutputCheck(this,'#inputs_table','#mn_checkall','#{var[0]}')"></span>
	                                        		<input type="hidden" value="#{var[0]}"/>
	                                        		<input type="hidden" value="#{var[9]}"/>
	                                        	</td>
	                                        	<td class="br_bt br_rt"><p class="ellipsis">#{var[11]}</p></td>
	                                        	<td class="br_bt br_rt"><p class="ellipsis">#{var[1]}</p> </td>
	                                        	<td class="br_bt br_rt"><p class="ellipsis">#{var[5]}#{var[10]}<s:fragment rendered="#{not empty var[7]}">/#{var[7]}</s:fragment></p></td>
	                                        	<td class="br_bt"><p class="ellipsis">#{var[8]}</p></td>
	                                        </tr>
	                                       </a4j:repeat>
	                                    </table>
	                              </div>
                              	<!-- 分页 开始 -->
						    	<table class="pageModel-wap fr" cellpadding="0" cellspacing="0">
							        <tr>
							            <td>
							                <div style="width:auto;">
							                    <table class="pageModel" cellpadding="0" cellspacing="0">
							                        <tr>
							                            <td>
							                            	<s:fragment rendered="#{newPlantInfoHome.inputsPageNum ne 1 and newPlantInfoHome.inputsTotalPageNum gt 0}">
							                            		<span class="page_num"><a id="lastPage" href="javascript:inputsJump(1);">首页</a></span>
								                            	<span class="page_num"><a href="javascript:inputsJump(#{newPlantInfoHome.inputsPageNum-1});">&lt;&lt;</a></span>
								                            </s:fragment>
								                            <a4j:repeat value="#{newPlantInfoHome.inputsPageList}" var="_page">
								                            	<span class="page_num #{newPlantInfoHome.inputsPageNum eq _page? 'page_Cur':''}"><a href="javascript:inputsJump(#{_page});">#{_page}</a></span>
								                            </a4j:repeat>
								                            <s:fragment rendered="#{newPlantInfoHome.inputsPageNum ne newPlantInfoHome.inputsTotalPageNum and newPlantInfoHome.inputsTotalPageNum gt 0}">
								                            	<span class="page_num"><a href="javascript:inputsJump(#{newPlantInfoHome.inputsPageNum+1});">&gt;&gt;</a></span>
								                            	<span class="page_num"><a id="lastPage" href="javascript:inputsJump(#{newPlantInfoHome.inputsTotalPageNum});">尾页</a></span>
								                            </s:fragment>																						                               
							                                <span class="page_num pageCount page_last" style="border-right:0;"><a href="javascript:;" style="cursor:default;">共#{newPlantInfoHome.inputsTotalPageNum}页</a></span>
							                             </td>
							                    	</tr>
							                    </table>
							                </div>
							            </td>
							        </tr>
						    	</table>
							</h:panelGroup>
						</div>
                    </div>
					<!-- 投入品表格下 -->
					<div class="box_padding20 br_dd mb20 clear">
						<div class="inputs_table mt20">
                          	<table width="100%" cellpadding="0" cellspacing="0" id="addInputsTable">
                                <tr>
                                	<th width="40" class="br_bt br_rt radius_lt">序号</th>
                                	<th width="80" class="br_bt br_rt">投入品名称</th>
                                	<th width="80" class="br_bt br_rt">规格</th>
                                	<th width="60" class="br_bt br_rt">使用量</th>
                                	<th width="60" class="br_bt br_rt">成本</th>
                                	<th width="120" class="br_bt br_rt">出库</th>
                                	<th width="150" class="br_bt br_rt">入库批次</th>
                                	<th width="90" class="br_bt br_rt">经办人</th>
                                	<th width="50" class="br_bt br_rt">库存量</th>
                                	<th class="br_bt radius_lt">操作</th>
                                </tr>
                            </table>
                        </div>
					</div>
				</div>                                                                               
                <div class="farmingInputs_miniFt">        
                	<input type="hidden" id="agricultralType" name="agricultralType"/>                                                                       						
					<h:inputHidden value="#{newPlantInfoHome.inputsInfoData}" id="inputsInfoData"/>
                	<a4j:commandButton id="submitInputs" value="提交" onclick="if(!submitRecord()){return false;}" reRender="farmingInputs_wp,farmingInputs_wp2,nsInputsCost,jhInputsCost" 
 						oncomplete="jquery('#addInputRecord').hide();document.getElementById('record_:submitInputs').disabled = false;farpicref('')" 
						action="#{newPlantInfoHome.addInputsRecord()}" styleClass="btn btn-success"/>
					<input class="btn btn-default" onclick="jquery('#addInputRecord').hide();" type="button" value="返回" style="margin-left:5px"></input>
                </div>
            </a4j:form>
         </div>
     	<!-- 添加投入品结束-->
     <div class="farmingInputs_mini" id="add_operate2" style="z-index:101;display:none;position:absolute; left:50%; top:50%; margin-left:-173px; margin-top:-150px;">
                                             <a4j:form ajaxSubmit="true">
                                                <div class="farmingInputs_miniHd"><h3>添加农事操作类型</h3>
                                                <input type="button" class="butt" onclick="jquery('#add_operate2').hide()"> </input>
                                                </div>
                                                <div class="farmingInputs_miniBd_min">
                                               
                                                <table>
                                                <tr>
                                                    <td width="60" align="right" valign="middle">名称</td>
                                                    <td style="padding-left:15px;">
                                                        <input class="form-control" id="o_name_1"  name="o_name" type="text" style="width:188px; float:left; display:inline; margin-right:5px;" />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td width="60" align="right" valign="middle">描述</td>
                                                    <td style="padding-left:15px;">
                                                        <textarea class="form-control" id="o_remark_1" name="o_remark" style="width:200px; resize:none;" rows="3"></textarea>
                                                    </td>
                                                </tr>
                                                </table>
                                                </div>
                                                <div class="farmingInputs_miniFt">
                                                <a4j:commandButton value="提交" onclick="if(!checkOp1())return false" action="#{newPlantInfoHome.addOperate()}" reRender="refreshOlist,refreshOlist1" oncomplete="jquery('#record_operate,#record_operate2').selectpicker('refresh');jquery('#add_operate2').hide()" styleClass="btn btn-success" style=""/>
                                                    <input class="btn btn-default" type="button"  onclick="jquery('#add_operate2').hide()" value="返回"/>
                                                </div>
                                                </a4j:form>
                                            </div>                               
                                        	<div class="modal-dialog" id="addInput" style="display:none;width:660px;">
                                        	<a4j:form ajaxSubmit="true" id="inputs" autocomplete="on">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                    <input type="button" class="close" onclick="jquery('#addInput').hide();jquery('#agriculturalModal').show();jquery('#addInputRecord').show();"> </input>
                                                    <h4 class="modal-title font14 mlal" id="myModalLabel">添加农药</h4>
                                                    </div>
                                                    <div class="modal-body" style="padding-bottom:0;">
                                                   		<table class="farmingMageTab_jl">
                                                            <tr>
                                                            	<td width="62" align="right">投入品名称</td>
                                                                <td width="218" style="padding-left:15px;">
                                                                	<input type="hidden" value="" id="input_type" name="input_type"/>
							               							<input type="text" class="form-control nw221" style="width:170px;" id="input_name" name="input_name"  />
                                                                </td>
                                                                <td width="62" align="right">规格</td>
                                                                <td width="218" style="padding-left:15px;">
                                                                	<input type="text" class="form-control nw221" style="width:170px;" id="input_spec" name="input_spec"  />
                                                                </td>
                                                            </tr>
                                                            <tr  class="input_h ">
                                                            	<td width="" align="right">保质期</td>
                                                                <td width="" style="padding-left:15px;">
                                                                	<input type="text" class="form-control nw221" style="width:170px;float:left" id="input_shelfLife" name="input_shelfLife"  /> 月
                                                                </td>
                                                                <td width="" align="right">生产厂家</td>
                                                                <td width="" style="padding-left:15px;">
                                                                	<input type="text" class="form-control nw221" style="width:170px;" id="input_facture" name="input_facture"  />
                                                                </td>
                                                            </tr>
                                                            <tr class="input_pest inpu">
                                                            	<td width="" align="right">有效成分</td>
                                                                <td width="" style="padding-left:15px;">
                                                                	<input type="text" class="form-control nw221" style="width:170px;" id="pest_active" name="pest_active"  />
                                                                </td>
                                                                <td width="" align="right">农药类型</td>
                                                                <td width="" style="padding-left:15px;">
                                                                	<input type="text" class="form-control nw221" style="width:170px;" id="pest_type" name="pest_type"  />
                                                                </td>
                                                            </tr>
                                                            <tr class="input_pest inpu">
                                                            	<td width="" align="right">安全间隔期</td>
                                                                <td width="" style="padding-left:15px;">
                                                                	<input type="text" class="form-control nw221" style="width:170px;float:left" id="pest_interval" name="pest_interval"  /> 天
                                                                </td>
                                                                <td width="" align="right">防治对象</td>
                                                                <td width="" style="padding-left:15px;">
                                                                	<input type="text" class="form-control nw221" style="width:170px;" id="pest_control" name="pest_control"  />
                                                                </td>
                                                            </tr>
                                                            <tr class="input_pest inpu">
                                                            	<td width="" align="right">使用方法</td>
                                                                <td width="" style="padding-left:15px;">
                                                                	<input type="text" class="form-control nw221" style="width:170px;" id="pest_method" name="pest_method"  />
                                                                </td>
                                                                <td width="" align="right"></td>
                                                                <td width="" style="padding-left:15px;">
                                                                	
                                                                </td>
                                                            </tr>
                                                            <tr class="input_fert inpu">
                                                            	<td width="" align="right">登记证号</td>
                                                                <td width="" style="padding-left:15px;">
                                                                	<input type="text" class="form-control nw221" style="width:170px;" id="fert_no" name="fert_no"  />
                                                                </td>
                                                                <td width="" align="right">养分含量</td>
                                                                <td width="" style="padding-left:15px;">
                                                                	<input type="text" class="form-control nw221" style="width:170px;" id="fert_content" name="fert_content"  />
                                                                </td>
                                                            </tr>
                                                            <tr class="input_fert inpu">
                                                            	<td width="" align="right">肥料类型</td>
                                                                <td width="" style="padding-left:15px;">
                                                                	<input type="text" class="form-control nw221" style="width:170px;" id="fert_type" name="fert_type"  />
                                                                </td>
                                                                <td width="" align="right">适用作物</td>
                                                                <td width="" style="padding-left:15px;">
                                                                	<input type="text" class="form-control nw221" style="width:170px;" id="fert_crop" name="fert_crop"  />
                                                                </td>
                                                            </tr>
                                                            <tr class="input_fert inpu">
                                                            	<td width="" align="right">施用方法</td>
                                                                <td width="" style="padding-left:15px;">
                                                                	<input type="text" class="form-control nw221" style="width:170px;" id="fert_method" name="fert_method"  />
                                                                </td>
                                                                <td width="" align="right"></td>
                                                                <td width="" style="padding-left:15px;">
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                            	<td width="" align="right" valign="middle">备注</td>
                                                                <td width="" style="padding-left:15px;">
                                                                	<textarea class="form-control" id="input_description" name="input_description" style="width:145px; resize:none; font-size:12px;" rows="3"></textarea>
                                                                </td>
                                                                <td width="" align="right" valign="middle">图片上传：<input type="hidden" value="" id="url" name="url"/></td>
                                                                <td width="" style="padding-left:15px;">
                                                                	<iframe src="#{request.contextPath}/archive/InputsImage.seam" id="myframe" name="myframe" frameBorder="0" scrolling="no" width="200" onLoad="" ></iframe>
                                                                </td>
                                                            </tr>
                                                        </table>
                                                    </div>
                                                    <div class="modal-footer inputFooter1">
                                                    <a4j:commandButton styleClass="btn btn-success" value="提交"  onclick="if(!checkInput())return false;" eventsQueue="mainQueue" style="cursor: pointer;" action="#{newPlantInfoHome.updateInputs}" data="#{newPlantInfoHome.re_inputs_Str}_#{newPlantInfoHome.promptMessage}" oncomplete="updateInputs_next(data,1);"/>
                                                    <input class="btn btn-default" type="button" onclick="jquery('#addInput').hide();jquery('#agriculturalModal').show();jquery('#addInputRecord').show();"  value="返回"></input>
                                                    </div>
                                                    <div class="modal-footer inputFooter2">
                                                    <a4j:commandButton styleClass="btn btn-success" value="提交"  onclick="if(!checkInput())return false;" eventsQueue="mainQueue" style="cursor: pointer;" action="#{newPlantInfoHome.updateInputs}" data="#{newPlantInfoHome.re_inputs_Str}_#{newPlantInfoHome.promptMessage}" oncomplete="updateInputs_next(data,2);"/>
                                                    <input class="btn btn-default" type="button" onclick="jquery('#addInput').hide();jquery('#agriculturalModal').show();jquery('#addInputRecord').show();"  value="返回"></input>
                                                    </div>
                                                </div>
                                                </a4j:form>
                                            </div>
    </div>
    <!-- 模态框 内容结束 -->
    <!-- 导入种植信息 开始 -->   
		<div class="modal fade" id="excelModelDiv" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			<div class="modal-dialog kuandu" style="width:446px; margin:0; left:50%; margin-left:-223px; top:50%; margin-top:-180px; position: absolute;">
				<div class="modal-content ">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
						<h4 class="modal-title" id="myModalLabel">导入种植信息</h4>
					</div>
					<div class="modal-body" style="padding-bottom: 30px;">							
						<div style="overflow: hidden;">
							<p style="margin-bottom: 0;overflow:hidden;">
								<span style="float:left; width:130px;margin:0 50px;text-align:center;">第一步</span>
								<span style="float:left; width:130px;text-align:center;">第二步</span>
							</p>
							<s:link style="float:left; width:130px; height:130px; margin:25px 50px 25px 50px;" id="exportBtn" propagation="none" view="/archive/PlantInfoList.xhtml" action="#{plantInfoExcelOper.exportExcelModel}" >
					      		<img src="#{request.contextPath}/asset/images/download_template.png" />
					      		<f:param value="1" name="exportType"></f:param>
					      		<f:param value="" name="selBaseId"></f:param>
					      	</s:link>

							<span class="baseFile_onload" style="margin-top: 25px;">
								<h:form id="excelForm" enctype="multipart/form-data">
									<s:fileUpload id="uploadFile" accept="application/vnd.ms-excel,application/ms-excel" contentType="application/vnd.ms-excel,application/ms-excel" style="font-size:42px;"
										fileName="#{plantInfoExcelOper.fileName}" data="#{plantInfoExcelOper.excelFile}" onchange="changeExcelName(this.value);">
									</s:fileUpload>
									<h:inputHidden value="#{plantInfoExcelOper.selBaseId}" id="hidSelBaseId"/>
									<h:commandButton id="excelTemplateImport" style="display:none;"  value="导入" action="#{plantInfoExcelOper.importExcel}" onclick="jquery('#login').show();"/>
								</h:form>
							</span>
							<p class="excelName" style="clear: both;">文件名称：<span id="showFileName"></span></p>
							<s:span id="msgSource" style="margin-left:50px; line-height:20px;"></s:span>
						</div>
					</div>
					<div class="modal-footer">
				        <a href="javascript:void(0);" class="btn btn-success" onclick="submitFile();">确定</a>
				        <a href="javascript:void(0);" class="btn btn-default" onclick="excelModelControl(2);">返回</a>
				    </div>
				</div>
			</div>
		</div>
		<!-- 导入种植信息 结束 --> 
		<!-- 导入种植错误信息 开始 -->   
		<div class="modal fade" id="errorDataDiv" tabindex="-1" role="dialog" aria-labelledby="errorDataLabel" aria-hidden="true">
			<div class="modal-dialog kuandu" style="width:420px; margin:0; left:50%; margin-left:-223px; top:50%; margin-top:-180px; position: absolute;">
				<div class="modal-content ">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
						<h4 class="modal-title" id="errorDataLabel">错误信息导出</h4>
					</div>
					<div class="modal-body" style="padding-bottom: 30px;">							
						<div style="overflow: hidden;">							
							<span id="errorMsg" style="margin-left:6px; line-height:20px;"></span>
						</div>
					</div>
					<div class="modal-footer">
						<s:link style="display:;" styleClass="btn btn-primary" id="exportErrorBtn" view="/archive/PlantInfoList.xhtml" action="#{plantInfoExcelOper.exportExcelModel}">
				      		导出错误数据<f:param value="2" name="exportType"></f:param>
				      	</s:link>
				    </div>
				</div>
			</div>
		</div>
		<!-- 导入种植错误信息 结束 -->
		<!-- 监控悬浮框  -->
		<div id="jkxfc" class="monitor_suspend" style="display: none;" >
		<i class="m_close"><img src="#{request.contextPath}/asset/images/plant/plantinggl_ico08.png" /></i>
		<iframe src="#{request.contextPath}/archive/videoViewShow.seam" class="videoViewShow" id="videoViewShow" name="videoViewShow" frameBorder="0" scrolling="no"  style="width: 684px-; height: 550px-;"></iframe>
		</div>

<!-- 监控悬浮框 -->
	
    <a4j:form>
 		<a4j:queue requestDelay="10" ignoreDupResponses="true" id="mainQueue"/>
 		<a4j:jsFunction status="ajaxStatus" eventsQueue="mainQueue" name="removeO" action="#{newPlantInfoHome.removeOperate()}" reRender="refreshOlist,refreshOlist1" oncomplete="jquery('#record_operate,#record_operate2').selectpicker('refresh');">
			<a4j:actionparam name="param" assignTo="#{newPlantInfoHome.param}"/>
		</a4j:jsFunction>
		<a4j:jsFunction eventsQueue="mainQueue" name="delRecordList_next" action="#{newPlantInfoHome.delRecordList()}" reRender="nsInputsCost,jhInputsCost" oncomplete="jquery('#login').hide();">
			<a4j:actionparam name="param" assignTo="#{newPlantInfoHome.param}" />
			<a4j:actionparam name="agricultralType" assignTo="#{newPlantInfoHome.agricultralType}" />			
		</a4j:jsFunction>
		<a4j:jsFunction eventsQueue="mainQueue" name="resetRecordList_next" action="#{newPlantInfoHome.resetRecordList()}" >
		</a4j:jsFunction>
		<a4j:jsFunction eventsQueue="mainQueue" name="getRealPlantInfo" action="#{newPlantInfoHome.getRealPlantInfo()}"  data="#{newPlantInfoHome.realPlantStr}" oncomplete="getRealPlantInfo_next(data)" reRender="refreshDataStandard">
			<a4j:actionparam name="realPlantId" assignTo="#{newPlantInfoHome.realPlantId}" />
		</a4j:jsFunction>
		<a4j:jsFunction eventsQueue="mainQueue" name="searchInputsList" action="#{newPlantInfoHome.searchGoodsInfoList()}" oncomplete="searchInputsList_next()" reRender="recordInputList">
			<a4j:actionparam name="param" assignTo="#{newPlantInfoHome.param}" />
			<a4j:actionparam name="dataStandard" assignTo="#{newPlantInfoHome.dataStandard}" />
			<a4j:actionparam name="searchInfo" assignTo="#{newPlantInfoHome.searchInfo}" />
			<a4j:actionparam name="inputsPageNum" assignTo="#{newPlantInfoHome.inputsPageNum}" />
		</a4j:jsFunction>
		<a4j:jsFunction eventsQueue="mainQueue" name="changeStorageRoom" action="#{newPlantInfoHome.changeStorageRoom()}" data="#{newPlantInfoHome.resultData}" oncomplete="changeRoom_next(data)" >
			<a4j:actionparam name="storageRoomId" assignTo="#{newPlantInfoHome.storageRoomId}" />
			<a4j:actionparam name="inputsInfoId" assignTo="#{newPlantInfoHome.inputsInfoId}" />
		</a4j:jsFunction>
		<a4j:jsFunction eventsQueue="mainQueue" name="searchGoodsCount" action="#{newPlantInfoHome.searchGoodsCount()}" data="#{newPlantInfoHome.resultData}" oncomplete="changeGoodsBatch_next(data)">
			<a4j:actionparam name="goodsBatchIds" assignTo="#{newPlantInfoHome.goodsBatchIds}" />
			<a4j:actionparam name="inputsInfoId" assignTo="#{newPlantInfoHome.inputsInfoId}" />
		</a4j:jsFunction>
		<a4j:jsFunction eventsQueue="mainQueue" name="changeGoodsInfo" action="#{newPlantInfoHome.searchStorageRoomList()}" data="#{newPlantInfoHome.resultData}" oncomplete="storageCallback(data);">
			<a4j:actionparam name="inputsIds" assignTo="#{newPlantInfoHome.inputsIds}" />
		</a4j:jsFunction>
	
         <a4j:jsFunction name="delfarmingPicList" reRender="picId" action="#{newPlantInfoHome.delfarmingPicList()}" oncomplete="farpicref()">
      		<a4j:actionparam name="index" assignTo="#{newPlantInfoHome.index}"/>
        </a4j:jsFunction>
        <a4j:jsFunction name="checkStorage"  action="#{newPlantInfoHome.checkStorage()}" data="#{newPlantInfoHome.messageStr}" oncomplete="submitAgr(data)" >
        	<a4j:actionparam name="agricultralType" assignTo="#{newPlantInfoHome.agricultralType}"/>
		</a4j:jsFunction>
		
		<a4j:jsFunction name="showVideomess"  action="#{newPlantInfoHome.getvideoHave}" data="#{newPlantInfoHome.videoShowType}" oncomplete="divShow(data)">
        	<a4j:actionparam name="realPlantId" assignTo="#{newPlantInfoHome.realPlantId}"/>
        	<a4j:actionparam name="videoId" assignTo="#{newPlantInfoHome.videoId}"/>
        	<a4j:actionparam name="initType" assignTo="#{newPlantInfoHome.initType}"/>
		</a4j:jsFunction>
		
		<a4j:jsFunction name="savePlantPeriodInfo"  action="#{newPlantInfoHome.savePlantPeriodInfo}" data="#{newPlantInfoHome.plantInfoStr}" oncomplete="savePlantPeriodBack(data);">
        	<a4j:actionparam name="plantGrowPeriodStr" assignTo="#{newPlantInfoHome.plantGrowPeriodStr}"/>
		</a4j:jsFunction>
 	</a4j:form>
 	
 	
 <!-- 当前生长周期    Modal -->
<div class="modal fade" id="dqszCycleModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog dqszCycle_dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">修改生育期</h4>
      </div>
      <div class="modal-body">
           	<div class="period-progress-block">
           		<div class="txt_progress" style="left:12.5%;">当前生长期</div>
           		<div class="progress_start">
           			<input class="txt_date" id="growStartTime" value="2017-3-2" readonly="readonly" />
           		    <input type="hidden" id="periodRealPlantId"/>
           		</div>
           		<ul class="period-progress-bar clear">
           			<li class="pitem bg_yumq con2" date-progress="5%" style="width:5%">
           				<p class="txt_cycle">育苗期</p>
           				<div class="period-cont">
           					<div class="input-append date form_datetime cycle_datetime" >
							    <input size="26" type="text" value="2013-02-21" readonly="readonly" />
							    <span class="add-on"><i class="icon-th"></i></span>
						    </div>
           				</div>
           			</li>
           			<li class="pitem bg_miaoq con3" date-progress="5%" style="width:5%">
           				<p class="txt_cycle">苗期</p>
           				<div class="period-cont">
           					<div class="input-append date form_datetime cycle_datetime" >
							    <input size="26" type="text" value="2013-02-21" readonly="readonly" />
							    <span class="add-on"><i class="icon-th"></i></span>
						    </div>
           				</div>
           			</li>
           		</ul>
           	</div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" onclick="submitGrowPeriod();">保存</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
      </div>
    </div>
  </div>
</div>

 	
	<script type="text/javascript">
	//<![CDATA[
	var msg="#{plantInfoExcelOper.alertString}";
	if(msg!=""){
		//jquery("#errorMsg").html(msg);
		if(msg=="errorFileType"){
			alert("上传文件格式不正确！");
		}else{
			jquery("#errorMsg").html("您导入的表格有填写错误，请将错误信息导出并修改正确后重新导入！");
			jquery("#errorDataDiv").modal('show');
		}		
	}
	
	var beforeUnit="";
    function changeGoodsBatch(obj,inputsId){
        var batch=jquery(obj).val();
        if(null==batch){
        	batch="";
        }       
        searchGoodsCount(batch.toString(),inputsId);
    }
    window.onload = function (){
    	var searchStr = jQuery("#searchInfo_").val();
		if(searchStr == "" || searchStr == null){
			jQuery("#searchInfo_").val("搜索种植作物或地块");
			jQuery("#searchInfo_").css("color","#a8a8a8");
		}else if(searchStr == "搜索种植作物或地块"){
			jQuery("#searchInfo_").css("color","#a8a8a8");
		}else{
			jQuery("#searchInfo_").css("color","#000");
		}
    }
	jQuery(function(){
		jQuery('.selectpicker').selectpicker();	 
		jQuery(".zhongzhi_datetime").datetimepicker({
			format: "yyyy-mm-dd hh:ii",  
			autoclose: true,
			weekStart: 1,
			language:  'zh-CN',
			pickerPosition: "bottom-left"
		}); 

		jQuery(".record_date2").datetimepicker({
			format: "yyyy-mm-dd",  
			autoclose: true,
			 weekStart: 1,
			 language:  'zh-CN',
			 startView: 3,
			minView: 2,
			maxView: 4,	
			pickerPosition: "bottom-left"
		});
		
		jQuery('.add-on').click(function(event) {
			jQuery('.dropdown-menu').css('z-index','1100');

		});

		/* jQuery('#dqszCycleModal .btn-primary').click(function(){
			jQuery('html').css('overflow','auto');
			jQuery('#dqszCycleModal').modal('hide');
		}); */ 
		jQuery('#dqszCycleModal').on('hidden.bs.modal', function (e) {
			jQuery('html').css('overflow','auto');
		})

		//监控悬浮框切换效果
		jQuery('.tab_header span').each(function(index, elem) {
	        jQuery('.tab_header span').eq(0).addClass('dq_cur');
			jQuery('.tab_content .m_panel').eq(0).addClass('dq_cur');
			jQuery(elem).click(function(){
				jQuery(this).addClass('dq_cur').siblings().removeClass('dq_cur');
				jQuery('.tab_content .m_panel').eq(jQuery(this).index()).addClass('dq_cur').siblings().removeClass('dq_cur');	
			});
	    });
		
		//监控悬浮--生长图片轮播图
		var oSLinum = 0;
		var oBLinum = 0;
		var oBlength = jQuery('.biger_figure li').length;
		var oSMaxlength = oBlength-5;
		var oBMaxlength = oBlength-1;
		var oSLiwidth = jQuery('.small_figure li').outerWidth()+6;
		var oBLiwidth = jQuery('.biger_figure li').outerWidth();
		jQuery('.small_figure').width( oSLiwidth*oBlength )
		jQuery('.biger_figure').width( oBLiwidth*oBlength )
		
		
		if( oBMaxlength < 0 ){
			jQuery('.btnb_prev').click(function(){
				//大图--左侧按钮点击事件
				oBLinum = 0;	
				jQuery('.biger_figure').animate({left:-oBLiwidth*oBLinum} )	
			});
			jQuery('.btnb_next').click(function(){
				//大图--右侧按钮点击事件
				oBLinum = 0;	
				jQuery('.biger_figure').animate({left:-oBLiwidth*oBLinum} )	
			});
		}else{
			jQuery('.btnb_prev').click(function(){
				//大图--左侧按钮点击事件
				oBLinum--;
				if( oBLinum < 0 ){
					oBLinum = 0;	
				}	
				if( oBLinum > oSMaxlength){
					jQuery('.small_figure').animate({left:-oSLiwidth*oSMaxlength} )	;	
				}else{
					jQuery('.small_figure').animate({left:-oSLiwidth*oBLinum} )	;	
				}
				jQuery('.biger_figure').animate({left:-oBLiwidth*oBLinum} )	;
				//jQuery('.small_figure').animate({left:-oSLiwidth*oBLinum} )	;
				jQuery('.small_figure li').eq(oBLinum).addClass('dq_cur').siblings().removeClass('dq_cur');
			});
			jQuery('.btnb_next').click(function(){
				//大图--右侧按钮点击事件
				oBLinum++;
				if( oBLinum > oBMaxlength){
					oBLinum = oBMaxlength	
				}
				if( oBLinum > oSMaxlength){
					jQuery('.small_figure').animate({left:-oSLiwidth*oSMaxlength} )	;	
				}else{
					jQuery('.small_figure').animate({left:-oSLiwidth*oBLinum} )	;	
				}
				jQuery('.biger_figure').animate({left:-oBLiwidth*oBLinum} )	;
				//jQuery('.small_figure').animate({left:-oSLiwidth*oBLinum} )	;
				jQuery('.small_figure li').eq(oBLinum).addClass('dq_cur').siblings().removeClass('dq_cur');
			});	
		}
		
		if( oSMaxlength < 0 ){
			jQuery('.figure_footer .btns_prev').click(function(){
				//缩略图--左侧按钮点击事件
				oSLinum = 0;	
				jQuery('.small_figure').animate({left:-oSLiwidth*oSLinum} )	
			});
			jQuery('.figure_footer .btns_next').click(function(){
				//缩略图--右侧按钮点击事件
				oSLinum = 0;	
				jQuery('.small_figure').animate({left:-oSLiwidth*oSLinum} )	
			});
		}else{
			jQuery('.figure_footer .btns_prev').click(function(){
				//缩略图--左侧按钮点击事件
				oSLinum--;
				if( oSLinum < 0 ){
					oSLinum = 0;	
				}	
				jQuery('.small_figure').animate({left:-oSLiwidth*oSLinum} )	
			});
			jQuery('.figure_footer .btns_next').click(function(){
				//缩略图--右侧按钮点击事件
				oSLinum++;
				if( oSLinum > oSMaxlength){
					oSLinum = oSMaxlength	
				}
				jQuery('.small_figure').animate({left:-oSLiwidth*oSLinum} )	
			});	
		}
		
		jQuery('.small_figure li').each(function(index, elem) {
			//缩略图--点击小图事件
	        jQuery(elem).click(function(){
				jQuery(this).addClass('dq_cur').siblings().removeClass('dq_cur');	
				jQuery('.biger_figure').animate({left:-oBLiwidth*jQuery(this).index()} )	;
				return oBLinum=jQuery(this).index()
			});
	    });
		
		jQuery('#jkxfc .m_close').click(function(){
			jQuery('#jkxfc').hide();	
		});	
		jQuery('span[name=videoImg]').click(function(){  //plantItems相关的，点击视频按钮
			//jQuery(this).offset().top;
			//jQuery(this).offset().left;
			jQuery('#monitor_suspend').css({
				'left' : jQuery(this).offset().left,
				'top' :  jQuery(this).offset().top
				})
			jQuery('#monitor_suspend').show();
		});
		
	});

	function ch(){
		//监控悬浮框切换效果
		jQuery('.tab_header span').each(function(index, elem) {
	        jQuery('.tab_header span').eq(0).addClass('dq_cur');
			jQuery('.tab_content .m_panel').eq(0).addClass('dq_cur');
			jQuery(elem).click(function(){
				jQuery(this).addClass('dq_cur').siblings().removeClass('dq_cur');
				jQuery('.tab_content .m_panel').eq(jQuery(this).index()).addClass('dq_cur').siblings().removeClass('dq_cur');	
			});
	    });

		//监控悬浮--生长图片轮播图
		var oSLinum = 0;
		var oBLinum = 0;
		var oBlength = jQuery('.biger_figure li').length;
		var oSMaxlength = oBlength-5;
		var oBMaxlength = oBlength-1;
		var oSLiwidth = jQuery('.small_figure li').outerWidth()+6;
		var oBLiwidth = jQuery('.biger_figure li').outerWidth();
		jQuery('.small_figure').width( oSLiwidth*oBlength )
		jQuery('.biger_figure').width( oBLiwidth*oBlength )
		if( oBMaxlength < 0 ){
			jQuery('.btnb_prev').click(function(){
				//大图--左侧按钮点击事件
				oBLinum = 0;	
				jQuery('.biger_figure').animate({left:-oBLiwidth*oBLinum} )	
			});
			jQuery('.btnb_next').click(function(){
				//大图--右侧按钮点击事件
				oBLinum = 0;	
				jQuery('.biger_figure').animate({left:-oBLiwidth*oBLinum} )	
			});
		}else{
			jQuery('.btnb_prev').click(function(){
				//大图--左侧按钮点击事件
				oBLinum--;
				if( oBLinum < 0 ){
					oBLinum = 0;	
				}	
				if( oBLinum > oSMaxlength){
					jQuery('.small_figure').animate({left:-oSLiwidth*oSMaxlength} )	;	
				}else{
					jQuery('.small_figure').animate({left:-oSLiwidth*oBLinum} )	;	
				}
				jQuery('.biger_figure').animate({left:-oBLiwidth*oBLinum} )	;
				//jQuery('.small_figure').animate({left:-oSLiwidth*oBLinum} )	;
				jQuery('.small_figure li').eq(oBLinum).addClass('dq_cur').siblings().removeClass('dq_cur');
			});
			jQuery('.btnb_next').click(function(){
				//大图--右侧按钮点击事件
				oBLinum++;
				if( oBLinum > oBMaxlength){
					oBLinum = oBMaxlength	
				}
				if( oBLinum > oSMaxlength){
					jQuery('.small_figure').animate({left:-oSLiwidth*oSMaxlength} )	;	
				}else{
					jQuery('.small_figure').animate({left:-oSLiwidth*oBLinum} )	;	
				}
				jQuery('.biger_figure').animate({left:-oBLiwidth*oBLinum} )	;
				//jQuery('.small_figure').animate({left:-oSLiwidth*oBLinum} )	;
				jQuery('.small_figure li').eq(oBLinum).addClass('dq_cur').siblings().removeClass('dq_cur');
			});	
		}
		if( oSMaxlength < 0 ){
			jQuery('.figure_footer .btns_prev').click(function(){
				//缩略图--左侧按钮点击事件
				oSLinum = 0;	
				jQuery('.small_figure').animate({left:-oSLiwidth*oSLinum} )	
			});
			jQuery('.figure_footer .btns_next').click(function(){
				//缩略图--右侧按钮点击事件
				oSLinum = 0;	
				jQuery('.small_figure').animate({left:-oSLiwidth*oSLinum} )	
			});
		}else{
			jQuery('.figure_footer .btns_prev').click(function(){
				//缩略图--左侧按钮点击事件
				oSLinum--;
				if( oSLinum < 0 ){
					oSLinum = 0;	
				}	
				jQuery('.small_figure').animate({left:-oSLiwidth*oSLinum} )	
			});
			jQuery('.figure_footer .btns_next').click(function(){
				//缩略图--右侧按钮点击事件
				oSLinum++;
				if( oSLinum > oSMaxlength){
					oSLinum = oSMaxlength	
				}
				jQuery('.small_figure').animate({left:-oSLiwidth*oSLinum} )	
			});	
		}
		jQuery('.small_figure li').each(function(index, elem) {
			//缩略图--点击小图事件
	        jQuery(elem).click(function(){
				jQuery(this).addClass('dq_cur').siblings().removeClass('dq_cur');	
				jQuery('.biger_figure').animate({left:-oBLiwidth*jQuery(this).index()} )	;
				return oBLinum=jQuery(this).index()
			});
	    });
		jQuery('#monitor_suspend .m_close').click(function(){
			jQuery('#monitor_suspend').hide();	
		});	
		
	}
	var realPlantId;
	var videoId;
	var initType;
	function showVideos(realPlantId2,videoId2){ //plantItems相关的，点击视频按钮
		if(initType != '3'&&initType!=3){
			realPlantId = realPlantId2;
			videoId = videoId2;
			initType='#{newPlantInfoHome.initType}';
			showVideomess(realPlantId,videoId,initType);
			/* jQuery('#videoViewShow').attr('src','#{request.contextPath}/archive/videoViewShow.seam?realPlantId='+realPlantId+'&videoId='+videoId+'&initType='+initType);
			jQuery('#jkxfc').show(); */
		}
	}
	function divShow(date){
		if(date=='1'||date==1){
			alert('该设备无追溯图片与视频');
		}else{
			jQuery('#videoViewShow').attr('src','#{request.contextPath}/archive/videoViewShow.seam?realPlantId='+realPlantId+'&videoId='+videoId+'&initType='+initType);
			jQuery("#plantShade_wap").hide(); 
			jQuery('#jkxfc').show();
		}
	}
	
	function dateFormatFormat(format,date){
		var o = {
				"M+" : date.getMonth()+1, //month
				"d+" : date.getDate(),    //day
				"h+" : date.getHours(),   //hour
			 	"m+" : date.getMinutes(), //minute
				"s+" : date.getSeconds(), //second
			 	"q+" : Math.floor((date.getMonth()+3)/3),  //quarter
			 	"S" : date.getMilliseconds() //millisecond
				}

				if(/(y+)/.test(format)) 
				{
					format=format.replace(RegExp.$1,(date.getFullYear()+"").substr(4 - RegExp.$1.length));
				}
				
			 	for(var k in o)
				{
					if(new RegExp("("+ k +")").test(format))
					{
			 			format = format.replace(RegExp.$1,RegExp.$1.length==1 ? o[k] : ("00"+ o[k]).substr((""+ o[k]).length));
					}
				}
				return format;
	} 
	function openRecord(){
		jquery("#record_operate").selectpicker('val',jquery("#record_operate option:eq(0)").val());
		var d = new Date();		 		
		jquery("#record_date").val(dateFormatFormat("yyyy-MM-dd hh:mm",d));
		jquery("#record_time").val("1");
		jquery("#record_temp").val("");
		jquery("#record_humi").val("");
		jquery("#record_remark").val("");
		jquery("#nsInputsCostVal").html("0元");
		jquery("#record_costing").val(null);
		jquery(".farmingInputs").remove();
		jquery("#record_operate2").selectpicker('val',jquery("#record_operate2 option:eq(0)").val());
		jquery("#record_date2").val(dateFormatFormat("yyyy-MM-dd",d));
		jquery("#record_time2").val("1");
		jquery("#record_remark2").val("");
		jquery("#record_costing2").val(null);
		jquery("#jhInputsCostVal").html("0元");
		jquery(".farmingInputs2").remove();
	}
   function addFarming(){
		jquery("#pic\\:imgUrl").val(jquery("#myframPic").contents().find("#imgUrl_id").attr("src","../asset/images/farmingIco15.jpg"));
		jquery("#pic\\:contentId").val('');
		jquery('#addMyFarming').show();
	}
   function myPicUrl(){
	   	jquery("#pic\\:imgUrl").val(jquery("#myframPic").contents().find("#imgUrl_id").attr("src"));
	   	jquery("#pic\\:picJson").val(jQuery("#myframPic").contents().find("#inputsImages\\:picJson").val());
	   	jquery('#addMyFarming').hide();
   		if(jquery('#pic\\:contentId').val().length>70){
         	alert("图片说明字数需小于70字");
			return false;
        }
   		if(jQuery("#myframPic").contents().find("#imgUrl_id").attr("src")=='../asset/images/farmingIco15.jpg'){
        	alert("上传图片不能为空！");
			return false;
	     }
		return true;
   }  
   function farpicref(data){
       if(data != ""){
			//alert(data); 
       }else{
       	jquery('.farmingInputs').mouseover(function(){
       		jquery(this).children('.closeInputs').css('display','block');	
       	});
       	jquery('.farmingInputs').mouseout(function(){
       		jquery(this).children('.closeInputs').css('display','none');	
       	});
       }
   	
   }       
          
  function delfarmingPic(obj,index){
	  delfarmingPicList(index);
  } 
  function picFiltration(){
	jquery('#myframPic').contents().find(".pic_stress").text('图片标准：185x114（像素）');
  }
var nplanting=4;
jQuery(function(){
	var searchVal='#{newPlantInfoHome.searchInfo}';
	if(searchVal=="" || null==searchVal){
		searchVal="搜索种植作物或地块";
	}
	jQuery("#searchInfo_").val(searchVal);
	jQuery(".lazyloadimg").lazyLoadXT();
	//jQuery('.plant_progress0 .plantCur_num').each(function(){
			//var a = jQuery(this).prev().width();
			//jQuery(this).attr("style","left:"+a+"px");
			//jQuery(this).css({"left":jQuery(this).prev().width()});
	//	})   //种植管理进度条
	jQuery.lazyLoadXT.aaa=function(obj){
		var target__ = obj.closest(".plantItems").find('.plant_progress0 .plantCur_num');
		var target_2 = target__.prev().width();
		target__.attr("style","left:"+target_2+"px");
	}
	
	jQuery('input.form-control').focus(function(){
		var txt_value = jQuery(this).val();
		if(txt_value==this.defaultValue){
			jQuery(this).val("");	
		};
	});
	jQuery('input.form-control').blur(function(){
		var txt_value = jQuery(this).val();
		if(txt_value==""){
			jQuery(this).val(this.defaultValue);	
		};	
	});
	var windowW = jQuery(window).width();
	
	if(windowW<1024){  //根据浏览器窗口决定plantItems的个数
		jQuery("#scrollDiv").css({"width":windowW-138}); 		
		jQuery("#itemsDiv").css({"width":1166});
		jQuery("#plantShade_wap").css({"width":1002-150}); 
		//jQuery('.plantinggl_list').css({"width":1002-138}); 
		jQuery('.plantItems').css({"width":268}); 	
		//nplanting=3; 
	}else if(windowW<1280){
		jQuery("#scrollDiv").css({"width":windowW-138}); 
		jQuery("#itemsDiv").css({"width":1166});
		jQuery("#plantShade_wap").css({"width":windowW-150}); 
		//jQuery('.plantinggl_list').css({"width":windowW-138}); 
		jQuery('.plantItems').css({"width":268}); 	
		//nplanting=4; 		
	}else if(windowW<1600){
		jQuery("#scrollDiv").css({"width":windowW-138}); 
		jQuery("#itemsDiv").css({"width":windowW-150});
		jQuery("#plantShade_wap").css({"width":windowW-150}); 
		//jQuery('.plantinggl_list').css({"width":windowW-138}); 
		jQuery('.plantItems').css({"width":Math.floor((jQuery('#itemsDiv').width()-100)/4)}); 
		//nplanting=5; 	 	 	
	}else{
		jQuery("#scrollDiv").css({"width":windowW-138}); 
		jQuery("#itemsDiv").css({"width":windowW-150});
		jQuery("#plantShade_wap").css({"width":windowW-150}); 
		//jQuery('.plantinggl_list').css({"width":windowW-138}); 
		jQuery('.plantItems').css({"width":Math.floor((jQuery('#itemsDiv').width()-120)/4)}); 	
		//nplanting=6; 	 
	}

	if(windowW<1160){  //判断环境监控内容
		jQuery('.envirRecord_td .dt img').css({"width":"38px","height":"44px"});	
		jQuery('.envirRecord_table .itmesTd').css({"padding-left":"10px","padding-right":"10px"});	
	}else{
		jQuery('.envirRecord_td .dt img').css({"width":"42px","height":"50px"});	
		jQuery('.envirRecord_table .itmesTd').css({"padding-left":"20px","padding-right":"20px"});		
	}
	
	jQuery('.plantIntro_dd .plant_cropName').mouseover(function(){  //选项卡种植信息的作物介绍划过显示查看、编辑、删除按钮
		jQuery(this).find('.hideBtns').show();	
	});
	jQuery('.plantIntro_dd .plant_cropName').mouseout(function(){
		jQuery(this).find('.hideBtns').hide();	
	});
	
	//setTimeout(function(){
	//	var j1 = new jisuan();
		//j1.start();
	//	jQuery('.plant_progress0 .plantCur_num').each(function(){
			//var a = jQuery(this).prev().width();
			//jQuery(this).attr("style","left:"+a+"px");
			//jQuery(this).css({"left":jQuery(this).prev().width()});
	//	})   //种植管理进度条
		//j1.end();
	//},1);
	
	/* jQuery('.plantinggl_list .poBlock span:nth-child(1)').click(function(){  //plantItems相关的，点击监控按钮
		jQuery(this).parents('.plantItems').find('.arrowTop').fadeIn();	
		jQuery(this).parents('.plantItems').siblings().find('.arrowTop').fadeOut();	
		jQuery('#plantShade_wap').css({
			'visibility':'visible',
			'position':'relative'});
		jQuery('#plantShade_wap').slideDown();
	}) */
	/* jQuery('.plantinggl_list .poBlock span:nth-child(2)').click(function(){  //plantItems相关的，点击视频按钮
		jQuery(this).parents('.plantItems').find('.arrowTop').fadeIn();	
		jQuery(this).parents('.plantItems').siblings().find('.arrowTop').fadeOut();	
		jQuery('#plantShade_wap').css({
			'visibility':'visible',
			'position':'relative'});
		jQuery('#plantShade_wap').slideDown();
	}) */
	var j11 = new jisuan();
	j11.start();
	jQuery('#plantShade_wap .closeBtn').click(function(){  //plantItems相关的，点击关闭按钮
		jQuery(this).parents('#plantShade_wap').slideUp(1000);
		jQuery('.plantItems .arrowTop').fadeOut();
		jQuery('#plantShade_wap').remove(1000);	
	});

	jQuery('.videoViewShow.big_iframe').css({"width":jQuery(window).width()-77});
	jQuery(window).resize(function(){
		jQuery('.videoViewShow.big_iframe').css({"width":jQuery(window).width()-77});
		jQuery('.plant_progress0 .plantCur_num').each(function(){
			jQuery(this).css({"left":jQuery(this).prev().width()});
		})   //种植管理进度条
		var windowW = jQuery(window).width();
		
		if(windowW<1024){  //根据浏览器窗口决定plantItems的个数
			jQuery("#scrollDiv").css({"width":windowW-138}); 		
			jQuery("#itemsDiv").css({"width":1166});
			jQuery('.plantItems').css({"width":268}); 	
			//jQuery("#plantShade_wap").css({"width":1002-150}); 
			//jQuery('.plantinggl_list').css({"width":1002-138}); 
			//jQuery('.plantItems').css({"width":Math.floor((jQuery('#scrollDiv').width()-60)/3)}); 	
			//nplanting=3; 	 
		}else if(windowW<1280){
			jQuery("#scrollDiv").css({"width":windowW-138}); 
			jQuery("#itemsDiv").css({"width":1166});
			jQuery('.plantItems').css({"width":268}); 	
			//jQuery("#plantShade_wap").css({"width":windowW-150}); 
			//jQuery('.plantinggl_list').css({"width":windowW-138}); 
			//jQuery('.plantItems').css({"width":Math.floor((jQuery('#scrollDiv').width()-80)/4)}); 
			//nplanting=4; 	 
		}else if(windowW<1600){
			jQuery("#scrollDiv").css({"width":windowW-138}); 
			jQuery("#itemsDiv").css({"width":windowW-150});
			//jQuery("#plantShade_wap").css({"width":windowW-150}); 
			//jQuery('.plantinggl_list').css({"width":windowW-138}); 
			jQuery('.plantItems').css({"width":Math.floor((jQuery('#itemsDiv').width()-100)/4)}); 	
			//nplanting=5; 	 
		}else{
			jQuery("#scrollDiv").css({"width":windowW-138}); 
			jQuery("#itemsDiv").css({"width":windowW-150});
			//jQuery("#plantShade_wap").css({"width":windowW-150}); 
			//jQuery('.plantinggl_list').css({"width":windowW-138}); 
			jQuery('.plantItems').css({"width":Math.floor((jQuery('#itemsDiv').width()-120)/4)}); 
			//nplanting=6; 	 
		}
		
		
		if(windowW<1160){  //判断环境监控内容
			jQuery('.envirRecord_td .dt img').css({"width":"38px","height":"44px"});	
			jQuery('.envirRecord_table .itmesTd').css({"padding-left":"10px","padding-right":"10px"});	
		}else{
			jQuery('.envirRecord_td .dt img').css({"width":"42px","height":"50px"});	
			jQuery('.envirRecord_table .itmesTd').css({"padding-left":"20px","padding-right":"20px"});		
		}
		//作物div宽度（窗口变换时，弹出框宽度和作物div宽度一致）
		var wabWidth=jQuery("#scrollDiv").width();
		jQuery("#plantShade_wap").css({"width":wabWidth});
		var leftWidth=jQuery("#scrollDiv").scrollLeft();
		jQuery('#plantShade_wap').css({'margin-left':leftWidth});
	});
	
	
	document.onkeydown=function(event){ 
       	e = event ? event :(window.event ? window.event : null); 
       	if(e.keyCode==13){ 
      	 	if(document.activeElement.id=="searchInfo_"){
			search();
		}
		e.keyCode=0;
		if (window.navigator.userAgent.indexOf("MSIE")==-1){
			 e.preventDefault();
			 return false;
        }
       	e.returnValue=false;				
       	} 
	} 
	j11.end();
});
	function  searchFocus(obj){
		if(obj.value=="搜索种植作物或地块"){
			obj.value="";
			jQuery("#searchInfo_").css("color","#000");
		}
	} 
	function searchBlur(obj){
		if(obj.value==""){
			obj.value="搜索种植作物或地块";
			jQuery("#searchInfo_").css("color","#a8a8a8");
		}
	}

var jisuan = function(){
	var date1;
	this.start = function(){
		 date1=new Date();
	}
	this.end = function(){
		var date2=new Date();
		//计算出相差天数
		var date3=date2.getTime()-date1.getTime()  //时间差的毫秒数
		var days=Math.floor(date3/(24*3600*1000))
		 
		//计算出小时数

		var leave1=date3%(24*3600*1000)    //计算天数后剩余的毫秒数
		var hours=Math.floor(leave1/(3600*1000))
		//计算相差分钟数
		var leave2=leave1%(3600*1000)        //计算小时数后剩余的毫秒数
		var minutes=Math.floor(leave2/(60*1000))
		 

		//计算相差秒数
		var leave3=leave2%(60*1000)      //计算分钟数后剩余的毫秒数
		var seconds=Math.round(leave3/1000)
		//console.log(" 相差 "+days+"天 "+hours+"小时 "+minutes+" 分钟"+seconds+" 秒")
	}
	
}

function search(){
	/**
	var val = jQuery("#searchInfo_").val();
	if(val=="搜索种植作物或地块"){
		val = "";
	}
	jQuery(".searchText").not(":contains(" + val + ")").closest(".plantItems").hide();
	jQuery(".searchText:contains(" + val + ")").closest(".plantItems").show();
	jQuery(".closeBtn").trigger("click");
	*/
	jump('#{newPlantInfoHome.pageNum}');
}
function refreshOperate(){
	operateList(plantId);
}
function operateList_before(id,dev_id,obj,currentDay,plantDay,plantStatus){
	var leftWidth=jQuery("#scrollDiv").scrollLeft();
	jQuery('#plantShade_wap').css({'margin-left':leftWidth});
	jQuery('.pinggu').attr('href','#{request.contextPath}/archive/FarmerBigBuyers.seam?realPlantId='+id);
	plantId = id;
	deviceId = dev_id;
	if(deviceId==""){
		jQuery(".nav-tabs li:eq(2)").hide();
		jQuery("#envirJk").hide();
	}else{
		jQuery(".nav-tabs li:eq(2)").show();
		jQuery("#envirJk").show();
	}
	if(plantOperate_Id == id){
		
	}else{
		operateList(id);
	}
	openOperateList(obj);
	open_before(currentDay,plantDay,plantStatus);
}
function open_before(currentDay,plantDay,plantStatus){
	if(typeof(currentDay)!="undefined"){
		if(plantStatus==2 || parseInt(currentDay)>parseInt(plantDay)){
			jQuery("#tjnsTbn").hide();
		}else{
			jQuery("#tjnsTbn").show();
		}
	}
}
function operateList_next(data){
	var datas = data.split("!+!");
	plantOperate_Id = parseInt(datas[0], 10);
	jQuery("#timeline").html("");
	var startDate=datas[1];
	if(datas[2]!="[]"){
		eval("var json = "+datas[2]);
		timeJson = {
			    "timeline":
			    {
			        "headline":"农事记录",
			        "type":"default",
			        "date": json
			    }
			}
		timeline_config = {
		         width: "100%",
		         height: "460",
		         source: timeJson,
		         embed_id: "timeline",
		         start_zoom_adjust:  '5',
		         lang:'zh-cn',    
		         debug:false,
		         embed_path:"#{request.contextPath}/asset/timeline/"
		        }
		createStoryJS(timeline_config);
		jQuery(".addFarm").css("top","-40px");
	}else{
		jQuery("#timeline").html(jQuery(".noneinfo").html());
		jQuery(".addFarm").css("top","-130px");
	}
}

function openOperateList(obj){
	jQuery("#farmingXx").show();
	tab__(0);
	if(typeof(obj)!="undefined"){
		var el = jQuery(obj).parents('.plantItems');
		var returnPlantItems=el.siblings(":visible").andSelf().index(el);
		var lastPlantItems=((parseInt(returnPlantItems/nplanting)+1))*nplanting
		if(lastPlantItems>(jQuery('.plantItems:visible').length))lastPlantItems=(jQuery('.plantItems:visible').length);
		jQuery('.plantItems:visible').eq(lastPlantItems-1).after(jQuery('#plantShade_wap'));
		jQuery(obj).parents('.plantItems').find('.arrowTop').fadeIn();	
		jQuery(obj).parents('.plantItems').siblings().find('.arrowTop').fadeOut();	
		jQuery('#plantShade_wap').css({
			'position':'relative'});
		jQuery('#plantShade_wap').slideDown(1000);	
	}
}

function plantInfo_before(id,dev_id,obj,currentDay,plantDay,plantStatus){
	jQuery('#jkxfc').hide();
	var leftWidth=jQuery("#scrollDiv").scrollLeft();
	jQuery('#plantShade_wap').css({'margin-left':leftWidth});
	jQuery('.pinggu').attr('href','#{request.contextPath}/archive/FarmerBigBuyers.seam?realPlantId='+id);
	plantId = id;
	deviceId = dev_id;
	if(deviceId==""){
		jQuery(".nav-tabs li:eq(2)").hide();
		jQuery("#envirJk").hide();
	}else{
		jQuery(".nav-tabs li:eq(2)").show();
		jQuery("#envirJk").show();
	}
	if(plantInfo_Id == id){
		
	}else{
		plantInfo(id);
	}
	//jQuery(".nav-tabs li:eq(1)").find("a").trigger("click");
	//jQuery(".nav-tabs li:eq(1)").siblings().attr("class","");
	//jQuery(".tab-content .tab-pane:eq(1)").attr("class","tab-pane active")
	//jQuery(".tab-content .tab-pane:eq(1)").siblings().attr("class","");
	openPlantInfo(obj);
	open_before(currentDay,plantDay,plantStatus);
}

function openPlantInfo(obj){
	jQuery("#plantingXx").show();
	tab__(1);
	if(typeof(obj)!="undefined"){
		var el = jQuery(obj).parents('.plantItems');
		var returnPlantItems=el.siblings(":visible").andSelf().index(el);
		var lastPlantItems=((parseInt(returnPlantItems/nplanting)+1))*nplanting
		if(lastPlantItems>(jQuery('.plantItems:visible').length))lastPlantItems=(jQuery('.plantItems:visible').length);
		jQuery('.plantItems:visible').eq(lastPlantItems-1).after(jQuery('#plantShade_wap'));
		jQuery(obj).parents('.plantItems').find('.arrowTop').fadeIn();	
		jQuery(obj).parents('.plantItems').siblings().find('.arrowTop').fadeOut();	
		jQuery('#plantShade_wap').css({
			'position':'relative'});
		jQuery('#plantShade_wap').slideDown(1000);	
	}
}

function tab__(ind){
	jQuery(".plantShade_powap .nav-tabs li:eq("+ind+")").attr("class","active");
	jQuery(".plantShade_powap .nav-tabs li:eq("+ind+")").siblings().attr("class","");
	jQuery(".tab-content .tab-pane:eq("+ind+")").attr("class","tab-pane active").show();
	jQuery(".tab-content .tab-pane:eq("+ind+")").siblings().attr("class","tab-pane").hide();
}

function tab_(ind){
	tab__(ind);
	
	if(ind==0){
		jQuery("#farmingXx").show();
		operateList_before(plantId,deviceId);
	}else if(ind==1){
		jQuery("#plantingXx").show();
		plantInfo_before(plantId,deviceId);
	}else if(ind==2){
		jQuery("#envirJk").show();
		deviceData_before(plantId,deviceId);
	}
}

var plantId = -1;
var deviceId = -1;
var plantInfo_Id = -1;
var plantOperate_Id = -1;

function plantInfo_next(data){
	var obj;
	eval("obj = "+data);
	plantInfo_Id = obj.real_plant_id;
	jQuery(".plantLink").html(bigName).attr("title",bigName);
	jQuery("#farmer").html(obj.farmer);
	jQuery("#area").html(obj.area);
	jQuery("#code").html(obj.code);
	jQuery("#preHarvestNum").html(obj.pre_harvest_num+"kg");
	jQuery("#marketPrice").html("￥"+obj.market_price+"元/kg");
	
	if(obj.plant_stauts==2){
		//jQuery("#hideBtnsxx").show();
		if(obj.standard=="有机"){
			jQuery(".shade").attr("src","#{request.contextPath}/asset/images/plantinggl_img02_1.png")
		}else if(obj.standard=="绿色"){
			jQuery(".shade").attr("src","#{request.contextPath}/asset/images/plantinggl_img05_1.png")
		}else if(obj.standard=="无公害"){
			jQuery(".shade").attr("src","#{request.contextPath}/asset/images/plantinggl_img04_1.png")
		}
	}else{
		//jQuery("#hideBtnsxx").hide();
		if(obj.standard=="有机"){
			jQuery(".shade").attr("src","#{request.contextPath}/asset/images/plantinggl_img02.png")
		}else if(obj.standard=="绿色"){
			jQuery(".shade").attr("src","#{request.contextPath}/asset/images/plantinggl_img05.png")
		}else if(obj.standard=="无公害"){
			jQuery(".shade").attr("src","#{request.contextPath}/asset/images/plantinggl_img04.png")
		}
	}
	
	for(var i = 1;i<=12;i++){
		var str = (i<10?"0"+i:i);
		var month = "month"+str;
		jQuery(".month"+str).html(obj[month]);
	}
	for(var i = 1;i<=12;i++){
		var str = (i<10?"0"+i:i);
		var month = "caimonth"+str;
		var value = obj[month];
		if(typeof(value)=="undefined"){
			jQuery(".caimonth"+str).html("--");
		}else{
			jQuery(".caimonth"+str).html("<span class='danger'>"+value+"</span>");
		}
	}
	if(obj.plant_img!=null&&obj.plant_img!=""){
		jQuery(".plantPic .img").attr("src",obj.plant_img);
	}else{
		jQuery(".plantPic .img").attr("src","#{request.contextPath}/asset/images/plantinggl_img03.jpg");
	}
	if(obj.breed_id==0){
		var bigName = obj.tunnel_name +" 休耕";
		jQuery(".plantLink").html(bigName).attr("title",bigName).attr("aa","休耕");
		jQuery(".plantingDate_td:eq(0)").show();
		jQuery(".plantingDate_td:eq(0) img");
		jQuery(".plantingDate_td:eq(0) .text").html("开始时间");
		jQuery(".plantingDate_td:eq(0) .time").html(obj.start);
		jQuery(".plantingDate_td:eq(1)").show();
		jQuery(".plantingDate_td:eq(1) img");
		jQuery(".plantingDate_td:eq(1) .text").html("结束时间");
		jQuery(".plantingDate_td:eq(1) .time").html(obj.end);
		jQuery(".plantingDate_td:eq(2)").hide();
	}else if(obj.ftype==2){
		var bigName = obj.tunnel_name +" "+obj.plant_name+"("+obj.breed_name+")";
		jQuery(".plantLink").html(bigName).attr("title",bigName).attr("aa",obj.plant_name+"("+obj.breed_name+")");
		var d1,d2,d3;
		if(typeof(obj.start)=="undefined"){
			jQuery(".plantingDate_td:eq(0)").show();
			jQuery(".plantingDate_td:eq(0) img");
			jQuery(".plantingDate_td:eq(0) .text").html("落叶休眠");
			jQuery(".plantingDate_td:eq(0) .time").html("--");
			jQuery(".plantingDate_td:eq(1)").show();
			jQuery(".plantingDate_td:eq(1) img");
			jQuery(".plantingDate_td:eq(1) .text").html("采收开始");
			jQuery(".plantingDate_td:eq(1) .time").html("--");
			jQuery(".plantingDate_td:eq(2)").show();
			jQuery(".plantingDate_td:eq(2) img");
			jQuery(".plantingDate_td:eq(2) .text").html("采收结束");
			jQuery(".plantingDate_td:eq(2) .time").html("--");
		}else if(typeof(obj.harvest)=="undefined"){
			jQuery(".plantingDate_td:eq(0)").show();
			jQuery(".plantingDate_td:eq(0) img");
			jQuery(".plantingDate_td:eq(0) .text").html("落叶休眠");
			jQuery(".plantingDate_td:eq(0) .time").html(obj.start);
			jQuery(".plantingDate_td:eq(1)").show();
			jQuery(".plantingDate_td:eq(1) img");
			jQuery(".plantingDate_td:eq(1) .text").html("采收开始");
			jQuery(".plantingDate_td:eq(1) .time").html("--");
			jQuery(".plantingDate_td:eq(2)").show();
			jQuery(".plantingDate_td:eq(2) img");
			jQuery(".plantingDate_td:eq(2) .text").html("采收结束");
			jQuery(".plantingDate_td:eq(2) .time").html("--");
		}else if(typeof(obj.end)=="undefined"){
			jQuery(".plantingDate_td:eq(0)").show();
			jQuery(".plantingDate_td:eq(0) img");
			jQuery(".plantingDate_td:eq(0) .text").html("落叶休眠");
			jQuery(".plantingDate_td:eq(0) .time").html(obj.start);
			jQuery(".plantingDate_td:eq(1)").show();
			jQuery(".plantingDate_td:eq(1) img");
			jQuery(".plantingDate_td:eq(1) .text").html("采收开始");
			jQuery(".plantingDate_td:eq(1) .time").html(obj.harvest);
			jQuery(".plantingDate_td:eq(2)").show();
			jQuery(".plantingDate_td:eq(2) img");
			jQuery(".plantingDate_td:eq(2) .text").html("采收结束");
			jQuery(".plantingDate_td:eq(2) .time").html(obj.over);
		}else{
			jQuery(".plantingDate_td:eq(0)").show();
			jQuery(".plantingDate_td:eq(0) img");
			jQuery(".plantingDate_td:eq(0) .text").html("落叶休眠");
			jQuery(".plantingDate_td:eq(0) .time").html(obj.start);
			jQuery(".plantingDate_td:eq(1)").show();
			jQuery(".plantingDate_td:eq(1) img");
			jQuery(".plantingDate_td:eq(1) .text").html("采收开始");
			jQuery(".plantingDate_td:eq(1) .time").html(obj.harvest);
			jQuery(".plantingDate_td:eq(2)").show();
			jQuery(".plantingDate_td:eq(2) img");
			jQuery(".plantingDate_td:eq(2) .text").html("采收结束");
			jQuery(".plantingDate_td:eq(2) .time").html(obj.end);
		}
	}else{
		var bigName = obj.tunnel_name +" "+obj.plant_name+"("+obj.breed_name+")";
		jQuery(".plantLink").html(bigName).attr("title",bigName).attr("aa",obj.plant_name+"("+obj.breed_name+")");;
		jQuery(".plantingDate_td:eq(0)").show();
		jQuery(".plantingDate_td:eq(0) img");
		jQuery(".plantingDate_td:eq(0) .text").html("定植时间");
		jQuery(".plantingDate_td:eq(0) .time").html(obj.start);
		jQuery(".plantingDate_td:eq(1)").show();
		jQuery(".plantingDate_td:eq(1) img");
		jQuery(".plantingDate_td:eq(1) .text").html("采收时间");
		jQuery(".plantingDate_td:eq(1) .time").html(obj.harvest);
		jQuery(".plantingDate_td:eq(2)").show();
		jQuery(".plantingDate_td:eq(2) img");
		jQuery(".plantingDate_td:eq(2) .text").html("种植结束");
		jQuery(".plantingDate_td:eq(2) .time").html(obj.end);
	}
	
	jQuery("#periodRealPlantId").val(obj.real_plant_id);
	period_info=obj.period_info;
	if(null!=period_info.period_name && ""!=period_info.period_name){
		jQuery(".plantingDate_td:eq(3) .time").html(period_info.period_name);
	}else{
		jQuery(".plantingDate_td:eq(3) .time").html("--");
	}
	//根据有没有生育期设置相应的鼠标指针样式
	if(period_info.period_list.length>0){
		jQuery('.dqcycleItem').css("cursor","pointer");
	}else{
		jQuery('.dqcycleItem').css("cursor","auto");
	}
}

var timeArray=new Array();//记录生育期改变前的时间
var period_info;//记录生育期信息
//显示生育期弹框信息
function openPeriodModal(){
	//没有生育期的不显示
	if(period_info.period_list.length>0){
		realPlantPeriod(period_info);
		jQuery('html').css('overflow','hidden');
		jQuery('#dqszCycleModal').modal('show');
	}
}
//生育期
function realPlantPeriod(data){
	var period_list=data.period_list;
	if(null!=data.period_name && ""!=data.period_name){
		jQuery(".plantingDate_td:eq(3) .time").html(data.period_name);
	}else{
		jQuery(".plantingDate_td:eq(3) .time").html("--");
	}
	jQuery("#growStartTime").val(data.plant_begin_time);
	jQuery(".txt_progress").css("left",data.current_period_percent+"%");
	jQuery(".period-progress-bar").html("");
	jQuery(period_list).each(function(index,obj){
		timeArray[index]=obj.period_time;
	    var bg_num=index-parseInt(index/10)*10;//取余，大于10，颜色循环
	    var con_num=index-parseInt((index)/3)*3;//取余，大于3，时间距离顶部位置循环
	    var txt_num=index-parseInt((index)/2)*2;//取余，大于2，文本距离循环
		var info="<li class='pitem bg_"+bg_num+" con"+con_num+" ' date-progress='"+obj.percent+"%' style='width:"+obj.percent+"%'>"+
					"<p class='txt_cycle"+txt_num+"'>"+obj.period_name+"<input class='period_val' type='hidden' value='"+obj.period_id+"'/></p>"+
					"<div class='period-cont'>"+
						"<div class='input-append date form_datetime cycle_datetime' >"+
						    "<input size='26' type='text' value='"+obj.period_time+"' onchange='changePeriodTime("+index+",this)' readonly='readonly'/>"+
						    "<span class='add-on'><i class='icon-th'></i></span>"+
				    	"</div>"+
					"</div>"+
				"</li>"
		jQuery(".period-progress-bar").append(info);
	});
	/* 修改剩余周期Modal里的时间 */
	jQuery(".cycle_datetime").datetimepicker({
		format: "yyyy-mm-dd", 
	    autoclose: true,
	    weekStart: 1,
	    language:  'zh-CN',
	    startView: 3,
	    minView: 2,
	    maxView: 4,     
	    pickerPosition: "bottom-left"
	}); 
}
//修改生育期-提交
function submitGrowPeriod(){
	var beforeDate=toDate(jQuery("#growStartTime").val());
	var periodData="";
	var periodInfo="";
	var realPlantId=jQuery("#periodRealPlantId").val();
	var timeSize=jQuery(".cycle_datetime input").length;

	periodInfo+="{periodId:0,periodTime:"+jQuery("#growStartTime").val()+"},";
	for(var i=0;i<timeSize;i++){
		var periodId=jQuery(".period_val:eq("+i+")").val();
		var periodTime=jQuery(".cycle_datetime input:eq("+i+")").val();
		if(toDate(periodTime)<beforeDate){
			alert("周期时间不能小于前一个周期");
			return;
		}
		beforeDate=toDate(periodTime);
		periodInfo+="{periodId:"+periodId+",periodTime:"+periodTime+"},"
	}
	if(periodInfo.length>0){
		periodInfo=periodInfo.substring(0,periodInfo.length-1);
	}
	periodData+="{realplantId:"+realPlantId+",periodInfo:["+periodInfo+"]}";
	savePlantPeriodInfo(periodData);
}
//保存生育期回调
function savePlantPeriodBack(data){
	var obj=eval("("+data+")");
	period_info=obj.period_info;//将新生育期数据保存起来
	jQuery('#dqszCycleModal').modal('hide');
}
//修改生育期时间、后面时间跟着联动改变
function changePeriodTime(index,obj){
	var newDate=obj.value;
	var oldDate=timeArray[index];
	timeArray[index]=newDate;
	var differDays=differDate(oldDate,newDate);
	var timeSize=jQuery(".cycle_datetime input").length;
	for(var i=index+1;i<timeSize;i++){
		var obj=jQuery(".cycle_datetime input:eq("+i+")");
		var afterDate=addDate(jQuery(obj).val(), differDays);
		jQuery(obj).val(afterDate);
		timeArray[i]=afterDate;
	}
	
}
//日期相差天数
function differDate(startDate,endDate){
    var startDate_arr = startDate.split("-");
    var endDate_arr = endDate.split("-");
    var sDate=new Date(startDate_arr[0], startDate_arr[1] - 1, startDate_arr[2]);
    var eDate=new Date(endDate_arr[0], endDate_arr[1] - 1, endDate_arr[2]);
    var diffDays=(eDate.getTime()-sDate.getTime())/(1000 * 60 * 60 * 24);
    return diffDays;
}
//日期转换
function toDate(date_str){
    var date_str_arr = date_str.split("-");
    return new Date(date_str_arr[0], date_str_arr[1] - 1, date_str_arr[2]);
}
function addDate(date, days) {
    if (days == undefined || days == '') {
        days = 1;
    }
    var date = new Date(date);
    date.setDate(date.getDate() + days);
    var month = date.getMonth() + 1;
    var day = date.getDate();
    return date.getFullYear() + '-' + getFormatDate(month) + '-' + getFormatDate(day);
}
//日期月份/天的显示，如果是1位数，则在前面加上'0'
function getFormatDate(arg) {
    if (arg == undefined || arg == '') {
        return '';
    }
    var re = arg + '';
    if (re.length < 2) {
        re = '0' + re;
    }
    return re;
}
var plantData_Id = -1;
var plantData_Str = "";
function deviceData_before(id,dev_id,obj,currentDay,plantDay,plantStatus){
	var leftWidth=jQuery("#scrollDiv").scrollLeft();
	jQuery('#plantShade_wap').css({'margin-left':leftWidth});
	plantId = id;
	deviceId = dev_id;
	if(plantData_Id == id){
		highChart(plantData_Str.type);
	}else{
		air_temp_data = "";           
		air_humidity_data = "";       
		soil_temp_data = "";          
		soil_humidity_data = "";      
		co2_data = "";                
		illumination_data = "";       
		soil_ph_data = "";            
		soil_ec_data = "";
		deviceData(id);
	}
	openDeviceData(obj);
	open_before(currentDay,plantDay,plantStatus);
}

function openDeviceData(obj){
	jQuery("#envirJk").show();
	tab__(2);
	if(typeof(obj)!="undefined"){
		var el = jQuery(obj).parents('.plantItems');
		var returnPlantItems=el.siblings(":visible").andSelf().index(el);
		var lastPlantItems=((parseInt(returnPlantItems/nplanting)+1))*nplanting
		if(lastPlantItems>(jQuery('.plantItems:visible').length))lastPlantItems=(jQuery('.plantItems:visible').length);
		jQuery('.plantItems:visible').eq(lastPlantItems-1).after(jQuery('#plantShade_wap'));
		jQuery(obj).parents('.plantItems').find('.arrowTop').fadeIn();	
		jQuery(obj).parents('.plantItems').siblings().find('.arrowTop').fadeOut();	
		jQuery('#plantShade_wap').css({
			'position':'relative'});
		jQuery('#plantShade_wap').slideDown(1000);	
	}
}

var air_temp_data = "";
var air_humidity_data = "";
var soil_temp_data = "";
var soil_humidity_data = "";
var co2_data = "";
var illumination_data = "";
var soil_ph_data = "";
var soil_ec_data = "";
function deviceData_next(data){
	var datas = data.split("!+!");
	eval("plantData_Str = "+datas[0]);
	eval("air_temp_data = "+datas[1]);        
	eval("air_humidity_data = "+datas[2]);       
	eval("soil_temp_data = "+datas[3]);          
	eval("soil_humidity_data = "+datas[4]);      
	eval("co2_data = "+datas[5]);                
	eval("illumination_data = "+datas[6]);       
	eval("soil_ph_data = "+datas[7]);            
	eval("soil_ec_data = "+datas[8]);
	jQuery(".envirRecord_table .time").html("--");
	var strs = plantData_Str.type.split(",");
	var first_type = null;
	if(strs.indexOf("0")>-1){	
		first_type = 0;
		jQuery(".envirRecord_table .itmesTd:eq(0)").show(); 
		jQuery(".envirRecord_table .itmesTd:eq(0)").find(".time").html((plantData_Str.air_temp1>-100?plantData_Str.air_temp1+"°":"--"));
		jQuery(".envirRecord_table .itmesTd:eq(0)").bind("click",function(){initHighChart(0,'',air_temp_data);});
	}else{
		jQuery(".envirRecord_table .itmesTd:eq(0)").unbind("click",function(){});
		jQuery(".envirRecord_table .itmesTd:eq(0)").hide();
	}
		
	
	if(strs.indexOf("1")>-1){	
		if(first_type==null)
			first_type = 1;
		jQuery(".envirRecord_table .itmesTd:eq(1)").show(); 
		jQuery(".envirRecord_table .itmesTd:eq(1)").bind("click",function(){initHighChart(1,'',air_humidity_data);});
		jQuery(".envirRecord_table .itmesTd:eq(1)").find(".time").html((plantData_Str.air_humidity1>-100?plantData_Str.air_humidity1+"%":"--"));
	}else{
			jQuery(".envirRecord_table .itmesTd:eq(1)").unbind("click",function(){});
			jQuery(".envirRecord_table .itmesTd:eq(1)").hide();
	}
		
	if(strs.indexOf("2")>-1){	
		if(first_type==null)
			first_type = 2;
		jQuery(".envirRecord_table .itmesTd:eq(2)").show(); 
		jQuery(".envirRecord_table .itmesTd:eq(2)").bind("click",function(){initHighChart(2,'',soil_temp_data);});
		jQuery(".envirRecord_table .itmesTd:eq(2)").find(".time").html((plantData_Str.soil_temp1>-100?plantData_Str.soil_temp1+"°":"--"));
	}else{
			jQuery(".envirRecord_table .itmesTd:eq(2)").unbind("click",function(){});
			jQuery(".envirRecord_table .itmesTd:eq(2)").hide();
	}
		
	if(strs.indexOf("3")>-1){
		if(first_type==null)
			first_type = 3;
		jQuery(".envirRecord_table .itmesTd:eq(3)").show(); 
		jQuery(".envirRecord_table .itmesTd:eq(3)").bind("click",function(){initHighChart(3,'',soil_humidity_data);});
		jQuery(".envirRecord_table .itmesTd:eq(3)").find(".time").html((plantData_Str.soil_humidity1>-100?plantData_Str.soil_humidity1+"%":"--"));
	}else{
			jQuery(".envirRecord_table .itmesTd:eq(3)").unbind("click",function(){});
			jQuery(".envirRecord_table .itmesTd:eq(3)").hide();
	}
		
	if(strs.indexOf("4")>-1){	
		if(first_type==null)
			first_type = 4;
		jQuery(".envirRecord_table .itmesTd:eq(4)").show(); 
		jQuery(".envirRecord_table .itmesTd:eq(4)").bind("click",function(){initHighChart(4,'',co2_data);});    
		jQuery(".envirRecord_table .itmesTd:eq(4)").find(".time").html((plantData_Str.co21>-100?plantData_Str.co21+"ppm":"--"));
	}else{
			jQuery(".envirRecord_table .itmesTd:eq(4)").unbind("click",function(){});
			jQuery(".envirRecord_table .itmesTd:eq(4)").hide();
	}
		
	if(strs.indexOf("5")>-1){	
		if(first_type==null)
			first_type = 5;
		jQuery(".envirRecord_table .itmesTd:eq(5)").show(); 
		jQuery(".envirRecord_table .itmesTd:eq(5)").bind("click",function(){initHighChart(5,'',illumination_data);});  
		jQuery(".envirRecord_table .itmesTd:eq(5)").find(".time").html((plantData_Str.illumination1>-100?plantData_Str.illumination1+"LUX":"--"));
	}else{
			jQuery(".envirRecord_table .itmesTd:eq(5)").unbind("click",function(){});
			jQuery(".envirRecord_table .itmesTd:eq(5)").hide();
	}
		
	if(strs.indexOf("6")>-1){
		if(first_type==null)
			first_type = 6;
		jQuery(".envirRecord_table .itmesTd:eq(6)").show(); 
		jQuery(".envirRecord_table .itmesTd:eq(6)").bind("click",function(){initHighChart(6,'',soil_ph_data);});      
		jQuery(".envirRecord_table .itmesTd:eq(6)").find(".time").html((plantData_Str.soil_ph1!=null&&plantData_Str.soil_ph1>-100?plantData_Str.soil_ph1+"ppm":"--"));
	}else{
			jQuery(".envirRecord_table .itmesTd:eq(6)").unbind("click",function(){});
			jQuery(".envirRecord_table .itmesTd:eq(6)").hide();
	}
		
	if(strs.indexOf("7")>-1){	
		if(first_type==null)
			first_type = 7;
		jQuery(".envirRecord_table .itmesTd:eq(7)").show(); 
		jQuery(".envirRecord_table .itmesTd:eq(7)").bind("click",function(){initHighChart(7,'',soil_ec_data);}); 
		jQuery(".envirRecord_table .itmesTd:eq(7)").find(".time").html((plantData_Str.soil_ec1!=null&&plantData_Str.soil_ec1>-100?plantData_Str.soil_ec1+"LUX":"--"));	
	}else{
			jQuery(".envirRecord_table .itmesTd:eq(7)").unbind("click",function(){});
			jQuery(".envirRecord_table .itmesTd:eq(7)").hide();
	}
	highChart_Before(first_type);
}

function highChart_Before(type){
	if(type==0){
		initHighChart(0,"空气温度",air_temp_data);
	}else if(type==1){
		initHighChart(1,"空气湿度",air_humidity_data);
	}else if(type==2){
		initHighChart(2,"土壤温度",soil_temp_data);
	}else if(type==3){
		initHighChart(3,"土壤水份",soil_humidity_data);
	}else if(type==4){
		initHighChart(4,"二氧化碳浓度",co2_data);
	}else if(type==5){
		initHighChart(5,"光照强度",illumination_data);
	}else if(type==6){
		initHighChart(6,"EC",soil_ph_data);
	}else if(type==7){
		initHighChart(7,"PH",soil_ec_data);
	}else{
		showNoData();
	}
}

function showNoData(){
	jQuery("#container_chart").html("<div style='text-align:center;font-size:16px;color:#9F9F9F;position:absolute;left:50%;top:50%;margin:-50px 0 0 -235px;'><img src='#{request.contextPath}/asset/images/plant_no_data.png' style='padding-bottom:20px;'/><br/>暂未获得环境监控数据！请检查设备是否正常运转,或者联系我们！</div>");
}

//]]>
</script>
<a4j:form style="display:none">
<a4j:status id="ajaxStatus" forceId="true" onstart="begin()" onstop="end()" />
 		<a4j:queue requestDelay="10" ignoreDupResponses="true" id="mainQueue"/>
        <a4j:jsFunction name="plantInfo" status="ajaxStatus" eventsQueue="mainQueue"  action="#{newPlantInfoHome.plantInfo()}" data="#{newPlantInfoHome.plantInfoStr}" oncomplete="plantInfo_next(data)" >
        <a4j:actionparam name="param1"   assignTo="#{newPlantInfoHome.realPlantId}"/>
        </a4j:jsFunction>
        
        <a4j:jsFunction name="deviceData" status="ajaxStatus" eventsQueue="mainQueue"  action="#{newPlantInfoHome.deviceData()}" data="#{newPlantInfoHome.plantInfoStr}" oncomplete="deviceData_next(data)" >
        <a4j:actionparam name="param1"   assignTo="#{newPlantInfoHome.realPlantId}"/>
        </a4j:jsFunction>
        
        <a4j:jsFunction name="operateList" status="ajaxStatus" eventsQueue="mainQueue"  action="#{newPlantInfoHome.operateList()}" data="#{newPlantInfoHome.plantInfoStr}" oncomplete="operateList_next(data)" >
        <a4j:actionparam name="param1"   assignTo="#{newPlantInfoHome.realPlantId}"/>
        </a4j:jsFunction>
        
        <a4j:jsFunction name="removePlant" status="ajaxStatus" eventsQueue="mainQueue"  action="#{realPlantHome.remove}"  >
        <a4j:actionparam name="param1"   assignTo="#{realPlantHome.realPlantRealPlantId}"/>
        <a4j:actionparam name="param2" assignTo="#{realPlantHome.baseId}"></a4j:actionparam>
        <a4j:actionparam name="param3" assignTo="#{realPlantHome.removeType}"></a4j:actionparam>
        </a4j:jsFunction>
</a4j:form>

	<script type="text/javascript">
	//<![CDATA[
	function begin(){
		jQuery('#loading').show();
		jQuery('.mongolia').css('display','block');
	}
	function end(){
		jQuery('#loading').hide();
		jQuery('.mongolia').css('display','none');
	}
    var dw = ["℃","%","℃","%","ppm","LUX","",""];
    var tempdw;
	function　initHighChart(type,name,data){
		jQuery(".itmesTd:eq("+type+")").find(".curIco").show();
		jQuery(".itmesTd:eq("+type+")").siblings().find(".curIco").hide();
		if(data.length==0){
			showNoData();
			return;
		}
		Highcharts.setOptions({ global: { useUTC: false } });
		tempdw = dw[type];
		jQuery('#container_chart').highcharts('StockChart', {
			 chart: {
		            backgroundColor: '#727272',
		        },
			navigator: {
		            xAxis: {
					tickWidth: 0,
					lineWidth: 0,
					gridLineWidth: 1,
					tickPixelInterval: 200,
					labels: {
					    align: 'left',
					    style: {
					        color: 'white'
					    },
			   		    formatter: function() {  
			               return  Highcharts.dateFormat('%Y-%m-%d', this.value);  
			            }
					},
					 outlineColor: 'blue',
			            outlineWidth: 2,
			     maskInside: false,
			     maskFill: 'rgba(180, 198, 220, 0.75)',
					series: {
						
						type: 'areaspline',
						color: 'red',
						fillOpacity: 0.05,
						dataGrouping: {
							smoothed: true
						},
						lineWidth: 1,
						marker: {
							enabled: false
						}
		            }
				}
		    },
		    rangeSelector : {
		        selected : 1
		    },
		    
		    xAxis: {  
		    //  title :{  
		    //      text:"title"  
		    //  },  
		        type: 'datetime', //定义x轴上日期的显示格式  
		        labels: {  
		        formatter: function() {  
		            var vDate=new Date(this.value);  
		            //alert(this.value);  
		            return Highcharts.dateFormat('%m-%d', this.value);  
		        },  
		        align: 'center' ,
		        style:{
		        	color:"white"
		        }
		    }  
		    },  
		    yAxis: {
		        allowDecimals:false,
		        opposite: false,
		        labels: {  
		        	 style:{
				        	color:"white"
				        }
		        },
		        style:{
		        	color:"white"
		        }
		     },
		    series :[{
                data : data,
                color: '#25CDFD',
                marker : {
                    enabled : true,
                    radius : 3
                }
            }],

		    exporting: {
		        enabled: false
		    },
		    rangeSelector:{
		        enabled:false   
		       },
		       tooltip:{
		    	   backgroundColor:"white",
		    	   formatter: function () {
                var s = '<b>' + Highcharts.dateFormat('%m-%d %H:%M', this.x) +"<br/> "+ Highcharts.numberFormat(this.y,2)+tempdw+ '</b>';
                return s;
            }
		       }
		});
	}
	
	var timeJson = {
		    "timeline":
		    {
		        "headline":"农事记录",
		        "type":"default",
				//"text":"People say stuff",
				//"startDate":"2012,12,13",
		        "date": [
		            {
		                "startDate":"2012,12,12",
						"endDate":"2012,12,12",
		                "headline":"锄草",
		                "text":"",
		                "asset":
		                {
		                    "media":"<iframe src='http://192.168.1.20:8080#{request.contextPath}/login.seam'/>",
		                    "credit":"",
		                    "caption":""
		                }
		            },
		            {
		                "startDate":"2012,1,26",
						"endDate":"2012,1,27",
		                "headline":"<img src='http://www.baidu.com/img/baidu_jgylogo3.gif?v=34456200.gif'/>打药",
		                "text":"<p>In true political fashion, his character rattles off common jargon heard from people running for office.</p>",
		                "asset":
		                {
		                    "media":"<iframe src='http://192.168.1.20:8080#{request.contextPath}/login.seam'/>",
		                    "credit":"",
		                    "caption":""
		                }
		            }
		        ]
		    }
		}
	var jqueryjs = "#{request.contextPath}/asset/js/jquery-1.10.2.min.js";
	var timeline_config = {
	         width: "100%",
	         height: "270px",
	         source: timeJson,
	         embed_id: "timeline",
	         lang:'zh-cn',    
	         debug:true,
	         embed_path:"#{request.contextPath}/asset/timeline/"
	        }
	window.onerror = function(errorMessage, scriptURI, lineNumber,columnNumber,errorObj) {
	       console.log("错误信息：" , errorMessage);
	       console.log("出错文件：" , scriptURI);
	       console.log("出错行号：" , lineNumber);
	       console.log("出错列号：" , columnNumber);
	       console.log("错误详情：" , errorObj);
	    }
	
	function editbut(type){
		var pageNum='#{newPlantInfoHome.pageNum}';
		var initType='#{newPlantInfoHome.initType}';
		if(type==-1){
			var html = jQuery(".plantLink").attr("aa");
			if(confirm("是否确认再次种植"+html)){
				window.location.href="#{request.contextPath}/archive/PlantInfoEdit.seam?plantInfoPlantInfoId="+plantId+"&saveagain=1";
			}
		}else if(type==0){//查看
			window.location.href="#{request.contextPath}/archive/PlantInfo.seam?plantInfoPlantInfoId="+plantId+"&pageNum="+pageNum+"&initType="+initType;
		}else if(type==1){//编辑
			window.location.href="#{request.contextPath}/archive/PlantInfoEdit.seam?plantInfoPlantInfoId="+plantId+"&pageNum="+pageNum+"&initType="+initType;
		}else if(type==2){//删除
			removeP(plantId,'');
		}
	}
	
	 function removeP(plantId,baseId){
		   var type = 1;
		   if(confirm('确定删除吗？')){
			   removePlant(plantId,baseId,type);
			   if(confirm('请确认是否删除相应的的农事管理中农事计划与记录')){
				   type=2;
				   removePlant(plantId,baseId,type);
			   }else{
				   
			   }
			   jQuery("#plantItems"+plantId).remove();
			   //jQuery(".closeBtn").trigger("click");
			   jQuery(".searchBtn").trigger("click");
		   }
	   }        
	 function jump(index){
		var searchVal = jQuery("#searchInfo_").val();
		if(searchVal=="搜索种植作物或地块"){
			searchVal = "";
		}
		jQuery("#pageNum").val(index);
		jQuery("#hidSearchInfo").val(searchVal);
		jQuery("#hidInitType").val('#{newPlantInfoHome.initType}');
		jQuery(".searchBtn").trigger("click");
	} 
	 

	 jquery(function(){
	 	var d = new Date();
	 	jquery('.selectpicker').selectpicker();	
	 	//添加投入品 农资类型 加载数据
	 	var trType=jquery('#record_type1').val();
	 	jquery('#unitInfo').selectpicker('val',10);	
	 });

	 /* 添加投入品弹窗显示关闭 */

	 /* 文本框获取焦点变化 js */
	 jquery(function(){
	 	jquery('.public-search .form-control').focus(function(){
	 		var txt_value = jquery(this).val();
	 		if(txt_value == '请输入搜索条件'){
	 			jquery(this).val('');	
	 		}	
	 	});
	 	jquery('.public-search .form-control').blur(function(){
	 		var txt_value = jquery(this).val();
	 		if(txt_value == ''){
	 			jquery(this).val('请输入搜索条件');	
	 		}	
	 	});
	 });
	 	
	 /* 投入品点击删除 */
	 jquery(function(){
	 	jquery('.farmingInputs').mouseover(function(){
	 		jquery(this).children('.closeInputs').css('display','block');	
	 	});
	 	jquery('.farmingInputs').mouseout(function(){
	 		jquery(this).children('.closeInputs').css('display','none');	
	 	});
	 	jquery('.farmingInputs .closeInputs').click(function(){
	 		jquery(this).parent().css('display','none');
	 	});	
	 	jquery('.farmingInputs .closeInputs').click(function(){
	 		jquery(this).parent('.farmingInputs').css('display','none');
	 		jquery(this).parent('.farmingInputs').next('.farmingMage_Magnifier2').css('display','none');	
	 	});	
	 	jquery('.farmingInputs a img').click(function(){
	 		jquery('.farmingMage_Magnifier2').css('display','none');
	 		jquery(this).parents('.farmingInputs').next('.farmingMage_Magnifier2').css('display','block');	
	 		jquery('.farmingInputs_mini').css('display','none');
	 	});
	 	jquery('.MagnifierClose').click(function(){
	 		jquery(this).parent('.farmingMage_Magnifier2').css('display','none');	
	 	});	
	 });

	 /* 添加投入品弹窗显示关闭 */
	 jquery(function(){

	 });

	 /* 添加投入品弹窗显示关闭 */
	 jquery(function(){
	 	jQuery('.addPerson_selt .bootstrap-select').click(function(){	
	 		jQuery('.farmingbgIco18').next('.farmingInputs_mini').css('display','none');
	 		jQuery('.farmingInputs_addtj button').next('.farmingInputs_mini').css('display','none');		
	 	});
	 });

	 function addOp(obj){
	 	jquery("#o_name").val("");
	 	jquery("#o_remark").val("");
	 	//jquery('.farmingbgIco18').next('.farmingInputs_mini').css('display','none');
	 	jquery("#add_operate").modal("show");
	 }

	 /* 时间控件 */
	 jquery(".dt1").datetimepicker({
	 		format: "yyyy-mm-dd",  /* 控制显示格式，默认为空，显示小时分钟 */
	 		autoclose: true,
	 		 weekStart: 1,
	 		  //startDate: "2014-08-14 10:00",
	 		 language:  'zh-CN',
	 		 startView: 3,
	 		minView: 2,
	 		maxView: 4,		
	 		pickerPosition: "bottom-left"
	     });
	     	
	 function addInputs (index){
	 	jquery("#input_description").val("");
	 	jquery("#addInput .form-control").val("");
	 	jquery("#url").val("");
	 	if(index==2){
	 		jquery(".inpu").hide();
	 		jquery("#input_type").val(2);
	 		jquery(".mlal").html("添加农药");
	 		jquery(".input_pest").show();
	 	}else if(index==3){
	 		jquery(".inpu").hide();
	 		jquery(".input_fert").show();
	 		jquery(".mlal").html("添加肥料");
	 		jquery("#input_type").val(3);
	 	}else if(index==4){
	 		jquery(".inpu").hide();
	 		jquery(".mlal").html("添加其他");
	 		jquery("#input_type").val(4);
	 	}
	 	if(jquery('#home').is(":visible")){
	 		jquery("#addInp1").show();
	 		jquery("#addInp2").hide();
	 	}else{
	 		jquery("#addInp1").hide();
	 		jquery("#addInp2").show();
	 	}
	 	if(jquery('#home').is(":visible")){
	 		jquery(".inputFooter1").show();
	 		jquery(".inputFooter2").hide();
	 	}else{
	 		jquery(".inputFooter1").hide();
	 		jquery(".inputFooter2").show();
	 	}
	 	hidee();
	 	jquery(".dk_tdiv").hide();
	 	jquery(".inputs_").show();
	 	jquery("#addInput").show();
	 	jquery("#addInput").scrollTop(0);
	 }

	 function hidee(){
	  	var v = jquery("#myframe").contents();
	 	v.find(".photo_box2 li:eq(1)").show();
	 	v.find(".photo_box2 li:eq(0)").hide();
	 	v.find("#input_type").val(jquery("#input_type").val());
	 }
	 var reg = new RegExp("^[0-9]*$");
	 function checkInput(){
	     if(trim(jquery("#input_name").val())==""){
	         alert("请投入品名称!");
	         return false;
	     }
	 	if(jquery("#input_shelfLife").val()!=""){
	 		if(!reg.test(jquery("#input_shelfLife").val())){
	 			alert("请正确填写保质期!");
	 			return false;
	 		}
	 	}
	 	if(jquery("#pest_interval").val()!=""){
	 		if(!reg.test(jquery("#pest_interval").val())){
	 			alert("请正确填写安全间隔期!");
	 			return false;
	 		}
	 	}
	 	var v = jquery("#myframe").contents().find("#url").val();
	 	jquery("#url").val(v);
	 	return true;
	 }
	 function updateInputs_next(data,num){
	 	var data1 = data.split("_")[0];
	 	var data2 = data.split("_")[1];
	 	if(data2 == ""){
	 		if(data1&&data1.length>0){
	 			jquery("#record_input").append(data1);
	 			jquery("#record_input").selectpicker('refresh');
	 			if(num==1){
	 	   			jquery('#addInput').hide();jquery('#agriculturalModal').show();jquery('#addInputRecord').show();
	 			}else{
	 				jquery('#addInput').hide();jquery('#agriculturalModal').show();jquery('#addInputRecord').show();
	 			}
	 		}
	 	}else{
	 		alert(data2);
	 	}
	 	
	 }
	 function sel(obj){
	 	if(obj.selectedIndex==0){
	 		jquery('#baseId').val("-1");
	 		jquery('.but_').trigger('click')
	 	}else{
	 		jquery('#baseId').val(obj.value);
	 		jquery('.but_').trigger('click')
	 	}
	 }

	 function changeRoom_next(data){
		var inputsId=data.inputsInfoId;   
		var goodsBatchSel="<select class='selectpicker' multiple='multiple' onchange='changeGoodsBatch(this,"+inputsId+")'>";
		var farmerInfoSel="<select class='selectpicker' >";

		if(typeof(data.goodsBatch) != "undefined"){
			goodsBatchSel+=data.goodsBatch;
		}
		if(typeof(data.farmerInfo) != "undefined"){
			farmerInfoSel+=data.farmerInfo;
		}  	
		if(typeof(data.goodsCount) != "undefined"){
			jquery('#goodsCount_'+inputsId).html(data.goodsCount);
			jquery('#goodsCount_'+inputsId).attr("title",data.goodsCount);
		}  
		if(typeof(data.unitinfoId) != "undefined"){
			jquery('#unit_'+inputsId).val(data.unitinfoId);
		}  		
		goodsBatchSel+="</select>";
		farmerInfoSel+="</select>";	
		jquery('#batch_'+inputsId).html(goodsBatchSel);
		jquery('#farmer_'+inputsId).html(farmerInfoSel);
		jquery('.selectpicker').selectpicker();	
	}
	function changeGoodsBatch_next(data){
		var inputsId=data.inputsInfoId; 
		var msg=data.promptMessage;   
		if(typeof(data.goodsCount) != "undefined"){
			jquery('#goodsCount_'+inputsId).html(data.goodsCount);
			jquery('#goodsCount_'+inputsId).attr("title",data.goodsCount);
		}   
		if(msg!=""){
			alert("请选择同一单位的入库批次!");
			var goodsBatchids=jquery("#batch_"+inputsId+" select").val().toString();
			var batchValue=goodsBatchids.replace(","+msg,"").split(",");
			jquery("#batch_"+inputsId+" select").selectpicker('val',batchValue);			
		}
	}
	 function isFloat(value){
	 	var mny =RegExp(/^([0-9]+(\.?))?[0-9]+$/);
	 	return mny.test(value);
	 }
	 var goodsCount=0.0;
	 //农事投入品提交验证
	 function submitRecord(){
		var trLength=jQuery("#addInputsTable tr").length;
		if(trLength<=1){
			alert("请选择投入品！");
			return false;
		}
		var inputsRecordStr='{"inputsDatas":[';
	   	for(var i=1;i<trLength;i++){   	   	
	   		var inputsId=jQuery("#addInputsTable tr:eq("+i+") td:eq(0) input:eq(0)").val();
	   		var unitId=jQuery("#addInputsTable tr:eq("+i+") td:eq(0) input:eq(1)").val();
	   		var inputsName=jQuery("#addInputsTable tr:eq("+i+") td:eq(1) p").html();
	   		var useNum=jQuery("#addInputsTable tr:eq("+i+") td:eq(3) input:eq(0)").val();
	   		var cost=jQuery("#addInputsTable tr:eq("+i+") td:eq(4) input:eq(0)").val();
	   		var roomId=jQuery("#addInputsTable tr:eq("+i+") td:eq(5) select").val();
	   		var batchId=jQuery("#addInputsTable tr:eq("+i+") td:eq(6) select").val();
	   		var farmerId=jQuery("#addInputsTable tr:eq("+i+") td:eq(7) select").val();
	   		var goodsCount=jQuery("#addInputsTable tr:eq("+i+") td:eq(8)").html();
	   		if(""==goodsCount){
	   			goodsCount=0;
	   		}
	   		if(null==useNum || ""==useNum){
	   			alert(inputsName+"的使用量不能为空！");
	   			return false;
	   		}else if(!isFloat(useNum)){
	   			alert("请输入正确的"+inputsName+"使用量！");
	   			return false;
	   		}else if(parseFloat(useNum)>9999999){
	   			alert(inputsName+"的使用量不能大于9999999！");
	   			return false;
	   	   	}
	   		if(null==cost || ""==cost){
	   			alert(inputsName+"的成本不能为空！");
	   			return false;
	   		}else if(!isFloat(cost)){
	   			alert("请输入正确的"+inputsName+"成本！");
	   			return false;
	   		}else if(parseFloat(cost)>9999999){
	   			alert(inputsName+"的成本不能大于9999999！");
	   		   	return false;
	   		}
	   		if("0"!=roomId){		
	   			if(null==batchId || ""==batchId){
	   				alert(inputsName+"的入库批次不能为空！");
	   				return false;
	   			}
	   			if(null==farmerId || ""==farmerId){
	   				alert(inputsName+"的经办人不能为空！");
	   				return false;
	   			}
	   			if(parseFloat(useNum)>parseFloat(goodsCount)){
	   				alert(inputsName+"库存不足，请重新输入使用量！");
	   				return false;
	   			} 			
	   		}	
	   		inputsRecordStr+= "{'inputsId':'" +inputsId + "','useNum':'"+ useNum +"','cost':'"+ cost +"','roomId':'"+ roomId +
				"','batchId':'"+ batchId +"','farmerId':'"+ farmerId +"','unitId':'"+ unitId +"'},";	 	 		
	   	}
	   	inputsRecordStr = inputsRecordStr.substring(0, inputsRecordStr.length-1) + ']}';
	   	jquery("#record_\\:inputsInfoData").val(inputsRecordStr);
	 	 var showHid=jquery("#home").css("display");
		 if(showHid=="block"){//农事
			 jquery("#agricultralType").val("1");
		 }else{
			 jquery("#agricultralType").val("2");
	     }	 	
	 	document.getElementById('record_:submitInputs').disabled = true;
	 	return true;
	 }
	 function addRecord(){
	 	//将投入品信息置为默认值
		jquery('#inputType').selectpicker('val',2);
		jquery("#searchInputText").val("");
		jquery("#addInputsTable .Output_tr").remove();
		searchInputs(1);

		jquery("#addInputRecord").show();
	 }

	 jquery("#recordList_,#jishuarecordList_").delegate('.farmingInputs','mouseenter mouseleave',function ( event ) {
	     if (event.type == 'mouseenter') {
	     	jquery(this).children('.closeInputs').css('display','block');	
	    } else {
	 	   jquery(this).children('.closeInputs').css('display','none');
	    }
	 });

	 function delRecordList(obj,index){
		jquery('#login').show();
	 	jquery(obj).parent().css('display','none');
	 	var showHid=jquery("#home").css("display");
	 	var agrType="1";
		if(showHid=="block"){//农事
			agrType="1";
		}else{
			agrType="2";
		}
	 	delRecordList_next(index,agrType);
	 }
	 function trim(str){
	    	return str.replace(/(^\s+)|\s+$/g,"");
	  }
	 var operType=1;
	 function submitAgr(data){
		if(""!=data){
			alert(data);			
		}else{
			var showHid=jquery("#home").css("display");
			if(showHid=="block"){//农事提交
				jquery('.jilubutton').prop('disabled','true');
				 if(operType=="1"){
					 jquery(".submitBtn").trigger("click");
			     }else{
			    	 jquery(".submitAddBtn").trigger("click");
				 }
			}else{//农事提交并新增
				jquery('.jilubutton').prop('disabled','true');
				 if(operType=="1"){
					 jquery(".submitBtn2").trigger("click");
			     }else{
			    	 jquery(".submitAddBtn2").trigger("click");
				 }
			}
		}
	}
	 function submitAgricultural(type){//1提交 2提交并新增
		 operType=type;
		 var showHid=jquery("#home").css("display");
		 if(showHid=="block"){//农事
			 if(checkAgr()){
				 checkStorage(1);		 				 
			 }
	     }else{//计划
	    	 if(checkAgr2()){
	    		 checkStorage(2);
			 }	    	 
		 }		 
 	 }
	 function checkAgr(){
	 	var v = "";
	 	jquery("#record_url").val(v);
	 	if(jquery("#record_time").parent().css('display')!='none'){
		 	var rtime = jquery("#record_time").val();
		 	if(trim(rtime)==""){
		 		alert("请填写工时!");
		 		return false;
		 	}	
		 	if(isNaN(rtime)){
		 		alert("工时请填写数字!");
		 		return false;
		 	}else{
		 		rtime = parseFloat(rtime);
		 		if(rtime>200){
		 			alert("工时不能超过200!");
		 			return false;
		 		}
		 	}
	 	}
	 	if(jquery("#record_temp").parent().css('display')!='none'){
		 	var temp = jquery("#record_temp").val();
		 	if(isNaN(temp)){
		 		alert("空气温度请填写数字!");
		 		return false;
		 	}else{
		 		temp = parseFloat(temp);
		 	}
		 	
		 	var humi = jquery("#record_humi").val();
		 	if(isNaN(humi)){
		 		alert("空气湿度请填写数字!");
		 		return false;
		 	}else{
		 		humi = parseFloat(humi);
		 	}
	 	}

	 	if(jquery("#record_costing").parent().css('display')!='none'){
			var costing = jquery("#record_costing").val();
			if(isNaN(costing)){
				alert("其他成本请填写数字!");
				return false;
			}else{
				costing = parseFloat(costing);
				if(costing>1000000){
					alert("其他成本不能超过1000000!");
					return false;
				}
			}
		}	 	
	 	if(jquery('#record_remark').val().length>200){
	 		alert("备注字数不能大于200!");
	 		return false;
	 	}
	 	return true;
	 }

	 function checkAgr2(){
	 	var v = "";
	 	jquery("#record_url").val(v);
	 	if(jquery("#record_time").parent().css('display')!='none'){
		 	var rtime = jquery("#record_time2").val();
		 	if(trim(rtime)==""){
		 		alert("请填写工时!");
		 		return false;
		 	}	
		 	if(isNaN(rtime)){
		 		alert("工时请填写数字!");
		 		return false;
		 	}else{
		 		rtime = parseFloat(rtime);
		 		if(rtime>200){
		 			alert("工时不能超过200!");
		 			return false;
		 		}
		 	}
	 	}
	 	if(jquery("#record_remark2").val().length > 50){
	 		alert("备注字数不能超过50!");
	 		return false;
	 	}
	 	return true;
	 }
	 function beforeOpen(){
	 		resetRecordList_next();
	 }

	 function checkOp(){
			var name=jquery("#o_name").val();
			var remark=jquery("#o_remark").val();
			if(trim(name)==""){
				alert("请填写名称!");
				return false
			}else if(name.length>45){
				alert("名称不可超过45个字符!");
				return false
			}
			if(trim(remark)!="" && remark.length>200){
				alert("描述不可超过200个字符!");
				return false
			}
			return true;
		}
		function checkOp1(){
			var name=jquery("#o_name_1").val();
			var remark=jquery("#o_remark_1").val();
			if(trim(name)==""){
				alert("请填写名称!");
				return false
			}else if(name.length>45){
				alert("名称不可超过45个字符!");
				return false
			}
			if(trim(remark)!="" && remark.length>200){
				alert("描述不可超过200个字符!");
				return false
			}
			return true;
		}
	 function alertBaseInfo(){
		if(checkSelectNew()){
			jquery('#record_time').val('1');
			jquery('#record_time2').val('1');
			jquery('#addInput').hide();jquery('#add_operate2').hide();
			jquery("#jltab").trigger("click");
			beforeOpen();
			openRecord();
			getRealPlantInfo(plantId);
			jquery('.addFarmModal').modal('show');
		}		
	 }
	 function getRealPlantInfo_next(data){
		 jquery('#agr\\:refreshPlantInfo').html(data.substring(0,data.lastIndexOf(',')));
		 jquery('#agr\\:refreshPlantInfo1').html(data.substring(0,data.lastIndexOf(',')));
		 var tunKeeperInfo=data.substring(data.lastIndexOf(',')+1);
		 if(tunKeeperInfo!=null && tunKeeperInfo!='' ){
			 jquery('#record_name').selectpicker('val',tunKeeperInfo);
			 jquery('#record_name2').selectpicker('val',tunKeeperInfo);
			}else{
				 jquery('#record_name').selectpicker('val','');
				 jquery('#record_name2').selectpicker('val','');
			}
     }
	 function clearNoNum(obj){
	 	obj.value = obj.value.replace(/[^\d.]/g,"");//清除“数字”和“.”以外的字符  
	 	obj.value = obj.value.replace(/^\./g,"");  //验证第一个字符是数字而不是. 
	 	obj.value = obj.value.replace(/\.{2,}/g,"."); //只保留第一个. 清除多余的.   
	 	obj.value = obj.value.replace(".","$#$").replace(/\./g,"").replace("$#$",".");
	 }
	 function picFiltration(){
	 	jquery('#myframPic').contents().find(".pic_stress").text('图片标准：185x114（像素）');
	 }
	 function changeRoom(room,inputsId){
		if(room=="0"){
			var goodsBatchSel="<select class='selectpicker' multiple='multiple' onchange='changeGoodsBatch(this,"+inputsId+")'></select>";
	    	var farmerInfoSel="<select class='selectpicker' ></select>";
			jquery('#batch_'+inputsId ).html(goodsBatchSel);
			jquery('#farmer_'+inputsId).html(farmerInfoSel); 	
			jquery('#goodsCount_'+inputsId).html("0"); 	
			jquery('#goodsCount_'+inputsId).attr("title",0);
			jquery('.selectpicker').selectpicker();			
		}else{
			changeStorageRoom(room,inputsId);
		}
	}
	//excelImport 控制
	 function importInit(){
		if(checkBaseModule(true)){
			showImportModul();
		}	 	
	 }
	 function callBack(baseId){
		 var url=jquery("#exportBtn").attr("href");
		 var index=url.indexOf("selBaseId");
		 var newUrl=url.substring(0,index+10)+baseId;
		 newUrl+=url.substring(index+10);
		 jquery("#exportBtn").attr("href",newUrl);		 
		 jquery("#excelForm\\:hidSelBaseId").val(baseId);		 
		 showImportModul();
	}
	function showImportModul(){
		jQuery("#showFileName").html("");
	 	jQuery("#msgSource").html("");
	 	excelModelControl(1);
	}
	 //excel模版div控制
	 function excelModelControl(type){
	 	if (type == 1) {
	 		jquery("#excelModelDiv").modal('show');
	 	} else {
	 		jquery("#excelModelDiv").modal('hide');
	 	}
	 }

	 //获取文件名称
	 function changeExcelName(excelName){
	 	jQuery("#showFileName").html(excelName);
	 }	
	//确定提交excel
	 function submitFile(){
	 	var fileName = jQuery("#excelForm\\:uploadFile").val();
	 	if (fileName == null || fileName == '') {
	 		alert("请选择上传文件！");
	 	} else {
	 		 var msg = fileName.substring(fileName.lastIndexOf("."), fileName.length);
	 		 if (msg == ".xls") {			 
	 			jQuery("#excelForm\\:excelTemplateImport").trigger('click');						
	 		} else {
	 			alert("上传文件格式不正确！");
	 		}
	 	}
	 }

	//新版添加农事投入品------
	window.onload = function (){
		var searchStr = jQuery("#searchInfo_").val();
		if(searchStr == "" || searchStr == null){
			jQuery("#searchInfo_").val("请输入搜索条件");
			jQuery("#searchInfo_").css("color","#a8a8a8");
		}else if(searchStr == "请输入搜索条件"){
			jQuery("#searchInfo_").css("color","#a8a8a8");
		}else{
			jQuery("#searchInfo_").css("color","#000");
		}
	}

	//(1)删除投入品
	function DeleteOutput(obj,inputsId){
		jQuery(obj).parents('.Output_tr').remove();
		jQuery("#check_"+inputsId).removeClass('checked');
		//取消全选
		if(jQuery("#mn_checkall").hasClass('checked')){   		
			jQuery("#mn_checkall").removeClass('checked');
		}
		resetIndex();  	
	}
	//添加投入品，由于删除，添加操作序号变乱，重新排序
	function resetIndex(){
		var trLength=jQuery("#addInputsTable tr").length;
		for(var i=1;i<trLength;i++){
			jQuery("#addInputsTable tr:eq("+i+") td:eq(0) span").html(i);
	}
	}
	//(2-1)投入品表格复选框，全选功能
	function OutputCheckAll(obj,oparents){
		if(jQuery(obj).hasClass('checked')){
			//取消全选
			jQuery(obj).removeClass('checked');
			jQuery(oparents).find('td .mn_check').removeClass('checked');
			//只取消本页的
			//jQuery("#addInputsTable .Output_tr").remove();
			var trLength=jQuery("#inputsTable tr").length;
			for(var i=0;i<trLength;i++){
				var inputIds=jQuery("#inputsTable tr:eq("+i+") td:eq(0) input:eq(0)").val();
				jQuery("#addtr_"+inputIds).remove();
			}
			resetIndex();  	
		}else{   		
			//var trLength=jQuery("#inputsTable tr").length;
			//全选时，判断没有选中的添加到投入品，已添加的不在查询
			var inputIds="";   		
			var noCheckObj=jQuery("#inputs_table").find('td .mn_check ').not(".checked");
			var trLength=noCheckObj.length;
			
			for(var i=0;i<trLength;i++){
				//inputIds+=jQuery("#inputsTable tr:eq("+i+") td:eq(0) input:eq(0)").val()+",";
				inputIds+=jQuery(noCheckObj).eq(i).siblings("input:eq(0)").val()+",";
	    } 
	    if(trLength>1){
	    	inputIds=inputIds.substring(0,inputIds.length-1);
	    }
			//如果是空，则是没有选中状态,点击后全选
			jQuery(obj).addClass('checked');
			jQuery(oparents).find('td .mn_check').addClass('checked');
			//添加多个投入品，获取库存信息
			changeGoodsInfo(inputIds);  
			jQuery("#login").show();
		}
	}
	var tableStr="";
	//(2-2)如果有一个复选框没有选中，则全选按钮为取消状态，否则相反
	function OutputCheck(obj,oparents,oAll,inputsId){
		if(jQuery(obj).hasClass('checked')){
			//取消全选
			jQuery(obj).removeClass('checked');
			//如果一个取消，那么全选为取消状态
			jQuery(oAll).removeClass('checked');
			jQuery('#addtr_'+inputsId).remove();
			resetIndex();  	
		}else{
			jQuery(obj).addClass('checked');
			//如果是空，则是没有选中状态,点击后选择
			var allNum = jQuery(oparents).find('td .mn_check').length;
			var allLen = jQuery(oparents).find('td .mn_check.checked').length;
			//alert('allNum:'+allNum+'allLen:'+allLen)
			//如果个数和选中的个数相等，则全选为选中状态
			if(allLen == allNum){
			jQuery(oAll).addClass('checked');
			}else{
			jQuery(oAll).removeClass('checked');
			}
			//添加一个投入品，获取库存信息
			changeGoodsInfo(inputsId);    		
			jQuery("#login").show();
		}
	}
	//添加投入品-获取库存信息回调
	function storageCallback(resultData){
	var inputList=resultData.result;
	jquery(inputList).each(function(index, data){
			var inputsId=data.inputsInfoId;
		        var rowNum=jQuery("#addInputsTable tr").length;
		    	var inputName=jQuery("#trp_"+inputsId+" td:eq(2) p").html();
		    	var unitName=jQuery("#trp_"+inputsId+" td:eq(3) p").html();
		    	var storageRoomSel="<select class='selectpicker'  onchange='changeRoom(this.value,"+inputsId+")'><option value='0'>无</option>";
		    	var goodsBatchSel="<select class='selectpicker' multiple='multiple' onchange='changeGoodsBatch(this,"+inputsId+")'>";
		    	var farmerInfoSel="<select class='selectpicker' >";
		    	if(typeof(data.storageRoom) != "undefined"){
		    		storageRoomSel+=data.storageRoom;
		    	} 
		    	if(typeof(data.goodsBatch) != "undefined"){
		    		goodsBatchSel+=data.goodsBatch;
		    	}
		    	if(typeof(data.farmerInfo) != "undefined"){
		    		farmerInfoSel+=data.farmerInfo;
		    	}  	
		    	storageRoomSel+="</select>";
		    	goodsBatchSel+="</select>";
		    	farmerInfoSel+="</select>";
		    	
		    	tableStr="<tr class=\"Output_tr\" id='addtr_"+inputsId+"'>"+
			    	"<td class=\"br_bt br_rt\">"+
		    		"<input type='hidden' value='"+inputsId+"'/>"+
			    		"<input type='hidden' value='' id='unit_"+inputsId+"'/><span>"+rowNum+"</span></td>"+
		    		"<td class=\"br_bt br_rt\"><p class=\"ellipsis\" title='"+inputName+"'>"+inputName+"</p></td>"+
				    "<td class=\"br_bt br_rt\"><p class=\"ellipsis\" title='"+unitName+"'>"+unitName+"</p></td>"+ 	
			    	"<td class=\"br_bt br_rt\">"+
			    		"<input class=\"Output_input\"></input>"+
			    	"</td>"+
			    	"<td class=\"br_bt br_rt\">"+
			    		"<input class=\"Output_input\" value='0'></input>"+
			    	"</td>"+
			    	"<td class=\"br_bt br_rt\">"+
				    	"<div class=\"Output_selectpicker\" id='room_"+inputsId+"'>"+storageRoomSel+"</div>"+
			    	"</td>"+
			    	"<td class=\"br_bt br_rt\">"+
			    		"<div class=\"Output_selectpicker\" id='batch_"+inputsId+"'>"+goodsBatchSel+"</div>"+
			    	"</td>"+
			    	"<td class=\"br_bt br_rt\">"+
						"<div class=\"Output_selectpicker\" id='farmer_"+inputsId+"'>"+farmerInfoSel+"</div>"+
					"</td>"+
			    	"<td class=\"br_bt br_rt\" style='overflow: hidden;' id='goodsCount_"+inputsId+"'>0</td>"+
			    	"<td class=\"br_bt\">"+
			    		"<a href=\"javascript:;\" onclick=\"DeleteOutput(this,"+inputsId+")\">删除</a>"+
			    	"</td>"+
		    	"</tr>";
		    	jquery("#addInputsTable").append(tableStr);
		});    
		jquery('.selectpicker').selectpicker();			
		jQuery("#login").hide();
	}
	//(3)获取焦点，失去焦点
	function FocusFn(obj,oColor,txt_val){
		if(jQuery(obj).val()==txt_val){
			jQuery(obj).val('');
			jQuery(obj).css('color',oColor)
		}
	}
	function BlurFn(obj,oColor,txt_val){
		if(jQuery(obj).val()==''){
			jQuery(obj).val(txt_val);
			jQuery(obj).css('color',oColor)
		}
	}
	//投入品列表信息查询
	function searchInputs(pageNum){
		var dataStandard=jquery("#dataStandard").val();	
		var inputType=jquery("#inputType").val();
		var searchText=jquery("#searchInputText").val();
		if(searchText=="请输入查询内容"){
			searchText="";
		}
		searchInputsList(inputType,dataStandard,searchText,pageNum);
		jquery("#login").show();
	}
	//翻页
	function inputsJump(inputsPageNum){
		searchInputs(inputsPageNum);
	}
	function searchInputsList_next(){
		var trLength=jQuery("#inputsTable tr").length;
		for(var i=1;i<trLength;i++){
			var inputIds=jQuery("#inputsTable tr:eq("+i+") td:eq(0) input:eq(0)").val();
			if(jquery("#addtr_"+inputIds).length>0){
				jquery("#check_"+inputIds).addClass('checked');
			}
		}
		var allNum = jQuery("#inputs_table").find('td .mn_check').length;
		var allLen = jQuery("#inputs_table").find('td .mn_check.checked').length;
		//alert('allNum:'+allNum+'allLen:'+allLen)
		//如果个数和选中的个数相等，则全选为选中状态
		if(allLen == allNum && allNum>0){
			jQuery("#mn_checkall").addClass('checked');
		}else{
			jQuery("#mn_checkall").removeClass('checked');
		}
		jQuery("#login").hide();
	}
	//]]>
	</script>
	<!-- HTML5 shim, for IE6-8 support of HTML elements--><!--[if lt IE 9]>
    <script src="#{request.contextPath}/asset/timeline/js/html5.js"></script><![endif]-->
	<script type="text/javascript" src="#{request.contextPath}/asset/timeline/js/storyjs-embed.js"></script>
		<script type="text/javascript" src="#{request.contextPath}/asset/timeline/js/timeline.js?2.24"></script>
		<script type="text/javascript" src="#{request.contextPath}/asset/timeline/js/locale/zh-cn.js?2.24"></script>
		<script type="text/javascript">
		LazyLoad.css("#{request.contextPath}/asset/timeline/css/timeline.css?2.24");
		
		</script>
	<style>
	.vco-storyjs{ background-color:#727272;}
	.vco-slider .nav-previous .nav-container, .vco-slider .nav-next .nav-container {
		width:112px;
	}
	.vco-slider .slider-item .content{display:block;}
	.vco-storyjs .vco-feature .vco-slider{ padding-top:0;}
	.vco-slider .slider-container-mask{ min-height:260px;}
	.vco-slider .slider-item{ min-height:260px;}
	.vco-slider .slider-item .content .content-container .media .media-wrapper .media-container .media-frame{ border:0;}
	.vco-timeline .vco-navigation .timenav .time .time-interval div{
		color:white;
	}
	.time-interval-major{
		display:none;
	}
	#timeline .vco-storyjs .vco-main.vco-container{ background:#727272;}
    #timeline .vco-timeline .vco-navigation .timenav-background{ background-color:#333;}
    #timeline .vco-slider .slider-item .content .content-container .media .media-wrapper .media-container .media-frame{border:0;}
    #timeline .vco-timeline .vco-navigation .timenav .time .time-interval div{color:#fff;}
    #timeline .vco-timeline .vco-navigation .timenav .time .time-interval-major DIV{color:#fff;}
	#timeline .time-interval-major{display:block;}
	</style>
</td>
	</ui:define>

</ui:composition>

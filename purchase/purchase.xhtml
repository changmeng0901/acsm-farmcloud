<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:aaa="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	template="/layout/template_new.xhtml">

	<ui:define name="body">
    <title>一键购买</title>
    <link type="text/css" rel="stylesheet" href="#{request.contextPath}/asset/css/purchase/bootstrap/skinBlue.css" />
    <link type="text/css" rel="stylesheet" href="#{request.contextPath}/asset/css/purchase/sort/sort.css" />
    <link type="text/css" rel="stylesheet" href="#{request.contextPath}/asset/css/purchase/commons/commons.css"/>
    <link type="text/css" rel="stylesheet" href="#{request.contextPath}/asset/css/purchase/purchase.css" />
	<style>
	.rt_top{top:0;}
		.form-control{float:left;}
	.ke-edit{height:300px !important;}
	.ke-edit-iframe{height:300px !important;}
	.ke-edit-textarea{height:100% !important;}
	.check_mask{position: absolute; width:18px; height:18px; left:0; top:7px; opacity:0; filter: alpha(opacity=0); z-index: 100;cursor:pointer;}
	.rich-panel-body{padding: 0!important;}
	.newMagrin .item .icheckbox_minimal-blue, .icheckbox_minimal-blue.checked{margin-top:8px;}
	.mystyle{display:inline-block;max-width:160px;height:20px; line-height:20px;overflow: hidden;white-space: nowrap;text-overflow: ellipsis;}
	.pname{display:inline-block;max-width:160px;height:20px; line-height:20px;overflow: hidden;white-space: nowrap;text-overflow: ellipsis;}
	.bootstrap-select-searchbox{ overflow:hidden;}
	.bootstrap-select.btn-group .dropdown-menu.inner{height:120px;}
	.example .bootstrap-select.btn-group .dropdown-menu.inner{height:145px;}
	.example .tab-content{ height:354px;overflow-y:auto;}
	
	html{overflow-y:hidden;}
	body{overflow:auto;}
	.dis{display:none}
	.file_img{display:inline-block;vertical-align:top;width: 101px; height: 101px; margin: 0 10px 10px 0; position: relative; cursor: pointer;}
	.file_img img{width: 101px; height: 101px; }
	.file_img .closed{width: 29px; height: 29px; position: absolute; z-index: 5; right: 0; top: 0; background: url(#{request.contextPath}/asset/images/purchase/close.png); display: none;}
	.file_img:hover .closed{display: block;}
	.file_img input{position: absolute; left: 0; top: 0;}
	.file_img input{z-index: 5; opacity: 0; filter: alpha(opacity=0); font-size: 21px; width: 101px; height: 101px; }
	.fileimg_btn{display:inline-block;width:101px;height:101px;margin:0 10px 10px 0;}
	.fileimg_btn img{ width:100%;height:100%;}
	.sort_btn{ display:inline-block;width:90px;height:101px;margin:0 0 10px 0; padding-top:35px;box-sizing:border-box;vertical-align:top;}
	.remind{width: 100%; height: 28px; line-height: 28px; color: #8a6d3b; border-bottom: 1px solid #faebcc; background-color: #fcf8e3;}
     .remind img{vertical-align: -2px; margin-left: 10px; margin-right: 5px;}  
     .pano_second .tooltip{margin-left:-25px;} 
     .logo{width:auto;max-width:30%;}
     .commodity .goods li .tooltip{margin-top:-10px;}
     html{min-height:100%;overflow:auto;}
     body{min-height:100%;height:auto;overflow:hidden;}
     .panorama_content{overflow:hidden;}
	</style>
	<script type="text/javascript" src="#{request.contextPath}/asset/js/kindeditor/kindeditor.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/kindeditor/lang/zh_CN.js"></script>
#{purchaseProductHome.init()}
    <td valign="top">
    <div aria-hidden="false" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="myModal" class="modal fade in w600na" style="display: none;">
	  <div class="modal-dialog">
	    <div class="modal-content">
	      <div class="modal-header">
	        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
	        <h4 class="modal-title" id="myModalLabel">提示框</h4>
	      </div>
	      <div class="modal-body">
	       <span id="productMsg">*号部分为必填项！</span>
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
	        <button type="button" class="btn btn-primary" data-dismiss="modal">确认</button>
	      </div>
	    </div>
	  </div>
	</div> 
        <s:fragment rendered="#{purchaseProductHome.purchaseList eq null or purchaseProductHome.purchaseList.size() eq 0}">
            <div class="purchase_main pl20 pr20" >
                <div class="breadNav_wap clear">
                    <div class="breadNav_lt"><a href="#">精准营销</a><span>&gt;</span><strong>一键购买</strong></div>
                    <div class="breadNav_rt" style="margin-bottom:-1px; margin-top:1px;">
                        <ul class="resumeList clear">
                            <li class="cur">
                                <a href="/purchase/purchase.seam"><img src="#{request.contextPath}/asset/images/purchase/purchase_icon1.png"/><span>一键购买</span></a>
                            </li>
                            <li>
                                <a href="/purchase/OrderOperateList.seam"><img src="#{request.contextPath}/asset/images/purchase/purchase_icon2.png" /><span>订单管理</span></a>
                            </li>
                             <li>
                                <a href="/purchase/weChat.seam"><img src="#{request.contextPath}/asset/images/purchase/wechatTitle.png" /><span>一键购配置</span></a>
                            </li>
                        </ul>
                    </div>
                </div>
                <table width="100%" cellspacing="0" cellpadding="0" style='margin-top:20px; margin-bottom:20px;'>
                    <tr>
                        <td style="vertical-align:top;">
                            <div class="commodity">
                                <h4><img src="#{request.contextPath}/asset/images/purchase/commodity.png" style="margin: 0 12px 0 20px;"/>商品信息</h4>
                                <img src="#{request.contextPath}/asset/images/purchase/car.png" style="display:block;"/>
                                <p>您还没有添加商品，快去添加您的商品上架吧！</p>
                               	<button type="button" class="btn btn-success" style="margin:12px auto 0; display:block;" onclick="toAddProduct()" >添加商品</button>
                            </div>
                            <div class="example">
                                <div class="cfa">
                                    <img src="#{request.contextPath}/asset/images/purchase/nav1.png" alt=""/>
                                    <img src="#{request.contextPath}/asset/images/purchase/nav2.png" alt=""/>
                                </div>
                                <img src="#{request.contextPath}/asset/images/purchase/content.jpg" alt="" style="margin-left:20px;"/>
                            </div>
                        </td>
                        <td width="10"></td>
                        <td width="380">
                            <div class="preview">
                                <h4><img src="#{request.contextPath}/asset/images/purchase/preview.png" alt=""/>实时预览</h4>
                                <div class="picture">
                                	<img src="#{request.contextPath}/asset/images/purchase/preview.jpg" alt="" />
                                </div>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
          </s:fragment>
          <!-- 添加商品模态框 -->
<div class="modal fade" id="addModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-dialog pano_dialog add_dialog ">
<div class="modal-content">
    <div class="modal-header clear">
        <h4 class="modal-title fl">添加商品</h4>
        <i class="i_close" data-dismiss="modal"></i>
    </div>
    <div class="modal-body modal_body">
    <rich:panel id="productListPanel" style="margin:0; border:none; padding: 0;">
	      <div class="clear" style="padding-bottom:15px; border-bottom:1px dashed #e1e1e1;">
	        <div class="public-search fl ml10 mr5">
	          <span class="octicon-search02" onclick="toAddProductSearch()"></span>
	          <input type="text" value="请输入商品名称" class="form-control mr5 myinput" style="width:240px;" id="productInfoName"/>
	        </div>
	      </div>
	      <rich:panel id="productListNamePanel" style="margin:0; border:none; padding: 0;">
	      
		      <div class="warpBox">
		       <s:fragment rendered="#{purchaseProductHome.productInfoList ne null or purchaseProductHome.productInfoList.size() gt 0}">
		        <ul class="goodsDetail">
		        <aaa:repeat  value="#{purchaseProductHome.productInfoList}" var="_product" rowKeyVar="_index">
		          <li onclick="selectProduct(this)" class="productLi" style="cursor:pointer;">
		            <img src="#{_product[2] eq null or _product[2] eq '' ? '/asset/images/purchase/productDefault.png':_product[2]}" />
		            <input type="text" value="#{_product[0]}" id="productId"  style="display:none" title="#{_product[0]}"/>
		            <span class="names" title="#{_product[1]}">#{_product[1]}</span>
		            <span class="mystyle">规格
			            <em>
			            	<s:fragment rendered="#{_product[5] ne null }">
			            		#{_product[5]}
			            	</s:fragment>
			            		#{_product[4]} 
			            	<s:fragment rendered="#{_product[6] ne null and _product[6] ne ''}">
			            		/#{_product[6]}
			            	</s:fragment>
			            </em>
		            </span>
		          </li>
		          </aaa:repeat>
		        </ul>
		        </s:fragment>
		        <s:fragment rendered="#{purchaseProductHome.productInfoList eq null or purchaseProductHome.productInfoList.size() eq 0}">
    			<div style="text-align: center;padding: 130px 0 30px;">
	    			<img src="#{request.contextPath}/asset/images/purchase/noproduct.png" alt="" style="text-align:center"/>
	    			<p style="text-align:center">未搜索到商品</p>
    			</div>
    		</s:fragment>
		      </div>
		      
	       
	      </rich:panel>
      </rich:panel>
    </div>
    <div class="modal-footer">
       	<button type="button" class="btn btn-primary" onclick="addPurchaseProduct()">确定</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">返回</button>
    </div>
    <h:form style="display:none" id="addProduct">
    	<h:inputHidden value="#{purchaseProductHome.productInfoId}" id="productInfoId"/>
    	<h:commandButton id="addButton"   value="添加商品" action="#{purchaseProductHome.addPurchaseProduct()}"></h:commandButton>
    </h:form>
</div>
</div>
</div>
      <s:fragment rendered="#{purchaseProductHome.purchaseList ne null and  purchaseProductHome.purchaseList.size() gt 0}">    
            <div class="panorama_main">
            	<!-- 一键购买左侧二级导航 -->
                <div class="panorama_level_wap">
                    <div class="panorama_level" style="position:relative;">
                      <div class="public-search public-search2" style="position:absolute;left:3px;top:10px;    z-index: 2;">
                        <span class="octicon-search02" onclick="productSearch()"></span>
                        <input type="text" value="请输入商品名称搜索" class="form-control mb10" style="width:168px;" id="searchName"/>
                      </div>
                      <div style="width: 186px;padding-top:45px;height:100%;box-sizing:border-box;overflow-y:scroll;" id="purchaseListDiv">
                      <rich:panel id="purchaseListPanel" style="margin:0; border:none; padding: 0;">
                        <s:fragment rendered="#{purchaseProductHome.purchaseList ne null or purchaseProductHome.purchaseList.size() ge 0}">
                        <ol class="pano_second">
                         <aaa:repeat  value="#{purchaseProductHome.purchaseList}" var="_purchaseProduct" rowKeyVar="_index">
                        	<li class="sed_item #{_purchaseProduct[0] eq purchaseProductHome.purchaseProduct.purchaseProductInfoId ? 'sed_cur' : ''}" >
                                <div href="#{request.contextPath}/purchase/purchase.seam?purchaseProductInfoId=#{_purchaseProduct[0]}"  >
                                    <i class="i_icon"></i>
                                    <p class="p_text" style="cursor:pointer" onclick="toRedirect(this)">#{_purchaseProduct[1]}</p>
                                    <p class="selled" data-toggle="tooltip" title="销售量：#{_purchaseProduct[2]}"><span>已售</span>#{_purchaseProduct[2]}</p>
                                </div>
                            </li>
                         </aaa:repeat>
                        </ol>
                        </s:fragment>
                         </rich:panel>
                         </div>
                         <div id="noPurchaseListDiv" style="display:none;">
                       		<div style="text-align: center;padding: 60px 0 30px;width:186px;">
	    						<img src="#{request.contextPath}/asset/images/purchase/noproduct.png" alt="" style="text-align:center"/>
	    						<p style="text-align:center">未搜索到商品</p>
    						</div>
                        </div>
                        
                    </div>
                    <i class="collapse_btn"></i>
                </div>
                <!-- 一键购买左侧二级导航 -->
                <!-- 一键购买右侧 -->
                <div class="panorama_content">
                 <!-- 2016.11.25新加内容 -->
                  <div class="remind" >
                    <img src="#{request.contextPath}/asset/images/purchase/remind.png" style="float: left;margin-top:8px"/>
                    <p id="orderMesg" style="float: left;"></p>
                    <a href="#{request.contextPath}/user/UpdateEnterpriseSettings.seam?purchaseInFalg=1" style="float: left; margin-left: 5px;">去设置>></a>  
                  </div>
                    <div class="breadNav_wap clear">
                        <div class="breadNav_lt"><a href="#">精准营销</a><span>&gt;</span><strong>一键购买</strong></div>
                        <div class="breadNav_rt" style="margin-bottom:-1px; margin-top:1px;">
                            <ul class="resumeList clear">
                                <li class="cur">
                                    <a href="/purchase/purchase.seam"><img src="#{request.contextPath}/asset/images/purchase/purchase_icon1.png"/><span>一键购买</span></a>
                                </li>
                                <li>
                                    <a href="/purchase/OrderOperateList.seam"><img src="#{request.contextPath}/asset/images/purchase/purchase_icon2.png" /><span>订单管理</span></a>
                                </li>
                                <li>
                                     <a href="/purchase/weChat.seam"><img src="#{request.contextPath}/asset/images/purchase/wechatTitle.png" /><span>一键购配置</span></a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div style="padding:15px 20px;">
                         <button type="button" class="btn btn-success" style="margin-right:15px;" onclick="toAddProduct()">
                            <img src="#{request.contextPath}/asset/images/purchase/add.png" style="vertical-align: -2px;"/>
                            添加商品
                        </button>
                         <span>继续添加您的商品上架！</span>
                    </div>
                    <div class="pur_section">
                        <table width="100%" cellspacing="0" cellpadding="0" >
                            <tr>
                                <td style="vertical-align:top;">
                                    <div class="commodity" style="height:244px;">
                                        <h4>
                                            <img src="#{request.contextPath}/asset/images/purchase/commodity.png" alt=""/>商品信息
                                            <ul class="goods">
                                                <li><s:link propagation="none"  includePageParams="false" view="/stock/InventoryFile.xhtml"   action="#{sessionTake.setWorkParam(3)}" ><img src="#{request.contextPath}/asset/images/purchase/goods1.png" data-toggle="tooltip" title="进入库存"/></s:link></li>   
                                                <li><s:link propagation="none"  includePageParams="false" view="/product/ProductInfoList.xhtml"   action="#{sessionTake.setWorkParam(3)}" ><img src="#{request.contextPath}/asset/images/purchase/goods2.png" data-toggle="tooltip" title="进入商品信息"/></s:link></li>
                                                <li><a href="javascript:;"><img src="#{request.contextPath}/asset/images/purchase/goods3.png"  data-toggle="tooltip" title="评论管理"  onclick="commentButton()"/></a></li>
                                            </ul>
                                        </h4>
                                        <table width="100%" cellpadding="0" cellspacing="0">
                                            <tr>
                                                <td width="130" style="vertical-align:top;">
                                                    <div class="left">
                                                        <img src="#{purchaseProductHome.purchaseProduct.productInfoId.productImage eq null or purchaseProductHome.purchaseProduct.productInfoId.productImage eq ''? '/asset/images/purchase/productDefault.png':purchaseProductHome.purchaseProduct.productInfoId.productImage}" class="bg_circle"/>
                                                    </div>
                                                </td>
                                                <td style="padding: 0 10px; ">
                                                    <div class="right">
                                                    <input type="text" id="upFlag" value="#{purchaseProductHome.purchaseProduct.upFrameFlag}" style="display:none"/>
                                                        <h5>#{purchaseProductHome.purchaseProduct.productInfoId.name}</h5>
                                                        <p><img src="#{request.contextPath}/asset/images/purchase/num.png"/>库存数量 <span>#{purchaseProductHome.purchaseProduct.stockNum}</span></p>
                                                        <p><img src="#{request.contextPath}/asset/images/purchase/name.png"/>展示名称<h:inputText value="#{purchaseProductHome.purchaseProduct.displayName}" id="displayName" onchange="change('displayName','detailName')" maxlength="30"/>(30字)</p>
                                                    </div>
                                                    <p class="para"><img src="#{request.contextPath}/asset/images/purchase/warn.png"/>用来展示在商品详情页面的名称，建议将产品特色增加进来，例如：【纯天然绿色】产自加拿大的进口车厘子</p>
                                                </td>
                                            </tr>
                                        </table>     
                                    </div>
                                    <div class="example" style="height:392px;">
                                        <ul class="nav nav-tabs" role="tablist" id="myTab" style="background-color:#fafafa;">
                                          <li class="active"><a href="#home" role="tab" data-toggle="tab"><img src="#{request.contextPath}/asset/images/purchase/icon1.png" alt=""/>基础设置</a></li>
                                          <li><a href="#profile" role="tab" data-toggle="tab"><img src="#{request.contextPath}/asset/images/purchase/icon2.png" alt=""/>商品简介</a></li>
                                          <li><a href="#farmfile" role="tab" data-toggle="tab"><img src="#{request.contextPath}/asset/images/purchase/farm_introduct.png" alt=""/>农场简介</a></li>
                                          <li><a href="#messages" role="tab" data-toggle="tab"><img src="#{request.contextPath}/asset/images/purchase/icon3.png" alt=""/>农场宣传</a></li>
                                          <li><a href="#settings" role="tab" data-toggle="tab"><img src="#{request.contextPath}/asset/images/purchase/icon4.png" alt=""/>销售设置</a></li>
                                          <s:fragment rendered="#{purchaseProductHome.purchaseProduct.upFrameFlag}" >
                                          	<li><a href="#shares" role="tab" data-toggle="tab"><img src="#{request.contextPath}/asset/images/purchase/icon5.png" alt=""/>分享设置</a></li>
                                          </s:fragment>
                                        </ul>
                                        
                                        <div class="tab-content">
                                          <div class="tab-pane active basicSet" id="home" >
                                              <table width="100%" cellpadding="0" cellspacing="0" >
                                                  <tr>
                                                      <td width="102" class='unit'>规&nbsp;&nbsp;&nbsp;&nbsp;格：</td>
                                                      <td><span class="blue">#{purchaseProductHome.productUnit}</span></td>
                                                  </tr>
                                                  <tr>
                                                      <td class='unit'>价&nbsp;&nbsp;&nbsp;&nbsp;格：</td>
                                                      <td class="prize">￥<input type="text" id="purchasePrice" value="#{purchaseProductHome.purchaseProduct.productPrice eq null ? purchaseProductHome.purchaseProduct.productInfoId.productPrice : purchaseProductHome.purchaseProduct.productPrice}" onkeyup="numberCheck(this)" onchange="change('purchasePrice','productPrice')"/></td>
                                                  	  <td class='unit'>产&nbsp;&nbsp;&nbsp;&nbsp;地：</td>
                                                  	  <td class="unit">
                                                  	  	 <select class="selectpicker"   data-live-search="true" id="provienceSelect"  title="请选择" onchange="provinceChange(this)">
                                                  	  	 		<option value="0">请选择</option>
                                                  	  	 	<aaa:repeat  value="#{purchaseProductHome.provinceList}" var="_province" rowKeyVar="_index">
                                                  	  	 		<s:fragment rendered="#{purchaseProductHome.province eq _province[0]}">
                                                  	  	 			<option value="#{_province[0]}" selected="selected">#{_province[1]}</option>
                                                  	  	 		</s:fragment>
                                                  	  	 		<s:fragment rendered="#{purchaseProductHome.province ne _province[0]}">
                                                  	  	 			<option value="#{_province[0]}">#{_province[1]}</option>
                                                  	  	 		</s:fragment>
                                                  	  	 	</aaa:repeat>
                                                  	  	 </select>
                                                  	  </td>
                                                  </tr>
                                                  <tr>
                                                      <td class='unit'>图片展示:</td>
                                                      <td>
                                                          <!-- 上传过来的图片 -->
                                                           <rich:panel id="productImgPanel" style="display:inline-block;vertical-align:top;float:left;margin:0; border:none; padding: 0;float:left">
	                                                          <aaa:repeat  value="#{purchaseProductHome.productImageUrlList}" var="_url" rowKeyVar="_index">
	                                                              <div class="file_img">
	                                                                  <img src="#{_url}" class="productImg"/>
	                                                                  <span class="closed" onclick="delProductImg(#{_index})"></span>
	                                                              </div>
	                                                          </aaa:repeat>
                                                            </rich:panel>
                                                          <!-- 上传图片按钮 -->
                                                          	<div id="upPicLi" class="fileimg_btn"  style ="float:left; #{purchaseProductHome.productImageUrlList.size() lt 5 ? '':'display:none'}" >
                                                              <div id="container1">
																	<div id="selectfiles1" class="">
																		<img src="#{request.contextPath}/asset/images/dpadd.jpg"  style="cursor:pointer" width="128" height="128" />
																	</div>
																	<a style="display: none" id="postfiles1" href="javascript:void(0);" class='btn' onclick="apply(1,6);"></a> 
																	<a style="display: none" id="callback1" href="javascript:void(0);" class='btn' onclick="callback();"></a>
																</div>
															</div>
                                                     
                                                          <div id="ossfile1"></div>
                                                          <!-- 排序按钮 -->
                                                          <div class="sort_btn" style="float:left;">
                                                          	<button type="button" class="btn btn-default fr mr10" data-toggle="modal" data-target="#SortModal"><img class="mr5" src="#{request.contextPath}/asset/images/purchase/sort.png" alt=""/>排序</button>
                                                      	  </div>
                                                      </td>
                                                  </tr>
                                                  <tr>
                                                      <td class='unit'>设置可选商品:</td>
                                                      <td>
                                                        <div>
                                                            <select class="selectpicker" multiple="multiple"  data-live-search="true" id="optionSelect" onchange="optionProductChange()" title="请选择">
                                                                <aaa:repeat  value="#{purchaseProductHome.optionProductList}" var="_product" rowKeyVar="_index">
                                                                	<option value="#{_product.purchaseProductInfoId}">#{_product.displayName}</option>
                                                                </aaa:repeat>
                                                            </select>
                                                            <span style="vertical-align: -3px;">可多个选择</span>
                                                        </div>
                                                        <div class="detail clear">
                                                        <rich:panel id="optionProductPanel" style="margin:0; border:none; padding: 0;">
	                                                        <aaa:repeat  value="#{purchaseProductHome.selectedPurchaseProduct}" var="_product" rowKeyVar="_index">
	                                                            <span>#{_product.displayName}</span>
	                                                        </aaa:repeat>
	                                                    </rich:panel>
                                                        </div>
                                                      </td>
                                                  </tr>
                                              </table>
                                          </div>
                                          <div class="tab-pane mt15 ml5" id="profile" >
                                              <h:inputTextarea   id="productIntroduction" name="productIntroduction" style="width:690px;height:380px" value="#{purchaseProductHome.purchaseProduct.productIntroduction}" onchange="change('productIntroduction','introduction')"/> 
                                          </div>
                                          <div class="tab-pane mt15 ml5" id="farmfile" >
                                              <h:inputTextarea   id="farmIntroduction" name="farmIntroduction" style="width:690px;height:380px" value="#{purchaseProductHome.purchaseProduct.farmIntroduction}" onchange="change('farmIntroduction','introduction')"/> 
                                          </div>
                                          <div class="tab-pane" id="messages">
                                              <ul class="farms clear">
                                                  <li >
                                                    <span class="ml5"><img src="#{request.contextPath}/asset/images/purchase/farms1.png" />四季田景：</span>
                                                    <span class="setting_btn" onclick="checkEnabled(1)">设置&gt;</span> 
                                                    <div class="star_using" >
                                                    <div class="check_mask" onclick="valueCheck(1)"></div>
                                                        <input class="iCheck" type="checkbox" starusing="unchecked"   id="streetFlag"/>启用
                                                    </div> 
                                                  </li>
                                                  <li >
                                                    <span class="ml5"><img src="#{request.contextPath}/asset/images/purchase/farms2.png" />航拍视频：</span>
                                                    <span class="setting_btn" onclick="checkEnabled(2)">设置&gt;</span> 
                                                    <div class="star_using" >
                                                    	<div class="check_mask" onclick="valueCheck(2)"></div>
                                                        <input class="iCheck" type="checkbox" starusing="unchecked" id="aerialVideoFlag" />启用
                                                    </div> 
                                                  </li>
                                                  <li >
                                                    <span class="ml5"><img src="#{request.contextPath}/asset/images/purchase/farms3.png" />履历：</span>
                                                    <span class="setting_btn" onclick="checkEnabled(3)">设置&gt;</span> 
                                                    <div class="star_using" >
                                                    	<div class="check_mask" onclick="valueCheck(3)"></div>
                                                        <input class="iCheck" type="checkbox" starusing="unchecked" id="resumeFlag" />启用
                                                    </div> 
                                                  </li>
                                                  <li  >
                                                    <span class="ml5"><img src="#{request.contextPath}/asset/images/purchase/farms4.png" />农场名片：</span>
                                                    <span class="setting_btn" onclick="checkEnabled(4)">设置&gt;</span> 
                                                    <div class="star_using" >
                                                    	<div class="check_mask" onclick="valueCheck(4)"></div>
                                                        <input class="iCheck" type="checkbox" starusing="unchecked"   id="farmShowFlag"/>启用
                                                    </div> 
                                                  </li>
                                                  <li >
                                                    <span class="ml5"><img src="#{request.contextPath}/asset/images/purchase/farms5.png" />农场地图：</span>
                                                    <span class="setting_btn" onclick="checkEnabled(5)">设置&gt;</span> 
                                                    <div class="star_using">
                                                        <input class="iCheck" type="checkbox" starusing="unchecked" id="farmMapFlag" onclick="changeMapFlag()"/>启用
                                                    </div> 
                                                  </li>
                                              </ul>
                                          </div>
                                          <div class="tab-pane" id="settings">
                                              <ul class="farms clear">
                                                  <li>
                                                    <span class="ml5"><img src="#{request.contextPath}/asset/images/purchase/farms6.png" />企业LOGO：</span>
                                                    <div class="star_using">
                                                    	<div class="check_mask" onclick="changeLogo()"></div>
                                                        <input class="iCheck" type="checkbox" starusing="unchecked"   id="logoFlag" />启用
                                                    </div> 
                                                  </li>
                                                  <li >
                                                    <span class="ml5"><img src="#{request.contextPath}/asset/images/purchase/farms7.png" style="vertical-align: -1px;"/>运费：</span>
                                                    	￥<span class="c99" id="freight1">
                                                    	<s:fragment rendered="#{!purchaseProductHome.purchaseProduct.freefreightPriceFlag}">
                                                    		#{purchaseProductHome.purchaseProduct.freightPrice eq null or purchaseProductHome.purchaseProduct.freightPrice eq '' and  purchaseProductHome.purchaseProduct.freeFreightPrice eq 0? '--':purchaseProductHome.purchaseProduct.freightPrice}
                                                    		</s:fragment>
                                                    	</span>
                                                    	<span id="freight2">
	                                                    	<s:fragment rendered="#{!purchaseProductHome.purchaseProduct.freefreightPriceFlag and  purchaseProductHome.purchaseProduct.freeFreightPrice ne null  and  purchaseProductHome.purchaseProduct.freeFreightPrice ne 0}">
	                                                    		满￥#{purchaseProductHome.purchaseProduct.freeFreightPrice}包邮
	                                                    	</s:fragment>
                                                    	</span>
                                                    	<span id="freight3">
	                                                    	<s:fragment rendered="#{purchaseProductHome.purchaseProduct.freightFlag and (purchaseProductHome.purchaseProduct.freefreightPriceFlag or purchaseProductHome.purchaseProduct.freightPrice eq null or purchaseProductHome.purchaseProduct.freightPrice eq 0 or purchaseProductHome.purchaseProduct.freeFreightPrice eq 0)}">
	                                                    		包邮
	                                                    	</s:fragment>
                                                    	</span>
                                                    <span class="setting_btn" onclick="checkEnabled(6)">设置&gt;</span> 
                                                    <div class="star_using">
                                                   		<div class="check_mask" onclick="valueCheck(5)"></div>
                                                        <input class="iCheck" type="checkbox" starusing="unchecked"  id="freeFreightPriceFlag"/>启用
                                                    </div> 
                                                  </li>
                                                  <!-- <li>
                                                    <span class="ml5"><img src="#{request.contextPath}/asset/images/purchase/farms8.png" />短信通知收件人功能：</span> 
                                                    <div class="star_using">
                                                        <input class="iCheck" type="checkbox" starusing="unchecked"   id="notifyRecipientsFlag"/>启用
                                                    </div> 
                                                  </li> -->
                                              </ul>
                                          </div>
                                          <div class="tab-pane shares " id="shares" >
                                            <table>
                                                <tr>
                                                    <td width="85" class="describe">分享标题：</td>
                                                    <td colspan="2">
                                                    	<input type="text" value="#{purchaseProductHome.purchaseProduct.shareTitle eq null ? purchaseProductHome.purchaseProduct.displayName : purchaseProductHome.purchaseProduct.shareTitle}" id="shareTitle"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="describe" style="vertical-align:top; line-height:34px;">分享描述：</td>
                                                    <td width="300">
                                                    	<textarea type="text"  id="shareDescription">#{purchaseProductHome.purchaseProduct.shareDescription eq null ? '请输入描述内容' : purchaseProductHome.purchaseProduct.shareDescription}</textarea>
                                                    </td>
                                                    <td width="80">
                                                    	<div class="download-code">
	                                                        <!-- <img src="#{purchaseProductHome.purchaseProduct.qrCode}" width="80"  height="80" id=""/> -->
	                                                        <img src="#{request.contextPath}/GenerateCodeImage?enterpriseId=#{sessionTake.enterpriseInfoId}&amp;productId=#{purchaseProductHome.purchaseProduct.purchaseProductInfoId}&amp;type=10" width="80"  height="80" id=""/>
	                                                        <a href="javaScript:void(0)" onclick="downloadPic('#{purchaseProductHome.domainUrl}/GenerateCodeImage?enterpriseId=#{sessionTake.enterpriseInfoId}&amp;productId=#{purchaseProductHome.purchaseProduct.purchaseProductInfoId}&amp;type=10')">下载</a>
                                                    	</div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="describe">分享链接：</td>
                                                    <td>
                                                    	<input type="text" value="#{purchaseProductHome.purchaseProduct.shareUrl}"  id="shareUrl" readonly="readonly"/>
                                                    </td>
                                                    <td><button class="btn btn-default copy_link" onclick="jsCopy()">复制链接</button></td>
                                                </tr>
                                            </table>
                                          </div>
                                        </div>
                                    </div>
                                </td>
                                <td width="10"></td>
                                <td width="380">
                                    <div class="preview">
                                        <h4><img src="#{request.contextPath}/asset/images/purchase/preview.png" alt=""/>实时预览</h4>
                                        <div class="phone">
                                             <iframe id="myIframe" scrolling="auto" frameborder="no" src="#{request.contextPath}/purchase/productDetail.seam?purchaseProductId=#{purchaseProductHome.purchaseProduct.purchaseProductInfoId}" width="100%" style="height:100%">
                                             </iframe> 
                                        
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </table>

                    </div>
                    <input type="text" style="display: none" value="#{purchaseProductHome.purchaseProductId}" id="purchaseProductId"/>
                    <h:form id="purchaseProduct" style = "display:none">
                    	<h:inputHidden value="#{purchaseProductHome.purchaseProductId}" id="purchaseProductIdHidden"/>
                    	 <h:inputHidden value="#{purchaseProductHome.displayName}" id="displayNameHidden"/>
                    	 <h:inputHidden value="#{purchaseProductHome.purchasePrice}" id="purchasePriceHidden"/>
                    	 <h:inputHidden value="#{purchaseProductHome.province}" id="provinceHidden"/>
                    	 <h:inputHidden value="#{purchaseProductHome.purchaseImgUrls}" id="purchaseImgUrlsHidden"/>
                    	 <h:inputHidden value="#{purchaseProductHome.optionProducts}" id="optionProductsHidden"/>
                    	 <h:inputHidden value="#{purchaseProductHome.purchaseIntroduction}" id="purchaseIntroductionHidden"/>
                    	 <h:inputHidden value="#{purchaseProductHome.farmIntroduction}" id="farmIntroductionHidden"/>
                    	 <!-- 四季田景 -->
                    	<h:inputHidden value="#{purchaseProductHome.krpanosFlag}" id="krpanosFlagHidden"/>
                    	 <h:inputHidden value="#{purchaseProductHome.krpanosGroupId}" id="krpanosGroupIdHidden"/>
                    	 <h:inputHidden value="#{purchaseProductHome.krpanosImageUrl}" id="krpanosImageUrlHidden"/>
                    	 <!-- 航拍视频 -->
                    	 <h:inputHidden value="#{purchaseProductHome.aerialVideoFlag}" id="aerialVideoFlagHidden"/>
                    	 <h:inputHidden value="#{purchaseProductHome.aerialVideoId}" id="aerialVideoIdHidden"/>
                    	 <h:inputHidden value="#{purchaseProductHome.aerialVideoImageUrl}" id="aerialVideoImageUrlHidden"/>
                    	 <!--  履历 -->
                    	 <h:inputHidden value="#{purchaseProductHome.productRecordFlag}" id="productRecordFlagHidden"/>
                    	 <h:inputHidden value="#{purchaseProductHome.productRecordId}" id="productRecordIdHidden"/>
                    	 <h:inputHidden value="#{purchaseProductHome.phoneModelInfoImageUrl}" id="phoneModelInfoImageUrlHidden"/>
                    	 <!-- 农场名片 -->
                    	 <h:inputHidden value="#{purchaseProductHome.farmShowFlag}" id="farmShowFlagHidden"/>
                    	 <h:inputHidden value="#{purchaseProductHome.farmShowId}" id="farmShowIdHidden"/>
                    	 <h:inputHidden value="#{purchaseProductHome.farmShowImgUrl}" id="farmShowImgUrlHidden"/>
                    	 <!-- 农场地图 -->
                    	 <h:inputHidden value="#{purchaseProductHome.farmMapFlag}" id="farmMapFlagHidden"/>
                    	 <h:inputHidden value="#{purchaseProductHome.farmMapId}" id="farMapIdHidden"/>
                    	 
                    	 <h:inputHidden value="#{purchaseProductHome.logoFlag}" id="logoFlagHidden"/>
                    	<!--  运费 -->
                    	 <h:inputHidden value="#{purchaseProductHome.ferightFlag}" id="ferightFlagHidden"/>
                    	 <h:inputHidden value="#{purchaseProductHome.feright}" id="ferightHidden"/>
                    	 <h:inputHidden value="#{purchaseProductHome.freeFeright}" id="freeFerightHidden"/>
                    	 <h:inputHidden value="#{purchaseProductHome.freeFerightFlag}" id="freeFerightFlagHidden"/>
                    	 
                    	 <h:inputHidden value="#{purchaseProductHome.notifyRecipientsFlag}" id="notifyRecipientsFlagHidden"/>
                    	 <h:inputHidden value="#{purchaseProductHome.shareTitle}" id="shareTitleHidden"/>
                    	 <h:inputHidden value="#{purchaseProductHome.shareDecsript}" id="shareDecsriptHidden"/>
                         <h:commandButton styleClass="btn btn-primary" value="保存" action="#{purchaseProductHome.purchaseSave()}" id="saveButton"></h:commandButton>
                    </h:form>
                    <h:form id="upFrame" style ="display:none">
                    	<h:inputHidden value="#{purchaseProductHome.purchaseProductId}" id="purchaseProductIdHidden"/>
                    	<h:inputHidden value="#{purchaseProductHome.upFrameFlag}"  id="upFrameFlagHidden"/>
                    	<h:commandButton styleClass="btn btn-primary" value="上下架" action="#{purchaseProductHome.upOrDownFrame()}" id="upOrDownButton" ></h:commandButton>
                    </h:form>
                    <div class="foot_btns">
                          <button type="button" class="btn btn-primary" onclick="checkSave()">保存</button>
                         <s:fragment rendered="#{purchaseProductHome.purchaseProduct.upFrameFlag eq null or purchaseProductHome.purchaseProduct.upFrameFlag eq false}" >
                          	<button type="button" class="btn btn-success ml15 mr15" onclick="checkProductUp()" >上架</button>
                          </s:fragment>
                          <s:fragment rendered="#{purchaseProductHome.purchaseProduct.upFrameFlag}" >
                          <button type="button" class="btn btn-default ml15 mr15" onclick="productDown()">下架</button>
                          </s:fragment>
                          <button type="button" class="btn btn-default" onclick="delPurchase()">删除</button>
                      </div>
             </div>
                <!-- 一键购买右侧 -->
                

<!-- (1)农场地图模态框 -->
<div class="modal fade" id="GroupModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-dialog pano_dialog group_dialog">
<div class="modal-content">
    <div class="modal-header clear">
        <h4 class="modal-title fl">农场地图</h4>
        <i class="i_close" data-dismiss="modal"></i>
    </div>
    <div class="modal-body modal_body">
        <div class="farm_select">
          <select class="selectpicker"     id="farmMapSelect"  >
            <option value="-1">请选择农场</option>
            <aaa:repeat value="#{sessionTake.baseModel.baseList}" var="_var" rowKeyVar="_index">
            	<s:fragment rendered="#{purchaseProductHome.purchaseProduct.farmMapId eq _var.id}">
            		<option value="#{_var.id}" selected="selected">#{_var.name}</option>
            	</s:fragment>
            	<s:fragment rendered="#{purchaseProductHome.purchaseProduct.farmMapId ne _var.id}">
            		<option value="#{_var.id}" >#{_var.name}</option>
            	</s:fragment>
            </aaa:repeat>
          </select>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-primary" onclick="farmMapConfirm()">确定</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">返回</button>
    </div>
</div>
</div>
</div>

<!-- 履历模态框 -->
  <div class="modal fade" id="resumeModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-dialog pano_dialog landscape_dialog ">
<div class="modal-content">
    <div class="modal-header clear">
        <h4 class="modal-title fl">履历选择</h4>
        <i class="i_close" data-dismiss="modal"></i>
    </div>
    <div class="modal-body modal_body">
      <table width="100%" cellpadding="0" cellspacing="0">
        <tr class="npad">
          <td class="former" width="130">选择履历</td>
          <td>
            <div class="Landscap fl">
             <rich:panel id="resumePanel" style="margin:0; border:none; padding: 0;">
	              <select class="selectpicker" data-live-search="true" title="请选择" onchange="selectChange(this,4)" id="resumeSelect">
	                <option value="-1">请选择</option>
	                <aaa:repeat  value="#{purchaseProductHome.recordList}" var="_productRecord" rowKeyVar="_index">
	                	<h:panelGroup rendered="#{_productRecord[3] eq 2 and  _productRecord[4] ne null and  _productRecord[4] ne ''}">
	                		<s:fragment rendered="#{purchaseProductHome.purchaseProduct.phoneModelInfoGroupId eq _productRecord[0]}">
								<option value="# _productRecord[0]}" selected="selected">#{_productRecord[2]}&#160;#{_productRecord[1]}-#{_productRecord[6]}</option>
							</s:fragment>
							<s:fragment rendered="#{purchaseProductHome.purchaseProduct.phoneModelInfoGroupId ne _productRecord[0]}">
								<option value="#{_productRecord[0]}">#{_productRecord[2]}&#160;#{_productRecord[1]}-#{_productRecord[6]}</option>
							</s:fragment>
						</h:panelGroup>
						<h:panelGroup rendered="#{_productRecord[3] eq 2 and (_productRecord[4] eq null or _productRecord[4] eq '')}">
							<s:fragment rendered="#{purchaseProductHome.purchaseProduct.phoneModelInfoGroupId eq _productRecord[0]}">
								<option value="#{_productRecord[0]}" selected="selected">#{_productRecord[2]}&#160;#{_productRecord[1]}-#{_productRecord[6]}</option>
							</s:fragment>
							<s:fragment rendered="#{purchaseProductHome.purchaseProduct.phoneModelInfoGroupId ne _productRecord[0]}">
								<option value="#{_productRecord[0]}" >#{_productRecord[2]}&#160;#{_productRecord[1]}-#{_productRecord[6]}</option>
							</s:fragment>
						</h:panelGroup>
						<h:panelGroup rendered="#{_productRecord[3] ne 2}">
							<s:fragment rendered="#{purchaseProductHome.purchaseProduct.phoneModelInfoGroupId eq _productRecord[0]}">
								<option value="#{_productRecord[0]}" selected="selected">#{_productRecord[2]}&#160;#{_productRecord[1]}-#{_productRecord[5]}</option>
							</s:fragment>
							<s:fragment rendered="#{purchaseProductHome.purchaseProduct.phoneModelInfoGroupId ne _productRecord[0]}">
								<option value="#{_productRecord[0]}" >#{_productRecord[2]}&#160;#{_productRecord[1]}-#{_productRecord[5]}</option>
							</s:fragment>
						</h:panelGroup>
                </aaa:repeat>
	              </select>
	         </rich:panel>
            </div>
          </td>
        </tr>
        <tr>
          <td class="former" style="vertical-align:top;">图片上传</td>
          <td>
            <ul class="pic_upload clear">
            <rich:panel id="phoneModelInfoPicPanel" style="margin:0; border:none; padding: 0;">
		              <li class="pic2"  id='pic4' style="#{purchaseProductHome.phoneModelInfoImageUrl ne null and purchaseProductHome.phoneModelInfoImageUrl ne '' ? '':'display:none'}">
		                  <img src="#{purchaseProductHome.phoneModelInfoImageUrl}" id="resumeImg"/>
		                  <span class="closed" onclick="delPic(4)"></span>
		              </li>
		    </rich:panel>
		              <li class="filing"  id="filing4" style="#{purchaseProductHome.phoneModelInfoImageUrl eq null or purchaseProductHome.phoneModelInfoImageUrl eq '' ? '':'display:none'}">
		                  <div id="container4">
								<div id="selectfiles4" class="">
									<img src="#{request.contextPath}/asset/images/dpadd.jpg" width="128" height="128" />
								</div>
								<a style="display: none" id="postfiles4"	href="javascript:void(0);" class='btn' onclick="apply(4,6);"></a> 
								<a style="display: none" id="callback4" href="javascript:void(0);" class='btn' onclick="callback4();"></a>
						  </div>
		              </li>
            </ul>
            <div id="ossfile4"></div>
          </td>
        </tr>
      </table>

    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-primary" onclick="resumeConfirm()">确定</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">返回</button>
    </div>
</div>
</div>
</div> 
<!-- 农场名片模态框 -->
 <div class="modal fade" id="farmShowModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-dialog pano_dialog landscape_dialog ">
<div class="modal-content">
    <div class="modal-header clear">
        <h4 class="modal-title fl">农场名片</h4>
        <i class="i_close" data-dismiss="modal"></i>
    </div>
    <div class="modal-body modal_body">
      <table width="100%" cellpadding="0" cellspacing="0">
        <tr class="npad">
          <td class="former" width="130">选择农场名片</td>
          <td>
            <div class="Landscap fl">
             <rich:panel id="propagandasPanel" style="margin:0; border:none; padding: 0;">
	              <select class="selectpicker" data-live-search="true" onchange="selectChange(this,5)" id="farmShowSelect">
	              				<option value="-1">请选择</option>
		                <aaa:repeat  value="#{purchaseProductHome.propagandasList}" var="_propagandas" rowKeyVar="_index">
		                	<s:fragment rendered="#{purchaseProductHome.purchaseProduct.propagandasGroupId eq _propagandas.propagandasId}">
		                		<option value="#{_propagandas.propagandasId}" selected="selected">#{_propagandas.projectName}</option>
		                	</s:fragment>
		                	<s:fragment rendered="#{purchaseProductHome.purchaseProduct.propagandasGroupId ne _propagandas.propagandasId}">
		                		<option value="#{_propagandas.propagandasId}" >#{_propagandas.projectName}</option>
		                	</s:fragment>
	                	</aaa:repeat>
	              </select>
	         </rich:panel>
            </div>
          </td>
        </tr>
        <tr>
          <td class="former" style="vertical-align:top;">图片上传</td>
          <td>
            <ul class="pic_upload clear">
            <rich:panel id="farmShowPicPanel" style="margin:0; border:none; padding: 0;">
		              <li class="pic2"  id='pic5' style="#{purchaseProductHome.farmShowImgUrl ne null and purchaseProductHome.farmShowImgUrl ne '' ? '':'display:none'}">
		                  <img src="#{purchaseProductHome.farmShowImgUrl}" id="farmShowImg"/>
		                  <span class="closed" onclick="delPic(5)"></span>
		              </li>
		     </rich:panel>
		              <li class="filing" id="filing5" style="#{purchaseProductHome.farmShowImgUrl eq null or purchaseProductHome.farmShowImgUrl eq '' ? '':'display:none'}">
		                  <div id="container5">
								<div id="selectfiles5" class="">
									<img src="#{request.contextPath}/asset/images/dpadd.jpg" width="128" height="128" />
								</div>
								<a style="display: none" id="postfiles5"	href="javascript:void(0);" class='btn' onclick="apply(5,6);"></a> 
								<a style="display: none" id="callback5" href="javascript:void(0);" class='btn' onclick="callback5();"></a>
						  </div>
		              </li>
            </ul>
            <div id="ossfile5"></div>
          </td>
        </tr>
      </table>

    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-primary" onclick="farmShowConfirm()">确定</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">返回</button>
    </div>
</div>
</div>
</div> 
<!-- (2)航拍视频选择模态框 -->
<div class="modal fade" id="AerialModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-dialog pano_dialog landscape_dialog">
<div class="modal-content">
    <div class="modal-header clear">
        <h4 class="modal-title fl">航拍视频选择</h4>
        <i class="i_close" data-dismiss="modal"></i>
    </div>
    <div class="modal-body modal_body">
      <table width="100%" cellpadding="0" cellspacing="0">
        <tr class="npad">
          <td class="former" width="130">选择航拍视频分组</td>
          <td>
            <div class="Landscap fl">
            <rich:panel id="aerialVideoGroupPanel" style="margin:0; border:none; padding: 0;">
              <select class="selectpicker" data-live-search="true" id="aerialVideoSelect"  onchange="selectChange(this,3)">
              	<option value="-1">请选择</option>
              	<aaa:repeat  value="#{purchaseProductHome.aerialVideoGroupList}" var="_aerialVideo" rowKeyVar="_index">
                	<s:fragment rendered="#{purchaseProductHome.purchaseProduct.aerialVideoGroupId eq _aerialVideo[0]}">
                		<option value="#{_aerialVideo[0]}" selected="selected">#{_aerialVideo[1]}</option>
                	</s:fragment>
                	<s:fragment rendered="#{purchaseProductHome.purchaseProduct.aerialVideoGroupId ne _aerialVideo[0]}">
                		<option value="#{_aerialVideo[0]}" >#{_aerialVideo[1]}</option>
                	</s:fragment>
                </aaa:repeat>
              </select>
           </rich:panel>
            </div>
          </td>
        </tr>
        <tr>
          <td class="former" style="vertical-align:top;">图片上传</td>
          <td>
            <ul class="pic_upload clear">
            <rich:panel id="aerialVideoPicPanel" style="margin:0; border:none; padding: 0;">
		              <li class="pic"  id='pic3' style = "#{purchaseProductHome.aerialVideoImageUrl ne null and purchaseProductHome.aerialVideoImageUrl ne '' ? '':'display:none'}">
		                  <img src="#{purchaseProductHome.aerialVideoImageUrl}" id="aerialVideoImg"/>
		                  <span class="closed" onclick="delPic(3)"></span>
		              </li>
		     </rich:panel>
		              <li class="filing"  id="filing3" style = "#{purchaseProductHome.aerialVideoImageUrl eq null or purchaseProductHome.aerialVideoImageUrl eq '' ? '':'display:none'}">
		                  <div id="container3">
								<div id="selectfiles3" class="">
									<img src="#{request.contextPath}/asset/images/dpadd.jpg" width="128" height="128" />
								</div>
								<a style="display: none" id="postfiles3"	href="javascript:void(0);" class='btn' onclick="apply(3,6);"></a> 
								<a style="display: none" id="callback3" href="javascript:void(0);" class='btn' onclick="callback3();"></a>
						  </div>
		              </li>
            </ul>
             <div id="ossfile3"></div>
          </td>
        </tr>
      </table>

    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-primary" onclick="aerialConfirm()">确定</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">返回</button>
    </div>
</div>
</div>
</div>
<!-- (3)四季田景选择模态框 -->
<div class="modal fade" id="LandscapeModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-dialog pano_dialog landscape_dialog">
<div class="modal-content">
    <div class="modal-header clear">
        <h4 class="modal-title fl">四季田景选择</h4>
        <i class="i_close" ></i>
    </div>
    <div class="modal-body modal_body">
      <table width="100%" cellpadding="0" cellspacing="0">
        <tr class="npad">
          <td class="former" width="130">选择四季田景分组</td>
          <td>
           <rich:panel id="krpanosGroupPanel" style="margin:0; border:none; padding: 0;">
            <!-- <div class="Landscap fl"> -->
              <select class="selectpicker" data-live-search="true" id="krpanosGroupSelect" onchange="selectChange(this,2)">
              	<option value="-1">请选择</option>
              	<aaa:repeat  value="#{purchaseProductHome.krpanosGroupList}" var="_krpanosGroup" rowKeyVar="_index" >
              		 <s:fragment rendered="#{purchaseProductHome.purchaseProduct.krpanosGroupId eq _krpanosGroup[0]}">
                		<option value="#{_krpanosGroup[0]}" selected="selected">#{_krpanosGroup[1]}</option>
                	</s:fragment>
                	<s:fragment rendered="#{purchaseProductHome.purchaseProduct.krpanosGroupId ne _krpanosGroup[0]}"> 
                		<option value="#{_krpanosGroup[0]}" >#{_krpanosGroup[1]}</option>
                	</s:fragment> 
                </aaa:repeat>
              </select>
           <!--  </div> -->
           </rich:panel>
          </td>
        </tr>
        <tr>
          <td class="former" style="vertical-align:top;">图片上传</td>
          <td>
            <ul class="pic_upload clear">
            <rich:panel id="krpanosPicPanel" style="margin:0; border:none; padding: 0;">
		              <li class="pic" id='pic2' style="#{purchaseProductHome.krpanosImageUrl ne null and purchaseProductHome.krpanosImageUrl ne '' ? '':'display:none'}">
		                  <img src="#{purchaseProductHome.krpanosImageUrl}"  id="krpanosImg"/>
		                  <span class="closed" onclick="delPic(2)"></span>
		              </li>
		    </rich:panel>
		              <li class="filing"  id="filing2" style="#{purchaseProductHome.krpanosImageUrl eq null or purchaseProductHome.krpanosImageUrl eq '' ? '':'display:none'}">
		                  <div id="container2">
								<div id="selectfiles2" class="">
									<img src="#{request.contextPath}/asset/images/dpadd.jpg" width="128" height="128" />
								</div>
								<a style="display: none" id="postfiles2"	href="javascript:void(0);" class='btn' onclick="apply(2,6);"></a> 
								<a style="display: none" id="callback2" href="javascript:void(0);" class='btn' onclick="callback2();"></a>
							</div>
		              </li>
            </ul>
            <div id="ossfile2"></div>
          </td>
        </tr>
      </table>

    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-primary" onclick="krpanosConfirm()">确定</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">返回</button>
    </div>
</div>
</div>
</div>
<!-- (4)评论管理模态框 -->
<div class="modal fade" id="CommentModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-dialog pano_dialog comment_dialog">
<div class="modal-content">
    <div class="modal-header clear">
        <h4 class="modal-title fl">评论管理</h4>
        <i class="i_close" data-dismiss="modal"></i>
    </div>
    <rich:panel id="commentPanel" style="margin:0; border:none; padding: 0;">
    <div class="modal-body modal_body">
        <table class="edit_infor_table" cellpadding="0" cellspacing="0" id="commentTable">
        	<tr class="item_tr">
            	<th width="290">
                	<div class="inline_block fl mr5 ml5" style="padding-top:8px;">
                    <input class="iCheck" type="checkbox" allaa="unchecked" id="allCheck" onchange="commentAllCheck()"/>
                    <label class="pl5">全选</label>
                  </div>
                  
                <div class="public-search fl ml10 mr5">
                    <span class="octicon-search02"></span>
                    <input type="text" value="#{purchaseProductHome.comments}" class="form-control mr5 w200" id="productCommentId"/>
                  </div>
              </th>
              <th width="180">
                <span class="fl" style="line-height:34px;">评论：</span>
                <div class="stars fl">
                  <select class="selectpicker" id="commentLevel" onchange="searchByCondition()">
                  	<s:fragment rendered="#{purchaseProductHome.commentLevel eq -1 }">
                    	<option value="-1" selected="selected">请选择</option>
                    </s:fragment>
                    <s:fragment rendered="#{purchaseProductHome.commentLevel ne -1 }">
                    	<option value="-1">请选择</option>
                    </s:fragment>
                    <s:fragment rendered="#{purchaseProductHome.commentLevel eq 1 }">
                    	<option value="1" selected="selected">好评</option>
                    </s:fragment>
                    <s:fragment rendered="#{purchaseProductHome.commentLevel ne 1 }">
                    	<option value="1">好评</option>
                    </s:fragment>
                    <s:fragment rendered="#{purchaseProductHome.commentLevel eq 2 }">
                    	<option value="2" selected="selected">中评</option>
                    </s:fragment>
                    <s:fragment rendered="#{purchaseProductHome.commentLevel ne 2 }">
                    	<option value="2">中评</option>
                    </s:fragment>
                    <s:fragment rendered="#{purchaseProductHome.commentLevel eq 3 }">
                    	<option value="3" selected="selected">差评</option>
                    </s:fragment>
                    <s:fragment rendered="#{purchaseProductHome.commentLevel ne 3 }">
                    	<option value="3">差评</option>
                    </s:fragment>
                  </select>
                </div>
                
              </th>
            	<th width="190">
                	<p class="text_th">评论人</p>
                </th>
            	<th width="170">
                	<p class="text_th">评论日期</p>
                </th>
            	<th>
                	<p class="text_th">
                		<span class="icon_delete" onClick="deleteCommentAll()">批量删除</span>
                    </p>
                </th>                
            </tr>
            <s:fragment rendered="#{purchaseProductHome.productCommentList ne null and purchaseProductHome.productCommentList.size() ge 0}">
            <aaa:repeat  value="#{purchaseProductHome.productCommentList}" var="_comment" rowKeyVar="_index">
        	<tr class="item_tr commenttb" name="commenttb">
            	<td>
                	<div class="inline_block fl mr5 mt5 ml5">
                        <input class="iCheck" type="checkbox" itembb="unchecked"  name="commentCheck"/>
                    </div>
                    <input type="text" style="display:none" class="commentId" value="#{_comment[4]}"/>
                    <p class="text_name" title="#{_comment[0]}">#{_comment[0]}</p>
                </td>
                <td>
                  <img src="#{request.contextPath}/asset/images/purchase/star1.png" alt=""/>
                  <s:fragment rendered="#{_comment[1] ge 2}">
                  	<img src="#{request.contextPath}/asset/images/purchase/star1.png" alt="" a="4"/>
                  </s:fragment>
                  <s:fragment rendered="#{_comment[1] 	lt 2}">
                  	<img src="#{request.contextPath}/asset/images/purchase/star2.png" alt="" a="4"/>
                  </s:fragment>
                  <s:fragment rendered="#{_comment[1] ge 3}">
                  	<img src="#{request.contextPath}/asset/images/purchase/star1.png" alt="" a="3"/>
                  </s:fragment>
                  <s:fragment rendered="#{_comment[1] lt 3}">
                  	<img src="#{request.contextPath}/asset/images/purchase/star2.png" alt="" a="3"/>
                  </s:fragment>
                  <s:fragment rendered="#{_comment[1] ge 4}">
                  	<img src="#{request.contextPath}/asset/images/purchase/star1.png" alt="" a="2"/>
                  </s:fragment>
                  <s:fragment rendered="#{_comment[1] 	lt 4}">
                  	<img src="#{request.contextPath}/asset/images/purchase/star2.png" alt="" a="2"/>
                  </s:fragment>
                  <s:fragment rendered="#{_comment[1] ge 5}">
                  	<img src="#{request.contextPath}/asset/images/purchase/star1.png" alt="" a="1"/>
                  </s:fragment>
                  <s:fragment rendered="#{_comment[1] 	lt 5}">
                  	<img src="#{request.contextPath}/asset/images/purchase/star2.png" alt="" a="1"/>
                  </s:fragment>
                </td>
                <td>
                	<img class="people_pic" src="#{_comment[3]}" />
                </td>
                <td>#{_comment[2]} </td>
                <td>
                	<span class="icon_delete" onClick="delComment(this,'.item_tr')">删除</span>
                </td>
            </tr>
            </aaa:repeat>
            </s:fragment>
        </table>
        <div class="pageModel_wap" style="padding:50px 0 30px;">
          <h:form id="pageFrom" rendered="#{null ne purchaseProductHome.productCommentList and purchaseProductHome.productCommentList.size() gt 0}">
			<table style="height:30px; margin:40px auto 0 auto;" cellpadding="0" cellspacing="0">
				<tr>
					<s:fragment rendered="#{!purchaseProductHome.hasPreviousPage }">
						<td><img src="#{request.contextPath}/asset/images/page_68.jpg" width="4" height="32" /></td>
					</s:fragment>
					<s:fragment rendered="#{purchaseProductHome.hasPreviousPage and purchaseProductHome.totalPages > 1}">
						<td><img src="#{request.contextPath}/asset/images/page_67.jpg" width="4" height="32" /></td>
						<td class="td_t_b">
							<aaa:commandLink style="color:#333333;" id="firstPage" onclick="queryPage(1)" rendered="#{purchaseProductHome.hasPreviousPage and purchaseProductHome.totalPages > 1}" >首页</aaa:commandLink>
						</td>
						<td class="td_t_b td_t_t" style="padding:0; width:30px;">
							<aaa:commandLink styleClass="no_n" id="previousPage" onclick="queryPage(#{purchaseProductHome.previousPage})"  >&lt;</aaa:commandLink>
						</td>
					</s:fragment>
					<aaa:repeat var="_page" value="#{purchaseProductHome.showPageList}" rowKeyVar="_index">
						<s:fragment rendered="#{_page gt 0 and _page le purchaseProductHome.totalPages}">
							<td class="td_t_b #{purchaseProductHome.hasPreviousPage  or _index >0 ?' td_t_t' : ''} #{_page eq purchaseProductHome.commPage ? 'onp' : ''}" >
								<aaa:commandLink id="thisPage"  onclick="queryPage(#{_page})"  >#{_page}</aaa:commandLink>
							</td>
						</s:fragment>
					</aaa:repeat>
					<s:fragment rendered="#{purchaseProductHome.commentNextPage}">
						<td class="td_t_b td_t_t">
							<aaa:commandLink styleClass="no_d"  id="nextPage" onclick="queryPage(#{purchaseProductHome.nextPage})" rendered="#{purchaseProductHome.commentNextPage and purchaseProductHome.totalPages > 1}" >&gt;</aaa:commandLink>
						</td>
						<td class="td_t_b td_t_t">
							<aaa:commandLink style="color:#333333;"  id="lastPage" onclick="queryPage(#{purchaseProductHome.totalPages})" rendered="#{purchaseProductHome.commentNextPage and purchaseProductHome.totalPages > 1}" >尾页</aaa:commandLink>
						</td>
					</s:fragment>
					<td class="td_t_b td_t_t" style=" color:#9a9a9c;">共#{purchaseProductHome.totalPages}页</td>
					<td ><img src="#{request.contextPath}/asset/images/page_70.jpg" width="4" height="32" /></td>
				</tr>
			</table>
		</h:form>
    </div> 
    <s:fragment rendered="#{purchaseProductHome.productCommentList eq null or purchaseProductHome.productCommentList.size() eq 0}">
    	<div style="text-align: center;padding: 0px 0 30px;">
	    	<img src="#{request.contextPath}/asset/images/purchase/noproduct.png" alt="" style="text-align:center"/>
	    	<p style="text-align:center">未搜索到评论</p>
    	</div>
    </s:fragment>
    </div>
     </rich:panel>
    <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-dismiss="modal">保存</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
    </div>
</div>
</div>
</div>
<!-- (5)排序管理模态框 -->
<div class="modal fade" id="SortModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-dialog pano_dialog sort_dialog">
<div class="modal-content">
    <div class="modal-header clear">
        <h4 class="modal-title fl">排序图片</h4>
        <i class="i_close" data-dismiss="modal"></i>
    </div>
    <div class="modal-body modal_body">
    
        <!--<div id="messageValue"></div>-->
        <div class="sp_px">
        <div class="ordering-list select-list" tabindex="-1">
            <div class="content with-handle">
                <div class="scroll-box">
                    <ol id="list_dragselect" class="list ui-sortable ui-selectable">
                    <rich:panel id="sortPicPanel" style="margin:0; border:none; padding: 0;">
                    <aaa:repeat  value="#{purchaseProductHome.productImageUrlList}" var="_url" rowKeyVar="_index">
                    	<li class="ui-selectee" data-key="7"><img class="pano_pic" src="#{_url}" />图片#{_index+1}<input type="hidden" value="4084_1_6" id="parIdObj_7" class="testClass"/></li>
                    </aaa:repeat>
                    </rich:panel>
                    </ol>
                
                </div>
            </div>
        </div>
        </div>
        
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-primary"  onclick="picSort()">确定</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">返回</button>
    </div>
</div>
</div>
</div>
<!-- (6)运费模态框 -->
<div class="modal fade" id="FreightModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-dialog pano_dialog freight_dialog newMagrin">
<div class="modal-content">
    <div class="modal-header clear">
        <h4 class="modal-title fl">运费</h4>
    </div>
    <div class="modal-body modal_body">
      <div class="item">
        <span>运费：</span>
        ￥<input type="text" value="#{purchaseProductHome.purchaseProduct.freightPrice}" onkeyup="numberCheck(this)" id="setFreight"/>
      </div>
      <div class="item">
        <span>需满：</span>
        ￥<input type="text" value="#{purchaseProductHome.purchaseProduct.freeFreightPrice}" onkeyup="numberCheck(this)" id="setFreeFreight"/>
        <div class="inline_block" style="padding-top:8px; position: relative; width: 100px;">
          <input class="iCheck" type="checkbox" allaa="unchecked" id="setFreeFreightFlag" style="width: 18px; height: 18px; position: absolute; top: 12px;"/>
          <label style="font-weight:normal; padding-left: 25px;">包邮</label>
        </div>
      </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-primary"  onclick="settingFreight()">确定</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">返回</button>
    </div>
</div>
</div>
</div>
<!-- 2016.11.25新加下架弹窗 -->
<div class="modal fade" id="shelfModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-dialog  pano_dialog landscape_dialog">
<div class="modal-content">
    <div class="modal-header clear">
        <h4 class="modal-title fl">消息</h4>
        <i class="i_close" data-dismiss="modal"></i>
    </div>
    <div class="modal-body modal_body" style="text-align:center; height:210px;">
        <img src="#{request.contextPath}/asset/images/purchase/shelfTip.png" style="margin: 25px 0 20px 0;"/>
        <p style="line-height: 24px;" id="orderMesg">
          我们发现您订单模块没有启用【订单待发货】与【订单配送中】模块，<br/>
          这对访问您【一键购买】的消费者会产生误会，<br/>
          因此我们已经自动帮您启用该模块。
        </p>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-primary" onclick="upProduct()">确定</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">返回</button>
    </div>
</div>
</div>
</div>
</div>   
</s:fragment>
</td> 
	<aaa:form>
		<aaa:jsFunction name="findProductInfo" action="#{purchaseProductHome.findProductInfo()}"   reRender="productListPanel"  oncomplete="toAddProductAfter()">
			<aaa:actionparam name="productInfoName" assignTo="#{purchaseProductHome.productInfoName}"/>
		</aaa:jsFunction>
		<aaa:jsFunction name="findProductByName" action="#{purchaseProductHome.findProductInfo()}"   reRender="productListNamePanel">
			<aaa:actionparam name="productInfoName" assignTo="#{purchaseProductHome.productInfoName}"/>
		</aaa:jsFunction>
		<aaa:jsFunction name="valueBuyFlag" action="#{purchaseProductHome.valueBuyFlag()}" data="#{purchaseProductHome.serviceUseCondition}"  oncomplete="valueCheakComplete(data)">
			<aaa:actionparam name="valueServiceType" assignTo="#{purchaseProductHome.valueServiceType}"/>
		</aaa:jsFunction>
		<aaa:jsFunction name="findKrpanosGroup" action="#{purchaseProductHome.findKrpanosGroup()}" reRender="krpanosGroupPanel" oncomplete="modelShow(1)">
		</aaa:jsFunction>
		<aaa:jsFunction name="searchAerialVideoGroupList" action="#{purchaseProductHome.searchAerialVideoGroupList()}" reRender="aerialVideoGroupPanel" oncomplete="modelShow(2)">
		</aaa:jsFunction>
		<aaa:jsFunction name="searchPhoneModelInfoList" action="#{purchaseProductHome.searchPhoneModelInfoList()}" reRender="resumePanel" oncomplete="modelShow(3)">
		</aaa:jsFunction>
		<aaa:jsFunction name="searchPropagandasList" action="#{purchaseProductHome.searchPropagandasList()}" reRender="propagandasPanel" oncomplete="modelShow(4)">
		</aaa:jsFunction>
		<aaa:jsFunction name="productImgUp" action="#{purchaseProductHome.productImgUp()}" reRender="productImgPanel,sortPicPanel" data="#{purchaseProductHome.productImgUrl}" oncomplete="productPicComplete(data)">
			<aaa:actionparam name="productUrl" assignTo="#{purchaseProductHome.productImgUrl}"/>
		</aaa:jsFunction>
		<aaa:jsFunction name="productImgDel" action="#{purchaseProductHome.productImgDel()}" reRender="productImgPanel,sortPicPanel"  data="#{purchaseProductHome.productImgUrl}" oncomplete="productPicComplete(data)">
			<aaa:actionparam name="imgIndex" assignTo="#{purchaseProductHome.imgIndex}"/>
			<aaa:actionparam name="productImgUrl" assignTo="#{purchaseProductHome.productImgUrl}"/>
		</aaa:jsFunction>
		<aaa:jsFunction name="krpanosPicUp" action="#{purchaseProductHome.krpanosPicUp()}" reRender="krpanosPicPanel"  oncomplete="upPicComplete(2)">
			<aaa:actionparam name="krpanosImageUrl" assignTo="#{purchaseProductHome.krpanosImageUrl}"/>
		</aaa:jsFunction>
		<aaa:jsFunction name="aerialVideoPicUp" action="#{purchaseProductHome.aerialVideoPicUp()}" reRender="aerialVideoPicPanel"  oncomplete="upPicComplete(3)">
			<aaa:actionparam name="aerialVideoImageUrl" assignTo="#{purchaseProductHome.aerialVideoImageUrl}"/>
		</aaa:jsFunction>
		<aaa:jsFunction name="phoneModelInfoPicUp" action="#{purchaseProductHome.phoneModelInfoPicUp()}" reRender="phoneModelInfoPicPanel"  oncomplete="upPicComplete(4)">
			<aaa:actionparam name="phoneModelInfoImageUrl" assignTo="#{purchaseProductHome.phoneModelInfoImageUrl}"/>
		</aaa:jsFunction>
		<aaa:jsFunction name="farmShowPicUp" action="#{purchaseProductHome.farmShowPicUp()}" reRender="farmShowPicPanel"  oncomplete="upPicComplete(5)">
			<aaa:actionparam name="farmShowImgUrl" assignTo="#{purchaseProductHome.farmShowImgUrl}"/>
		</aaa:jsFunction>
		<aaa:jsFunction name="selectKrpanosGroup" action="#{purchaseProductHome.selectKrpanosGroup()}" reRender="krpanosPicPanel"  oncomplete="selectChangeComplete(2)">
			<aaa:actionparam name="krpanosGroupId" assignTo="#{purchaseProductHome.krpanosGroupId}"/>
		</aaa:jsFunction>
		<aaa:jsFunction name="selectResume" action="#{purchaseProductHome.selectResume()}" reRender="phoneModelInfoPicPanel"  oncomplete="selectChangeComplete(4)">
			<aaa:actionparam name="productRecordId" assignTo="#{purchaseProductHome.productRecordId}"/>
		</aaa:jsFunction>
		<aaa:jsFunction name="selectAeriaVideo" action="#{purchaseProductHome.selectAeriaVideo()}" reRender="aerialVideoPicPanel"  oncomplete="selectChangeComplete(3)">
			<aaa:actionparam name="aerialVideoId" assignTo="#{purchaseProductHome.aerialVideoId}"/>
		</aaa:jsFunction>
		<aaa:jsFunction name="selectPropaganda" action="#{purchaseProductHome.selectPropaganda()}" reRender="farmShowPicPanel"  oncomplete="selectChangeComplete(5)">
			<aaa:actionparam name="farmShowId" assignTo="#{purchaseProductHome.farmShowId}"/>
		</aaa:jsFunction>
		<aaa:jsFunction name="krpanosPicDel" action="#{purchaseProductHome.krpanosPicDel()}" reRender="krpanosPicPanel"  oncomplete="delPicComplete(2)">
		</aaa:jsFunction>
		<aaa:jsFunction name="aerialVideoPicDel" action="#{purchaseProductHome.aerialVideoPicDel()}" reRender="aerialVideoPicPanel"  oncomplete="delPicComplete(3)">
		</aaa:jsFunction>
		<aaa:jsFunction name="phoneModelInfoPicDel" action="#{purchaseProductHome.phoneModelInfoPicDel()}" reRender="phoneModelInfoPicPanel"  oncomplete="delPicComplete(4)">
		</aaa:jsFunction>
		<aaa:jsFunction name="farmShowPicDel" action="#{purchaseProductHome.farmShowPicDel()}" reRender="farmShowPicPanel"  oncomplete="delPicComplete(5)">
		</aaa:jsFunction>
		<aaa:jsFunction name="selectOptionProduct" action="#{purchaseProductHome.selectOptionProduct()}" reRender="optionProductPanel"  >
				<aaa:actionparam name="optionProductIds" assignTo="#{purchaseProductHome.optionProductIds}"/>
		</aaa:jsFunction>
		<aaa:jsFunction name="searchComment" action="#{purchaseProductHome.searchComment()}" reRender="commentPanel"  oncomplete="commentButtonComplete()">
				<aaa:actionparam name="comments" assignTo="#{purchaseProductHome.comments}"/>
				<aaa:actionparam name="commentLevel" assignTo="#{purchaseProductHome.commentLevel}"/>
		</aaa:jsFunction>
		<aaa:jsFunction name="searchCommentByName" action="#{purchaseProductHome.searchComment()}" reRender="commentPanel"  oncomplete="commentButtonComplete()">
				<aaa:actionparam name="comments" assignTo="#{purchaseProductHome.comments}"/>
				<aaa:actionparam name="commentLevel" assignTo="#{purchaseProductHome.commentLevel}"/>
				<aaa:actionparam name="commPage" assignTo="#{purchaseProductHome.commPage}"/>
		</aaa:jsFunction>
		<aaa:jsFunction name="searchProductList" action="#{purchaseProductHome.searchProductList()}"  reRender="purchaseListPanel" data="#{purchaseProductHome.purchaseList}" oncomplete="searchProductListComplete(data)">
				<aaa:actionparam name="purchaseProductName" assignTo="#{purchaseProductHome.purchaseProductName}"/>
		</aaa:jsFunction>
		<aaa:jsFunction name="checkProduct" action="#{purchaseProductHome.checkProduct()}"  data="#{purchaseProductHome.mesg}"  oncomplete="checkProductUpComplete(data)">
				<aaa:actionparam name="purchaseProductInfoId" assignTo="#{purchaseProductHome.purchaseProductInfoId}"/>
		</aaa:jsFunction>
		<aaa:jsFunction name="searchFarmMap" action="#{purchaseProductHome.searchFarmMap()}"  data="#{purchaseProductHome.coordinate}"  oncomplete="farmMapConfirmComplete(data)">
				<aaa:actionparam name="baseId" assignTo="#{purchaseProductHome.baseId}"/>
		</aaa:jsFunction>
		<aaa:jsFunction name="productPicSort" action="#{purchaseProductHome.productPicSort()}"  reRender="productImgPanel,sortPicPanel"  oncomplete="picSortComplete()">
				<aaa:actionparam name="productImgUrl" assignTo="#{purchaseProductHome.productImgUrl}"/>
		</aaa:jsFunction>
		<aaa:jsFunction name="deleteComment" action="#{purchaseProductHome.deleteComment()}"  reRender="commentPanel"  oncomplete="commentButtonComplete()">
				<aaa:actionparam name="productCommentId" assignTo="#{purchaseProductHome.productCommentId}"/>
		</aaa:jsFunction>
		<aaa:jsFunction name="purchaseDelete" action="#{purchaseProductHome.purchaseDelete()}"  >
				<aaa:actionparam name="purchaseProductId" assignTo="#{purchaseProductHome.purchaseProductId}"/>
		</aaa:jsFunction>
		<aaa:jsFunction name="checkOrderSetting" action="#{purchaseProductHome.checkOrderSetting()}"  data="#{purchaseProductHome.mesg}"  oncomplete="checkOrderStatus(data)">
		</aaa:jsFunction>
	</aaa:form>
<script type="text/javascript" src="#{request.contextPath}/asset/js/purchase/sort/richwidgets-demo.js"></script> 
<!--[if IE 8]>
<script type="text/javascript" src="#{request.contextPath}/asset/js/purchase/bootstrap/respond.js"></script>
<![endif]-->
<script type="text/javascript" src="#{request.contextPath}/asset/js/purchase/bootstrap/icheck.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/lib/plupload-2.1.2/js/plupload.full.min.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/purchase/purchasePicUpload.js"></script>
<script type="text/javascript" src="#{request.contextPath}/asset/js/purchase/purchase.js"></script>
<script type="text/javascript">
//<![CDATA[
           var oss_url = "#{dataDicConstant.getOssUrl()}";

$(document).ready(function(){
	/* 富文本编辑器 */
	KindEditor.ready(
			function(K) {
				editor = K.create('textarea[name="productIntroduction"]', {
				resizeType : 1,
				allowPreviewEmoticons : false,
				uploadJson : '#{request.contextPath}/asset/js/kindeditor/upload_json.jsp?directoryType=32&businessType=4&enterpriseId=' + #{sessionTake.getEnterpriseInfoId()},
				allowImageUpload : true,
				items:[
				        'source', '|', 'undo', 'redo', '|', 'preview', 'print', 'template', 'code', 'cut', 'copy', 'paste',
				        'plainpaste', 'wordpaste', '|', 'justifyleft', 'justifycenter', 'justifyright',
				        'justifyfull', 'insertorderedlist', 'insertunorderedlist', 'indent', 'outdent', 'subscript',
				        'superscript', 'clearhtml', 'quickformat', 'selectall', '|', 'fullscreen', '/',
				        'formatblock', 'fontname', 'fontsize', '|', 'forecolor', 'hilitecolor', 'bold',
				        'italic', 'underline', 'strikethrough', 'lineheight', 'removeformat', '|', 'image', 'multiimage',
				        'table', 'hr', 'emoticons', 'baidumap', 'pagebreak',
				        'anchor', 'link', 'unlink',
				],
			});
		});
	$(".ke-edit-iframe ").contents().find(".ke-content").css("height","328");

	/* 富文本编辑器 农场简介*/
	KindEditor.ready(
			function(K) {
				editor = K.create('textarea[name="farmIntroduction"]', {
				resizeType : 1,
				allowPreviewEmoticons : false,
				uploadJson : '#{request.contextPath}/asset/js/kindeditor/upload_json.jsp?directoryType=32&businessType=4&enterpriseId=' + #{sessionTake.getEnterpriseInfoId()},
				allowImageUpload : true,
				items:[
				        'source', '|', 'undo', 'redo', '|', 'preview', 'print', 'template', 'code', 'cut', 'copy', 'paste',
				        'plainpaste', 'wordpaste', '|', 'justifyleft', 'justifycenter', 'justifyright',
				        'justifyfull', 'insertorderedlist', 'insertunorderedlist', 'indent', 'outdent', 'subscript',
				        'superscript', 'clearhtml', 'quickformat', 'selectall', '|', 'fullscreen', '/',
				        'formatblock', 'fontname', 'fontsize', '|', 'forecolor', 'hilitecolor', 'bold',
				        'italic', 'underline', 'strikethrough', 'lineheight', 'removeformat', '|', 'image', 'multiimage',
				        'table', 'hr', 'emoticons', 'baidumap', 'pagebreak',
				        'anchor', 'link', 'unlink',
				],
			});
		});
	$(".ke-edit-iframe ").contents().find(".ke-content").css("height","328");

	
	//#{purchaseProductHome.purchaseProduct.shareDescription eq null ? '请输入描述内容' : purchaseProductHome.purchaseProduct.shareDescription} eq null ? '请输入描述内容' : purchaseProductHome.purchaseProduct.shareDescription}
	var shareDesc = "#{purchaseProductHome.purchaseProduct.shareDescription}";
	if(shareDesc == "" ){
		$("#shareDescription").val('请输入描述内容');
	}else{
		$("#shareDescription").val(shareDesc.replace(/<\/br\>/g,"\n"));
	}
});

	//图片上传
	function apply(num,obj){
		var entId='#{sessionTake.getEnterpriseInfoId()}';
		if(num==1){
			set_upload_param(uploader1, '', false,obj,entId);
		}else if(num==2){
			set_upload_param(uploader2, '', false,obj,entId);
		}else if(num==3){
			set_upload_param(uploader3, '', false,obj,entId);
		}else if(num==4){
			set_upload_param(uploader4, '', false,obj,entId);
		}else if(num==5){
			set_upload_param(uploader5, '', false,obj,entId);
		}
		
	}

	$(function(){
		var krpanosFlag = "#{purchaseProductHome.purchaseProduct.krpanos4groupFlag}";
		var aerialVideoFlag = "#{purchaseProductHome.purchaseProduct.aerialVideoFlag}";
		var productRecordFlag = "#{purchaseProductHome.purchaseProduct.phoneModelInfoFlag}";
		var propagandasFlag = "#{purchaseProductHome.purchaseProduct.propagandasFlag}";
		var farmMapFlag = "#{purchaseProductHome.purchaseProduct.farmMapFlag}";
		var logoFlag = "#{purchaseProductHome.purchaseProduct.logoFlag}";
		var freightFlag = "#{purchaseProductHome.purchaseProduct.freightFlag}";
		var freefreightPriceFlag = "#{purchaseProductHome.purchaseProduct.freefreightPriceFlag}";
		var notifyRecipientsFlag = "#{purchaseProductHome.purchaseProduct.notifyRecipientsFlag}";
		var optionProductIds = "#{purchaseProductHome.purchaseProduct.optionalProductInfoId}";

		if(krpanosFlag == "true"){
			jQuery("#streetFlag").iCheck('check');
		}
		if(aerialVideoFlag == "true"){
			jQuery("#aerialVideoFlag").iCheck('check');
		}
		if(productRecordFlag == "true"){
			jQuery("#resumeFlag").iCheck('check');
		}
		if(propagandasFlag == "true"){
			jQuery("#farmShowFlag").iCheck('check');
		}
		if(farmMapFlag == "true"){
			jQuery("#farmMapFlag").iCheck('check');
		}
		if(logoFlag == "true"){
			jQuery("#logoFlag").iCheck('check');
		}
		if(freightFlag == "true"){
			jQuery("#freeFreightPriceFlag").iCheck('check');
		}
		if(freefreightPriceFlag == "true"){
			jQuery("#setFreeFreightFlag").iCheck('check');
		}
		if(notifyRecipientsFlag == "true"){
			jQuery("#notifyRecipientsFlag").iCheck('check');
		}
		  if(optionProductIds != ""){
				var idArr = optionProductIds.split(",");
				$("#optionSelect").selectpicker("val",idArr);
		 }
		var mesgByOrderStatus = "#{purchaseProductHome.mesgByOrderStatus}";
		if(mesgByOrderStatus != ""){
			$("#orderMesg").html(mesgByOrderStatus);
			$(".remind").show();
		}else{
			$(".remind").hide();
		}
		
	});

	function downloadPic(src) {
	    var $a = $("<a></a>").attr("href", src).attr("download", "img.png");
	    $a[0].click();
	}
//]]>
</script>
	</ui:define>

</ui:composition>


